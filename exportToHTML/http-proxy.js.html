<html>
<head>
<title>http-proxy.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #7a7e85;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #67a37c; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
http-proxy.js</font>
</center></td></tr></table>
<pre> <span class="s1">// Use explicit /index.js to help browserify negociation in require '/lib/http-proxy' (!)</span>
<span class="s2">var </span><span class="s0">ProxyServer </span><span class="s3">= </span><span class="s0">require</span><span class="s3">(</span><span class="s4">'./http-proxy/index.js'</span><span class="s3">).</span><span class="s0">Server</span><span class="s3">;</span>


<span class="s5">/**</span>
 <span class="s5">* Creates the proxy server.</span>
 <span class="s5">*</span>
 <span class="s5">* Examples:</span>
 <span class="s5">*</span>
 <span class="s5">*    httpProxy.createProxyServer({ .. }, 8000)</span>
 <span class="s5">*    // =&gt; '{ web: [Function], ws: [Function] ... }'</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object} Options Config object passed to the proxy</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@return </span><span class="s5">{Object} Proxy Proxy object with handlers for `ws` and `web` requests</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@api </span><span class="s5">public</span>
 <span class="s5">*/</span>


<span class="s2">function </span><span class="s0">createProxyServer</span><span class="s3">(</span><span class="s0">options</span><span class="s3">) {</span>
  <span class="s1">/* 
   *  `options` is needed and it must have the following layout: 
   * 
   *  { 
   *    target : &lt;url string to be parsed with the url module&gt; 
   *    forward: &lt;url string to be parsed with the url module&gt; 
   *    agent  : &lt;object to be passed to http(s).request&gt; 
   *    ssl    : &lt;object to be passed to https.createServer()&gt; 
   *    ws     : &lt;true/false, if you want to proxy websockets&gt; 
   *    xfwd   : &lt;true/false, adds x-forward headers&gt; 
   *    secure : &lt;true/false, verify SSL certificate&gt; 
   *    toProxy: &lt;true/false, explicitly specify if we are proxying to another proxy&gt; 
   *    prependPath: &lt;true/false, Default: true - specify whether you want to prepend the target's path to the proxy path&gt; 
   *    ignorePath: &lt;true/false, Default: false - specify whether you want to ignore the proxy path of the incoming request&gt; 
   *    localAddress : &lt;Local interface string to bind for outgoing connections&gt; 
   *    changeOrigin: &lt;true/false, Default: false - changes the origin of the host header to the target URL&gt; 
   *    preserveHeaderKeyCase: &lt;true/false, Default: false - specify whether you want to keep letter case of response header key &gt; 
   *    auth   : Basic authentication i.e. 'user:password' to compute an Authorization header. 
   *    hostRewrite: rewrites the location hostname on (201/301/302/307/308) redirects, Default: null. 
   *    autoRewrite: rewrites the location host/port on (201/301/302/307/308) redirects based on requested host/port. Default: false. 
   *    protocolRewrite: rewrites the location protocol on (201/301/302/307/308) redirects to 'http' or 'https'. Default: null. 
   *  } 
   * 
   *  NOTE: `options.ws` and `options.ssl` are optional. 
   *    `options.target and `options.forward` cannot be 
   *    both missing 
   *  } 
   */</span>

  <span class="s2">return new </span><span class="s0">ProxyServer</span><span class="s3">(</span><span class="s0">options</span><span class="s3">);</span>
<span class="s3">}</span>


<span class="s0">ProxyServer</span><span class="s3">.</span><span class="s0">createProxyServer </span><span class="s3">= </span><span class="s0">createProxyServer</span><span class="s3">;</span>
<span class="s0">ProxyServer</span><span class="s3">.</span><span class="s0">createServer      </span><span class="s3">= </span><span class="s0">createProxyServer</span><span class="s3">;</span>
<span class="s0">ProxyServer</span><span class="s3">.</span><span class="s0">createProxy       </span><span class="s3">= </span><span class="s0">createProxyServer</span><span class="s3">;</span>




<span class="s5">/**</span>
 <span class="s5">* Export the proxy &quot;Server&quot; as the main export.</span>
 <span class="s5">*/</span>
<span class="s0">module</span><span class="s3">.</span><span class="s0">exports </span><span class="s3">= </span><span class="s0">ProxyServer</span><span class="s3">;</span>

</pre>
</body>
</html>