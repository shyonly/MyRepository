<html>
<head>
<title>csstree.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #cf8e6d;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #7a7e85;}
.s5 { color: #2aacb8;}
.s6 { color: #42c3d4;}
.s7 { color: #5f826b; font-style: italic;}
.s8 { color: #67a37c; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
csstree.js</font>
</center></td></tr></table>
<pre><span class="s0">(</span><span class="s1">function </span><span class="s0">(</span><span class="s2">global</span><span class="s0">, </span><span class="s2">factory</span><span class="s0">) {</span>
    <span class="s1">typeof </span><span class="s2">exports </span><span class="s0">=== </span><span class="s3">'object' </span><span class="s0">&amp;&amp; </span><span class="s1">typeof </span><span class="s2">module </span><span class="s0">!== </span><span class="s3">'undefined' </span><span class="s0">? </span><span class="s2">module</span><span class="s0">.</span><span class="s2">exports </span><span class="s0">= </span><span class="s2">factory</span><span class="s0">() :</span>
    <span class="s1">typeof </span><span class="s2">define </span><span class="s0">=== </span><span class="s3">'function' </span><span class="s0">&amp;&amp; </span><span class="s2">define</span><span class="s0">.</span><span class="s2">amd </span><span class="s0">? </span><span class="s2">define</span><span class="s0">(</span><span class="s2">factory</span><span class="s0">) :</span>
    <span class="s0">(</span><span class="s2">global </span><span class="s0">= </span><span class="s2">global </span><span class="s0">|| </span><span class="s2">self</span><span class="s0">, </span><span class="s2">global</span><span class="s0">.</span><span class="s2">csstree </span><span class="s0">= </span><span class="s2">factory</span><span class="s0">());</span>
<span class="s0">}(</span><span class="s1">this</span><span class="s0">, (</span><span class="s1">function </span><span class="s0">() { </span><span class="s3">'use strict'</span><span class="s0">;</span>

    <span class="s4">//</span>
    <span class="s4">//                              list</span>
    <span class="s4">//                            ┌──────┐</span>
    <span class="s4">//             ┌──────────────┼─head │</span>
    <span class="s4">//             │              │ tail─┼──────────────┐</span>
    <span class="s4">//             │              └──────┘              │</span>
    <span class="s4">//             ▼                                    ▼</span>
    <span class="s4">//            item        item        item        item</span>
    <span class="s4">//          ┌──────┐    ┌──────┐    ┌──────┐    ┌──────┐</span>
    <span class="s4">//  null ◀──┼─prev │◀───┼─prev │◀───┼─prev │◀───┼─prev │</span>
    <span class="s4">//          │ next─┼───▶│ next─┼───▶│ next─┼───▶│ next─┼──▶ null</span>
    <span class="s4">//          ├──────┤    ├──────┤    ├──────┤    ├──────┤</span>
    <span class="s4">//          │ data │    │ data │    │ data │    │ data │</span>
    <span class="s4">//          └──────┘    └──────┘    └──────┘    └──────┘</span>
    <span class="s4">//</span>

    <span class="s1">function </span><span class="s2">createItem</span><span class="s0">(</span><span class="s2">data</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">prev</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
            <span class="s2">next</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
            <span class="s2">data</span><span class="s0">: </span><span class="s2">data</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">allocateCursor</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">prev</span><span class="s0">, </span><span class="s2">next</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">cursor</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">cursors </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursors</span><span class="s0">;</span>
            <span class="s2">cursors </span><span class="s0">= </span><span class="s2">cursors</span><span class="s0">.</span><span class="s2">cursor</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">next</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">cursor</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s2">cursor </span><span class="s0">= {</span>
                <span class="s2">prev</span><span class="s0">: </span><span class="s2">prev</span><span class="s0">,</span>
                <span class="s2">next</span><span class="s0">: </span><span class="s2">next</span><span class="s0">,</span>
                <span class="s2">cursor</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">cursor</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s2">node</span><span class="s0">.</span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">;</span>

        <span class="s1">return </span><span class="s2">cursor</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">releaseCursor</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">cursor</span><span class="s0">;</span>

        <span class="s2">node</span><span class="s0">.</span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">cursor</span><span class="s0">;</span>
        <span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s2">cursor</span><span class="s0">.</span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursors</span><span class="s0">;</span>
        <span class="s2">cursors </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">cursors </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">List </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">createItem </span><span class="s0">= </span><span class="s2">createItem</span><span class="s0">;</span>
    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">createItem </span><span class="s0">= </span><span class="s2">createItem</span><span class="s0">;</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">updateCursors </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">prevOld</span><span class="s0">, </span><span class="s2">prevNew</span><span class="s0">, </span><span class="s2">nextOld</span><span class="s0">, </span><span class="s2">nextNew</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">cursor</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">=== </span><span class="s2">prevOld</span><span class="s0">) {</span>
                <span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">prevNew</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">=== </span><span class="s2">nextOld</span><span class="s0">) {</span>
                <span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">nextNew</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">cursor</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">getSize </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">size </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">) {</span>
            <span class="s2">size</span><span class="s0">++;</span>
            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">size</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">fromArray </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">array</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">array</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">item </span><span class="s0">= </span><span class="s2">createItem</span><span class="s0">(</span><span class="s2">array</span><span class="s0">[</span><span class="s2">i</span><span class="s0">]);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">cursor </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">item</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">;</span>
            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">;</span>

        <span class="s1">return this</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">toArray </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= [];</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">) {</span>
            <span class="s2">result</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">data</span><span class="s0">);</span>
            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">toJSON </span><span class="s0">= </span><span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">toArray</span><span class="s0">;</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">isEmpty </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">first </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">&amp;&amp; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">.</span><span class="s2">data</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">last </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">&amp;&amp; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">.</span><span class="s2">data</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">each </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">item</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// push cursor</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">allocateCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">);</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">item </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>

            <span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">item</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s1">this</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// pop cursor</span>
        <span class="s2">releaseCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">forEach </span><span class="s0">= </span><span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">each</span><span class="s0">;</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">eachRight </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">item</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// push cursor</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">allocateCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">item </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>

            <span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">item</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s1">this</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// pop cursor</span>
        <span class="s2">releaseCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">forEachRight </span><span class="s0">= </span><span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">eachRight</span><span class="s0">;</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">reduce </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">initialValue</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">item</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// push cursor</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">allocateCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">acc </span><span class="s0">= </span><span class="s2">initialValue</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">item </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>

            <span class="s2">acc </span><span class="s0">= </span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">acc</span><span class="s0">, </span><span class="s2">item</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s1">this</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// pop cursor</span>
        <span class="s2">releaseCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>

        <span class="s1">return </span><span class="s2">acc</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">reduceRight </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">initialValue</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">item</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// push cursor</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">allocateCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">acc </span><span class="s0">= </span><span class="s2">initialValue</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">item </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>

            <span class="s2">acc </span><span class="s0">= </span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">acc</span><span class="s0">, </span><span class="s2">item</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s1">this</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// pop cursor</span>
        <span class="s2">releaseCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>

        <span class="s1">return </span><span class="s2">acc</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">nextUntil </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">fn</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">start </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">item</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// push cursor</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">allocateCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s2">start</span><span class="s0">);</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">item </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">item</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s1">this</span><span class="s0">)) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s4">// pop cursor</span>
        <span class="s2">releaseCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">prevUntil </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">fn</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">start </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">item</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// push cursor</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">allocateCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">start</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">item </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s2">cursor</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">item</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s1">this</span><span class="s0">)) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s4">// pop cursor</span>
        <span class="s2">releaseCursor</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">some </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">cursor</span><span class="s0">, </span><span class="s1">this</span><span class="s0">)) {</span>
                <span class="s1">return true</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return false</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">map </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s1">new </span><span class="s2">List</span><span class="s0">();</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">result</span><span class="s0">.</span><span class="s2">appendData</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">cursor</span><span class="s0">, </span><span class="s1">this</span><span class="s0">));</span>
            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">filter </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s1">new </span><span class="s2">List</span><span class="s0">();</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">context </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
            <span class="s2">context </span><span class="s0">= </span><span class="s1">this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">data</span><span class="s0">, </span><span class="s2">cursor</span><span class="s0">, </span><span class="s1">this</span><span class="s0">)) {</span>
                <span class="s2">result</span><span class="s0">.</span><span class="s2">appendData</span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">data</span><span class="s0">);</span>
            <span class="s0">}</span>
            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">clear </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">copy </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s1">new </span><span class="s2">List</span><span class="s0">();</span>
        <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">cursor </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">result</span><span class="s0">.</span><span class="s2">insert</span><span class="s0">(</span><span class="s2">createItem</span><span class="s0">(</span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">data</span><span class="s0">));</span>
            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">cursor</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">prepend </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">item</span><span class="s0">) {</span>
        <span class="s4">//      head</span>
        <span class="s4">//    ^</span>
        <span class="s4">// item</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">updateCursors</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">, </span><span class="s2">item</span><span class="s0">);</span>

        <span class="s4">// insert to the beginning of the list</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s4">// new item &lt;- first item</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>

            <span class="s4">// new item -&gt; first item</span>
            <span class="s2">item</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s4">// if list has no head, then it also has no tail</span>
            <span class="s4">// in this case tail points to the new item</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// head always points to new item</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>

        <span class="s1">return this</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">prependData </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">data</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">prepend</span><span class="s0">(</span><span class="s2">createItem</span><span class="s0">(</span><span class="s2">data</span><span class="s0">));</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">append </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">item</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">insert</span><span class="s0">(</span><span class="s2">item</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">appendData </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">data</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">insert</span><span class="s0">(</span><span class="s2">createItem</span><span class="s0">(</span><span class="s2">data</span><span class="s0">));</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">insert </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">item</span><span class="s0">, </span><span class="s2">before</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">before </span><span class="s0">!== </span><span class="s2">undefined </span><span class="s0">&amp;&amp; </span><span class="s2">before </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s4">// prev   before</span>
            <span class="s4">//      ^</span>
            <span class="s4">//     item</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">updateCursors</span><span class="s0">(</span><span class="s2">before</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">before</span><span class="s0">, </span><span class="s2">item</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">before</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s4">// insert to the beginning of list</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">!== </span><span class="s2">before</span><span class="s0">) {</span>
                    <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'before doesn</span><span class="s1">\'</span><span class="s3">t belong to list'</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s4">// since head points to before therefore list doesn't empty</span>
                <span class="s4">// no need to check tail</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
                <span class="s2">before</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
                <span class="s2">item</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">before</span><span class="s0">;</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">updateCursors</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s2">item</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>

                <span class="s4">// insert between two items</span>
                <span class="s2">before</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
                <span class="s2">item</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">before</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>

                <span class="s2">before</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
                <span class="s2">item</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">before</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s4">// tail</span>
            <span class="s4">//      ^</span>
            <span class="s4">//      item</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">updateCursors</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s2">item</span><span class="s0">);</span>

            <span class="s4">// insert to the ending of the list</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s4">// last item -&gt; new item</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>

                <span class="s4">// last item &lt;- new item</span>
                <span class="s2">item</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s4">// if list has no tail, then it also has no head</span>
                <span class="s4">// in this case head points to new item</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// tail always points to new item</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return this</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">insertData </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">data</span><span class="s0">, </span><span class="s2">before</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">insert</span><span class="s0">(</span><span class="s2">createItem</span><span class="s0">(</span><span class="s2">data</span><span class="s0">), </span><span class="s2">before</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">remove </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">item</span><span class="s0">) {</span>
        <span class="s4">//      item</span>
        <span class="s4">//       ^</span>
        <span class="s4">// prev     next</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">updateCursors</span><span class="s0">(</span><span class="s2">item</span><span class="s0">, </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">item</span><span class="s0">.</span><span class="s2">next</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">!== </span><span class="s2">item</span><span class="s0">) {</span>
                <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'item doesn</span><span class="s1">\'</span><span class="s3">t belong to list'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">item</span><span class="s0">.</span><span class="s2">next </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">item</span><span class="s0">.</span><span class="s2">next</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">!== </span><span class="s2">item</span><span class="s0">) {</span>
                <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'item doesn</span><span class="s1">\'</span><span class="s3">t belong to list'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s2">item</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s2">item</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">return </span><span class="s2">item</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">push </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">data</span><span class="s0">) {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">insert</span><span class="s0">(</span><span class="s2">createItem</span><span class="s0">(</span><span class="s2">data</span><span class="s0">));</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">pop </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">remove</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">unshift </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">data</span><span class="s0">) {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">prepend</span><span class="s0">(</span><span class="s2">createItem</span><span class="s0">(</span><span class="s2">data</span><span class="s0">));</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">shift </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">remove</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">prependList </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">list</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">insertList</span><span class="s0">(</span><span class="s2">list</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">head</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">appendList </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">list</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">insertList</span><span class="s0">(</span><span class="s2">list</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">insertList </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">list</span><span class="s0">, </span><span class="s2">before</span><span class="s0">) {</span>
        <span class="s4">// ignore empty lists</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">list</span><span class="s0">.</span><span class="s2">head </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">before </span><span class="s0">!== </span><span class="s2">undefined </span><span class="s0">&amp;&amp; </span><span class="s2">before </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">updateCursors</span><span class="s0">(</span><span class="s2">before</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">, </span><span class="s2">list</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">, </span><span class="s2">before</span><span class="s0">, </span><span class="s2">list</span><span class="s0">.</span><span class="s2">head</span><span class="s0">);</span>

            <span class="s4">// insert in the middle of dist list</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">before</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s4">// before.prev &lt;-&gt; list.head</span>
                <span class="s2">before</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">list</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>
                <span class="s2">list</span><span class="s0">.</span><span class="s2">head</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">before</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s2">list</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">before</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">list</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">;</span>
            <span class="s2">list</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">before</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">updateCursors</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">, </span><span class="s2">list</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s2">list</span><span class="s0">.</span><span class="s2">head</span><span class="s0">);</span>

            <span class="s4">// insert to end of the list</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s4">// if destination list has a tail, then it also has a head,</span>
                <span class="s4">// but head doesn't change</span>

                <span class="s4">// dest tail -&gt; source head</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">.</span><span class="s2">next </span><span class="s0">= </span><span class="s2">list</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>

                <span class="s4">// dest tail &lt;- source head</span>
                <span class="s2">list</span><span class="s0">.</span><span class="s2">head</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s4">// if list has no a tail, then it also has no a head</span>
                <span class="s4">// in this case points head to new item</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s2">list</span><span class="s0">.</span><span class="s2">head</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// tail always start point to new item</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">= </span><span class="s2">list</span><span class="s0">.</span><span class="s2">tail</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s2">list</span><span class="s0">.</span><span class="s2">head </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s2">list</span><span class="s0">.</span><span class="s2">tail </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">return this</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">List</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">replace </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">oldItem</span><span class="s0">, </span><span class="s2">newItemOrList</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s3">'head' </span><span class="s1">in </span><span class="s2">newItemOrList</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">insertList</span><span class="s0">(</span><span class="s2">newItemOrList</span><span class="s0">, </span><span class="s2">oldItem</span><span class="s0">);</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">insert</span><span class="s0">(</span><span class="s2">newItemOrList</span><span class="s0">, </span><span class="s2">oldItem</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">remove</span><span class="s0">(</span><span class="s2">oldItem</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">List_1 </span><span class="s0">= </span><span class="s2">List</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">createCustomError </span><span class="s0">= </span><span class="s1">function </span><span class="s2">createCustomError</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">message</span><span class="s0">) {</span>
        <span class="s4">// use Object.create(), because some VMs prevent setting line/column otherwise</span>
        <span class="s4">// (iOS Safari 10 even throws an exception)</span>
        <span class="s1">var </span><span class="s2">error </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">create</span><span class="s0">(</span><span class="s2">SyntaxError</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">errorStack </span><span class="s0">= </span><span class="s1">new </span><span class="s2">Error</span><span class="s0">();</span>

        <span class="s2">error</span><span class="s0">.</span><span class="s2">name </span><span class="s0">= </span><span class="s2">name</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">message </span><span class="s0">= </span><span class="s2">message</span><span class="s0">;</span>

        <span class="s2">Object</span><span class="s0">.</span><span class="s2">defineProperty</span><span class="s0">(</span><span class="s2">error</span><span class="s0">, </span><span class="s3">'stack'</span><span class="s0">, {</span>
            <span class="s2">get</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return </span><span class="s0">(</span><span class="s2">errorStack</span><span class="s0">.</span><span class="s2">stack </span><span class="s0">|| </span><span class="s3">''</span><span class="s0">).</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/^(.+\n){1,3}/</span><span class="s0">, </span><span class="s2">name </span><span class="s0">+ </span><span class="s3">': ' </span><span class="s0">+ </span><span class="s2">message </span><span class="s0">+ </span><span class="s3">'</span><span class="s1">\n</span><span class="s3">'</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">});</span>

        <span class="s1">return </span><span class="s2">error</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">MAX_LINE_LENGTH </span><span class="s0">= </span><span class="s5">100</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">OFFSET_CORRECTION </span><span class="s0">= </span><span class="s5">60</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TAB_REPLACEMENT </span><span class="s0">= </span><span class="s3">'    '</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">sourceFragment</span><span class="s0">(</span><span class="s2">error</span><span class="s0">, </span><span class="s2">extraLines</span><span class="s0">) {</span>
        <span class="s1">function </span><span class="s2">processLines</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">lines</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">).</span><span class="s2">map</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">line</span><span class="s0">, </span><span class="s2">idx</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">num </span><span class="s0">= </span><span class="s2">String</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s2">idx </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>

                <span class="s1">while </span><span class="s0">(</span><span class="s2">num</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&lt; </span><span class="s2">maxNumLength</span><span class="s0">) {</span>
                    <span class="s2">num </span><span class="s0">= </span><span class="s3">' ' </span><span class="s0">+ </span><span class="s2">num</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">return </span><span class="s2">num </span><span class="s0">+ </span><span class="s3">' |' </span><span class="s0">+ </span><span class="s2">line</span><span class="s0">;</span>
            <span class="s0">}).</span><span class="s2">join</span><span class="s0">(</span><span class="s3">'</span><span class="s1">\n</span><span class="s3">'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">lines </span><span class="s0">= </span><span class="s2">error</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">split</span><span class="s0">(</span><span class="s6">/\r\n?|\n|\f/</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">line </span><span class="s0">= </span><span class="s2">error</span><span class="s0">.</span><span class="s2">line</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">column </span><span class="s0">= </span><span class="s2">error</span><span class="s0">.</span><span class="s2">column</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">startLine </span><span class="s0">= </span><span class="s2">Math</span><span class="s0">.</span><span class="s2">max</span><span class="s0">(</span><span class="s5">1</span><span class="s0">, </span><span class="s2">line </span><span class="s0">- </span><span class="s2">extraLines</span><span class="s0">) - </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">endLine </span><span class="s0">= </span><span class="s2">Math</span><span class="s0">.</span><span class="s2">min</span><span class="s0">(</span><span class="s2">line </span><span class="s0">+ </span><span class="s2">extraLines</span><span class="s0">, </span><span class="s2">lines</span><span class="s0">.</span><span class="s2">length </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">maxNumLength </span><span class="s0">= </span><span class="s2">Math</span><span class="s0">.</span><span class="s2">max</span><span class="s0">(</span><span class="s5">4</span><span class="s0">, </span><span class="s2">String</span><span class="s0">(</span><span class="s2">endLine</span><span class="s0">).</span><span class="s2">length</span><span class="s0">) + </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">cutLeft </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s4">// column correction according to replaced tab before column</span>
        <span class="s2">column </span><span class="s0">+= (</span><span class="s2">TAB_REPLACEMENT</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">) * (</span><span class="s2">lines</span><span class="s0">[</span><span class="s2">line </span><span class="s0">- </span><span class="s5">1</span><span class="s0">].</span><span class="s2">substr</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s2">column </span><span class="s0">- </span><span class="s5">1</span><span class="s0">).</span><span class="s2">match</span><span class="s0">(</span><span class="s6">/\t/g</span><span class="s0">) || []).</span><span class="s2">length</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">column </span><span class="s0">&gt; </span><span class="s2">MAX_LINE_LENGTH</span><span class="s0">) {</span>
            <span class="s2">cutLeft </span><span class="s0">= </span><span class="s2">column </span><span class="s0">- </span><span class="s2">OFFSET_CORRECTION </span><span class="s0">+ </span><span class="s5">3</span><span class="s0">;</span>
            <span class="s2">column </span><span class="s0">= </span><span class="s2">OFFSET_CORRECTION </span><span class="s0">- </span><span class="s5">2</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">startLine</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt;= </span><span class="s2">endLine</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">&gt;= </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">lines</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                <span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">].</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/\t/g</span><span class="s0">, </span><span class="s2">TAB_REPLACEMENT</span><span class="s0">);</span>
                <span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] =</span>
                    <span class="s0">(</span><span class="s2">cutLeft </span><span class="s0">&gt; </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">].</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s2">cutLeft </span><span class="s0">? </span><span class="s3">'</span><span class="s1">\u2026</span><span class="s3">' </span><span class="s0">: </span><span class="s3">''</span><span class="s0">) +</span>
                    <span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">].</span><span class="s2">substr</span><span class="s0">(</span><span class="s2">cutLeft</span><span class="s0">, </span><span class="s2">MAX_LINE_LENGTH </span><span class="s0">- </span><span class="s5">2</span><span class="s0">) +</span>
                    <span class="s0">(</span><span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">].</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s2">cutLeft </span><span class="s0">+ </span><span class="s2">MAX_LINE_LENGTH </span><span class="s0">- </span><span class="s5">1 </span><span class="s0">? </span><span class="s3">'</span><span class="s1">\u2026</span><span class="s3">' </span><span class="s0">: </span><span class="s3">''</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">[</span>
            <span class="s2">processLines</span><span class="s0">(</span><span class="s2">startLine</span><span class="s0">, </span><span class="s2">line</span><span class="s0">),</span>
            <span class="s1">new </span><span class="s2">Array</span><span class="s0">(</span><span class="s2">column </span><span class="s0">+ </span><span class="s2">maxNumLength </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">).</span><span class="s2">join</span><span class="s0">(</span><span class="s3">'-'</span><span class="s0">) + </span><span class="s3">'^'</span><span class="s0">,</span>
            <span class="s2">processLines</span><span class="s0">(</span><span class="s2">line</span><span class="s0">, </span><span class="s2">endLine</span><span class="s0">)</span>
        <span class="s0">].</span><span class="s2">filter</span><span class="s0">(</span><span class="s2">Boolean</span><span class="s0">).</span><span class="s2">join</span><span class="s0">(</span><span class="s3">'</span><span class="s1">\n</span><span class="s3">'</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">SyntaxError$1 </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">message</span><span class="s0">, </span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">line</span><span class="s0">, </span><span class="s2">column</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">error </span><span class="s0">= </span><span class="s2">createCustomError</span><span class="s0">(</span><span class="s3">'SyntaxError'</span><span class="s0">, </span><span class="s2">message</span><span class="s0">);</span>

        <span class="s2">error</span><span class="s0">.</span><span class="s2">source </span><span class="s0">= </span><span class="s2">source</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">offset </span><span class="s0">= </span><span class="s2">offset</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">line </span><span class="s0">= </span><span class="s2">line</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">column </span><span class="s0">= </span><span class="s2">column</span><span class="s0">;</span>

        <span class="s2">error</span><span class="s0">.</span><span class="s2">sourceFragment </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">extraLines</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">sourceFragment</span><span class="s0">(</span><span class="s2">error</span><span class="s0">, </span><span class="s2">isNaN</span><span class="s0">(</span><span class="s2">extraLines</span><span class="s0">) ? </span><span class="s5">0 </span><span class="s0">: </span><span class="s2">extraLines</span><span class="s0">);</span>
        <span class="s0">};</span>
        <span class="s2">Object</span><span class="s0">.</span><span class="s2">defineProperty</span><span class="s0">(</span><span class="s2">error</span><span class="s0">, </span><span class="s3">'formattedMessage'</span><span class="s0">, {</span>
            <span class="s2">get</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return </span><span class="s0">(</span>
                    <span class="s3">'Parse error: ' </span><span class="s0">+ </span><span class="s2">error</span><span class="s0">.</span><span class="s2">message </span><span class="s0">+ </span><span class="s3">'</span><span class="s1">\n</span><span class="s3">' </span><span class="s0">+</span>
                    <span class="s2">sourceFragment</span><span class="s0">(</span><span class="s2">error</span><span class="s0">, </span><span class="s5">2</span><span class="s0">)</span>
                <span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">});</span>

        <span class="s4">// for backward capability</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">parseError </span><span class="s0">= {</span>
            <span class="s2">offset</span><span class="s0">: </span><span class="s2">offset</span><span class="s0">,</span>
            <span class="s2">line</span><span class="s0">: </span><span class="s2">line</span><span class="s0">,</span>
            <span class="s2">column</span><span class="s0">: </span><span class="s2">column</span>
        <span class="s0">};</span>

        <span class="s1">return </span><span class="s2">error</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">_SyntaxError </span><span class="s0">= </span><span class="s2">SyntaxError$1</span><span class="s0">;</span>

    <span class="s4">// CSS Syntax Module Level 3</span>
    <span class="s4">// https://www.w3.org/TR/css-syntax-3/</span>
    <span class="s1">var </span><span class="s2">TYPE </span><span class="s0">= {</span>
        <span class="s2">EOF</span><span class="s0">: </span><span class="s5">0</span><span class="s0">,                 </span><span class="s4">// &lt;EOF-token&gt;</span>
        <span class="s2">Ident</span><span class="s0">: </span><span class="s5">1</span><span class="s0">,               </span><span class="s4">// &lt;ident-token&gt;</span>
        <span class="s2">Function</span><span class="s0">: </span><span class="s5">2</span><span class="s0">,            </span><span class="s4">// &lt;function-token&gt;</span>
        <span class="s2">AtKeyword</span><span class="s0">: </span><span class="s5">3</span><span class="s0">,           </span><span class="s4">// &lt;at-keyword-token&gt;</span>
        <span class="s2">Hash</span><span class="s0">: </span><span class="s5">4</span><span class="s0">,                </span><span class="s4">// &lt;hash-token&gt;</span>
        <span class="s2">String</span><span class="s0">: </span><span class="s5">5</span><span class="s0">,              </span><span class="s4">// &lt;string-token&gt;</span>
        <span class="s2">BadString</span><span class="s0">: </span><span class="s5">6</span><span class="s0">,           </span><span class="s4">// &lt;bad-string-token&gt;</span>
        <span class="s2">Url</span><span class="s0">: </span><span class="s5">7</span><span class="s0">,                 </span><span class="s4">// &lt;url-token&gt;</span>
        <span class="s2">BadUrl</span><span class="s0">: </span><span class="s5">8</span><span class="s0">,              </span><span class="s4">// &lt;bad-url-token&gt;</span>
        <span class="s2">Delim</span><span class="s0">: </span><span class="s5">9</span><span class="s0">,               </span><span class="s4">// &lt;delim-token&gt;</span>
        <span class="s2">Number</span><span class="s0">: </span><span class="s5">10</span><span class="s0">,             </span><span class="s4">// &lt;number-token&gt;</span>
        <span class="s2">Percentage</span><span class="s0">: </span><span class="s5">11</span><span class="s0">,         </span><span class="s4">// &lt;percentage-token&gt;</span>
        <span class="s2">Dimension</span><span class="s0">: </span><span class="s5">12</span><span class="s0">,          </span><span class="s4">// &lt;dimension-token&gt;</span>
        <span class="s2">WhiteSpace</span><span class="s0">: </span><span class="s5">13</span><span class="s0">,         </span><span class="s4">// &lt;whitespace-token&gt;</span>
        <span class="s2">CDO</span><span class="s0">: </span><span class="s5">14</span><span class="s0">,                </span><span class="s4">// &lt;CDO-token&gt;</span>
        <span class="s2">CDC</span><span class="s0">: </span><span class="s5">15</span><span class="s0">,                </span><span class="s4">// &lt;CDC-token&gt;</span>
        <span class="s2">Colon</span><span class="s0">: </span><span class="s5">16</span><span class="s0">,              </span><span class="s4">// &lt;colon-token&gt;     :</span>
        <span class="s2">Semicolon</span><span class="s0">: </span><span class="s5">17</span><span class="s0">,          </span><span class="s4">// &lt;semicolon-token&gt; ;</span>
        <span class="s2">Comma</span><span class="s0">: </span><span class="s5">18</span><span class="s0">,              </span><span class="s4">// &lt;comma-token&gt;     ,</span>
        <span class="s2">LeftSquareBracket</span><span class="s0">: </span><span class="s5">19</span><span class="s0">,  </span><span class="s4">// &lt;[-token&gt;</span>
        <span class="s2">RightSquareBracket</span><span class="s0">: </span><span class="s5">20</span><span class="s0">, </span><span class="s4">// &lt;]-token&gt;</span>
        <span class="s2">LeftParenthesis</span><span class="s0">: </span><span class="s5">21</span><span class="s0">,    </span><span class="s4">// &lt;(-token&gt;</span>
        <span class="s2">RightParenthesis</span><span class="s0">: </span><span class="s5">22</span><span class="s0">,   </span><span class="s4">// &lt;)-token&gt;</span>
        <span class="s2">LeftCurlyBracket</span><span class="s0">: </span><span class="s5">23</span><span class="s0">,   </span><span class="s4">// &lt;{-token&gt;</span>
        <span class="s2">RightCurlyBracket</span><span class="s0">: </span><span class="s5">24</span><span class="s0">,  </span><span class="s4">// &lt;}-token&gt;</span>
        <span class="s2">Comment</span><span class="s0">: </span><span class="s5">25</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">NAME </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">TYPE</span><span class="s0">).</span><span class="s2">reduce</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">result</span><span class="s0">, </span><span class="s2">key</span><span class="s0">) {</span>
        <span class="s2">result</span><span class="s0">[</span><span class="s2">TYPE</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]] = </span><span class="s2">key</span><span class="s0">;</span>
        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}, {});</span>

    <span class="s1">var </span><span class="s2">_const </span><span class="s0">= {</span>
        <span class="s2">TYPE</span><span class="s0">: </span><span class="s2">TYPE</span><span class="s0">,</span>
        <span class="s2">NAME</span><span class="s0">: </span><span class="s2">NAME</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">EOF </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

    <span class="s4">// https://drafts.csswg.org/css-syntax-3/</span>
    <span class="s4">// § 4.2. Definitions</span>

    <span class="s4">// digit</span>
    <span class="s4">// A code point between U+0030 DIGIT ZERO (0) and U+0039 DIGIT NINE (9).</span>
    <span class="s1">function </span><span class="s2">isDigit</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">0x0030 </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">&lt;= </span><span class="s5">0x0039</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// hex digit</span>
    <span class="s4">// A digit, or a code point between U+0041 LATIN CAPITAL LETTER A (A) and U+0046 LATIN CAPITAL LETTER F (F),</span>
    <span class="s4">// or a code point between U+0061 LATIN SMALL LETTER A (a) and U+0066 LATIN SMALL LETTER F (f).</span>
    <span class="s1">function </span><span class="s2">isHexDigit</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">(</span>
            <span class="s2">isDigit</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) || </span><span class="s4">// 0 .. 9</span>
            <span class="s0">(</span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">0x0041 </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">&lt;= </span><span class="s5">0x0046</span><span class="s0">) || </span><span class="s4">// A .. F</span>
            <span class="s0">(</span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">0x0061 </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">&lt;= </span><span class="s5">0x0066</span><span class="s0">)    </span><span class="s4">// a .. f</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s4">// uppercase letter</span>
    <span class="s4">// A code point between U+0041 LATIN CAPITAL LETTER A (A) and U+005A LATIN CAPITAL LETTER Z (Z).</span>
    <span class="s1">function </span><span class="s2">isUppercaseLetter</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">0x0041 </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">&lt;= </span><span class="s5">0x005A</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// lowercase letter</span>
    <span class="s4">// A code point between U+0061 LATIN SMALL LETTER A (a) and U+007A LATIN SMALL LETTER Z (z).</span>
    <span class="s1">function </span><span class="s2">isLowercaseLetter</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">0x0061 </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">&lt;= </span><span class="s5">0x007A</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// letter</span>
    <span class="s4">// An uppercase letter or a lowercase letter.</span>
    <span class="s1">function </span><span class="s2">isLetter</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">isUppercaseLetter</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) || </span><span class="s2">isLowercaseLetter</span><span class="s0">(</span><span class="s2">code</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s4">// non-ASCII code point</span>
    <span class="s4">// A code point with a value equal to or greater than U+0080 &lt;control&gt;.</span>
    <span class="s1">function </span><span class="s2">isNonAscii</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">0x0080</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// name-start code point</span>
    <span class="s4">// A letter, a non-ASCII code point, or U+005F LOW LINE (_).</span>
    <span class="s1">function </span><span class="s2">isNameStart</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">isLetter</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) || </span><span class="s2">isNonAscii</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) || </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x005F</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// name code point</span>
    <span class="s4">// A name-start code point, a digit, or U+002D HYPHEN-MINUS (-).</span>
    <span class="s1">function </span><span class="s2">isName</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">isNameStart</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) || </span><span class="s2">isDigit</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) || </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x002D</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// non-printable code point</span>
    <span class="s4">// A code point between U+0000 NULL and U+0008 BACKSPACE, or U+000B LINE TABULATION,</span>
    <span class="s4">// or a code point between U+000E SHIFT OUT and U+001F INFORMATION SEPARATOR ONE, or U+007F DELETE.</span>
    <span class="s1">function </span><span class="s2">isNonPrintable</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">(</span>
            <span class="s0">(</span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">0x0000 </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">&lt;= </span><span class="s5">0x0008</span><span class="s0">) ||</span>
            <span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x000B</span><span class="s0">) ||</span>
            <span class="s0">(</span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">0x000E </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">&lt;= </span><span class="s5">0x001F</span><span class="s0">) ||</span>
            <span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x007F</span><span class="s0">)</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s4">// newline</span>
    <span class="s4">// U+000A LINE FEED. Note that U+000D CARRIAGE RETURN and U+000C FORM FEED are not included in this definition,</span>
    <span class="s4">// as they are converted to U+000A LINE FEED during preprocessing.</span>
    <span class="s4">// TODO: we doesn't do a preprocessing, so check a code point for U+000D CARRIAGE RETURN and U+000C FORM FEED</span>
    <span class="s1">function </span><span class="s2">isNewline</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x000A </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x000D </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x000C</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// whitespace</span>
    <span class="s4">// A newline, U+0009 CHARACTER TABULATION, or U+0020 SPACE.</span>
    <span class="s1">function </span><span class="s2">isWhiteSpace</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">isNewline</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) || </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x0020 </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x0009</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// § 4.3.8. Check if two code points are a valid escape</span>
    <span class="s1">function </span><span class="s2">isValidEscape</span><span class="s0">(</span><span class="s2">first</span><span class="s0">, </span><span class="s2">second</span><span class="s0">) {</span>
        <span class="s4">// If the first code point is not U+005C REVERSE SOLIDUS (\), return false.</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">first </span><span class="s0">!== </span><span class="s5">0x005C</span><span class="s0">) {</span>
            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// Otherwise, if the second code point is a newline or EOF, return false.</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">isNewline</span><span class="s0">(</span><span class="s2">second</span><span class="s0">) || </span><span class="s2">second </span><span class="s0">=== </span><span class="s2">EOF</span><span class="s0">) {</span>
            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// Otherwise, return true.</span>
        <span class="s1">return true</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// § 4.3.9. Check if three code points would start an identifier</span>
    <span class="s1">function </span><span class="s2">isIdentifierStart</span><span class="s0">(</span><span class="s2">first</span><span class="s0">, </span><span class="s2">second</span><span class="s0">, </span><span class="s2">third</span><span class="s0">) {</span>
        <span class="s4">// Look at the first code point:</span>

        <span class="s4">// U+002D HYPHEN-MINUS</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">first </span><span class="s0">=== </span><span class="s5">0x002D</span><span class="s0">) {</span>
            <span class="s4">// If the second code point is a name-start code point or a U+002D HYPHEN-MINUS,</span>
            <span class="s4">// or the second and third code points are a valid escape, return true. Otherwise, return false.</span>
            <span class="s1">return </span><span class="s0">(</span>
                <span class="s2">isNameStart</span><span class="s0">(</span><span class="s2">second</span><span class="s0">) ||</span>
                <span class="s2">second </span><span class="s0">=== </span><span class="s5">0x002D </span><span class="s0">||</span>
                <span class="s2">isValidEscape</span><span class="s0">(</span><span class="s2">second</span><span class="s0">, </span><span class="s2">third</span><span class="s0">)</span>
            <span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// name-start code point</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">isNameStart</span><span class="s0">(</span><span class="s2">first</span><span class="s0">)) {</span>
            <span class="s4">// Return true.</span>
            <span class="s1">return true</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// U+005C REVERSE SOLIDUS (\)</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">first </span><span class="s0">=== </span><span class="s5">0x005C</span><span class="s0">) {</span>
            <span class="s4">// If the first and second code points are a valid escape, return true. Otherwise, return false.</span>
            <span class="s1">return </span><span class="s2">isValidEscape</span><span class="s0">(</span><span class="s2">first</span><span class="s0">, </span><span class="s2">second</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// anything else</span>
        <span class="s4">// Return false.</span>
        <span class="s1">return false</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// § 4.3.10. Check if three code points would start a number</span>
    <span class="s1">function </span><span class="s2">isNumberStart</span><span class="s0">(</span><span class="s2">first</span><span class="s0">, </span><span class="s2">second</span><span class="s0">, </span><span class="s2">third</span><span class="s0">) {</span>
        <span class="s4">// Look at the first code point:</span>

        <span class="s4">// U+002B PLUS SIGN (+)</span>
        <span class="s4">// U+002D HYPHEN-MINUS (-)</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">first </span><span class="s0">=== </span><span class="s5">0x002B </span><span class="s0">|| </span><span class="s2">first </span><span class="s0">=== </span><span class="s5">0x002D</span><span class="s0">) {</span>
            <span class="s4">// If the second code point is a digit, return true.</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">isDigit</span><span class="s0">(</span><span class="s2">second</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s5">2</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// Otherwise, if the second code point is a U+002E FULL STOP (.)</span>
            <span class="s4">// and the third code point is a digit, return true.</span>
            <span class="s4">// Otherwise, return false.</span>
            <span class="s1">return </span><span class="s2">second </span><span class="s0">=== </span><span class="s5">0x002E </span><span class="s0">&amp;&amp; </span><span class="s2">isDigit</span><span class="s0">(</span><span class="s2">third</span><span class="s0">) ? </span><span class="s5">3 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// U+002E FULL STOP (.)</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">first </span><span class="s0">=== </span><span class="s5">0x002E</span><span class="s0">) {</span>
            <span class="s4">// If the second code point is a digit, return true. Otherwise, return false.</span>
            <span class="s1">return </span><span class="s2">isDigit</span><span class="s0">(</span><span class="s2">second</span><span class="s0">) ? </span><span class="s5">2 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// digit</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">isDigit</span><span class="s0">(</span><span class="s2">first</span><span class="s0">)) {</span>
            <span class="s4">// Return true.</span>
            <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// anything else</span>
        <span class="s4">// Return false.</span>
        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">//</span>
    <span class="s4">// Misc</span>
    <span class="s4">//</span>

    <span class="s4">// detect BOM (https://en.wikipedia.org/wiki/Byte_order_mark)</span>
    <span class="s1">function </span><span class="s2">isBOM</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s4">// UTF-16BE</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0xFEFF</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// UTF-16LE</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0xFFFE</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// Fast code category</span>
    <span class="s4">//</span>
    <span class="s4">// https://drafts.csswg.org/css-syntax/#tokenizer-definitions</span>
    <span class="s4">// &gt; non-ASCII code point</span>
    <span class="s4">// &gt;   A code point with a value equal to or greater than U+0080 &lt;control&gt;</span>
    <span class="s4">// &gt; name-start code point</span>
    <span class="s4">// &gt;   A letter, a non-ASCII code point, or U+005F LOW LINE (_).</span>
    <span class="s4">// &gt; name code point</span>
    <span class="s4">// &gt;   A name-start code point, a digit, or U+002D HYPHEN-MINUS (-)</span>
    <span class="s4">// That means only ASCII code points has a special meaning and we define a maps for 0..127 codes only</span>
    <span class="s1">var </span><span class="s2">CATEGORY </span><span class="s0">= </span><span class="s1">new </span><span class="s2">Array</span><span class="s0">(</span><span class="s5">0x80</span><span class="s0">);</span>
    <span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">Eof </span><span class="s0">= </span><span class="s5">0x80</span><span class="s0">;</span>
    <span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">WhiteSpace </span><span class="s0">= </span><span class="s5">0x82</span><span class="s0">;</span>
    <span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">Digit </span><span class="s0">= </span><span class="s5">0x83</span><span class="s0">;</span>
    <span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">NameStart </span><span class="s0">= </span><span class="s5">0x84</span><span class="s0">;</span>
    <span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">NonPrintable </span><span class="s0">= </span><span class="s5">0x85</span><span class="s0">;</span>

    <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">CATEGORY</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
        <span class="s1">switch </span><span class="s0">(</span><span class="s1">true</span><span class="s0">) {</span>
            <span class="s1">case </span><span class="s2">isWhiteSpace</span><span class="s0">(</span><span class="s2">i</span><span class="s0">):</span>
                <span class="s2">CATEGORY</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">isDigit</span><span class="s0">(</span><span class="s2">i</span><span class="s0">):</span>
                <span class="s2">CATEGORY</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">Digit</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">isNameStart</span><span class="s0">(</span><span class="s2">i</span><span class="s0">):</span>
                <span class="s2">CATEGORY</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">NameStart</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">isNonPrintable</span><span class="s0">(</span><span class="s2">i</span><span class="s0">):</span>
                <span class="s2">CATEGORY</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">NonPrintable</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">default</span><span class="s0">:</span>
                <span class="s2">CATEGORY</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">i </span><span class="s0">|| </span><span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">Eof</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">charCodeCategory</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">code </span><span class="s0">&lt; </span><span class="s5">0x80 </span><span class="s0">? </span><span class="s2">CATEGORY</span><span class="s0">[</span><span class="s2">code</span><span class="s0">] : </span><span class="s2">charCodeCategory</span><span class="s0">.</span><span class="s2">NameStart</span><span class="s0">;</span>
    <span class="s0">}</span>
    <span class="s1">var </span><span class="s2">charCodeDefinitions </span><span class="s0">= {</span>
        <span class="s2">isDigit</span><span class="s0">: </span><span class="s2">isDigit</span><span class="s0">,</span>
        <span class="s2">isHexDigit</span><span class="s0">: </span><span class="s2">isHexDigit</span><span class="s0">,</span>
        <span class="s2">isUppercaseLetter</span><span class="s0">: </span><span class="s2">isUppercaseLetter</span><span class="s0">,</span>
        <span class="s2">isLowercaseLetter</span><span class="s0">: </span><span class="s2">isLowercaseLetter</span><span class="s0">,</span>
        <span class="s2">isLetter</span><span class="s0">: </span><span class="s2">isLetter</span><span class="s0">,</span>
        <span class="s2">isNonAscii</span><span class="s0">: </span><span class="s2">isNonAscii</span><span class="s0">,</span>
        <span class="s2">isNameStart</span><span class="s0">: </span><span class="s2">isNameStart</span><span class="s0">,</span>
        <span class="s2">isName</span><span class="s0">: </span><span class="s2">isName</span><span class="s0">,</span>
        <span class="s2">isNonPrintable</span><span class="s0">: </span><span class="s2">isNonPrintable</span><span class="s0">,</span>
        <span class="s2">isNewline</span><span class="s0">: </span><span class="s2">isNewline</span><span class="s0">,</span>
        <span class="s2">isWhiteSpace</span><span class="s0">: </span><span class="s2">isWhiteSpace</span><span class="s0">,</span>
        <span class="s2">isValidEscape</span><span class="s0">: </span><span class="s2">isValidEscape</span><span class="s0">,</span>
        <span class="s2">isIdentifierStart</span><span class="s0">: </span><span class="s2">isIdentifierStart</span><span class="s0">,</span>
        <span class="s2">isNumberStart</span><span class="s0">: </span><span class="s2">isNumberStart</span><span class="s0">,</span>

        <span class="s2">isBOM</span><span class="s0">: </span><span class="s2">isBOM</span><span class="s0">,</span>
        <span class="s2">charCodeCategory</span><span class="s0">: </span><span class="s2">charCodeCategory</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">isDigit$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isHexDigit$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isHexDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isUppercaseLetter$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isUppercaseLetter</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isName$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isName</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isWhiteSpace$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isWhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isValidEscape$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isValidEscape</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) : </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getNewlineLength</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">13 </span><span class="s4">/* \r */ </span><span class="s0">&amp;&amp; </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) === </span><span class="s5">10 </span><span class="s4">/* \n */</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">2</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">cmpChar</span><span class="s0">(</span><span class="s2">testStr</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">referenceCode</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">testStr</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

        <span class="s4">// code.toLowerCase() for A..Z</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">isUppercaseLetter$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
            <span class="s2">code </span><span class="s0">= </span><span class="s2">code </span><span class="s0">| </span><span class="s5">32</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">referenceCode</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">cmpStr</span><span class="s0">(</span><span class="s2">testStr</span><span class="s0">, </span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">, </span><span class="s2">referenceStr</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">end </span><span class="s0">- </span><span class="s2">start </span><span class="s0">!== </span><span class="s2">referenceStr</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">start </span><span class="s0">&lt; </span><span class="s5">0 </span><span class="s0">|| </span><span class="s2">end </span><span class="s0">&gt; </span><span class="s2">testStr</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">start</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">end</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">testCode </span><span class="s0">= </span><span class="s2">testStr</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">referenceCode </span><span class="s0">= </span><span class="s2">referenceStr</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i </span><span class="s0">- </span><span class="s2">start</span><span class="s0">);</span>

            <span class="s4">// testCode.toLowerCase() for A..Z</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">isUppercaseLetter$1</span><span class="s0">(</span><span class="s2">testCode</span><span class="s0">)) {</span>
                <span class="s2">testCode </span><span class="s0">= </span><span class="s2">testCode </span><span class="s0">| </span><span class="s5">32</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">testCode </span><span class="s0">!== </span><span class="s2">referenceCode</span><span class="s0">) {</span>
                <span class="s1">return false</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return true</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">findWhiteSpaceStart</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(; </span><span class="s2">offset </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">--) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isWhiteSpace$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">))) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">findWhiteSpaceEnd</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(; </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isWhiteSpace$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">))) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">findDecimalNumberEnd</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(; </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDigit$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">))) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// § 4.3.7. Consume an escaped code point</span>
    <span class="s1">function </span><span class="s2">consumeEscaped</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s4">// It assumes that the U+005C REVERSE SOLIDUS (\) has already been consumed and</span>
        <span class="s4">// that the next input code point has already been verified to be part of a valid escape.</span>
        <span class="s2">offset </span><span class="s0">+= </span><span class="s5">2</span><span class="s0">;</span>

        <span class="s4">// hex digit</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">isHexDigit$1</span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">- </span><span class="s5">1</span><span class="s0">))) {</span>
            <span class="s4">// Consume as many hex digits as possible, but no more than 5.</span>
            <span class="s4">// Note that this means 1-6 hex digits have been consumed in total.</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">maxOffset </span><span class="s0">= </span><span class="s2">Math</span><span class="s0">.</span><span class="s2">min</span><span class="s0">(</span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">5</span><span class="s0">); </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">maxOffset</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
                <span class="s1">if </span><span class="s0">(!</span><span class="s2">isHexDigit$1</span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">))) {</span>
                    <span class="s1">break</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s4">// If the next input code point is whitespace, consume it as well.</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">isWhiteSpace$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                <span class="s2">offset </span><span class="s0">+= </span><span class="s2">getNewlineLength</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">code</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// §4.3.11. Consume a name</span>
    <span class="s4">// Note: This algorithm does not do the verification of the first few code points that are necessary</span>
    <span class="s4">// to ensure the returned code points would constitute an &lt;ident-token&gt;. If that is the intended use,</span>
    <span class="s4">// ensure that the stream starts with an identifier before calling this algorithm.</span>
    <span class="s1">function </span><span class="s2">consumeName</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s4">// Let result initially be an empty string.</span>
        <span class="s4">// Repeatedly consume the next input code point from the stream:</span>
        <span class="s1">for </span><span class="s0">(; </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

            <span class="s4">// name code point</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">isName$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                <span class="s4">// Append the code point to result.</span>
                <span class="s1">continue</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// the stream starts with a valid escape</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">isValidEscape$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">))) {</span>
                <span class="s4">// Consume an escaped code point. Append the returned code point to result.</span>
                <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeEscaped</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) - </span><span class="s5">1</span><span class="s0">;</span>
                <span class="s1">continue</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// anything else</span>
            <span class="s4">// Reconsume the current input code point. Return result.</span>
            <span class="s1">break</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// §4.3.12. Consume a number</span>
    <span class="s1">function </span><span class="s2">consumeNumber</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

        <span class="s4">// 2. If the next input code point is U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-),</span>
        <span class="s4">// consume it and append it to repr.</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x002B </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x002D</span><span class="s0">) {</span>
            <span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+= </span><span class="s5">1</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// 3. While the next input code point is a digit, consume it and append it to repr.</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">isDigit$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
            <span class="s2">offset </span><span class="s0">= </span><span class="s2">findDecimalNumberEnd</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
            <span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// 4. If the next 2 input code points are U+002E FULL STOP (.) followed by a digit, then:</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x002E </span><span class="s0">&amp;&amp; </span><span class="s2">isDigit$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">))) {</span>
            <span class="s4">// 4.1 Consume them.</span>
            <span class="s4">// 4.2 Append them to repr.</span>
            <span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+= </span><span class="s5">2</span><span class="s0">);</span>

            <span class="s4">// 4.3 Set type to &quot;number&quot;.</span>
            <span class="s4">// TODO</span>

            <span class="s4">// 4.4 While the next input code point is a digit, consume it and append it to repr.</span>

            <span class="s2">offset </span><span class="s0">= </span><span class="s2">findDecimalNumberEnd</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// 5. If the next 2 or 3 input code points are U+0045 LATIN CAPITAL LETTER E (E)</span>
        <span class="s4">// or U+0065 LATIN SMALL LETTER E (e), ... , followed by a digit, then:</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">cmpChar</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s5">101 </span><span class="s4">/* e */</span><span class="s0">)) {</span>
            <span class="s1">var </span><span class="s2">sign </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>

            <span class="s4">// ... optionally followed by U+002D HYPHEN-MINUS (-) or U+002B PLUS SIGN (+) ...</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x002D </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x002B</span><span class="s0">) {</span>
                <span class="s2">sign </span><span class="s0">= </span><span class="s5">1</span><span class="s0">;</span>
                <span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s4">// ... followed by a digit</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">isDigit$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                <span class="s4">// 5.1 Consume them.</span>
                <span class="s4">// 5.2 Append them to repr.</span>

                <span class="s4">// 5.3 Set type to &quot;number&quot;.</span>
                <span class="s4">// TODO</span>

                <span class="s4">// 5.4 While the next input code point is a digit, consume it and append it to repr.</span>
                <span class="s2">offset </span><span class="s0">= </span><span class="s2">findDecimalNumberEnd</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1 </span><span class="s0">+ </span><span class="s2">sign </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// § 4.3.14. Consume the remnants of a bad url</span>
    <span class="s4">// ... its sole use is to consume enough of the input stream to reach a recovery point</span>
    <span class="s4">// where normal tokenizing can resume.</span>
    <span class="s1">function </span><span class="s2">consumeBadUrlRemnants</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s4">// Repeatedly consume the next input code point from the stream:</span>
        <span class="s1">for </span><span class="s0">(; </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

            <span class="s4">// U+0029 RIGHT PARENTHESIS ())</span>
            <span class="s4">// EOF</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s5">0x0029</span><span class="s0">) {</span>
                <span class="s4">// Return.</span>
                <span class="s2">offset</span><span class="s0">++;</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">isValidEscape$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">))) {</span>
                <span class="s4">// Consume an escaped code point.</span>
                <span class="s4">// Note: This allows an escaped right parenthesis (&quot;\)&quot;) to be encountered</span>
                <span class="s4">// without ending the &lt;bad-url-token&gt;. This is otherwise identical to</span>
                <span class="s4">// the &quot;anything else&quot; clause.</span>
                <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeEscaped</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">utils </span><span class="s0">= {</span>
        <span class="s2">consumeEscaped</span><span class="s0">: </span><span class="s2">consumeEscaped</span><span class="s0">,</span>
        <span class="s2">consumeName</span><span class="s0">: </span><span class="s2">consumeName</span><span class="s0">,</span>
        <span class="s2">consumeNumber</span><span class="s0">: </span><span class="s2">consumeNumber</span><span class="s0">,</span>
        <span class="s2">consumeBadUrlRemnants</span><span class="s0">: </span><span class="s2">consumeBadUrlRemnants</span><span class="s0">,</span>

        <span class="s2">cmpChar</span><span class="s0">: </span><span class="s2">cmpChar</span><span class="s0">,</span>
        <span class="s2">cmpStr</span><span class="s0">: </span><span class="s2">cmpStr</span><span class="s0">,</span>

        <span class="s2">getNewlineLength</span><span class="s0">: </span><span class="s2">getNewlineLength</span><span class="s0">,</span>
        <span class="s2">findWhiteSpaceStart</span><span class="s0">: </span><span class="s2">findWhiteSpaceStart</span><span class="s0">,</span>
        <span class="s2">findWhiteSpaceEnd</span><span class="s0">: </span><span class="s2">findWhiteSpaceEnd</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$1 </span><span class="s0">= </span><span class="s2">_const</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NAME$1 </span><span class="s0">= </span><span class="s2">_const</span><span class="s0">.</span><span class="s2">NAME</span><span class="s0">;</span>


    <span class="s1">var </span><span class="s2">cmpStr$1 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">cmpStr</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">EOF$1 </span><span class="s0">= </span><span class="s2">TYPE$1</span><span class="s0">.</span><span class="s2">EOF</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">WHITESPACE </span><span class="s0">= </span><span class="s2">TYPE$1</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT </span><span class="s0">= </span><span class="s2">TYPE$1</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">OFFSET_MASK </span><span class="s0">= </span><span class="s5">0x00FFFFFF</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE_SHIFT </span><span class="s0">= </span><span class="s5">24</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">TokenStream </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">reset</span><span class="s0">();</span>
    <span class="s0">};</span>

    <span class="s2">TokenStream</span><span class="s0">.</span><span class="s2">prototype </span><span class="s0">= {</span>
        <span class="s2">reset</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eof </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">= -</span><span class="s5">1</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">firstCharOffset</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenEnd </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">firstCharOffset</span><span class="s0">;</span>
        <span class="s0">},</span>

        <span class="s2">lookupType</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) {</span>
            <span class="s2">offset </span><span class="s0">+= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">) {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">offset</span><span class="s0">] &gt;&gt; </span><span class="s2">TYPE_SHIFT</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">EOF$1</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">lookupOffset</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) {</span>
            <span class="s2">offset </span><span class="s0">+= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">) {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">offset </span><span class="s0">- </span><span class="s5">1</span><span class="s0">] &amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">lookupValue</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">, </span><span class="s2">referenceStr</span><span class="s0">) {</span>
            <span class="s2">offset </span><span class="s0">+= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">cmpStr$1</span><span class="s0">(</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">,</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">offset </span><span class="s0">- </span><span class="s5">1</span><span class="s0">] &amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">,</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">offset</span><span class="s0">] &amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">,</span>
                    <span class="s2">referenceStr</span>
                <span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">getTokenStart</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">tokenIndex</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenIndex </span><span class="s0">=== </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">) {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenIndex </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">tokenIndex </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span>
                    <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">tokenIndex </span><span class="s0">- </span><span class="s5">1</span><span class="s0">] &amp; </span><span class="s2">OFFSET_MASK</span>
                    <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">] &amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return this</span><span class="s0">.</span><span class="s2">firstCharOffset</span><span class="s0">;</span>
        <span class="s0">},</span>

        <span class="s4">// TODO: -&gt; skipUntilBalanced</span>
        <span class="s2">getRawLength</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">mode</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">cursor </span><span class="s0">= </span><span class="s2">startToken</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">balanceEnd</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">offset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">Math</span><span class="s0">.</span><span class="s2">max</span><span class="s0">(</span><span class="s2">cursor </span><span class="s0">- </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">)] &amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">type</span><span class="s0">;</span>

            <span class="s2">loop</span><span class="s0">:</span>
            <span class="s1">for </span><span class="s0">(; </span><span class="s2">cursor </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">; </span><span class="s2">cursor</span><span class="s0">++) {</span>
                <span class="s2">balanceEnd </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">balance</span><span class="s0">[</span><span class="s2">cursor</span><span class="s0">];</span>

                <span class="s4">// stop scanning on balance edge that points to offset before start token</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">balanceEnd </span><span class="s0">&lt; </span><span class="s2">startToken</span><span class="s0">) {</span>
                    <span class="s1">break </span><span class="s2">loop</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s2">type </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">cursor</span><span class="s0">] &gt;&gt; </span><span class="s2">TYPE_SHIFT</span><span class="s0">;</span>

                <span class="s4">// check token is stop type</span>
                <span class="s1">switch </span><span class="s0">(</span><span class="s2">mode</span><span class="s0">(</span><span class="s2">type</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">)) {</span>
                    <span class="s1">case </span><span class="s5">1</span><span class="s0">:</span>
                        <span class="s1">break </span><span class="s2">loop</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s5">2</span><span class="s0">:</span>
                        <span class="s2">cursor</span><span class="s0">++;</span>
                        <span class="s1">break </span><span class="s2">loop</span><span class="s0">;</span>

                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s4">// fast forward to the end of balanced block</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">balance</span><span class="s0">[</span><span class="s2">balanceEnd</span><span class="s0">] === </span><span class="s2">cursor</span><span class="s0">) {</span>
                            <span class="s2">cursor </span><span class="s0">= </span><span class="s2">balanceEnd</span><span class="s0">;</span>
                        <span class="s0">}</span>

                        <span class="s2">offset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">cursor</span><span class="s0">] &amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">cursor </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">isBalanceEdge</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">balance</span><span class="s0">[</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">] &lt; </span><span class="s2">pos</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">isDelim</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s0">(</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s2">TYPE$1</span><span class="s0">.</span><span class="s2">Delim </span><span class="s0">&amp;&amp;</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">lookupOffset</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">)) === </span><span class="s2">code</span>
                <span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">TYPE$1</span><span class="s0">.</span><span class="s2">Delim </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">) === </span><span class="s2">code</span>
            <span class="s0">);</span>
        <span class="s0">},</span>

        <span class="s2">getTokenValue</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">getTokenLength</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">tokenEnd </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">substrToCursor</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">start</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">);</span>
        <span class="s0">},</span>

        <span class="s2">skipWS</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">, </span><span class="s2">skipTokenCount </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++, </span><span class="s2">skipTokenCount</span><span class="s0">++) {</span>
                <span class="s1">if </span><span class="s0">((</span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] &gt;&gt; </span><span class="s2">TYPE_SHIFT</span><span class="s0">) !== </span><span class="s2">WHITESPACE</span><span class="s0">) {</span>
                    <span class="s1">break</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">skipTokenCount </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">skip</span><span class="s0">(</span><span class="s2">skipTokenCount</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">skipSC</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">while </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">WHITESPACE </span><span class="s0">|| </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">COMMENT</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">skip</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">tokenCount</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">next </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">+ </span><span class="s2">tokenCount</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">next </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">= </span><span class="s2">next</span><span class="s0">;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">next </span><span class="s0">- </span><span class="s5">1</span><span class="s0">] &amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">;</span>
                <span class="s2">next </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">next</span><span class="s0">];</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">= </span><span class="s2">next </span><span class="s0">&gt;&gt; </span><span class="s2">TYPE_SHIFT</span><span class="s0">;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenEnd </span><span class="s0">= </span><span class="s2">next </span><span class="s0">&amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">next</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">next </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">next </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">= </span><span class="s2">next</span><span class="s0">;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">;</span>
                <span class="s2">next </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">next</span><span class="s0">];</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">= </span><span class="s2">next </span><span class="s0">&gt;&gt; </span><span class="s2">TYPE_SHIFT</span><span class="s0">;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenEnd </span><span class="s0">= </span><span class="s2">next </span><span class="s0">&amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">eof </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">= </span><span class="s2">EOF$1</span><span class="s0">;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenEnd </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">},</span>

        <span class="s2">forEachToken</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">firstCharOffset</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s2">offset</span><span class="s0">;</span>
                <span class="s1">var </span><span class="s2">item </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
                <span class="s1">var </span><span class="s2">end </span><span class="s0">= </span><span class="s2">item </span><span class="s0">&amp; </span><span class="s2">OFFSET_MASK</span><span class="s0">;</span>
                <span class="s1">var </span><span class="s2">type </span><span class="s0">= </span><span class="s2">item </span><span class="s0">&gt;&gt; </span><span class="s2">TYPE_SHIFT</span><span class="s0">;</span>

                <span class="s2">offset </span><span class="s0">= </span><span class="s2">end</span><span class="s0">;</span>

                <span class="s2">fn</span><span class="s0">(</span><span class="s2">type</span><span class="s0">, </span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">, </span><span class="s2">i</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>

        <span class="s2">dump</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">tokens </span><span class="s0">= </span><span class="s1">new </span><span class="s2">Array</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">tokenCount</span><span class="s0">);</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">forEachToken</span><span class="s0">((</span><span class="s2">type</span><span class="s0">, </span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">, </span><span class="s2">index</span><span class="s0">) =&gt; {</span>
                <span class="s2">tokens</span><span class="s0">[</span><span class="s2">index</span><span class="s0">] = {</span>
                    <span class="s2">idx</span><span class="s0">: </span><span class="s2">index</span><span class="s0">,</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">NAME$1</span><span class="s0">[</span><span class="s2">type</span><span class="s0">],</span>
                    <span class="s2">chunk</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">),</span>
                    <span class="s2">balance</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">balance</span><span class="s0">[</span><span class="s2">index</span><span class="s0">]</span>
                <span class="s0">};</span>
            <span class="s0">});</span>

            <span class="s1">return </span><span class="s2">tokens</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TokenStream_1 </span><span class="s0">= </span><span class="s2">TokenStream</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">noop</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">value</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">generateMultiplier</span><span class="s0">(</span><span class="s2">multiplier</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">min </span><span class="s0">=== </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">max </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s3">'*'</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">min </span><span class="s0">=== </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">max </span><span class="s0">=== </span><span class="s5">1</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s3">'?'</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">min </span><span class="s0">=== </span><span class="s5">1 </span><span class="s0">&amp;&amp; </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">max </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">comma </span><span class="s0">? </span><span class="s3">'#' </span><span class="s0">: </span><span class="s3">'+'</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">min </span><span class="s0">=== </span><span class="s5">1 </span><span class="s0">&amp;&amp; </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">max </span><span class="s0">=== </span><span class="s5">1</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s3">''</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">(</span>
            <span class="s0">(</span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">comma </span><span class="s0">? </span><span class="s3">'#' </span><span class="s0">: </span><span class="s3">''</span><span class="s0">) +</span>
            <span class="s0">(</span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">min </span><span class="s0">=== </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">max</span>
                <span class="s0">? </span><span class="s3">'{' </span><span class="s0">+ </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">min </span><span class="s0">+ </span><span class="s3">'}'</span>
                <span class="s0">: </span><span class="s3">'{' </span><span class="s0">+ </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">min </span><span class="s0">+ </span><span class="s3">',' </span><span class="s0">+ (</span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">max </span><span class="s0">!== </span><span class="s5">0 </span><span class="s0">? </span><span class="s2">multiplier</span><span class="s0">.</span><span class="s2">max </span><span class="s0">: </span><span class="s3">''</span><span class="s0">) + </span><span class="s3">'}'</span>
            <span class="s0">)</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">generateTypeOpts</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">switch </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
            <span class="s1">case </span><span class="s3">'Range'</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">(</span>
                    <span class="s3">' [' </span><span class="s0">+</span>
                    <span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">min </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">? </span><span class="s3">'-∞' </span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">min</span><span class="s0">) +</span>
                    <span class="s3">',' </span><span class="s0">+</span>
                    <span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">max </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">? </span><span class="s3">'∞' </span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">max</span><span class="s0">) +</span>
                    <span class="s3">']'</span>
                <span class="s0">);</span>

            <span class="s1">default</span><span class="s0">:</span>
                <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Unknown node type `' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">+ </span><span class="s3">'`'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">generateSequence</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">decorate</span><span class="s0">, </span><span class="s2">forceBraces</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">combinator </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">combinator </span><span class="s0">=== </span><span class="s3">' ' </span><span class="s0">|| </span><span class="s2">compact </span><span class="s0">? </span><span class="s2">node</span><span class="s0">.</span><span class="s2">combinator </span><span class="s0">: </span><span class="s3">' ' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">combinator </span><span class="s0">+ </span><span class="s3">' '</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">map</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">term</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">generate</span><span class="s0">(</span><span class="s2">term</span><span class="s0">, </span><span class="s2">decorate</span><span class="s0">, </span><span class="s2">forceBraces</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">);</span>
        <span class="s0">}).</span><span class="s2">join</span><span class="s0">(</span><span class="s2">combinator</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">explicit </span><span class="s0">|| </span><span class="s2">forceBraces</span><span class="s0">) {</span>
            <span class="s2">result </span><span class="s0">= (</span><span class="s2">compact </span><span class="s0">|| </span><span class="s2">result</span><span class="s0">[</span><span class="s5">0</span><span class="s0">] === </span><span class="s3">',' </span><span class="s0">? </span><span class="s3">'[' </span><span class="s0">: </span><span class="s3">'[ '</span><span class="s0">) + </span><span class="s2">result </span><span class="s0">+ (</span><span class="s2">compact </span><span class="s0">? </span><span class="s3">']' </span><span class="s0">: </span><span class="s3">' ]'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">generate</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">decorate</span><span class="s0">, </span><span class="s2">forceBraces</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">result</span><span class="s0">;</span>

        <span class="s1">switch </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
            <span class="s1">case </span><span class="s3">'Group'</span><span class="s0">:</span>
                <span class="s2">result </span><span class="s0">=</span>
                    <span class="s2">generateSequence</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">decorate</span><span class="s0">, </span><span class="s2">forceBraces</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">) +</span>
                    <span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">disallowEmpty </span><span class="s0">? </span><span class="s3">'!' </span><span class="s0">: </span><span class="s3">''</span><span class="s0">);</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'Multiplier'</span><span class="s0">:</span>
                <span class="s4">// return since node is a composition</span>
                <span class="s1">return </span><span class="s0">(</span>
                    <span class="s2">generate</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">term</span><span class="s0">, </span><span class="s2">decorate</span><span class="s0">, </span><span class="s2">forceBraces</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">) +</span>
                    <span class="s2">decorate</span><span class="s0">(</span><span class="s2">generateMultiplier</span><span class="s0">(</span><span class="s2">node</span><span class="s0">), </span><span class="s2">node</span><span class="s0">)</span>
                <span class="s0">);</span>

            <span class="s1">case </span><span class="s3">'Type'</span><span class="s0">:</span>
                <span class="s2">result </span><span class="s0">= </span><span class="s3">'&lt;' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name </span><span class="s0">+ (</span><span class="s2">node</span><span class="s0">.</span><span class="s2">opts </span><span class="s0">? </span><span class="s2">decorate</span><span class="s0">(</span><span class="s2">generateTypeOpts</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">opts</span><span class="s0">), </span><span class="s2">node</span><span class="s0">.</span><span class="s2">opts</span><span class="s0">) : </span><span class="s3">''</span><span class="s0">) + </span><span class="s3">'&gt;'</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'Property'</span><span class="s0">:</span>
                <span class="s2">result </span><span class="s0">= </span><span class="s3">'&lt;</span><span class="s1">\'</span><span class="s3">' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'</span><span class="s1">\'</span><span class="s3">&gt;'</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'Keyword'</span><span class="s0">:</span>
                <span class="s2">result </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'AtKeyword'</span><span class="s0">:</span>
                <span class="s2">result </span><span class="s0">= </span><span class="s3">'@' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'Function'</span><span class="s0">:</span>
                <span class="s2">result </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'('</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'String'</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s3">'Token'</span><span class="s0">:</span>
                <span class="s2">result </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'Comma'</span><span class="s0">:</span>
                <span class="s2">result </span><span class="s0">= </span><span class="s3">','</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">default</span><span class="s0">:</span>
                <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Unknown node type `' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">+ </span><span class="s3">'`'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">decorate</span><span class="s0">(</span><span class="s2">result</span><span class="s0">, </span><span class="s2">node</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">generate_1 </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">options</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">decorate </span><span class="s0">= </span><span class="s2">noop</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">forceBraces </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">compact </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">options </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
            <span class="s2">decorate </span><span class="s0">= </span><span class="s2">options</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">options</span><span class="s0">) {</span>
            <span class="s2">forceBraces </span><span class="s0">= </span><span class="s2">Boolean</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">forceBraces</span><span class="s0">);</span>
            <span class="s2">compact </span><span class="s0">= </span><span class="s2">Boolean</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">compact</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">options</span><span class="s0">.</span><span class="s2">decorate </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
                <span class="s2">decorate </span><span class="s0">= </span><span class="s2">options</span><span class="s0">.</span><span class="s2">decorate</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">generate</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">decorate</span><span class="s0">, </span><span class="s2">forceBraces</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s1">const </span><span class="s2">defaultLoc </span><span class="s0">= { </span><span class="s2">offset</span><span class="s0">: </span><span class="s5">0</span><span class="s0">, </span><span class="s2">line</span><span class="s0">: </span><span class="s5">1</span><span class="s0">, </span><span class="s2">column</span><span class="s0">: </span><span class="s5">1 </span><span class="s0">};</span>

    <span class="s1">function </span><span class="s2">locateMismatch</span><span class="s0">(</span><span class="s2">matchResult</span><span class="s0">, </span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">const </span><span class="s2">tokens </span><span class="s0">= </span><span class="s2">matchResult</span><span class="s0">.</span><span class="s2">tokens</span><span class="s0">;</span>
        <span class="s1">const </span><span class="s2">longestMatch </span><span class="s0">= </span><span class="s2">matchResult</span><span class="s0">.</span><span class="s2">longestMatch</span><span class="s0">;</span>
        <span class="s1">const </span><span class="s2">mismatchNode </span><span class="s0">= </span><span class="s2">longestMatch </span><span class="s0">&lt; </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s2">tokens</span><span class="s0">[</span><span class="s2">longestMatch</span><span class="s0">].</span><span class="s2">node </span><span class="s0">|| </span><span class="s1">null </span><span class="s0">: </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">const </span><span class="s2">badNode </span><span class="s0">= </span><span class="s2">mismatchNode </span><span class="s0">!== </span><span class="s2">node </span><span class="s0">? </span><span class="s2">mismatchNode </span><span class="s0">: </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">let </span><span class="s2">mismatchOffset </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">let </span><span class="s2">mismatchLength </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">let </span><span class="s2">entries </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">let </span><span class="s2">css </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>
        <span class="s1">let </span><span class="s2">start</span><span class="s0">;</span>
        <span class="s1">let </span><span class="s2">end</span><span class="s0">;</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">let </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">const </span><span class="s2">token </span><span class="s0">= </span><span class="s2">tokens</span><span class="s0">[</span><span class="s2">i</span><span class="s0">].</span><span class="s2">value</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">=== </span><span class="s2">longestMatch</span><span class="s0">) {</span>
                <span class="s2">mismatchLength </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
                <span class="s2">mismatchOffset </span><span class="s0">= </span><span class="s2">css</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">badNode </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">tokens</span><span class="s0">[</span><span class="s2">i</span><span class="s0">].</span><span class="s2">node </span><span class="s0">=== </span><span class="s2">badNode</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">&lt;= </span><span class="s2">longestMatch</span><span class="s0">) {</span>
                    <span class="s2">entries</span><span class="s0">++;</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">entries </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s2">css </span><span class="s0">+= </span><span class="s2">token</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">longestMatch </span><span class="s0">=== </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length </span><span class="s0">|| </span><span class="s2">entries </span><span class="s0">&gt; </span><span class="s5">1</span><span class="s0">) { </span><span class="s4">// last</span>
            <span class="s2">start </span><span class="s0">= </span><span class="s2">fromLoc</span><span class="s0">(</span><span class="s2">badNode </span><span class="s0">|| </span><span class="s2">node</span><span class="s0">, </span><span class="s3">'end'</span><span class="s0">) || </span><span class="s2">buildLoc</span><span class="s0">(</span><span class="s2">defaultLoc</span><span class="s0">, </span><span class="s2">css</span><span class="s0">);</span>
            <span class="s2">end </span><span class="s0">= </span><span class="s2">buildLoc</span><span class="s0">(</span><span class="s2">start</span><span class="s0">);</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s2">start </span><span class="s0">= </span><span class="s2">fromLoc</span><span class="s0">(</span><span class="s2">badNode</span><span class="s0">, </span><span class="s3">'start'</span><span class="s0">) ||</span>
                <span class="s2">buildLoc</span><span class="s0">(</span><span class="s2">fromLoc</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s3">'start'</span><span class="s0">) || </span><span class="s2">defaultLoc</span><span class="s0">, </span><span class="s2">css</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s2">mismatchOffset</span><span class="s0">));</span>
            <span class="s2">end </span><span class="s0">= </span><span class="s2">fromLoc</span><span class="s0">(</span><span class="s2">badNode</span><span class="s0">, </span><span class="s3">'end'</span><span class="s0">) ||</span>
                <span class="s2">buildLoc</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">css</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s2">mismatchOffset</span><span class="s0">, </span><span class="s2">mismatchLength</span><span class="s0">));</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">css</span><span class="s0">,</span>
            <span class="s2">mismatchOffset</span><span class="s0">,</span>
            <span class="s2">mismatchLength</span><span class="s0">,</span>
            <span class="s2">start</span><span class="s0">,</span>
            <span class="s2">end</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">fromLoc</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">point</span><span class="s0">) {</span>
        <span class="s1">const </span><span class="s2">value </span><span class="s0">= </span><span class="s2">node </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">[</span><span class="s2">point</span><span class="s0">];</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s3">'line' </span><span class="s1">in </span><span class="s2">value </span><span class="s0">? </span><span class="s2">buildLoc</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) : </span><span class="s2">value</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return null</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">buildLoc</span><span class="s0">({ </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">line</span><span class="s0">, </span><span class="s2">column </span><span class="s0">}, </span><span class="s2">extra</span><span class="s0">) {</span>
        <span class="s1">const </span><span class="s2">loc </span><span class="s0">= {</span>
            <span class="s2">offset</span><span class="s0">,</span>
            <span class="s2">line</span><span class="s0">,</span>
            <span class="s2">column</span>
        <span class="s0">};</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">extra</span><span class="s0">) {</span>
            <span class="s1">const </span><span class="s2">lines </span><span class="s0">= </span><span class="s2">extra</span><span class="s0">.</span><span class="s2">split</span><span class="s0">(</span><span class="s6">/\n|\r\n?|\f/</span><span class="s0">);</span>

            <span class="s2">loc</span><span class="s0">.</span><span class="s2">offset </span><span class="s0">+= </span><span class="s2">extra</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
            <span class="s2">loc</span><span class="s0">.</span><span class="s2">line </span><span class="s0">+= </span><span class="s2">lines</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">;</span>
            <span class="s2">loc</span><span class="s0">.</span><span class="s2">column </span><span class="s0">= </span><span class="s2">lines</span><span class="s0">.</span><span class="s2">length </span><span class="s0">=== </span><span class="s5">1 </span><span class="s0">? </span><span class="s2">loc</span><span class="s0">.</span><span class="s2">column </span><span class="s0">+ </span><span class="s2">extra</span><span class="s0">.</span><span class="s2">length </span><span class="s0">: </span><span class="s2">lines</span><span class="s0">.</span><span class="s2">pop</span><span class="s0">().</span><span class="s2">length </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">loc</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">const </span><span class="s2">SyntaxReferenceError </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">type</span><span class="s0">, </span><span class="s2">referenceName</span><span class="s0">) {</span>
        <span class="s1">const </span><span class="s2">error </span><span class="s0">= </span><span class="s2">createCustomError</span><span class="s0">(</span>
            <span class="s3">'SyntaxReferenceError'</span><span class="s0">,</span>
            <span class="s2">type </span><span class="s0">+ (</span><span class="s2">referenceName </span><span class="s0">? </span><span class="s3">' `' </span><span class="s0">+ </span><span class="s2">referenceName </span><span class="s0">+ </span><span class="s3">'`' </span><span class="s0">: </span><span class="s3">''</span><span class="s0">)</span>
        <span class="s0">);</span>

        <span class="s2">error</span><span class="s0">.</span><span class="s2">reference </span><span class="s0">= </span><span class="s2">referenceName</span><span class="s0">;</span>

        <span class="s1">return </span><span class="s2">error</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">const </span><span class="s2">SyntaxMatchError </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">message</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s2">matchResult</span><span class="s0">) {</span>
        <span class="s1">const </span><span class="s2">error </span><span class="s0">= </span><span class="s2">createCustomError</span><span class="s0">(</span><span class="s3">'SyntaxMatchError'</span><span class="s0">, </span><span class="s2">message</span><span class="s0">);</span>
        <span class="s1">const </span><span class="s0">{</span>
            <span class="s2">css</span><span class="s0">,</span>
            <span class="s2">mismatchOffset</span><span class="s0">,</span>
            <span class="s2">mismatchLength</span><span class="s0">,</span>
            <span class="s2">start</span><span class="s0">,</span>
            <span class="s2">end</span>
        <span class="s0">} = </span><span class="s2">locateMismatch</span><span class="s0">(</span><span class="s2">matchResult</span><span class="s0">, </span><span class="s2">node</span><span class="s0">);</span>

        <span class="s2">error</span><span class="s0">.</span><span class="s2">rawMessage </span><span class="s0">= </span><span class="s2">message</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">syntax </span><span class="s0">= </span><span class="s2">syntax </span><span class="s0">? </span><span class="s2">generate_1</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">) : </span><span class="s3">'&lt;generic&gt;'</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">css </span><span class="s0">= </span><span class="s2">css</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">mismatchOffset </span><span class="s0">= </span><span class="s2">mismatchOffset</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">mismatchLength </span><span class="s0">= </span><span class="s2">mismatchLength</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">message </span><span class="s0">= </span><span class="s2">message </span><span class="s0">+ </span><span class="s3">'</span><span class="s1">\n</span><span class="s3">' </span><span class="s0">+</span>
            <span class="s3">'  syntax: ' </span><span class="s0">+ </span><span class="s2">error</span><span class="s0">.</span><span class="s2">syntax </span><span class="s0">+ </span><span class="s3">'</span><span class="s1">\n</span><span class="s3">' </span><span class="s0">+</span>
            <span class="s3">'   value: ' </span><span class="s0">+ (</span><span class="s2">css </span><span class="s0">|| </span><span class="s3">'&lt;empty string&gt;'</span><span class="s0">) + </span><span class="s3">'</span><span class="s1">\n</span><span class="s3">' </span><span class="s0">+</span>
            <span class="s3">'  --------' </span><span class="s0">+ </span><span class="s1">new </span><span class="s2">Array</span><span class="s0">(</span><span class="s2">error</span><span class="s0">.</span><span class="s2">mismatchOffset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">).</span><span class="s2">join</span><span class="s0">(</span><span class="s3">'-'</span><span class="s0">) + </span><span class="s3">'^'</span><span class="s0">;</span>

        <span class="s2">Object</span><span class="s0">.</span><span class="s2">assign</span><span class="s0">(</span><span class="s2">error</span><span class="s0">, </span><span class="s2">start</span><span class="s0">);</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">loc </span><span class="s0">= {</span>
            <span class="s2">source</span><span class="s0">: (</span><span class="s2">node </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">source</span><span class="s0">) || </span><span class="s3">'&lt;unknown&gt;'</span><span class="s0">,</span>
            <span class="s2">start</span><span class="s0">,</span>
            <span class="s2">end</span>
        <span class="s0">};</span>

        <span class="s1">return </span><span class="s2">error</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">error </span><span class="s0">= {</span>
        <span class="s2">SyntaxReferenceError</span><span class="s0">,</span>
        <span class="s2">SyntaxMatchError</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">hasOwnProperty </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">keywords </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">create</span><span class="s0">(</span><span class="s1">null</span><span class="s0">);</span>
    <span class="s1">var </span><span class="s2">properties </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">create</span><span class="s0">(</span><span class="s1">null</span><span class="s0">);</span>
    <span class="s1">var </span><span class="s2">HYPHENMINUS </span><span class="s0">= </span><span class="s5">45</span><span class="s0">; </span><span class="s4">// '-'.charCodeAt()</span>

    <span class="s1">function </span><span class="s2">isCustomProperty</span><span class="s0">(</span><span class="s2">str</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s2">offset </span><span class="s0">= </span><span class="s2">offset </span><span class="s0">|| </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s1">return </span><span class="s2">str</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s2">offset </span><span class="s0">&gt;= </span><span class="s5">2 </span><span class="s0">&amp;&amp;</span>
               <span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s2">HYPHENMINUS </span><span class="s0">&amp;&amp;</span>
               <span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) === </span><span class="s2">HYPHENMINUS</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getVendorPrefix</span><span class="s0">(</span><span class="s2">str</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s2">offset </span><span class="s0">= </span><span class="s2">offset </span><span class="s0">|| </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s4">// verdor prefix should be at least 3 chars length</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">str</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s2">offset </span><span class="s0">&gt;= </span><span class="s5">3</span><span class="s0">) {</span>
            <span class="s4">// vendor prefix starts with hyper minus following non-hyper minus</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s2">HYPHENMINUS </span><span class="s0">&amp;&amp;</span>
                <span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) !== </span><span class="s2">HYPHENMINUS</span><span class="s0">) {</span>
                <span class="s4">// vendor prefix should contain a hyper minus at the ending</span>
                <span class="s1">var </span><span class="s2">secondDashIndex </span><span class="s0">= </span><span class="s2">str</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s3">'-'</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">secondDashIndex </span><span class="s0">!== -</span><span class="s5">1</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s2">str</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">, </span><span class="s2">secondDashIndex </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s3">''</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getKeywordDescriptor</span><span class="s0">(</span><span class="s2">keyword</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">keywords</span><span class="s0">, </span><span class="s2">keyword</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s2">keywords</span><span class="s0">[</span><span class="s2">keyword</span><span class="s0">];</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s2">keyword</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">keywords</span><span class="s0">, </span><span class="s2">name</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s2">keywords</span><span class="s0">[</span><span class="s2">keyword</span><span class="s0">] = </span><span class="s2">keywords</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">custom </span><span class="s0">= </span><span class="s2">isCustomProperty</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s5">0</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">vendor </span><span class="s0">= !</span><span class="s2">custom </span><span class="s0">? </span><span class="s2">getVendorPrefix</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s5">0</span><span class="s0">) : </span><span class="s3">''</span><span class="s0">;</span>

        <span class="s1">return </span><span class="s2">keywords</span><span class="s0">[</span><span class="s2">keyword</span><span class="s0">] = </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">freeze</span><span class="s0">({</span>
            <span class="s2">basename</span><span class="s0">: </span><span class="s2">name</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s2">vendor</span><span class="s0">.</span><span class="s2">length</span><span class="s0">),</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
            <span class="s2">vendor</span><span class="s0">: </span><span class="s2">vendor</span><span class="s0">,</span>
            <span class="s2">prefix</span><span class="s0">: </span><span class="s2">vendor</span><span class="s0">,</span>
            <span class="s2">custom</span><span class="s0">: </span><span class="s2">custom</span>
        <span class="s0">});</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getPropertyDescriptor</span><span class="s0">(</span><span class="s2">property</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">properties</span><span class="s0">, </span><span class="s2">property</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s2">properties</span><span class="s0">[</span><span class="s2">property</span><span class="s0">];</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s2">property</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">hack </span><span class="s0">= </span><span class="s2">property</span><span class="s0">[</span><span class="s5">0</span><span class="s0">];</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">hack </span><span class="s0">=== </span><span class="s3">'/'</span><span class="s0">) {</span>
            <span class="s2">hack </span><span class="s0">= </span><span class="s2">property</span><span class="s0">[</span><span class="s5">1</span><span class="s0">] === </span><span class="s3">'/' </span><span class="s0">? </span><span class="s3">'//' </span><span class="s0">: </span><span class="s3">'/'</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">hack </span><span class="s0">!== </span><span class="s3">'_' </span><span class="s0">&amp;&amp;</span>
                   <span class="s2">hack </span><span class="s0">!== </span><span class="s3">'*' </span><span class="s0">&amp;&amp;</span>
                   <span class="s2">hack </span><span class="s0">!== </span><span class="s3">'$' </span><span class="s0">&amp;&amp;</span>
                   <span class="s2">hack </span><span class="s0">!== </span><span class="s3">'#' </span><span class="s0">&amp;&amp;</span>
                   <span class="s2">hack </span><span class="s0">!== </span><span class="s3">'+' </span><span class="s0">&amp;&amp;</span>
                   <span class="s2">hack </span><span class="s0">!== </span><span class="s3">'&amp;'</span><span class="s0">) {</span>
            <span class="s2">hack </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">custom </span><span class="s0">= </span><span class="s2">isCustomProperty</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">hack</span><span class="s0">.</span><span class="s2">length</span><span class="s0">);</span>

        <span class="s4">// re-use result when possible (the same as for lower case)</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">custom</span><span class="s0">) {</span>
            <span class="s2">name </span><span class="s0">= </span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">properties</span><span class="s0">, </span><span class="s2">name</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s2">properties</span><span class="s0">[</span><span class="s2">property</span><span class="s0">] = </span><span class="s2">properties</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">vendor </span><span class="s0">= !</span><span class="s2">custom </span><span class="s0">? </span><span class="s2">getVendorPrefix</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">hack</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) : </span><span class="s3">''</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">prefix </span><span class="s0">= </span><span class="s2">name</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s2">hack</span><span class="s0">.</span><span class="s2">length </span><span class="s0">+ </span><span class="s2">vendor</span><span class="s0">.</span><span class="s2">length</span><span class="s0">);</span>

        <span class="s1">return </span><span class="s2">properties</span><span class="s0">[</span><span class="s2">property</span><span class="s0">] = </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">freeze</span><span class="s0">({</span>
            <span class="s2">basename</span><span class="s0">: </span><span class="s2">name</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s2">prefix</span><span class="s0">.</span><span class="s2">length</span><span class="s0">),</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s2">hack</span><span class="s0">.</span><span class="s2">length</span><span class="s0">),</span>
            <span class="s2">hack</span><span class="s0">: </span><span class="s2">hack</span><span class="s0">,</span>
            <span class="s2">vendor</span><span class="s0">: </span><span class="s2">vendor</span><span class="s0">,</span>
            <span class="s2">prefix</span><span class="s0">: </span><span class="s2">prefix</span><span class="s0">,</span>
            <span class="s2">custom</span><span class="s0">: </span><span class="s2">custom</span>
        <span class="s0">});</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">names </span><span class="s0">= {</span>
        <span class="s2">keyword</span><span class="s0">: </span><span class="s2">getKeywordDescriptor</span><span class="s0">,</span>
        <span class="s2">property</span><span class="s0">: </span><span class="s2">getPropertyDescriptor</span><span class="s0">,</span>
        <span class="s2">isCustomProperty</span><span class="s0">: </span><span class="s2">isCustomProperty</span><span class="s0">,</span>
        <span class="s2">vendorPrefix</span><span class="s0">: </span><span class="s2">getVendorPrefix</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">MIN_SIZE </span><span class="s0">= </span><span class="s5">16 </span><span class="s0">* </span><span class="s5">1024</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SafeUint32Array </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">Uint32Array </span><span class="s0">!== </span><span class="s3">'undefined' </span><span class="s0">? </span><span class="s2">Uint32Array </span><span class="s0">: </span><span class="s2">Array</span><span class="s0">; </span><span class="s4">// fallback on Array when TypedArray is not supported</span>

    <span class="s1">var </span><span class="s2">adoptBuffer </span><span class="s0">= </span><span class="s1">function </span><span class="s2">adoptBuffer</span><span class="s0">(</span><span class="s2">buffer</span><span class="s0">, </span><span class="s2">size</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">buffer </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">buffer</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&lt; </span><span class="s2">size</span><span class="s0">) {</span>
            <span class="s1">return new </span><span class="s2">SafeUint32Array</span><span class="s0">(</span><span class="s2">Math</span><span class="s0">.</span><span class="s2">max</span><span class="s0">(</span><span class="s2">size </span><span class="s0">+ </span><span class="s5">1024</span><span class="s0">, </span><span class="s2">MIN_SIZE</span><span class="s0">));</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">buffer</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$2 </span><span class="s0">= </span><span class="s2">_const</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>


    <span class="s1">var </span><span class="s2">isNewline$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isNewline</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isName$2 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isName</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isValidEscape$2 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isValidEscape</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isNumberStart$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isNumberStart</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isIdentifierStart$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isIdentifierStart</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">charCodeCategory$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">charCodeCategory</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isBOM$1 </span><span class="s0">= </span><span class="s2">charCodeDefinitions</span><span class="s0">.</span><span class="s2">isBOM</span><span class="s0">;</span>


    <span class="s1">var </span><span class="s2">cmpStr$2 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">cmpStr</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">getNewlineLength$1 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">getNewlineLength</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">findWhiteSpaceEnd$1 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">findWhiteSpaceEnd</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">consumeEscaped$1 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">consumeEscaped</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">consumeName$1 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">consumeName</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">consumeNumber$1 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">consumeNumber</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">consumeBadUrlRemnants$1 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">consumeBadUrlRemnants</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">OFFSET_MASK$1 </span><span class="s0">= </span><span class="s5">0x00FFFFFF</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE_SHIFT$1 </span><span class="s0">= </span><span class="s5">24</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">tokenize</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">stream</span><span class="s0">) {</span>
        <span class="s1">function </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">sourceLength </span><span class="s0">? </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) : </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// § 4.3.3. Consume a numeric token</span>
        <span class="s1">function </span><span class="s2">consumeNumericToken</span><span class="s0">() {</span>
            <span class="s4">// Consume a number and let number be the result.</span>
            <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeNumber$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>

            <span class="s4">// If the next 3 input code points would start an identifier, then:</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">isIdentifierStart$1</span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">))) {</span>
                <span class="s4">// Create a &lt;dimension-token&gt; with the same value and type flag as number, and a unit set initially to the empty string.</span>
                <span class="s4">// Consume a name. Set the &lt;dimension-token&gt;’s unit to the returned value.</span>
                <span class="s4">// Return the &lt;dimension-token&gt;.</span>
                <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>
                <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeName$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// Otherwise, if the next input code point is U+0025 PERCENTAGE SIGN (%), consume it.</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s5">0x0025</span><span class="s0">) {</span>
                <span class="s4">// Create a &lt;percentage-token&gt; with the same value as number, and return it.</span>
                <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">;</span>
                <span class="s2">offset</span><span class="s0">++;</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// Otherwise, create a &lt;number-token&gt; with the same value and type flag as number, and return it.</span>
            <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// § 4.3.4. Consume an ident-like token</span>
        <span class="s1">function </span><span class="s2">consumeIdentLikeToken</span><span class="s0">() {</span>
            <span class="s1">const </span><span class="s2">nameStartOffset </span><span class="s0">= </span><span class="s2">offset</span><span class="s0">;</span>

            <span class="s4">// Consume a name, and let string be the result.</span>
            <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeName$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>

            <span class="s4">// If string’s value is an ASCII case-insensitive match for &quot;url&quot;,</span>
            <span class="s4">// and the next input code point is U+0028 LEFT PARENTHESIS ((), consume it.</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">cmpStr$2</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">nameStartOffset</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s3">'url'</span><span class="s0">) &amp;&amp; </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s5">0x0028</span><span class="s0">) {</span>
                <span class="s4">// While the next two input code points are whitespace, consume the next input code point.</span>
                <span class="s2">offset </span><span class="s0">= </span><span class="s2">findWhiteSpaceEnd$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>

                <span class="s4">// If the next one or two input code points are U+0022 QUOTATION MARK (&quot;), U+0027 APOSTROPHE ('),</span>
                <span class="s4">// or whitespace followed by U+0022 QUOTATION MARK (&quot;) or U+0027 APOSTROPHE ('),</span>
                <span class="s4">// then create a &lt;function-token&gt; with its value set to string and return it.</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s5">0x0022 </span><span class="s0">||</span>
                    <span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s5">0x0027</span><span class="s0">) {</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
                    <span class="s2">offset </span><span class="s0">= </span><span class="s2">nameStartOffset </span><span class="s0">+ </span><span class="s5">4</span><span class="s0">;</span>
                    <span class="s1">return</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s4">// Otherwise, consume a url token, and return it.</span>
                <span class="s2">consumeUrlToken</span><span class="s0">();</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// Otherwise, if the next input code point is U+0028 LEFT PARENTHESIS ((), consume it.</span>
            <span class="s4">// Create a &lt;function-token&gt; with its value set to string and return it.</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s5">0x0028</span><span class="s0">) {</span>
                <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
                <span class="s2">offset</span><span class="s0">++;</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// Otherwise, create an &lt;ident-token&gt; with its value set to string and return it.</span>
            <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// § 4.3.5. Consume a string token</span>
        <span class="s1">function </span><span class="s2">consumeStringToken</span><span class="s0">(</span><span class="s2">endingCodePoint</span><span class="s0">) {</span>
            <span class="s4">// This algorithm may be called with an ending code point, which denotes the code point</span>
            <span class="s4">// that ends the string. If an ending code point is not specified,</span>
            <span class="s4">// the current input code point is used.</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">endingCodePoint</span><span class="s0">) {</span>
                <span class="s2">endingCodePoint </span><span class="s0">= </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">++);</span>
            <span class="s0">}</span>

            <span class="s4">// Initially create a &lt;string-token&gt; with its value set to the empty string.</span>
            <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">String</span><span class="s0">;</span>

            <span class="s4">// Repeatedly consume the next input code point from the stream:</span>
            <span class="s1">for </span><span class="s0">(; </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
                <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

                <span class="s1">switch </span><span class="s0">(</span><span class="s2">charCodeCategory$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                    <span class="s4">// ending code point</span>
                    <span class="s1">case </span><span class="s2">endingCodePoint</span><span class="s0">:</span>
                        <span class="s4">// Return the &lt;string-token&gt;.</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                        <span class="s1">return</span><span class="s0">;</span>

                    <span class="s4">// EOF</span>
                    <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">Eof</span><span class="s0">:</span>
                        <span class="s4">// This is a parse error. Return the &lt;string-token&gt;.</span>
                        <span class="s1">return</span><span class="s0">;</span>

                    <span class="s4">// newline</span>
                    <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">:</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">isNewline$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                            <span class="s4">// This is a parse error. Reconsume the current input code point,</span>
                            <span class="s4">// create a &lt;bad-string-token&gt;, and return it.</span>
                            <span class="s2">offset </span><span class="s0">+= </span><span class="s2">getNewlineLength$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">code</span><span class="s0">);</span>
                            <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">BadString</span><span class="s0">;</span>
                            <span class="s1">return</span><span class="s0">;</span>
                        <span class="s0">}</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s4">// U+005C REVERSE SOLIDUS (\)</span>
                    <span class="s1">case </span><span class="s5">0x005C</span><span class="s0">:</span>
                        <span class="s4">// If the next input code point is EOF, do nothing.</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">=== </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">) {</span>
                            <span class="s1">break</span><span class="s0">;</span>
                        <span class="s0">}</span>

                        <span class="s1">var </span><span class="s2">nextCode </span><span class="s0">= </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>

                        <span class="s4">// Otherwise, if the next input code point is a newline, consume it.</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">isNewline$1</span><span class="s0">(</span><span class="s2">nextCode</span><span class="s0">)) {</span>
                            <span class="s2">offset </span><span class="s0">+= </span><span class="s2">getNewlineLength$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">, </span><span class="s2">nextCode</span><span class="s0">);</span>
                        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">isValidEscape$2</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">nextCode</span><span class="s0">)) {</span>
                            <span class="s4">// Otherwise, (the stream starts with a valid escape) consume</span>
                            <span class="s4">// an escaped code point and append the returned code point to</span>
                            <span class="s4">// the &lt;string-token&gt;’s value.</span>
                            <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeEscaped$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) - </span><span class="s5">1</span><span class="s0">;</span>
                        <span class="s0">}</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s4">// anything else</span>
                    <span class="s4">// Append the current input code point to the &lt;string-token&gt;’s value.</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s4">// § 4.3.6. Consume a url token</span>
        <span class="s4">// Note: This algorithm assumes that the initial &quot;url(&quot; has already been consumed.</span>
        <span class="s4">// This algorithm also assumes that it’s being called to consume an &quot;unquoted&quot; value, like url(foo).</span>
        <span class="s4">// A quoted value, like url(&quot;foo&quot;), is parsed as a &lt;function-token&gt;. Consume an ident-like token</span>
        <span class="s4">// automatically handles this distinction; this algorithm shouldn’t be called directly otherwise.</span>
        <span class="s1">function </span><span class="s2">consumeUrlToken</span><span class="s0">() {</span>
            <span class="s4">// Initially create a &lt;url-token&gt; with its value set to the empty string.</span>
            <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">;</span>

            <span class="s4">// Consume as much whitespace as possible.</span>
            <span class="s2">offset </span><span class="s0">= </span><span class="s2">findWhiteSpaceEnd$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>

            <span class="s4">// Repeatedly consume the next input code point from the stream:</span>
            <span class="s1">for </span><span class="s0">(; </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
                <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

                <span class="s1">switch </span><span class="s0">(</span><span class="s2">charCodeCategory$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                    <span class="s4">// U+0029 RIGHT PARENTHESIS ())</span>
                    <span class="s1">case </span><span class="s5">0x0029</span><span class="s0">:</span>
                        <span class="s4">// Return the &lt;url-token&gt;.</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                        <span class="s1">return</span><span class="s0">;</span>

                    <span class="s4">// EOF</span>
                    <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">Eof</span><span class="s0">:</span>
                        <span class="s4">// This is a parse error. Return the &lt;url-token&gt;.</span>
                        <span class="s1">return</span><span class="s0">;</span>

                    <span class="s4">// whitespace</span>
                    <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">:</span>
                        <span class="s4">// Consume as much whitespace as possible.</span>
                        <span class="s2">offset </span><span class="s0">= </span><span class="s2">findWhiteSpaceEnd$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>

                        <span class="s4">// If the next input code point is U+0029 RIGHT PARENTHESIS ()) or EOF,</span>
                        <span class="s4">// consume it and return the &lt;url-token&gt;</span>
                        <span class="s4">// (if EOF was encountered, this is a parse error);</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s5">0x0029 </span><span class="s0">|| </span><span class="s2">offset </span><span class="s0">&gt;= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                                <span class="s2">offset</span><span class="s0">++;</span>
                            <span class="s0">}</span>
                            <span class="s1">return</span><span class="s0">;</span>
                        <span class="s0">}</span>

                        <span class="s4">// otherwise, consume the remnants of a bad url, create a &lt;bad-url-token&gt;,</span>
                        <span class="s4">// and return it.</span>
                        <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeBadUrlRemnants$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">BadUrl</span><span class="s0">;</span>
                        <span class="s1">return</span><span class="s0">;</span>

                    <span class="s4">// U+0022 QUOTATION MARK (&quot;)</span>
                    <span class="s4">// U+0027 APOSTROPHE (')</span>
                    <span class="s4">// U+0028 LEFT PARENTHESIS (()</span>
                    <span class="s4">// non-printable code point</span>
                    <span class="s1">case </span><span class="s5">0x0022</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s5">0x0027</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s5">0x0028</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">NonPrintable</span><span class="s0">:</span>
                        <span class="s4">// This is a parse error. Consume the remnants of a bad url,</span>
                        <span class="s4">// create a &lt;bad-url-token&gt;, and return it.</span>
                        <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeBadUrlRemnants$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">BadUrl</span><span class="s0">;</span>
                        <span class="s1">return</span><span class="s0">;</span>

                    <span class="s4">// U+005C REVERSE SOLIDUS (\)</span>
                    <span class="s1">case </span><span class="s5">0x005C</span><span class="s0">:</span>
                        <span class="s4">// If the stream starts with a valid escape, consume an escaped code point and</span>
                        <span class="s4">// append the returned code point to the &lt;url-token&gt;’s value.</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">isValidEscape$2</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">))) {</span>
                            <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeEscaped$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) - </span><span class="s5">1</span><span class="s0">;</span>
                            <span class="s1">break</span><span class="s0">;</span>
                        <span class="s0">}</span>

                        <span class="s4">// Otherwise, this is a parse error. Consume the remnants of a bad url,</span>
                        <span class="s4">// create a &lt;bad-url-token&gt;, and return it.</span>
                        <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeBadUrlRemnants$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">BadUrl</span><span class="s0">;</span>
                        <span class="s1">return</span><span class="s0">;</span>

                    <span class="s4">// anything else</span>
                    <span class="s4">// Append the current input code point to the &lt;url-token&gt;’s value.</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(!</span><span class="s2">stream</span><span class="s0">) {</span>
            <span class="s2">stream </span><span class="s0">= </span><span class="s1">new </span><span class="s2">TokenStream_1</span><span class="s0">();</span>
        <span class="s0">}</span>

        <span class="s4">// ensure source is a string</span>
        <span class="s2">source </span><span class="s0">= </span><span class="s2">String</span><span class="s0">(</span><span class="s2">source </span><span class="s0">|| </span><span class="s3">''</span><span class="s0">);</span>

        <span class="s1">var </span><span class="s2">sourceLength </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">offsetAndType </span><span class="s0">= </span><span class="s2">adoptBuffer</span><span class="s0">(</span><span class="s2">stream</span><span class="s0">.</span><span class="s2">offsetAndType</span><span class="s0">, </span><span class="s2">sourceLength </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">); </span><span class="s4">// +1 because of eof-token</span>
        <span class="s1">var </span><span class="s2">balance </span><span class="s0">= </span><span class="s2">adoptBuffer</span><span class="s0">(</span><span class="s2">stream</span><span class="s0">.</span><span class="s2">balance</span><span class="s0">, </span><span class="s2">sourceLength </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">tokenCount </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s2">isBOM$1</span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s5">0</span><span class="s0">));</span>
        <span class="s1">var </span><span class="s2">offset </span><span class="s0">= </span><span class="s2">start</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">balanceCloseType </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">balanceStart </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">balancePrev </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s4">// https://drafts.csswg.org/css-syntax-3/#consume-token</span>
        <span class="s4">// § 4.3.1. Consume a token</span>
        <span class="s1">while </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s2">sourceLength</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">type </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

            <span class="s2">balance</span><span class="s0">[</span><span class="s2">tokenCount</span><span class="s0">] = </span><span class="s2">sourceLength</span><span class="s0">;</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s2">charCodeCategory$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                <span class="s4">// whitespace</span>
                <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">:</span>
                    <span class="s4">// Consume as much whitespace as possible. Return a &lt;whitespace-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
                    <span class="s2">offset </span><span class="s0">= </span><span class="s2">findWhiteSpaceEnd$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+0022 QUOTATION MARK (&quot;)</span>
                <span class="s1">case </span><span class="s5">0x0022</span><span class="s0">:</span>
                    <span class="s4">// Consume a string token and return it.</span>
                    <span class="s2">consumeStringToken</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+0023 NUMBER SIGN (#)</span>
                <span class="s1">case </span><span class="s5">0x0023</span><span class="s0">:</span>
                    <span class="s4">// If the next input code point is a name code point or the next two input code points are a valid escape, then:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">isName$2</span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">)) || </span><span class="s2">isValidEscape$2</span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">))) {</span>
                        <span class="s4">// Create a &lt;hash-token&gt;.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">;</span>

                        <span class="s4">// If the next 3 input code points would start an identifier, set the &lt;hash-token&gt;’s type flag to &quot;id&quot;.</span>
                        <span class="s4">// if (isIdentifierStart(getCharCode(offset + 1), getCharCode(offset + 2), getCharCode(offset + 3))) {</span>
                        <span class="s4">//     // TODO: set id flag</span>
                        <span class="s4">// }</span>

                        <span class="s4">// Consume a name, and set the &lt;hash-token&gt;’s value to the returned string.</span>
                        <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeName$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>

                        <span class="s4">// Return the &lt;hash-token&gt;.</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s4">// Otherwise, return a &lt;delim-token&gt; with its value set to the current input code point.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+0027 APOSTROPHE (')</span>
                <span class="s1">case </span><span class="s5">0x0027</span><span class="s0">:</span>
                    <span class="s4">// Consume a string token and return it.</span>
                    <span class="s2">consumeStringToken</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+0028 LEFT PARENTHESIS (()</span>
                <span class="s1">case </span><span class="s5">0x0028</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;(-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+0029 RIGHT PARENTHESIS ())</span>
                <span class="s1">case </span><span class="s5">0x0029</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;)-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+002B PLUS SIGN (+)</span>
                <span class="s1">case </span><span class="s5">0x002B</span><span class="s0">:</span>
                    <span class="s4">// If the input stream starts with a number, ...</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">isNumberStart$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">))) {</span>
                        <span class="s4">// ... reconsume the current input code point, consume a numeric token, and return it.</span>
                        <span class="s2">consumeNumericToken</span><span class="s0">();</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s4">// Otherwise, return a &lt;delim-token&gt; with its value set to the current input code point.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s0">}</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+002C COMMA (,)</span>
                <span class="s1">case </span><span class="s5">0x002C</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;comma-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Comma</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+002D HYPHEN-MINUS (-)</span>
                <span class="s1">case </span><span class="s5">0x002D</span><span class="s0">:</span>
                    <span class="s4">// If the input stream starts with a number, reconsume the current input code point, consume a numeric token, and return it.</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">isNumberStart$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">))) {</span>
                        <span class="s2">consumeNumericToken</span><span class="s0">();</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s4">// Otherwise, if the next 2 input code points are U+002D HYPHEN-MINUS U+003E GREATER-THAN SIGN (-&gt;), consume them and return a &lt;CDC-token&gt;.</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) === </span><span class="s5">0x002D </span><span class="s0">&amp;&amp;</span>
                            <span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">) === </span><span class="s5">0x003E</span><span class="s0">) {</span>
                            <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">CDC</span><span class="s0">;</span>
                            <span class="s2">offset </span><span class="s0">= </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">3</span><span class="s0">;</span>
                        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                            <span class="s4">// Otherwise, if the input stream starts with an identifier, ...</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s2">isIdentifierStart$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">))) {</span>
                                <span class="s4">// ... reconsume the current input code point, consume an ident-like token, and return it.</span>
                                <span class="s2">consumeIdentLikeToken</span><span class="s0">();</span>
                            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                                <span class="s4">// Otherwise, return a &lt;delim-token&gt; with its value set to the current input code point.</span>
                                <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                                <span class="s2">offset</span><span class="s0">++;</span>
                            <span class="s0">}</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+002E FULL STOP (.)</span>
                <span class="s1">case </span><span class="s5">0x002E</span><span class="s0">:</span>
                    <span class="s4">// If the input stream starts with a number, ...</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">isNumberStart$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">))) {</span>
                        <span class="s4">// ... reconsume the current input code point, consume a numeric token, and return it.</span>
                        <span class="s2">consumeNumericToken</span><span class="s0">();</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s4">// Otherwise, return a &lt;delim-token&gt; with its value set to the current input code point.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+002F SOLIDUS (/)</span>
                <span class="s1">case </span><span class="s5">0x002F</span><span class="s0">:</span>
                    <span class="s4">// If the next two input code point are U+002F SOLIDUS (/) followed by a U+002A ASTERISK (*),</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) === </span><span class="s5">0x002A</span><span class="s0">) {</span>
                        <span class="s4">// ... consume them and all following code points up to and including the first U+002A ASTERISK (*)</span>
                        <span class="s4">// followed by a U+002F SOLIDUS (/), or up to an EOF code point.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
                        <span class="s2">offset </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s3">'*/'</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">) + </span><span class="s5">2</span><span class="s0">;</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">=== </span><span class="s5">1</span><span class="s0">) {</span>
                            <span class="s2">offset </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s0">}</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+003A COLON (:)</span>
                <span class="s1">case </span><span class="s5">0x003A</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;colon-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+003B SEMICOLON (;)</span>
                <span class="s1">case </span><span class="s5">0x003B</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;semicolon-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+003C LESS-THAN SIGN (&lt;)</span>
                <span class="s1">case </span><span class="s5">0x003C</span><span class="s0">:</span>
                    <span class="s4">// If the next 3 input code points are U+0021 EXCLAMATION MARK U+002D HYPHEN-MINUS U+002D HYPHEN-MINUS (!--), ...</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) === </span><span class="s5">0x0021 </span><span class="s0">&amp;&amp;</span>
                        <span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">) === </span><span class="s5">0x002D </span><span class="s0">&amp;&amp;</span>
                        <span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">3</span><span class="s0">) === </span><span class="s5">0x002D</span><span class="s0">) {</span>
                        <span class="s4">// ... consume them and return a &lt;CDO-token&gt;.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">CDO</span><span class="s0">;</span>
                        <span class="s2">offset </span><span class="s0">= </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">4</span><span class="s0">;</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s4">// Otherwise, return a &lt;delim-token&gt; with its value set to the current input code point.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+0040 COMMERCIAL AT (@)</span>
                <span class="s1">case </span><span class="s5">0x0040</span><span class="s0">:</span>
                    <span class="s4">// If the next 3 input code points would start an identifier, ...</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">isIdentifierStart$1</span><span class="s0">(</span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">), </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">3</span><span class="s0">))) {</span>
                        <span class="s4">// ... consume a name, create an &lt;at-keyword-token&gt; with its value set to the returned value, and return it.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">AtKeyword</span><span class="s0">;</span>
                        <span class="s2">offset </span><span class="s0">= </span><span class="s2">consumeName$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s4">// Otherwise, return a &lt;delim-token&gt; with its value set to the current input code point.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+005B LEFT SQUARE BRACKET ([)</span>
                <span class="s1">case </span><span class="s5">0x005B</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;[-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">LeftSquareBracket</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+005C REVERSE SOLIDUS (\)</span>
                <span class="s1">case </span><span class="s5">0x005C</span><span class="s0">:</span>
                    <span class="s4">// If the input stream starts with a valid escape, ...</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">isValidEscape$2</span><span class="s0">(</span><span class="s2">code</span><span class="s0">, </span><span class="s2">getCharCode</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">))) {</span>
                        <span class="s4">// ... reconsume the current input code point, consume an ident-like token, and return it.</span>
                        <span class="s2">consumeIdentLikeToken</span><span class="s0">();</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s4">// Otherwise, this is a parse error. Return a &lt;delim-token&gt; with its value set to the current input code point.</span>
                        <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                        <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s0">}</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+005D RIGHT SQUARE BRACKET (])</span>
                <span class="s1">case </span><span class="s5">0x005D</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;]-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">RightSquareBracket</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+007B LEFT CURLY BRACKET ({)</span>
                <span class="s1">case </span><span class="s5">0x007B</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;{-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// U+007D RIGHT CURLY BRACKET (})</span>
                <span class="s1">case </span><span class="s5">0x007D</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;}-token&gt;.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">RightCurlyBracket</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// digit</span>
                <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">Digit</span><span class="s0">:</span>
                    <span class="s4">// Reconsume the current input code point, consume a numeric token, and return it.</span>
                    <span class="s2">consumeNumericToken</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// name-start code point</span>
                <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">NameStart</span><span class="s0">:</span>
                    <span class="s4">// Reconsume the current input code point, consume an ident-like token, and return it.</span>
                    <span class="s2">consumeIdentLikeToken</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// EOF</span>
                <span class="s1">case </span><span class="s2">charCodeCategory$1</span><span class="s0">.</span><span class="s2">Eof</span><span class="s0">:</span>
                    <span class="s4">// Return an &lt;EOF-token&gt;.</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// anything else</span>
                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s4">// Return a &lt;delim-token&gt; with its value set to the current input code point.</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
                    <span class="s2">offset</span><span class="s0">++;</span>
            <span class="s0">}</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s2">type</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s2">balanceCloseType</span><span class="s0">:</span>
                    <span class="s2">balancePrev </span><span class="s0">= </span><span class="s2">balanceStart </span><span class="s0">&amp; </span><span class="s2">OFFSET_MASK$1</span><span class="s0">;</span>
                    <span class="s2">balanceStart </span><span class="s0">= </span><span class="s2">balance</span><span class="s0">[</span><span class="s2">balancePrev</span><span class="s0">];</span>
                    <span class="s2">balanceCloseType </span><span class="s0">= </span><span class="s2">balanceStart </span><span class="s0">&gt;&gt; </span><span class="s2">TYPE_SHIFT$1</span><span class="s0">;</span>
                    <span class="s2">balance</span><span class="s0">[</span><span class="s2">tokenCount</span><span class="s0">] = </span><span class="s2">balancePrev</span><span class="s0">;</span>
                    <span class="s2">balance</span><span class="s0">[</span><span class="s2">balancePrev</span><span class="s0">++] = </span><span class="s2">tokenCount</span><span class="s0">;</span>
                    <span class="s1">for </span><span class="s0">(; </span><span class="s2">balancePrev </span><span class="s0">&lt; </span><span class="s2">tokenCount</span><span class="s0">; </span><span class="s2">balancePrev</span><span class="s0">++) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">balance</span><span class="s0">[</span><span class="s2">balancePrev</span><span class="s0">] === </span><span class="s2">sourceLength</span><span class="s0">) {</span>
                            <span class="s2">balance</span><span class="s0">[</span><span class="s2">balancePrev</span><span class="s0">] = </span><span class="s2">tokenCount</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">:</span>
                    <span class="s2">balance</span><span class="s0">[</span><span class="s2">tokenCount</span><span class="s0">] = </span><span class="s2">balanceStart</span><span class="s0">;</span>
                    <span class="s2">balanceCloseType </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">;</span>
                    <span class="s2">balanceStart </span><span class="s0">= (</span><span class="s2">balanceCloseType </span><span class="s0">&lt;&lt; </span><span class="s2">TYPE_SHIFT$1</span><span class="s0">) | </span><span class="s2">tokenCount</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">LeftSquareBracket</span><span class="s0">:</span>
                    <span class="s2">balance</span><span class="s0">[</span><span class="s2">tokenCount</span><span class="s0">] = </span><span class="s2">balanceStart</span><span class="s0">;</span>
                    <span class="s2">balanceCloseType </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">RightSquareBracket</span><span class="s0">;</span>
                    <span class="s2">balanceStart </span><span class="s0">= (</span><span class="s2">balanceCloseType </span><span class="s0">&lt;&lt; </span><span class="s2">TYPE_SHIFT$1</span><span class="s0">) | </span><span class="s2">tokenCount</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">:</span>
                    <span class="s2">balance</span><span class="s0">[</span><span class="s2">tokenCount</span><span class="s0">] = </span><span class="s2">balanceStart</span><span class="s0">;</span>
                    <span class="s2">balanceCloseType </span><span class="s0">= </span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">RightCurlyBracket</span><span class="s0">;</span>
                    <span class="s2">balanceStart </span><span class="s0">= (</span><span class="s2">balanceCloseType </span><span class="s0">&lt;&lt; </span><span class="s2">TYPE_SHIFT$1</span><span class="s0">) | </span><span class="s2">tokenCount</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">tokenCount</span><span class="s0">++] = (</span><span class="s2">type </span><span class="s0">&lt;&lt; </span><span class="s2">TYPE_SHIFT$1</span><span class="s0">) | </span><span class="s2">offset</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// finalize buffers</span>
        <span class="s2">offsetAndType</span><span class="s0">[</span><span class="s2">tokenCount</span><span class="s0">] = (</span><span class="s2">TYPE$2</span><span class="s0">.</span><span class="s2">EOF </span><span class="s0">&lt;&lt; </span><span class="s2">TYPE_SHIFT$1</span><span class="s0">) | </span><span class="s2">offset</span><span class="s0">; </span><span class="s4">// &lt;EOF-token&gt;</span>
        <span class="s2">balance</span><span class="s0">[</span><span class="s2">tokenCount</span><span class="s0">] = </span><span class="s2">sourceLength</span><span class="s0">;</span>
        <span class="s2">balance</span><span class="s0">[</span><span class="s2">sourceLength</span><span class="s0">] = </span><span class="s2">sourceLength</span><span class="s0">; </span><span class="s4">// prevents false positive balance match with any token</span>
        <span class="s1">while </span><span class="s0">(</span><span class="s2">balanceStart </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s2">balancePrev </span><span class="s0">= </span><span class="s2">balanceStart </span><span class="s0">&amp; </span><span class="s2">OFFSET_MASK$1</span><span class="s0">;</span>
            <span class="s2">balanceStart </span><span class="s0">= </span><span class="s2">balance</span><span class="s0">[</span><span class="s2">balancePrev</span><span class="s0">];</span>
            <span class="s2">balance</span><span class="s0">[</span><span class="s2">balancePrev</span><span class="s0">] = </span><span class="s2">sourceLength</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// update stream</span>
        <span class="s2">stream</span><span class="s0">.</span><span class="s2">source </span><span class="s0">= </span><span class="s2">source</span><span class="s0">;</span>
        <span class="s2">stream</span><span class="s0">.</span><span class="s2">firstCharOffset </span><span class="s0">= </span><span class="s2">start</span><span class="s0">;</span>
        <span class="s2">stream</span><span class="s0">.</span><span class="s2">offsetAndType </span><span class="s0">= </span><span class="s2">offsetAndType</span><span class="s0">;</span>
        <span class="s2">stream</span><span class="s0">.</span><span class="s2">tokenCount </span><span class="s0">= </span><span class="s2">tokenCount</span><span class="s0">;</span>
        <span class="s2">stream</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">= </span><span class="s2">balance</span><span class="s0">;</span>
        <span class="s2">stream</span><span class="s0">.</span><span class="s2">reset</span><span class="s0">();</span>
        <span class="s2">stream</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

        <span class="s1">return </span><span class="s2">stream</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// extend tokenizer with constants</span>
    <span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">_const</span><span class="s0">).</span><span class="s2">forEach</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">key</span><span class="s0">) {</span>
        <span class="s2">tokenize</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">_const</span><span class="s0">[</span><span class="s2">key</span><span class="s0">];</span>
    <span class="s0">});</span>

    <span class="s4">// extend tokenizer with static methods from utils</span>
    <span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">charCodeDefinitions</span><span class="s0">).</span><span class="s2">forEach</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">key</span><span class="s0">) {</span>
        <span class="s2">tokenize</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">charCodeDefinitions</span><span class="s0">[</span><span class="s2">key</span><span class="s0">];</span>
    <span class="s0">});</span>
    <span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">utils</span><span class="s0">).</span><span class="s2">forEach</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">key</span><span class="s0">) {</span>
        <span class="s2">tokenize</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">utils</span><span class="s0">[</span><span class="s2">key</span><span class="s0">];</span>
    <span class="s0">});</span>

    <span class="s1">var </span><span class="s2">tokenizer </span><span class="s0">= </span><span class="s2">tokenize</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">isDigit$2 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">cmpChar$1 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">cmpChar</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$3 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">DELIM </span><span class="s0">= </span><span class="s2">TYPE$3</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">WHITESPACE$1 </span><span class="s0">= </span><span class="s2">TYPE$3</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$1 </span><span class="s0">= </span><span class="s2">TYPE$3</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">IDENT </span><span class="s0">= </span><span class="s2">TYPE$3</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBER </span><span class="s0">= </span><span class="s2">TYPE$3</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DIMENSION </span><span class="s0">= </span><span class="s2">TYPE$3</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN </span><span class="s0">= </span><span class="s5">0x002B</span><span class="s0">;    </span><span class="s4">// U+002B PLUS SIGN (+)</span>
    <span class="s1">var </span><span class="s2">HYPHENMINUS$1 </span><span class="s0">= </span><span class="s5">0x002D</span><span class="s0">; </span><span class="s4">// U+002D HYPHEN-MINUS (-)</span>
    <span class="s1">var </span><span class="s2">N </span><span class="s0">= </span><span class="s5">0x006E</span><span class="s0">;           </span><span class="s4">// U+006E LATIN SMALL LETTER N (n)</span>
    <span class="s1">var </span><span class="s2">DISALLOW_SIGN </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">ALLOW_SIGN </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">DELIM </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s2">code</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">skipSC</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
        <span class="s1">while </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; (</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">WHITESPACE$1 </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">COMMENT$1</span><span class="s0">)) {</span>
            <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">valueOffset</span><span class="s0">, </span><span class="s2">disallowSign</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">token</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">valueOffset</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s2">PLUSSIGN </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">HYPHENMINUS$1</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">disallowSign</span><span class="s0">) {</span>
                <span class="s4">// Number sign is not allowed</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>
            <span class="s2">valueOffset</span><span class="s0">++;</span>
        <span class="s0">}</span>

        <span class="s1">for </span><span class="s0">(; </span><span class="s2">valueOffset </span><span class="s0">&lt; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">valueOffset</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDigit$2</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">valueOffset</span><span class="s0">))) {</span>
                <span class="s4">// Integer is expected</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// ... &lt;signed-integer&gt;</span>
    <span class="s4">// ... ['+' | '-'] &lt;signless-integer&gt;</span>
    <span class="s1">function </span><span class="s2">consumeB</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">offset_</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">sign </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">offset </span><span class="s0">= </span><span class="s2">skipSC</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">offset_</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>

        <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">offset_</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">NUMBER</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">PLUSSIGN</span><span class="s0">) || </span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">HYPHENMINUS$1</span><span class="s0">)) {</span>
                <span class="s2">sign </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
                <span class="s2">offset </span><span class="s0">= </span><span class="s2">skipSC</span><span class="s0">(</span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">), </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
                <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">NUMBER</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">return </span><span class="s2">offset_</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(!</span><span class="s2">sign</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">!== </span><span class="s2">PLUSSIGN </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">!== </span><span class="s2">HYPHENMINUS$1</span><span class="s0">) {</span>
                <span class="s4">// Number sign is expected</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">sign </span><span class="s0">? </span><span class="s5">0 </span><span class="s0">: </span><span class="s5">1</span><span class="s0">, </span><span class="s2">sign</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s4">// An+B microsyntax https://www.w3.org/TR/css-syntax-3/#anb</span>
    <span class="s1">var </span><span class="s2">genericAnPlusB </span><span class="s0">= </span><span class="s1">function </span><span class="s2">anPlusB</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
        <span class="s4">/* eslint-disable brace-style*/</span>
        <span class="s1">var </span><span class="s2">offset </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(!</span><span class="s2">token</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// &lt;integer&gt;</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">NUMBER</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">ALLOW_SIGN</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">); </span><span class="s4">// b</span>
        <span class="s0">}</span>

        <span class="s4">// -n</span>
        <span class="s4">// -n &lt;signed-integer&gt;</span>
        <span class="s4">// -n ['+' | '-'] &lt;signless-integer&gt;</span>
        <span class="s4">// -n- &lt;signless-integer&gt;</span>
        <span class="s4">// &lt;dashndashdigit-ident&gt;</span>
        <span class="s1">else if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">IDENT </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s2">HYPHENMINUS$1</span><span class="s0">) {</span>
            <span class="s4">// expect 1st char is N</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">cmpChar$1</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s2">N</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                <span class="s4">// -n</span>
                <span class="s4">// -n &lt;signed-integer&gt;</span>
                <span class="s4">// -n ['+' | '-'] &lt;signless-integer&gt;</span>
                <span class="s1">case </span><span class="s5">2</span><span class="s0">:</span>
                    <span class="s1">return </span><span class="s2">consumeB</span><span class="s0">(</span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">), </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>

                <span class="s4">// -n- &lt;signless-integer&gt;</span>
                <span class="s1">case </span><span class="s5">3</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">2</span><span class="s0">) !== </span><span class="s2">HYPHENMINUS$1</span><span class="s0">) {</span>
                        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s2">offset </span><span class="s0">= </span><span class="s2">skipSC</span><span class="s0">(</span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">), </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
                    <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

                    <span class="s1">return </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>

                <span class="s4">// &lt;dashndashdigit-ident&gt;</span>
                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">2</span><span class="s0">) !== </span><span class="s2">HYPHENMINUS$1</span><span class="s0">) {</span>
                        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">return </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s4">// '+'? n</span>
        <span class="s4">// '+'? n &lt;signed-integer&gt;</span>
        <span class="s4">// '+'? n ['+' | '-'] &lt;signless-integer&gt;</span>
        <span class="s4">// '+'? n- &lt;signless-integer&gt;</span>
        <span class="s4">// '+'? &lt;ndashdigit-ident&gt;</span>
        <span class="s1">else if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">IDENT </span><span class="s0">|| (</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">PLUSSIGN</span><span class="s0">) &amp;&amp; </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">).</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">IDENT</span><span class="s0">)) {</span>
            <span class="s4">// just ignore a plus</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">IDENT</span><span class="s0">) {</span>
                <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| !</span><span class="s2">cmpChar$1</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">N</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                <span class="s4">// '+'? n</span>
                <span class="s4">// '+'? n &lt;signed-integer&gt;</span>
                <span class="s4">// '+'? n ['+' | '-'] &lt;signless-integer&gt;</span>
                <span class="s1">case </span><span class="s5">1</span><span class="s0">:</span>
                    <span class="s1">return </span><span class="s2">consumeB</span><span class="s0">(</span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">), </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>

                <span class="s4">// '+'? n- &lt;signless-integer&gt;</span>
                <span class="s1">case </span><span class="s5">2</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">1</span><span class="s0">) !== </span><span class="s2">HYPHENMINUS$1</span><span class="s0">) {</span>
                        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s2">offset </span><span class="s0">= </span><span class="s2">skipSC</span><span class="s0">(</span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">), </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
                    <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

                    <span class="s1">return </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>

                <span class="s4">// '+'? &lt;ndashdigit-ident&gt;</span>
                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">1</span><span class="s0">) !== </span><span class="s2">HYPHENMINUS$1</span><span class="s0">) {</span>
                        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">return </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s4">// &lt;ndashdigit-dimension&gt;</span>
        <span class="s4">// &lt;ndash-dimension&gt; &lt;signless-integer&gt;</span>
        <span class="s4">// &lt;n-dimension&gt;</span>
        <span class="s4">// &lt;n-dimension&gt; &lt;signed-integer&gt;</span>
        <span class="s4">// &lt;n-dimension&gt; ['+' | '-'] &lt;signless-integer&gt;</span>
        <span class="s1">else if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">DIMENSION</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">sign </span><span class="s0">= </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">PLUSSIGN </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">HYPHENMINUS$1 </span><span class="s0">? </span><span class="s5">1 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">;</span>

            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">sign</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDigit$2</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">))) {</span>
                    <span class="s1">break</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">=== </span><span class="s2">sign</span><span class="s0">) {</span>
                <span class="s4">// Integer is expected</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">cmpChar$1</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">i</span><span class="s0">, </span><span class="s2">N</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// &lt;n-dimension&gt;</span>
            <span class="s4">// &lt;n-dimension&gt; &lt;signed-integer&gt;</span>
            <span class="s4">// &lt;n-dimension&gt; ['+' | '-'] &lt;signless-integer&gt;</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">+ </span><span class="s5">1 </span><span class="s0">=== </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">consumeB</span><span class="s0">(</span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">), </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) !== </span><span class="s2">HYPHENMINUS$1</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s4">// &lt;ndash-dimension&gt; &lt;signless-integer&gt;</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">+ </span><span class="s5">2 </span><span class="s0">=== </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                    <span class="s2">offset </span><span class="s0">= </span><span class="s2">skipSC</span><span class="s0">(</span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">), </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
                    <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>

                    <span class="s1">return </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
                <span class="s0">}</span>
                <span class="s4">// &lt;ndashdigit-dimension&gt;</span>
                <span class="s1">else </span><span class="s0">{</span>
                    <span class="s1">return </span><span class="s2">checkInteger</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">i </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">isHexDigit$2 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isHexDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">cmpChar$2 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">cmpChar</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$4 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$1 </span><span class="s0">= </span><span class="s2">TYPE$4</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DELIM$1 </span><span class="s0">= </span><span class="s2">TYPE$4</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBER$1 </span><span class="s0">= </span><span class="s2">TYPE$4</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DIMENSION$1 </span><span class="s0">= </span><span class="s2">TYPE$4</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN$1 </span><span class="s0">= </span><span class="s5">0x002B</span><span class="s0">;     </span><span class="s4">// U+002B PLUS SIGN (+)</span>
    <span class="s1">var </span><span class="s2">HYPHENMINUS$2 </span><span class="s0">= </span><span class="s5">0x002D</span><span class="s0">;  </span><span class="s4">// U+002D HYPHEN-MINUS (-)</span>
    <span class="s1">var </span><span class="s2">QUESTIONMARK </span><span class="s0">= </span><span class="s5">0x003F</span><span class="s0">; </span><span class="s4">// U+003F QUESTION MARK (?)</span>
    <span class="s1">var </span><span class="s2">U </span><span class="s0">= </span><span class="s5">0x0075</span><span class="s0">;            </span><span class="s4">// U+0075 LATIN SMALL LETTER U (u)</span>

    <span class="s1">function </span><span class="s2">isDelim$1</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">DELIM$1 </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s2">code</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">startsWith</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s2">code</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">hexSequence</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">allowDash</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">pos </span><span class="s0">= </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">hexlen </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">pos </span><span class="s0">&lt; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">pos</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s2">HYPHENMINUS$2 </span><span class="s0">&amp;&amp; </span><span class="s2">allowDash </span><span class="s0">&amp;&amp; </span><span class="s2">hexlen </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">hexSequence</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s2">hexlen </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">, </span><span class="s1">false</span><span class="s0">) &gt; </span><span class="s5">0</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s5">6</span><span class="s0">; </span><span class="s4">// dissallow following question marks</span>
                <span class="s0">}</span>

                <span class="s1">return </span><span class="s5">0</span><span class="s0">; </span><span class="s4">// dash at the ending of a hex sequence is not allowed</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isHexDigit$2</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">; </span><span class="s4">// not a hex digit</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(++</span><span class="s2">hexlen </span><span class="s0">&gt; </span><span class="s5">6</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">; </span><span class="s4">// too many hex digits</span>
            <span class="s0">}    }</span>

        <span class="s1">return </span><span class="s2">hexlen</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">withQuestionMarkSequence</span><span class="s0">(</span><span class="s2">consumed</span><span class="s0">, </span><span class="s2">length</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">consumed</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">; </span><span class="s4">// nothing consumed</span>
        <span class="s0">}</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">isDelim$1</span><span class="s0">(</span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">length</span><span class="s0">), </span><span class="s2">QUESTIONMARK</span><span class="s0">)) {</span>
            <span class="s1">if </span><span class="s0">(++</span><span class="s2">consumed </span><span class="s0">&gt; </span><span class="s5">6</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">; </span><span class="s4">// too many question marks</span>
            <span class="s0">}</span>

            <span class="s2">length</span><span class="s0">++;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">length</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// https://drafts.csswg.org/css-syntax/#urange</span>
    <span class="s4">// Informally, the &lt;urange&gt; production has three forms:</span>
    <span class="s4">// U+0001</span>
    <span class="s4">//      Defines a range consisting of a single code point, in this case the code point &quot;1&quot;.</span>
    <span class="s4">// U+0001-00ff</span>
    <span class="s4">//      Defines a range of codepoints between the first and the second value, in this case</span>
    <span class="s4">//      the range between &quot;1&quot; and &quot;ff&quot; (255 in decimal) inclusive.</span>
    <span class="s4">// U+00??</span>
    <span class="s4">//      Defines a range of codepoints where the &quot;?&quot; characters range over all hex digits,</span>
    <span class="s4">//      in this case defining the same as the value U+0000-00ff.</span>
    <span class="s4">// In each form, a maximum of 6 digits is allowed for each hexadecimal number (if you treat &quot;?&quot; as a hexadecimal digit).</span>
    <span class="s4">//</span>
    <span class="s4">// &lt;urange&gt; =</span>
    <span class="s4">//   u '+' &lt;ident-token&gt; '?'* |</span>
    <span class="s4">//   u &lt;dimension-token&gt; '?'* |</span>
    <span class="s4">//   u &lt;number-token&gt; '?'* |</span>
    <span class="s4">//   u &lt;number-token&gt; &lt;dimension-token&gt; |</span>
    <span class="s4">//   u &lt;number-token&gt; &lt;number-token&gt; |</span>
    <span class="s4">//   u '+' '?'+</span>
    <span class="s1">var </span><span class="s2">genericUrange </span><span class="s0">= </span><span class="s1">function </span><span class="s2">urange</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">length </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s4">// should start with `u` or `U`</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">IDENT$1 </span><span class="s0">|| !</span><span class="s2">cmpChar$2</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">U</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">length</span><span class="s0">);</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// u '+' &lt;ident-token&gt; '?'*</span>
        <span class="s4">// u '+' '?'+</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">isDelim$1</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">PLUSSIGN$1</span><span class="s0">)) {</span>
            <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">length</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">IDENT$1</span><span class="s0">) {</span>
                <span class="s4">// u '+' &lt;ident-token&gt; '?'*</span>
                <span class="s1">return </span><span class="s2">withQuestionMarkSequence</span><span class="s0">(</span><span class="s2">hexSequence</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s1">true</span><span class="s0">), ++</span><span class="s2">length</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">isDelim$1</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">QUESTIONMARK</span><span class="s0">)) {</span>
                <span class="s4">// u '+' '?'+</span>
                <span class="s1">return </span><span class="s2">withQuestionMarkSequence</span><span class="s0">(</span><span class="s5">1</span><span class="s0">, ++</span><span class="s2">length</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s4">// Hex digit or question mark is expected</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// u &lt;number-token&gt; '?'*</span>
        <span class="s4">// u &lt;number-token&gt; &lt;dimension-token&gt;</span>
        <span class="s4">// u &lt;number-token&gt; &lt;number-token&gt;</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">NUMBER$1</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">startsWith</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">PLUSSIGN$1</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">consumedHexLength </span><span class="s0">= </span><span class="s2">hexSequence</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">consumedHexLength </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(++</span><span class="s2">length</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s4">// u &lt;number-token&gt; &lt;eof&gt;</span>
                <span class="s1">return </span><span class="s2">length</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">DIMENSION$1 </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">NUMBER$1</span><span class="s0">) {</span>
                <span class="s4">// u &lt;number-token&gt; &lt;dimension-token&gt;</span>
                <span class="s4">// u &lt;number-token&gt; &lt;number-token&gt;</span>
                <span class="s1">if </span><span class="s0">(!</span><span class="s2">startsWith</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">HYPHENMINUS$2</span><span class="s0">) || !</span><span class="s2">hexSequence</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s1">false</span><span class="s0">)) {</span>
                    <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">return </span><span class="s2">length </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s4">// u &lt;number-token&gt; '?'*</span>
            <span class="s1">return </span><span class="s2">withQuestionMarkSequence</span><span class="s0">(</span><span class="s2">consumedHexLength</span><span class="s0">, </span><span class="s2">length</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// u &lt;dimension-token&gt; '?'*</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">DIMENSION$1</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">startsWith</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">PLUSSIGN$1</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">withQuestionMarkSequence</span><span class="s0">(</span><span class="s2">hexSequence</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s1">true</span><span class="s0">), ++</span><span class="s2">length</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">isIdentifierStart$2 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isIdentifierStart</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isHexDigit$3 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isHexDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isDigit$3 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">cmpStr$3 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">cmpStr</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">consumeNumber$2 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">consumeNumber</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$5 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>



    <span class="s1">var </span><span class="s2">cssWideKeywords </span><span class="s0">= [</span><span class="s3">'unset'</span><span class="s0">, </span><span class="s3">'initial'</span><span class="s0">, </span><span class="s3">'inherit'</span><span class="s0">];</span>
    <span class="s1">var </span><span class="s2">calcFunctionNames </span><span class="s0">= [</span><span class="s3">'calc('</span><span class="s0">, </span><span class="s3">'-moz-calc('</span><span class="s0">, </span><span class="s3">'-webkit-calc('</span><span class="s0">];</span>

    <span class="s4">// https://www.w3.org/TR/css-values-3/#lengths</span>
    <span class="s1">var </span><span class="s2">LENGTH </span><span class="s0">= {</span>
        <span class="s4">// absolute length units</span>
        <span class="s3">'px'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'mm'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'cm'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'in'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'pt'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'pc'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'q'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>

        <span class="s4">// relative length units</span>
        <span class="s3">'em'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'ex'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'ch'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'rem'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>

        <span class="s4">// viewport-percentage lengths</span>
        <span class="s3">'vh'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'vw'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'vmin'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'vmax'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'vm'</span><span class="s0">: </span><span class="s1">true</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">ANGLE </span><span class="s0">= {</span>
        <span class="s3">'deg'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'grad'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'rad'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'turn'</span><span class="s0">: </span><span class="s1">true</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TIME </span><span class="s0">= {</span>
        <span class="s3">'s'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'ms'</span><span class="s0">: </span><span class="s1">true</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">FREQUENCY </span><span class="s0">= {</span>
        <span class="s3">'hz'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'khz'</span><span class="s0">: </span><span class="s1">true</span>
    <span class="s0">};</span>

    <span class="s4">// https://www.w3.org/TR/css-values-3/#resolution (https://drafts.csswg.org/css-values/#resolution)</span>
    <span class="s1">var </span><span class="s2">RESOLUTION </span><span class="s0">= {</span>
        <span class="s3">'dpi'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'dpcm'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'dppx'</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">'x'</span><span class="s0">: </span><span class="s1">true      </span><span class="s4">// https://github.com/w3c/csswg-drafts/issues/461</span>
    <span class="s0">};</span>

    <span class="s4">// https://drafts.csswg.org/css-grid/#fr-unit</span>
    <span class="s1">var </span><span class="s2">FLEX </span><span class="s0">= {</span>
        <span class="s3">'fr'</span><span class="s0">: </span><span class="s1">true</span>
    <span class="s0">};</span>

    <span class="s4">// https://www.w3.org/TR/css3-speech/#mixing-props-voice-volume</span>
    <span class="s1">var </span><span class="s2">DECIBEL </span><span class="s0">= {</span>
        <span class="s3">'db'</span><span class="s0">: </span><span class="s1">true</span>
    <span class="s0">};</span>

    <span class="s4">// https://www.w3.org/TR/css3-speech/#voice-props-voice-pitch</span>
    <span class="s1">var </span><span class="s2">SEMITONES </span><span class="s0">= {</span>
        <span class="s3">'st'</span><span class="s0">: </span><span class="s1">true</span>
    <span class="s0">};</span>

    <span class="s4">// safe char code getter</span>
    <span class="s1">function </span><span class="s2">charCode</span><span class="s0">(</span><span class="s2">str</span><span class="s0">, </span><span class="s2">index</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">index </span><span class="s0">&lt; </span><span class="s2">str</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">index</span><span class="s0">) : </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">eqStr</span><span class="s0">(</span><span class="s2">actual</span><span class="s0">, </span><span class="s2">expected</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmpStr$3</span><span class="s0">(</span><span class="s2">actual</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">actual</span><span class="s0">.</span><span class="s2">length</span><span class="s0">, </span><span class="s2">expected</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">eqStrAny</span><span class="s0">(</span><span class="s2">actual</span><span class="s0">, </span><span class="s2">expected</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">expected</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">eqStr</span><span class="s0">(</span><span class="s2">actual</span><span class="s0">, </span><span class="s2">expected</span><span class="s0">[</span><span class="s2">i</span><span class="s0">])) {</span>
                <span class="s1">return true</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return false</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// IE postfix hack, i.e. 123\0 or 123px\9</span>
    <span class="s1">function </span><span class="s2">isPostfixIeHack</span><span class="s0">(</span><span class="s2">str</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">!== </span><span class="s2">str</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">2</span><span class="s0">) {</span>
            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">(</span>
            <span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s5">0x005C </span><span class="s0">&amp;&amp;  </span><span class="s4">// U+005C REVERSE SOLIDUS (\)</span>
            <span class="s2">isDigit$3</span><span class="s0">(</span><span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">))</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">outOfRange</span><span class="s0">(</span><span class="s2">opts</span><span class="s0">, </span><span class="s2">value</span><span class="s0">, </span><span class="s2">numEnd</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">opts </span><span class="s0">&amp;&amp; </span><span class="s2">opts</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Range'</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">num </span><span class="s0">= </span><span class="s2">Number</span><span class="s0">(</span>
                <span class="s2">numEnd </span><span class="s0">!== </span><span class="s2">undefined </span><span class="s0">&amp;&amp; </span><span class="s2">numEnd </span><span class="s0">!== </span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span>
                    <span class="s0">? </span><span class="s2">value</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s2">numEnd</span><span class="s0">)</span>
                    <span class="s0">: </span><span class="s2">value</span>
            <span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">isNaN</span><span class="s0">(</span><span class="s2">num</span><span class="s0">)) {</span>
                <span class="s1">return true</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">opts</span><span class="s0">.</span><span class="s2">min </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">num </span><span class="s0">&lt; </span><span class="s2">opts</span><span class="s0">.</span><span class="s2">min</span><span class="s0">) {</span>
                <span class="s1">return true</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">opts</span><span class="s0">.</span><span class="s2">max </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">num </span><span class="s0">&gt; </span><span class="s2">opts</span><span class="s0">.</span><span class="s2">max</span><span class="s0">) {</span>
                <span class="s1">return true</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return false</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">consumeFunction</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">startIdx </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">index</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">length </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s4">// balanced token consuming</span>
        <span class="s1">do </span><span class="s0">{</span>
            <span class="s2">length</span><span class="s0">++;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">&lt;= </span><span class="s2">startIdx</span><span class="s0">) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">length</span><span class="s0">));</span>

        <span class="s1">return </span><span class="s2">length</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// TODO: implement</span>
    <span class="s4">// can be used wherever &lt;length&gt;, &lt;frequency&gt;, &lt;angle&gt;, &lt;time&gt;, &lt;percentage&gt;, &lt;number&gt;, or &lt;integer&gt; values are allowed</span>
    <span class="s4">// https://drafts.csswg.org/css-values/#calc-notation</span>
    <span class="s1">function </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">next</span><span class="s0">) {</span>
        <span class="s1">return function</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Function </span><span class="s0">&amp;&amp; </span><span class="s2">eqStrAny</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">calcFunctionNames</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s2">consumeFunction</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">next</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">);</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">expectedTokenType</span><span class="s0">) {</span>
        <span class="s1">return function</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">expectedTokenType</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">func</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) {</span>
        <span class="s2">name </span><span class="s0">= </span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'('</span><span class="s0">;</span>

        <span class="s1">return function</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">eqStr</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">name</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s2">consumeFunction</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s4">// =========================</span>
    <span class="s4">// Complex types</span>
    <span class="s4">//</span>

    <span class="s4">// https://drafts.csswg.org/css-values-4/#custom-idents</span>
    <span class="s4">// 4.2. Author-defined Identifiers: the &lt;custom-ident&gt; type</span>
    <span class="s4">// Some properties accept arbitrary author-defined identifiers as a component value.</span>
    <span class="s4">// This generic data type is denoted by &lt;custom-ident&gt;, and represents any valid CSS identifier</span>
    <span class="s4">// that would not be misinterpreted as a pre-defined keyword in that property’s value definition.</span>
    <span class="s4">//</span>
    <span class="s4">// See also: https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident</span>
    <span class="s1">function </span><span class="s2">customIdent</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>

        <span class="s4">// The CSS-wide keywords are not valid &lt;custom-ident&gt;s</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">eqStrAny</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">cssWideKeywords</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// The default keyword is reserved and is also not a valid &lt;custom-ident&gt;</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">eqStr</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s3">'default'</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// TODO: ignore property specific keywords (as described https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident)</span>
        <span class="s4">// Specifications using &lt;custom-ident&gt; must specify clearly what other keywords</span>
        <span class="s4">// are excluded from &lt;custom-ident&gt;, if any—for example by saying that any pre-defined keywords</span>
        <span class="s4">// in that property’s value definition are excluded. Excluded keywords are excluded</span>
        <span class="s4">// in all ASCII case permutations.</span>

        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// https://drafts.csswg.org/css-variables/#typedef-custom-property-name</span>
    <span class="s4">// A custom property is any property whose name starts with two dashes (U+002D HYPHEN-MINUS), like --foo.</span>
    <span class="s4">// The &lt;custom-property-name&gt; production corresponds to this: it’s defined as any valid identifier</span>
    <span class="s4">// that starts with two dashes, except -- itself, which is reserved for future use by CSS.</span>
    <span class="s4">// NOTE: Current implementation treat `--` as a valid name since most (all?) major browsers treat it as valid.</span>
    <span class="s1">function </span><span class="s2">customPropertyName</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) {</span>
        <span class="s4">// ... defined as any valid identifier</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// ... that starts with two dashes (U+002D HYPHEN-MINUS)</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">charCode</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">0</span><span class="s0">) !== </span><span class="s5">0x002D </span><span class="s0">|| </span><span class="s2">charCode</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">1</span><span class="s0">) !== </span><span class="s5">0x002D</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// https://drafts.csswg.org/css-color-4/#hex-notation</span>
    <span class="s4">// The syntax of a &lt;hex-color&gt; is a &lt;hash-token&gt; token whose value consists of 3, 4, 6, or 8 hexadecimal digits.</span>
    <span class="s4">// In other words, a hex color is written as a hash character, &quot;#&quot;, followed by some number of digits 0-9 or</span>
    <span class="s4">// letters a-f (the case of the letters doesn’t matter - #00ff00 is identical to #00FF00).</span>
    <span class="s1">function </span><span class="s2">hexColor</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">length </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>

        <span class="s4">// valid values (length): #rgb (4), #rgba (5), #rrggbb (7), #rrggbbaa (9)</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">length </span><span class="s0">!== </span><span class="s5">4 </span><span class="s0">&amp;&amp; </span><span class="s2">length </span><span class="s0">!== </span><span class="s5">5 </span><span class="s0">&amp;&amp; </span><span class="s2">length </span><span class="s0">!== </span><span class="s5">7 </span><span class="s0">&amp;&amp; </span><span class="s2">length </span><span class="s0">!== </span><span class="s5">9</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">1</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isHexDigit$3</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">))) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">idSelector</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(!</span><span class="s2">isIdentifierStart$2</span><span class="s0">(</span><span class="s2">charCode</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">1</span><span class="s0">), </span><span class="s2">charCode</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">2</span><span class="s0">), </span><span class="s2">charCode</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">3</span><span class="s0">))) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// https://drafts.csswg.org/css-syntax/#any-value</span>
    <span class="s4">// It represents the entirety of what a valid declaration can have as its value.</span>
    <span class="s1">function </span><span class="s2">declarationValue</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">token</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">length </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">level </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">startIdx </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">index</span><span class="s0">;</span>

        <span class="s4">// The &lt;declaration-value&gt; production matches any sequence of one or more tokens,</span>
        <span class="s4">// so long as the sequence ...</span>
        <span class="s2">scan</span><span class="s0">:</span>
        <span class="s1">do </span><span class="s0">{</span>
            <span class="s1">switch </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
                <span class="s4">// ... does not contain &lt;bad-string-token&gt;, &lt;bad-url-token&gt;,</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">BadString</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">BadUrl</span><span class="s0">:</span>
                    <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>

                <span class="s4">// ... unmatched &lt;)-token&gt;, &lt;]-token&gt;, or &lt;}-token&gt;,</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightCurlyBracket</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightSquareBracket</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">&gt; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">index </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">&lt; </span><span class="s2">startIdx</span><span class="s0">) {</span>
                        <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s2">level</span><span class="s0">--;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// ... or top-level &lt;semicolon-token&gt; tokens</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">level </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
                        <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// ... or &lt;delim-token&gt; tokens with a value of &quot;!&quot;</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value </span><span class="s0">=== </span><span class="s3">'!' </span><span class="s0">&amp;&amp; </span><span class="s2">level </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
                        <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">LeftSquareBracket</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">:</span>
                    <span class="s2">level</span><span class="s0">++;</span>
                    <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">length</span><span class="s0">++;</span>

            <span class="s4">// until balance closing</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">&lt;= </span><span class="s2">startIdx</span><span class="s0">) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">length</span><span class="s0">));</span>

        <span class="s1">return </span><span class="s2">length</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// https://drafts.csswg.org/css-syntax/#any-value</span>
    <span class="s4">// The &lt;any-value&gt; production is identical to &lt;declaration-value&gt;, but also</span>
    <span class="s4">// allows top-level &lt;semicolon-token&gt; tokens and &lt;delim-token&gt; tokens</span>
    <span class="s4">// with a value of &quot;!&quot;. It represents the entirety of what valid CSS can be in any context.</span>
    <span class="s1">function </span><span class="s2">anyValue</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">token</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">startIdx </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">index</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">length </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s4">// The &lt;any-value&gt; production matches any sequence of one or more tokens,</span>
        <span class="s4">// so long as the sequence ...</span>
        <span class="s2">scan</span><span class="s0">:</span>
        <span class="s1">do </span><span class="s0">{</span>
            <span class="s1">switch </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
                <span class="s4">// ... does not contain &lt;bad-string-token&gt;, &lt;bad-url-token&gt;,</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">BadString</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">BadUrl</span><span class="s0">:</span>
                    <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>

                <span class="s4">// ... unmatched &lt;)-token&gt;, &lt;]-token&gt;, or &lt;}-token&gt;,</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightCurlyBracket</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightSquareBracket</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">&gt; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">index </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">&lt; </span><span class="s2">startIdx</span><span class="s0">) {</span>
                        <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">length</span><span class="s0">++;</span>

            <span class="s4">// until balance closing</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">balance </span><span class="s0">&lt;= </span><span class="s2">startIdx</span><span class="s0">) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">token </span><span class="s0">= </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">length</span><span class="s0">));</span>

        <span class="s1">return </span><span class="s2">length</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// =========================</span>
    <span class="s4">// Dimensions</span>
    <span class="s4">//</span>

    <span class="s1">function </span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">type</span><span class="s0">) {</span>
        <span class="s1">return function</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">numberEnd </span><span class="s0">= </span><span class="s2">consumeNumber$2</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">0</span><span class="s0">);</span>

            <span class="s4">// check unit</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">type </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s4">// check for IE postfix hack, i.e. 123px\0 or 123px\9</span>
                <span class="s1">var </span><span class="s2">reverseSolidusOffset </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s3">'</span><span class="s1">\\</span><span class="s3">'</span><span class="s0">, </span><span class="s2">numberEnd</span><span class="s0">);</span>
                <span class="s1">var </span><span class="s2">unit </span><span class="s0">= </span><span class="s2">reverseSolidusOffset </span><span class="s0">=== -</span><span class="s5">1 </span><span class="s0">|| !</span><span class="s2">isPostfixIeHack</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">reverseSolidusOffset</span><span class="s0">)</span>
                    <span class="s0">? </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s2">numberEnd</span><span class="s0">)</span>
                    <span class="s0">: </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">numberEnd</span><span class="s0">, </span><span class="s2">reverseSolidusOffset</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">type</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">unit</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">()) === </span><span class="s1">false</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s4">// check range if specified</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">outOfRange</span><span class="s0">(</span><span class="s2">opts</span><span class="s0">, </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">numberEnd</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s4">// =========================</span>
    <span class="s4">// Percentage</span>
    <span class="s4">//</span>

    <span class="s4">// §5.5. Percentages: the &lt;percentage&gt; type</span>
    <span class="s4">// https://drafts.csswg.org/css-values-4/#percentages</span>
    <span class="s1">function </span><span class="s2">percentage</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">) {</span>
        <span class="s4">// ... corresponds to the &lt;percentage-token&gt; production</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// check range if specified</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">outOfRange</span><span class="s0">(</span><span class="s2">opts</span><span class="s0">, </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// =========================</span>
    <span class="s4">// Numeric</span>
    <span class="s4">//</span>

    <span class="s4">// https://drafts.csswg.org/css-values-4/#numbers</span>
    <span class="s4">// The value &lt;zero&gt; represents a literal number with the value 0. Expressions that merely</span>
    <span class="s4">// evaluate to a &lt;number&gt; with the value 0 (for example, calc(0)) do not match &lt;zero&gt;;</span>
    <span class="s4">// only literal &lt;number-token&gt;s do.</span>
    <span class="s1">function </span><span class="s2">zero</span><span class="s0">(</span><span class="s2">next</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">next </span><span class="s0">!== </span><span class="s3">'function'</span><span class="s0">) {</span>
            <span class="s2">next </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s1">return function</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">Number</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">) === </span><span class="s5">0</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">next</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">);</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s4">// § 5.3. Real Numbers: the &lt;number&gt; type</span>
    <span class="s4">// https://drafts.csswg.org/css-values-4/#numbers</span>
    <span class="s4">// Number values are denoted by &lt;number&gt;, and represent real numbers, possibly with a fractional component.</span>
    <span class="s4">// ... It corresponds to the &lt;number-token&gt; production</span>
    <span class="s1">function </span><span class="s2">number</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">numberEnd </span><span class="s0">= </span><span class="s2">consumeNumber$2</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s5">0</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">isNumber </span><span class="s0">= </span><span class="s2">numberEnd </span><span class="s0">=== </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">isNumber </span><span class="s0">&amp;&amp; !</span><span class="s2">isPostfixIeHack</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">numberEnd</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// check range if specified</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">outOfRange</span><span class="s0">(</span><span class="s2">opts</span><span class="s0">, </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">numberEnd</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// §5.2. Integers: the &lt;integer&gt; type</span>
    <span class="s4">// https://drafts.csswg.org/css-values-4/#integers</span>
    <span class="s1">function </span><span class="s2">integer</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">) {</span>
        <span class="s4">// ... corresponds to a subset of the &lt;number-token&gt; production</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// The first digit of an integer may be immediately preceded by `-` or `+` to indicate the integer’s sign.</span>
        <span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s5">0x002B </span><span class="s0">||       </span><span class="s4">// U+002B PLUS SIGN (+)</span>
                <span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s5">0x002D </span><span class="s0">? </span><span class="s5">1 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">; </span><span class="s4">// U+002D HYPHEN-MINUS (-)</span>

        <span class="s4">// When written literally, an integer is one or more decimal digits 0 through 9 ...</span>
        <span class="s1">for </span><span class="s0">(; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDigit$3</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">))) {</span>
                <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s4">// check range if specified</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">outOfRange</span><span class="s0">(</span><span class="s2">opts</span><span class="s0">, </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">i</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">generic </span><span class="s0">= {</span>
        <span class="s4">// token types</span>
        <span class="s3">'ident-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">),</span>
        <span class="s3">'function-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">),</span>
        <span class="s3">'at-keyword-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">AtKeyword</span><span class="s0">),</span>
        <span class="s3">'hash-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">),</span>
        <span class="s3">'string-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">String</span><span class="s0">),</span>
        <span class="s3">'bad-string-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">BadString</span><span class="s0">),</span>
        <span class="s3">'url-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">),</span>
        <span class="s3">'bad-url-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">BadUrl</span><span class="s0">),</span>
        <span class="s3">'delim-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">),</span>
        <span class="s3">'number-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">),</span>
        <span class="s3">'percentage-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">),</span>
        <span class="s3">'dimension-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">),</span>
        <span class="s3">'whitespace-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">),</span>
        <span class="s3">'CDO-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">CDO</span><span class="s0">),</span>
        <span class="s3">'CDC-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">CDC</span><span class="s0">),</span>
        <span class="s3">'colon-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">),</span>
        <span class="s3">'semicolon-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">),</span>
        <span class="s3">'comma-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Comma</span><span class="s0">),</span>
        <span class="s3">'[-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">LeftSquareBracket</span><span class="s0">),</span>
        <span class="s3">']-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightSquareBracket</span><span class="s0">),</span>
        <span class="s3">'(-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">),</span>
        <span class="s3">')-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">),</span>
        <span class="s3">'{-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">),</span>
        <span class="s3">'}-token'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">RightCurlyBracket</span><span class="s0">),</span>

        <span class="s4">// token type aliases</span>
        <span class="s3">'string'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">String</span><span class="s0">),</span>
        <span class="s3">'ident'</span><span class="s0">: </span><span class="s2">tokenType</span><span class="s0">(</span><span class="s2">TYPE$5</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">),</span>

        <span class="s4">// complex types</span>
        <span class="s3">'custom-ident'</span><span class="s0">: </span><span class="s2">customIdent</span><span class="s0">,</span>
        <span class="s3">'custom-property-name'</span><span class="s0">: </span><span class="s2">customPropertyName</span><span class="s0">,</span>
        <span class="s3">'hex-color'</span><span class="s0">: </span><span class="s2">hexColor</span><span class="s0">,</span>
        <span class="s3">'id-selector'</span><span class="s0">: </span><span class="s2">idSelector</span><span class="s0">, </span><span class="s4">// element( &lt;id-selector&gt; )</span>
        <span class="s3">'an-plus-b'</span><span class="s0">: </span><span class="s2">genericAnPlusB</span><span class="s0">,</span>
        <span class="s3">'urange'</span><span class="s0">: </span><span class="s2">genericUrange</span><span class="s0">,</span>
        <span class="s3">'declaration-value'</span><span class="s0">: </span><span class="s2">declarationValue</span><span class="s0">,</span>
        <span class="s3">'any-value'</span><span class="s0">: </span><span class="s2">anyValue</span><span class="s0">,</span>

        <span class="s4">// dimensions</span>
        <span class="s3">'dimension'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s1">null</span><span class="s0">)),</span>
        <span class="s3">'angle'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">ANGLE</span><span class="s0">)),</span>
        <span class="s3">'decibel'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">DECIBEL</span><span class="s0">)),</span>
        <span class="s3">'frequency'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">FREQUENCY</span><span class="s0">)),</span>
        <span class="s3">'flex'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">FLEX</span><span class="s0">)),</span>
        <span class="s3">'length'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">zero</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">LENGTH</span><span class="s0">))),</span>
        <span class="s3">'resolution'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">RESOLUTION</span><span class="s0">)),</span>
        <span class="s3">'semitones'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">SEMITONES</span><span class="s0">)),</span>
        <span class="s3">'time'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">dimension</span><span class="s0">(</span><span class="s2">TIME</span><span class="s0">)),</span>

        <span class="s4">// percentage</span>
        <span class="s3">'percentage'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">percentage</span><span class="s0">),</span>

        <span class="s4">// numeric</span>
        <span class="s3">'zero'</span><span class="s0">: </span><span class="s2">zero</span><span class="s0">(),</span>
        <span class="s3">'number'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">number</span><span class="s0">),</span>
        <span class="s3">'integer'</span><span class="s0">: </span><span class="s2">calc</span><span class="s0">(</span><span class="s2">integer</span><span class="s0">),</span>

        <span class="s4">// old IE stuff</span>
        <span class="s3">'-ms-legacy-expression'</span><span class="s0">: </span><span class="s2">func</span><span class="s0">(</span><span class="s3">'expression'</span><span class="s0">)</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">_SyntaxError$1 </span><span class="s0">= </span><span class="s1">function </span><span class="s2">SyntaxError</span><span class="s0">(</span><span class="s2">message</span><span class="s0">, </span><span class="s2">input</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">error </span><span class="s0">= </span><span class="s2">createCustomError</span><span class="s0">(</span><span class="s3">'SyntaxError'</span><span class="s0">, </span><span class="s2">message</span><span class="s0">);</span>

        <span class="s2">error</span><span class="s0">.</span><span class="s2">input </span><span class="s0">= </span><span class="s2">input</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">offset </span><span class="s0">= </span><span class="s2">offset</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">rawMessage </span><span class="s0">= </span><span class="s2">message</span><span class="s0">;</span>
        <span class="s2">error</span><span class="s0">.</span><span class="s2">message </span><span class="s0">= </span><span class="s2">error</span><span class="s0">.</span><span class="s2">rawMessage </span><span class="s0">+ </span><span class="s3">'</span><span class="s1">\n</span><span class="s3">' </span><span class="s0">+</span>
            <span class="s3">'  ' </span><span class="s0">+ </span><span class="s2">error</span><span class="s0">.</span><span class="s2">input </span><span class="s0">+ </span><span class="s3">'</span><span class="s1">\n</span><span class="s3">' </span><span class="s0">+</span>
            <span class="s3">'--' </span><span class="s0">+ </span><span class="s1">new </span><span class="s2">Array</span><span class="s0">((</span><span class="s2">error</span><span class="s0">.</span><span class="s2">offset </span><span class="s0">|| </span><span class="s2">error</span><span class="s0">.</span><span class="s2">input</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) + </span><span class="s5">1</span><span class="s0">).</span><span class="s2">join</span><span class="s0">(</span><span class="s3">'-'</span><span class="s0">) + </span><span class="s3">'^'</span><span class="s0">;</span>

        <span class="s1">return </span><span class="s2">error</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TAB </span><span class="s0">= </span><span class="s5">9</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">N$1 </span><span class="s0">= </span><span class="s5">10</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">F </span><span class="s0">= </span><span class="s5">12</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">R </span><span class="s0">= </span><span class="s5">13</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SPACE </span><span class="s0">= </span><span class="s5">32</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">Tokenizer </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">str</span><span class="s0">) {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">str </span><span class="s0">= </span><span class="s2">str</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">Tokenizer</span><span class="s0">.</span><span class="s2">prototype </span><span class="s0">= {</span>
        <span class="s2">charCodeAt</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">pos </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">) : </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">charCode</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">nextCharCode</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">nextNonWsCode</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">findWsEnd</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">));</span>
        <span class="s0">},</span>
        <span class="s2">findWsEnd</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(; </span><span class="s2">pos </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">pos</span><span class="s0">++) {</span>
                <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">);</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">!== </span><span class="s2">R </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">!== </span><span class="s2">N$1 </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">!== </span><span class="s2">F </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">!== </span><span class="s2">SPACE </span><span class="s0">&amp;&amp; </span><span class="s2">code </span><span class="s0">!== </span><span class="s2">TAB</span><span class="s0">) {</span>
                    <span class="s1">break</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">pos</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">substringToPos</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">end</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">= </span><span class="s2">end</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">eat</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() !== </span><span class="s2">code</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Expect `' </span><span class="s0">+ </span><span class="s2">String</span><span class="s0">.</span><span class="s2">fromCharCode</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) + </span><span class="s3">'`'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>
        <span class="s0">},</span>
        <span class="s2">peek</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">charAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++) : </span><span class="s3">''</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">error</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">message</span><span class="s0">) {</span>
            <span class="s1">throw new </span><span class="s2">_SyntaxError$1</span><span class="s0">(</span><span class="s2">message</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">str</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">tokenizer$1 </span><span class="s0">= </span><span class="s2">Tokenizer</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">TAB$1 </span><span class="s0">= </span><span class="s5">9</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">N$2 </span><span class="s0">= </span><span class="s5">10</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">F$1 </span><span class="s0">= </span><span class="s5">12</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">R$1 </span><span class="s0">= </span><span class="s5">13</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SPACE$1 </span><span class="s0">= </span><span class="s5">32</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">EXCLAMATIONMARK </span><span class="s0">= </span><span class="s5">33</span><span class="s0">;    </span><span class="s4">// !</span>
    <span class="s1">var </span><span class="s2">NUMBERSIGN </span><span class="s0">= </span><span class="s5">35</span><span class="s0">;         </span><span class="s4">// #</span>
    <span class="s1">var </span><span class="s2">AMPERSAND </span><span class="s0">= </span><span class="s5">38</span><span class="s0">;          </span><span class="s4">// &amp;</span>
    <span class="s1">var </span><span class="s2">APOSTROPHE </span><span class="s0">= </span><span class="s5">39</span><span class="s0">;         </span><span class="s4">// '</span>
    <span class="s1">var </span><span class="s2">LEFTPARENTHESIS </span><span class="s0">= </span><span class="s5">40</span><span class="s0">;    </span><span class="s4">// (</span>
    <span class="s1">var </span><span class="s2">RIGHTPARENTHESIS </span><span class="s0">= </span><span class="s5">41</span><span class="s0">;   </span><span class="s4">// )</span>
    <span class="s1">var </span><span class="s2">ASTERISK </span><span class="s0">= </span><span class="s5">42</span><span class="s0">;           </span><span class="s4">// *</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN$2 </span><span class="s0">= </span><span class="s5">43</span><span class="s0">;           </span><span class="s4">// +</span>
    <span class="s1">var </span><span class="s2">COMMA </span><span class="s0">= </span><span class="s5">44</span><span class="s0">;              </span><span class="s4">// ,</span>
    <span class="s1">var </span><span class="s2">HYPERMINUS </span><span class="s0">= </span><span class="s5">45</span><span class="s0">;         </span><span class="s4">// -</span>
    <span class="s1">var </span><span class="s2">LESSTHANSIGN </span><span class="s0">= </span><span class="s5">60</span><span class="s0">;       </span><span class="s4">// &lt;</span>
    <span class="s1">var </span><span class="s2">GREATERTHANSIGN </span><span class="s0">= </span><span class="s5">62</span><span class="s0">;    </span><span class="s4">// &gt;</span>
    <span class="s1">var </span><span class="s2">QUESTIONMARK$1 </span><span class="s0">= </span><span class="s5">63</span><span class="s0">;       </span><span class="s4">// ?</span>
    <span class="s1">var </span><span class="s2">COMMERCIALAT </span><span class="s0">= </span><span class="s5">64</span><span class="s0">;       </span><span class="s4">// @</span>
    <span class="s1">var </span><span class="s2">LEFTSQUAREBRACKET </span><span class="s0">= </span><span class="s5">91</span><span class="s0">;  </span><span class="s4">// [</span>
    <span class="s1">var </span><span class="s2">RIGHTSQUAREBRACKET </span><span class="s0">= </span><span class="s5">93</span><span class="s0">; </span><span class="s4">// ]</span>
    <span class="s1">var </span><span class="s2">LEFTCURLYBRACKET </span><span class="s0">= </span><span class="s5">123</span><span class="s0">;  </span><span class="s4">// {</span>
    <span class="s1">var </span><span class="s2">VERTICALLINE </span><span class="s0">= </span><span class="s5">124</span><span class="s0">;      </span><span class="s4">// |</span>
    <span class="s1">var </span><span class="s2">RIGHTCURLYBRACKET </span><span class="s0">= </span><span class="s5">125</span><span class="s0">; </span><span class="s4">// }</span>
    <span class="s1">var </span><span class="s2">INFINITY </span><span class="s0">= </span><span class="s5">8734</span><span class="s0">;         </span><span class="s4">// ∞</span>
    <span class="s1">var </span><span class="s2">NAME_CHAR </span><span class="s0">= </span><span class="s2">createCharMap</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">ch</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s6">/[a-zA-Z0-9\-]/</span><span class="s0">.</span><span class="s2">test</span><span class="s0">(</span><span class="s2">ch</span><span class="s0">);</span>
    <span class="s0">});</span>
    <span class="s1">var </span><span class="s2">COMBINATOR_PRECEDENCE </span><span class="s0">= {</span>
        <span class="s3">' '</span><span class="s0">: </span><span class="s5">1</span><span class="s0">,</span>
        <span class="s3">'&amp;&amp;'</span><span class="s0">: </span><span class="s5">2</span><span class="s0">,</span>
        <span class="s3">'||'</span><span class="s0">: </span><span class="s5">3</span><span class="s0">,</span>
        <span class="s3">'|'</span><span class="s0">: </span><span class="s5">4</span>
    <span class="s0">};</span>

    <span class="s1">function </span><span class="s2">createCharMap</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">array </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">Uint32Array </span><span class="s0">=== </span><span class="s3">'function' </span><span class="s0">? </span><span class="s1">new </span><span class="s2">Uint32Array</span><span class="s0">(</span><span class="s5">128</span><span class="s0">) : </span><span class="s1">new </span><span class="s2">Array</span><span class="s0">(</span><span class="s5">128</span><span class="s0">);</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s5">128</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s2">array</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">fn</span><span class="s0">(</span><span class="s2">String</span><span class="s0">.</span><span class="s2">fromCharCode</span><span class="s0">(</span><span class="s2">i</span><span class="s0">)) ? </span><span class="s5">1 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s1">return </span><span class="s2">array</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">scanSpaces</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">substringToPos</span><span class="s0">(</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">findWsEnd</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">)</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">scanWord</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">end </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">;</span>

        <span class="s1">for </span><span class="s0">(; </span><span class="s2">end </span><span class="s0">&lt; </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">end</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">end</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">&gt;= </span><span class="s5">128 </span><span class="s0">|| </span><span class="s2">NAME_CHAR</span><span class="s0">[</span><span class="s2">code</span><span class="s0">] === </span><span class="s5">0</span><span class="s0">) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">=== </span><span class="s2">end</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Expect a keyword'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">substringToPos</span><span class="s0">(</span><span class="s2">end</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">scanNumber</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">end </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">;</span>

        <span class="s1">for </span><span class="s0">(; </span><span class="s2">end </span><span class="s0">&lt; </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">end</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">end</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">&lt; </span><span class="s5">48 </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">&gt; </span><span class="s5">57</span><span class="s0">) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">=== </span><span class="s2">end</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Expect a number'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">substringToPos</span><span class="s0">(</span><span class="s2">end</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">scanString</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">end </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s3">'</span><span class="s1">\'</span><span class="s3">'</span><span class="s0">, </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">end </span><span class="s0">=== -</span><span class="s5">1</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">str</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Expect an apostrophe'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">substringToPos</span><span class="s0">(</span><span class="s2">end </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">readMultiplierRange</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">min </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">max </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LEFTCURLYBRACKET</span><span class="s0">);</span>

        <span class="s2">min </span><span class="s0">= </span><span class="s2">scanNumber</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">COMMA</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() !== </span><span class="s2">RIGHTCURLYBRACKET</span><span class="s0">) {</span>
                <span class="s2">max </span><span class="s0">= </span><span class="s2">scanNumber</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s2">max </span><span class="s0">= </span><span class="s2">min</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTCURLYBRACKET</span><span class="s0">);</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">min</span><span class="s0">: </span><span class="s2">Number</span><span class="s0">(</span><span class="s2">min</span><span class="s0">),</span>
            <span class="s2">max</span><span class="s0">: </span><span class="s2">max </span><span class="s0">? </span><span class="s2">Number</span><span class="s0">(</span><span class="s2">max</span><span class="s0">) : </span><span class="s5">0</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">readMultiplier</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">range </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">comma </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>

        <span class="s1">switch </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">()) {</span>
            <span class="s1">case </span><span class="s2">ASTERISK</span><span class="s0">:</span>
                <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>

                <span class="s2">range </span><span class="s0">= {</span>
                    <span class="s2">min</span><span class="s0">: </span><span class="s5">0</span><span class="s0">,</span>
                    <span class="s2">max</span><span class="s0">: </span><span class="s5">0</span>
                <span class="s0">};</span>

                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">PLUSSIGN$2</span><span class="s0">:</span>
                <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>

                <span class="s2">range </span><span class="s0">= {</span>
                    <span class="s2">min</span><span class="s0">: </span><span class="s5">1</span><span class="s0">,</span>
                    <span class="s2">max</span><span class="s0">: </span><span class="s5">0</span>
                <span class="s0">};</span>

                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">QUESTIONMARK$1</span><span class="s0">:</span>
                <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>

                <span class="s2">range </span><span class="s0">= {</span>
                    <span class="s2">min</span><span class="s0">: </span><span class="s5">0</span><span class="s0">,</span>
                    <span class="s2">max</span><span class="s0">: </span><span class="s5">1</span>
                <span class="s0">};</span>

                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">NUMBERSIGN</span><span class="s0">:</span>
                <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>

                <span class="s2">comma </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">LEFTCURLYBRACKET</span><span class="s0">) {</span>
                    <span class="s2">range </span><span class="s0">= </span><span class="s2">readMultiplierRange</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">range </span><span class="s0">= {</span>
                        <span class="s2">min</span><span class="s0">: </span><span class="s5">1</span><span class="s0">,</span>
                        <span class="s2">max</span><span class="s0">: </span><span class="s5">0</span>
                    <span class="s0">};</span>
                <span class="s0">}</span>

                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">LEFTCURLYBRACKET</span><span class="s0">:</span>
                <span class="s2">range </span><span class="s0">= </span><span class="s2">readMultiplierRange</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">default</span><span class="s0">:</span>
                <span class="s1">return null</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'Multiplier'</span><span class="s0">,</span>
            <span class="s2">comma</span><span class="s0">: </span><span class="s2">comma</span><span class="s0">,</span>
            <span class="s2">min</span><span class="s0">: </span><span class="s2">range</span><span class="s0">.</span><span class="s2">min</span><span class="s0">,</span>
            <span class="s2">max</span><span class="s0">: </span><span class="s2">range</span><span class="s0">.</span><span class="s2">max</span><span class="s0">,</span>
            <span class="s2">term</span><span class="s0">: </span><span class="s1">null</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">maybeMultiplied</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">, </span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">multiplier </span><span class="s0">= </span><span class="s2">readMultiplier</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">multiplier </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">multiplier</span><span class="s0">.</span><span class="s2">term </span><span class="s0">= </span><span class="s2">node</span><span class="s0">;</span>
            <span class="s1">return </span><span class="s2">multiplier</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">node</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">maybeToken</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">ch </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">peek</span><span class="s0">();</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">ch </span><span class="s0">=== </span><span class="s3">''</span><span class="s0">) {</span>
            <span class="s1">return null</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'Token'</span><span class="s0">,</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">ch</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">readProperty</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">name</span><span class="s0">;</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LESSTHANSIGN</span><span class="s0">);</span>
        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">APOSTROPHE</span><span class="s0">);</span>

        <span class="s2">name </span><span class="s0">= </span><span class="s2">scanWord</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">APOSTROPHE</span><span class="s0">);</span>
        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">GREATERTHANSIGN</span><span class="s0">);</span>

        <span class="s1">return </span><span class="s2">maybeMultiplied</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">, {</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'Property'</span><span class="s0">,</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span>
        <span class="s0">});</span>
    <span class="s0">}</span>

    <span class="s4">// https://drafts.csswg.org/css-values-3/#numeric-ranges</span>
    <span class="s4">// 4.1. Range Restrictions and Range Definition Notation</span>
    <span class="s4">//</span>
    <span class="s4">// Range restrictions can be annotated in the numeric type notation using CSS bracketed</span>
    <span class="s4">// range notation—[min,max]—within the angle brackets, after the identifying keyword,</span>
    <span class="s4">// indicating a closed range between (and including) min and max.</span>
    <span class="s4">// For example, &lt;integer [0, 10]&gt; indicates an integer between 0 and 10, inclusive.</span>
    <span class="s1">function </span><span class="s2">readTypeRange</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s4">// use null for Infinity to make AST format JSON serializable/deserializable</span>
        <span class="s1">var </span><span class="s2">min </span><span class="s0">= </span><span class="s1">null</span><span class="s0">; </span><span class="s4">// -Infinity</span>
        <span class="s1">var </span><span class="s2">max </span><span class="s0">= </span><span class="s1">null</span><span class="s0">; </span><span class="s4">// Infinity</span>
        <span class="s1">var </span><span class="s2">sign </span><span class="s0">= </span><span class="s5">1</span><span class="s0">;</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LEFTSQUAREBRACKET</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">HYPERMINUS</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">peek</span><span class="s0">();</span>
            <span class="s2">sign </span><span class="s0">= -</span><span class="s5">1</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">sign </span><span class="s0">== -</span><span class="s5">1 </span><span class="s0">&amp;&amp; </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">INFINITY</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">peek</span><span class="s0">();</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s2">min </span><span class="s0">= </span><span class="s2">sign </span><span class="s0">* </span><span class="s2">Number</span><span class="s0">(</span><span class="s2">scanNumber</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">));</span>
        <span class="s0">}</span>

        <span class="s2">scanSpaces</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">COMMA</span><span class="s0">);</span>
        <span class="s2">scanSpaces</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">INFINITY</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">peek</span><span class="s0">();</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s2">sign </span><span class="s0">= </span><span class="s5">1</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">HYPERMINUS</span><span class="s0">) {</span>
                <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">peek</span><span class="s0">();</span>
                <span class="s2">sign </span><span class="s0">= -</span><span class="s5">1</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">max </span><span class="s0">= </span><span class="s2">sign </span><span class="s0">* </span><span class="s2">Number</span><span class="s0">(</span><span class="s2">scanNumber</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">));</span>
        <span class="s0">}</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTSQUAREBRACKET</span><span class="s0">);</span>

        <span class="s4">// If no range is indicated, either by using the bracketed range notation</span>
        <span class="s4">// or in the property description, then [−∞,∞] is assumed.</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">min </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">max </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return null</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'Range'</span><span class="s0">,</span>
            <span class="s2">min</span><span class="s0">: </span><span class="s2">min</span><span class="s0">,</span>
            <span class="s2">max</span><span class="s0">: </span><span class="s2">max</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">readType</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">name</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">opts </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LESSTHANSIGN</span><span class="s0">);</span>
        <span class="s2">name </span><span class="s0">= </span><span class="s2">scanWord</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">LEFTPARENTHESIS </span><span class="s0">&amp;&amp;</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">nextCharCode</span><span class="s0">() === </span><span class="s2">RIGHTPARENTHESIS</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">+= </span><span class="s5">2</span><span class="s0">;</span>
            <span class="s2">name </span><span class="s0">+= </span><span class="s3">'()'</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">findWsEnd</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">)) === </span><span class="s2">LEFTSQUAREBRACKET</span><span class="s0">) {</span>
            <span class="s2">scanSpaces</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
            <span class="s2">opts </span><span class="s0">= </span><span class="s2">readTypeRange</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">GREATERTHANSIGN</span><span class="s0">);</span>

        <span class="s1">return </span><span class="s2">maybeMultiplied</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">, {</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'Type'</span><span class="s0">,</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
            <span class="s2">opts</span><span class="s0">: </span><span class="s2">opts</span>
        <span class="s0">});</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">readKeywordOrFunction</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">name</span><span class="s0">;</span>

        <span class="s2">name </span><span class="s0">= </span><span class="s2">scanWord</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">LEFTPARENTHESIS</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Function'</span><span class="s0">,</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">maybeMultiplied</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">, {</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'Keyword'</span><span class="s0">,</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span>
        <span class="s0">});</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">regroupTerms</span><span class="s0">(</span><span class="s2">terms</span><span class="s0">, </span><span class="s2">combinators</span><span class="s0">) {</span>
        <span class="s1">function </span><span class="s2">createGroup</span><span class="s0">(</span><span class="s2">terms</span><span class="s0">, </span><span class="s2">combinator</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Group'</span><span class="s0">,</span>
                <span class="s2">terms</span><span class="s0">: </span><span class="s2">terms</span><span class="s0">,</span>
                <span class="s2">combinator</span><span class="s0">: </span><span class="s2">combinator</span><span class="s0">,</span>
                <span class="s2">disallowEmpty</span><span class="s0">: </span><span class="s1">false</span><span class="s0">,</span>
                <span class="s2">explicit</span><span class="s0">: </span><span class="s1">false</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s2">combinators </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">combinators</span><span class="s0">).</span><span class="s2">sort</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">a</span><span class="s0">, </span><span class="s2">b</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">COMBINATOR_PRECEDENCE</span><span class="s0">[</span><span class="s2">a</span><span class="s0">] - </span><span class="s2">COMBINATOR_PRECEDENCE</span><span class="s0">[</span><span class="s2">b</span><span class="s0">];</span>
        <span class="s0">});</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">combinators</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">combinator </span><span class="s0">= </span><span class="s2">combinators</span><span class="s0">.</span><span class="s2">shift</span><span class="s0">();</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">, </span><span class="s2">subgroupStart </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">var </span><span class="s2">term </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">term</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Combinator'</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">term</span><span class="s0">.</span><span class="s2">value </span><span class="s0">=== </span><span class="s2">combinator</span><span class="s0">) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">subgroupStart </span><span class="s0">=== -</span><span class="s5">1</span><span class="s0">) {</span>
                            <span class="s2">subgroupStart </span><span class="s0">= </span><span class="s2">i </span><span class="s0">- </span><span class="s5">1</span><span class="s0">;</span>
                        <span class="s0">}</span>
                        <span class="s2">terms</span><span class="s0">.</span><span class="s2">splice</span><span class="s0">(</span><span class="s2">i</span><span class="s0">, </span><span class="s5">1</span><span class="s0">);</span>
                        <span class="s2">i</span><span class="s0">--;</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">subgroupStart </span><span class="s0">!== -</span><span class="s5">1 </span><span class="s0">&amp;&amp; </span><span class="s2">i </span><span class="s0">- </span><span class="s2">subgroupStart </span><span class="s0">&gt; </span><span class="s5">1</span><span class="s0">) {</span>
                            <span class="s2">terms</span><span class="s0">.</span><span class="s2">splice</span><span class="s0">(</span>
                                <span class="s2">subgroupStart</span><span class="s0">,</span>
                                <span class="s2">i </span><span class="s0">- </span><span class="s2">subgroupStart</span><span class="s0">,</span>
                                <span class="s2">createGroup</span><span class="s0">(</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s2">subgroupStart</span><span class="s0">, </span><span class="s2">i</span><span class="s0">), </span><span class="s2">combinator</span><span class="s0">)</span>
                            <span class="s0">);</span>
                            <span class="s2">i </span><span class="s0">= </span><span class="s2">subgroupStart </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">;</span>
                        <span class="s0">}</span>
                        <span class="s2">subgroupStart </span><span class="s0">= -</span><span class="s5">1</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">subgroupStart </span><span class="s0">!== -</span><span class="s5">1 </span><span class="s0">&amp;&amp; </span><span class="s2">combinators</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                <span class="s2">terms</span><span class="s0">.</span><span class="s2">splice</span><span class="s0">(</span>
                    <span class="s2">subgroupStart</span><span class="s0">,</span>
                    <span class="s2">i </span><span class="s0">- </span><span class="s2">subgroupStart</span><span class="s0">,</span>
                    <span class="s2">createGroup</span><span class="s0">(</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s2">subgroupStart</span><span class="s0">, </span><span class="s2">i</span><span class="s0">), </span><span class="s2">combinator</span><span class="s0">)</span>
                <span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">combinator</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">readImplicitGroup</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">terms </span><span class="s0">= [];</span>
        <span class="s1">var </span><span class="s2">combinators </span><span class="s0">= {};</span>
        <span class="s1">var </span><span class="s2">token</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">prevToken </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">prevTokenPos </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">token </span><span class="s0">= </span><span class="s2">peek</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">)) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s3">'Spaces'</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Combinator'</span><span class="s0">) {</span>
                    <span class="s4">// check for combinator in group beginning and double combinator sequence</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">prevToken </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">prevToken</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Combinator'</span><span class="s0">) {</span>
                        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">= </span><span class="s2">prevTokenPos</span><span class="s0">;</span>
                        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Unexpected combinator'</span><span class="s0">);</span>
                    <span class="s0">}</span>

                    <span class="s2">combinators</span><span class="s0">[</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">] = </span><span class="s1">true</span><span class="s0">;</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">prevToken </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">prevToken</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s3">'Combinator'</span><span class="s0">) {</span>
                    <span class="s2">combinators</span><span class="s0">[</span><span class="s3">' '</span><span class="s0">] = </span><span class="s1">true</span><span class="s0">;  </span><span class="s4">// a b</span>
                    <span class="s2">terms</span><span class="s0">.</span><span class="s2">push</span><span class="s0">({</span>
                        <span class="s2">type</span><span class="s0">: </span><span class="s3">'Combinator'</span><span class="s0">,</span>
                        <span class="s2">value</span><span class="s0">: </span><span class="s3">' '</span>
                    <span class="s0">});</span>
                <span class="s0">}</span>

                <span class="s2">terms</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">token</span><span class="s0">);</span>
                <span class="s2">prevToken </span><span class="s0">= </span><span class="s2">token</span><span class="s0">;</span>
                <span class="s2">prevTokenPos </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s4">// check for combinator in group ending</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">prevToken </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">prevToken</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Combinator'</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">-= </span><span class="s2">prevTokenPos</span><span class="s0">;</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Unexpected combinator'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'Group'</span><span class="s0">,</span>
            <span class="s2">terms</span><span class="s0">: </span><span class="s2">terms</span><span class="s0">,</span>
            <span class="s2">combinator</span><span class="s0">: </span><span class="s2">regroupTerms</span><span class="s0">(</span><span class="s2">terms</span><span class="s0">, </span><span class="s2">combinators</span><span class="s0">) || </span><span class="s3">' '</span><span class="s0">,</span>
            <span class="s2">disallowEmpty</span><span class="s0">: </span><span class="s1">false</span><span class="s0">,</span>
            <span class="s2">explicit</span><span class="s0">: </span><span class="s1">false</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">readGroup</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">result</span><span class="s0">;</span>

        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LEFTSQUAREBRACKET</span><span class="s0">);</span>
        <span class="s2">result </span><span class="s0">= </span><span class="s2">readImplicitGroup</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTSQUAREBRACKET</span><span class="s0">);</span>

        <span class="s2">result</span><span class="s0">.</span><span class="s2">explicit </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">() === </span><span class="s2">EXCLAMATIONMARK</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>
            <span class="s2">result</span><span class="s0">.</span><span class="s2">disallowEmpty </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">peek</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">charCode</span><span class="s0">();</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">&lt; </span><span class="s5">128 </span><span class="s0">&amp;&amp; </span><span class="s2">NAME_CHAR</span><span class="s0">[</span><span class="s2">code</span><span class="s0">] === </span><span class="s5">1</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">readKeywordOrFunction</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">switch </span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
            <span class="s1">case </span><span class="s2">RIGHTSQUAREBRACKET</span><span class="s0">:</span>
                <span class="s4">// don't eat, stop scan a group</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">LEFTSQUAREBRACKET</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s2">maybeMultiplied</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">, </span><span class="s2">readGroup</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">));</span>

            <span class="s1">case </span><span class="s2">LESSTHANSIGN</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">nextCharCode</span><span class="s0">() === </span><span class="s2">APOSTROPHE</span>
                    <span class="s0">? </span><span class="s2">readProperty</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">)</span>
                    <span class="s0">: </span><span class="s2">readType</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

            <span class="s1">case </span><span class="s2">VERTICALLINE</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s3">'Combinator'</span><span class="s0">,</span>
                    <span class="s2">value</span><span class="s0">: </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">substringToPos</span><span class="s0">(</span>
                        <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">nextCharCode</span><span class="s0">() === </span><span class="s2">VERTICALLINE</span>
                            <span class="s0">? </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">+ </span><span class="s5">2</span>
                            <span class="s0">: </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">+ </span><span class="s5">1</span>
                    <span class="s0">)</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s2">AMPERSAND</span><span class="s0">:</span>
                <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>
                <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">AMPERSAND</span><span class="s0">);</span>

                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s3">'Combinator'</span><span class="s0">,</span>
                    <span class="s2">value</span><span class="s0">: </span><span class="s3">'&amp;&amp;'</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s2">COMMA</span><span class="s0">:</span>
                <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s3">'Comma'</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s2">APOSTROPHE</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s2">maybeMultiplied</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">, {</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s3">'String'</span><span class="s0">,</span>
                    <span class="s2">value</span><span class="s0">: </span><span class="s2">scanString</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">)</span>
                <span class="s0">});</span>

            <span class="s1">case </span><span class="s2">SPACE$1</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">TAB$1</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">N$2</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">R$1</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">F$1</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s3">'Spaces'</span><span class="s0">,</span>
                    <span class="s2">value</span><span class="s0">: </span><span class="s2">scanSpaces</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">)</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s2">COMMERCIALAT</span><span class="s0">:</span>
                <span class="s2">code </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">nextCharCode</span><span class="s0">();</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">&lt; </span><span class="s5">128 </span><span class="s0">&amp;&amp; </span><span class="s2">NAME_CHAR</span><span class="s0">[</span><span class="s2">code</span><span class="s0">] === </span><span class="s5">1</span><span class="s0">) {</span>
                    <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos</span><span class="s0">++;</span>
                    <span class="s1">return </span><span class="s0">{</span>
                        <span class="s2">type</span><span class="s0">: </span><span class="s3">'AtKeyword'</span><span class="s0">,</span>
                        <span class="s2">name</span><span class="s0">: </span><span class="s2">scanWord</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">)</span>
                    <span class="s0">};</span>
                <span class="s0">}</span>

                <span class="s1">return </span><span class="s2">maybeToken</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

            <span class="s1">case </span><span class="s2">ASTERISK</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">PLUSSIGN$2</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">QUESTIONMARK$1</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">NUMBERSIGN</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">EXCLAMATIONMARK</span><span class="s0">:</span>
                <span class="s4">// prohibited tokens (used as a multiplier start)</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">LEFTCURLYBRACKET</span><span class="s0">:</span>
                <span class="s4">// LEFTCURLYBRACKET is allowed since mdn/data uses it w/o quoting</span>
                <span class="s4">// check next char isn't a number, because it's likely a disjoined multiplier</span>
                <span class="s2">code </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">nextCharCode</span><span class="s0">();</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">&lt; </span><span class="s5">48 </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">&gt; </span><span class="s5">57</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s2">maybeToken</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">default</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s2">maybeToken</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">parse</span><span class="s0">(</span><span class="s2">source</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">tokenizer </span><span class="s0">= </span><span class="s1">new </span><span class="s2">tokenizer$1</span><span class="s0">(</span><span class="s2">source</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s2">readImplicitGroup</span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">pos </span><span class="s0">!== </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
            <span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Unexpected input'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s4">// reduce redundant groups with single group term</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">result</span><span class="s0">.</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">=== </span><span class="s5">1 </span><span class="s0">&amp;&amp; </span><span class="s2">result</span><span class="s0">.</span><span class="s2">terms</span><span class="s0">[</span><span class="s5">0</span><span class="s0">].</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Group'</span><span class="s0">) {</span>
            <span class="s2">result </span><span class="s0">= </span><span class="s2">result</span><span class="s0">.</span><span class="s2">terms</span><span class="s0">[</span><span class="s5">0</span><span class="s0">];</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// warm up parse to elimitate code branches that never execute</span>
    <span class="s4">// fix soft deoptimizations (insufficient type feedback)</span>
    <span class="s2">parse</span><span class="s0">(</span><span class="s3">'[a&amp;&amp;&lt;b&gt;#|&lt;</span><span class="s1">\'</span><span class="s3">c</span><span class="s1">\'</span><span class="s3">&gt;*||e() f{2} /,(% g#{1,2} h{2,})]!'</span><span class="s0">);</span>

    <span class="s1">var </span><span class="s2">parse_1 </span><span class="s0">= </span><span class="s2">parse</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">noop$1 </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {};</span>

    <span class="s1">function </span><span class="s2">ensureFunction</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
        <span class="s1">return typeof </span><span class="s2">value </span><span class="s0">=== </span><span class="s3">'function' </span><span class="s0">? </span><span class="s2">value </span><span class="s0">: </span><span class="s2">noop$1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">walk </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">options</span><span class="s0">, </span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">function </span><span class="s2">walk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s2">enter</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">node</span><span class="s0">);</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s3">'Group'</span><span class="s0">:</span>
                    <span class="s2">node</span><span class="s0">.</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">forEach</span><span class="s0">(</span><span class="s2">walk</span><span class="s0">);</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Multiplier'</span><span class="s0">:</span>
                    <span class="s2">walk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">term</span><span class="s0">);</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Type'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'Property'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'Keyword'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'AtKeyword'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'Function'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'String'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'Token'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'Comma'</span><span class="s0">:</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Unknown type: ' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s2">leave</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">node</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">enter </span><span class="s0">= </span><span class="s2">noop$1</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">leave </span><span class="s0">= </span><span class="s2">noop$1</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">options </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
            <span class="s2">enter </span><span class="s0">= </span><span class="s2">options</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">options</span><span class="s0">) {</span>
            <span class="s2">enter </span><span class="s0">= </span><span class="s2">ensureFunction</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">enter</span><span class="s0">);</span>
            <span class="s2">leave </span><span class="s0">= </span><span class="s2">ensureFunction</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">leave</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">enter </span><span class="s0">=== </span><span class="s2">noop$1 </span><span class="s0">&amp;&amp; </span><span class="s2">leave </span><span class="s0">=== </span><span class="s2">noop$1</span><span class="s0">) {</span>
            <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Neither `enter` nor `leave` walker handler is set or both aren</span><span class="s1">\'</span><span class="s3">t a function'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s2">walk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">tokenStream </span><span class="s0">= </span><span class="s1">new </span><span class="s2">TokenStream_1</span><span class="s0">();</span>
    <span class="s1">var </span><span class="s2">astToTokens </span><span class="s0">= {</span>
        <span class="s2">decorator</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">handlers</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">curNode </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">prev </span><span class="s0">= { </span><span class="s2">len</span><span class="s0">: </span><span class="s5">0</span><span class="s0">, </span><span class="s2">node</span><span class="s0">: </span><span class="s1">null </span><span class="s0">};</span>
            <span class="s1">var </span><span class="s2">nodes </span><span class="s0">= [</span><span class="s2">prev</span><span class="s0">];</span>
            <span class="s1">var </span><span class="s2">buffer </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">handlers</span><span class="s0">.</span><span class="s2">children</span><span class="s0">,</span>
                <span class="s2">node</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
                    <span class="s1">var </span><span class="s2">tmp </span><span class="s0">= </span><span class="s2">curNode</span><span class="s0">;</span>
                    <span class="s2">curNode </span><span class="s0">= </span><span class="s2">node</span><span class="s0">;</span>
                    <span class="s2">handlers</span><span class="s0">.</span><span class="s2">node</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">);</span>
                    <span class="s2">curNode </span><span class="s0">= </span><span class="s2">tmp</span><span class="s0">;</span>
                <span class="s0">},</span>
                <span class="s2">chunk</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">chunk</span><span class="s0">) {</span>
                    <span class="s2">buffer </span><span class="s0">+= </span><span class="s2">chunk</span><span class="s0">;</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">prev</span><span class="s0">.</span><span class="s2">node </span><span class="s0">!== </span><span class="s2">curNode</span><span class="s0">) {</span>
                        <span class="s2">nodes</span><span class="s0">.</span><span class="s2">push</span><span class="s0">({</span>
                            <span class="s2">len</span><span class="s0">: </span><span class="s2">chunk</span><span class="s0">.</span><span class="s2">length</span><span class="s0">,</span>
                            <span class="s2">node</span><span class="s0">: </span><span class="s2">curNode</span>
                        <span class="s0">});</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">prev</span><span class="s0">.</span><span class="s2">len </span><span class="s0">+= </span><span class="s2">chunk</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">},</span>
                <span class="s2">result</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                    <span class="s1">return </span><span class="s2">prepareTokens</span><span class="s0">(</span><span class="s2">buffer</span><span class="s0">, </span><span class="s2">nodes</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">};</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">function </span><span class="s2">prepareTokens</span><span class="s0">(</span><span class="s2">str</span><span class="s0">, </span><span class="s2">nodes</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">tokens </span><span class="s0">= [];</span>
        <span class="s1">var </span><span class="s2">nodesOffset </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">nodesIndex </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">currentNode </span><span class="s0">= </span><span class="s2">nodes </span><span class="s0">? </span><span class="s2">nodes</span><span class="s0">[</span><span class="s2">nodesIndex</span><span class="s0">].</span><span class="s2">node </span><span class="s0">: </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s2">tokenizer</span><span class="s0">(</span><span class="s2">str</span><span class="s0">, </span><span class="s2">tokenStream</span><span class="s0">);</span>

        <span class="s1">while </span><span class="s0">(!</span><span class="s2">tokenStream</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">nodes</span><span class="s0">) {</span>
                <span class="s1">while </span><span class="s0">(</span><span class="s2">nodesIndex </span><span class="s0">&lt; </span><span class="s2">nodes</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&amp;&amp; </span><span class="s2">nodesOffset </span><span class="s0">+ </span><span class="s2">nodes</span><span class="s0">[</span><span class="s2">nodesIndex</span><span class="s0">].</span><span class="s2">len </span><span class="s0">&lt;= </span><span class="s2">tokenStream</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">) {</span>
                    <span class="s2">nodesOffset </span><span class="s0">+= </span><span class="s2">nodes</span><span class="s0">[</span><span class="s2">nodesIndex</span><span class="s0">++].</span><span class="s2">len</span><span class="s0">;</span>
                    <span class="s2">currentNode </span><span class="s0">= </span><span class="s2">nodes</span><span class="s0">[</span><span class="s2">nodesIndex</span><span class="s0">].</span><span class="s2">node</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s2">tokens</span><span class="s0">.</span><span class="s2">push</span><span class="s0">({</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s2">tokenStream</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">,</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s2">tokenStream</span><span class="s0">.</span><span class="s2">getTokenValue</span><span class="s0">(),</span>
                <span class="s2">index</span><span class="s0">: </span><span class="s2">tokenStream</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">, </span><span class="s4">// TODO: remove it, temporary solution</span>
                <span class="s2">balance</span><span class="s0">: </span><span class="s2">tokenStream</span><span class="s0">.</span><span class="s2">balance</span><span class="s0">[</span><span class="s2">tokenStream</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">], </span><span class="s4">// TODO: remove it, temporary solution</span>
                <span class="s2">node</span><span class="s0">: </span><span class="s2">currentNode</span>
            <span class="s0">});</span>
            <span class="s2">tokenStream</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
            <span class="s4">// console.log({ ...tokens[tokens.length - 1], node: undefined });</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">tokens</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">prepareTokens_1 </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">value</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">value </span><span class="s0">=== </span><span class="s3">'string'</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">prepareTokens</span><span class="s0">(</span><span class="s2">value</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">generate</span><span class="s0">(</span><span class="s2">value</span><span class="s0">, </span><span class="s2">astToTokens</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">MATCH </span><span class="s0">= { </span><span class="s2">type</span><span class="s0">: </span><span class="s3">'Match' </span><span class="s0">};</span>
    <span class="s1">var </span><span class="s2">MISMATCH </span><span class="s0">= { </span><span class="s2">type</span><span class="s0">: </span><span class="s3">'Mismatch' </span><span class="s0">};</span>
    <span class="s1">var </span><span class="s2">DISALLOW_EMPTY </span><span class="s0">= { </span><span class="s2">type</span><span class="s0">: </span><span class="s3">'DisallowEmpty' </span><span class="s0">};</span>
    <span class="s1">var </span><span class="s2">LEFTPARENTHESIS$1 </span><span class="s0">= </span><span class="s5">40</span><span class="s0">;  </span><span class="s4">// (</span>
    <span class="s1">var </span><span class="s2">RIGHTPARENTHESIS$1 </span><span class="s0">= </span><span class="s5">41</span><span class="s0">; </span><span class="s4">// )</span>

    <span class="s1">function </span><span class="s2">createCondition</span><span class="s0">(</span><span class="s2">match</span><span class="s0">, </span><span class="s2">thenBranch</span><span class="s0">, </span><span class="s2">elseBranch</span><span class="s0">) {</span>
        <span class="s4">// reduce node count</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">thenBranch </span><span class="s0">=== </span><span class="s2">MATCH </span><span class="s0">&amp;&amp; </span><span class="s2">elseBranch </span><span class="s0">=== </span><span class="s2">MISMATCH</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">match</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">match </span><span class="s0">=== </span><span class="s2">MATCH </span><span class="s0">&amp;&amp; </span><span class="s2">thenBranch </span><span class="s0">=== </span><span class="s2">MATCH </span><span class="s0">&amp;&amp; </span><span class="s2">elseBranch </span><span class="s0">=== </span><span class="s2">MATCH</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">match</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">match</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'If' </span><span class="s0">&amp;&amp; </span><span class="s2">match</span><span class="s0">.</span><span class="s2">else </span><span class="s0">=== </span><span class="s2">MISMATCH </span><span class="s0">&amp;&amp; </span><span class="s2">thenBranch </span><span class="s0">=== </span><span class="s2">MATCH</span><span class="s0">) {</span>
            <span class="s2">thenBranch </span><span class="s0">= </span><span class="s2">match</span><span class="s0">.</span><span class="s2">then</span><span class="s0">;</span>
            <span class="s2">match </span><span class="s0">= </span><span class="s2">match</span><span class="s0">.</span><span class="s2">match</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'If'</span><span class="s0">,</span>
            <span class="s2">match</span><span class="s0">: </span><span class="s2">match</span><span class="s0">,</span>
            <span class="s2">then</span><span class="s0">: </span><span class="s2">thenBranch</span><span class="s0">,</span>
            <span class="s1">else</span><span class="s0">: </span><span class="s2">elseBranch</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isFunctionType</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">(</span>
            <span class="s2">name</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s5">2 </span><span class="s0">&amp;&amp;</span>
            <span class="s2">name</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">name</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">2</span><span class="s0">) === </span><span class="s2">LEFTPARENTHESIS$1 </span><span class="s0">&amp;&amp;</span>
            <span class="s2">name</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">name</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">) === </span><span class="s2">RIGHTPARENTHESIS$1</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isEnumCapatible</span><span class="s0">(</span><span class="s2">term</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">(</span>
            <span class="s2">term</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Keyword' </span><span class="s0">||</span>
            <span class="s2">term</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'AtKeyword' </span><span class="s0">||</span>
            <span class="s2">term</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Function' </span><span class="s0">||</span>
            <span class="s2">term</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Type' </span><span class="s0">&amp;&amp; </span><span class="s2">isFunctionType</span><span class="s0">(</span><span class="s2">term</span><span class="s0">.</span><span class="s2">name</span><span class="s0">)</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">buildGroupMatchGraph</span><span class="s0">(</span><span class="s2">combinator</span><span class="s0">, </span><span class="s2">terms</span><span class="s0">, </span><span class="s2">atLeastOneTermMatched</span><span class="s0">) {</span>
        <span class="s1">switch </span><span class="s0">(</span><span class="s2">combinator</span><span class="s0">) {</span>
            <span class="s1">case </span><span class="s3">' '</span><span class="s0">:</span>
                <span class="s4">// Juxtaposing components means that all of them must occur, in the given order.</span>
                <span class="s4">//</span>
                <span class="s4">// a b c</span>
                <span class="s4">// =</span>
                <span class="s4">// match a</span>
                <span class="s4">//   then match b</span>
                <span class="s4">//     then match c</span>
                <span class="s4">//       then MATCH</span>
                <span class="s4">//       else MISMATCH</span>
                <span class="s4">//     else MISMATCH</span>
                <span class="s4">//   else MISMATCH</span>
                <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s2">MATCH</span><span class="s0">;</span>

                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i</span><span class="s0">--) {</span>
                    <span class="s1">var </span><span class="s2">term </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>

                    <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                        <span class="s2">term</span><span class="s0">,</span>
                        <span class="s2">result</span><span class="s0">,</span>
                        <span class="s2">MISMATCH</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>
                <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'|'</span><span class="s0">:</span>
                <span class="s4">// A bar (|) separates two or more alternatives: exactly one of them must occur.</span>
                <span class="s4">//</span>
                <span class="s4">// a | b | c</span>
                <span class="s4">// =</span>
                <span class="s4">// match a</span>
                <span class="s4">//   then MATCH</span>
                <span class="s4">//   else match b</span>
                <span class="s4">//     then MATCH</span>
                <span class="s4">//     else match c</span>
                <span class="s4">//       then MATCH</span>
                <span class="s4">//       else MISMATCH</span>

                <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s2">MISMATCH</span><span class="s0">;</span>
                <span class="s1">var </span><span class="s2">map </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i</span><span class="s0">--) {</span>
                    <span class="s1">var </span><span class="s2">term </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>

                    <span class="s4">// reduce sequence of keywords into a Enum</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">isEnumCapatible</span><span class="s0">(</span><span class="s2">term</span><span class="s0">)) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">map </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">i </span><span class="s0">&gt; </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">isEnumCapatible</span><span class="s0">(</span><span class="s2">terms</span><span class="s0">[</span><span class="s2">i </span><span class="s0">- </span><span class="s5">1</span><span class="s0">])) {</span>
                            <span class="s2">map </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">create</span><span class="s0">(</span><span class="s1">null</span><span class="s0">);</span>
                            <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                                <span class="s0">{</span>
                                    <span class="s2">type</span><span class="s0">: </span><span class="s3">'Enum'</span><span class="s0">,</span>
                                    <span class="s2">map</span><span class="s0">: </span><span class="s2">map</span>
                                <span class="s0">},</span>
                                <span class="s2">MATCH</span><span class="s0">,</span>
                                <span class="s2">result</span>
                            <span class="s0">);</span>
                        <span class="s0">}</span>

                        <span class="s1">if </span><span class="s0">(</span><span class="s2">map </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                            <span class="s1">var </span><span class="s2">key </span><span class="s0">= (</span><span class="s2">isFunctionType</span><span class="s0">(</span><span class="s2">term</span><span class="s0">.</span><span class="s2">name</span><span class="s0">) ? </span><span class="s2">term</span><span class="s0">.</span><span class="s2">name</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, -</span><span class="s5">1</span><span class="s0">) : </span><span class="s2">term</span><span class="s0">.</span><span class="s2">name</span><span class="s0">).</span><span class="s2">toLowerCase</span><span class="s0">();</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s2">key </span><span class="s1">in </span><span class="s2">map </span><span class="s0">=== </span><span class="s1">false</span><span class="s0">) {</span>
                                <span class="s2">map</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">term</span><span class="s0">;</span>
                                <span class="s1">continue</span><span class="s0">;</span>
                            <span class="s0">}</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s2">map </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

                    <span class="s4">// create a new conditonal node</span>
                    <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                        <span class="s2">term</span><span class="s0">,</span>
                        <span class="s2">MATCH</span><span class="s0">,</span>
                        <span class="s2">result</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>
                <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'&amp;&amp;'</span><span class="s0">:</span>
                <span class="s4">// A double ampersand (&amp;&amp;) separates two or more components,</span>
                <span class="s4">// all of which must occur, in any order.</span>

                <span class="s4">// Use MatchOnce for groups with a large number of terms,</span>
                <span class="s4">// since &amp;&amp;-groups produces at least N!-node trees</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s5">5</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s0">{</span>
                        <span class="s2">type</span><span class="s0">: </span><span class="s3">'MatchOnce'</span><span class="s0">,</span>
                        <span class="s2">terms</span><span class="s0">: </span><span class="s2">terms</span><span class="s0">,</span>
                        <span class="s2">all</span><span class="s0">: </span><span class="s1">true</span>
                    <span class="s0">};</span>
                <span class="s0">}</span>

                <span class="s4">// Use a combination tree for groups with small number of terms</span>
                <span class="s4">//</span>
                <span class="s4">// a &amp;&amp; b &amp;&amp; c</span>
                <span class="s4">// =</span>
                <span class="s4">// match a</span>
                <span class="s4">//   then [b &amp;&amp; c]</span>
                <span class="s4">//   else match b</span>
                <span class="s4">//     then [a &amp;&amp; c]</span>
                <span class="s4">//     else match c</span>
                <span class="s4">//       then [a &amp;&amp; b]</span>
                <span class="s4">//       else MISMATCH</span>
                <span class="s4">//</span>
                <span class="s4">// a &amp;&amp; b</span>
                <span class="s4">// =</span>
                <span class="s4">// match a</span>
                <span class="s4">//   then match b</span>
                <span class="s4">//     then MATCH</span>
                <span class="s4">//     else MISMATCH</span>
                <span class="s4">//   else match b</span>
                <span class="s4">//     then match a</span>
                <span class="s4">//       then MATCH</span>
                <span class="s4">//       else MISMATCH</span>
                <span class="s4">//     else MISMATCH</span>
                <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s2">MISMATCH</span><span class="s0">;</span>

                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i</span><span class="s0">--) {</span>
                    <span class="s1">var </span><span class="s2">term </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
                    <span class="s1">var </span><span class="s2">thenClause</span><span class="s0">;</span>

                    <span class="s1">if </span><span class="s0">(</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s5">1</span><span class="s0">) {</span>
                        <span class="s2">thenClause </span><span class="s0">= </span><span class="s2">buildGroupMatchGraph</span><span class="s0">(</span>
                            <span class="s2">combinator</span><span class="s0">,</span>
                            <span class="s2">terms</span><span class="s0">.</span><span class="s2">filter</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">newGroupTerm</span><span class="s0">) {</span>
                                <span class="s1">return </span><span class="s2">newGroupTerm </span><span class="s0">!== </span><span class="s2">term</span><span class="s0">;</span>
                            <span class="s0">}),</span>
                            <span class="s1">false</span>
                        <span class="s0">);</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">thenClause </span><span class="s0">= </span><span class="s2">MATCH</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                        <span class="s2">term</span><span class="s0">,</span>
                        <span class="s2">thenClause</span><span class="s0">,</span>
                        <span class="s2">result</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>
                <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'||'</span><span class="s0">:</span>
                <span class="s4">// A double bar (||) separates two or more options:</span>
                <span class="s4">// one or more of them must occur, in any order.</span>

                <span class="s4">// Use MatchOnce for groups with a large number of terms,</span>
                <span class="s4">// since ||-groups produces at least N!-node trees</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s5">5</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s0">{</span>
                        <span class="s2">type</span><span class="s0">: </span><span class="s3">'MatchOnce'</span><span class="s0">,</span>
                        <span class="s2">terms</span><span class="s0">: </span><span class="s2">terms</span><span class="s0">,</span>
                        <span class="s2">all</span><span class="s0">: </span><span class="s1">false</span>
                    <span class="s0">};</span>
                <span class="s0">}</span>

                <span class="s4">// Use a combination tree for groups with small number of terms</span>
                <span class="s4">//</span>
                <span class="s4">// a || b || c</span>
                <span class="s4">// =</span>
                <span class="s4">// match a</span>
                <span class="s4">//   then [b || c]</span>
                <span class="s4">//   else match b</span>
                <span class="s4">//     then [a || c]</span>
                <span class="s4">//     else match c</span>
                <span class="s4">//       then [a || b]</span>
                <span class="s4">//       else MISMATCH</span>
                <span class="s4">//</span>
                <span class="s4">// a || b</span>
                <span class="s4">// =</span>
                <span class="s4">// match a</span>
                <span class="s4">//   then match b</span>
                <span class="s4">//     then MATCH</span>
                <span class="s4">//     else MATCH</span>
                <span class="s4">//   else match b</span>
                <span class="s4">//     then match a</span>
                <span class="s4">//       then MATCH</span>
                <span class="s4">//       else MATCH</span>
                <span class="s4">//     else MISMATCH</span>
                <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s2">atLeastOneTermMatched </span><span class="s0">? </span><span class="s2">MATCH </span><span class="s0">: </span><span class="s2">MISMATCH</span><span class="s0">;</span>

                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i</span><span class="s0">--) {</span>
                    <span class="s1">var </span><span class="s2">term </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
                    <span class="s1">var </span><span class="s2">thenClause</span><span class="s0">;</span>

                    <span class="s1">if </span><span class="s0">(</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s5">1</span><span class="s0">) {</span>
                        <span class="s2">thenClause </span><span class="s0">= </span><span class="s2">buildGroupMatchGraph</span><span class="s0">(</span>
                            <span class="s2">combinator</span><span class="s0">,</span>
                            <span class="s2">terms</span><span class="s0">.</span><span class="s2">filter</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">newGroupTerm</span><span class="s0">) {</span>
                                <span class="s1">return </span><span class="s2">newGroupTerm </span><span class="s0">!== </span><span class="s2">term</span><span class="s0">;</span>
                            <span class="s0">}),</span>
                            <span class="s1">true</span>
                        <span class="s0">);</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">thenClause </span><span class="s0">= </span><span class="s2">MATCH</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                        <span class="s2">term</span><span class="s0">,</span>
                        <span class="s2">thenClause</span><span class="s0">,</span>
                        <span class="s2">result</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>
                <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">buildMultiplierMatchGraph</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s2">MATCH</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">matchTerm </span><span class="s0">= </span><span class="s2">buildMatchGraph</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">term</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">max </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s4">// disable repeating of empty match to prevent infinite loop</span>
            <span class="s2">matchTerm </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                <span class="s2">matchTerm</span><span class="s0">,</span>
                <span class="s2">DISALLOW_EMPTY</span><span class="s0">,</span>
                <span class="s2">MISMATCH</span>
            <span class="s0">);</span>

            <span class="s4">// an occurrence count is not limited, make a cycle;</span>
            <span class="s4">// to collect more terms on each following matching mismatch</span>
            <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                <span class="s2">matchTerm</span><span class="s0">,</span>
                <span class="s1">null</span><span class="s0">, </span><span class="s4">// will be a loop</span>
                <span class="s2">MISMATCH</span>
            <span class="s0">);</span>

            <span class="s2">result</span><span class="s0">.</span><span class="s2">then </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                <span class="s2">MATCH</span><span class="s0">,</span>
                <span class="s2">MATCH</span><span class="s0">,</span>
                <span class="s2">result </span><span class="s4">// make a loop</span>
            <span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">comma</span><span class="s0">) {</span>
                <span class="s2">result</span><span class="s0">.</span><span class="s2">then</span><span class="s0">.</span><span class="s2">else </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                    <span class="s0">{ </span><span class="s2">type</span><span class="s0">: </span><span class="s3">'Comma'</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">: </span><span class="s2">node </span><span class="s0">},</span>
                    <span class="s2">result</span><span class="s0">,</span>
                    <span class="s2">MISMATCH</span>
                <span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s4">// create a match node chain for [min .. max] interval with optional matches</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">min </span><span class="s0">|| </span><span class="s5">1</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt;= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">max</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">comma </span><span class="s0">&amp;&amp; </span><span class="s2">result </span><span class="s0">!== </span><span class="s2">MATCH</span><span class="s0">) {</span>
                    <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                        <span class="s0">{ </span><span class="s2">type</span><span class="s0">: </span><span class="s3">'Comma'</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">: </span><span class="s2">node </span><span class="s0">},</span>
                        <span class="s2">result</span><span class="s0">,</span>
                        <span class="s2">MISMATCH</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                    <span class="s2">matchTerm</span><span class="s0">,</span>
                    <span class="s2">createCondition</span><span class="s0">(</span>
                        <span class="s2">MATCH</span><span class="s0">,</span>
                        <span class="s2">MATCH</span><span class="s0">,</span>
                        <span class="s2">result</span>
                    <span class="s0">),</span>
                    <span class="s2">MISMATCH</span>
                <span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">min </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s4">// allow zero match</span>
            <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                <span class="s2">MATCH</span><span class="s0">,</span>
                <span class="s2">MATCH</span><span class="s0">,</span>
                <span class="s2">result</span>
            <span class="s0">);</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s4">// create a match node chain to collect [0 ... min - 1] required matches</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">min </span><span class="s0">- </span><span class="s5">1</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">comma </span><span class="s0">&amp;&amp; </span><span class="s2">result </span><span class="s0">!== </span><span class="s2">MATCH</span><span class="s0">) {</span>
                    <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                        <span class="s0">{ </span><span class="s2">type</span><span class="s0">: </span><span class="s3">'Comma'</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">: </span><span class="s2">node </span><span class="s0">},</span>
                        <span class="s2">result</span><span class="s0">,</span>
                        <span class="s2">MISMATCH</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                    <span class="s2">matchTerm</span><span class="s0">,</span>
                    <span class="s2">result</span><span class="s0">,</span>
                    <span class="s2">MISMATCH</span>
                <span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">buildMatchGraph</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">node </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Generic'</span><span class="s0">,</span>
                <span class="s2">fn</span><span class="s0">: </span><span class="s2">node</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s1">switch </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
            <span class="s1">case </span><span class="s3">'Group'</span><span class="s0">:</span>
                <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s2">buildGroupMatchGraph</span><span class="s0">(</span>
                    <span class="s2">node</span><span class="s0">.</span><span class="s2">combinator</span><span class="s0">,</span>
                    <span class="s2">node</span><span class="s0">.</span><span class="s2">terms</span><span class="s0">.</span><span class="s2">map</span><span class="s0">(</span><span class="s2">buildMatchGraph</span><span class="s0">),</span>
                    <span class="s1">false</span>
                <span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">disallowEmpty</span><span class="s0">) {</span>
                    <span class="s2">result </span><span class="s0">= </span><span class="s2">createCondition</span><span class="s0">(</span>
                        <span class="s2">result</span><span class="s0">,</span>
                        <span class="s2">DISALLOW_EMPTY</span><span class="s0">,</span>
                        <span class="s2">MISMATCH</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s3">'Multiplier'</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s2">buildMultiplierMatchGraph</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>

            <span class="s1">case </span><span class="s3">'Type'</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s3">'Property'</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">,</span>
                    <span class="s2">name</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">,</span>
                    <span class="s2">syntax</span><span class="s0">: </span><span class="s2">node</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s3">'Keyword'</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">,</span>
                    <span class="s2">name</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">(),</span>
                    <span class="s2">syntax</span><span class="s0">: </span><span class="s2">node</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s3">'AtKeyword'</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">,</span>
                    <span class="s2">name</span><span class="s0">: </span><span class="s3">'@' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">(),</span>
                    <span class="s2">syntax</span><span class="s0">: </span><span class="s2">node</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s3">'Function'</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">,</span>
                    <span class="s2">name</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">() + </span><span class="s3">'('</span><span class="s0">,</span>
                    <span class="s2">syntax</span><span class="s0">: </span><span class="s2">node</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s3">'String'</span><span class="s0">:</span>
                <span class="s4">// convert a one char length String to a Token</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length </span><span class="s0">=== </span><span class="s5">3</span><span class="s0">) {</span>
                    <span class="s1">return </span><span class="s0">{</span>
                        <span class="s2">type</span><span class="s0">: </span><span class="s3">'Token'</span><span class="s0">,</span>
                        <span class="s2">value</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">charAt</span><span class="s0">(</span><span class="s5">1</span><span class="s0">),</span>
                        <span class="s2">syntax</span><span class="s0">: </span><span class="s2">node</span>
                    <span class="s0">};</span>
                <span class="s0">}</span>

                <span class="s4">// otherwise use it as is</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">,</span>
                    <span class="s2">value</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s5">1</span><span class="s0">, </span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">2</span><span class="s0">).</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/\\'/g</span><span class="s0">, </span><span class="s3">'</span><span class="s1">\'</span><span class="s3">'</span><span class="s0">),</span>
                    <span class="s2">syntax</span><span class="s0">: </span><span class="s2">node</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s3">'Token'</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">,</span>
                    <span class="s2">value</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">,</span>
                    <span class="s2">syntax</span><span class="s0">: </span><span class="s2">node</span>
                <span class="s0">};</span>

            <span class="s1">case </span><span class="s3">'Comma'</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">,</span>
                    <span class="s2">syntax</span><span class="s0">: </span><span class="s2">node</span>
                <span class="s0">};</span>

            <span class="s1">default</span><span class="s0">:</span>
                <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Unknown node type:'</span><span class="s0">, </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">matchGraph </span><span class="s0">= {</span>
        <span class="s2">MATCH</span><span class="s0">: </span><span class="s2">MATCH</span><span class="s0">,</span>
        <span class="s2">MISMATCH</span><span class="s0">: </span><span class="s2">MISMATCH</span><span class="s0">,</span>
        <span class="s2">DISALLOW_EMPTY</span><span class="s0">: </span><span class="s2">DISALLOW_EMPTY</span><span class="s0">,</span>
        <span class="s2">buildMatchGraph</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">syntaxTree</span><span class="s0">, </span><span class="s2">ref</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">syntaxTree </span><span class="s0">=== </span><span class="s3">'string'</span><span class="s0">) {</span>
                <span class="s2">syntaxTree </span><span class="s0">= </span><span class="s2">parse_1</span><span class="s0">(</span><span class="s2">syntaxTree</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'MatchGraph'</span><span class="s0">,</span>
                <span class="s2">match</span><span class="s0">: </span><span class="s2">buildMatchGraph</span><span class="s0">(</span><span class="s2">syntaxTree</span><span class="s0">),</span>
                <span class="s2">syntax</span><span class="s0">: </span><span class="s2">ref </span><span class="s0">|| </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">source</span><span class="s0">: </span><span class="s2">syntaxTree</span>
            <span class="s0">};</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">hasOwnProperty$1 </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">MATCH$1 </span><span class="s0">= </span><span class="s2">matchGraph</span><span class="s0">.</span><span class="s2">MATCH</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">MISMATCH$1 </span><span class="s0">= </span><span class="s2">matchGraph</span><span class="s0">.</span><span class="s2">MISMATCH</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DISALLOW_EMPTY$1 </span><span class="s0">= </span><span class="s2">matchGraph</span><span class="s0">.</span><span class="s2">DISALLOW_EMPTY</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$6 </span><span class="s0">= </span><span class="s2">_const</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">STUB </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TOKEN </span><span class="s0">= </span><span class="s5">1</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">OPEN_SYNTAX </span><span class="s0">= </span><span class="s5">2</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">CLOSE_SYNTAX </span><span class="s0">= </span><span class="s5">3</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">EXIT_REASON_MATCH </span><span class="s0">= </span><span class="s3">'Match'</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">EXIT_REASON_MISMATCH </span><span class="s0">= </span><span class="s3">'Mismatch'</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">EXIT_REASON_ITERATION_LIMIT </span><span class="s0">= </span><span class="s3">'Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)'</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">ITERATION_LIMIT </span><span class="s0">= </span><span class="s5">15000</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">totalIterationCount </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">reverseList</span><span class="s0">(</span><span class="s2">list</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">prev </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">next </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">item </span><span class="s0">= </span><span class="s2">list</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">item </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">next </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s2">item</span><span class="s0">.</span><span class="s2">prev </span><span class="s0">= </span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s2">prev </span><span class="s0">= </span><span class="s2">item</span><span class="s0">;</span>
            <span class="s2">item </span><span class="s0">= </span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">prev</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">areStringsEqualCaseInsensitive</span><span class="s0">(</span><span class="s2">testStr</span><span class="s0">, </span><span class="s2">referenceStr</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">testStr</span><span class="s0">.</span><span class="s2">length </span><span class="s0">!== </span><span class="s2">referenceStr</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">testStr</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">testCode </span><span class="s0">= </span><span class="s2">testStr</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">referenceCode </span><span class="s0">= </span><span class="s2">referenceStr</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">);</span>

            <span class="s4">// testCode.toLowerCase() for U+0041 LATIN CAPITAL LETTER A (A) .. U+005A LATIN CAPITAL LETTER Z (Z).</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">testCode </span><span class="s0">&gt;= </span><span class="s5">0x0041 </span><span class="s0">&amp;&amp; </span><span class="s2">testCode </span><span class="s0">&lt;= </span><span class="s5">0x005A</span><span class="s0">) {</span>
                <span class="s2">testCode </span><span class="s0">= </span><span class="s2">testCode </span><span class="s0">| </span><span class="s5">32</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">testCode </span><span class="s0">!== </span><span class="s2">referenceCode</span><span class="s0">) {</span>
                <span class="s1">return false</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return true</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isContextEdgeDelim</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">) {</span>
            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// Fix matching for unicode-range: U+30??, U+FF00-FF9F</span>
        <span class="s4">// Probably we need to check out previous match instead</span>
        <span class="s1">return </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value </span><span class="s0">!== </span><span class="s3">'?'</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isCommaContextStart</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return true</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">(</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">Comma </span><span class="s0">||</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">Function </span><span class="s0">||</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">LeftParenthesis </span><span class="s0">||</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">LeftSquareBracket </span><span class="s0">||</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">LeftCurlyBracket </span><span class="s0">||</span>
            <span class="s2">isContextEdgeDelim</span><span class="s0">(</span><span class="s2">token</span><span class="s0">)</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isCommaContextEnd</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return true</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">(</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">RightParenthesis </span><span class="s0">||</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">RightSquareBracket </span><span class="s0">||</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">RightCurlyBracket </span><span class="s0">||</span>
            <span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">Delim</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">internalMatch</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">, </span><span class="s2">state</span><span class="s0">, </span><span class="s2">syntaxes</span><span class="s0">) {</span>
        <span class="s1">function </span><span class="s2">moveToNextToken</span><span class="s0">() {</span>
            <span class="s1">do </span><span class="s0">{</span>
                <span class="s2">tokenIndex</span><span class="s0">++;</span>
                <span class="s2">token </span><span class="s0">= </span><span class="s2">tokenIndex </span><span class="s0">&lt; </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s2">tokens</span><span class="s0">[</span><span class="s2">tokenIndex</span><span class="s0">] : </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; (</span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">WhiteSpace </span><span class="s0">|| </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">));</span>
        <span class="s0">}</span>

        <span class="s1">function </span><span class="s2">getNextToken</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">nextIndex </span><span class="s0">= </span><span class="s2">tokenIndex </span><span class="s0">+ </span><span class="s2">offset</span><span class="s0">;</span>

            <span class="s1">return </span><span class="s2">nextIndex </span><span class="s0">&lt; </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s2">tokens</span><span class="s0">[</span><span class="s2">nextIndex</span><span class="s0">] : </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">function </span><span class="s2">stateSnapshotFromSyntax</span><span class="s0">(</span><span class="s2">nextState</span><span class="s0">, </span><span class="s2">prev</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">nextState</span><span class="s0">: </span><span class="s2">nextState</span><span class="s0">,</span>
                <span class="s2">matchStack</span><span class="s0">: </span><span class="s2">matchStack</span><span class="s0">,</span>
                <span class="s2">syntaxStack</span><span class="s0">: </span><span class="s2">syntaxStack</span><span class="s0">,</span>
                <span class="s2">thenStack</span><span class="s0">: </span><span class="s2">thenStack</span><span class="s0">,</span>
                <span class="s2">tokenIndex</span><span class="s0">: </span><span class="s2">tokenIndex</span><span class="s0">,</span>
                <span class="s2">prev</span><span class="s0">: </span><span class="s2">prev</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s1">function </span><span class="s2">pushThenStack</span><span class="s0">(</span><span class="s2">nextState</span><span class="s0">) {</span>
            <span class="s2">thenStack </span><span class="s0">= {</span>
                <span class="s2">nextState</span><span class="s0">: </span><span class="s2">nextState</span><span class="s0">,</span>
                <span class="s2">matchStack</span><span class="s0">: </span><span class="s2">matchStack</span><span class="s0">,</span>
                <span class="s2">syntaxStack</span><span class="s0">: </span><span class="s2">syntaxStack</span><span class="s0">,</span>
                <span class="s2">prev</span><span class="s0">: </span><span class="s2">thenStack</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s1">function </span><span class="s2">pushElseStack</span><span class="s0">(</span><span class="s2">nextState</span><span class="s0">) {</span>
            <span class="s2">elseStack </span><span class="s0">= </span><span class="s2">stateSnapshotFromSyntax</span><span class="s0">(</span><span class="s2">nextState</span><span class="s0">, </span><span class="s2">elseStack</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">function </span><span class="s2">addTokenToMatch</span><span class="s0">() {</span>
            <span class="s2">matchStack </span><span class="s0">= {</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s2">TOKEN</span><span class="s0">,</span>
                <span class="s2">syntax</span><span class="s0">: </span><span class="s2">state</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">,</span>
                <span class="s2">token</span><span class="s0">: </span><span class="s2">token</span><span class="s0">,</span>
                <span class="s2">prev</span><span class="s0">: </span><span class="s2">matchStack</span>
            <span class="s0">};</span>

            <span class="s2">moveToNextToken</span><span class="s0">();</span>
            <span class="s2">syntaxStash </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenIndex </span><span class="s0">&gt; </span><span class="s2">longestMatch</span><span class="s0">) {</span>
                <span class="s2">longestMatch </span><span class="s0">= </span><span class="s2">tokenIndex</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">function </span><span class="s2">openSyntax</span><span class="s0">() {</span>
            <span class="s2">syntaxStack </span><span class="s0">= {</span>
                <span class="s2">syntax</span><span class="s0">: </span><span class="s2">state</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">,</span>
                <span class="s2">opts</span><span class="s0">: </span><span class="s2">state</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">opts </span><span class="s0">|| (</span><span class="s2">syntaxStack </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">syntaxStack</span><span class="s0">.</span><span class="s2">opts</span><span class="s0">) || </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">prev</span><span class="s0">: </span><span class="s2">syntaxStack</span>
            <span class="s0">};</span>

            <span class="s2">matchStack </span><span class="s0">= {</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s2">OPEN_SYNTAX</span><span class="s0">,</span>
                <span class="s2">syntax</span><span class="s0">: </span><span class="s2">state</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">,</span>
                <span class="s2">token</span><span class="s0">: </span><span class="s2">matchStack</span><span class="s0">.</span><span class="s2">token</span><span class="s0">,</span>
                <span class="s2">prev</span><span class="s0">: </span><span class="s2">matchStack</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s1">function </span><span class="s2">closeSyntax</span><span class="s0">() {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">matchStack</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">OPEN_SYNTAX</span><span class="s0">) {</span>
                <span class="s2">matchStack </span><span class="s0">= </span><span class="s2">matchStack</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">matchStack </span><span class="s0">= {</span>
                    <span class="s2">type</span><span class="s0">: </span><span class="s2">CLOSE_SYNTAX</span><span class="s0">,</span>
                    <span class="s2">syntax</span><span class="s0">: </span><span class="s2">syntaxStack</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">,</span>
                    <span class="s2">token</span><span class="s0">: </span><span class="s2">matchStack</span><span class="s0">.</span><span class="s2">token</span><span class="s0">,</span>
                    <span class="s2">prev</span><span class="s0">: </span><span class="s2">matchStack</span>
                <span class="s0">};</span>
            <span class="s0">}</span>

            <span class="s2">syntaxStack </span><span class="s0">= </span><span class="s2">syntaxStack</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">syntaxStack </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">thenStack </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">elseStack </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s4">// null – stashing allowed, nothing stashed</span>
        <span class="s4">// false – stashing disabled, nothing stashed</span>
        <span class="s4">// anithing else – fail stashable syntaxes, some syntax stashed</span>
        <span class="s1">var </span><span class="s2">syntaxStash </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">var </span><span class="s2">iterationCount </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s4">// count iterations and prevent infinite loop</span>
        <span class="s1">var </span><span class="s2">exitReason </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">var </span><span class="s2">token </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">tokenIndex </span><span class="s0">= -</span><span class="s5">1</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">longestMatch </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">matchStack </span><span class="s0">= {</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s2">STUB</span><span class="s0">,</span>
            <span class="s2">syntax</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
            <span class="s2">token</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
            <span class="s2">prev</span><span class="s0">: </span><span class="s1">null</span>
        <span class="s0">};</span>

        <span class="s2">moveToNextToken</span><span class="s0">();</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">exitReason </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">&amp;&amp; ++</span><span class="s2">iterationCount </span><span class="s0">&lt; </span><span class="s2">ITERATION_LIMIT</span><span class="s0">) {</span>
            <span class="s4">// function mapList(list, fn) {</span>
            <span class="s4">//     var result = [];</span>
            <span class="s4">//     while (list) {</span>
            <span class="s4">//         result.unshift(fn(list));</span>
            <span class="s4">//         list = list.prev;</span>
            <span class="s4">//     }</span>
            <span class="s4">//     return result;</span>
            <span class="s4">// }</span>
            <span class="s4">// console.log('--\n',</span>
            <span class="s4">//     '#' + iterationCount,</span>
            <span class="s4">//     require('util').inspect({</span>
            <span class="s4">//         match: mapList(matchStack, x =&gt; x.type === TOKEN ? x.token &amp;&amp; x.token.value : x.syntax ? ({ [OPEN_SYNTAX]: '&lt;', [CLOSE_SYNTAX]: '&lt;/' }[x.type] || x.type) + '!' + x.syntax.name : null),</span>
            <span class="s4">//         token: token &amp;&amp; token.value,</span>
            <span class="s4">//         tokenIndex,</span>
            <span class="s4">//         syntax: syntax.type + (syntax.id ? ' #' + syntax.id : '')</span>
            <span class="s4">//     }, { depth: null })</span>
            <span class="s4">// );</span>
            <span class="s1">switch </span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s3">'Match'</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">thenStack </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                        <span class="s4">// turn to MISMATCH when some tokens left unmatched</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                            <span class="s4">// doesn't mismatch if just one token left and it's an IE hack</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenIndex </span><span class="s0">!== </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1 </span><span class="s0">|| (</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value </span><span class="s0">!== </span><span class="s3">'</span><span class="s1">\\</span><span class="s3">0' </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value </span><span class="s0">!== </span><span class="s3">'</span><span class="s1">\\</span><span class="s3">9'</span><span class="s0">)) {</span>
                                <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                                <span class="s1">break</span><span class="s0">;</span>
                            <span class="s0">}</span>
                        <span class="s0">}</span>

                        <span class="s4">// break the main loop, return a result - MATCH</span>
                        <span class="s2">exitReason </span><span class="s0">= </span><span class="s2">EXIT_REASON_MATCH</span><span class="s0">;</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s4">// go to next syntax (`then` branch)</span>
                    <span class="s2">state </span><span class="s0">= </span><span class="s2">thenStack</span><span class="s0">.</span><span class="s2">nextState</span><span class="s0">;</span>

                    <span class="s4">// check match is not empty</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">state </span><span class="s0">=== </span><span class="s2">DISALLOW_EMPTY$1</span><span class="s0">) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">thenStack</span><span class="s0">.</span><span class="s2">matchStack </span><span class="s0">=== </span><span class="s2">matchStack</span><span class="s0">) {</span>
                            <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                            <span class="s1">break</span><span class="s0">;</span>
                        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                            <span class="s2">state </span><span class="s0">= </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s4">// close syntax if needed</span>
                    <span class="s1">while </span><span class="s0">(</span><span class="s2">thenStack</span><span class="s0">.</span><span class="s2">syntaxStack </span><span class="s0">!== </span><span class="s2">syntaxStack</span><span class="s0">) {</span>
                        <span class="s2">closeSyntax</span><span class="s0">();</span>
                    <span class="s0">}</span>

                    <span class="s4">// pop stack</span>
                    <span class="s2">thenStack </span><span class="s0">= </span><span class="s2">thenStack</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Mismatch'</span><span class="s0">:</span>
                    <span class="s4">// when some syntax is stashed</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">syntaxStash </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">syntaxStash </span><span class="s0">!== </span><span class="s1">false</span><span class="s0">) {</span>
                        <span class="s4">// there is no else branches or a branch reduce match stack</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">elseStack </span><span class="s0">=== </span><span class="s1">null </span><span class="s0">|| </span><span class="s2">tokenIndex </span><span class="s0">&gt; </span><span class="s2">elseStack</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">) {</span>
                            <span class="s4">// restore state from the stash</span>
                            <span class="s2">elseStack </span><span class="s0">= </span><span class="s2">syntaxStash</span><span class="s0">;</span>
                            <span class="s2">syntaxStash </span><span class="s0">= </span><span class="s1">false</span><span class="s0">; </span><span class="s4">// disable stashing</span>
                        <span class="s0">}</span>
                    <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">elseStack </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                        <span class="s4">// no else branches -&gt; break the main loop</span>
                        <span class="s4">// return a result - MISMATCH</span>
                        <span class="s2">exitReason </span><span class="s0">= </span><span class="s2">EXIT_REASON_MISMATCH</span><span class="s0">;</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s4">// go to next syntax (`else` branch)</span>
                    <span class="s2">state </span><span class="s0">= </span><span class="s2">elseStack</span><span class="s0">.</span><span class="s2">nextState</span><span class="s0">;</span>

                    <span class="s4">// restore all the rest stack states</span>
                    <span class="s2">thenStack </span><span class="s0">= </span><span class="s2">elseStack</span><span class="s0">.</span><span class="s2">thenStack</span><span class="s0">;</span>
                    <span class="s2">syntaxStack </span><span class="s0">= </span><span class="s2">elseStack</span><span class="s0">.</span><span class="s2">syntaxStack</span><span class="s0">;</span>
                    <span class="s2">matchStack </span><span class="s0">= </span><span class="s2">elseStack</span><span class="s0">.</span><span class="s2">matchStack</span><span class="s0">;</span>
                    <span class="s2">tokenIndex </span><span class="s0">= </span><span class="s2">elseStack</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>
                    <span class="s2">token </span><span class="s0">= </span><span class="s2">tokenIndex </span><span class="s0">&lt; </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s2">tokens</span><span class="s0">[</span><span class="s2">tokenIndex</span><span class="s0">] : </span><span class="s1">null</span><span class="s0">;</span>

                    <span class="s4">// pop stack</span>
                    <span class="s2">elseStack </span><span class="s0">= </span><span class="s2">elseStack</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'MatchGraph'</span><span class="s0">:</span>
                    <span class="s2">state </span><span class="s0">= </span><span class="s2">state</span><span class="s0">.</span><span class="s2">match</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'If'</span><span class="s0">:</span>
                    <span class="s4">// IMPORTANT: else stack push must go first,</span>
                    <span class="s4">// since it stores the state of thenStack before changes</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">else </span><span class="s0">!== </span><span class="s2">MISMATCH$1</span><span class="s0">) {</span>
                        <span class="s2">pushElseStack</span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">else</span><span class="s0">);</span>
                    <span class="s0">}</span>

                    <span class="s1">if </span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">then </span><span class="s0">!== </span><span class="s2">MATCH$1</span><span class="s0">) {</span>
                        <span class="s2">pushThenStack</span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">then</span><span class="s0">);</span>
                    <span class="s0">}</span>

                    <span class="s2">state </span><span class="s0">= </span><span class="s2">state</span><span class="s0">.</span><span class="s2">match</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'MatchOnce'</span><span class="s0">:</span>
                    <span class="s2">state </span><span class="s0">= {</span>
                        <span class="s2">type</span><span class="s0">: </span><span class="s3">'MatchOnceBuffer'</span><span class="s0">,</span>
                        <span class="s2">syntax</span><span class="s0">: </span><span class="s2">state</span><span class="s0">,</span>
                        <span class="s2">index</span><span class="s0">: </span><span class="s5">0</span><span class="s0">,</span>
                        <span class="s2">mask</span><span class="s0">: </span><span class="s5">0</span>
                    <span class="s0">};</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'MatchOnceBuffer'</span><span class="s0">:</span>
                    <span class="s1">var </span><span class="s2">terms </span><span class="s0">= </span><span class="s2">state</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">terms</span><span class="s0">;</span>

                    <span class="s1">if </span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">index </span><span class="s0">=== </span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                        <span class="s4">// no matches at all or it's required all terms to be matched</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">mask </span><span class="s0">=== </span><span class="s5">0 </span><span class="s0">|| </span><span class="s2">state</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">all</span><span class="s0">) {</span>
                            <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                            <span class="s1">break</span><span class="s0">;</span>
                        <span class="s0">}</span>

                        <span class="s4">// a partial match is ok</span>
                        <span class="s2">state </span><span class="s0">= </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s4">// all terms are matched</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">mask </span><span class="s0">=== (</span><span class="s5">1 </span><span class="s0">&lt;&lt; </span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) - </span><span class="s5">1</span><span class="s0">) {</span>
                        <span class="s2">state </span><span class="s0">= </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">for </span><span class="s0">(; </span><span class="s2">state</span><span class="s0">.</span><span class="s2">index </span><span class="s0">&lt; </span><span class="s2">terms</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">state</span><span class="s0">.</span><span class="s2">index</span><span class="s0">++) {</span>
                        <span class="s1">var </span><span class="s2">matchFlag </span><span class="s0">= </span><span class="s5">1 </span><span class="s0">&lt;&lt; </span><span class="s2">state</span><span class="s0">.</span><span class="s2">index</span><span class="s0">;</span>

                        <span class="s1">if </span><span class="s0">((</span><span class="s2">state</span><span class="s0">.</span><span class="s2">mask </span><span class="s0">&amp; </span><span class="s2">matchFlag</span><span class="s0">) === </span><span class="s5">0</span><span class="s0">) {</span>
                            <span class="s4">// IMPORTANT: else stack push must go first,</span>
                            <span class="s4">// since it stores the state of thenStack before changes</span>
                            <span class="s2">pushElseStack</span><span class="s0">(</span><span class="s2">state</span><span class="s0">);</span>
                            <span class="s2">pushThenStack</span><span class="s0">({</span>
                                <span class="s2">type</span><span class="s0">: </span><span class="s3">'AddMatchOnce'</span><span class="s0">,</span>
                                <span class="s2">syntax</span><span class="s0">: </span><span class="s2">state</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">,</span>
                                <span class="s2">mask</span><span class="s0">: </span><span class="s2">state</span><span class="s0">.</span><span class="s2">mask </span><span class="s0">| </span><span class="s2">matchFlag</span>
                            <span class="s0">});</span>

                            <span class="s4">// match</span>
                            <span class="s2">state </span><span class="s0">= </span><span class="s2">terms</span><span class="s0">[</span><span class="s2">state</span><span class="s0">.</span><span class="s2">index</span><span class="s0">++];</span>
                            <span class="s1">break</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'AddMatchOnce'</span><span class="s0">:</span>
                    <span class="s2">state </span><span class="s0">= {</span>
                        <span class="s2">type</span><span class="s0">: </span><span class="s3">'MatchOnceBuffer'</span><span class="s0">,</span>
                        <span class="s2">syntax</span><span class="s0">: </span><span class="s2">state</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">,</span>
                        <span class="s2">index</span><span class="s0">: </span><span class="s5">0</span><span class="s0">,</span>
                        <span class="s2">mask</span><span class="s0">: </span><span class="s2">state</span><span class="s0">.</span><span class="s2">mask</span>
                    <span class="s0">};</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Enum'</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                        <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>

                        <span class="s4">// drop \0 and \9 hack from keyword name</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">name</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s3">'</span><span class="s1">\\</span><span class="s3">'</span><span class="s0">) !== -</span><span class="s5">1</span><span class="s0">) {</span>
                            <span class="s2">name </span><span class="s0">= </span><span class="s2">name</span><span class="s0">.</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/\\[09].*$/</span><span class="s0">, </span><span class="s3">''</span><span class="s0">);</span>
                        <span class="s0">}</span>

                        <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">map</span><span class="s0">, </span><span class="s2">name</span><span class="s0">)) {</span>
                            <span class="s2">state </span><span class="s0">= </span><span class="s2">state</span><span class="s0">.</span><span class="s2">map</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>
                            <span class="s1">break</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Generic'</span><span class="s0">:</span>
                    <span class="s1">var </span><span class="s2">opts </span><span class="s0">= </span><span class="s2">syntaxStack </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">? </span><span class="s2">syntaxStack</span><span class="s0">.</span><span class="s2">opts </span><span class="s0">: </span><span class="s1">null</span><span class="s0">;</span>
                    <span class="s1">var </span><span class="s2">lastTokenIndex </span><span class="s0">= </span><span class="s2">tokenIndex </span><span class="s0">+ </span><span class="s2">Math</span><span class="s0">.</span><span class="s2">floor</span><span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">fn</span><span class="s0">(</span><span class="s2">token</span><span class="s0">, </span><span class="s2">getNextToken</span><span class="s0">, </span><span class="s2">opts</span><span class="s0">));</span>

                    <span class="s1">if </span><span class="s0">(!</span><span class="s2">isNaN</span><span class="s0">(</span><span class="s2">lastTokenIndex</span><span class="s0">) &amp;&amp; </span><span class="s2">lastTokenIndex </span><span class="s0">&gt; </span><span class="s2">tokenIndex</span><span class="s0">) {</span>
                        <span class="s1">while </span><span class="s0">(</span><span class="s2">tokenIndex </span><span class="s0">&lt; </span><span class="s2">lastTokenIndex</span><span class="s0">) {</span>
                            <span class="s2">addTokenToMatch</span><span class="s0">();</span>
                        <span class="s0">}</span>

                        <span class="s2">state </span><span class="s0">= </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Type'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'Property'</span><span class="s0">:</span>
                    <span class="s1">var </span><span class="s2">syntaxDict </span><span class="s0">= </span><span class="s2">state</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Type' </span><span class="s0">? </span><span class="s3">'types' </span><span class="s0">: </span><span class="s3">'properties'</span><span class="s0">;</span>
                    <span class="s1">var </span><span class="s2">dictSyntax </span><span class="s0">= </span><span class="s2">hasOwnProperty$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">syntaxes</span><span class="s0">, </span><span class="s2">syntaxDict</span><span class="s0">) ? </span><span class="s2">syntaxes</span><span class="s0">[</span><span class="s2">syntaxDict</span><span class="s0">][</span><span class="s2">state</span><span class="s0">.</span><span class="s2">name</span><span class="s0">] : </span><span class="s1">null</span><span class="s0">;</span>

                    <span class="s1">if </span><span class="s0">(!</span><span class="s2">dictSyntax </span><span class="s0">|| !</span><span class="s2">dictSyntax</span><span class="s0">.</span><span class="s2">match</span><span class="s0">) {</span>
                        <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span>
                            <span class="s3">'Bad syntax reference: ' </span><span class="s0">+</span>
                            <span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Type'</span>
                                <span class="s0">? </span><span class="s3">'&lt;' </span><span class="s0">+ </span><span class="s2">state</span><span class="s0">.</span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'&gt;'</span>
                                <span class="s0">: </span><span class="s3">'&lt;</span><span class="s1">\'</span><span class="s3">' </span><span class="s0">+ </span><span class="s2">state</span><span class="s0">.</span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'</span><span class="s1">\'</span><span class="s3">&gt;'</span><span class="s0">)</span>
                        <span class="s0">);</span>
                    <span class="s0">}</span>

                    <span class="s4">// stash a syntax for types with low priority</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">syntaxStash </span><span class="s0">!== </span><span class="s1">false </span><span class="s0">&amp;&amp; </span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">state</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Type'</span><span class="s0">) {</span>
                        <span class="s1">var </span><span class="s2">lowPriorityMatching </span><span class="s0">=</span>
                            <span class="s4">// https://drafts.csswg.org/css-values-4/#custom-idents</span>
                            <span class="s4">// When parsing positionally-ambiguous keywords in a property value, a &lt;custom-ident&gt; production</span>
                            <span class="s4">// can only claim the keyword if no other unfulfilled production can claim it.</span>
                            <span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">name </span><span class="s0">=== </span><span class="s3">'custom-ident' </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">) ||</span>

                            <span class="s4">// https://drafts.csswg.org/css-values-4/#lengths</span>
                            <span class="s4">// ... if a `0` could be parsed as either a &lt;number&gt; or a &lt;length&gt; in a property (such as line-height),</span>
                            <span class="s4">// it must parse as a &lt;number&gt;</span>
                            <span class="s0">(</span><span class="s2">state</span><span class="s0">.</span><span class="s2">name </span><span class="s0">=== </span><span class="s3">'length' </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value </span><span class="s0">=== </span><span class="s3">'0'</span><span class="s0">);</span>

                        <span class="s1">if </span><span class="s0">(</span><span class="s2">lowPriorityMatching</span><span class="s0">) {</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s2">syntaxStash </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                                <span class="s2">syntaxStash </span><span class="s0">= </span><span class="s2">stateSnapshotFromSyntax</span><span class="s0">(</span><span class="s2">state</span><span class="s0">, </span><span class="s2">elseStack</span><span class="s0">);</span>
                            <span class="s0">}</span>

                            <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                            <span class="s1">break</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s2">openSyntax</span><span class="s0">();</span>
                    <span class="s2">state </span><span class="s0">= </span><span class="s2">dictSyntax</span><span class="s0">.</span><span class="s2">match</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Keyword'</span><span class="s0">:</span>
                    <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s2">state</span><span class="s0">.</span><span class="s2">name</span><span class="s0">;</span>

                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                        <span class="s1">var </span><span class="s2">keywordName </span><span class="s0">= </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">;</span>

                        <span class="s4">// drop \0 and \9 hack from keyword name</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">keywordName</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s3">'</span><span class="s1">\\</span><span class="s3">'</span><span class="s0">) !== -</span><span class="s5">1</span><span class="s0">) {</span>
                            <span class="s2">keywordName </span><span class="s0">= </span><span class="s2">keywordName</span><span class="s0">.</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/\\[09].*$/</span><span class="s0">, </span><span class="s3">''</span><span class="s0">);</span>
                        <span class="s0">}</span>

                        <span class="s1">if </span><span class="s0">(</span><span class="s2">areStringsEqualCaseInsensitive</span><span class="s0">(</span><span class="s2">keywordName</span><span class="s0">, </span><span class="s2">name</span><span class="s0">)) {</span>
                            <span class="s2">addTokenToMatch</span><span class="s0">();</span>
                            <span class="s2">state </span><span class="s0">= </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                            <span class="s1">break</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'AtKeyword'</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s3">'Function'</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">areStringsEqualCaseInsensitive</span><span class="s0">(</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s2">state</span><span class="s0">.</span><span class="s2">name</span><span class="s0">)) {</span>
                        <span class="s2">addTokenToMatch</span><span class="s0">();</span>
                        <span class="s2">state </span><span class="s0">= </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Token'</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">value </span><span class="s0">=== </span><span class="s2">state</span><span class="s0">.</span><span class="s2">value</span><span class="s0">) {</span>
                        <span class="s2">addTokenToMatch</span><span class="s0">();</span>
                        <span class="s2">state </span><span class="s0">= </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'Comma'</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">token </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">token</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">TYPE$6</span><span class="s0">.</span><span class="s2">Comma</span><span class="s0">) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">isCommaContextStart</span><span class="s0">(</span><span class="s2">matchStack</span><span class="s0">.</span><span class="s2">token</span><span class="s0">)) {</span>
                            <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                            <span class="s2">addTokenToMatch</span><span class="s0">();</span>
                            <span class="s2">state </span><span class="s0">= </span><span class="s2">isCommaContextEnd</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) ? </span><span class="s2">MISMATCH$1 </span><span class="s0">: </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">state </span><span class="s0">= </span><span class="s2">isCommaContextStart</span><span class="s0">(</span><span class="s2">matchStack</span><span class="s0">.</span><span class="s2">token</span><span class="s0">) || </span><span class="s2">isCommaContextEnd</span><span class="s0">(</span><span class="s2">token</span><span class="s0">) ? </span><span class="s2">MATCH$1 </span><span class="s0">: </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s3">'String'</span><span class="s0">:</span>
                    <span class="s1">var </span><span class="s2">string </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>

                    <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">lastTokenIndex </span><span class="s0">= </span><span class="s2">tokenIndex</span><span class="s0">; </span><span class="s2">lastTokenIndex </span><span class="s0">&lt; </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&amp;&amp; </span><span class="s2">string</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&lt; </span><span class="s2">state</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">lastTokenIndex</span><span class="s0">++) {</span>
                        <span class="s2">string </span><span class="s0">+= </span><span class="s2">tokens</span><span class="s0">[</span><span class="s2">lastTokenIndex</span><span class="s0">].</span><span class="s2">value</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">if </span><span class="s0">(</span><span class="s2">areStringsEqualCaseInsensitive</span><span class="s0">(</span><span class="s2">string</span><span class="s0">, </span><span class="s2">state</span><span class="s0">.</span><span class="s2">value</span><span class="s0">)) {</span>
                        <span class="s1">while </span><span class="s0">(</span><span class="s2">tokenIndex </span><span class="s0">&lt; </span><span class="s2">lastTokenIndex</span><span class="s0">) {</span>
                            <span class="s2">addTokenToMatch</span><span class="s0">();</span>
                        <span class="s0">}</span>

                        <span class="s2">state </span><span class="s0">= </span><span class="s2">MATCH$1</span><span class="s0">;</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">state </span><span class="s0">= </span><span class="s2">MISMATCH$1</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Unknown node type: ' </span><span class="s0">+ </span><span class="s2">state</span><span class="s0">.</span><span class="s2">type</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s2">totalIterationCount </span><span class="s0">+= </span><span class="s2">iterationCount</span><span class="s0">;</span>

        <span class="s1">switch </span><span class="s0">(</span><span class="s2">exitReason</span><span class="s0">) {</span>
            <span class="s1">case null</span><span class="s0">:</span>
                <span class="s2">console</span><span class="s0">.</span><span class="s2">warn</span><span class="s0">(</span><span class="s3">'[csstree-match] BREAK after ' </span><span class="s0">+ </span><span class="s2">ITERATION_LIMIT </span><span class="s0">+ </span><span class="s3">' iterations'</span><span class="s0">);</span>
                <span class="s2">exitReason </span><span class="s0">= </span><span class="s2">EXIT_REASON_ITERATION_LIMIT</span><span class="s0">;</span>
                <span class="s2">matchStack </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">EXIT_REASON_MATCH</span><span class="s0">:</span>
                <span class="s1">while </span><span class="s0">(</span><span class="s2">syntaxStack </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                    <span class="s2">closeSyntax</span><span class="s0">();</span>
                <span class="s0">}</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">default</span><span class="s0">:</span>
                <span class="s2">matchStack </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">tokens</span><span class="s0">: </span><span class="s2">tokens</span><span class="s0">,</span>
            <span class="s2">reason</span><span class="s0">: </span><span class="s2">exitReason</span><span class="s0">,</span>
            <span class="s2">iterations</span><span class="s0">: </span><span class="s2">iterationCount</span><span class="s0">,</span>
            <span class="s2">match</span><span class="s0">: </span><span class="s2">matchStack</span><span class="s0">,</span>
            <span class="s2">longestMatch</span><span class="s0">: </span><span class="s2">longestMatch</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">matchAsList</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">, </span><span class="s2">matchGraph</span><span class="s0">, </span><span class="s2">syntaxes</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">matchResult </span><span class="s0">= </span><span class="s2">internalMatch</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">, </span><span class="s2">matchGraph</span><span class="s0">, </span><span class="s2">syntaxes </span><span class="s0">|| {});</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">matchResult</span><span class="s0">.</span><span class="s2">match </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">item </span><span class="s0">= </span><span class="s2">reverseList</span><span class="s0">(</span><span class="s2">matchResult</span><span class="s0">.</span><span class="s2">match</span><span class="s0">).</span><span class="s2">prev</span><span class="s0">;</span>

            <span class="s2">matchResult</span><span class="s0">.</span><span class="s2">match </span><span class="s0">= [];</span>

            <span class="s1">while </span><span class="s0">(</span><span class="s2">item </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">switch </span><span class="s0">(</span><span class="s2">item</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
                    <span class="s1">case </span><span class="s2">STUB</span><span class="s0">:</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">OPEN_SYNTAX</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">CLOSE_SYNTAX</span><span class="s0">:</span>
                        <span class="s2">matchResult</span><span class="s0">.</span><span class="s2">match</span><span class="s0">.</span><span class="s2">push</span><span class="s0">({</span>
                            <span class="s2">type</span><span class="s0">: </span><span class="s2">item</span><span class="s0">.</span><span class="s2">type</span><span class="s0">,</span>
                            <span class="s2">syntax</span><span class="s0">: </span><span class="s2">item</span><span class="s0">.</span><span class="s2">syntax</span>
                        <span class="s0">});</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s2">matchResult</span><span class="s0">.</span><span class="s2">match</span><span class="s0">.</span><span class="s2">push</span><span class="s0">({</span>
                            <span class="s2">token</span><span class="s0">: </span><span class="s2">item</span><span class="s0">.</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">,</span>
                            <span class="s2">node</span><span class="s0">: </span><span class="s2">item</span><span class="s0">.</span><span class="s2">token</span><span class="s0">.</span><span class="s2">node</span>
                        <span class="s0">});</span>
                        <span class="s1">break</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s2">item </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">matchResult</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">matchAsTree</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">, </span><span class="s2">matchGraph</span><span class="s0">, </span><span class="s2">syntaxes</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">matchResult </span><span class="s0">= </span><span class="s2">internalMatch</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">, </span><span class="s2">matchGraph</span><span class="s0">, </span><span class="s2">syntaxes </span><span class="s0">|| {});</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">matchResult</span><span class="s0">.</span><span class="s2">match </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">matchResult</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">item </span><span class="s0">= </span><span class="s2">matchResult</span><span class="s0">.</span><span class="s2">match</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">host </span><span class="s0">= </span><span class="s2">matchResult</span><span class="s0">.</span><span class="s2">match </span><span class="s0">= {</span>
            <span class="s2">syntax</span><span class="s0">: </span><span class="s2">matchGraph</span><span class="s0">.</span><span class="s2">syntax </span><span class="s0">|| </span><span class="s1">null</span><span class="s0">,</span>
            <span class="s2">match</span><span class="s0">: []</span>
        <span class="s0">};</span>
        <span class="s1">var </span><span class="s2">hostStack </span><span class="s0">= [</span><span class="s2">host</span><span class="s0">];</span>

        <span class="s4">// revert a list and start with 2nd item since 1st is a stub item</span>
        <span class="s2">item </span><span class="s0">= </span><span class="s2">reverseList</span><span class="s0">(</span><span class="s2">item</span><span class="s0">).</span><span class="s2">prev</span><span class="s0">;</span>

        <span class="s4">// build a tree</span>
        <span class="s1">while </span><span class="s0">(</span><span class="s2">item </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">switch </span><span class="s0">(</span><span class="s2">item</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s2">OPEN_SYNTAX</span><span class="s0">:</span>
                    <span class="s2">host</span><span class="s0">.</span><span class="s2">match</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">host </span><span class="s0">= {</span>
                        <span class="s2">syntax</span><span class="s0">: </span><span class="s2">item</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">,</span>
                        <span class="s2">match</span><span class="s0">: []</span>
                    <span class="s0">});</span>
                    <span class="s2">hostStack</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">host</span><span class="s0">);</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">CLOSE_SYNTAX</span><span class="s0">:</span>
                    <span class="s2">hostStack</span><span class="s0">.</span><span class="s2">pop</span><span class="s0">();</span>
                    <span class="s2">host </span><span class="s0">= </span><span class="s2">hostStack</span><span class="s0">[</span><span class="s2">hostStack</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">];</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s2">host</span><span class="s0">.</span><span class="s2">match</span><span class="s0">.</span><span class="s2">push</span><span class="s0">({</span>
                        <span class="s2">syntax</span><span class="s0">: </span><span class="s2">item</span><span class="s0">.</span><span class="s2">syntax </span><span class="s0">|| </span><span class="s1">null</span><span class="s0">,</span>
                        <span class="s2">token</span><span class="s0">: </span><span class="s2">item</span><span class="s0">.</span><span class="s2">token</span><span class="s0">.</span><span class="s2">value</span><span class="s0">,</span>
                        <span class="s2">node</span><span class="s0">: </span><span class="s2">item</span><span class="s0">.</span><span class="s2">token</span><span class="s0">.</span><span class="s2">node</span>
                    <span class="s0">});</span>
            <span class="s0">}</span>

            <span class="s2">item </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">prev</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">matchResult</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">match </span><span class="s0">= {</span>
        <span class="s2">matchAsList</span><span class="s0">: </span><span class="s2">matchAsList</span><span class="s0">,</span>
        <span class="s2">matchAsTree</span><span class="s0">: </span><span class="s2">matchAsTree</span><span class="s0">,</span>
        <span class="s2">getTotalIterationCount</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return </span><span class="s2">totalIterationCount</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">function </span><span class="s2">getTrace</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">function </span><span class="s2">shouldPutToTrace</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">syntax </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">return false</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">(</span>
                <span class="s2">syntax</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Type' </span><span class="s0">||</span>
                <span class="s2">syntax</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Property' </span><span class="s0">||</span>
                <span class="s2">syntax</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Keyword'</span>
            <span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">function </span><span class="s2">hasMatch</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">match</span><span class="s0">)) {</span>
                <span class="s4">// use for-loop for better perfomance</span>
                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">match</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">hasMatch</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">match</span><span class="s0">[</span><span class="s2">i</span><span class="s0">])) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">shouldPutToTrace</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">)) {</span>
                            <span class="s2">result</span><span class="s0">.</span><span class="s2">unshift</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">);</span>
                        <span class="s0">}</span>

                        <span class="s1">return true</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">node </span><span class="s0">=== </span><span class="s2">node</span><span class="s0">) {</span>
                <span class="s2">result </span><span class="s0">= </span><span class="s2">shouldPutToTrace</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">)</span>
                    <span class="s0">? [</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">]</span>
                    <span class="s0">: [];</span>

                <span class="s1">return true</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">matched </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">hasMatch</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">matched</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">testNode</span><span class="s0">(</span><span class="s2">match</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s2">fn</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">trace </span><span class="s0">= </span><span class="s2">getTrace</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">match</span><span class="s0">, </span><span class="s2">node</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">trace </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">trace</span><span class="s0">.</span><span class="s2">some</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isType</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">type</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">testNode</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Type' </span><span class="s0">&amp;&amp; </span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">name </span><span class="s0">=== </span><span class="s2">type</span><span class="s0">;</span>
        <span class="s0">});</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isProperty</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">property</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">testNode</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Property' </span><span class="s0">&amp;&amp; </span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">name </span><span class="s0">=== </span><span class="s2">property</span><span class="s0">;</span>
        <span class="s0">});</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isKeyword</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">testNode</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Keyword'</span><span class="s0">;</span>
        <span class="s0">});</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">trace </span><span class="s0">= {</span>
        <span class="s2">getTrace</span><span class="s0">: </span><span class="s2">getTrace</span><span class="s0">,</span>
        <span class="s2">isType</span><span class="s0">: </span><span class="s2">isType</span><span class="s0">,</span>
        <span class="s2">isProperty</span><span class="s0">: </span><span class="s2">isProperty</span><span class="s0">,</span>
        <span class="s2">isKeyword</span><span class="s0">: </span><span class="s2">isKeyword</span>
    <span class="s0">};</span>

    <span class="s1">function </span><span class="s2">getFirstMatchNode</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s3">'node' </span><span class="s1">in </span><span class="s2">matchNode</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">node</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">getFirstMatchNode</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">match</span><span class="s0">[</span><span class="s5">0</span><span class="s0">]);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getLastMatchNode</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s3">'node' </span><span class="s1">in </span><span class="s2">matchNode</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">node</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">getLastMatchNode</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">match</span><span class="s0">[</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">match</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">]);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">matchFragments</span><span class="s0">(</span><span class="s2">lexer</span><span class="s0">, </span><span class="s2">ast</span><span class="s0">, </span><span class="s2">match</span><span class="s0">, </span><span class="s2">type</span><span class="s0">, </span><span class="s2">name</span><span class="s0">) {</span>
        <span class="s1">function </span><span class="s2">findFragments</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">syntax </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp;</span>
                <span class="s2">matchNode</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">type </span><span class="s0">&amp;&amp;</span>
                <span class="s2">matchNode</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">name </span><span class="s0">=== </span><span class="s2">name</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s2">getFirstMatchNode</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">);</span>
                <span class="s1">var </span><span class="s2">end </span><span class="s0">= </span><span class="s2">getLastMatchNode</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">);</span>

                <span class="s2">lexer</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">walk</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">node </span><span class="s0">=== </span><span class="s2">start</span><span class="s0">) {</span>
                        <span class="s1">var </span><span class="s2">nodes </span><span class="s0">= </span><span class="s1">new </span><span class="s2">List_1</span><span class="s0">();</span>

                        <span class="s1">do </span><span class="s0">{</span>
                            <span class="s2">nodes</span><span class="s0">.</span><span class="s2">appendData</span><span class="s0">(</span><span class="s2">item</span><span class="s0">.</span><span class="s2">data</span><span class="s0">);</span>

                            <span class="s1">if </span><span class="s0">(</span><span class="s2">item</span><span class="s0">.</span><span class="s2">data </span><span class="s0">=== </span><span class="s2">end</span><span class="s0">) {</span>
                                <span class="s1">break</span><span class="s0">;</span>
                            <span class="s0">}</span>

                            <span class="s2">item </span><span class="s0">= </span><span class="s2">item</span><span class="s0">.</span><span class="s2">next</span><span class="s0">;</span>
                        <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">item </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">);</span>

                        <span class="s2">fragments</span><span class="s0">.</span><span class="s2">push</span><span class="s0">({</span>
                            <span class="s2">parent</span><span class="s0">: </span><span class="s2">list</span><span class="s0">,</span>
                            <span class="s2">nodes</span><span class="s0">: </span><span class="s2">nodes</span>
                        <span class="s0">});</span>
                    <span class="s0">}</span>
                <span class="s0">});</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">matchNode</span><span class="s0">.</span><span class="s2">match</span><span class="s0">)) {</span>
                <span class="s2">matchNode</span><span class="s0">.</span><span class="s2">match</span><span class="s0">.</span><span class="s2">forEach</span><span class="s0">(</span><span class="s2">findFragments</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">fragments </span><span class="s0">= [];</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">match</span><span class="s0">.</span><span class="s2">matched </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">findFragments</span><span class="s0">(</span><span class="s2">match</span><span class="s0">.</span><span class="s2">matched</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">fragments</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">search </span><span class="s0">= {</span>
        <span class="s2">matchFragments</span><span class="s0">: </span><span class="s2">matchFragments</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">hasOwnProperty$2 </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">isValidNumber</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
        <span class="s4">// Number.isInteger(value) &amp;&amp; value &gt;= 0</span>
        <span class="s1">return </span><span class="s0">(</span>
            <span class="s1">typeof </span><span class="s2">value </span><span class="s0">=== </span><span class="s3">'number' </span><span class="s0">&amp;&amp;</span>
            <span class="s2">isFinite</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) &amp;&amp;</span>
            <span class="s2">Math</span><span class="s0">.</span><span class="s2">floor</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) === </span><span class="s2">value </span><span class="s0">&amp;&amp;</span>
            <span class="s2">value </span><span class="s0">&gt;= </span><span class="s5">0</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isValidLocation</span><span class="s0">(</span><span class="s2">loc</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">(</span>
            <span class="s2">Boolean</span><span class="s0">(</span><span class="s2">loc</span><span class="s0">) &amp;&amp;</span>
            <span class="s2">isValidNumber</span><span class="s0">(</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">offset</span><span class="s0">) &amp;&amp;</span>
            <span class="s2">isValidNumber</span><span class="s0">(</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">line</span><span class="s0">) &amp;&amp;</span>
            <span class="s2">isValidNumber</span><span class="s0">(</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">column</span><span class="s0">)</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">createNodeStructureChecker</span><span class="s0">(</span><span class="s2">type</span><span class="s0">, </span><span class="s2">fields</span><span class="s0">) {</span>
        <span class="s1">return function </span><span class="s2">checkNode</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">warn</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">node </span><span class="s0">|| </span><span class="s2">node</span><span class="s0">.</span><span class="s2">constructor </span><span class="s0">!== </span><span class="s2">Object</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">warn</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s3">'Type of node should be an Object'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in </span><span class="s2">node</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">valid </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$2</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">key</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
                    <span class="s1">continue</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">key </span><span class="s0">=== </span><span class="s3">'type'</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">type</span><span class="s0">) {</span>
                        <span class="s2">warn</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s3">'Wrong node type `' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">+ </span><span class="s3">'`, expected `' </span><span class="s0">+ </span><span class="s2">type </span><span class="s0">+ </span><span class="s3">'`'</span><span class="s0">);</span>
                    <span class="s0">}</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">key </span><span class="s0">=== </span><span class="s3">'loc'</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                        <span class="s1">continue</span><span class="s0">;</span>
                    <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">constructor </span><span class="s0">=== </span><span class="s2">Object</span><span class="s0">) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">source </span><span class="s0">!== </span><span class="s3">'string'</span><span class="s0">) {</span>
                            <span class="s2">key </span><span class="s0">+= </span><span class="s3">'.source'</span><span class="s0">;</span>
                        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(!</span><span class="s2">isValidLocation</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">start</span><span class="s0">)) {</span>
                            <span class="s2">key </span><span class="s0">+= </span><span class="s3">'.start'</span><span class="s0">;</span>
                        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(!</span><span class="s2">isValidLocation</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">end</span><span class="s0">)) {</span>
                            <span class="s2">key </span><span class="s0">+= </span><span class="s3">'.end'</span><span class="s0">;</span>
                        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                            <span class="s1">continue</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s2">valid </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">fields</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">key</span><span class="s0">)) {</span>
                    <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">, </span><span class="s2">valid </span><span class="s0">= </span><span class="s1">false</span><span class="s0">; !</span><span class="s2">valid </span><span class="s0">&amp;&amp; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">fields</span><span class="s0">[</span><span class="s2">key</span><span class="s0">].</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                        <span class="s1">var </span><span class="s2">fieldType </span><span class="s0">= </span><span class="s2">fields</span><span class="s0">[</span><span class="s2">key</span><span class="s0">][</span><span class="s2">i</span><span class="s0">];</span>

                        <span class="s1">switch </span><span class="s0">(</span><span class="s2">fieldType</span><span class="s0">) {</span>
                            <span class="s1">case </span><span class="s2">String</span><span class="s0">:</span>
                                <span class="s2">valid </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">node</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] === </span><span class="s3">'string'</span><span class="s0">;</span>
                                <span class="s1">break</span><span class="s0">;</span>

                            <span class="s1">case </span><span class="s2">Boolean</span><span class="s0">:</span>
                                <span class="s2">valid </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">node</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] === </span><span class="s3">'boolean'</span><span class="s0">;</span>
                                <span class="s1">break</span><span class="s0">;</span>

                            <span class="s1">case null</span><span class="s0">:</span>
                                <span class="s2">valid </span><span class="s0">= </span><span class="s2">node</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] === </span><span class="s1">null</span><span class="s0">;</span>
                                <span class="s1">break</span><span class="s0">;</span>

                            <span class="s1">default</span><span class="s0">:</span>
                                <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">fieldType </span><span class="s0">=== </span><span class="s3">'string'</span><span class="s0">) {</span>
                                    <span class="s2">valid </span><span class="s0">= </span><span class="s2">node</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] &amp;&amp; </span><span class="s2">node</span><span class="s0">[</span><span class="s2">key</span><span class="s0">].</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">fieldType</span><span class="s0">;</span>
                                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">fieldType</span><span class="s0">)) {</span>
                                    <span class="s2">valid </span><span class="s0">= </span><span class="s2">node</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] </span><span class="s1">instanceof </span><span class="s2">List_1</span><span class="s0">;</span>
                                <span class="s0">}</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">warn</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s3">'Unknown field `' </span><span class="s0">+ </span><span class="s2">key </span><span class="s0">+ </span><span class="s3">'` for ' </span><span class="s0">+ </span><span class="s2">type </span><span class="s0">+ </span><span class="s3">' node type'</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(!</span><span class="s2">valid</span><span class="s0">) {</span>
                    <span class="s2">warn</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s3">'Bad value for `' </span><span class="s0">+ </span><span class="s2">type </span><span class="s0">+ </span><span class="s3">'.' </span><span class="s0">+ </span><span class="s2">key </span><span class="s0">+ </span><span class="s3">'`'</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in </span><span class="s2">fields</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$2</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">fields</span><span class="s0">, </span><span class="s2">key</span><span class="s0">) &amp;&amp;</span>
                    <span class="s2">hasOwnProperty$2</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">key</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
                    <span class="s2">warn</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s3">'Field `' </span><span class="s0">+ </span><span class="s2">type </span><span class="s0">+ </span><span class="s3">'.' </span><span class="s0">+ </span><span class="s2">key </span><span class="s0">+ </span><span class="s3">'` is missed'</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">processStructure</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">nodeType</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">structure </span><span class="s0">= </span><span class="s2">nodeType</span><span class="s0">.</span><span class="s2">structure</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">fields </span><span class="s0">= {</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">loc</span><span class="s0">: </span><span class="s1">true</span>
        <span class="s0">};</span>
        <span class="s1">var </span><span class="s2">docs </span><span class="s0">= {</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'&quot;' </span><span class="s0">+ </span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'&quot;'</span>
        <span class="s0">};</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in </span><span class="s2">structure</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$2</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">structure</span><span class="s0">, </span><span class="s2">key</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
                <span class="s1">continue</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">docsTypes </span><span class="s0">= [];</span>
            <span class="s1">var </span><span class="s2">fieldTypes </span><span class="s0">= </span><span class="s2">fields</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">structure</span><span class="s0">[</span><span class="s2">key</span><span class="s0">])</span>
                <span class="s0">? </span><span class="s2">structure</span><span class="s0">[</span><span class="s2">key</span><span class="s0">].</span><span class="s2">slice</span><span class="s0">()</span>
                <span class="s0">: [</span><span class="s2">structure</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]];</span>

            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">fieldTypes</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">var </span><span class="s2">fieldType </span><span class="s0">= </span><span class="s2">fieldTypes</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">fieldType </span><span class="s0">=== </span><span class="s2">String </span><span class="s0">|| </span><span class="s2">fieldType </span><span class="s0">=== </span><span class="s2">Boolean</span><span class="s0">) {</span>
                    <span class="s2">docsTypes</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">fieldType</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">fieldType </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                    <span class="s2">docsTypes</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s3">'null'</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">fieldType </span><span class="s0">=== </span><span class="s3">'string'</span><span class="s0">) {</span>
                    <span class="s2">docsTypes</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s3">'&lt;' </span><span class="s0">+ </span><span class="s2">fieldType </span><span class="s0">+ </span><span class="s3">'&gt;'</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">fieldType</span><span class="s0">)) {</span>
                    <span class="s2">docsTypes</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s3">'List'</span><span class="s0">); </span><span class="s4">// TODO: use type enum</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Wrong value `' </span><span class="s0">+ </span><span class="s2">fieldType </span><span class="s0">+ </span><span class="s3">'` in `' </span><span class="s0">+ </span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'.' </span><span class="s0">+ </span><span class="s2">key </span><span class="s0">+ </span><span class="s3">'` structure definition'</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s2">docs</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">docsTypes</span><span class="s0">.</span><span class="s2">join</span><span class="s0">(</span><span class="s3">' | '</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">docs</span><span class="s0">: </span><span class="s2">docs</span><span class="s0">,</span>
            <span class="s2">check</span><span class="s0">: </span><span class="s2">createNodeStructureChecker</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">fields</span><span class="s0">)</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">structure </span><span class="s0">= {</span>
        <span class="s2">getStructureFromConfig</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">structure </span><span class="s0">= {};</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">) {</span>
                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$2</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">, </span><span class="s2">name</span><span class="s0">)) {</span>
                        <span class="s1">var </span><span class="s2">nodeType </span><span class="s0">= </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>

                        <span class="s1">if </span><span class="s0">(</span><span class="s2">nodeType</span><span class="s0">.</span><span class="s2">structure</span><span class="s0">) {</span>
                            <span class="s2">structure</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">processStructure</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">nodeType</span><span class="s0">);</span>
                        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                            <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Missed `structure` field in `' </span><span class="s0">+ </span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'` node type definition'</span><span class="s0">);</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">structure</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">SyntaxReferenceError$1 </span><span class="s0">= </span><span class="s2">error</span><span class="s0">.</span><span class="s2">SyntaxReferenceError</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SyntaxMatchError$1 </span><span class="s0">= </span><span class="s2">error</span><span class="s0">.</span><span class="s2">SyntaxMatchError</span><span class="s0">;</span>






    <span class="s1">var </span><span class="s2">buildMatchGraph$1 </span><span class="s0">= </span><span class="s2">matchGraph</span><span class="s0">.</span><span class="s2">buildMatchGraph</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">matchAsTree$1 </span><span class="s0">= </span><span class="s2">match</span><span class="s0">.</span><span class="s2">matchAsTree</span><span class="s0">;</span>


    <span class="s1">var </span><span class="s2">getStructureFromConfig </span><span class="s0">= </span><span class="s2">structure</span><span class="s0">.</span><span class="s2">getStructureFromConfig</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">cssWideKeywords$1 </span><span class="s0">= </span><span class="s2">buildMatchGraph$1</span><span class="s0">(</span><span class="s3">'inherit | initial | unset'</span><span class="s0">);</span>
    <span class="s1">var </span><span class="s2">cssWideKeywordsWithExpression </span><span class="s0">= </span><span class="s2">buildMatchGraph$1</span><span class="s0">(</span><span class="s3">'inherit | initial | unset | &lt;-ms-legacy-expression&gt;'</span><span class="s0">);</span>

    <span class="s1">function </span><span class="s2">dumpMapSyntax</span><span class="s0">(</span><span class="s2">map</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">, </span><span class="s2">syntaxAsAst</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= {};</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">map</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">map</span><span class="s0">[</span><span class="s2">name</span><span class="s0">].</span><span class="s2">syntax</span><span class="s0">) {</span>
                <span class="s2">result</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">syntaxAsAst</span>
                    <span class="s0">? </span><span class="s2">map</span><span class="s0">[</span><span class="s2">name</span><span class="s0">].</span><span class="s2">syntax</span>
                    <span class="s0">: </span><span class="s2">generate_1</span><span class="s0">(</span><span class="s2">map</span><span class="s0">[</span><span class="s2">name</span><span class="s0">].</span><span class="s2">syntax</span><span class="s0">, { </span><span class="s2">compact</span><span class="s0">: </span><span class="s2">compact </span><span class="s0">});</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">dumpAtruleMapSyntax</span><span class="s0">(</span><span class="s2">map</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">, </span><span class="s2">syntaxAsAst</span><span class="s0">) {</span>
        <span class="s1">const </span><span class="s2">result </span><span class="s0">= {};</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">const </span><span class="s0">[</span><span class="s2">name</span><span class="s0">, </span><span class="s2">atrule</span><span class="s0">] </span><span class="s2">of Object</span><span class="s0">.</span><span class="s2">entries</span><span class="s0">(</span><span class="s2">map</span><span class="s0">)) {</span>
            <span class="s2">result</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = {</span>
                <span class="s2">prelude</span><span class="s0">: </span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">prelude </span><span class="s0">&amp;&amp; (</span>
                    <span class="s2">syntaxAsAst</span>
                        <span class="s0">? </span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">prelude</span><span class="s0">.</span><span class="s2">syntax</span>
                        <span class="s0">: </span><span class="s2">generate_1</span><span class="s0">(</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">prelude</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">, { </span><span class="s2">compact </span><span class="s0">})</span>
                <span class="s0">),</span>
                <span class="s2">descriptors</span><span class="s0">: </span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">descriptors </span><span class="s0">&amp;&amp; </span><span class="s2">dumpMapSyntax</span><span class="s0">(</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">descriptors</span><span class="s0">, </span><span class="s2">compact</span><span class="s0">, </span><span class="s2">syntaxAsAst</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">valueHasVar</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">tokens</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">[</span><span class="s2">i</span><span class="s0">].</span><span class="s2">value</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">() === </span><span class="s3">'var('</span><span class="s0">) {</span>
                <span class="s1">return true</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return false</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s2">match</span><span class="s0">, </span><span class="s2">error</span><span class="s0">, </span><span class="s2">iterations</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">matched</span><span class="s0">: </span><span class="s2">match</span><span class="s0">,</span>
            <span class="s2">iterations</span><span class="s0">: </span><span class="s2">iterations</span><span class="s0">,</span>
            <span class="s2">error</span><span class="s0">: </span><span class="s2">error</span><span class="s0">,</span>
            <span class="s2">getTrace</span><span class="s0">: </span><span class="s2">trace</span><span class="s0">.</span><span class="s2">getTrace</span><span class="s0">,</span>
            <span class="s2">isType</span><span class="s0">: </span><span class="s2">trace</span><span class="s0">.</span><span class="s2">isType</span><span class="s0">,</span>
            <span class="s2">isProperty</span><span class="s0">: </span><span class="s2">trace</span><span class="s0">.</span><span class="s2">isProperty</span><span class="s0">,</span>
            <span class="s2">isKeyword</span><span class="s0">: </span><span class="s2">trace</span><span class="s0">.</span><span class="s2">isKeyword</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">matchSyntax</span><span class="s0">(</span><span class="s2">lexer</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">value</span><span class="s0">, </span><span class="s2">useCommon</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">tokens </span><span class="s0">= </span><span class="s2">prepareTokens_1</span><span class="s0">(</span><span class="s2">value</span><span class="s0">, </span><span class="s2">lexer</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">result</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">valueHasVar</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">)) {</span>
            <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s1">new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Matching for a tree with var() is not supported'</span><span class="s0">));</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">useCommon</span><span class="s0">) {</span>
            <span class="s2">result </span><span class="s0">= </span><span class="s2">matchAsTree$1</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">, </span><span class="s2">lexer</span><span class="s0">.</span><span class="s2">valueCommonSyntax</span><span class="s0">, </span><span class="s2">lexer</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(!</span><span class="s2">useCommon </span><span class="s0">|| !</span><span class="s2">result</span><span class="s0">.</span><span class="s2">match</span><span class="s0">) {</span>
            <span class="s2">result </span><span class="s0">= </span><span class="s2">matchAsTree$1</span><span class="s0">(</span><span class="s2">tokens</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">match</span><span class="s0">, </span><span class="s2">lexer</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">result</span><span class="s0">.</span><span class="s2">match</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span>
                    <span class="s1">null</span><span class="s0">,</span>
                    <span class="s1">new </span><span class="s2">SyntaxMatchError$1</span><span class="s0">(</span><span class="s2">result</span><span class="s0">.</span><span class="s2">reason</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">value</span><span class="s0">, </span><span class="s2">result</span><span class="s0">),</span>
                    <span class="s2">result</span><span class="s0">.</span><span class="s2">iterations</span>
                <span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s2">result</span><span class="s0">.</span><span class="s2">match</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s2">result</span><span class="s0">.</span><span class="s2">iterations</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">Lexer </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">config</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">structure</span><span class="s0">) {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">valueCommonSyntax </span><span class="s0">= </span><span class="s2">cssWideKeywords$1</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">syntax </span><span class="s0">= </span><span class="s2">syntax</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">generic </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">atrules </span><span class="s0">= {};</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">properties </span><span class="s0">= {};</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">types </span><span class="s0">= {};</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">structure </span><span class="s0">= </span><span class="s2">structure </span><span class="s0">|| </span><span class="s2">getStructureFromConfig</span><span class="s0">(</span><span class="s2">config</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">types</span><span class="s0">) {</span>
                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">types</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">addType_</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">config</span><span class="s0">.</span><span class="s2">types</span><span class="s0">[</span><span class="s2">name</span><span class="s0">]);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">generic</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">generic </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">generic</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">addType_</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">generic</span><span class="s0">[</span><span class="s2">name</span><span class="s0">]);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">) {</span>
                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">addAtrule_</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">config</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">[</span><span class="s2">name</span><span class="s0">]);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">) {</span>
                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">addProperty_</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">config</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">[</span><span class="s2">name</span><span class="s0">]);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s2">Lexer</span><span class="s0">.</span><span class="s2">prototype </span><span class="s0">= {</span>
        <span class="s2">structure</span><span class="s0">: {},</span>
        <span class="s2">checkStructure</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">) {</span>
            <span class="s1">function </span><span class="s2">collectWarning</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">message</span><span class="s0">) {</span>
                <span class="s2">warns</span><span class="s0">.</span><span class="s2">push</span><span class="s0">({</span>
                    <span class="s2">node</span><span class="s0">: </span><span class="s2">node</span><span class="s0">,</span>
                    <span class="s2">message</span><span class="s0">: </span><span class="s2">message</span>
                <span class="s0">});</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">structure </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">structure</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">warns </span><span class="s0">= [];</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">walk</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">structure</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">)) {</span>
                    <span class="s2">structure</span><span class="s0">[</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">].</span><span class="s2">check</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">collectWarning</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">collectWarning</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s3">'Unknown node type `' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">+ </span><span class="s3">'`'</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">});</span>

            <span class="s1">return </span><span class="s2">warns</span><span class="s0">.</span><span class="s2">length </span><span class="s0">? </span><span class="s2">warns </span><span class="s0">: </span><span class="s1">false</span><span class="s0">;</span>
        <span class="s0">},</span>

        <span class="s2">createDescriptor</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">type</span><span class="s0">, </span><span class="s2">name</span><span class="s0">, </span><span class="s2">parent </span><span class="s0">= </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">ref </span><span class="s0">= {</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s2">type</span><span class="s0">,</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span>
            <span class="s0">};</span>
            <span class="s1">var </span><span class="s2">descriptor </span><span class="s0">= {</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s2">type</span><span class="s0">,</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
                <span class="s2">parent</span><span class="s0">: </span><span class="s2">parent</span><span class="s0">,</span>
                <span class="s2">syntax</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">match</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">};</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">syntax </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
                <span class="s2">descriptor</span><span class="s0">.</span><span class="s2">match </span><span class="s0">= </span><span class="s2">buildMatchGraph$1</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">ref</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">syntax </span><span class="s0">=== </span><span class="s3">'string'</span><span class="s0">) {</span>
                    <span class="s4">// lazy parsing on first access</span>
                    <span class="s2">Object</span><span class="s0">.</span><span class="s2">defineProperty</span><span class="s0">(</span><span class="s2">descriptor</span><span class="s0">, </span><span class="s3">'syntax'</span><span class="s0">, {</span>
                        <span class="s2">get</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                            <span class="s2">Object</span><span class="s0">.</span><span class="s2">defineProperty</span><span class="s0">(</span><span class="s2">descriptor</span><span class="s0">, </span><span class="s3">'syntax'</span><span class="s0">, {</span>
                                <span class="s2">value</span><span class="s0">: </span><span class="s2">parse_1</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">)</span>
                            <span class="s0">});</span>

                            <span class="s1">return </span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">});</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">descriptor</span><span class="s0">.</span><span class="s2">syntax </span><span class="s0">= </span><span class="s2">syntax</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s4">// lazy graph build on first access</span>
                <span class="s2">Object</span><span class="s0">.</span><span class="s2">defineProperty</span><span class="s0">(</span><span class="s2">descriptor</span><span class="s0">, </span><span class="s3">'match'</span><span class="s0">, {</span>
                    <span class="s2">get</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                        <span class="s2">Object</span><span class="s0">.</span><span class="s2">defineProperty</span><span class="s0">(</span><span class="s2">descriptor</span><span class="s0">, </span><span class="s3">'match'</span><span class="s0">, {</span>
                            <span class="s2">value</span><span class="s0">: </span><span class="s2">buildMatchGraph$1</span><span class="s0">(</span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">ref</span><span class="s0">)</span>
                        <span class="s0">});</span>

                        <span class="s1">return </span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">match</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">});</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">descriptor</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">addAtrule_</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">syntax</span><span class="s0">) {</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = {</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Atrule'</span><span class="s0">,</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
                <span class="s2">prelude</span><span class="s0">: </span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">prelude </span><span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createDescriptor</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">prelude</span><span class="s0">, </span><span class="s3">'AtrulePrelude'</span><span class="s0">, </span><span class="s2">name</span><span class="s0">) : </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">descriptors</span><span class="s0">: </span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">descriptors</span>
                    <span class="s0">? </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">descriptors</span><span class="s0">).</span><span class="s2">reduce</span><span class="s0">((</span><span class="s2">res</span><span class="s0">, </span><span class="s2">descName</span><span class="s0">) =&gt; {</span>
                        <span class="s2">res</span><span class="s0">[</span><span class="s2">descName</span><span class="s0">] = </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createDescriptor</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">descriptors</span><span class="s0">[</span><span class="s2">descName</span><span class="s0">], </span><span class="s3">'AtruleDescriptor'</span><span class="s0">, </span><span class="s2">descName</span><span class="s0">, </span><span class="s2">name</span><span class="s0">);</span>
                        <span class="s1">return </span><span class="s2">res</span><span class="s0">;</span>
                    <span class="s0">}, {})</span>
                    <span class="s0">: </span><span class="s1">null</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">addProperty_</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">syntax</span><span class="s0">) {</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createDescriptor</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">, </span><span class="s3">'Property'</span><span class="s0">, </span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">addType_</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">syntax</span><span class="s0">) {</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">types</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createDescriptor</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">, </span><span class="s3">'Type'</span><span class="s0">, </span><span class="s2">name</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">syntax </span><span class="s0">=== </span><span class="s2">generic</span><span class="s0">[</span><span class="s3">'-ms-legacy-expression'</span><span class="s0">]) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">valueCommonSyntax </span><span class="s0">= </span><span class="s2">cssWideKeywordsWithExpression</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">},</span>

        <span class="s2">checkAtruleName</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">getAtrule</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">)) {</span>
                <span class="s1">return new </span><span class="s2">SyntaxReferenceError$1</span><span class="s0">(</span><span class="s3">'Unknown at-rule'</span><span class="s0">, </span><span class="s3">'@' </span><span class="s0">+ </span><span class="s2">atruleName</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">checkAtrulePrelude</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">prelude</span><span class="s0">) {</span>
            <span class="s1">let </span><span class="s2">error </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">checkAtruleName</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">error</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">error</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">atrule </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getAtrule</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">prelude </span><span class="s0">&amp;&amp; </span><span class="s2">prelude</span><span class="s0">) {</span>
                <span class="s1">return new </span><span class="s2">SyntaxError</span><span class="s0">(</span><span class="s3">'At-rule `@' </span><span class="s0">+ </span><span class="s2">atruleName </span><span class="s0">+ </span><span class="s3">'` should not contain a prelude'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">prelude </span><span class="s0">&amp;&amp; !</span><span class="s2">prelude</span><span class="s0">) {</span>
                <span class="s1">return new </span><span class="s2">SyntaxError</span><span class="s0">(</span><span class="s3">'At-rule `@' </span><span class="s0">+ </span><span class="s2">atruleName </span><span class="s0">+ </span><span class="s3">'` should contain a prelude'</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">checkAtruleDescriptorName</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">descriptorName</span><span class="s0">) {</span>
            <span class="s1">let </span><span class="s2">error </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">checkAtruleName</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">error</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">error</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">atrule </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getAtrule</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">descriptor </span><span class="s0">= </span><span class="s2">names</span><span class="s0">.</span><span class="s2">keyword</span><span class="s0">(</span><span class="s2">descriptorName</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">descriptors</span><span class="s0">) {</span>
                <span class="s1">return new </span><span class="s2">SyntaxError</span><span class="s0">(</span><span class="s3">'At-rule `@' </span><span class="s0">+ </span><span class="s2">atruleName </span><span class="s0">+ </span><span class="s3">'` has no known descriptors'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">descriptors</span><span class="s0">[</span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">name</span><span class="s0">] &amp;&amp;</span>
                <span class="s0">!</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">descriptors</span><span class="s0">[</span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">basename</span><span class="s0">]) {</span>
                <span class="s1">return new </span><span class="s2">SyntaxReferenceError$1</span><span class="s0">(</span><span class="s3">'Unknown at-rule descriptor'</span><span class="s0">, </span><span class="s2">descriptorName</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">checkPropertyName</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">property </span><span class="s0">= </span><span class="s2">names</span><span class="s0">.</span><span class="s2">property</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">);</span>

            <span class="s4">// don't match syntax for a custom property</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">property</span><span class="s0">.</span><span class="s2">custom</span><span class="s0">) {</span>
                <span class="s1">return new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Lexer matching doesn</span><span class="s1">\'</span><span class="s3">t applicable for custom properties'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">getProperty</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">)) {</span>
                <span class="s1">return new </span><span class="s2">SyntaxReferenceError$1</span><span class="s0">(</span><span class="s3">'Unknown property'</span><span class="s0">, </span><span class="s2">propertyName</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>

        <span class="s2">matchAtrulePrelude</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">prelude</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">error </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">checkAtrulePrelude</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">prelude</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">error</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s2">error</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">prelude</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">matchSyntax</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getAtrule</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">).</span><span class="s2">prelude</span><span class="s0">, </span><span class="s2">prelude</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">matchAtruleDescriptor</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">descriptorName</span><span class="s0">, </span><span class="s2">value</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">error </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">checkAtruleDescriptorName</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">descriptorName</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">error</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s2">error</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">atrule </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getAtrule</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">descriptor </span><span class="s0">= </span><span class="s2">names</span><span class="s0">.</span><span class="s2">keyword</span><span class="s0">(</span><span class="s2">descriptorName</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s2">matchSyntax</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">descriptors</span><span class="s0">[</span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">name</span><span class="s0">] || </span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">descriptors</span><span class="s0">[</span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">basename</span><span class="s0">], </span><span class="s2">value</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">matchDeclaration</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s3">'Declaration'</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s1">new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Not a Declaration node'</span><span class="s0">));</span>
            <span class="s0">}</span>

            <span class="s1">return this</span><span class="s0">.</span><span class="s2">matchProperty</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">property</span><span class="s0">, </span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">matchProperty</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">, </span><span class="s2">value</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">error </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">checkPropertyName</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">error</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s2">error</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">matchSyntax</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getProperty</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">), </span><span class="s2">value</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">matchType</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">typeName</span><span class="s0">, </span><span class="s2">value</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">typeSyntax </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getType</span><span class="s0">(</span><span class="s2">typeName</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">typeSyntax</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s1">new </span><span class="s2">SyntaxReferenceError$1</span><span class="s0">(</span><span class="s3">'Unknown type'</span><span class="s0">, </span><span class="s2">typeName</span><span class="s0">));</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">matchSyntax</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">typeSyntax</span><span class="s0">, </span><span class="s2">value</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">match</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">value</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">syntax </span><span class="s0">!== </span><span class="s3">'string' </span><span class="s0">&amp;&amp; (!</span><span class="s2">syntax </span><span class="s0">|| !</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">type</span><span class="s0">)) {</span>
                <span class="s1">return </span><span class="s2">buildMatchResult</span><span class="s0">(</span><span class="s1">null</span><span class="s0">, </span><span class="s1">new </span><span class="s2">SyntaxReferenceError$1</span><span class="s0">(</span><span class="s3">'Bad syntax'</span><span class="s0">));</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">syntax </span><span class="s0">=== </span><span class="s3">'string' </span><span class="s0">|| !</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">match</span><span class="s0">) {</span>
                <span class="s2">syntax </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createDescriptor</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">, </span><span class="s3">'Type'</span><span class="s0">, </span><span class="s3">'anonymous'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">matchSyntax</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">value</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>
        <span class="s0">},</span>

        <span class="s2">findValueFragments</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">, </span><span class="s2">value</span><span class="s0">, </span><span class="s2">type</span><span class="s0">, </span><span class="s2">name</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">search</span><span class="s0">.</span><span class="s2">matchFragments</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">value</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">matchProperty</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">, </span><span class="s2">value</span><span class="s0">), </span><span class="s2">type</span><span class="s0">, </span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">findDeclarationValueFragments</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">declaration</span><span class="s0">, </span><span class="s2">type</span><span class="s0">, </span><span class="s2">name</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">search</span><span class="s0">.</span><span class="s2">matchFragments</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">declaration</span><span class="s0">.</span><span class="s2">value</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">matchDeclaration</span><span class="s0">(</span><span class="s2">declaration</span><span class="s0">), </span><span class="s2">type</span><span class="s0">, </span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">findAllFragments</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, </span><span class="s2">type</span><span class="s0">, </span><span class="s2">name</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">result </span><span class="s0">= [];</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">walk</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, {</span>
                <span class="s2">visit</span><span class="s0">: </span><span class="s3">'Declaration'</span><span class="s0">,</span>
                <span class="s2">enter</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">declaration</span><span class="s0">) {</span>
                    <span class="s2">result</span><span class="s0">.</span><span class="s2">push</span><span class="s0">.</span><span class="s2">apply</span><span class="s0">(</span><span class="s2">result</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">findDeclarationValueFragments</span><span class="s0">(</span><span class="s2">declaration</span><span class="s0">, </span><span class="s2">type</span><span class="s0">, </span><span class="s2">name</span><span class="s0">));</span>
                <span class="s0">}.</span><span class="s2">bind</span><span class="s0">(</span><span class="s1">this</span><span class="s0">)</span>
            <span class="s0">});</span>

            <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
        <span class="s0">},</span>

        <span class="s2">getAtrule</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">fallbackBasename </span><span class="s0">= </span><span class="s1">true</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">atrule </span><span class="s0">= </span><span class="s2">names</span><span class="s0">.</span><span class="s2">keyword</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">atruleEntry </span><span class="s0">= </span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">vendor </span><span class="s0">&amp;&amp; </span><span class="s2">fallbackBasename</span>
                <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">[</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">name</span><span class="s0">] || </span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">[</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">basename</span><span class="s0">]</span>
                <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">[</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">name</span><span class="s0">];</span>

            <span class="s1">return </span><span class="s2">atruleEntry </span><span class="s0">|| </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">getAtrulePrelude</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">fallbackBasename </span><span class="s0">= </span><span class="s1">true</span><span class="s0">) {</span>
            <span class="s1">const </span><span class="s2">atrule </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getAtrule</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">fallbackBasename</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s2">atrule </span><span class="s0">&amp;&amp; </span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">prelude </span><span class="s0">|| </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">getAtruleDescriptor</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">, </span><span class="s2">name</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">atruleName</span><span class="s0">) &amp;&amp; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">.</span><span class="s2">declarators</span>
                <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">[</span><span class="s2">atruleName</span><span class="s0">].</span><span class="s2">declarators</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] || </span><span class="s1">null</span>
                <span class="s0">: </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">getProperty</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">, </span><span class="s2">fallbackBasename </span><span class="s0">= </span><span class="s1">true</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">property </span><span class="s0">= </span><span class="s2">names</span><span class="s0">.</span><span class="s2">property</span><span class="s0">(</span><span class="s2">propertyName</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">propertyEntry </span><span class="s0">= </span><span class="s2">property</span><span class="s0">.</span><span class="s2">vendor </span><span class="s0">&amp;&amp; </span><span class="s2">fallbackBasename</span>
                <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">[</span><span class="s2">property</span><span class="s0">.</span><span class="s2">name</span><span class="s0">] || </span><span class="s1">this</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">[</span><span class="s2">property</span><span class="s0">.</span><span class="s2">basename</span><span class="s0">]</span>
                <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">[</span><span class="s2">property</span><span class="s0">.</span><span class="s2">name</span><span class="s0">];</span>

            <span class="s1">return </span><span class="s2">propertyEntry </span><span class="s0">|| </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">getType</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">types</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) ? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">types</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] : </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s0">},</span>

        <span class="s2">validate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">function </span><span class="s2">validate</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">name</span><span class="s0">, </span><span class="s2">broken</span><span class="s0">, </span><span class="s2">descriptor</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">broken</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">name</span><span class="s0">)) {</span>
                    <span class="s1">return </span><span class="s2">broken</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>
                <span class="s0">}</span>

                <span class="s2">broken</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s1">false</span><span class="s0">;</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">syntax </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                    <span class="s2">walk</span><span class="s0">(</span><span class="s2">descriptor</span><span class="s0">.</span><span class="s2">syntax</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s3">'Type' </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s3">'Property'</span><span class="s0">) {</span>
                            <span class="s1">return</span><span class="s0">;</span>
                        <span class="s0">}</span>

                        <span class="s1">var </span><span class="s2">map </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Type' </span><span class="s0">? </span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">types </span><span class="s0">: </span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">;</span>
                        <span class="s1">var </span><span class="s2">brokenMap </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Type' </span><span class="s0">? </span><span class="s2">brokenTypes </span><span class="s0">: </span><span class="s2">brokenProperties</span><span class="s0">;</span>

                        <span class="s1">if </span><span class="s0">(!</span><span class="s2">map</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">) || </span><span class="s2">validate</span><span class="s0">(</span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">, </span><span class="s2">brokenMap</span><span class="s0">, </span><span class="s2">map</span><span class="s0">[</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">])) {</span>
                            <span class="s2">broken</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s1">true</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">}, </span><span class="s1">this</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">brokenTypes </span><span class="s0">= {};</span>
            <span class="s1">var </span><span class="s2">brokenProperties </span><span class="s0">= {};</span>

            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in this</span><span class="s0">.</span><span class="s2">types</span><span class="s0">) {</span>
                <span class="s2">validate</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">key</span><span class="s0">, </span><span class="s2">brokenTypes</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">types</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
            <span class="s0">}</span>

            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in this</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">) {</span>
                <span class="s2">validate</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">key</span><span class="s0">, </span><span class="s2">brokenProperties</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
            <span class="s0">}</span>

            <span class="s2">brokenTypes </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">brokenTypes</span><span class="s0">).</span><span class="s2">filter</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">brokenTypes</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>
            <span class="s0">});</span>
            <span class="s2">brokenProperties </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">brokenProperties</span><span class="s0">).</span><span class="s2">filter</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">brokenProperties</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>
            <span class="s0">});</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">brokenTypes</span><span class="s0">.</span><span class="s2">length </span><span class="s0">|| </span><span class="s2">brokenProperties</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s0">{</span>
                    <span class="s2">types</span><span class="s0">: </span><span class="s2">brokenTypes</span><span class="s0">,</span>
                    <span class="s2">properties</span><span class="s0">: </span><span class="s2">brokenProperties</span>
                <span class="s0">};</span>
            <span class="s0">}</span>

            <span class="s1">return null</span><span class="s0">;</span>
        <span class="s0">},</span>
        <span class="s2">dump</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">syntaxAsAst</span><span class="s0">, </span><span class="s2">pretty</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">generic</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">generic</span><span class="s0">,</span>
                <span class="s2">types</span><span class="s0">: </span><span class="s2">dumpMapSyntax</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">types</span><span class="s0">, !</span><span class="s2">pretty</span><span class="s0">, </span><span class="s2">syntaxAsAst</span><span class="s0">),</span>
                <span class="s2">properties</span><span class="s0">: </span><span class="s2">dumpMapSyntax</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">, !</span><span class="s2">pretty</span><span class="s0">, </span><span class="s2">syntaxAsAst</span><span class="s0">),</span>
                <span class="s2">atrules</span><span class="s0">: </span><span class="s2">dumpAtruleMapSyntax</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">, !</span><span class="s2">pretty</span><span class="s0">, </span><span class="s2">syntaxAsAst</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">toString</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return </span><span class="s2">JSON</span><span class="s0">.</span><span class="s2">stringify</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">dump</span><span class="s0">());</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">Lexer_1 </span><span class="s0">= </span><span class="s2">Lexer</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">definitionSyntax </span><span class="s0">= {</span>
        <span class="s2">SyntaxError</span><span class="s0">: </span><span class="s2">_SyntaxError$1</span><span class="s0">,</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s2">parse_1</span><span class="s0">,</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s2">generate_1</span><span class="s0">,</span>
        <span class="s2">walk</span><span class="s0">: </span><span class="s2">walk</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">isBOM$2 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isBOM</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">N$3 </span><span class="s0">= </span><span class="s5">10</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">F$2 </span><span class="s0">= </span><span class="s5">12</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">R$2 </span><span class="s0">= </span><span class="s5">13</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">computeLinesAndColumns</span><span class="s0">(</span><span class="s2">host</span><span class="s0">, </span><span class="s2">source</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">sourceLength </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">lines </span><span class="s0">= </span><span class="s2">adoptBuffer</span><span class="s0">(</span><span class="s2">host</span><span class="s0">.</span><span class="s2">lines</span><span class="s0">, </span><span class="s2">sourceLength</span><span class="s0">); </span><span class="s4">// +1</span>
        <span class="s1">var </span><span class="s2">line </span><span class="s0">= </span><span class="s2">host</span><span class="s0">.</span><span class="s2">startLine</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">columns </span><span class="s0">= </span><span class="s2">adoptBuffer</span><span class="s0">(</span><span class="s2">host</span><span class="s0">.</span><span class="s2">columns</span><span class="s0">, </span><span class="s2">sourceLength</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">column </span><span class="s0">= </span><span class="s2">host</span><span class="s0">.</span><span class="s2">startColumn</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">startOffset </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">length </span><span class="s0">&gt; </span><span class="s5">0 </span><span class="s0">? </span><span class="s2">isBOM$2</span><span class="s0">(</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">)) : </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">startOffset</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">sourceLength</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) { </span><span class="s4">// -1</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">);</span>

            <span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">line</span><span class="s0">;</span>
            <span class="s2">columns</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">column</span><span class="s0">++;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s2">N$3 </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">R$2 </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">F$2</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s2">R$2 </span><span class="s0">&amp;&amp; </span><span class="s2">i </span><span class="s0">+ </span><span class="s5">1 </span><span class="s0">&lt; </span><span class="s2">sourceLength </span><span class="s0">&amp;&amp; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) === </span><span class="s2">N$3</span><span class="s0">) {</span>
                    <span class="s2">i</span><span class="s0">++;</span>
                    <span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">line</span><span class="s0">;</span>
                    <span class="s2">columns</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">column</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s2">line</span><span class="s0">++;</span>
                <span class="s2">column </span><span class="s0">= </span><span class="s5">1</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s2">lines</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">line</span><span class="s0">;</span>
        <span class="s2">columns</span><span class="s0">[</span><span class="s2">i</span><span class="s0">] = </span><span class="s2">column</span><span class="s0">;</span>

        <span class="s2">host</span><span class="s0">.</span><span class="s2">lines </span><span class="s0">= </span><span class="s2">lines</span><span class="s0">;</span>
        <span class="s2">host</span><span class="s0">.</span><span class="s2">columns </span><span class="s0">= </span><span class="s2">columns</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">OffsetToLocation </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">lines </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">columns </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">linesAndColumnsComputed </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s2">OffsetToLocation</span><span class="s0">.</span><span class="s2">prototype </span><span class="s0">= {</span>
        <span class="s2">setSource</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">startOffset</span><span class="s0">, </span><span class="s2">startLine</span><span class="s0">, </span><span class="s2">startColumn</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">source </span><span class="s0">= </span><span class="s2">source</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">startOffset </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">startOffset </span><span class="s0">=== </span><span class="s3">'undefined' </span><span class="s0">? </span><span class="s5">0 </span><span class="s0">: </span><span class="s2">startOffset</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">startLine </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">startLine </span><span class="s0">=== </span><span class="s3">'undefined' </span><span class="s0">? </span><span class="s5">1 </span><span class="s0">: </span><span class="s2">startLine</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">startColumn </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">startColumn </span><span class="s0">=== </span><span class="s3">'undefined' </span><span class="s0">? </span><span class="s5">1 </span><span class="s0">: </span><span class="s2">startColumn</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">linesAndColumnsComputed </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
        <span class="s0">},</span>

        <span class="s2">ensureLinesAndColumnsComputed</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">linesAndColumnsComputed</span><span class="s0">) {</span>
                <span class="s2">computeLinesAndColumns</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">source</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">linesAndColumnsComputed </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">getLocation</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">, </span><span class="s2">filename</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">ensureLinesAndColumnsComputed</span><span class="s0">();</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">source</span><span class="s0">: </span><span class="s2">filename</span><span class="s0">,</span>
                <span class="s2">offset</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">startOffset </span><span class="s0">+ </span><span class="s2">offset</span><span class="s0">,</span>
                <span class="s2">line</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">lines</span><span class="s0">[</span><span class="s2">offset</span><span class="s0">],</span>
                <span class="s2">column</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">columns</span><span class="s0">[</span><span class="s2">offset</span><span class="s0">]</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">getLocationRange</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">, </span><span class="s2">filename</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">ensureLinesAndColumnsComputed</span><span class="s0">();</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">source</span><span class="s0">: </span><span class="s2">filename</span><span class="s0">,</span>
                <span class="s2">start</span><span class="s0">: {</span>
                    <span class="s2">offset</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">startOffset </span><span class="s0">+ </span><span class="s2">start</span><span class="s0">,</span>
                    <span class="s2">line</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">lines</span><span class="s0">[</span><span class="s2">start</span><span class="s0">],</span>
                    <span class="s2">column</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">columns</span><span class="s0">[</span><span class="s2">start</span><span class="s0">]</span>
                <span class="s0">},</span>
                <span class="s2">end</span><span class="s0">: {</span>
                    <span class="s2">offset</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">startOffset </span><span class="s0">+ </span><span class="s2">end</span><span class="s0">,</span>
                    <span class="s2">line</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">lines</span><span class="s0">[</span><span class="s2">end</span><span class="s0">],</span>
                    <span class="s2">column</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">columns</span><span class="s0">[</span><span class="s2">end</span><span class="s0">]</span>
                <span class="s0">}</span>
            <span class="s0">};</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">OffsetToLocation_1 </span><span class="s0">= </span><span class="s2">OffsetToLocation</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">TYPE$7 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">WHITESPACE$2 </span><span class="s0">= </span><span class="s2">TYPE$7</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$2 </span><span class="s0">= </span><span class="s2">TYPE$7</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">sequence </span><span class="s0">= </span><span class="s1">function </span><span class="s2">readSequence</span><span class="s0">(</span><span class="s2">recognizer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>
        <span class="s1">var </span><span class="s2">child </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">context </span><span class="s0">= {</span>
            <span class="s2">recognizer</span><span class="s0">: </span><span class="s2">recognizer</span><span class="s0">,</span>
            <span class="s2">space</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
            <span class="s2">ignoreWS</span><span class="s0">: </span><span class="s1">false</span><span class="s0">,</span>
            <span class="s2">ignoreWSAfter</span><span class="s0">: </span><span class="s1">false</span>
        <span class="s0">};</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

        <span class="s1">while </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
            <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s2">COMMENT$2</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s1">continue</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">WHITESPACE$2</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">context</span><span class="s0">.</span><span class="s2">ignoreWS</span><span class="s0">) {</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">context</span><span class="s0">.</span><span class="s2">space </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">();</span>
                    <span class="s0">}</span>
                    <span class="s1">continue</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">child </span><span class="s0">= </span><span class="s2">recognizer</span><span class="s0">.</span><span class="s2">getNode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">context</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">child </span><span class="s0">=== </span><span class="s2">undefined</span><span class="s0">) {</span>
                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">context</span><span class="s0">.</span><span class="s2">space </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">context</span><span class="s0">.</span><span class="s2">space</span><span class="s0">);</span>
                <span class="s2">context</span><span class="s0">.</span><span class="s2">space </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">child</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">context</span><span class="s0">.</span><span class="s2">ignoreWSAfter</span><span class="s0">) {</span>
                <span class="s2">context</span><span class="s0">.</span><span class="s2">ignoreWSAfter </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
                <span class="s2">context</span><span class="s0">.</span><span class="s2">ignoreWS </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">context</span><span class="s0">.</span><span class="s2">ignoreWS </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">children</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s0">{ </span><span class="s2">findWhiteSpaceStart</span><span class="s0">: </span><span class="s2">findWhiteSpaceStart$1</span><span class="s0">, </span><span class="s2">cmpStr</span><span class="s0">: </span><span class="s2">cmpStr$4 </span><span class="s0">} = </span><span class="s2">utils</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">noop$2 </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {};</span>

    <span class="s1">var </span><span class="s2">TYPE$8 </span><span class="s0">= </span><span class="s2">_const</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NAME$2 </span><span class="s0">= </span><span class="s2">_const</span><span class="s0">.</span><span class="s2">NAME</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">WHITESPACE$3 </span><span class="s0">= </span><span class="s2">TYPE$8</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$3 </span><span class="s0">= </span><span class="s2">TYPE$8</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">IDENT$2 </span><span class="s0">= </span><span class="s2">TYPE$8</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">FUNCTION </span><span class="s0">= </span><span class="s2">TYPE$8</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">URL </span><span class="s0">= </span><span class="s2">TYPE$8</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">HASH </span><span class="s0">= </span><span class="s2">TYPE$8</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">PERCENTAGE </span><span class="s0">= </span><span class="s2">TYPE$8</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBER$2 </span><span class="s0">= </span><span class="s2">TYPE$8</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBERSIGN$1 </span><span class="s0">= </span><span class="s5">0x0023</span><span class="s0">; </span><span class="s4">// U+0023 NUMBER SIGN (#)</span>
    <span class="s1">var </span><span class="s2">NULL </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">createParseContext</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) {</span>
        <span class="s1">return function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">[</span><span class="s2">name</span><span class="s0">]();</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">processConfig</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">parserConfig </span><span class="s0">= {</span>
            <span class="s2">context</span><span class="s0">: {},</span>
            <span class="s2">scope</span><span class="s0">: {},</span>
            <span class="s2">atrule</span><span class="s0">: {},</span>
            <span class="s2">pseudo</span><span class="s0">: {}</span>
        <span class="s0">};</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">parseContext</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">parseContext</span><span class="s0">) {</span>
                <span class="s1">switch </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">config</span><span class="s0">.</span><span class="s2">parseContext</span><span class="s0">[</span><span class="s2">name</span><span class="s0">]) {</span>
                    <span class="s1">case </span><span class="s3">'function'</span><span class="s0">:</span>
                        <span class="s2">parserConfig</span><span class="s0">.</span><span class="s2">context</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">config</span><span class="s0">.</span><span class="s2">parseContext</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s3">'string'</span><span class="s0">:</span>
                        <span class="s2">parserConfig</span><span class="s0">.</span><span class="s2">context</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">createParseContext</span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">parseContext</span><span class="s0">[</span><span class="s2">name</span><span class="s0">]);</span>
                        <span class="s1">break</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">) {</span>
                <span class="s2">parserConfig</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">config</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">atrule </span><span class="s0">= </span><span class="s2">config</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">parse</span><span class="s0">) {</span>
                    <span class="s2">parserConfig</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">parse</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">pseudo</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">pseudo</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">pseudo </span><span class="s0">= </span><span class="s2">config</span><span class="s0">.</span><span class="s2">pseudo</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">pseudo</span><span class="s0">.</span><span class="s2">parse</span><span class="s0">) {</span>
                    <span class="s2">parserConfig</span><span class="s0">.</span><span class="s2">pseudo</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">pseudo</span><span class="s0">.</span><span class="s2">parse</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">) {</span>
                <span class="s2">parserConfig</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">[</span><span class="s2">name</span><span class="s0">].</span><span class="s2">parse</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">parserConfig</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">create </span><span class="s0">= </span><span class="s1">function </span><span class="s2">createParser</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">parser </span><span class="s0">= {</span>
            <span class="s2">scanner</span><span class="s0">: </span><span class="s1">new </span><span class="s2">TokenStream_1</span><span class="s0">(),</span>
            <span class="s2">locationMap</span><span class="s0">: </span><span class="s1">new </span><span class="s2">OffsetToLocation_1</span><span class="s0">(),</span>

            <span class="s2">filename</span><span class="s0">: </span><span class="s3">'&lt;unknown&gt;'</span><span class="s0">,</span>
            <span class="s2">needPositions</span><span class="s0">: </span><span class="s1">false</span><span class="s0">,</span>
            <span class="s2">onParseError</span><span class="s0">: </span><span class="s2">noop$2</span><span class="s0">,</span>
            <span class="s2">onParseErrorThrow</span><span class="s0">: </span><span class="s1">false</span><span class="s0">,</span>
            <span class="s2">parseAtrulePrelude</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
            <span class="s2">parseRulePrelude</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
            <span class="s2">parseValue</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
            <span class="s2">parseCustomProperty</span><span class="s0">: </span><span class="s1">false</span><span class="s0">,</span>

            <span class="s2">readSequence</span><span class="s0">: </span><span class="s2">sequence</span><span class="s0">,</span>

            <span class="s2">createList</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return new </span><span class="s2">List_1</span><span class="s0">();</span>
            <span class="s0">},</span>
            <span class="s2">createSingleNodeList</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
                <span class="s1">return new </span><span class="s2">List_1</span><span class="s0">().</span><span class="s2">appendData</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
            <span class="s0">},</span>
            <span class="s2">getFirstListNode</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">list</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">list </span><span class="s0">&amp;&amp; </span><span class="s2">list</span><span class="s0">.</span><span class="s2">first</span><span class="s0">();</span>
            <span class="s0">},</span>
            <span class="s2">getLastListNode</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">list</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">list</span><span class="s0">.</span><span class="s2">last</span><span class="s0">();</span>
            <span class="s0">},</span>

            <span class="s2">parseWithFallback</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">consumer</span><span class="s0">, </span><span class="s2">fallback</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">startToken </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>

                <span class="s1">try </span><span class="s0">{</span>
                    <span class="s1">return </span><span class="s2">consumer</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">catch </span><span class="s0">(</span><span class="s2">e</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">onParseErrorThrow</span><span class="s0">) {</span>
                        <span class="s1">throw </span><span class="s2">e</span><span class="s0">;</span>
                    <span class="s0">}</span>

                    <span class="s1">var </span><span class="s2">fallbackNode </span><span class="s0">= </span><span class="s2">fallback</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">startToken</span><span class="s0">);</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">onParseErrorThrow </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">onParseError</span><span class="s0">(</span><span class="s2">e</span><span class="s0">, </span><span class="s2">fallbackNode</span><span class="s0">);</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">onParseErrorThrow </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>

                    <span class="s1">return </span><span class="s2">fallbackNode</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">},</span>

            <span class="s2">lookupNonWSType</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) {</span>
                <span class="s1">do </span><span class="s0">{</span>
                    <span class="s1">var </span><span class="s2">type </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">++);</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">WHITESPACE$3</span><span class="s0">) {</span>
                        <span class="s1">return </span><span class="s2">type</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">NULL</span><span class="s0">);</span>

                <span class="s1">return </span><span class="s2">NULL</span><span class="s0">;</span>
            <span class="s0">},</span>

            <span class="s2">eat</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">tokenType</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">tokenType</span><span class="s0">) {</span>
                    <span class="s1">var </span><span class="s2">offset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
                    <span class="s1">var </span><span class="s2">message </span><span class="s0">= </span><span class="s2">NAME$2</span><span class="s0">[</span><span class="s2">tokenType</span><span class="s0">] + </span><span class="s3">' is expected'</span><span class="s0">;</span>

                    <span class="s4">// tweak message and offset</span>
                    <span class="s1">switch </span><span class="s0">(</span><span class="s2">tokenType</span><span class="s0">) {</span>
                        <span class="s1">case </span><span class="s2">IDENT$2</span><span class="s0">:</span>
                            <span class="s4">// when identifier is expected but there is a function or url</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">FUNCTION </span><span class="s0">|| </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">URL</span><span class="s0">) {</span>
                                <span class="s2">offset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd </span><span class="s0">- </span><span class="s5">1</span><span class="s0">;</span>
                                <span class="s2">message </span><span class="s0">= </span><span class="s3">'Identifier is expected but function found'</span><span class="s0">;</span>
                            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                                <span class="s2">message </span><span class="s0">= </span><span class="s3">'Identifier is expected'</span><span class="s0">;</span>
                            <span class="s0">}</span>
                            <span class="s1">break</span><span class="s0">;</span>

                        <span class="s1">case </span><span class="s2">HASH</span><span class="s0">:</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">NUMBERSIGN$1</span><span class="s0">)) {</span>
                                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                                <span class="s2">offset</span><span class="s0">++;</span>
                                <span class="s2">message </span><span class="s0">= </span><span class="s3">'Name is expected'</span><span class="s0">;</span>
                            <span class="s0">}</span>
                            <span class="s1">break</span><span class="s0">;</span>

                        <span class="s1">case </span><span class="s2">PERCENTAGE</span><span class="s0">:</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">NUMBER$2</span><span class="s0">) {</span>
                                <span class="s2">offset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">;</span>
                                <span class="s2">message </span><span class="s0">= </span><span class="s3">'Percent sign is expected'</span><span class="s0">;</span>
                            <span class="s0">}</span>
                            <span class="s1">break</span><span class="s0">;</span>

                        <span class="s1">default</span><span class="s0">:</span>
                            <span class="s4">// when test type is part of another token show error for current position + 1</span>
                            <span class="s4">// e.g. eat(HYPHENMINUS) will fail on &quot;-foo&quot;, but pointing on &quot;-&quot; is odd</span>
                            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">) === </span><span class="s2">tokenType</span><span class="s0">) {</span>
                                <span class="s2">offset </span><span class="s0">= </span><span class="s2">offset </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">;</span>
                            <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s2">message</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
            <span class="s0">},</span>

            <span class="s2">consume</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">tokenType</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">getTokenValue</span><span class="s0">();</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">tokenType</span><span class="s0">);</span>

                <span class="s1">return </span><span class="s2">value</span><span class="s0">;</span>
            <span class="s0">},</span>
            <span class="s2">consumeFunctionName</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd </span><span class="s0">- </span><span class="s5">1</span><span class="s0">);</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">FUNCTION</span><span class="s0">);</span>

                <span class="s1">return </span><span class="s2">name</span><span class="s0">;</span>
            <span class="s0">},</span>

            <span class="s2">getLocation</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">needPositions</span><span class="s0">) {</span>
                    <span class="s1">return this</span><span class="s0">.</span><span class="s2">locationMap</span><span class="s0">.</span><span class="s2">getLocationRange</span><span class="s0">(</span>
                        <span class="s2">start</span><span class="s0">,</span>
                        <span class="s2">end</span><span class="s0">,</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">filename</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">return null</span><span class="s0">;</span>
            <span class="s0">},</span>
            <span class="s2">getLocationFromList</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">list</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">needPositions</span><span class="s0">) {</span>
                    <span class="s1">var </span><span class="s2">head </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getFirstListNode</span><span class="s0">(</span><span class="s2">list</span><span class="s0">);</span>
                    <span class="s1">var </span><span class="s2">tail </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLastListNode</span><span class="s0">(</span><span class="s2">list</span><span class="s0">);</span>
                    <span class="s1">return this</span><span class="s0">.</span><span class="s2">locationMap</span><span class="s0">.</span><span class="s2">getLocationRange</span><span class="s0">(</span>
                        <span class="s2">head </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">? </span><span class="s2">head</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">start</span><span class="s0">.</span><span class="s2">offset </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">locationMap</span><span class="s0">.</span><span class="s2">startOffset </span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">,</span>
                        <span class="s2">tail </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">? </span><span class="s2">tail</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">end</span><span class="s0">.</span><span class="s2">offset </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">locationMap</span><span class="s0">.</span><span class="s2">startOffset </span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">,</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">filename</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">return null</span><span class="s0">;</span>
            <span class="s0">},</span>

            <span class="s2">error</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">message</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">location </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">offset </span><span class="s0">!== </span><span class="s3">'undefined' </span><span class="s0">&amp;&amp; </span><span class="s2">offset </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">length</span>
                    <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">locationMap</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">)</span>
                    <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span>
                        <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">locationMap</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">findWhiteSpaceStart$1</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">))</span>
                        <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">locationMap</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">);</span>

                <span class="s1">throw new </span><span class="s2">_SyntaxError</span><span class="s0">(</span>
                    <span class="s2">message </span><span class="s0">|| </span><span class="s3">'Unexpected input'</span><span class="s0">,</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">,</span>
                    <span class="s2">location</span><span class="s0">.</span><span class="s2">offset</span><span class="s0">,</span>
                    <span class="s2">location</span><span class="s0">.</span><span class="s2">line</span><span class="s0">,</span>
                    <span class="s2">location</span><span class="s0">.</span><span class="s2">column</span>
                <span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">};</span>

        <span class="s2">config </span><span class="s0">= </span><span class="s2">processConfig</span><span class="s0">(</span><span class="s2">config </span><span class="s0">|| {});</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in </span><span class="s2">config</span><span class="s0">) {</span>
            <span class="s2">parser</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">config</span><span class="s0">[</span><span class="s2">key</span><span class="s0">];</span>
        <span class="s0">}</span>

        <span class="s1">return function</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">options</span><span class="s0">) {</span>
            <span class="s2">options </span><span class="s0">= </span><span class="s2">options </span><span class="s0">|| {};</span>

            <span class="s1">var </span><span class="s2">context </span><span class="s0">= </span><span class="s2">options</span><span class="s0">.</span><span class="s2">context </span><span class="s0">|| </span><span class="s3">'default'</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">onComment </span><span class="s0">= </span><span class="s2">options</span><span class="s0">.</span><span class="s2">onComment</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">ast</span><span class="s0">;</span>

            <span class="s2">tokenizer</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">parser</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">);</span>
            <span class="s2">parser</span><span class="s0">.</span><span class="s2">locationMap</span><span class="s0">.</span><span class="s2">setSource</span><span class="s0">(</span>
                <span class="s2">source</span><span class="s0">,</span>
                <span class="s2">options</span><span class="s0">.</span><span class="s2">offset</span><span class="s0">,</span>
                <span class="s2">options</span><span class="s0">.</span><span class="s2">line</span><span class="s0">,</span>
                <span class="s2">options</span><span class="s0">.</span><span class="s2">column</span>
            <span class="s0">);</span>

            <span class="s2">parser</span><span class="s0">.</span><span class="s2">filename </span><span class="s0">= </span><span class="s2">options</span><span class="s0">.</span><span class="s2">filename </span><span class="s0">|| </span><span class="s3">'&lt;unknown&gt;'</span><span class="s0">;</span>
            <span class="s2">parser</span><span class="s0">.</span><span class="s2">needPositions </span><span class="s0">= </span><span class="s2">Boolean</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">positions</span><span class="s0">);</span>
            <span class="s2">parser</span><span class="s0">.</span><span class="s2">onParseError </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">options</span><span class="s0">.</span><span class="s2">onParseError </span><span class="s0">=== </span><span class="s3">'function' </span><span class="s0">? </span><span class="s2">options</span><span class="s0">.</span><span class="s2">onParseError </span><span class="s0">: </span><span class="s2">noop$2</span><span class="s0">;</span>
            <span class="s2">parser</span><span class="s0">.</span><span class="s2">onParseErrorThrow </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
            <span class="s2">parser</span><span class="s0">.</span><span class="s2">parseAtrulePrelude </span><span class="s0">= </span><span class="s3">'parseAtrulePrelude' </span><span class="s1">in </span><span class="s2">options </span><span class="s0">? </span><span class="s2">Boolean</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">parseAtrulePrelude</span><span class="s0">) : </span><span class="s1">true</span><span class="s0">;</span>
            <span class="s2">parser</span><span class="s0">.</span><span class="s2">parseRulePrelude </span><span class="s0">= </span><span class="s3">'parseRulePrelude' </span><span class="s1">in </span><span class="s2">options </span><span class="s0">? </span><span class="s2">Boolean</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">parseRulePrelude</span><span class="s0">) : </span><span class="s1">true</span><span class="s0">;</span>
            <span class="s2">parser</span><span class="s0">.</span><span class="s2">parseValue </span><span class="s0">= </span><span class="s3">'parseValue' </span><span class="s1">in </span><span class="s2">options </span><span class="s0">? </span><span class="s2">Boolean</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">parseValue</span><span class="s0">) : </span><span class="s1">true</span><span class="s0">;</span>
            <span class="s2">parser</span><span class="s0">.</span><span class="s2">parseCustomProperty </span><span class="s0">= </span><span class="s3">'parseCustomProperty' </span><span class="s1">in </span><span class="s2">options </span><span class="s0">? </span><span class="s2">Boolean</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">parseCustomProperty</span><span class="s0">) : </span><span class="s1">false</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">parser</span><span class="s0">.</span><span class="s2">context</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">context</span><span class="s0">)) {</span>
                <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Unknown context `' </span><span class="s0">+ </span><span class="s2">context </span><span class="s0">+ </span><span class="s3">'`'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">onComment </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
                <span class="s2">parser</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">forEachToken</span><span class="s0">((</span><span class="s2">type</span><span class="s0">, </span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">) =&gt; {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">COMMENT$3</span><span class="s0">) {</span>
                        <span class="s1">const </span><span class="s2">loc </span><span class="s0">= </span><span class="s2">parser</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">);</span>
                        <span class="s1">const </span><span class="s2">value </span><span class="s0">= </span><span class="s2">cmpStr$4</span><span class="s0">(</span><span class="s2">source</span><span class="s0">, </span><span class="s2">end </span><span class="s0">- </span><span class="s5">2</span><span class="s0">, </span><span class="s2">end</span><span class="s0">, </span><span class="s3">'*/'</span><span class="s0">)</span>
                            <span class="s0">? </span><span class="s2">source</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">, </span><span class="s2">end </span><span class="s0">- </span><span class="s5">2</span><span class="s0">)</span>
                            <span class="s0">: </span><span class="s2">source</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">, </span><span class="s2">end</span><span class="s0">);</span>

                        <span class="s2">onComment</span><span class="s0">(</span><span class="s2">value</span><span class="s0">, </span><span class="s2">loc</span><span class="s0">);</span>
                    <span class="s0">}</span>
                <span class="s0">});</span>
            <span class="s0">}</span>

            <span class="s2">ast </span><span class="s0">= </span><span class="s2">parser</span><span class="s0">.</span><span class="s2">context</span><span class="s0">[</span><span class="s2">context</span><span class="s0">].</span><span class="s2">call</span><span class="s0">(</span><span class="s2">parser</span><span class="s0">, </span><span class="s2">options</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">parser</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s2">parser</span><span class="s0">.</span><span class="s2">error</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s2">ast</span><span class="s0">;</span>
        <span class="s0">};</span>
    <span class="s0">};</span>

    <span class="s4">/* -*- Mode: js; js-indent-level: 2; -*- */</span>
    <span class="s4">/* 
     * Copyright 2011 Mozilla Foundation and contributors 
     * Licensed under the New BSD license. See LICENSE or: 
     * http://opensource.org/licenses/BSD-3-Clause 
     */</span>

    <span class="s1">var </span><span class="s2">intToCharMap </span><span class="s0">= </span><span class="s3">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'</span><span class="s0">.</span><span class="s2">split</span><span class="s0">(</span><span class="s3">''</span><span class="s0">);</span>

    <span class="s7">/**</span>
     <span class="s7">* Encode an integer in the range of 0 to 63 to a single base 64 digit.</span>
     <span class="s7">*/</span>
    <span class="s1">var </span><span class="s2">encode </span><span class="s0">= </span><span class="s1">function </span><span class="s0">(</span><span class="s2">number</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s5">0 </span><span class="s0">&lt;= </span><span class="s2">number </span><span class="s0">&amp;&amp; </span><span class="s2">number </span><span class="s0">&lt; </span><span class="s2">intToCharMap</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">intToCharMap</span><span class="s0">[</span><span class="s2">number</span><span class="s0">];</span>
      <span class="s0">}</span>
      <span class="s1">throw new </span><span class="s2">TypeError</span><span class="s0">(</span><span class="s3">&quot;Must be between 0 and 63: &quot; </span><span class="s0">+ </span><span class="s2">number</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Decode a single base 64 character code digit to an integer. Returns -1 on</span>
     <span class="s7">* failure.</span>
     <span class="s7">*/</span>
    <span class="s1">var </span><span class="s2">decode </span><span class="s0">= </span><span class="s1">function </span><span class="s0">(</span><span class="s2">charCode</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">bigA </span><span class="s0">= </span><span class="s5">65</span><span class="s0">;     </span><span class="s4">// 'A'</span>
      <span class="s1">var </span><span class="s2">bigZ </span><span class="s0">= </span><span class="s5">90</span><span class="s0">;     </span><span class="s4">// 'Z'</span>

      <span class="s1">var </span><span class="s2">littleA </span><span class="s0">= </span><span class="s5">97</span><span class="s0">;  </span><span class="s4">// 'a'</span>
      <span class="s1">var </span><span class="s2">littleZ </span><span class="s0">= </span><span class="s5">122</span><span class="s0">; </span><span class="s4">// 'z'</span>

      <span class="s1">var </span><span class="s2">zero </span><span class="s0">= </span><span class="s5">48</span><span class="s0">;     </span><span class="s4">// '0'</span>
      <span class="s1">var </span><span class="s2">nine </span><span class="s0">= </span><span class="s5">57</span><span class="s0">;     </span><span class="s4">// '9'</span>

      <span class="s1">var </span><span class="s2">plus </span><span class="s0">= </span><span class="s5">43</span><span class="s0">;     </span><span class="s4">// '+'</span>
      <span class="s1">var </span><span class="s2">slash </span><span class="s0">= </span><span class="s5">47</span><span class="s0">;    </span><span class="s4">// '/'</span>

      <span class="s1">var </span><span class="s2">littleOffset </span><span class="s0">= </span><span class="s5">26</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">numberOffset </span><span class="s0">= </span><span class="s5">52</span><span class="s0">;</span>

      <span class="s4">// 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">bigA </span><span class="s0">&lt;= </span><span class="s2">charCode </span><span class="s0">&amp;&amp; </span><span class="s2">charCode </span><span class="s0">&lt;= </span><span class="s2">bigZ</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">(</span><span class="s2">charCode </span><span class="s0">- </span><span class="s2">bigA</span><span class="s0">);</span>
      <span class="s0">}</span>

      <span class="s4">// 26 - 51: abcdefghijklmnopqrstuvwxyz</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">littleA </span><span class="s0">&lt;= </span><span class="s2">charCode </span><span class="s0">&amp;&amp; </span><span class="s2">charCode </span><span class="s0">&lt;= </span><span class="s2">littleZ</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">(</span><span class="s2">charCode </span><span class="s0">- </span><span class="s2">littleA </span><span class="s0">+ </span><span class="s2">littleOffset</span><span class="s0">);</span>
      <span class="s0">}</span>

      <span class="s4">// 52 - 61: 0123456789</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">zero </span><span class="s0">&lt;= </span><span class="s2">charCode </span><span class="s0">&amp;&amp; </span><span class="s2">charCode </span><span class="s0">&lt;= </span><span class="s2">nine</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">(</span><span class="s2">charCode </span><span class="s0">- </span><span class="s2">zero </span><span class="s0">+ </span><span class="s2">numberOffset</span><span class="s0">);</span>
      <span class="s0">}</span>

      <span class="s4">// 62: +</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">charCode </span><span class="s0">== </span><span class="s2">plus</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s5">62</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s4">// 63: /</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">charCode </span><span class="s0">== </span><span class="s2">slash</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s5">63</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s4">// Invalid base64 digit.</span>
      <span class="s1">return </span><span class="s0">-</span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">base64 </span><span class="s0">= {</span>
    	<span class="s2">encode</span><span class="s0">: </span><span class="s2">encode</span><span class="s0">,</span>
    	<span class="s2">decode</span><span class="s0">: </span><span class="s2">decode</span>
    <span class="s0">};</span>

    <span class="s4">/* -*- Mode: js; js-indent-level: 2; -*- */</span>
    <span class="s4">/* 
     * Copyright 2011 Mozilla Foundation and contributors 
     * Licensed under the New BSD license. See LICENSE or: 
     * http://opensource.org/licenses/BSD-3-Clause 
     * 
     * Based on the Base 64 VLQ implementation in Closure Compiler: 
     * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java 
     * 
     * Copyright 2011 The Closure Compiler Authors. All rights reserved. 
     * Redistribution and use in source and binary forms, with or without 
     * modification, are permitted provided that the following conditions are 
     * met: 
     * 
     *  * Redistributions of source code must retain the above copyright 
     *    notice, this list of conditions and the following disclaimer. 
     *  * Redistributions in binary form must reproduce the above 
     *    copyright notice, this list of conditions and the following 
     *    disclaimer in the documentation and/or other materials provided 
     *    with the distribution. 
     *  * Neither the name of Google Inc. nor the names of its 
     *    contributors may be used to endorse or promote products derived 
     *    from this software without specific prior written permission. 
     * 
     * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 
     * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT 
     * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR 
     * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT 
     * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
     * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT 
     * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
     * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY 
     * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT 
     * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE 
     * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 
     */</span>



    <span class="s4">// A single base 64 digit can contain 6 bits of data. For the base 64 variable</span>
    <span class="s4">// length quantities we use in the source map spec, the first bit is the sign,</span>
    <span class="s4">// the next four bits are the actual value, and the 6th bit is the</span>
    <span class="s4">// continuation bit. The continuation bit tells us whether there are more</span>
    <span class="s4">// digits in this value following this digit.</span>
    <span class="s4">//</span>
    <span class="s4">//   Continuation</span>
    <span class="s4">//   |    Sign</span>
    <span class="s4">//   |    |</span>
    <span class="s4">//   V    V</span>
    <span class="s4">//   101011</span>

    <span class="s1">var </span><span class="s2">VLQ_BASE_SHIFT </span><span class="s0">= </span><span class="s5">5</span><span class="s0">;</span>

    <span class="s4">// binary: 100000</span>
    <span class="s1">var </span><span class="s2">VLQ_BASE </span><span class="s0">= </span><span class="s5">1 </span><span class="s0">&lt;&lt; </span><span class="s2">VLQ_BASE_SHIFT</span><span class="s0">;</span>

    <span class="s4">// binary: 011111</span>
    <span class="s1">var </span><span class="s2">VLQ_BASE_MASK </span><span class="s0">= </span><span class="s2">VLQ_BASE </span><span class="s0">- </span><span class="s5">1</span><span class="s0">;</span>

    <span class="s4">// binary: 100000</span>
    <span class="s1">var </span><span class="s2">VLQ_CONTINUATION_BIT </span><span class="s0">= </span><span class="s2">VLQ_BASE</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* Converts from a two-complement value to a value where the sign bit is</span>
     <span class="s7">* placed in the least significant bit.  For example, as decimals:</span>
     <span class="s7">*   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)</span>
     <span class="s7">*   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">toVLQSigned</span><span class="s0">(</span><span class="s2">aValue</span><span class="s0">) {</span>
      <span class="s1">return </span><span class="s2">aValue </span><span class="s0">&lt; </span><span class="s5">0</span>
        <span class="s0">? ((-</span><span class="s2">aValue</span><span class="s0">) &lt;&lt; </span><span class="s5">1</span><span class="s0">) + </span><span class="s5">1</span>
        <span class="s0">: (</span><span class="s2">aValue </span><span class="s0">&lt;&lt; </span><span class="s5">1</span><span class="s0">) + </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Converts to a two-complement value from a value where the sign bit is</span>
     <span class="s7">* placed in the least significant bit.  For example, as decimals:</span>
     <span class="s7">*   2 (10 binary) becomes 1, 3 (11 binary) becomes -1</span>
     <span class="s7">*   4 (100 binary) becomes 2, 5 (101 binary) becomes -2</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">fromVLQSigned</span><span class="s0">(</span><span class="s2">aValue</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">isNegative </span><span class="s0">= (</span><span class="s2">aValue </span><span class="s0">&amp; </span><span class="s5">1</span><span class="s0">) === </span><span class="s5">1</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">shifted </span><span class="s0">= </span><span class="s2">aValue </span><span class="s0">&gt;&gt; </span><span class="s5">1</span><span class="s0">;</span>
      <span class="s1">return </span><span class="s2">isNegative</span>
        <span class="s0">? -</span><span class="s2">shifted</span>
        <span class="s0">: </span><span class="s2">shifted</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Returns the base 64 VLQ encoded value.</span>
     <span class="s7">*/</span>
    <span class="s1">var </span><span class="s2">encode$1 </span><span class="s0">= </span><span class="s1">function </span><span class="s2">base64VLQ_encode</span><span class="s0">(</span><span class="s2">aValue</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">encoded </span><span class="s0">= </span><span class="s3">&quot;&quot;</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">digit</span><span class="s0">;</span>

      <span class="s1">var </span><span class="s2">vlq </span><span class="s0">= </span><span class="s2">toVLQSigned</span><span class="s0">(</span><span class="s2">aValue</span><span class="s0">);</span>

      <span class="s1">do </span><span class="s0">{</span>
        <span class="s2">digit </span><span class="s0">= </span><span class="s2">vlq </span><span class="s0">&amp; </span><span class="s2">VLQ_BASE_MASK</span><span class="s0">;</span>
        <span class="s2">vlq </span><span class="s0">&gt;&gt;&gt;= </span><span class="s2">VLQ_BASE_SHIFT</span><span class="s0">;</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">vlq </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
          <span class="s4">// There are still more digits in this value, so we must make sure the</span>
          <span class="s4">// continuation bit is marked.</span>
          <span class="s2">digit </span><span class="s0">|= </span><span class="s2">VLQ_CONTINUATION_BIT</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s2">encoded </span><span class="s0">+= </span><span class="s2">base64</span><span class="s0">.</span><span class="s2">encode</span><span class="s0">(</span><span class="s2">digit</span><span class="s0">);</span>
      <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">vlq </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">);</span>

      <span class="s1">return </span><span class="s2">encoded</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Decodes the next base 64 VLQ value from the given string and returns the</span>
     <span class="s7">* value and the rest of the string via the out parameter.</span>
     <span class="s7">*/</span>
    <span class="s1">var </span><span class="s2">decode$1 </span><span class="s0">= </span><span class="s1">function </span><span class="s2">base64VLQ_decode</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">, </span><span class="s2">aIndex</span><span class="s0">, </span><span class="s2">aOutParam</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">strLen </span><span class="s0">= </span><span class="s2">aStr</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">shift </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">continuation</span><span class="s0">, </span><span class="s2">digit</span><span class="s0">;</span>

      <span class="s1">do </span><span class="s0">{</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">aIndex </span><span class="s0">&gt;= </span><span class="s2">strLen</span><span class="s0">) {</span>
          <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">&quot;Expected more digits in base 64 VLQ value.&quot;</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s2">digit </span><span class="s0">= </span><span class="s2">base64</span><span class="s0">.</span><span class="s2">decode</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">aIndex</span><span class="s0">++));</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">digit </span><span class="s0">=== -</span><span class="s5">1</span><span class="s0">) {</span>
          <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">&quot;Invalid base64 digit: &quot; </span><span class="s0">+ </span><span class="s2">aStr</span><span class="s0">.</span><span class="s2">charAt</span><span class="s0">(</span><span class="s2">aIndex </span><span class="s0">- </span><span class="s5">1</span><span class="s0">));</span>
        <span class="s0">}</span>

        <span class="s2">continuation </span><span class="s0">= !!(</span><span class="s2">digit </span><span class="s0">&amp; </span><span class="s2">VLQ_CONTINUATION_BIT</span><span class="s0">);</span>
        <span class="s2">digit </span><span class="s0">&amp;= </span><span class="s2">VLQ_BASE_MASK</span><span class="s0">;</span>
        <span class="s2">result </span><span class="s0">= </span><span class="s2">result </span><span class="s0">+ (</span><span class="s2">digit </span><span class="s0">&lt;&lt; </span><span class="s2">shift</span><span class="s0">);</span>
        <span class="s2">shift </span><span class="s0">+= </span><span class="s2">VLQ_BASE_SHIFT</span><span class="s0">;</span>
      <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">continuation</span><span class="s0">);</span>

      <span class="s2">aOutParam</span><span class="s0">.</span><span class="s2">value </span><span class="s0">= </span><span class="s2">fromVLQSigned</span><span class="s0">(</span><span class="s2">result</span><span class="s0">);</span>
      <span class="s2">aOutParam</span><span class="s0">.</span><span class="s2">rest </span><span class="s0">= </span><span class="s2">aIndex</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">base64Vlq </span><span class="s0">= {</span>
    	<span class="s2">encode</span><span class="s0">: </span><span class="s2">encode$1</span><span class="s0">,</span>
    	<span class="s2">decode</span><span class="s0">: </span><span class="s2">decode$1</span>
    <span class="s0">};</span>

    <span class="s1">function </span><span class="s2">createCommonjsModule</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">module</span><span class="s0">) {</span>
    	<span class="s1">return </span><span class="s2">module </span><span class="s0">= { </span><span class="s2">exports</span><span class="s0">: {} }, </span><span class="s2">fn</span><span class="s0">(</span><span class="s2">module</span><span class="s0">, </span><span class="s2">module</span><span class="s0">.</span><span class="s2">exports</span><span class="s0">), </span><span class="s2">module</span><span class="s0">.</span><span class="s2">exports</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getCjsExportFromNamespace </span><span class="s0">(</span><span class="s2">n</span><span class="s0">) {</span>
    	<span class="s1">return </span><span class="s2">n </span><span class="s0">&amp;&amp; </span><span class="s2">n</span><span class="s0">[</span><span class="s3">'default'</span><span class="s0">] || </span><span class="s2">n</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">util </span><span class="s0">= </span><span class="s2">createCommonjsModule</span><span class="s0">(</span><span class="s1">function </span><span class="s0">(</span><span class="s2">module</span><span class="s0">, </span><span class="s2">exports</span><span class="s0">) {</span>
    <span class="s4">/* -*- Mode: js; js-indent-level: 2; -*- */</span>
    <span class="s4">/* 
     * Copyright 2011 Mozilla Foundation and contributors 
     * Licensed under the New BSD license. See LICENSE or: 
     * http://opensource.org/licenses/BSD-3-Clause 
     */</span>

    <span class="s7">/**</span>
     <span class="s7">* This is a helper function for getting values from parameter/options</span>
     <span class="s7">* objects.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">args The object we are extracting values from</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">name The name of the property we are getting.</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">defaultValue An optional value to return if the property is missing</span>
     <span class="s7">* from the object. If this is not specified and the property is missing, an</span>
     <span class="s7">* error will be thrown.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">getArg</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">, </span><span class="s2">aName</span><span class="s0">, </span><span class="s2">aDefaultValue</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aName </span><span class="s1">in </span><span class="s2">aArgs</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">aArgs</span><span class="s0">[</span><span class="s2">aName</span><span class="s0">];</span>
      <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">arguments</span><span class="s0">.</span><span class="s2">length </span><span class="s0">=== </span><span class="s5">3</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">aDefaultValue</span><span class="s0">;</span>
      <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
        <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'&quot;' </span><span class="s0">+ </span><span class="s2">aName </span><span class="s0">+ </span><span class="s3">'&quot; is a required argument.'</span><span class="s0">);</span>
      <span class="s0">}</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">getArg </span><span class="s0">= </span><span class="s2">getArg</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">urlRegexp </span><span class="s0">= </span><span class="s6">/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">dataUrlRegexp </span><span class="s0">= </span><span class="s6">/^data:.+\,.+$/</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">urlParse</span><span class="s0">(</span><span class="s2">aUrl</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">match </span><span class="s0">= </span><span class="s2">aUrl</span><span class="s0">.</span><span class="s2">match</span><span class="s0">(</span><span class="s2">urlRegexp</span><span class="s0">);</span>
      <span class="s1">if </span><span class="s0">(!</span><span class="s2">match</span><span class="s0">) {</span>
        <span class="s1">return null</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">return </span><span class="s0">{</span>
        <span class="s2">scheme</span><span class="s0">: </span><span class="s2">match</span><span class="s0">[</span><span class="s5">1</span><span class="s0">],</span>
        <span class="s2">auth</span><span class="s0">: </span><span class="s2">match</span><span class="s0">[</span><span class="s5">2</span><span class="s0">],</span>
        <span class="s2">host</span><span class="s0">: </span><span class="s2">match</span><span class="s0">[</span><span class="s5">3</span><span class="s0">],</span>
        <span class="s2">port</span><span class="s0">: </span><span class="s2">match</span><span class="s0">[</span><span class="s5">4</span><span class="s0">],</span>
        <span class="s2">path</span><span class="s0">: </span><span class="s2">match</span><span class="s0">[</span><span class="s5">5</span><span class="s0">]</span>
      <span class="s0">};</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">urlParse </span><span class="s0">= </span><span class="s2">urlParse</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">urlGenerate</span><span class="s0">(</span><span class="s2">aParsedUrl</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">url </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">scheme</span><span class="s0">) {</span>
        <span class="s2">url </span><span class="s0">+= </span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">scheme </span><span class="s0">+ </span><span class="s3">':'</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s2">url </span><span class="s0">+= </span><span class="s3">'//'</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">auth</span><span class="s0">) {</span>
        <span class="s2">url </span><span class="s0">+= </span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">auth </span><span class="s0">+ </span><span class="s3">'@'</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">host</span><span class="s0">) {</span>
        <span class="s2">url </span><span class="s0">+= </span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">host</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">port</span><span class="s0">) {</span>
        <span class="s2">url </span><span class="s0">+= </span><span class="s3">&quot;:&quot; </span><span class="s0">+ </span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">port</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">path</span><span class="s0">) {</span>
        <span class="s2">url </span><span class="s0">+= </span><span class="s2">aParsedUrl</span><span class="s0">.</span><span class="s2">path</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">return </span><span class="s2">url</span><span class="s0">;</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">urlGenerate </span><span class="s0">= </span><span class="s2">urlGenerate</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* Normalizes a path, or the path portion of a URL:</span>
     <span class="s7">*</span>
     <span class="s7">* - Replaces consecutive slashes with one slash.</span>
     <span class="s7">* - Removes unnecessary '.' parts.</span>
     <span class="s7">* - Removes unnecessary '&lt;dir&gt;/..' parts.</span>
     <span class="s7">*</span>
     <span class="s7">* Based on code in the Node.js 'path' core module.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aPath The path or url to normalize.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">normalize</span><span class="s0">(</span><span class="s2">aPath</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">path </span><span class="s0">= </span><span class="s2">aPath</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">url </span><span class="s0">= </span><span class="s2">urlParse</span><span class="s0">(</span><span class="s2">aPath</span><span class="s0">);</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">url</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">url</span><span class="s0">.</span><span class="s2">path</span><span class="s0">) {</span>
          <span class="s1">return </span><span class="s2">aPath</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s2">path </span><span class="s0">= </span><span class="s2">url</span><span class="s0">.</span><span class="s2">path</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">var </span><span class="s2">isAbsolute </span><span class="s0">= </span><span class="s2">exports</span><span class="s0">.</span><span class="s2">isAbsolute</span><span class="s0">(</span><span class="s2">path</span><span class="s0">);</span>

      <span class="s1">var </span><span class="s2">parts </span><span class="s0">= </span><span class="s2">path</span><span class="s0">.</span><span class="s2">split</span><span class="s0">(</span><span class="s6">/\/+/</span><span class="s0">);</span>
      <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">part</span><span class="s0">, </span><span class="s2">up </span><span class="s0">= </span><span class="s5">0</span><span class="s0">, </span><span class="s2">i </span><span class="s0">= </span><span class="s2">parts</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i</span><span class="s0">--) {</span>
        <span class="s2">part </span><span class="s0">= </span><span class="s2">parts</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">part </span><span class="s0">=== </span><span class="s3">'.'</span><span class="s0">) {</span>
          <span class="s2">parts</span><span class="s0">.</span><span class="s2">splice</span><span class="s0">(</span><span class="s2">i</span><span class="s0">, </span><span class="s5">1</span><span class="s0">);</span>
        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">part </span><span class="s0">=== </span><span class="s3">'..'</span><span class="s0">) {</span>
          <span class="s2">up</span><span class="s0">++;</span>
        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">up </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">part </span><span class="s0">=== </span><span class="s3">''</span><span class="s0">) {</span>
            <span class="s4">// The first part is blank if the path is absolute. Trying to go</span>
            <span class="s4">// above the root is a no-op. Therefore we can remove all '..' parts</span>
            <span class="s4">// directly after the root.</span>
            <span class="s2">parts</span><span class="s0">.</span><span class="s2">splice</span><span class="s0">(</span><span class="s2">i </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">, </span><span class="s2">up</span><span class="s0">);</span>
            <span class="s2">up </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
          <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s2">parts</span><span class="s0">.</span><span class="s2">splice</span><span class="s0">(</span><span class="s2">i</span><span class="s0">, </span><span class="s5">2</span><span class="s0">);</span>
            <span class="s2">up</span><span class="s0">--;</span>
          <span class="s0">}</span>
        <span class="s0">}</span>
      <span class="s0">}</span>
      <span class="s2">path </span><span class="s0">= </span><span class="s2">parts</span><span class="s0">.</span><span class="s2">join</span><span class="s0">(</span><span class="s3">'/'</span><span class="s0">);</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">path </span><span class="s0">=== </span><span class="s3">''</span><span class="s0">) {</span>
        <span class="s2">path </span><span class="s0">= </span><span class="s2">isAbsolute </span><span class="s0">? </span><span class="s3">'/' </span><span class="s0">: </span><span class="s3">'.'</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">url</span><span class="s0">) {</span>
        <span class="s2">url</span><span class="s0">.</span><span class="s2">path </span><span class="s0">= </span><span class="s2">path</span><span class="s0">;</span>
        <span class="s1">return </span><span class="s2">urlGenerate</span><span class="s0">(</span><span class="s2">url</span><span class="s0">);</span>
      <span class="s0">}</span>
      <span class="s1">return </span><span class="s2">path</span><span class="s0">;</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">normalize </span><span class="s0">= </span><span class="s2">normalize</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* Joins two paths/URLs.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aRoot The root path or URL.</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aPath The path or URL to be joined with the root.</span>
     <span class="s7">*</span>
     <span class="s7">* - If aPath is a URL or a data URI, aPath is returned, unless aPath is a</span>
     <span class="s7">*   scheme-relative URL: Then the scheme of aRoot, if any, is prepended</span>
     <span class="s7">*   first.</span>
     <span class="s7">* - Otherwise aPath is a path. If aRoot is a URL, then its path portion</span>
     <span class="s7">*   is updated with the result and aRoot is returned. Otherwise the result</span>
     <span class="s7">*   is returned.</span>
     <span class="s7">*   - If aPath is absolute, the result is aPath.</span>
     <span class="s7">*   - Otherwise the two paths are joined with a slash.</span>
     <span class="s7">* - Joining for example 'http://' and 'www.example.com' is also supported.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">join</span><span class="s0">(</span><span class="s2">aRoot</span><span class="s0">, </span><span class="s2">aPath</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aRoot </span><span class="s0">=== </span><span class="s3">&quot;&quot;</span><span class="s0">) {</span>
        <span class="s2">aRoot </span><span class="s0">= </span><span class="s3">&quot;.&quot;</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aPath </span><span class="s0">=== </span><span class="s3">&quot;&quot;</span><span class="s0">) {</span>
        <span class="s2">aPath </span><span class="s0">= </span><span class="s3">&quot;.&quot;</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">var </span><span class="s2">aPathUrl </span><span class="s0">= </span><span class="s2">urlParse</span><span class="s0">(</span><span class="s2">aPath</span><span class="s0">);</span>
      <span class="s1">var </span><span class="s2">aRootUrl </span><span class="s0">= </span><span class="s2">urlParse</span><span class="s0">(</span><span class="s2">aRoot</span><span class="s0">);</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aRootUrl</span><span class="s0">) {</span>
        <span class="s2">aRoot </span><span class="s0">= </span><span class="s2">aRootUrl</span><span class="s0">.</span><span class="s2">path </span><span class="s0">|| </span><span class="s3">'/'</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s4">// `join(foo, '//www.example.org')`</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aPathUrl </span><span class="s0">&amp;&amp; !</span><span class="s2">aPathUrl</span><span class="s0">.</span><span class="s2">scheme</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">aRootUrl</span><span class="s0">) {</span>
          <span class="s2">aPathUrl</span><span class="s0">.</span><span class="s2">scheme </span><span class="s0">= </span><span class="s2">aRootUrl</span><span class="s0">.</span><span class="s2">scheme</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s1">return </span><span class="s2">urlGenerate</span><span class="s0">(</span><span class="s2">aPathUrl</span><span class="s0">);</span>
      <span class="s0">}</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">aPathUrl </span><span class="s0">|| </span><span class="s2">aPath</span><span class="s0">.</span><span class="s2">match</span><span class="s0">(</span><span class="s2">dataUrlRegexp</span><span class="s0">)) {</span>
        <span class="s1">return </span><span class="s2">aPath</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s4">// `join('http://', 'www.example.com')`</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aRootUrl </span><span class="s0">&amp;&amp; !</span><span class="s2">aRootUrl</span><span class="s0">.</span><span class="s2">host </span><span class="s0">&amp;&amp; !</span><span class="s2">aRootUrl</span><span class="s0">.</span><span class="s2">path</span><span class="s0">) {</span>
        <span class="s2">aRootUrl</span><span class="s0">.</span><span class="s2">host </span><span class="s0">= </span><span class="s2">aPath</span><span class="s0">;</span>
        <span class="s1">return </span><span class="s2">urlGenerate</span><span class="s0">(</span><span class="s2">aRootUrl</span><span class="s0">);</span>
      <span class="s0">}</span>

      <span class="s1">var </span><span class="s2">joined </span><span class="s0">= </span><span class="s2">aPath</span><span class="s0">.</span><span class="s2">charAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s3">'/'</span>
        <span class="s0">? </span><span class="s2">aPath</span>
        <span class="s0">: </span><span class="s2">normalize</span><span class="s0">(</span><span class="s2">aRoot</span><span class="s0">.</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/\/+$/</span><span class="s0">, </span><span class="s3">''</span><span class="s0">) + </span><span class="s3">'/' </span><span class="s0">+ </span><span class="s2">aPath</span><span class="s0">);</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">aRootUrl</span><span class="s0">) {</span>
        <span class="s2">aRootUrl</span><span class="s0">.</span><span class="s2">path </span><span class="s0">= </span><span class="s2">joined</span><span class="s0">;</span>
        <span class="s1">return </span><span class="s2">urlGenerate</span><span class="s0">(</span><span class="s2">aRootUrl</span><span class="s0">);</span>
      <span class="s0">}</span>
      <span class="s1">return </span><span class="s2">joined</span><span class="s0">;</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">join </span><span class="s0">= </span><span class="s2">join</span><span class="s0">;</span>

    <span class="s2">exports</span><span class="s0">.</span><span class="s2">isAbsolute </span><span class="s0">= </span><span class="s1">function </span><span class="s0">(</span><span class="s2">aPath</span><span class="s0">) {</span>
      <span class="s1">return </span><span class="s2">aPath</span><span class="s0">.</span><span class="s2">charAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s3">'/' </span><span class="s0">|| </span><span class="s2">urlRegexp</span><span class="s0">.</span><span class="s2">test</span><span class="s0">(</span><span class="s2">aPath</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Make a path relative to a URL or another path.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aRoot The root path or URL.</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aPath The path or URL to be made relative to aRoot.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">relative</span><span class="s0">(</span><span class="s2">aRoot</span><span class="s0">, </span><span class="s2">aPath</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aRoot </span><span class="s0">=== </span><span class="s3">&quot;&quot;</span><span class="s0">) {</span>
        <span class="s2">aRoot </span><span class="s0">= </span><span class="s3">&quot;.&quot;</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">aRoot </span><span class="s0">= </span><span class="s2">aRoot</span><span class="s0">.</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/\/$/</span><span class="s0">, </span><span class="s3">''</span><span class="s0">);</span>

      <span class="s4">// It is possible for the path to be above the root. In this case, simply</span>
      <span class="s4">// checking whether the root is a prefix of the path won't work. Instead, we</span>
      <span class="s4">// need to remove components from the root one by one, until either we find</span>
      <span class="s4">// a prefix that fits, or we run out of components to remove.</span>
      <span class="s1">var </span><span class="s2">level </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
      <span class="s1">while </span><span class="s0">(</span><span class="s2">aPath</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s2">aRoot </span><span class="s0">+ </span><span class="s3">'/'</span><span class="s0">) !== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">index </span><span class="s0">= </span><span class="s2">aRoot</span><span class="s0">.</span><span class="s2">lastIndexOf</span><span class="s0">(</span><span class="s3">&quot;/&quot;</span><span class="s0">);</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">index </span><span class="s0">&lt; </span><span class="s5">0</span><span class="s0">) {</span>
          <span class="s1">return </span><span class="s2">aPath</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// If the only part of the root that is left is the scheme (i.e. http://,</span>
        <span class="s4">// file:///, etc.), one or more slashes (/), or simply nothing at all, we</span>
        <span class="s4">// have exhausted all components, so the path is not relative to the root.</span>
        <span class="s2">aRoot </span><span class="s0">= </span><span class="s2">aRoot</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s2">index</span><span class="s0">);</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">aRoot</span><span class="s0">.</span><span class="s2">match</span><span class="s0">(</span><span class="s6">/^([^\/]+:\/)?\/*$/</span><span class="s0">)) {</span>
          <span class="s1">return </span><span class="s2">aPath</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s0">++</span><span class="s2">level</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s4">// Make sure we add a &quot;../&quot; for each component we removed from the root.</span>
      <span class="s1">return </span><span class="s2">Array</span><span class="s0">(</span><span class="s2">level </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">).</span><span class="s2">join</span><span class="s0">(</span><span class="s3">&quot;../&quot;</span><span class="s0">) + </span><span class="s2">aPath</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s2">aRoot</span><span class="s0">.</span><span class="s2">length </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">relative </span><span class="s0">= </span><span class="s2">relative</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">supportsNullProto </span><span class="s0">= (</span><span class="s1">function </span><span class="s0">() {</span>
      <span class="s1">var </span><span class="s2">obj </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">create</span><span class="s0">(</span><span class="s1">null</span><span class="s0">);</span>
      <span class="s1">return </span><span class="s0">!(</span><span class="s3">'__proto__' </span><span class="s1">in </span><span class="s2">obj</span><span class="s0">);</span>
    <span class="s0">}());</span>

    <span class="s1">function </span><span class="s2">identity </span><span class="s0">(</span><span class="s2">s</span><span class="s0">) {</span>
      <span class="s1">return </span><span class="s2">s</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Because behavior goes wacky when you set `__proto__` on objects, we</span>
     <span class="s7">* have to prefix all the strings in our set with an arbitrary character.</span>
     <span class="s7">*</span>
     <span class="s7">* See https://github.com/mozilla/source-map/pull/31 and</span>
     <span class="s7">* https://github.com/mozilla/source-map/issues/30</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">String aStr</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">toSetString</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">isProtoString</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">)) {</span>
        <span class="s1">return </span><span class="s3">'$' </span><span class="s0">+ </span><span class="s2">aStr</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">return </span><span class="s2">aStr</span><span class="s0">;</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">toSetString </span><span class="s0">= </span><span class="s2">supportsNullProto </span><span class="s0">? </span><span class="s2">identity </span><span class="s0">: </span><span class="s2">toSetString</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">fromSetString</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">isProtoString</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">)) {</span>
        <span class="s1">return </span><span class="s2">aStr</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">(</span><span class="s5">1</span><span class="s0">);</span>
      <span class="s0">}</span>

      <span class="s1">return </span><span class="s2">aStr</span><span class="s0">;</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">fromSetString </span><span class="s0">= </span><span class="s2">supportsNullProto </span><span class="s0">? </span><span class="s2">identity </span><span class="s0">: </span><span class="s2">fromSetString</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">isProtoString</span><span class="s0">(</span><span class="s2">s</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(!</span><span class="s2">s</span><span class="s0">) {</span>
        <span class="s1">return false</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">var </span><span class="s2">length </span><span class="s0">= </span><span class="s2">s</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">length </span><span class="s0">&lt; </span><span class="s5">9 </span><span class="s4">/* &quot;__proto__&quot;.length */</span><span class="s0">) {</span>
        <span class="s1">return false</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">) !== </span><span class="s5">95  </span><span class="s4">/* '_' */ </span><span class="s0">||</span>
          <span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">2</span><span class="s0">) !== </span><span class="s5">95  </span><span class="s4">/* '_' */ </span><span class="s0">||</span>
          <span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">3</span><span class="s0">) !== </span><span class="s5">111 </span><span class="s4">/* 'o' */ </span><span class="s0">||</span>
          <span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">4</span><span class="s0">) !== </span><span class="s5">116 </span><span class="s4">/* 't' */ </span><span class="s0">||</span>
          <span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">5</span><span class="s0">) !== </span><span class="s5">111 </span><span class="s4">/* 'o' */ </span><span class="s0">||</span>
          <span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">6</span><span class="s0">) !== </span><span class="s5">114 </span><span class="s4">/* 'r' */ </span><span class="s0">||</span>
          <span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">7</span><span class="s0">) !== </span><span class="s5">112 </span><span class="s4">/* 'p' */ </span><span class="s0">||</span>
          <span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">8</span><span class="s0">) !== </span><span class="s5">95  </span><span class="s4">/* '_' */ </span><span class="s0">||</span>
          <span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">length </span><span class="s0">- </span><span class="s5">9</span><span class="s0">) !== </span><span class="s5">95  </span><span class="s4">/* '_' */</span><span class="s0">) {</span>
        <span class="s1">return false</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s2">length </span><span class="s0">- </span><span class="s5">10</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i</span><span class="s0">--) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">s</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">) !== </span><span class="s5">36 </span><span class="s4">/* '$' */</span><span class="s0">) {</span>
          <span class="s1">return false</span><span class="s0">;</span>
        <span class="s0">}</span>
      <span class="s0">}</span>

      <span class="s1">return true</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Comparator between two mappings where the original positions are compared.</span>
     <span class="s7">*</span>
     <span class="s7">* Optionally pass in `true` as `onlyCompareGenerated` to consider two</span>
     <span class="s7">* mappings with the same original source/line/column, but different generated</span>
     <span class="s7">* line and column the same. Useful when searching for a mapping with a</span>
     <span class="s7">* stubbed out mapping.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">compareByOriginalPositions</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">, </span><span class="s2">onlyCompareOriginal</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">cmp </span><span class="s0">= </span><span class="s2">strcmp</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">source</span><span class="s0">);</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">originalLine </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">originalLine</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">originalColumn </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">originalColumn</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0 </span><span class="s0">|| </span><span class="s2">onlyCompareOriginal</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">generatedColumn </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">generatedColumn</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">generatedLine </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">generatedLine</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">return </span><span class="s2">strcmp</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">name</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">compareByOriginalPositions </span><span class="s0">= </span><span class="s2">compareByOriginalPositions</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* Comparator between two mappings with deflated source and name indices where</span>
     <span class="s7">* the generated positions are compared.</span>
     <span class="s7">*</span>
     <span class="s7">* Optionally pass in `true` as `onlyCompareGenerated` to consider two</span>
     <span class="s7">* mappings with the same generated line and column, but different</span>
     <span class="s7">* source/name/original line and column the same. Useful when searching for a</span>
     <span class="s7">* mapping with a stubbed out mapping.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">compareByGeneratedPositionsDeflated</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">, </span><span class="s2">onlyCompareGenerated</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">generatedLine </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">generatedLine</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">generatedColumn </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">generatedColumn</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0 </span><span class="s0">|| </span><span class="s2">onlyCompareGenerated</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">strcmp</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">source</span><span class="s0">);</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">originalLine </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">originalLine</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">originalColumn </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">originalColumn</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">return </span><span class="s2">strcmp</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">name</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">compareByGeneratedPositionsDeflated </span><span class="s0">= </span><span class="s2">compareByGeneratedPositionsDeflated</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">strcmp</span><span class="s0">(</span><span class="s2">aStr1</span><span class="s0">, </span><span class="s2">aStr2</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aStr1 </span><span class="s0">=== </span><span class="s2">aStr2</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">aStr1 </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s5">1</span><span class="s0">; </span><span class="s4">// aStr2 !== null</span>
      <span class="s0">}</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">aStr2 </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">-</span><span class="s5">1</span><span class="s0">; </span><span class="s4">// aStr1 !== null</span>
      <span class="s0">}</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">aStr1 </span><span class="s0">&gt; </span><span class="s2">aStr2</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">return </span><span class="s0">-</span><span class="s5">1</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Comparator between two mappings with inflated source and name strings where</span>
     <span class="s7">* the generated positions are compared.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">compareByGeneratedPositionsInflated</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">generatedLine </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">generatedLine</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">generatedColumn </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">generatedColumn</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">strcmp</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">source</span><span class="s0">);</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">originalLine </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">originalLine</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s2">cmp </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">originalColumn </span><span class="s0">- </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">originalColumn</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">cmp </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">cmp</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s1">return </span><span class="s2">strcmp</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">name</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">compareByGeneratedPositionsInflated </span><span class="s0">= </span><span class="s2">compareByGeneratedPositionsInflated</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* Strip any JSON XSSI avoidance prefix from the string (as documented</span>
     <span class="s7">* in the source maps specification), and then parse the string as</span>
     <span class="s7">* JSON.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">parseSourceMapInput</span><span class="s0">(</span><span class="s2">str</span><span class="s0">) {</span>
      <span class="s1">return </span><span class="s2">JSON</span><span class="s0">.</span><span class="s2">parse</span><span class="s0">(</span><span class="s2">str</span><span class="s0">.</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/^\)]}'[^\n]*\n/</span><span class="s0">, </span><span class="s3">''</span><span class="s0">));</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">parseSourceMapInput </span><span class="s0">= </span><span class="s2">parseSourceMapInput</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* Compute the URL of a source given the the source root, the source's</span>
     <span class="s7">* URL, and the source map's URL.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">computeSourceURL</span><span class="s0">(</span><span class="s2">sourceRoot</span><span class="s0">, </span><span class="s2">sourceURL</span><span class="s0">, </span><span class="s2">sourceMapURL</span><span class="s0">) {</span>
      <span class="s2">sourceURL </span><span class="s0">= </span><span class="s2">sourceURL </span><span class="s0">|| </span><span class="s3">''</span><span class="s0">;</span>

      <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceRoot</span><span class="s0">) {</span>
        <span class="s4">// This follows what Chrome does.</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceRoot</span><span class="s0">[</span><span class="s2">sourceRoot</span><span class="s0">.</span><span class="s2">length </span><span class="s0">- </span><span class="s5">1</span><span class="s0">] !== </span><span class="s3">'/' </span><span class="s0">&amp;&amp; </span><span class="s2">sourceURL</span><span class="s0">[</span><span class="s5">0</span><span class="s0">] !== </span><span class="s3">'/'</span><span class="s0">) {</span>
          <span class="s2">sourceRoot </span><span class="s0">+= </span><span class="s3">'/'</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s4">// The spec says:</span>
        <span class="s4">//   Line 4: An optional source root, useful for relocating source</span>
        <span class="s4">//   files on a server or removing repeated values in the</span>
        <span class="s4">//   “sources” entry.  This value is prepended to the individual</span>
        <span class="s4">//   entries in the “source” field.</span>
        <span class="s2">sourceURL </span><span class="s0">= </span><span class="s2">sourceRoot </span><span class="s0">+ </span><span class="s2">sourceURL</span><span class="s0">;</span>
      <span class="s0">}</span>

      <span class="s4">// Historically, SourceMapConsumer did not take the sourceMapURL as</span>
      <span class="s4">// a parameter.  This mode is still somewhat supported, which is why</span>
      <span class="s4">// this code block is conditional.  However, it's preferable to pass</span>
      <span class="s4">// the source map URL to SourceMapConsumer, so that this function</span>
      <span class="s4">// can implement the source URL resolution algorithm as outlined in</span>
      <span class="s4">// the spec.  This block is basically the equivalent of:</span>
      <span class="s4">//    new URL(sourceURL, sourceMapURL).toString()</span>
      <span class="s4">// ... except it avoids using URL, which wasn't available in the</span>
      <span class="s4">// older releases of node still supported by this library.</span>
      <span class="s4">//</span>
      <span class="s4">// The spec says:</span>
      <span class="s4">//   If the sources are not absolute URLs after prepending of the</span>
      <span class="s4">//   “sourceRoot”, the sources are resolved relative to the</span>
      <span class="s4">//   SourceMap (like resolving script src in a html document).</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceMapURL</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">parsed </span><span class="s0">= </span><span class="s2">urlParse</span><span class="s0">(</span><span class="s2">sourceMapURL</span><span class="s0">);</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">parsed</span><span class="s0">) {</span>
          <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">&quot;sourceMapURL could not be parsed&quot;</span><span class="s0">);</span>
        <span class="s0">}</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">parsed</span><span class="s0">.</span><span class="s2">path</span><span class="s0">) {</span>
          <span class="s4">// Strip the last path component, but keep the &quot;/&quot;.</span>
          <span class="s1">var </span><span class="s2">index </span><span class="s0">= </span><span class="s2">parsed</span><span class="s0">.</span><span class="s2">path</span><span class="s0">.</span><span class="s2">lastIndexOf</span><span class="s0">(</span><span class="s3">'/'</span><span class="s0">);</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">index </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s2">parsed</span><span class="s0">.</span><span class="s2">path </span><span class="s0">= </span><span class="s2">parsed</span><span class="s0">.</span><span class="s2">path</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s2">index </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
          <span class="s0">}</span>
        <span class="s0">}</span>
        <span class="s2">sourceURL </span><span class="s0">= </span><span class="s2">join</span><span class="s0">(</span><span class="s2">urlGenerate</span><span class="s0">(</span><span class="s2">parsed</span><span class="s0">), </span><span class="s2">sourceURL</span><span class="s0">);</span>
      <span class="s0">}</span>

      <span class="s1">return </span><span class="s2">normalize</span><span class="s0">(</span><span class="s2">sourceURL</span><span class="s0">);</span>
    <span class="s0">}</span>
    <span class="s2">exports</span><span class="s0">.</span><span class="s2">computeSourceURL </span><span class="s0">= </span><span class="s2">computeSourceURL</span><span class="s0">;</span>
    <span class="s0">});</span>
    <span class="s1">var </span><span class="s2">util_1 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">getArg</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_2 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">urlParse</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_3 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">urlGenerate</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_4 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">normalize</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_5 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">join</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_6 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">isAbsolute</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_7 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">relative</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_8 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">toSetString</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_9 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">fromSetString</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_10 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">compareByOriginalPositions</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_11 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">compareByGeneratedPositionsDeflated</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_12 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">compareByGeneratedPositionsInflated</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_13 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">parseSourceMapInput</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">util_14 </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">computeSourceURL</span><span class="s0">;</span>

    <span class="s4">/* -*- Mode: js; js-indent-level: 2; -*- */</span>
    <span class="s4">/* 
     * Copyright 2011 Mozilla Foundation and contributors 
     * Licensed under the New BSD license. See LICENSE or: 
     * http://opensource.org/licenses/BSD-3-Clause 
     */</span>


    <span class="s1">var </span><span class="s2">has </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">hasNativeMap </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">Map </span><span class="s0">!== </span><span class="s3">&quot;undefined&quot;</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* A data structure which is a combination of an array and a set. Adding a new</span>
     <span class="s7">* member is O(1), testing for membership is O(1), and finding the index of an</span>
     <span class="s7">* element is O(1). Removing elements from the set is not supported. Only</span>
     <span class="s7">* strings are supported for membership.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">ArraySet</span><span class="s0">() {</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_array </span><span class="s0">= [];</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_set </span><span class="s0">= </span><span class="s2">hasNativeMap </span><span class="s0">? </span><span class="s1">new </span><span class="s2">Map</span><span class="s0">() : </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">create</span><span class="s0">(</span><span class="s1">null</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Static method for creating ArraySet instances from an existing array.</span>
     <span class="s7">*/</span>
    <span class="s2">ArraySet</span><span class="s0">.</span><span class="s2">fromArray </span><span class="s0">= </span><span class="s1">function </span><span class="s2">ArraySet_fromArray</span><span class="s0">(</span><span class="s2">aArray</span><span class="s0">, </span><span class="s2">aAllowDuplicates</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">set </span><span class="s0">= </span><span class="s1">new </span><span class="s2">ArraySet</span><span class="s0">();</span>
      <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">, </span><span class="s2">len </span><span class="s0">= </span><span class="s2">aArray</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">len</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
        <span class="s2">set</span><span class="s0">.</span><span class="s2">add</span><span class="s0">(</span><span class="s2">aArray</span><span class="s0">[</span><span class="s2">i</span><span class="s0">], </span><span class="s2">aAllowDuplicates</span><span class="s0">);</span>
      <span class="s0">}</span>
      <span class="s1">return </span><span class="s2">set</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Return how many unique items are in this ArraySet. If duplicates have been</span>
     <span class="s7">* added, than those do not count towards the size.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@returns </span><span class="s7">Number</span>
     <span class="s7">*/</span>
    <span class="s2">ArraySet</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">size </span><span class="s0">= </span><span class="s1">function </span><span class="s2">ArraySet_size</span><span class="s0">() {</span>
      <span class="s1">return </span><span class="s2">hasNativeMap </span><span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">.</span><span class="s2">size </span><span class="s0">: </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">getOwnPropertyNames</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">).</span><span class="s2">length</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Add the given string to this set.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">String aStr</span>
     <span class="s7">*/</span>
    <span class="s2">ArraySet</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">add </span><span class="s0">= </span><span class="s1">function </span><span class="s2">ArraySet_add</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">, </span><span class="s2">aAllowDuplicates</span><span class="s0">) {</span>
      <span class="s1">var </span><span class="s2">sStr </span><span class="s0">= </span><span class="s2">hasNativeMap </span><span class="s0">? </span><span class="s2">aStr </span><span class="s0">: </span><span class="s2">util</span><span class="s0">.</span><span class="s2">toSetString</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">);</span>
      <span class="s1">var </span><span class="s2">isDuplicate </span><span class="s0">= </span><span class="s2">hasNativeMap </span><span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">has</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">) : </span><span class="s2">has</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">, </span><span class="s2">sStr</span><span class="s0">);</span>
      <span class="s1">var </span><span class="s2">idx </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">.</span><span class="s2">length</span><span class="s0">;</span>
      <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDuplicate </span><span class="s0">|| </span><span class="s2">aAllowDuplicates</span><span class="s0">) {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">);</span>
      <span class="s0">}</span>
      <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDuplicate</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">hasNativeMap</span><span class="s0">) {</span>
          <span class="s1">this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">.</span><span class="s2">set</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">, </span><span class="s2">idx</span><span class="s0">);</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
          <span class="s1">this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">[</span><span class="s2">sStr</span><span class="s0">] = </span><span class="s2">idx</span><span class="s0">;</span>
        <span class="s0">}</span>
      <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Is the given string a member of this set?</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">String aStr</span>
     <span class="s7">*/</span>
    <span class="s2">ArraySet</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">has </span><span class="s0">= </span><span class="s1">function </span><span class="s2">ArraySet_has</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">hasNativeMap</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">.</span><span class="s2">has</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">);</span>
      <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
        <span class="s1">var </span><span class="s2">sStr </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">toSetString</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">);</span>
        <span class="s1">return </span><span class="s2">has</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">, </span><span class="s2">sStr</span><span class="s0">);</span>
      <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* What is the index of the given string in the array?</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">String aStr</span>
     <span class="s7">*/</span>
    <span class="s2">ArraySet</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">indexOf </span><span class="s0">= </span><span class="s1">function </span><span class="s2">ArraySet_indexOf</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">hasNativeMap</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">idx </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">.</span><span class="s2">get</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">);</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">idx </span><span class="s0">&gt;= </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">idx</span><span class="s0">;</span>
        <span class="s0">}</span>
      <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
        <span class="s1">var </span><span class="s2">sStr </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">toSetString</span><span class="s0">(</span><span class="s2">aStr</span><span class="s0">);</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">has</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">, </span><span class="s2">sStr</span><span class="s0">)) {</span>
          <span class="s1">return this</span><span class="s0">.</span><span class="s2">_set</span><span class="s0">[</span><span class="s2">sStr</span><span class="s0">];</span>
        <span class="s0">}</span>
      <span class="s0">}</span>

      <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'&quot;' </span><span class="s0">+ </span><span class="s2">aStr </span><span class="s0">+ </span><span class="s3">'&quot; is not in the set.'</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* What is the element at the given index?</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">Number aIdx</span>
     <span class="s7">*/</span>
    <span class="s2">ArraySet</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">at </span><span class="s0">= </span><span class="s1">function </span><span class="s2">ArraySet_at</span><span class="s0">(</span><span class="s2">aIdx</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">aIdx </span><span class="s0">&gt;= </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">aIdx </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">[</span><span class="s2">aIdx</span><span class="s0">];</span>
      <span class="s0">}</span>
      <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'No element indexed by ' </span><span class="s0">+ </span><span class="s2">aIdx</span><span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Returns the array representation of this set (which has the proper indices</span>
     <span class="s7">* indicated by indexOf). Note that this is a copy of the internal array used</span>
     <span class="s7">* for storing the members so that no one can mess with internal state.</span>
     <span class="s7">*/</span>
    <span class="s2">ArraySet</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">toArray </span><span class="s0">= </span><span class="s1">function </span><span class="s2">ArraySet_toArray</span><span class="s0">() {</span>
      <span class="s1">return this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">();</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">ArraySet_1 </span><span class="s0">= </span><span class="s2">ArraySet</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">arraySet </span><span class="s0">= {</span>
    	<span class="s2">ArraySet</span><span class="s0">: </span><span class="s2">ArraySet_1</span>
    <span class="s0">};</span>

    <span class="s4">/* -*- Mode: js; js-indent-level: 2; -*- */</span>
    <span class="s4">/* 
     * Copyright 2014 Mozilla Foundation and contributors 
     * Licensed under the New BSD license. See LICENSE or: 
     * http://opensource.org/licenses/BSD-3-Clause 
     */</span>



    <span class="s7">/**</span>
     <span class="s7">* Determine whether mappingB is after mappingA with respect to generated</span>
     <span class="s7">* position.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">generatedPositionAfter</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">) {</span>
      <span class="s4">// Optimized for most common case</span>
      <span class="s1">var </span><span class="s2">lineA </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">generatedLine</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">lineB </span><span class="s0">= </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">generatedLine</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">columnA </span><span class="s0">= </span><span class="s2">mappingA</span><span class="s0">.</span><span class="s2">generatedColumn</span><span class="s0">;</span>
      <span class="s1">var </span><span class="s2">columnB </span><span class="s0">= </span><span class="s2">mappingB</span><span class="s0">.</span><span class="s2">generatedColumn</span><span class="s0">;</span>
      <span class="s1">return </span><span class="s2">lineB </span><span class="s0">&gt; </span><span class="s2">lineA </span><span class="s0">|| </span><span class="s2">lineB </span><span class="s0">== </span><span class="s2">lineA </span><span class="s0">&amp;&amp; </span><span class="s2">columnB </span><span class="s0">&gt;= </span><span class="s2">columnA </span><span class="s0">||</span>
             <span class="s2">util</span><span class="s0">.</span><span class="s2">compareByGeneratedPositionsInflated</span><span class="s0">(</span><span class="s2">mappingA</span><span class="s0">, </span><span class="s2">mappingB</span><span class="s0">) &lt;= </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s7">/**</span>
     <span class="s7">* A data structure to provide a sorted view of accumulated mappings in a</span>
     <span class="s7">* performance conscious manner. It trades a neglibable overhead in general</span>
     <span class="s7">* case for a large speedup in case of mappings being added in order.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">MappingList</span><span class="s0">() {</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_array </span><span class="s0">= [];</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_sorted </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
      <span class="s4">// Serves as infimum</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_last </span><span class="s0">= {</span><span class="s2">generatedLine</span><span class="s0">: -</span><span class="s5">1</span><span class="s0">, </span><span class="s2">generatedColumn</span><span class="s0">: </span><span class="s5">0</span><span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Iterate through internal items. This method takes the same arguments that</span>
     <span class="s7">* `Array.prototype.forEach` takes.</span>
     <span class="s7">*</span>
     <span class="s7">* NOTE: The order of the mappings is NOT guaranteed.</span>
     <span class="s7">*/</span>
    <span class="s2">MappingList</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">unsortedForEach </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">MappingList_forEach</span><span class="s0">(</span><span class="s2">aCallback</span><span class="s0">, </span><span class="s2">aThisArg</span><span class="s0">) {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">.</span><span class="s2">forEach</span><span class="s0">(</span><span class="s2">aCallback</span><span class="s0">, </span><span class="s2">aThisArg</span><span class="s0">);</span>
      <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Add the given source mapping.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">Object aMapping</span>
     <span class="s7">*/</span>
    <span class="s2">MappingList</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">add </span><span class="s0">= </span><span class="s1">function </span><span class="s2">MappingList_add</span><span class="s0">(</span><span class="s2">aMapping</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(</span><span class="s2">generatedPositionAfter</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_last</span><span class="s0">, </span><span class="s2">aMapping</span><span class="s0">)) {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_last </span><span class="s0">= </span><span class="s2">aMapping</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">aMapping</span><span class="s0">);</span>
      <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_sorted </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">aMapping</span><span class="s0">);</span>
      <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Returns the flat, sorted array of mappings. The mappings are sorted by</span>
     <span class="s7">* generated position.</span>
     <span class="s7">*</span>
     <span class="s7">* WARNING: This method returns internal data without copying, for</span>
     <span class="s7">* performance. The return value must NOT be mutated, and should be treated as</span>
     <span class="s7">* an immutable borrow. If you want to take ownership, you must make your own</span>
     <span class="s7">* copy.</span>
     <span class="s7">*/</span>
    <span class="s2">MappingList</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">toArray </span><span class="s0">= </span><span class="s1">function </span><span class="s2">MappingList_toArray</span><span class="s0">() {</span>
      <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sorted</span><span class="s0">) {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">.</span><span class="s2">sort</span><span class="s0">(</span><span class="s2">util</span><span class="s0">.</span><span class="s2">compareByGeneratedPositionsInflated</span><span class="s0">);</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_sorted </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
      <span class="s0">}</span>
      <span class="s1">return this</span><span class="s0">.</span><span class="s2">_array</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">MappingList_1 </span><span class="s0">= </span><span class="s2">MappingList</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">mappingList </span><span class="s0">= {</span>
    	<span class="s2">MappingList</span><span class="s0">: </span><span class="s2">MappingList_1</span>
    <span class="s0">};</span>

    <span class="s4">/* -*- Mode: js; js-indent-level: 2; -*- */</span>
    <span class="s4">/* 
     * Copyright 2011 Mozilla Foundation and contributors 
     * Licensed under the New BSD license. See LICENSE or: 
     * http://opensource.org/licenses/BSD-3-Clause 
     */</span>



    <span class="s1">var </span><span class="s2">ArraySet$1 </span><span class="s0">= </span><span class="s2">arraySet</span><span class="s0">.</span><span class="s2">ArraySet</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">MappingList$1 </span><span class="s0">= </span><span class="s2">mappingList</span><span class="s0">.</span><span class="s2">MappingList</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* An instance of the SourceMapGenerator represents a source map which is</span>
     <span class="s7">* being built incrementally. You may pass an object with the following</span>
     <span class="s7">* properties:</span>
     <span class="s7">*</span>
     <span class="s7">*   - file: The filename of the generated source.</span>
     <span class="s7">*   - sourceRoot: A root for all relative URLs in this source map.</span>
     <span class="s7">*/</span>
    <span class="s1">function </span><span class="s2">SourceMapGenerator</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">) {</span>
      <span class="s1">if </span><span class="s0">(!</span><span class="s2">aArgs</span><span class="s0">) {</span>
        <span class="s2">aArgs </span><span class="s0">= {};</span>
      <span class="s0">}</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_file </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">getArg</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">, </span><span class="s3">'file'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_sourceRoot </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">getArg</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">, </span><span class="s3">'sourceRoot'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_skipValidation </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">getArg</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">, </span><span class="s3">'skipValidation'</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_sources </span><span class="s0">= </span><span class="s1">new </span><span class="s2">ArraySet$1</span><span class="s0">();</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_names </span><span class="s0">= </span><span class="s1">new </span><span class="s2">ArraySet$1</span><span class="s0">();</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_mappings </span><span class="s0">= </span><span class="s1">new </span><span class="s2">MappingList$1</span><span class="s0">();</span>
      <span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">_version </span><span class="s0">= </span><span class="s5">3</span><span class="s0">;</span>

    <span class="s7">/**</span>
     <span class="s7">* Creates a new SourceMapGenerator based on a SourceMapConsumer</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aSourceMapConsumer The SourceMap.</span>
     <span class="s7">*/</span>
    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">fromSourceMap </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_fromSourceMap</span><span class="s0">(</span><span class="s2">aSourceMapConsumer</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">sourceRoot </span><span class="s0">= </span><span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">sourceRoot</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">generator </span><span class="s0">= </span><span class="s1">new </span><span class="s2">SourceMapGenerator</span><span class="s0">({</span>
          <span class="s2">file</span><span class="s0">: </span><span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">file</span><span class="s0">,</span>
          <span class="s2">sourceRoot</span><span class="s0">: </span><span class="s2">sourceRoot</span>
        <span class="s0">});</span>
        <span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">eachMapping</span><span class="s0">(</span><span class="s1">function </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">) {</span>
          <span class="s1">var </span><span class="s2">newMapping </span><span class="s0">= {</span>
            <span class="s2">generated</span><span class="s0">: {</span>
              <span class="s2">line</span><span class="s0">: </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">generatedLine</span><span class="s0">,</span>
              <span class="s2">column</span><span class="s0">: </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">generatedColumn</span>
            <span class="s0">}</span>
          <span class="s0">};</span>

          <span class="s1">if </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">source </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">newMapping</span><span class="s0">.</span><span class="s2">source </span><span class="s0">= </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">source</span><span class="s0">;</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceRoot </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
              <span class="s2">newMapping</span><span class="s0">.</span><span class="s2">source </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">relative</span><span class="s0">(</span><span class="s2">sourceRoot</span><span class="s0">, </span><span class="s2">newMapping</span><span class="s0">.</span><span class="s2">source</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s2">newMapping</span><span class="s0">.</span><span class="s2">original </span><span class="s0">= {</span>
              <span class="s2">line</span><span class="s0">: </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalLine</span><span class="s0">,</span>
              <span class="s2">column</span><span class="s0">: </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalColumn</span>
            <span class="s0">};</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">name </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
              <span class="s2">newMapping</span><span class="s0">.</span><span class="s2">name </span><span class="s0">= </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">name</span><span class="s0">;</span>
            <span class="s0">}</span>
          <span class="s0">}</span>

          <span class="s2">generator</span><span class="s0">.</span><span class="s2">addMapping</span><span class="s0">(</span><span class="s2">newMapping</span><span class="s0">);</span>
        <span class="s0">});</span>
        <span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">sources</span><span class="s0">.</span><span class="s2">forEach</span><span class="s0">(</span><span class="s1">function </span><span class="s0">(</span><span class="s2">sourceFile</span><span class="s0">) {</span>
          <span class="s1">var </span><span class="s2">sourceRelative </span><span class="s0">= </span><span class="s2">sourceFile</span><span class="s0">;</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceRoot </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">sourceRelative </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">relative</span><span class="s0">(</span><span class="s2">sourceRoot</span><span class="s0">, </span><span class="s2">sourceFile</span><span class="s0">);</span>
          <span class="s0">}</span>

          <span class="s1">if </span><span class="s0">(!</span><span class="s2">generator</span><span class="s0">.</span><span class="s2">_sources</span><span class="s0">.</span><span class="s2">has</span><span class="s0">(</span><span class="s2">sourceRelative</span><span class="s0">)) {</span>
            <span class="s2">generator</span><span class="s0">.</span><span class="s2">_sources</span><span class="s0">.</span><span class="s2">add</span><span class="s0">(</span><span class="s2">sourceRelative</span><span class="s0">);</span>
          <span class="s0">}</span>

          <span class="s1">var </span><span class="s2">content </span><span class="s0">= </span><span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">sourceContentFor</span><span class="s0">(</span><span class="s2">sourceFile</span><span class="s0">);</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">content </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">generator</span><span class="s0">.</span><span class="s2">setSourceContent</span><span class="s0">(</span><span class="s2">sourceFile</span><span class="s0">, </span><span class="s2">content</span><span class="s0">);</span>
          <span class="s0">}</span>
        <span class="s0">});</span>
        <span class="s1">return </span><span class="s2">generator</span><span class="s0">;</span>
      <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Add a single mapping from original source line and column to the generated</span>
     <span class="s7">* source's line and column for this source map being created. The mapping</span>
     <span class="s7">* object should have the following properties:</span>
     <span class="s7">*</span>
     <span class="s7">*   - generated: An object with the generated line and column positions.</span>
     <span class="s7">*   - original: An object with the original line and column positions.</span>
     <span class="s7">*   - source: The original source file (relative to the sourceRoot).</span>
     <span class="s7">*   - name: An optional original token name for this mapping.</span>
     <span class="s7">*/</span>
    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">addMapping </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_addMapping</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">generated </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">getArg</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">, </span><span class="s3">'generated'</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">original </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">getArg</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">, </span><span class="s3">'original'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">source </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">getArg</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">, </span><span class="s3">'source'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">getArg</span><span class="s0">(</span><span class="s2">aArgs</span><span class="s0">, </span><span class="s3">'name'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_skipValidation</span><span class="s0">) {</span>
          <span class="s1">this</span><span class="s0">.</span><span class="s2">_validateMapping</span><span class="s0">(</span><span class="s2">generated</span><span class="s0">, </span><span class="s2">original</span><span class="s0">, </span><span class="s2">source</span><span class="s0">, </span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">source </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
          <span class="s2">source </span><span class="s0">= </span><span class="s2">String</span><span class="s0">(</span><span class="s2">source</span><span class="s0">);</span>
          <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sources</span><span class="s0">.</span><span class="s2">has</span><span class="s0">(</span><span class="s2">source</span><span class="s0">)) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">_sources</span><span class="s0">.</span><span class="s2">add</span><span class="s0">(</span><span class="s2">source</span><span class="s0">);</span>
          <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">name </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
          <span class="s2">name </span><span class="s0">= </span><span class="s2">String</span><span class="s0">(</span><span class="s2">name</span><span class="s0">);</span>
          <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_names</span><span class="s0">.</span><span class="s2">has</span><span class="s0">(</span><span class="s2">name</span><span class="s0">)) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">_names</span><span class="s0">.</span><span class="s2">add</span><span class="s0">(</span><span class="s2">name</span><span class="s0">);</span>
          <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">_mappings</span><span class="s0">.</span><span class="s2">add</span><span class="s0">({</span>
          <span class="s2">generatedLine</span><span class="s0">: </span><span class="s2">generated</span><span class="s0">.</span><span class="s2">line</span><span class="s0">,</span>
          <span class="s2">generatedColumn</span><span class="s0">: </span><span class="s2">generated</span><span class="s0">.</span><span class="s2">column</span><span class="s0">,</span>
          <span class="s2">originalLine</span><span class="s0">: </span><span class="s2">original </span><span class="s0">!= </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">original</span><span class="s0">.</span><span class="s2">line</span><span class="s0">,</span>
          <span class="s2">originalColumn</span><span class="s0">: </span><span class="s2">original </span><span class="s0">!= </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">original</span><span class="s0">.</span><span class="s2">column</span><span class="s0">,</span>
          <span class="s2">source</span><span class="s0">: </span><span class="s2">source</span><span class="s0">,</span>
          <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span>
        <span class="s0">});</span>
      <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Set the source content for a source file.</span>
     <span class="s7">*/</span>
    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">setSourceContent </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_setSourceContent</span><span class="s0">(</span><span class="s2">aSourceFile</span><span class="s0">, </span><span class="s2">aSourceContent</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">source </span><span class="s0">= </span><span class="s2">aSourceFile</span><span class="s0">;</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourceRoot </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
          <span class="s2">source </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">relative</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourceRoot</span><span class="s0">, </span><span class="s2">source</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">aSourceContent </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
          <span class="s4">// Add the source content to the _sourcesContents map.</span>
          <span class="s4">// Create a new _sourcesContents map if the property is null.</span>
          <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">create</span><span class="s0">(</span><span class="s1">null</span><span class="s0">);</span>
          <span class="s0">}</span>
          <span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">[</span><span class="s2">util</span><span class="s0">.</span><span class="s2">toSetString</span><span class="s0">(</span><span class="s2">source</span><span class="s0">)] = </span><span class="s2">aSourceContent</span><span class="s0">;</span>
        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">) {</span>
          <span class="s4">// Remove the source file from the _sourcesContents map.</span>
          <span class="s4">// If the _sourcesContents map is empty, set the property to null.</span>
          <span class="s1">delete this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">[</span><span class="s2">util</span><span class="s0">.</span><span class="s2">toSetString</span><span class="s0">(</span><span class="s2">source</span><span class="s0">)];</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">).</span><span class="s2">length </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
          <span class="s0">}</span>
        <span class="s0">}</span>
      <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Applies the mappings of a sub-source-map for a specific source file to the</span>
     <span class="s7">* source map being generated. Each mapping to the supplied source file is</span>
     <span class="s7">* rewritten using the supplied source map. Note: The resolution for the</span>
     <span class="s7">* resulting mappings is the minimium of this map and the supplied map.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aSourceMapConsumer The source map to be applied.</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aSourceFile Optional. The filename of the source file.</span>
     <span class="s7">*        If omitted, SourceMapConsumer's file property will be used.</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">aSourceMapPath Optional. The dirname of the path to the source map</span>
     <span class="s7">*        to be applied. If relative, it is relative to the SourceMapConsumer.</span>
     <span class="s7">*        This parameter is needed when the two source maps aren't in the same</span>
     <span class="s7">*        directory, and the source map to be applied contains relative source</span>
     <span class="s7">*        paths. If so, those relative source paths need to be rewritten</span>
     <span class="s7">*        relative to the SourceMapGenerator.</span>
     <span class="s7">*/</span>
    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">applySourceMap </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_applySourceMap</span><span class="s0">(</span><span class="s2">aSourceMapConsumer</span><span class="s0">, </span><span class="s2">aSourceFile</span><span class="s0">, </span><span class="s2">aSourceMapPath</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">sourceFile </span><span class="s0">= </span><span class="s2">aSourceFile</span><span class="s0">;</span>
        <span class="s4">// If aSourceFile is omitted, we will use the file property of the SourceMap</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">aSourceFile </span><span class="s0">== </span><span class="s1">null</span><span class="s0">) {</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">file </span><span class="s0">== </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span>
              <span class="s3">'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' </span><span class="s0">+</span>
              <span class="s3">'or the source map</span><span class="s1">\'</span><span class="s3">s &quot;file&quot; property. Both were omitted.'</span>
            <span class="s0">);</span>
          <span class="s0">}</span>
          <span class="s2">sourceFile </span><span class="s0">= </span><span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">file</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s1">var </span><span class="s2">sourceRoot </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourceRoot</span><span class="s0">;</span>
        <span class="s4">// Make &quot;sourceFile&quot; relative if an absolute Url is passed.</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceRoot </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
          <span class="s2">sourceFile </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">relative</span><span class="s0">(</span><span class="s2">sourceRoot</span><span class="s0">, </span><span class="s2">sourceFile</span><span class="s0">);</span>
        <span class="s0">}</span>
        <span class="s4">// Applying the SourceMap can add and remove items from the sources and</span>
        <span class="s4">// the names array.</span>
        <span class="s1">var </span><span class="s2">newSources </span><span class="s0">= </span><span class="s1">new </span><span class="s2">ArraySet$1</span><span class="s0">();</span>
        <span class="s1">var </span><span class="s2">newNames </span><span class="s0">= </span><span class="s1">new </span><span class="s2">ArraySet$1</span><span class="s0">();</span>

        <span class="s4">// Find mappings for the &quot;sourceFile&quot;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_mappings</span><span class="s0">.</span><span class="s2">unsortedForEach</span><span class="s0">(</span><span class="s1">function </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">) {</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">source </span><span class="s0">=== </span><span class="s2">sourceFile </span><span class="s0">&amp;&amp; </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalLine </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s4">// Check if it can be mapped by the source map, then update the mapping.</span>
            <span class="s1">var </span><span class="s2">original </span><span class="s0">= </span><span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">originalPositionFor</span><span class="s0">({</span>
              <span class="s2">line</span><span class="s0">: </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalLine</span><span class="s0">,</span>
              <span class="s2">column</span><span class="s0">: </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalColumn</span>
            <span class="s0">});</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">original</span><span class="s0">.</span><span class="s2">source </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
              <span class="s4">// Copy mapping</span>
              <span class="s2">mapping</span><span class="s0">.</span><span class="s2">source </span><span class="s0">= </span><span class="s2">original</span><span class="s0">.</span><span class="s2">source</span><span class="s0">;</span>
              <span class="s1">if </span><span class="s0">(</span><span class="s2">aSourceMapPath </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">mapping</span><span class="s0">.</span><span class="s2">source </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">join</span><span class="s0">(</span><span class="s2">aSourceMapPath</span><span class="s0">, </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">source</span><span class="s0">);</span>
              <span class="s0">}</span>
              <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceRoot </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">mapping</span><span class="s0">.</span><span class="s2">source </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">relative</span><span class="s0">(</span><span class="s2">sourceRoot</span><span class="s0">, </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">source</span><span class="s0">);</span>
              <span class="s0">}</span>
              <span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalLine </span><span class="s0">= </span><span class="s2">original</span><span class="s0">.</span><span class="s2">line</span><span class="s0">;</span>
              <span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalColumn </span><span class="s0">= </span><span class="s2">original</span><span class="s0">.</span><span class="s2">column</span><span class="s0">;</span>
              <span class="s1">if </span><span class="s0">(</span><span class="s2">original</span><span class="s0">.</span><span class="s2">name </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">mapping</span><span class="s0">.</span><span class="s2">name </span><span class="s0">= </span><span class="s2">original</span><span class="s0">.</span><span class="s2">name</span><span class="s0">;</span>
              <span class="s0">}</span>
            <span class="s0">}</span>
          <span class="s0">}</span>

          <span class="s1">var </span><span class="s2">source </span><span class="s0">= </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">source</span><span class="s0">;</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">source </span><span class="s0">!= </span><span class="s1">null </span><span class="s0">&amp;&amp; !</span><span class="s2">newSources</span><span class="s0">.</span><span class="s2">has</span><span class="s0">(</span><span class="s2">source</span><span class="s0">)) {</span>
            <span class="s2">newSources</span><span class="s0">.</span><span class="s2">add</span><span class="s0">(</span><span class="s2">source</span><span class="s0">);</span>
          <span class="s0">}</span>

          <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">name</span><span class="s0">;</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">name </span><span class="s0">!= </span><span class="s1">null </span><span class="s0">&amp;&amp; !</span><span class="s2">newNames</span><span class="s0">.</span><span class="s2">has</span><span class="s0">(</span><span class="s2">name</span><span class="s0">)) {</span>
            <span class="s2">newNames</span><span class="s0">.</span><span class="s2">add</span><span class="s0">(</span><span class="s2">name</span><span class="s0">);</span>
          <span class="s0">}</span>

        <span class="s0">}, </span><span class="s1">this</span><span class="s0">);</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_sources </span><span class="s0">= </span><span class="s2">newSources</span><span class="s0">;</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">_names </span><span class="s0">= </span><span class="s2">newNames</span><span class="s0">;</span>

        <span class="s4">// Copy sourcesContents of applied map.</span>
        <span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">sources</span><span class="s0">.</span><span class="s2">forEach</span><span class="s0">(</span><span class="s1">function </span><span class="s0">(</span><span class="s2">sourceFile</span><span class="s0">) {</span>
          <span class="s1">var </span><span class="s2">content </span><span class="s0">= </span><span class="s2">aSourceMapConsumer</span><span class="s0">.</span><span class="s2">sourceContentFor</span><span class="s0">(</span><span class="s2">sourceFile</span><span class="s0">);</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">content </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">aSourceMapPath </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
              <span class="s2">sourceFile </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">join</span><span class="s0">(</span><span class="s2">aSourceMapPath</span><span class="s0">, </span><span class="s2">sourceFile</span><span class="s0">);</span>
            <span class="s0">}</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceRoot </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
              <span class="s2">sourceFile </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">relative</span><span class="s0">(</span><span class="s2">sourceRoot</span><span class="s0">, </span><span class="s2">sourceFile</span><span class="s0">);</span>
            <span class="s0">}</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">setSourceContent</span><span class="s0">(</span><span class="s2">sourceFile</span><span class="s0">, </span><span class="s2">content</span><span class="s0">);</span>
          <span class="s0">}</span>
        <span class="s0">}, </span><span class="s1">this</span><span class="s0">);</span>
      <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* A mapping can have one of the three levels of data:</span>
     <span class="s7">*</span>
     <span class="s7">*   1. Just the generated position.</span>
     <span class="s7">*   2. The Generated position, original position, and original source.</span>
     <span class="s7">*   3. Generated and original position, original source, as well as a name</span>
     <span class="s7">*      token.</span>
     <span class="s7">*</span>
     <span class="s7">* To maintain consistency, we validate that any new mapping being added falls</span>
     <span class="s7">* in to one of these categories.</span>
     <span class="s7">*/</span>
    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">_validateMapping </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_validateMapping</span><span class="s0">(</span><span class="s2">aGenerated</span><span class="s0">, </span><span class="s2">aOriginal</span><span class="s0">, </span><span class="s2">aSource</span><span class="s0">,</span>
                                                  <span class="s2">aName</span><span class="s0">) {</span>
        <span class="s4">// When aOriginal is truthy but has empty values for .line and .column,</span>
        <span class="s4">// it is most likely a programmer error. In this case we throw a very</span>
        <span class="s4">// specific error message to try to guide them the right way.</span>
        <span class="s4">// For example: https://github.com/Polymer/polymer-bundler/pull/519</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">aOriginal </span><span class="s0">&amp;&amp; </span><span class="s1">typeof </span><span class="s2">aOriginal</span><span class="s0">.</span><span class="s2">line </span><span class="s0">!== </span><span class="s3">'number' </span><span class="s0">&amp;&amp; </span><span class="s1">typeof </span><span class="s2">aOriginal</span><span class="s0">.</span><span class="s2">column </span><span class="s0">!== </span><span class="s3">'number'</span><span class="s0">) {</span>
            <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span>
                <span class="s3">'original.line and original.column are not numbers -- you probably meant to omit ' </span><span class="s0">+</span>
                <span class="s3">'the original mapping entirely and only map the generated position. If so, pass ' </span><span class="s0">+</span>
                <span class="s3">'null for the original mapping instead of an object with empty or null values.'</span>
            <span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">aGenerated </span><span class="s0">&amp;&amp; </span><span class="s3">'line' </span><span class="s1">in </span><span class="s2">aGenerated </span><span class="s0">&amp;&amp; </span><span class="s3">'column' </span><span class="s1">in </span><span class="s2">aGenerated</span>
            <span class="s0">&amp;&amp; </span><span class="s2">aGenerated</span><span class="s0">.</span><span class="s2">line </span><span class="s0">&gt; </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">aGenerated</span><span class="s0">.</span><span class="s2">column </span><span class="s0">&gt;= </span><span class="s5">0</span>
            <span class="s0">&amp;&amp; !</span><span class="s2">aOriginal </span><span class="s0">&amp;&amp; !</span><span class="s2">aSource </span><span class="s0">&amp;&amp; !</span><span class="s2">aName</span><span class="s0">) {</span>
          <span class="s4">// Case 1.</span>
          <span class="s1">return</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s1">else if </span><span class="s0">(</span><span class="s2">aGenerated </span><span class="s0">&amp;&amp; </span><span class="s3">'line' </span><span class="s1">in </span><span class="s2">aGenerated </span><span class="s0">&amp;&amp; </span><span class="s3">'column' </span><span class="s1">in </span><span class="s2">aGenerated</span>
                 <span class="s0">&amp;&amp; </span><span class="s2">aOriginal </span><span class="s0">&amp;&amp; </span><span class="s3">'line' </span><span class="s1">in </span><span class="s2">aOriginal </span><span class="s0">&amp;&amp; </span><span class="s3">'column' </span><span class="s1">in </span><span class="s2">aOriginal</span>
                 <span class="s0">&amp;&amp; </span><span class="s2">aGenerated</span><span class="s0">.</span><span class="s2">line </span><span class="s0">&gt; </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">aGenerated</span><span class="s0">.</span><span class="s2">column </span><span class="s0">&gt;= </span><span class="s5">0</span>
                 <span class="s0">&amp;&amp; </span><span class="s2">aOriginal</span><span class="s0">.</span><span class="s2">line </span><span class="s0">&gt; </span><span class="s5">0 </span><span class="s0">&amp;&amp; </span><span class="s2">aOriginal</span><span class="s0">.</span><span class="s2">column </span><span class="s0">&gt;= </span><span class="s5">0</span>
                 <span class="s0">&amp;&amp; </span><span class="s2">aSource</span><span class="s0">) {</span>
          <span class="s4">// Cases 2 and 3.</span>
          <span class="s1">return</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s1">else </span><span class="s0">{</span>
          <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Invalid mapping: ' </span><span class="s0">+ </span><span class="s2">JSON</span><span class="s0">.</span><span class="s2">stringify</span><span class="s0">({</span>
            <span class="s2">generated</span><span class="s0">: </span><span class="s2">aGenerated</span><span class="s0">,</span>
            <span class="s2">source</span><span class="s0">: </span><span class="s2">aSource</span><span class="s0">,</span>
            <span class="s2">original</span><span class="s0">: </span><span class="s2">aOriginal</span><span class="s0">,</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">aName</span>
          <span class="s0">}));</span>
        <span class="s0">}</span>
      <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Serialize the accumulated mappings in to the stream of base 64 VLQs</span>
     <span class="s7">* specified by the source map format.</span>
     <span class="s7">*/</span>
    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">_serializeMappings </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_serializeMappings</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">previousGeneratedColumn </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">previousGeneratedLine </span><span class="s0">= </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">previousOriginalColumn </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">previousOriginalLine </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">previousName </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">previousSource </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">next</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">mapping</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">nameIdx</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">sourceIdx</span><span class="s0">;</span>

        <span class="s1">var </span><span class="s2">mappings </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_mappings</span><span class="s0">.</span><span class="s2">toArray</span><span class="s0">();</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">, </span><span class="s2">len </span><span class="s0">= </span><span class="s2">mappings</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">len</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
          <span class="s2">mapping </span><span class="s0">= </span><span class="s2">mappings</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
          <span class="s2">next </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>

          <span class="s1">if </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">generatedLine </span><span class="s0">!== </span><span class="s2">previousGeneratedLine</span><span class="s0">) {</span>
            <span class="s2">previousGeneratedColumn </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
            <span class="s1">while </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">generatedLine </span><span class="s0">!== </span><span class="s2">previousGeneratedLine</span><span class="s0">) {</span>
              <span class="s2">next </span><span class="s0">+= </span><span class="s3">';'</span><span class="s0">;</span>
              <span class="s2">previousGeneratedLine</span><span class="s0">++;</span>
            <span class="s0">}</span>
          <span class="s0">}</span>
          <span class="s1">else </span><span class="s0">{</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
              <span class="s1">if </span><span class="s0">(!</span><span class="s2">util</span><span class="s0">.</span><span class="s2">compareByGeneratedPositionsInflated</span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">, </span><span class="s2">mappings</span><span class="s0">[</span><span class="s2">i </span><span class="s0">- </span><span class="s5">1</span><span class="s0">])) {</span>
                <span class="s1">continue</span><span class="s0">;</span>
              <span class="s0">}</span>
              <span class="s2">next </span><span class="s0">+= </span><span class="s3">','</span><span class="s0">;</span>
            <span class="s0">}</span>
          <span class="s0">}</span>

          <span class="s2">next </span><span class="s0">+= </span><span class="s2">base64Vlq</span><span class="s0">.</span><span class="s2">encode</span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">generatedColumn</span>
                                     <span class="s0">- </span><span class="s2">previousGeneratedColumn</span><span class="s0">);</span>
          <span class="s2">previousGeneratedColumn </span><span class="s0">= </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">generatedColumn</span><span class="s0">;</span>

          <span class="s1">if </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">source </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">sourceIdx </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sources</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">source</span><span class="s0">);</span>
            <span class="s2">next </span><span class="s0">+= </span><span class="s2">base64Vlq</span><span class="s0">.</span><span class="s2">encode</span><span class="s0">(</span><span class="s2">sourceIdx </span><span class="s0">- </span><span class="s2">previousSource</span><span class="s0">);</span>
            <span class="s2">previousSource </span><span class="s0">= </span><span class="s2">sourceIdx</span><span class="s0">;</span>

            <span class="s4">// lines are stored 0-based in SourceMap spec version 3</span>
            <span class="s2">next </span><span class="s0">+= </span><span class="s2">base64Vlq</span><span class="s0">.</span><span class="s2">encode</span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalLine </span><span class="s0">- </span><span class="s5">1</span>
                                       <span class="s0">- </span><span class="s2">previousOriginalLine</span><span class="s0">);</span>
            <span class="s2">previousOriginalLine </span><span class="s0">= </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalLine </span><span class="s0">- </span><span class="s5">1</span><span class="s0">;</span>

            <span class="s2">next </span><span class="s0">+= </span><span class="s2">base64Vlq</span><span class="s0">.</span><span class="s2">encode</span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalColumn</span>
                                       <span class="s0">- </span><span class="s2">previousOriginalColumn</span><span class="s0">);</span>
            <span class="s2">previousOriginalColumn </span><span class="s0">= </span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">originalColumn</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">name </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
              <span class="s2">nameIdx </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_names</span><span class="s0">.</span><span class="s2">indexOf</span><span class="s0">(</span><span class="s2">mapping</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
              <span class="s2">next </span><span class="s0">+= </span><span class="s2">base64Vlq</span><span class="s0">.</span><span class="s2">encode</span><span class="s0">(</span><span class="s2">nameIdx </span><span class="s0">- </span><span class="s2">previousName</span><span class="s0">);</span>
              <span class="s2">previousName </span><span class="s0">= </span><span class="s2">nameIdx</span><span class="s0">;</span>
            <span class="s0">}</span>
          <span class="s0">}</span>

          <span class="s2">result </span><span class="s0">+= </span><span class="s2">next</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
      <span class="s0">};</span>

    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">_generateSourcesContent </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_generateSourcesContent</span><span class="s0">(</span><span class="s2">aSources</span><span class="s0">, </span><span class="s2">aSourceRoot</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">aSources</span><span class="s0">.</span><span class="s2">map</span><span class="s0">(</span><span class="s1">function </span><span class="s0">(</span><span class="s2">source</span><span class="s0">) {</span>
          <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">) {</span>
            <span class="s1">return null</span><span class="s0">;</span>
          <span class="s0">}</span>
          <span class="s1">if </span><span class="s0">(</span><span class="s2">aSourceRoot </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
            <span class="s2">source </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">relative</span><span class="s0">(</span><span class="s2">aSourceRoot</span><span class="s0">, </span><span class="s2">source</span><span class="s0">);</span>
          <span class="s0">}</span>
          <span class="s1">var </span><span class="s2">key </span><span class="s0">= </span><span class="s2">util</span><span class="s0">.</span><span class="s2">toSetString</span><span class="s0">(</span><span class="s2">source</span><span class="s0">);</span>
          <span class="s1">return </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">, </span><span class="s2">key</span><span class="s0">)</span>
            <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]</span>
            <span class="s0">: </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s0">}, </span><span class="s1">this</span><span class="s0">);</span>
      <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Externalize the source map.</span>
     <span class="s7">*/</span>
    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">toJSON </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_toJSON</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">map </span><span class="s0">= {</span>
          <span class="s2">version</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_version</span><span class="s0">,</span>
          <span class="s2">sources</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sources</span><span class="s0">.</span><span class="s2">toArray</span><span class="s0">(),</span>
          <span class="s2">names</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_names</span><span class="s0">.</span><span class="s2">toArray</span><span class="s0">(),</span>
          <span class="s2">mappings</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_serializeMappings</span><span class="s0">()</span>
        <span class="s0">};</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_file </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
          <span class="s2">map</span><span class="s0">.</span><span class="s2">file </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_file</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourceRoot </span><span class="s0">!= </span><span class="s1">null</span><span class="s0">) {</span>
          <span class="s2">map</span><span class="s0">.</span><span class="s2">sourceRoot </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourceRoot</span><span class="s0">;</span>
        <span class="s0">}</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">_sourcesContents</span><span class="s0">) {</span>
          <span class="s2">map</span><span class="s0">.</span><span class="s2">sourcesContent </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">_generateSourcesContent</span><span class="s0">(</span><span class="s2">map</span><span class="s0">.</span><span class="s2">sources</span><span class="s0">, </span><span class="s2">map</span><span class="s0">.</span><span class="s2">sourceRoot</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">map</span><span class="s0">;</span>
      <span class="s0">};</span>

    <span class="s7">/**</span>
     <span class="s7">* Render the source map being generated to a string.</span>
     <span class="s7">*/</span>
    <span class="s2">SourceMapGenerator</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">toString </span><span class="s0">=</span>
      <span class="s1">function </span><span class="s2">SourceMapGenerator_toString</span><span class="s0">() {</span>
        <span class="s1">return </span><span class="s2">JSON</span><span class="s0">.</span><span class="s2">stringify</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">toJSON</span><span class="s0">());</span>
      <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">SourceMapGenerator_1 </span><span class="s0">= </span><span class="s2">SourceMapGenerator</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">sourceMapGenerator </span><span class="s0">= {</span>
    	<span class="s2">SourceMapGenerator</span><span class="s0">: </span><span class="s2">SourceMapGenerator_1</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">SourceMapGenerator$1 </span><span class="s0">= </span><span class="s2">sourceMapGenerator</span><span class="s0">.</span><span class="s2">SourceMapGenerator</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">trackNodes </span><span class="s0">= {</span>
        <span class="s2">Atrule</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s2">Selector</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s2">Declaration</span><span class="s0">: </span><span class="s1">true</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">sourceMap </span><span class="s0">= </span><span class="s1">function </span><span class="s2">generateSourceMap</span><span class="s0">(</span><span class="s2">handlers</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">map </span><span class="s0">= </span><span class="s1">new </span><span class="s2">SourceMapGenerator$1</span><span class="s0">();</span>
        <span class="s1">var </span><span class="s2">line </span><span class="s0">= </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">column </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">generated </span><span class="s0">= {</span>
            <span class="s2">line</span><span class="s0">: </span><span class="s5">1</span><span class="s0">,</span>
            <span class="s2">column</span><span class="s0">: </span><span class="s5">0</span>
        <span class="s0">};</span>
        <span class="s1">var </span><span class="s2">original </span><span class="s0">= {</span>
            <span class="s2">line</span><span class="s0">: </span><span class="s5">0</span><span class="s0">, </span><span class="s4">// should be zero to add first mapping</span>
            <span class="s2">column</span><span class="s0">: </span><span class="s5">0</span>
        <span class="s0">};</span>
        <span class="s1">var </span><span class="s2">sourceMappingActive </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">activatedGenerated </span><span class="s0">= {</span>
            <span class="s2">line</span><span class="s0">: </span><span class="s5">1</span><span class="s0">,</span>
            <span class="s2">column</span><span class="s0">: </span><span class="s5">0</span>
        <span class="s0">};</span>
        <span class="s1">var </span><span class="s2">activatedMapping </span><span class="s0">= {</span>
            <span class="s2">generated</span><span class="s0">: </span><span class="s2">activatedGenerated</span>
        <span class="s0">};</span>

        <span class="s1">var </span><span class="s2">handlersNode </span><span class="s0">= </span><span class="s2">handlers</span><span class="s0">.</span><span class="s2">node</span><span class="s0">;</span>
        <span class="s2">handlers</span><span class="s0">.</span><span class="s2">node </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">start </span><span class="s0">&amp;&amp; </span><span class="s2">trackNodes</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">)) {</span>
                <span class="s1">var </span><span class="s2">nodeLine </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">start</span><span class="s0">.</span><span class="s2">line</span><span class="s0">;</span>
                <span class="s1">var </span><span class="s2">nodeColumn </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">start</span><span class="s0">.</span><span class="s2">column </span><span class="s0">- </span><span class="s5">1</span><span class="s0">;</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">original</span><span class="s0">.</span><span class="s2">line </span><span class="s0">!== </span><span class="s2">nodeLine </span><span class="s0">||</span>
                    <span class="s2">original</span><span class="s0">.</span><span class="s2">column </span><span class="s0">!== </span><span class="s2">nodeColumn</span><span class="s0">) {</span>
                    <span class="s2">original</span><span class="s0">.</span><span class="s2">line </span><span class="s0">= </span><span class="s2">nodeLine</span><span class="s0">;</span>
                    <span class="s2">original</span><span class="s0">.</span><span class="s2">column </span><span class="s0">= </span><span class="s2">nodeColumn</span><span class="s0">;</span>

                    <span class="s2">generated</span><span class="s0">.</span><span class="s2">line </span><span class="s0">= </span><span class="s2">line</span><span class="s0">;</span>
                    <span class="s2">generated</span><span class="s0">.</span><span class="s2">column </span><span class="s0">= </span><span class="s2">column</span><span class="s0">;</span>

                    <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceMappingActive</span><span class="s0">) {</span>
                        <span class="s2">sourceMappingActive </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">generated</span><span class="s0">.</span><span class="s2">line </span><span class="s0">!== </span><span class="s2">activatedGenerated</span><span class="s0">.</span><span class="s2">line </span><span class="s0">||</span>
                            <span class="s2">generated</span><span class="s0">.</span><span class="s2">column </span><span class="s0">!== </span><span class="s2">activatedGenerated</span><span class="s0">.</span><span class="s2">column</span><span class="s0">) {</span>
                            <span class="s2">map</span><span class="s0">.</span><span class="s2">addMapping</span><span class="s0">(</span><span class="s2">activatedMapping</span><span class="s0">);</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s2">sourceMappingActive </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
                    <span class="s2">map</span><span class="s0">.</span><span class="s2">addMapping</span><span class="s0">({</span>
                        <span class="s2">source</span><span class="s0">: </span><span class="s2">node</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">source</span><span class="s0">,</span>
                        <span class="s2">original</span><span class="s0">: </span><span class="s2">original</span><span class="s0">,</span>
                        <span class="s2">generated</span><span class="s0">: </span><span class="s2">generated</span>
                    <span class="s0">});</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s2">handlersNode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceMappingActive </span><span class="s0">&amp;&amp; </span><span class="s2">trackNodes</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">)) {</span>
                <span class="s2">activatedGenerated</span><span class="s0">.</span><span class="s2">line </span><span class="s0">= </span><span class="s2">line</span><span class="s0">;</span>
                <span class="s2">activatedGenerated</span><span class="s0">.</span><span class="s2">column </span><span class="s0">= </span><span class="s2">column</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">};</span>

        <span class="s1">var </span><span class="s2">handlersChunk </span><span class="s0">= </span><span class="s2">handlers</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">;</span>
        <span class="s2">handlers</span><span class="s0">.</span><span class="s2">chunk </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">chunk</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">chunk</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">chunk</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">) === </span><span class="s5">10</span><span class="s0">) { </span><span class="s4">// \n</span>
                    <span class="s2">line</span><span class="s0">++;</span>
                    <span class="s2">column </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">column</span><span class="s0">++;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s2">handlersChunk</span><span class="s0">(</span><span class="s2">chunk</span><span class="s0">);</span>
        <span class="s0">};</span>

        <span class="s1">var </span><span class="s2">handlersResult </span><span class="s0">= </span><span class="s2">handlers</span><span class="s0">.</span><span class="s2">result</span><span class="s0">;</span>
        <span class="s2">handlers</span><span class="s0">.</span><span class="s2">result </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">sourceMappingActive</span><span class="s0">) {</span>
                <span class="s2">map</span><span class="s0">.</span><span class="s2">addMapping</span><span class="s0">(</span><span class="s2">activatedMapping</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">css</span><span class="s0">: </span><span class="s2">handlersResult</span><span class="s0">(),</span>
                <span class="s2">map</span><span class="s0">: </span><span class="s2">map</span>
            <span class="s0">};</span>
        <span class="s0">};</span>

        <span class="s1">return </span><span class="s2">handlers</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">hasOwnProperty$3 </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">processChildren</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">delimeter</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">list </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">children</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">prev </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">delimeter </span><span class="s0">!== </span><span class="s3">'function'</span><span class="s0">) {</span>
            <span class="s2">list</span><span class="s0">.</span><span class="s2">forEach</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">, </span><span class="s1">this</span><span class="s0">);</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s2">list</span><span class="s0">.</span><span class="s2">forEach</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">prev </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                    <span class="s2">delimeter</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">prev</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
                <span class="s2">prev </span><span class="s0">= </span><span class="s2">node</span><span class="s0">;</span>
            <span class="s0">}, </span><span class="s1">this</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">create$1 </span><span class="s0">= </span><span class="s1">function </span><span class="s2">createGenerator</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
        <span class="s1">function </span><span class="s2">processNode</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$3</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">types</span><span class="s0">, </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">)) {</span>
                <span class="s2">types</span><span class="s0">[</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">].</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Unknown node type: ' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">types </span><span class="s0">= {};</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">) {</span>
                <span class="s2">types</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">[</span><span class="s2">name</span><span class="s0">].</span><span class="s2">generate</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">options</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">buffer </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">handlers </span><span class="s0">= {</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">processChildren</span><span class="s0">,</span>
                <span class="s2">node</span><span class="s0">: </span><span class="s2">processNode</span><span class="s0">,</span>
                <span class="s2">chunk</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">chunk</span><span class="s0">) {</span>
                    <span class="s2">buffer </span><span class="s0">+= </span><span class="s2">chunk</span><span class="s0">;</span>
                <span class="s0">},</span>
                <span class="s2">result</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                    <span class="s1">return </span><span class="s2">buffer</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">};</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">options</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">options</span><span class="s0">.</span><span class="s2">decorator </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
                    <span class="s2">handlers </span><span class="s0">= </span><span class="s2">options</span><span class="s0">.</span><span class="s2">decorator</span><span class="s0">(</span><span class="s2">handlers</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">sourceMap</span><span class="s0">) {</span>
                    <span class="s2">handlers </span><span class="s0">= </span><span class="s2">sourceMap</span><span class="s0">(</span><span class="s2">handlers</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s2">handlers</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s2">handlers</span><span class="s0">.</span><span class="s2">result</span><span class="s0">();</span>
        <span class="s0">};</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">create$2 </span><span class="s0">= </span><span class="s1">function </span><span class="s2">createConvertors</span><span class="s0">(</span><span class="s2">walk</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">fromPlainObject</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">) {</span>
                <span class="s2">walk</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, {</span>
                    <span class="s2">enter</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">children </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">children </span><span class="s1">instanceof </span><span class="s2">List_1 </span><span class="s0">=== </span><span class="s1">false</span><span class="s0">) {</span>
                            <span class="s2">node</span><span class="s0">.</span><span class="s2">children </span><span class="s0">= </span><span class="s1">new </span><span class="s2">List_1</span><span class="s0">().</span><span class="s2">fromArray</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">children</span><span class="s0">);</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>
                <span class="s0">});</span>

                <span class="s1">return </span><span class="s2">ast</span><span class="s0">;</span>
            <span class="s0">},</span>
            <span class="s2">toPlainObject</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">) {</span>
                <span class="s2">walk</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, {</span>
                    <span class="s2">leave</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">children </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">children </span><span class="s1">instanceof </span><span class="s2">List_1</span><span class="s0">) {</span>
                            <span class="s2">node</span><span class="s0">.</span><span class="s2">children </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">children</span><span class="s0">.</span><span class="s2">toArray</span><span class="s0">();</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>
                <span class="s0">});</span>

                <span class="s1">return </span><span class="s2">ast</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">};</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">hasOwnProperty$4 </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">noop$3 </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {};</span>

    <span class="s1">function </span><span class="s2">ensureFunction$1</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
        <span class="s1">return typeof </span><span class="s2">value </span><span class="s0">=== </span><span class="s3">'function' </span><span class="s0">? </span><span class="s2">value </span><span class="s0">: </span><span class="s2">noop$3</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">invokeForType</span><span class="s0">(</span><span class="s2">fn</span><span class="s0">, </span><span class="s2">type</span><span class="s0">) {</span>
        <span class="s1">return function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">type</span><span class="s0">) {</span>
                <span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getWalkersFromStructure</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">nodeType</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">structure </span><span class="s0">= </span><span class="s2">nodeType</span><span class="s0">.</span><span class="s2">structure</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">walkers </span><span class="s0">= [];</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in </span><span class="s2">structure</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$4</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">structure</span><span class="s0">, </span><span class="s2">key</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
                <span class="s1">continue</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">fieldTypes </span><span class="s0">= </span><span class="s2">structure</span><span class="s0">[</span><span class="s2">key</span><span class="s0">];</span>
            <span class="s1">var </span><span class="s2">walker </span><span class="s0">= {</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">key</span><span class="s0">,</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s1">false</span><span class="s0">,</span>
                <span class="s2">nullable</span><span class="s0">: </span><span class="s1">false</span>
            <span class="s0">};</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">structure</span><span class="s0">[</span><span class="s2">key</span><span class="s0">])) {</span>
                <span class="s2">fieldTypes </span><span class="s0">= [</span><span class="s2">structure</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]];</span>
            <span class="s0">}</span>

            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">fieldTypes</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">var </span><span class="s2">fieldType </span><span class="s0">= </span><span class="s2">fieldTypes</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">fieldType </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                    <span class="s2">walker</span><span class="s0">.</span><span class="s2">nullable </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">fieldType </span><span class="s0">=== </span><span class="s3">'string'</span><span class="s0">) {</span>
                    <span class="s2">walker</span><span class="s0">.</span><span class="s2">type </span><span class="s0">= </span><span class="s3">'node'</span><span class="s0">;</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">fieldType</span><span class="s0">)) {</span>
                    <span class="s2">walker</span><span class="s0">.</span><span class="s2">type </span><span class="s0">= </span><span class="s3">'list'</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">walker</span><span class="s0">.</span><span class="s2">type</span><span class="s0">) {</span>
                <span class="s2">walkers</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">walker</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">walkers</span><span class="s0">.</span><span class="s2">length</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">context</span><span class="s0">: </span><span class="s2">nodeType</span><span class="s0">.</span><span class="s2">walkContext</span><span class="s0">,</span>
                <span class="s2">fields</span><span class="s0">: </span><span class="s2">walkers</span>
            <span class="s0">};</span>
        <span class="s0">}</span>

        <span class="s1">return null</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getTypesFromConfig</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">types </span><span class="s0">= {};</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$4</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">, </span><span class="s2">name</span><span class="s0">)) {</span>
                <span class="s1">var </span><span class="s2">nodeType </span><span class="s0">= </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span><span class="s0">[</span><span class="s2">name</span><span class="s0">];</span>

                <span class="s1">if </span><span class="s0">(!</span><span class="s2">nodeType</span><span class="s0">.</span><span class="s2">structure</span><span class="s0">) {</span>
                    <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Missed `structure` field in `' </span><span class="s0">+ </span><span class="s2">name </span><span class="s0">+ </span><span class="s3">'` node type definition'</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s2">types</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">getWalkersFromStructure</span><span class="s0">(</span><span class="s2">name</span><span class="s0">, </span><span class="s2">nodeType</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">types</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">createTypeIterator</span><span class="s0">(</span><span class="s2">config</span><span class="s0">, </span><span class="s2">reverse</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">fields </span><span class="s0">= </span><span class="s2">config</span><span class="s0">.</span><span class="s2">fields</span><span class="s0">.</span><span class="s2">slice</span><span class="s0">();</span>
        <span class="s1">var </span><span class="s2">contextName </span><span class="s0">= </span><span class="s2">config</span><span class="s0">.</span><span class="s2">context</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">useContext </span><span class="s0">= </span><span class="s1">typeof </span><span class="s2">contextName </span><span class="s0">=== </span><span class="s3">'string'</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">reverse</span><span class="s0">) {</span>
            <span class="s2">fields</span><span class="s0">.</span><span class="s2">reverse</span><span class="s0">();</span>
        <span class="s0">}</span>

        <span class="s1">return function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">context</span><span class="s0">, </span><span class="s2">walk</span><span class="s0">, </span><span class="s2">walkReducer</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">prevContextValue</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">useContext</span><span class="s0">) {</span>
                <span class="s2">prevContextValue </span><span class="s0">= </span><span class="s2">context</span><span class="s0">[</span><span class="s2">contextName</span><span class="s0">];</span>
                <span class="s2">context</span><span class="s0">[</span><span class="s2">contextName</span><span class="s0">] = </span><span class="s2">node</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">fields</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                <span class="s1">var </span><span class="s2">field </span><span class="s0">= </span><span class="s2">fields</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
                <span class="s1">var </span><span class="s2">ref </span><span class="s0">= </span><span class="s2">node</span><span class="s0">[</span><span class="s2">field</span><span class="s0">.</span><span class="s2">name</span><span class="s0">];</span>

                <span class="s1">if </span><span class="s0">(!</span><span class="s2">field</span><span class="s0">.</span><span class="s2">nullable </span><span class="s0">|| </span><span class="s2">ref</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">field</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'list'</span><span class="s0">) {</span>
                        <span class="s1">var </span><span class="s2">breakWalk </span><span class="s0">= </span><span class="s2">reverse</span>
                            <span class="s0">? </span><span class="s2">ref</span><span class="s0">.</span><span class="s2">reduceRight</span><span class="s0">(</span><span class="s2">walkReducer</span><span class="s0">, </span><span class="s1">false</span><span class="s0">)</span>
                            <span class="s0">: </span><span class="s2">ref</span><span class="s0">.</span><span class="s2">reduce</span><span class="s0">(</span><span class="s2">walkReducer</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>

                        <span class="s1">if </span><span class="s0">(</span><span class="s2">breakWalk</span><span class="s0">) {</span>
                            <span class="s1">return true</span><span class="s0">;</span>
                        <span class="s0">}</span>
                    <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">walk</span><span class="s0">(</span><span class="s2">ref</span><span class="s0">)) {</span>
                        <span class="s1">return true</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">useContext</span><span class="s0">) {</span>
                <span class="s2">context</span><span class="s0">[</span><span class="s2">contextName</span><span class="s0">] = </span><span class="s2">prevContextValue</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">createFastTraveralMap</span><span class="s0">(</span><span class="s2">iterators</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">Atrule</span><span class="s0">: {</span>
                <span class="s2">StyleSheet</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">StyleSheet</span><span class="s0">,</span>
                <span class="s2">Atrule</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Atrule</span><span class="s0">,</span>
                <span class="s2">Rule</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Rule</span><span class="s0">,</span>
                <span class="s2">Block</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Block</span>
            <span class="s0">},</span>
            <span class="s2">Rule</span><span class="s0">: {</span>
                <span class="s2">StyleSheet</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">StyleSheet</span><span class="s0">,</span>
                <span class="s2">Atrule</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Atrule</span><span class="s0">,</span>
                <span class="s2">Rule</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Rule</span><span class="s0">,</span>
                <span class="s2">Block</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Block</span>
            <span class="s0">},</span>
            <span class="s2">Declaration</span><span class="s0">: {</span>
                <span class="s2">StyleSheet</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">StyleSheet</span><span class="s0">,</span>
                <span class="s2">Atrule</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Atrule</span><span class="s0">,</span>
                <span class="s2">Rule</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Rule</span><span class="s0">,</span>
                <span class="s2">Block</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">Block</span><span class="s0">,</span>
                <span class="s2">DeclarationList</span><span class="s0">: </span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">DeclarationList</span>
            <span class="s0">}</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">create$3 </span><span class="s0">= </span><span class="s1">function </span><span class="s2">createWalker</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">types </span><span class="s0">= </span><span class="s2">getTypesFromConfig</span><span class="s0">(</span><span class="s2">config</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">iteratorsNatural </span><span class="s0">= {};</span>
        <span class="s1">var </span><span class="s2">iteratorsReverse </span><span class="s0">= {};</span>
        <span class="s1">var </span><span class="s2">breakWalk </span><span class="s0">= </span><span class="s2">Symbol</span><span class="s0">(</span><span class="s3">'break-walk'</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">skipNode </span><span class="s0">= </span><span class="s2">Symbol</span><span class="s0">(</span><span class="s3">'skip-node'</span><span class="s0">);</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">name </span><span class="s1">in </span><span class="s2">types</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$4</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">types</span><span class="s0">, </span><span class="s2">name</span><span class="s0">) &amp;&amp; </span><span class="s2">types</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] !== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">iteratorsNatural</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">createTypeIterator</span><span class="s0">(</span><span class="s2">types</span><span class="s0">[</span><span class="s2">name</span><span class="s0">], </span><span class="s1">false</span><span class="s0">);</span>
                <span class="s2">iteratorsReverse</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">createTypeIterator</span><span class="s0">(</span><span class="s2">types</span><span class="s0">[</span><span class="s2">name</span><span class="s0">], </span><span class="s1">true</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">fastTraversalIteratorsNatural </span><span class="s0">= </span><span class="s2">createFastTraveralMap</span><span class="s0">(</span><span class="s2">iteratorsNatural</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">fastTraversalIteratorsReverse </span><span class="s0">= </span><span class="s2">createFastTraveralMap</span><span class="s0">(</span><span class="s2">iteratorsReverse</span><span class="s0">);</span>

        <span class="s1">var </span><span class="s2">walk </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">root</span><span class="s0">, </span><span class="s2">options</span><span class="s0">) {</span>
            <span class="s1">function </span><span class="s2">walkNode</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">enterRet </span><span class="s0">= </span><span class="s2">enter</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">enterRet </span><span class="s0">=== </span><span class="s2">breakWalk</span><span class="s0">) {</span>
                    <span class="s1">debugger</span><span class="s0">;</span>
                    <span class="s1">return true</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">enterRet </span><span class="s0">=== </span><span class="s2">skipNode</span><span class="s0">) {</span>
                    <span class="s1">return false</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">iterators</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">)) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">iterators</span><span class="s0">[</span><span class="s2">node</span><span class="s0">.</span><span class="s2">type</span><span class="s0">](</span><span class="s2">node</span><span class="s0">, </span><span class="s2">context</span><span class="s0">, </span><span class="s2">walkNode</span><span class="s0">, </span><span class="s2">walkReducer</span><span class="s0">)) {</span>
                        <span class="s1">return true</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">leave</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">context</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">) === </span><span class="s2">breakWalk</span><span class="s0">) {</span>
                    <span class="s1">return true</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">return false</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">var </span><span class="s2">walkReducer </span><span class="s0">= (</span><span class="s2">ret</span><span class="s0">, </span><span class="s2">data</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">) =&gt; </span><span class="s2">ret </span><span class="s0">|| </span><span class="s2">walkNode</span><span class="s0">(</span><span class="s2">data</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">enter </span><span class="s0">= </span><span class="s2">noop$3</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">leave </span><span class="s0">= </span><span class="s2">noop$3</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">iterators </span><span class="s0">= </span><span class="s2">iteratorsNatural</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">context </span><span class="s0">= {</span>
                <span class="s1">break</span><span class="s0">: </span><span class="s2">breakWalk</span><span class="s0">,</span>
                <span class="s2">skip</span><span class="s0">: </span><span class="s2">skipNode</span><span class="s0">,</span>

                <span class="s2">root</span><span class="s0">: </span><span class="s2">root</span><span class="s0">,</span>
                <span class="s2">stylesheet</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">atrule</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">atrulePrelude</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">rule</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">selector</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">block</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s2">declaration</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s1">function</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">};</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">options </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
                <span class="s2">enter </span><span class="s0">= </span><span class="s2">options</span><span class="s0">;</span>
            <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">options</span><span class="s0">) {</span>
                <span class="s2">enter </span><span class="s0">= </span><span class="s2">ensureFunction$1</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">enter</span><span class="s0">);</span>
                <span class="s2">leave </span><span class="s0">= </span><span class="s2">ensureFunction$1</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">leave</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">reverse</span><span class="s0">) {</span>
                    <span class="s2">iterators </span><span class="s0">= </span><span class="s2">iteratorsReverse</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">visit</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">fastTraversalIteratorsNatural</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">visit</span><span class="s0">)) {</span>
                        <span class="s2">iterators </span><span class="s0">= </span><span class="s2">options</span><span class="s0">.</span><span class="s2">reverse</span>
                            <span class="s0">? </span><span class="s2">fastTraversalIteratorsReverse</span><span class="s0">[</span><span class="s2">options</span><span class="s0">.</span><span class="s2">visit</span><span class="s0">]</span>
                            <span class="s0">: </span><span class="s2">fastTraversalIteratorsNatural</span><span class="s0">[</span><span class="s2">options</span><span class="s0">.</span><span class="s2">visit</span><span class="s0">];</span>
                    <span class="s0">} </span><span class="s1">else if </span><span class="s0">(!</span><span class="s2">types</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">visit</span><span class="s0">)) {</span>
                        <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Bad value `' </span><span class="s0">+ </span><span class="s2">options</span><span class="s0">.</span><span class="s2">visit </span><span class="s0">+ </span><span class="s3">'` for `visit` option (should be: ' </span><span class="s0">+ </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">types</span><span class="s0">).</span><span class="s2">join</span><span class="s0">(</span><span class="s3">', '</span><span class="s0">) + </span><span class="s3">')'</span><span class="s0">);</span>
                    <span class="s0">}</span>

                    <span class="s2">enter </span><span class="s0">= </span><span class="s2">invokeForType</span><span class="s0">(</span><span class="s2">enter</span><span class="s0">, </span><span class="s2">options</span><span class="s0">.</span><span class="s2">visit</span><span class="s0">);</span>
                    <span class="s2">leave </span><span class="s0">= </span><span class="s2">invokeForType</span><span class="s0">(</span><span class="s2">leave</span><span class="s0">, </span><span class="s2">options</span><span class="s0">.</span><span class="s2">visit</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">enter </span><span class="s0">=== </span><span class="s2">noop$3 </span><span class="s0">&amp;&amp; </span><span class="s2">leave </span><span class="s0">=== </span><span class="s2">noop$3</span><span class="s0">) {</span>
                <span class="s1">throw new </span><span class="s2">Error</span><span class="s0">(</span><span class="s3">'Neither `enter` nor `leave` walker handler is set or both aren</span><span class="s1">\'</span><span class="s3">t a function'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s2">walkNode</span><span class="s0">(</span><span class="s2">root</span><span class="s0">);</span>
        <span class="s0">};</span>

        <span class="s2">walk</span><span class="s0">.</span><span class="s2">break </span><span class="s0">= </span><span class="s2">breakWalk</span><span class="s0">;</span>
        <span class="s2">walk</span><span class="s0">.</span><span class="s2">skip </span><span class="s0">= </span><span class="s2">skipNode</span><span class="s0">;</span>

        <span class="s2">walk</span><span class="s0">.</span><span class="s2">find </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, </span><span class="s2">fn</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">found </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s2">walk</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">)) {</span>
                    <span class="s2">found </span><span class="s0">= </span><span class="s2">node</span><span class="s0">;</span>
                    <span class="s1">return </span><span class="s2">breakWalk</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">});</span>

            <span class="s1">return </span><span class="s2">found</span><span class="s0">;</span>
        <span class="s0">};</span>

        <span class="s2">walk</span><span class="s0">.</span><span class="s2">findLast </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, </span><span class="s2">fn</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">found </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s2">walk</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, {</span>
                <span class="s2">reverse</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
                <span class="s2">enter</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">)) {</span>
                        <span class="s2">found </span><span class="s0">= </span><span class="s2">node</span><span class="s0">;</span>
                        <span class="s1">return </span><span class="s2">breakWalk</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">});</span>

            <span class="s1">return </span><span class="s2">found</span><span class="s0">;</span>
        <span class="s0">};</span>

        <span class="s2">walk</span><span class="s0">.</span><span class="s2">findAll </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, </span><span class="s2">fn</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">found </span><span class="s0">= [];</span>

            <span class="s2">walk</span><span class="s0">(</span><span class="s2">ast</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">fn</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">node</span><span class="s0">, </span><span class="s2">item</span><span class="s0">, </span><span class="s2">list</span><span class="s0">)) {</span>
                    <span class="s2">found</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">});</span>

            <span class="s1">return </span><span class="s2">found</span><span class="s0">;</span>
        <span class="s0">};</span>

        <span class="s1">return </span><span class="s2">walk</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">clone </span><span class="s0">= </span><span class="s1">function </span><span class="s2">clone</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">result </span><span class="s0">= {};</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in </span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">value </span><span class="s0">= </span><span class="s2">node</span><span class="s0">[</span><span class="s2">key</span><span class="s0">];</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) || </span><span class="s2">value </span><span class="s1">instanceof </span><span class="s2">List_1</span><span class="s0">) {</span>
                    <span class="s2">value </span><span class="s0">= </span><span class="s2">value</span><span class="s0">.</span><span class="s2">map</span><span class="s0">(</span><span class="s2">clone</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">value</span><span class="s0">.</span><span class="s2">constructor </span><span class="s0">=== </span><span class="s2">Object</span><span class="s0">) {</span>
                    <span class="s2">value </span><span class="s0">= </span><span class="s2">clone</span><span class="s0">(</span><span class="s2">value</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s2">result</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">value</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">const </span><span class="s2">hasOwnProperty$5 </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">prototype</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">;</span>
    <span class="s1">const </span><span class="s2">shape </span><span class="s0">= {</span>
        <span class="s2">generic</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s2">types</span><span class="s0">: </span><span class="s2">appendOrAssign</span><span class="s0">,</span>
        <span class="s2">atrules</span><span class="s0">: {</span>
            <span class="s2">prelude</span><span class="s0">: </span><span class="s2">appendOrAssignOrNull</span><span class="s0">,</span>
            <span class="s2">descriptors</span><span class="s0">: </span><span class="s2">appendOrAssignOrNull</span>
        <span class="s0">},</span>
        <span class="s2">properties</span><span class="s0">: </span><span class="s2">appendOrAssign</span><span class="s0">,</span>
        <span class="s2">parseContext</span><span class="s0">: </span><span class="s2">assign</span><span class="s0">,</span>
        <span class="s2">scope</span><span class="s0">: </span><span class="s2">deepAssign</span><span class="s0">,</span>
        <span class="s2">atrule</span><span class="s0">: [</span><span class="s3">'parse'</span><span class="s0">],</span>
        <span class="s2">pseudo</span><span class="s0">: [</span><span class="s3">'parse'</span><span class="s0">],</span>
        <span class="s2">node</span><span class="s0">: [</span><span class="s3">'name'</span><span class="s0">, </span><span class="s3">'structure'</span><span class="s0">, </span><span class="s3">'parse'</span><span class="s0">, </span><span class="s3">'generate'</span><span class="s0">, </span><span class="s3">'walkContext'</span><span class="s0">]</span>
    <span class="s0">};</span>

    <span class="s1">function </span><span class="s2">isObject</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">value </span><span class="s0">&amp;&amp; </span><span class="s2">value</span><span class="s0">.</span><span class="s2">constructor </span><span class="s0">=== </span><span class="s2">Object</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">copy</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">isObject</span><span class="s0">(</span><span class="s2">value</span><span class="s0">)</span>
            <span class="s0">? </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">assign</span><span class="s0">({}, </span><span class="s2">value</span><span class="s0">)</span>
            <span class="s0">: </span><span class="s2">value</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">assign</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">, </span><span class="s2">src</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">assign</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">, </span><span class="s2">src</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">deepAssign</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">, </span><span class="s2">src</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">const </span><span class="s2">key </span><span class="s1">in </span><span class="s2">src</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$5</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">src</span><span class="s0">, </span><span class="s2">key</span><span class="s0">)) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">isObject</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">])) {</span>
                    <span class="s2">deepAssign</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">], </span><span class="s2">copy</span><span class="s0">(</span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]));</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">copy</span><span class="s0">(</span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">dest</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">append</span><span class="s0">(</span><span class="s2">a</span><span class="s0">, </span><span class="s2">b</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">b </span><span class="s0">=== </span><span class="s3">'string' </span><span class="s0">&amp;&amp; </span><span class="s6">/^\s*\|/</span><span class="s0">.</span><span class="s2">test</span><span class="s0">(</span><span class="s2">b</span><span class="s0">)) {</span>
            <span class="s1">return typeof </span><span class="s2">a </span><span class="s0">=== </span><span class="s3">'string'</span>
                <span class="s0">? </span><span class="s2">a </span><span class="s0">+ </span><span class="s2">b</span>
                <span class="s0">: </span><span class="s2">b</span><span class="s0">.</span><span class="s2">replace</span><span class="s0">(</span><span class="s6">/^\s*\|\s*/</span><span class="s0">, </span><span class="s3">''</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">b </span><span class="s0">|| </span><span class="s1">null</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">appendOrAssign</span><span class="s0">(</span><span class="s2">a</span><span class="s0">, </span><span class="s2">b</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">b </span><span class="s0">=== </span><span class="s3">'string'</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">append</span><span class="s0">(</span><span class="s2">a</span><span class="s0">, </span><span class="s2">b</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">const </span><span class="s2">result </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">assign</span><span class="s0">({}, </span><span class="s2">a</span><span class="s0">);</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">let </span><span class="s2">key </span><span class="s1">in </span><span class="s2">b</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$5</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">b</span><span class="s0">, </span><span class="s2">key</span><span class="s0">)) {</span>
                <span class="s2">result</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">append</span><span class="s0">(</span><span class="s2">hasOwnProperty$5</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">a</span><span class="s0">, </span><span class="s2">key</span><span class="s0">) ? </span><span class="s2">a</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] : </span><span class="s2">undefined</span><span class="s0">, </span><span class="s2">b</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">result</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">appendOrAssignOrNull</span><span class="s0">(</span><span class="s2">a</span><span class="s0">, </span><span class="s2">b</span><span class="s0">) {</span>
        <span class="s1">const </span><span class="s2">result </span><span class="s0">= </span><span class="s2">appendOrAssign</span><span class="s0">(</span><span class="s2">a</span><span class="s0">, </span><span class="s2">b</span><span class="s0">);</span>

        <span class="s1">return </span><span class="s0">!</span><span class="s2">isObject</span><span class="s0">(</span><span class="s2">result</span><span class="s0">) || </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">keys</span><span class="s0">(</span><span class="s2">result</span><span class="s0">).</span><span class="s2">length</span>
            <span class="s0">? </span><span class="s2">result</span>
            <span class="s0">: </span><span class="s1">null</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">mix</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">, </span><span class="s2">src</span><span class="s0">, </span><span class="s2">shape</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">const </span><span class="s2">key </span><span class="s1">in </span><span class="s2">shape</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$5</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">shape</span><span class="s0">, </span><span class="s2">key</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
                <span class="s1">continue</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] === </span><span class="s1">true</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">key </span><span class="s1">in </span><span class="s2">src</span><span class="s0">) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$5</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">src</span><span class="s0">, </span><span class="s2">key</span><span class="s0">)) {</span>
                        <span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">copy</span><span class="s0">(</span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">typeof </span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] === </span><span class="s3">'function'</span><span class="s0">) {</span>
                    <span class="s1">const </span><span class="s2">fn </span><span class="s0">= </span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">];</span>
                    <span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">fn</span><span class="s0">({}, </span><span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
                    <span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">fn</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] || {}, </span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">isObject</span><span class="s0">(</span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">])) {</span>
                    <span class="s1">const </span><span class="s2">result </span><span class="s0">= {};</span>

                    <span class="s1">for </span><span class="s0">(</span><span class="s1">let </span><span class="s2">name </span><span class="s1">in </span><span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]) {</span>
                        <span class="s2">result</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">mix</span><span class="s0">({}, </span><span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">][</span><span class="s2">name</span><span class="s0">], </span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
                    <span class="s0">}</span>

                    <span class="s1">for </span><span class="s0">(</span><span class="s1">let </span><span class="s2">name </span><span class="s1">in </span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]) {</span>
                        <span class="s2">result</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = </span><span class="s2">mix</span><span class="s0">(</span><span class="s2">result</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] || {}, </span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">][</span><span class="s2">name</span><span class="s0">], </span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]);</span>
                    <span class="s0">}</span>

                    <span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">result</span><span class="s0">;</span>
                <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">Array</span><span class="s0">.</span><span class="s2">isArray</span><span class="s0">(</span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">])) {</span>
                    <span class="s1">const </span><span class="s2">res </span><span class="s0">= {};</span>
                    <span class="s1">const </span><span class="s2">innerShape </span><span class="s0">= </span><span class="s2">shape</span><span class="s0">[</span><span class="s2">key</span><span class="s0">].</span><span class="s2">reduce</span><span class="s0">(</span><span class="s1">function</span><span class="s0">(</span><span class="s2">s</span><span class="s0">, </span><span class="s2">k</span><span class="s0">) {</span>
                        <span class="s2">s</span><span class="s0">[</span><span class="s2">k</span><span class="s0">] = </span><span class="s1">true</span><span class="s0">;</span>
                        <span class="s1">return </span><span class="s2">s</span><span class="s0">;</span>
                    <span class="s0">}, {});</span>

                    <span class="s1">for </span><span class="s0">(</span><span class="s1">const </span><span class="s0">[</span><span class="s2">name</span><span class="s0">, </span><span class="s2">value</span><span class="s0">] </span><span class="s2">of Object</span><span class="s0">.</span><span class="s2">entries</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] || {})) {</span>
                        <span class="s2">res</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = {};</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">value</span><span class="s0">) {</span>
                            <span class="s2">mix</span><span class="s0">(</span><span class="s2">res</span><span class="s0">[</span><span class="s2">name</span><span class="s0">], </span><span class="s2">value</span><span class="s0">, </span><span class="s2">innerShape</span><span class="s0">);</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s1">for </span><span class="s0">(</span><span class="s1">const </span><span class="s2">name </span><span class="s1">in </span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]) {</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s2">hasOwnProperty$5</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">], </span><span class="s2">name</span><span class="s0">)) {</span>
                            <span class="s1">if </span><span class="s0">(!</span><span class="s2">res</span><span class="s0">[</span><span class="s2">name</span><span class="s0">]) {</span>
                                <span class="s2">res</span><span class="s0">[</span><span class="s2">name</span><span class="s0">] = {};</span>
                            <span class="s0">}</span>

                            <span class="s1">if </span><span class="s0">(</span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] &amp;&amp; </span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">][</span><span class="s2">name</span><span class="s0">]) {</span>
                                <span class="s2">mix</span><span class="s0">(</span><span class="s2">res</span><span class="s0">[</span><span class="s2">name</span><span class="s0">], </span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">][</span><span class="s2">name</span><span class="s0">], </span><span class="s2">innerShape</span><span class="s0">);</span>
                            <span class="s0">}</span>
                        <span class="s0">}</span>
                    <span class="s0">}</span>

                    <span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">res</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
        <span class="s1">return </span><span class="s2">dest</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">mix_1 </span><span class="s0">= (</span><span class="s2">dest</span><span class="s0">, </span><span class="s2">src</span><span class="s0">) =&gt; </span><span class="s2">mix</span><span class="s0">(</span><span class="s2">dest</span><span class="s0">, </span><span class="s2">src</span><span class="s0">, </span><span class="s2">shape</span><span class="s0">);</span>

    <span class="s1">function </span><span class="s2">createSyntax</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">parse </span><span class="s0">= </span><span class="s2">create</span><span class="s0">(</span><span class="s2">config</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">walk </span><span class="s0">= </span><span class="s2">create$3</span><span class="s0">(</span><span class="s2">config</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">generate </span><span class="s0">= </span><span class="s2">create$1</span><span class="s0">(</span><span class="s2">config</span><span class="s0">);</span>
        <span class="s1">var </span><span class="s2">convert </span><span class="s0">= </span><span class="s2">create$2</span><span class="s0">(</span><span class="s2">walk</span><span class="s0">);</span>

        <span class="s1">var </span><span class="s2">syntax </span><span class="s0">= {</span>
            <span class="s2">List</span><span class="s0">: </span><span class="s2">List_1</span><span class="s0">,</span>
            <span class="s2">SyntaxError</span><span class="s0">: </span><span class="s2">_SyntaxError</span><span class="s0">,</span>
            <span class="s2">TokenStream</span><span class="s0">: </span><span class="s2">TokenStream_1</span><span class="s0">,</span>
            <span class="s2">Lexer</span><span class="s0">: </span><span class="s2">Lexer_1</span><span class="s0">,</span>

            <span class="s2">vendorPrefix</span><span class="s0">: </span><span class="s2">names</span><span class="s0">.</span><span class="s2">vendorPrefix</span><span class="s0">,</span>
            <span class="s2">keyword</span><span class="s0">: </span><span class="s2">names</span><span class="s0">.</span><span class="s2">keyword</span><span class="s0">,</span>
            <span class="s2">property</span><span class="s0">: </span><span class="s2">names</span><span class="s0">.</span><span class="s2">property</span><span class="s0">,</span>
            <span class="s2">isCustomProperty</span><span class="s0">: </span><span class="s2">names</span><span class="s0">.</span><span class="s2">isCustomProperty</span><span class="s0">,</span>

            <span class="s2">definitionSyntax</span><span class="s0">: </span><span class="s2">definitionSyntax</span><span class="s0">,</span>
            <span class="s2">lexer</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
            <span class="s2">createLexer</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
                <span class="s1">return new </span><span class="s2">Lexer_1</span><span class="s0">(</span><span class="s2">config</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">, </span><span class="s2">syntax</span><span class="s0">.</span><span class="s2">lexer</span><span class="s0">.</span><span class="s2">structure</span><span class="s0">);</span>
            <span class="s0">},</span>

            <span class="s2">tokenize</span><span class="s0">: </span><span class="s2">tokenizer</span><span class="s0">,</span>
            <span class="s2">parse</span><span class="s0">: </span><span class="s2">parse</span><span class="s0">,</span>
            <span class="s2">walk</span><span class="s0">: </span><span class="s2">walk</span><span class="s0">,</span>
            <span class="s2">generate</span><span class="s0">: </span><span class="s2">generate</span><span class="s0">,</span>

            <span class="s2">find</span><span class="s0">: </span><span class="s2">walk</span><span class="s0">.</span><span class="s2">find</span><span class="s0">,</span>
            <span class="s2">findLast</span><span class="s0">: </span><span class="s2">walk</span><span class="s0">.</span><span class="s2">findLast</span><span class="s0">,</span>
            <span class="s2">findAll</span><span class="s0">: </span><span class="s2">walk</span><span class="s0">.</span><span class="s2">findAll</span><span class="s0">,</span>

            <span class="s2">clone</span><span class="s0">: </span><span class="s2">clone</span><span class="s0">,</span>
            <span class="s2">fromPlainObject</span><span class="s0">: </span><span class="s2">convert</span><span class="s0">.</span><span class="s2">fromPlainObject</span><span class="s0">,</span>
            <span class="s2">toPlainObject</span><span class="s0">: </span><span class="s2">convert</span><span class="s0">.</span><span class="s2">toPlainObject</span><span class="s0">,</span>

            <span class="s2">createSyntax</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
                <span class="s1">return </span><span class="s2">createSyntax</span><span class="s0">(</span><span class="s2">mix_1</span><span class="s0">({}, </span><span class="s2">config</span><span class="s0">));</span>
            <span class="s0">},</span>
            <span class="s2">fork</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">extension</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">base </span><span class="s0">= </span><span class="s2">mix_1</span><span class="s0">({}, </span><span class="s2">config</span><span class="s0">); </span><span class="s4">// copy of config</span>
                <span class="s1">return </span><span class="s2">createSyntax</span><span class="s0">(</span>
                    <span class="s1">typeof </span><span class="s2">extension </span><span class="s0">=== </span><span class="s3">'function'</span>
                        <span class="s0">? </span><span class="s2">extension</span><span class="s0">(</span><span class="s2">base</span><span class="s0">, </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">assign</span><span class="s0">)</span>
                        <span class="s0">: </span><span class="s2">mix_1</span><span class="s0">(</span><span class="s2">base</span><span class="s0">, </span><span class="s2">extension</span><span class="s0">)</span>
                <span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">};</span>

        <span class="s2">syntax</span><span class="s0">.</span><span class="s2">lexer </span><span class="s0">= </span><span class="s1">new </span><span class="s2">Lexer_1</span><span class="s0">({</span>
            <span class="s2">generic</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
            <span class="s2">types</span><span class="s0">: </span><span class="s2">config</span><span class="s0">.</span><span class="s2">types</span><span class="s0">,</span>
            <span class="s2">atrules</span><span class="s0">: </span><span class="s2">config</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">,</span>
            <span class="s2">properties</span><span class="s0">: </span><span class="s2">config</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">,</span>
            <span class="s2">node</span><span class="s0">: </span><span class="s2">config</span><span class="s0">.</span><span class="s2">node</span>
        <span class="s0">}, </span><span class="s2">syntax</span><span class="s0">);</span>

        <span class="s1">return </span><span class="s2">syntax</span><span class="s0">;</span>
    <span class="s0">}</span>
    <span class="s1">var </span><span class="s2">create_1 </span><span class="s0">= </span><span class="s1">function</span><span class="s0">(</span><span class="s2">config</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">createSyntax</span><span class="s0">(</span><span class="s2">mix_1</span><span class="s0">({}, </span><span class="s2">config</span><span class="s0">));</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">create$4 </span><span class="s0">= {</span>
    	<span class="s2">create</span><span class="s0">: </span><span class="s2">create_1</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">data </span><span class="s0">= {</span>
        <span class="s3">&quot;generic&quot;</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s3">&quot;types&quot;</span><span class="s0">: {</span>
            <span class="s3">&quot;absolute-size&quot;</span><span class="s0">: </span><span class="s3">&quot;xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;alpha-value&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;angle-percentage&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;angle&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;angular-color-hint&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;angle-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;angular-color-stop&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&amp;&amp;&lt;color-stop-angle&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;angular-color-stop-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;angular-color-stop&gt; [, &lt;angular-color-hint&gt;]?]# , &lt;angular-color-stop&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animateable-feature&quot;</span><span class="s0">: </span><span class="s3">&quot;scroll-position|contents|&lt;custom-ident&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;attachment&quot;</span><span class="s0">: </span><span class="s3">&quot;scroll|fixed|local&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;attr()&quot;</span><span class="s0">: </span><span class="s3">&quot;attr( &lt;attr-name&gt; &lt;type-or-unit&gt;? [, &lt;attr-fallback&gt;]? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;attr-matcher&quot;</span><span class="s0">: </span><span class="s3">&quot;['~'|'|'|'^'|'$'|'*']? '='&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;attr-modifier&quot;</span><span class="s0">: </span><span class="s3">&quot;i|s&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;attribute-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;'[' &lt;wq-name&gt; ']'|'[' &lt;wq-name&gt; &lt;attr-matcher&gt; [&lt;string-token&gt;|&lt;ident-token&gt;] &lt;attr-modifier&gt;? ']'&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;auto-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;repeat( [auto-fill|auto-fit] , [&lt;line-names&gt;? &lt;fixed-size&gt;]+ &lt;line-names&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;auto-track-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;line-names&gt;? [&lt;fixed-size&gt;|&lt;fixed-repeat&gt;]]* &lt;line-names&gt;? &lt;auto-repeat&gt; [&lt;line-names&gt;? [&lt;fixed-size&gt;|&lt;fixed-repeat&gt;]]* &lt;line-names&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;baseline-position&quot;</span><span class="s0">: </span><span class="s3">&quot;[first|last]? baseline&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;basic-shape&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;inset()&gt;|&lt;circle()&gt;|&lt;ellipse()&gt;|&lt;polygon()&gt;|&lt;path()&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;bg-image&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;image&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;bg-layer&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;bg-image&gt;||&lt;bg-position&gt; [/ &lt;bg-size&gt;]?||&lt;repeat-style&gt;||&lt;attachment&gt;||&lt;box&gt;||&lt;box&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;bg-position&quot;</span><span class="s0">: </span><span class="s3">&quot;[[left|center|right|top|bottom|&lt;length-percentage&gt;]|[left|center|right|&lt;length-percentage&gt;] [top|center|bottom|&lt;length-percentage&gt;]|[center|[left|right] &lt;length-percentage&gt;?]&amp;&amp;[center|[top|bottom] &lt;length-percentage&gt;?]]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;bg-size&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length-percentage&gt;|auto]{1,2}|cover|contain&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;blur()&quot;</span><span class="s0">: </span><span class="s3">&quot;blur( &lt;length&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;blend-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box&quot;</span><span class="s0">: </span><span class="s3">&quot;border-box|padding-box|content-box&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;brightness()&quot;</span><span class="s0">: </span><span class="s3">&quot;brightness( &lt;number-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;calc()&quot;</span><span class="s0">: </span><span class="s3">&quot;calc( &lt;calc-sum&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;calc-sum&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;calc-product&gt; [['+'|'-'] &lt;calc-product&gt;]*&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;calc-product&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;calc-value&gt; ['*' &lt;calc-value&gt;|'/' &lt;number&gt;]*&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;calc-value&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;|&lt;dimension&gt;|&lt;percentage&gt;|( &lt;calc-sum&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;cf-final-image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;image&gt;|&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;cf-mixing-image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;percentage&gt;?&amp;&amp;&lt;image&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;circle()&quot;</span><span class="s0">: </span><span class="s3">&quot;circle( [&lt;shape-radius&gt;]? [at &lt;position&gt;]? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;clamp()&quot;</span><span class="s0">: </span><span class="s3">&quot;clamp( &lt;calc-sum&gt;#{3} )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;class-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;'.' &lt;ident-token&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;clip-source&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;rgb()&gt;|&lt;rgba()&gt;|&lt;hsl()&gt;|&lt;hsla()&gt;|&lt;hex-color&gt;|&lt;named-color&gt;|currentcolor|&lt;deprecated-system-color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;color-stop&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color-stop-length&gt;|&lt;color-stop-angle&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;color-stop-angle&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;angle-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;color-stop-length&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;color-stop-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;linear-color-stop&gt; [, &lt;linear-color-hint&gt;]?]# , &lt;linear-color-stop&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;combinator&quot;</span><span class="s0">: </span><span class="s3">&quot;'&gt;'|'+'|'~'|['||']&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;common-lig-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[common-ligatures|no-common-ligatures]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;compat-auto&quot;</span><span class="s0">: </span><span class="s3">&quot;searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;composite-style&quot;</span><span class="s0">: </span><span class="s3">&quot;clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;compositing-operator&quot;</span><span class="s0">: </span><span class="s3">&quot;add|subtract|intersect|exclude&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;compound-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;type-selector&gt;? &lt;subclass-selector&gt;* [&lt;pseudo-element-selector&gt; &lt;pseudo-class-selector&gt;*]*]!&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;compound-selector-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;compound-selector&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;complex-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;compound-selector&gt; [&lt;combinator&gt;? &lt;compound-selector&gt;]*&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;complex-selector-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;complex-selector&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;conic-gradient()&quot;</span><span class="s0">: </span><span class="s3">&quot;conic-gradient( [from &lt;angle&gt;]? [at &lt;position&gt;]? , &lt;angular-color-stop-list&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;contextual-alt-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[contextual|no-contextual]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;content-distribution&quot;</span><span class="s0">: </span><span class="s3">&quot;space-between|space-around|space-evenly|stretch&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;content-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;string&gt;|contents|&lt;image&gt;|&lt;quote&gt;|&lt;target&gt;|&lt;leader()&gt;|&lt;attr()&gt;|counter( &lt;ident&gt; , &lt;'list-style-type'&gt;? )]+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;content-position&quot;</span><span class="s0">: </span><span class="s3">&quot;center|start|end|flex-start|flex-end&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;content-replacement&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;image&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;contrast()&quot;</span><span class="s0">: </span><span class="s3">&quot;contrast( [&lt;number-percentage&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;counter()&quot;</span><span class="s0">: </span><span class="s3">&quot;counter( &lt;custom-ident&gt; , &lt;counter-style&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;counter-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;counter-style-name&gt;|symbols( )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;counter-style-name&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;custom-ident&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;counters()&quot;</span><span class="s0">: </span><span class="s3">&quot;counters( &lt;custom-ident&gt; , &lt;string&gt; , &lt;counter-style&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;cross-fade()&quot;</span><span class="s0">: </span><span class="s3">&quot;cross-fade( &lt;cf-mixing-image&gt; , &lt;cf-final-image&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;cubic-bezier-timing-function&quot;</span><span class="s0">: </span><span class="s3">&quot;ease|ease-in|ease-out|ease-in-out|cubic-bezier( &lt;number [0,1]&gt; , &lt;number&gt; , &lt;number [0,1]&gt; , &lt;number&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;deprecated-system-color&quot;</span><span class="s0">: </span><span class="s3">&quot;ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;discretionary-lig-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[discretionary-ligatures|no-discretionary-ligatures]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;display-box&quot;</span><span class="s0">: </span><span class="s3">&quot;contents|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;display-inside&quot;</span><span class="s0">: </span><span class="s3">&quot;flow|flow-root|table|flex|grid|ruby&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;display-internal&quot;</span><span class="s0">: </span><span class="s3">&quot;table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;display-legacy&quot;</span><span class="s0">: </span><span class="s3">&quot;inline-block|inline-list-item|inline-table|inline-flex|inline-grid&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;display-listitem&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;display-outside&gt;?&amp;&amp;[flow|flow-root]?&amp;&amp;list-item&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;display-outside&quot;</span><span class="s0">: </span><span class="s3">&quot;block|inline|run-in&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;drop-shadow()&quot;</span><span class="s0">: </span><span class="s3">&quot;drop-shadow( &lt;length&gt;{2,3} &lt;color&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;east-asian-variant-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[jis78|jis83|jis90|jis04|simplified|traditional]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;east-asian-width-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[full-width|proportional-width]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;element()&quot;</span><span class="s0">: </span><span class="s3">&quot;element( &lt;custom-ident&gt; , [first|start|last|first-except]? )|element( &lt;id-selector&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;ellipse()&quot;</span><span class="s0">: </span><span class="s3">&quot;ellipse( [&lt;shape-radius&gt;{2}]? [at &lt;position&gt;]? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;ending-shape&quot;</span><span class="s0">: </span><span class="s3">&quot;circle|ellipse&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;env()&quot;</span><span class="s0">: </span><span class="s3">&quot;env( &lt;custom-ident&gt; , &lt;declaration-value&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;explicit-track-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;line-names&gt;? &lt;track-size&gt;]+ &lt;line-names&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;family-name&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;string&gt;|&lt;custom-ident&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;feature-tag-value&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;string&gt; [&lt;integer&gt;|on|off]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;feature-type&quot;</span><span class="s0">: </span><span class="s3">&quot;@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;feature-value-block&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;feature-type&gt; '{' &lt;feature-value-declaration-list&gt; '}'&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;feature-value-block-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;feature-value-block&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;feature-value-declaration&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;custom-ident&gt; : &lt;integer&gt;+ ;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;feature-value-declaration-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;feature-value-declaration&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;feature-value-name&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;custom-ident&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;fill-rule&quot;</span><span class="s0">: </span><span class="s3">&quot;nonzero|evenodd&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;filter-function&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;blur()&gt;|&lt;brightness()&gt;|&lt;contrast()&gt;|&lt;drop-shadow()&gt;|&lt;grayscale()&gt;|&lt;hue-rotate()&gt;|&lt;invert()&gt;|&lt;opacity()&gt;|&lt;saturate()&gt;|&lt;sepia()&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;filter-function-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;filter-function&gt;|&lt;url&gt;]+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;final-bg-layer&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'background-color'&gt;||&lt;bg-image&gt;||&lt;bg-position&gt; [/ &lt;bg-size&gt;]?||&lt;repeat-style&gt;||&lt;attachment&gt;||&lt;box&gt;||&lt;box&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;fit-content()&quot;</span><span class="s0">: </span><span class="s3">&quot;fit-content( [&lt;length&gt;|&lt;percentage&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;fixed-breadth&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;fixed-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;repeat( [&lt;positive-integer&gt;] , [&lt;line-names&gt;? &lt;fixed-size&gt;]+ &lt;line-names&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;fixed-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;fixed-breadth&gt;|minmax( &lt;fixed-breadth&gt; , &lt;track-breadth&gt; )|minmax( &lt;inflexible-breadth&gt; , &lt;fixed-breadth&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-stretch-absolute&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variant-css21&quot;</span><span class="s0">: </span><span class="s3">&quot;[normal|small-caps]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-weight-absolute&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|bold|&lt;number [1,1000]&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;frequency-percentage&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;frequency&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;general-enclosed&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;function-token&gt; &lt;any-value&gt; )]|( &lt;ident&gt; &lt;any-value&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;generic-family&quot;</span><span class="s0">: </span><span class="s3">&quot;serif|sans-serif|cursive|fantasy|monospace|-apple-system&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;generic-name&quot;</span><span class="s0">: </span><span class="s3">&quot;serif|sans-serif|cursive|fantasy|monospace&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;geometry-box&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;shape-box&gt;|fill-box|stroke-box|view-box&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;gradient&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;linear-gradient()&gt;|&lt;repeating-linear-gradient()&gt;|&lt;radial-gradient()&gt;|&lt;repeating-radial-gradient()&gt;|&lt;conic-gradient()&gt;|&lt;-legacy-gradient&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grayscale()&quot;</span><span class="s0">: </span><span class="s3">&quot;grayscale( &lt;number-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-line&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;custom-ident&gt;|[&lt;integer&gt;&amp;&amp;&lt;custom-ident&gt;?]|[span&amp;&amp;[&lt;integer&gt;||&lt;custom-ident&gt;]]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;historical-lig-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[historical-ligatures|no-historical-ligatures]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;hsl()&quot;</span><span class="s0">: </span><span class="s3">&quot;hsl( &lt;hue&gt; &lt;percentage&gt; &lt;percentage&gt; [/ &lt;alpha-value&gt;]? )|hsl( &lt;hue&gt; , &lt;percentage&gt; , &lt;percentage&gt; , &lt;alpha-value&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;hsla()&quot;</span><span class="s0">: </span><span class="s3">&quot;hsla( &lt;hue&gt; &lt;percentage&gt; &lt;percentage&gt; [/ &lt;alpha-value&gt;]? )|hsla( &lt;hue&gt; , &lt;percentage&gt; , &lt;percentage&gt; , &lt;alpha-value&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;hue&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;|&lt;angle&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;hue-rotate()&quot;</span><span class="s0">: </span><span class="s3">&quot;hue-rotate( &lt;angle&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt;|&lt;image()&gt;|&lt;image-set()&gt;|&lt;element()&gt;|&lt;paint()&gt;|&lt;cross-fade()&gt;|&lt;gradient&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image()&quot;</span><span class="s0">: </span><span class="s3">&quot;image( &lt;image-tags&gt;? [&lt;image-src&gt;? , &lt;color&gt;?]! )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image-set()&quot;</span><span class="s0">: </span><span class="s3">&quot;image-set( &lt;image-set-option&gt;# )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image-set-option&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;image&gt;|&lt;string&gt;] &lt;resolution&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image-src&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt;|&lt;string&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image-tags&quot;</span><span class="s0">: </span><span class="s3">&quot;ltr|rtl&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inflexible-breadth&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|min-content|max-content|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inset()&quot;</span><span class="s0">: </span><span class="s3">&quot;inset( &lt;length-percentage&gt;{1,4} [round &lt;'border-radius'&gt;]? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;invert()&quot;</span><span class="s0">: </span><span class="s3">&quot;invert( &lt;number-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;keyframes-name&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;custom-ident&gt;|&lt;string&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;keyframe-block&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;keyframe-selector&gt;# { &lt;declaration-list&gt; }&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;keyframe-block-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;keyframe-block&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;keyframe-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;from|to|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;leader()&quot;</span><span class="s0">: </span><span class="s3">&quot;leader( &lt;leader-type&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;leader-type&quot;</span><span class="s0">: </span><span class="s3">&quot;dotted|solid|space|&lt;string&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;length-percentage&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;line-names&quot;</span><span class="s0">: </span><span class="s3">&quot;'[' &lt;custom-ident&gt;* ']'&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;line-name-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;line-names&gt;|&lt;name-repeat&gt;]+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;line-style&quot;</span><span class="s0">: </span><span class="s3">&quot;none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;line-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|thin|medium|thick&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;linear-color-hint&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;linear-color-stop&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt; &lt;color-stop-length&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;linear-gradient()&quot;</span><span class="s0">: </span><span class="s3">&quot;linear-gradient( [&lt;angle&gt;|to &lt;side-or-corner&gt;]? , &lt;color-stop-list&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-layer&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;mask-reference&gt;||&lt;position&gt; [/ &lt;bg-size&gt;]?||&lt;repeat-style&gt;||&lt;geometry-box&gt;||[&lt;geometry-box&gt;|no-clip]||&lt;compositing-operator&gt;||&lt;masking-mode&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-position&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length-percentage&gt;|left|center|right] [&lt;length-percentage&gt;|top|center|bottom]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-reference&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;image&gt;|&lt;mask-source&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-source&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;masking-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;alpha|luminance|match-source&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;matrix()&quot;</span><span class="s0">: </span><span class="s3">&quot;matrix( &lt;number&gt;#{6} )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;matrix3d()&quot;</span><span class="s0">: </span><span class="s3">&quot;matrix3d( &lt;number&gt;#{16} )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;max()&quot;</span><span class="s0">: </span><span class="s3">&quot;max( &lt;calc-sum&gt;# )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-and&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;media-in-parens&gt; [and &lt;media-in-parens&gt;]+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-condition&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;media-not&gt;|&lt;media-and&gt;|&lt;media-or&gt;|&lt;media-in-parens&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-condition-without-or&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;media-not&gt;|&lt;media-and&gt;|&lt;media-in-parens&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-feature&quot;</span><span class="s0">: </span><span class="s3">&quot;( [&lt;mf-plain&gt;|&lt;mf-boolean&gt;|&lt;mf-range&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-in-parens&quot;</span><span class="s0">: </span><span class="s3">&quot;( &lt;media-condition&gt; )|&lt;media-feature&gt;|&lt;general-enclosed&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-not&quot;</span><span class="s0">: </span><span class="s3">&quot;not &lt;media-in-parens&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-or&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;media-in-parens&gt; [or &lt;media-in-parens&gt;]+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-query&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;media-condition&gt;|[not|only]? &lt;media-type&gt; [and &lt;media-condition-without-or&gt;]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-query-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;media-query&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;media-type&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;ident&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mf-boolean&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;mf-name&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mf-name&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;ident&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mf-plain&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;mf-name&gt; : &lt;mf-value&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mf-range&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;mf-name&gt; ['&lt;'|'&gt;']? '='? &lt;mf-value&gt;|&lt;mf-value&gt; ['&lt;'|'&gt;']? '='? &lt;mf-name&gt;|&lt;mf-value&gt; '&lt;' '='? &lt;mf-name&gt; '&lt;' '='? &lt;mf-value&gt;|&lt;mf-value&gt; '&gt;' '='? &lt;mf-name&gt; '&gt;' '='? &lt;mf-value&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mf-value&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;|&lt;dimension&gt;|&lt;ident&gt;|&lt;ratio&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;min()&quot;</span><span class="s0">: </span><span class="s3">&quot;min( &lt;calc-sum&gt;# )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;minmax()&quot;</span><span class="s0">: </span><span class="s3">&quot;minmax( [&lt;length&gt;|&lt;percentage&gt;|min-content|max-content|auto] , [&lt;length&gt;|&lt;percentage&gt;|&lt;flex&gt;|min-content|max-content|auto] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;named-color&quot;</span><span class="s0">: </span><span class="s3">&quot;transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen|&lt;-non-standard-color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;namespace-prefix&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;ident&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;ns-prefix&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;ident-token&gt;|'*']? '|'&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;number-percentage&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;numeric-figure-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[lining-nums|oldstyle-nums]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;numeric-fraction-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[diagonal-fractions|stacked-fractions]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;numeric-spacing-values&quot;</span><span class="s0">: </span><span class="s3">&quot;[proportional-nums|tabular-nums]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;nth&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;an-plus-b&gt;|even|odd&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;opacity()&quot;</span><span class="s0">: </span><span class="s3">&quot;opacity( [&lt;number-percentage&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow-position&quot;</span><span class="s0">: </span><span class="s3">&quot;unsafe|safe&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;outline-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-body&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;declaration&gt;? [; &lt;page-body&gt;]?|&lt;page-margin-box&gt; &lt;page-body&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-margin-box&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;page-margin-box-type&gt; '{' &lt;declaration-list&gt; '}'&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-margin-box-type&quot;</span><span class="s0">: </span><span class="s3">&quot;@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-selector-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;page-selector&gt;#]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;pseudo-page&gt;+|&lt;ident&gt; &lt;pseudo-page&gt;*&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;path()&quot;</span><span class="s0">: </span><span class="s3">&quot;path( [&lt;fill-rule&gt; ,]? &lt;string&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;paint()&quot;</span><span class="s0">: </span><span class="s3">&quot;paint( &lt;ident&gt; , &lt;declaration-value&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;perspective()&quot;</span><span class="s0">: </span><span class="s3">&quot;perspective( &lt;length&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;polygon()&quot;</span><span class="s0">: </span><span class="s3">&quot;polygon( &lt;fill-rule&gt;? , [&lt;length-percentage&gt; &lt;length-percentage&gt;]# )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;position&quot;</span><span class="s0">: </span><span class="s3">&quot;[[left|center|right]||[top|center|bottom]|[left|center|right|&lt;length-percentage&gt;] [top|center|bottom|&lt;length-percentage&gt;]?|[[left|right] &lt;length-percentage&gt;]&amp;&amp;[[top|bottom] &lt;length-percentage&gt;]]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;pseudo-class-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;':' &lt;ident-token&gt;|':' &lt;function-token&gt; &lt;any-value&gt; ')'&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;pseudo-element-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;':' &lt;pseudo-class-selector&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;pseudo-page&quot;</span><span class="s0">: </span><span class="s3">&quot;: [left|right|first|blank]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;quote&quot;</span><span class="s0">: </span><span class="s3">&quot;open-quote|close-quote|no-open-quote|no-close-quote&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;radial-gradient()&quot;</span><span class="s0">: </span><span class="s3">&quot;radial-gradient( [&lt;ending-shape&gt;||&lt;size&gt;]? [at &lt;position&gt;]? , &lt;color-stop-list&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;relative-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;combinator&gt;? &lt;complex-selector&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;relative-selector-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;relative-selector&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;relative-size&quot;</span><span class="s0">: </span><span class="s3">&quot;larger|smaller&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;repeat-style&quot;</span><span class="s0">: </span><span class="s3">&quot;repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;repeating-linear-gradient()&quot;</span><span class="s0">: </span><span class="s3">&quot;repeating-linear-gradient( [&lt;angle&gt;|to &lt;side-or-corner&gt;]? , &lt;color-stop-list&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;repeating-radial-gradient()&quot;</span><span class="s0">: </span><span class="s3">&quot;repeating-radial-gradient( [&lt;ending-shape&gt;||&lt;size&gt;]? [at &lt;position&gt;]? , &lt;color-stop-list&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rgb()&quot;</span><span class="s0">: </span><span class="s3">&quot;rgb( &lt;percentage&gt;{3} [/ &lt;alpha-value&gt;]? )|rgb( &lt;number&gt;{3} [/ &lt;alpha-value&gt;]? )|rgb( &lt;percentage&gt;#{3} , &lt;alpha-value&gt;? )|rgb( &lt;number&gt;#{3} , &lt;alpha-value&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rgba()&quot;</span><span class="s0">: </span><span class="s3">&quot;rgba( &lt;percentage&gt;{3} [/ &lt;alpha-value&gt;]? )|rgba( &lt;number&gt;{3} [/ &lt;alpha-value&gt;]? )|rgba( &lt;percentage&gt;#{3} , &lt;alpha-value&gt;? )|rgba( &lt;number&gt;#{3} , &lt;alpha-value&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rotate()&quot;</span><span class="s0">: </span><span class="s3">&quot;rotate( [&lt;angle&gt;|&lt;zero&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rotate3d()&quot;</span><span class="s0">: </span><span class="s3">&quot;rotate3d( &lt;number&gt; , &lt;number&gt; , &lt;number&gt; , [&lt;angle&gt;|&lt;zero&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rotateX()&quot;</span><span class="s0">: </span><span class="s3">&quot;rotateX( [&lt;angle&gt;|&lt;zero&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rotateY()&quot;</span><span class="s0">: </span><span class="s3">&quot;rotateY( [&lt;angle&gt;|&lt;zero&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rotateZ()&quot;</span><span class="s0">: </span><span class="s3">&quot;rotateZ( [&lt;angle&gt;|&lt;zero&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;saturate()&quot;</span><span class="s0">: </span><span class="s3">&quot;saturate( &lt;number-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scale()&quot;</span><span class="s0">: </span><span class="s3">&quot;scale( &lt;number&gt; , &lt;number&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scale3d()&quot;</span><span class="s0">: </span><span class="s3">&quot;scale3d( &lt;number&gt; , &lt;number&gt; , &lt;number&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scaleX()&quot;</span><span class="s0">: </span><span class="s3">&quot;scaleX( &lt;number&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scaleY()&quot;</span><span class="s0">: </span><span class="s3">&quot;scaleY( &lt;number&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scaleZ()&quot;</span><span class="s0">: </span><span class="s3">&quot;scaleZ( &lt;number&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;self-position&quot;</span><span class="s0">: </span><span class="s3">&quot;center|start|end|self-start|self-end|flex-start|flex-end&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shape-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;|closest-side|farthest-side&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;skew()&quot;</span><span class="s0">: </span><span class="s3">&quot;skew( [&lt;angle&gt;|&lt;zero&gt;] , [&lt;angle&gt;|&lt;zero&gt;]? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;skewX()&quot;</span><span class="s0">: </span><span class="s3">&quot;skewX( [&lt;angle&gt;|&lt;zero&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;skewY()&quot;</span><span class="s0">: </span><span class="s3">&quot;skewY( [&lt;angle&gt;|&lt;zero&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;sepia()&quot;</span><span class="s0">: </span><span class="s3">&quot;sepia( &lt;number-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shadow&quot;</span><span class="s0">: </span><span class="s3">&quot;inset?&amp;&amp;&lt;length&gt;{2,4}&amp;&amp;&lt;color&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shadow-t&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length&gt;{2,3}&amp;&amp;&lt;color&gt;?]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shape&quot;</span><span class="s0">: </span><span class="s3">&quot;rect( &lt;top&gt; , &lt;right&gt; , &lt;bottom&gt; , &lt;left&gt; )|rect( &lt;top&gt; &lt;right&gt; &lt;bottom&gt; &lt;left&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shape-box&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;box&gt;|margin-box&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;side-or-corner&quot;</span><span class="s0">: </span><span class="s3">&quot;[left|right]||[top|bottom]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;single-animation&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;||&lt;timing-function&gt;||&lt;time&gt;||&lt;single-animation-iteration-count&gt;||&lt;single-animation-direction&gt;||&lt;single-animation-fill-mode&gt;||&lt;single-animation-play-state&gt;||[none|&lt;keyframes-name&gt;]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;single-animation-direction&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|reverse|alternate|alternate-reverse&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;single-animation-fill-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;none|forwards|backwards|both&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;single-animation-iteration-count&quot;</span><span class="s0">: </span><span class="s3">&quot;infinite|&lt;number&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;single-animation-play-state&quot;</span><span class="s0">: </span><span class="s3">&quot;running|paused&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;single-transition&quot;</span><span class="s0">: </span><span class="s3">&quot;[none|&lt;single-transition-property&gt;]||&lt;time&gt;||&lt;timing-function&gt;||&lt;time&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;single-transition-property&quot;</span><span class="s0">: </span><span class="s3">&quot;all|&lt;custom-ident&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;size&quot;</span><span class="s0">: </span><span class="s3">&quot;closest-side|farthest-side|closest-corner|farthest-corner|&lt;length&gt;|&lt;length-percentage&gt;{2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;step-position&quot;</span><span class="s0">: </span><span class="s3">&quot;jump-start|jump-end|jump-none|jump-both|start|end&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;step-timing-function&quot;</span><span class="s0">: </span><span class="s3">&quot;step-start|step-end|steps( &lt;integer&gt; [, &lt;step-position&gt;]? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;subclass-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;id-selector&gt;|&lt;class-selector&gt;|&lt;attribute-selector&gt;|&lt;pseudo-class-selector&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;supports-condition&quot;</span><span class="s0">: </span><span class="s3">&quot;not &lt;supports-in-parens&gt;|&lt;supports-in-parens&gt; [and &lt;supports-in-parens&gt;]*|&lt;supports-in-parens&gt; [or &lt;supports-in-parens&gt;]*&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;supports-in-parens&quot;</span><span class="s0">: </span><span class="s3">&quot;( &lt;supports-condition&gt; )|&lt;supports-feature&gt;|&lt;general-enclosed&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;supports-feature&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;supports-decl&gt;|&lt;supports-selector-fn&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;supports-decl&quot;</span><span class="s0">: </span><span class="s3">&quot;( &lt;declaration&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;supports-selector-fn&quot;</span><span class="s0">: </span><span class="s3">&quot;selector( &lt;complex-selector&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;symbol&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;string&gt;|&lt;image&gt;|&lt;custom-ident&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;target&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;target-counter()&gt;|&lt;target-counters()&gt;|&lt;target-text()&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;target-counter()&quot;</span><span class="s0">: </span><span class="s3">&quot;target-counter( [&lt;string&gt;|&lt;url&gt;] , &lt;custom-ident&gt; , &lt;counter-style&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;target-counters()&quot;</span><span class="s0">: </span><span class="s3">&quot;target-counters( [&lt;string&gt;|&lt;url&gt;] , &lt;custom-ident&gt; , &lt;string&gt; , &lt;counter-style&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;target-text()&quot;</span><span class="s0">: </span><span class="s3">&quot;target-text( [&lt;string&gt;|&lt;url&gt;] , [content|before|after|first-letter]? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;time-percentage&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;timing-function&quot;</span><span class="s0">: </span><span class="s3">&quot;linear|&lt;cubic-bezier-timing-function&gt;|&lt;step-timing-function&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;track-breadth&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;|&lt;flex&gt;|min-content|max-content|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;track-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;line-names&gt;? [&lt;track-size&gt;|&lt;track-repeat&gt;]]+ &lt;line-names&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;track-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;repeat( [&lt;positive-integer&gt;] , [&lt;line-names&gt;? &lt;track-size&gt;]+ &lt;line-names&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;track-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;track-breadth&gt;|minmax( &lt;inflexible-breadth&gt; , &lt;track-breadth&gt; )|fit-content( [&lt;length&gt;|&lt;percentage&gt;] )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transform-function&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;matrix()&gt;|&lt;translate()&gt;|&lt;translateX()&gt;|&lt;translateY()&gt;|&lt;scale()&gt;|&lt;scaleX()&gt;|&lt;scaleY()&gt;|&lt;rotate()&gt;|&lt;skew()&gt;|&lt;skewX()&gt;|&lt;skewY()&gt;|&lt;matrix3d()&gt;|&lt;translate3d()&gt;|&lt;translateZ()&gt;|&lt;scale3d()&gt;|&lt;scaleZ()&gt;|&lt;rotate3d()&gt;|&lt;rotateX()&gt;|&lt;rotateY()&gt;|&lt;rotateZ()&gt;|&lt;perspective()&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transform-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;transform-function&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;translate()&quot;</span><span class="s0">: </span><span class="s3">&quot;translate( &lt;length-percentage&gt; , &lt;length-percentage&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;translate3d()&quot;</span><span class="s0">: </span><span class="s3">&quot;translate3d( &lt;length-percentage&gt; , &lt;length-percentage&gt; , &lt;length&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;translateX()&quot;</span><span class="s0">: </span><span class="s3">&quot;translateX( &lt;length-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;translateY()&quot;</span><span class="s0">: </span><span class="s3">&quot;translateY( &lt;length-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;translateZ()&quot;</span><span class="s0">: </span><span class="s3">&quot;translateZ( &lt;length&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;type-or-unit&quot;</span><span class="s0">: </span><span class="s3">&quot;string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;type-selector&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;wq-name&gt;|&lt;ns-prefix&gt;? '*'&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;var()&quot;</span><span class="s0">: </span><span class="s3">&quot;var( &lt;custom-property-name&gt; , &lt;declaration-value&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;viewport-length&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;wq-name&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;ns-prefix&gt;? &lt;ident-token&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-gradient&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;-webkit-gradient()&gt;|&lt;-legacy-linear-gradient&gt;|&lt;-legacy-repeating-linear-gradient&gt;|&lt;-legacy-radial-gradient&gt;|&lt;-legacy-repeating-radial-gradient&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-linear-gradient&quot;</span><span class="s0">: </span><span class="s3">&quot;-moz-linear-gradient( &lt;-legacy-linear-gradient-arguments&gt; )|-webkit-linear-gradient( &lt;-legacy-linear-gradient-arguments&gt; )|-o-linear-gradient( &lt;-legacy-linear-gradient-arguments&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-repeating-linear-gradient&quot;</span><span class="s0">: </span><span class="s3">&quot;-moz-repeating-linear-gradient( &lt;-legacy-linear-gradient-arguments&gt; )|-webkit-repeating-linear-gradient( &lt;-legacy-linear-gradient-arguments&gt; )|-o-repeating-linear-gradient( &lt;-legacy-linear-gradient-arguments&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-linear-gradient-arguments&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;angle&gt;|&lt;side-or-corner&gt;]? , &lt;color-stop-list&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-radial-gradient&quot;</span><span class="s0">: </span><span class="s3">&quot;-moz-radial-gradient( &lt;-legacy-radial-gradient-arguments&gt; )|-webkit-radial-gradient( &lt;-legacy-radial-gradient-arguments&gt; )|-o-radial-gradient( &lt;-legacy-radial-gradient-arguments&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-repeating-radial-gradient&quot;</span><span class="s0">: </span><span class="s3">&quot;-moz-repeating-radial-gradient( &lt;-legacy-radial-gradient-arguments&gt; )|-webkit-repeating-radial-gradient( &lt;-legacy-radial-gradient-arguments&gt; )|-o-repeating-radial-gradient( &lt;-legacy-radial-gradient-arguments&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-radial-gradient-arguments&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;position&gt; ,]? [[[&lt;-legacy-radial-gradient-shape&gt;||&lt;-legacy-radial-gradient-size&gt;]|[&lt;length&gt;|&lt;percentage&gt;]{2}] ,]? &lt;color-stop-list&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-radial-gradient-size&quot;</span><span class="s0">: </span><span class="s3">&quot;closest-side|closest-corner|farthest-side|farthest-corner|contain|cover&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-legacy-radial-gradient-shape&quot;</span><span class="s0">: </span><span class="s3">&quot;circle|ellipse&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-non-standard-font&quot;</span><span class="s0">: </span><span class="s3">&quot;-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-non-standard-color&quot;</span><span class="s0">: </span><span class="s3">&quot;-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-non-standard-image-rendering&quot;</span><span class="s0">: </span><span class="s3">&quot;optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-non-standard-overflow&quot;</span><span class="s0">: </span><span class="s3">&quot;-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-non-standard-width&quot;</span><span class="s0">: </span><span class="s3">&quot;fill-available|min-intrinsic|intrinsic|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content|-webkit-min-content|-webkit-max-content&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-gradient()&quot;</span><span class="s0">: </span><span class="s3">&quot;-webkit-gradient( &lt;-webkit-gradient-type&gt; , &lt;-webkit-gradient-point&gt; [, &lt;-webkit-gradient-point&gt;|, &lt;-webkit-gradient-radius&gt; , &lt;-webkit-gradient-point&gt;] [, &lt;-webkit-gradient-radius&gt;]? [, &lt;-webkit-gradient-color-stop&gt;]* )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-gradient-color-stop&quot;</span><span class="s0">: </span><span class="s3">&quot;from( &lt;color&gt; )|color-stop( [&lt;number-zero-one&gt;|&lt;percentage&gt;] , &lt;color&gt; )|to( &lt;color&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-gradient-point&quot;</span><span class="s0">: </span><span class="s3">&quot;[left|center|right|&lt;length-percentage&gt;] [top|center|bottom|&lt;length-percentage&gt;]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-gradient-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-gradient-type&quot;</span><span class="s0">: </span><span class="s3">&quot;linear|radial&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-box-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;repeat|stretch|round&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-clip-style&quot;</span><span class="s0">: </span><span class="s3">&quot;border|border-box|padding|padding-box|content|content-box|text&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-filter-function-list&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;-ms-filter-function&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-filter-function&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;-ms-filter-function-progid&gt;|&lt;-ms-filter-function-legacy&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-filter-function-progid&quot;</span><span class="s0">: </span><span class="s3">&quot;'progid:' [&lt;ident-token&gt; '.']* [&lt;ident-token&gt;|&lt;function-token&gt; &lt;any-value&gt;? )]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-filter-function-legacy&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;ident-token&gt;|&lt;function-token&gt; &lt;any-value&gt;? )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-filter&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;string&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;age&quot;</span><span class="s0">: </span><span class="s3">&quot;child|young|old&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;attr-name&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;wq-name&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;attr-fallback&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;any-value&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;bottom&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;generic-voice&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;age&gt;? &lt;gender&gt; &lt;integer&gt;?]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;gender&quot;</span><span class="s0">: </span><span class="s3">&quot;male|female|neutral&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;left&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;mask-reference&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;name-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;repeat( [&lt;positive-integer&gt;|auto-fill] , &lt;line-names&gt;+ )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;paint&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;color&gt;|&lt;url&gt; [none|&lt;color&gt;]?|context-fill|context-stroke&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-size&quot;</span><span class="s0">: </span><span class="s3">&quot;A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;ratio&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt; / &lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;right&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;svg-length&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;percentage&gt;|&lt;length&gt;|&lt;number&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;svg-writing-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;lr-tb|rl-tb|tb-rl|lr|rl|tb&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;top&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;track-group&quot;</span><span class="s0">: </span><span class="s3">&quot;'(' [&lt;string&gt;* &lt;track-minmax&gt; &lt;string&gt;*]+ ')' ['[' &lt;positive-integer&gt; ']']?|&lt;track-minmax&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;track-list-v0&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;string&gt;* &lt;track-group&gt; &lt;string&gt;*]+|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;track-minmax&quot;</span><span class="s0">: </span><span class="s3">&quot;minmax( &lt;track-breadth&gt; , &lt;track-breadth&gt; )|auto|&lt;track-breadth&gt;|fit-content&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;x&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;y&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;declaration&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;ident-token&gt; : &lt;declaration-value&gt;? ['!' important]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;declaration-list&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;declaration&gt;? ';']* &lt;declaration&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;url&quot;</span><span class="s0">: </span><span class="s3">&quot;url( &lt;string&gt; &lt;url-modifier&gt;* )|&lt;url-token&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;url-modifier&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;ident&gt;|&lt;function-token&gt; &lt;any-value&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;number-zero-one&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number [0,1]&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;number-one-or-greater&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number [1,∞]&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;positive-integer&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer [0,∞]&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-non-standard-display&quot;</span><span class="s0">: </span><span class="s3">&quot;-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box&quot;</span>
        <span class="s0">},</span>
        <span class="s3">&quot;properties&quot;</span><span class="s0">: {</span>
            <span class="s3">&quot;--*&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;declaration-value&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-accelerator&quot;</span><span class="s0">: </span><span class="s3">&quot;false|true&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-block-progression&quot;</span><span class="s0">: </span><span class="s3">&quot;tb|rl|bt|lr&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-content-zoom-chaining&quot;</span><span class="s0">: </span><span class="s3">&quot;none|chained&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-content-zooming&quot;</span><span class="s0">: </span><span class="s3">&quot;none|zoom&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-content-zoom-limit&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'-ms-content-zoom-limit-min'&gt; &lt;'-ms-content-zoom-limit-max'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-content-zoom-limit-max&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-content-zoom-limit-min&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-content-zoom-snap&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'-ms-content-zoom-snap-type'&gt;||&lt;'-ms-content-zoom-snap-points'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-content-zoom-snap-points&quot;</span><span class="s0">: </span><span class="s3">&quot;snapInterval( &lt;percentage&gt; , &lt;percentage&gt; )|snapList( &lt;percentage&gt;# )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-content-zoom-snap-type&quot;</span><span class="s0">: </span><span class="s3">&quot;none|proximity|mandatory&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-filter&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;string&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flow-from&quot;</span><span class="s0">: </span><span class="s3">&quot;[none|&lt;custom-ident&gt;]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flow-into&quot;</span><span class="s0">: </span><span class="s3">&quot;[none|&lt;custom-ident&gt;]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-grid-columns&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;track-list&gt;|&lt;auto-track-list&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-grid-rows&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;track-list&gt;|&lt;auto-track-list&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-high-contrast-adjust&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-hyphenate-limit-chars&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;integer&gt;{1,3}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-hyphenate-limit-lines&quot;</span><span class="s0">: </span><span class="s3">&quot;no-limit|&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-hyphenate-limit-zone&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;percentage&gt;|&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-ime-align&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|after&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-overflow-style&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none|scrollbar|-ms-autohiding-scrollbar&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scrollbar-3dlight-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scrollbar-arrow-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scrollbar-base-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scrollbar-darkshadow-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scrollbar-face-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scrollbar-highlight-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scrollbar-shadow-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scrollbar-track-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-chaining&quot;</span><span class="s0">: </span><span class="s3">&quot;chained|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-limit&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'-ms-scroll-limit-x-min'&gt; &lt;'-ms-scroll-limit-y-min'&gt; &lt;'-ms-scroll-limit-x-max'&gt; &lt;'-ms-scroll-limit-y-max'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-limit-x-max&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-limit-x-min&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-limit-y-max&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-limit-y-min&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-rails&quot;</span><span class="s0">: </span><span class="s3">&quot;none|railed&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-snap-points-x&quot;</span><span class="s0">: </span><span class="s3">&quot;snapInterval( &lt;length-percentage&gt; , &lt;length-percentage&gt; )|snapList( &lt;length-percentage&gt;# )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-snap-points-y&quot;</span><span class="s0">: </span><span class="s3">&quot;snapInterval( &lt;length-percentage&gt; , &lt;length-percentage&gt; )|snapList( &lt;length-percentage&gt;# )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-snap-type&quot;</span><span class="s0">: </span><span class="s3">&quot;none|proximity|mandatory&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-snap-x&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'-ms-scroll-snap-type'&gt; &lt;'-ms-scroll-snap-points-x'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-snap-y&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'-ms-scroll-snap-type'&gt; &lt;'-ms-scroll-snap-points-y'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-scroll-translation&quot;</span><span class="s0">: </span><span class="s3">&quot;none|vertical-to-horizontal&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-text-autospace&quot;</span><span class="s0">: </span><span class="s3">&quot;none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-touch-select&quot;</span><span class="s0">: </span><span class="s3">&quot;grippers|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-user-select&quot;</span><span class="s0">: </span><span class="s3">&quot;none|element|text&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-wrap-flow&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|both|start|end|maximum|clear&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-wrap-margin&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-wrap-through&quot;</span><span class="s0">: </span><span class="s3">&quot;wrap|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-appearance&quot;</span><span class="s0">: </span><span class="s3">&quot;none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-binding&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt;|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-border-bottom-colors&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;+|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-border-left-colors&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;+|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-border-right-colors&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;+|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-border-top-colors&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;+|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-context-properties&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[fill|fill-opacity|stroke|stroke-opacity]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-float-edge&quot;</span><span class="s0">: </span><span class="s3">&quot;border-box|content-box|margin-box|padding-box&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-force-broken-image-icon&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer [0,1]&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-image-region&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;shape&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-orient&quot;</span><span class="s0">: </span><span class="s3">&quot;inline|block|horizontal|vertical&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-outline-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;outline-radius&gt;{1,4} [/ &lt;outline-radius&gt;{1,4}]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-outline-radius-bottomleft&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;outline-radius&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-outline-radius-bottomright&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;outline-radius&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-outline-radius-topleft&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;outline-radius&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-outline-radius-topright&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;outline-radius&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-stack-sizing&quot;</span><span class="s0">: </span><span class="s3">&quot;ignore|stretch-to-fit&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-text-blink&quot;</span><span class="s0">: </span><span class="s3">&quot;none|blink&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-user-focus&quot;</span><span class="s0">: </span><span class="s3">&quot;ignore|normal|select-after|select-before|select-menu|select-same|select-all|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-user-input&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none|enabled|disabled&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-user-modify&quot;</span><span class="s0">: </span><span class="s3">&quot;read-only|read-write|write-only&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-window-dragging&quot;</span><span class="s0">: </span><span class="s3">&quot;drag|no-drag&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-window-shadow&quot;</span><span class="s0">: </span><span class="s3">&quot;default|menu|tooltip|sheet|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-appearance&quot;</span><span class="s0">: </span><span class="s3">&quot;none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-border-before&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-width'&gt;||&lt;'border-style'&gt;||&lt;'color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-border-before-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-border-before-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-border-before-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-box-reflect&quot;</span><span class="s0">: </span><span class="s3">&quot;[above|below|right|left]? &lt;length&gt;? &lt;image&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-line-clamp&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;mask-reference&gt;||&lt;position&gt; [/ &lt;bg-size&gt;]?||&lt;repeat-style&gt;||[&lt;box&gt;|border|padding|content|text]||[&lt;box&gt;|border|padding|content]]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-attachment&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;attachment&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-clip&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;box&gt;|border|padding|content|text]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-composite&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;composite-style&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;mask-reference&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-origin&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;box&gt;|border|padding|content]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-position&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;position&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-position-x&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length-percentage&gt;|left|center|right]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-position-y&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length-percentage&gt;|top|center|bottom]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;repeat-style&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-repeat-x&quot;</span><span class="s0">: </span><span class="s3">&quot;repeat|no-repeat|space|round&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-repeat-y&quot;</span><span class="s0">: </span><span class="s3">&quot;repeat|no-repeat|space|round&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;bg-size&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-overflow-scrolling&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|touch&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-tap-highlight-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-text-fill-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-text-stroke&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;||&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-text-stroke-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-text-stroke-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-touch-callout&quot;</span><span class="s0">: </span><span class="s3">&quot;default|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-user-modify&quot;</span><span class="s0">: </span><span class="s3">&quot;read-only|read-write|read-write-plaintext-only&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;align-content&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;baseline-position&gt;|&lt;content-distribution&gt;|&lt;overflow-position&gt;? &lt;content-position&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;align-items&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|stretch|&lt;baseline-position&gt;|[&lt;overflow-position&gt;? &lt;self-position&gt;]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;align-self&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|normal|stretch|&lt;baseline-position&gt;|&lt;overflow-position&gt;? &lt;self-position&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;align-tracks&quot;</span><span class="s0">: </span><span class="s3">&quot;[normal|&lt;baseline-position&gt;|&lt;content-distribution&gt;|&lt;overflow-position&gt;? &lt;content-position&gt;]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;all&quot;</span><span class="s0">: </span><span class="s3">&quot;initial|inherit|unset|revert&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;single-animation&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation-delay&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation-direction&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;single-animation-direction&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation-duration&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation-fill-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;single-animation-fill-mode&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation-iteration-count&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;single-animation-iteration-count&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation-name&quot;</span><span class="s0">: </span><span class="s3">&quot;[none|&lt;keyframes-name&gt;]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation-play-state&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;single-animation-play-state&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;animation-timing-function&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;timing-function&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;appearance&quot;</span><span class="s0">: </span><span class="s3">&quot;none|auto|textfield|menulist-button|&lt;compat-auto&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;aspect-ratio&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;ratio&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;azimuth&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;angle&gt;|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;backdrop-filter&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;filter-function-list&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;backface-visibility&quot;</span><span class="s0">: </span><span class="s3">&quot;visible|hidden&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;bg-layer&gt; ,]* &lt;final-bg-layer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-attachment&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;attachment&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-blend-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;blend-mode&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-clip&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;box&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;bg-image&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-origin&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;box&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-position&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;bg-position&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-position-x&quot;</span><span class="s0">: </span><span class="s3">&quot;[center|[[left|right|x-start|x-end]? &lt;length-percentage&gt;?]!]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-position-y&quot;</span><span class="s0">: </span><span class="s3">&quot;[center|[[top|bottom|y-start|y-end]? &lt;length-percentage&gt;?]!]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;repeat-style&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;background-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;bg-size&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;block-overflow&quot;</span><span class="s0">: </span><span class="s3">&quot;clip|ellipsis|&lt;string&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;block-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;||&lt;line-style&gt;||&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;||&lt;'border-top-style'&gt;||&lt;'color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-color'&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;||&lt;'border-top-style'&gt;||&lt;'color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-end-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-end-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-end-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;||&lt;'border-top-style'&gt;||&lt;'color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-start-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-start-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-block-start-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-bottom&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;||&lt;line-style&gt;||&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-bottom-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-bottom-left-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-bottom-right-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-bottom-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-style&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-bottom-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-collapse&quot;</span><span class="s0">: </span><span class="s3">&quot;collapse|separate&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-end-end-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-end-start-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-image-source'&gt;||&lt;'border-image-slice'&gt; [/ &lt;'border-image-width'&gt;|/ &lt;'border-image-width'&gt;? / &lt;'border-image-outset'&gt;]?||&lt;'border-image-repeat'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-image-outset&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length&gt;|&lt;number&gt;]{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-image-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;[stretch|repeat|round|space]{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-image-slice&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number-percentage&gt;{1,4}&amp;&amp;fill?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-image-source&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;image&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-image-width&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length-percentage&gt;|&lt;number&gt;|auto]{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;||&lt;'border-top-style'&gt;||&lt;'color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;||&lt;'border-top-style'&gt;||&lt;'color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-color'&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-end-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-end-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-end-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;||&lt;'border-top-style'&gt;||&lt;'color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-start-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-start-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-inline-start-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-left&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;||&lt;line-style&gt;||&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-left-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-left-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-style&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-left-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,4} [/ &lt;length-percentage&gt;{1,4}]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-right&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;||&lt;line-style&gt;||&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-right-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-right-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-style&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-right-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-spacing&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt; &lt;length&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-start-end-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-start-start-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-style&gt;{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-top&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;||&lt;line-style&gt;||&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-top-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-top-left-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-top-right-radius&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-top-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-style&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-top-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;border-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;bottom&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-align&quot;</span><span class="s0">: </span><span class="s3">&quot;start|center|end|baseline|stretch&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-decoration-break&quot;</span><span class="s0">: </span><span class="s3">&quot;slice|clone&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-direction&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|reverse|inherit&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-flex&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-flex-group&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-lines&quot;</span><span class="s0">: </span><span class="s3">&quot;single|multiple&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-ordinal-group&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-orient&quot;</span><span class="s0">: </span><span class="s3">&quot;horizontal|vertical|inline-axis|block-axis|inherit&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-pack&quot;</span><span class="s0">: </span><span class="s3">&quot;start|center|end|justify&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-shadow&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;shadow&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;box-sizing&quot;</span><span class="s0">: </span><span class="s3">&quot;content-box|border-box&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;break-after&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;break-before&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;break-inside&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|avoid|avoid-page|avoid-column|avoid-region&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;caption-side&quot;</span><span class="s0">: </span><span class="s3">&quot;top|bottom|block-start|block-end|inline-start|inline-end&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;caret-color&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;clear&quot;</span><span class="s0">: </span><span class="s3">&quot;none|left|right|both|inline-start|inline-end&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;clip&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;shape&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;clip-path&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;clip-source&gt;|[&lt;basic-shape&gt;||&lt;geometry-box&gt;]|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;color-adjust&quot;</span><span class="s0">: </span><span class="s3">&quot;economy|exact&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-count&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-fill&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|balance|balance-all&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-gap&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-rule&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'column-rule-width'&gt;||&lt;'column-rule-style'&gt;||&lt;'column-rule-color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-rule-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-rule-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-rule-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-span&quot;</span><span class="s0">: </span><span class="s3">&quot;none|all&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;column-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;columns&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'column-width'&gt;||&lt;'column-count'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;contain&quot;</span><span class="s0">: </span><span class="s3">&quot;none|strict|content|[size||layout||style||paint]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;content&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|none|[&lt;content-replacement&gt;|&lt;content-list&gt;] [/ &lt;string&gt;]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;counter-increment&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;custom-ident&gt; &lt;integer&gt;?]+|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;counter-reset&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;custom-ident&gt; &lt;integer&gt;?]+|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;counter-set&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;custom-ident&gt; &lt;integer&gt;?]+|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;cursor&quot;</span><span class="s0">: </span><span class="s3">&quot;[[&lt;url&gt; [&lt;x&gt; &lt;y&gt;]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;direction&quot;</span><span class="s0">: </span><span class="s3">&quot;ltr|rtl&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;display&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;display-outside&gt;||&lt;display-inside&gt;]|&lt;display-listitem&gt;|&lt;display-internal&gt;|&lt;display-box&gt;|&lt;display-legacy&gt;|&lt;-non-standard-display&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;empty-cells&quot;</span><span class="s0">: </span><span class="s3">&quot;show|hide&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;filter&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;filter-function-list&gt;|&lt;-ms-filter-function-list&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;flex&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[&lt;'flex-grow'&gt; &lt;'flex-shrink'&gt;?||&lt;'flex-basis'&gt;]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;flex-basis&quot;</span><span class="s0">: </span><span class="s3">&quot;content|&lt;'width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;flex-direction&quot;</span><span class="s0">: </span><span class="s3">&quot;row|row-reverse|column|column-reverse&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;flex-flow&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'flex-direction'&gt;||&lt;'flex-wrap'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;flex-grow&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;flex-shrink&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;flex-wrap&quot;</span><span class="s0">: </span><span class="s3">&quot;nowrap|wrap|wrap-reverse&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;float&quot;</span><span class="s0">: </span><span class="s3">&quot;left|right|none|inline-start|inline-end&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font&quot;</span><span class="s0">: </span><span class="s3">&quot;[[&lt;'font-style'&gt;||&lt;font-variant-css21&gt;||&lt;'font-weight'&gt;||&lt;'font-stretch'&gt;]? &lt;'font-size'&gt; [/ &lt;'line-height'&gt;]? &lt;'font-family'&gt;]|caption|icon|menu|message-box|small-caption|status-bar&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-family&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;family-name&gt;|&lt;generic-family&gt;]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-feature-settings&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;feature-tag-value&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-kerning&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|normal|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-language-override&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;string&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-optical-sizing&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variation-settings&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|[&lt;string&gt; &lt;number&gt;]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;absolute-size&gt;|&lt;relative-size&gt;|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-size-adjust&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;number&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-smooth&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|never|always|&lt;absolute-size&gt;|&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-stretch&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;font-stretch-absolute&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-style&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|italic|oblique &lt;angle&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-synthesis&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[weight||style]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variant&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|none|[&lt;common-lig-values&gt;||&lt;discretionary-lig-values&gt;||&lt;historical-lig-values&gt;||&lt;contextual-alt-values&gt;||stylistic( &lt;feature-value-name&gt; )||historical-forms||styleset( &lt;feature-value-name&gt;# )||character-variant( &lt;feature-value-name&gt;# )||swash( &lt;feature-value-name&gt; )||ornaments( &lt;feature-value-name&gt; )||annotation( &lt;feature-value-name&gt; )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||&lt;numeric-figure-values&gt;||&lt;numeric-spacing-values&gt;||&lt;numeric-fraction-values&gt;||ordinal||slashed-zero||&lt;east-asian-variant-values&gt;||&lt;east-asian-width-values&gt;||ruby]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variant-alternates&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|[stylistic( &lt;feature-value-name&gt; )||historical-forms||styleset( &lt;feature-value-name&gt;# )||character-variant( &lt;feature-value-name&gt;# )||swash( &lt;feature-value-name&gt; )||ornaments( &lt;feature-value-name&gt; )||annotation( &lt;feature-value-name&gt; )]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variant-caps&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variant-east-asian&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|[&lt;east-asian-variant-values&gt;||&lt;east-asian-width-values&gt;||ruby]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variant-ligatures&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|none|[&lt;common-lig-values&gt;||&lt;discretionary-lig-values&gt;||&lt;historical-lig-values&gt;||&lt;contextual-alt-values&gt;]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variant-numeric&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|[&lt;numeric-figure-values&gt;||&lt;numeric-spacing-values&gt;||&lt;numeric-fraction-values&gt;||ordinal||slashed-zero]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-variant-position&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|sub|super&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;font-weight&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;font-weight-absolute&gt;|bolder|lighter&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;gap&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'row-gap'&gt; &lt;'column-gap'&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'grid-template'&gt;|&lt;'grid-template-rows'&gt; / [auto-flow&amp;&amp;dense?] &lt;'grid-auto-columns'&gt;?|[auto-flow&amp;&amp;dense?] &lt;'grid-auto-rows'&gt;? / &lt;'grid-template-columns'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-area&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;grid-line&gt; [/ &lt;grid-line&gt;]{0,3}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-auto-columns&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;track-size&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-auto-flow&quot;</span><span class="s0">: </span><span class="s3">&quot;[row|column]||dense&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-auto-rows&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;track-size&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-column&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;grid-line&gt; [/ &lt;grid-line&gt;]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-column-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;grid-line&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-column-gap&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-column-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;grid-line&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-gap&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'grid-row-gap'&gt; &lt;'grid-column-gap'&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-row&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;grid-line&gt; [/ &lt;grid-line&gt;]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-row-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;grid-line&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-row-gap&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-row-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;grid-line&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-template&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[&lt;'grid-template-rows'&gt; / &lt;'grid-template-columns'&gt;]|[&lt;line-names&gt;? &lt;string&gt; &lt;track-size&gt;? &lt;line-names&gt;?]+ [/ &lt;explicit-track-list&gt;]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-template-areas&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;string&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-template-columns&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;track-list&gt;|&lt;auto-track-list&gt;|subgrid &lt;line-name-list&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;grid-template-rows&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;track-list&gt;|&lt;auto-track-list&gt;|subgrid &lt;line-name-list&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;hanging-punctuation&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[first||[force-end|allow-end]||last]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;height&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length&gt;|&lt;percentage&gt;|min-content|max-content|fit-content( &lt;length-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;hyphens&quot;</span><span class="s0">: </span><span class="s3">&quot;none|manual|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image-orientation&quot;</span><span class="s0">: </span><span class="s3">&quot;from-image|&lt;angle&gt;|[&lt;angle&gt;? flip]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image-rendering&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|&lt;-non-standard-image-rendering&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;image-resolution&quot;</span><span class="s0">: </span><span class="s3">&quot;[from-image||&lt;resolution&gt;]&amp;&amp;snap?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;ime-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|normal|active|inactive|disabled&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;initial-letter&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|[&lt;number&gt; &lt;integer&gt;?]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;initial-letter-align&quot;</span><span class="s0">: </span><span class="s3">&quot;[auto|alphabetic|hanging|ideographic]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inline-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inset&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'top'&gt;{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inset-block&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'top'&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inset-block-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'top'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inset-block-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'top'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inset-inline&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'top'&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inset-inline-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'top'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;inset-inline-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'top'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;isolation&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|isolate&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;justify-content&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;content-distribution&gt;|&lt;overflow-position&gt;? [&lt;content-position&gt;|left|right]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;justify-items&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|stretch|&lt;baseline-position&gt;|&lt;overflow-position&gt;? [&lt;self-position&gt;|left|right]|legacy|legacy&amp;&amp;[left|right|center]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;justify-self&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|normal|stretch|&lt;baseline-position&gt;|&lt;overflow-position&gt;? [&lt;self-position&gt;|left|right]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;justify-tracks&quot;</span><span class="s0">: </span><span class="s3">&quot;[normal|&lt;content-distribution&gt;|&lt;overflow-position&gt;? [&lt;content-position&gt;|left|right]]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;left&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;letter-spacing&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;line-break&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|loose|normal|strict|anywhere&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;line-clamp&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;line-height&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;number&gt;|&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;line-height-step&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;list-style&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'list-style-type'&gt;||&lt;'list-style-position'&gt;||&lt;'list-style-image'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;list-style-image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt;|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;list-style-position&quot;</span><span class="s0">: </span><span class="s3">&quot;inside|outside&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;list-style-type&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;counter-style&gt;|&lt;string&gt;|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length&gt;|&lt;percentage&gt;|auto]{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-block&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'margin-left'&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-block-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'margin-left'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-block-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'margin-left'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-bottom&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-inline&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'margin-left'&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-inline-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'margin-left'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-inline-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'margin-left'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-left&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-right&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-top&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;margin-trim&quot;</span><span class="s0">: </span><span class="s3">&quot;none|in-flow|all&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;mask-layer&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-border&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'mask-border-source'&gt;||&lt;'mask-border-slice'&gt; [/ &lt;'mask-border-width'&gt;? [/ &lt;'mask-border-outset'&gt;]?]?||&lt;'mask-border-repeat'&gt;||&lt;'mask-border-mode'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-border-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;luminance|alpha&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-border-outset&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length&gt;|&lt;number&gt;]{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-border-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;[stretch|repeat|round|space]{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-border-slice&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number-percentage&gt;{1,4} fill?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-border-source&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;image&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-border-width&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length-percentage&gt;|&lt;number&gt;|auto]{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-clip&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;geometry-box&gt;|no-clip]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-composite&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;compositing-operator&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-image&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;mask-reference&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;masking-mode&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-origin&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;geometry-box&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-position&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;position&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-repeat&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;repeat-style&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;bg-size&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mask-type&quot;</span><span class="s0">: </span><span class="s3">&quot;luminance|alpha&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;masonry-auto-flow&quot;</span><span class="s0">: </span><span class="s3">&quot;[pack|next]||[definite-first|ordered]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;math-style&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|compact&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;max-block-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'max-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;max-height&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;length-percentage&gt;|min-content|max-content|fit-content( &lt;length-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;max-inline-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'max-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;max-lines&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;max-width&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;length-percentage&gt;|min-content|max-content|fit-content( &lt;length-percentage&gt; )|&lt;-non-standard-width&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;min-block-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'min-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;min-height&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length&gt;|&lt;percentage&gt;|min-content|max-content|fit-content( &lt;length-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;min-inline-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'min-width'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;min-width&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;|min-content|max-content|fit-content( &lt;length-percentage&gt; )|&lt;-non-standard-width&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;mix-blend-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;blend-mode&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;object-fit&quot;</span><span class="s0">: </span><span class="s3">&quot;fill|contain|cover|none|scale-down&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;object-position&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;position&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;offset&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;'offset-position'&gt;? [&lt;'offset-path'&gt; [&lt;'offset-distance'&gt;||&lt;'offset-rotate'&gt;]?]?]! [/ &lt;'offset-anchor'&gt;]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;offset-anchor&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;position&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;offset-distance&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;offset-path&quot;</span><span class="s0">: </span><span class="s3">&quot;none|ray( [&lt;angle&gt;&amp;&amp;&lt;size&gt;&amp;&amp;contain?] )|&lt;path()&gt;|&lt;url&gt;|[&lt;basic-shape&gt;||&lt;geometry-box&gt;]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;offset-position&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;position&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;offset-rotate&quot;</span><span class="s0">: </span><span class="s3">&quot;[auto|reverse]||&lt;angle&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;opacity&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;alpha-value&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;order&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;orphans&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;outline&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;'outline-color'&gt;||&lt;'outline-style'&gt;||&lt;'outline-width'&gt;]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;outline-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;|invert&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;outline-offset&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;outline-style&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;'border-style'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;outline-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;line-width&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow&quot;</span><span class="s0">: </span><span class="s3">&quot;[visible|hidden|clip|scroll|auto]{1,2}|&lt;-non-standard-overflow&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow-anchor&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow-block&quot;</span><span class="s0">: </span><span class="s3">&quot;visible|hidden|clip|scroll|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow-clip-box&quot;</span><span class="s0">: </span><span class="s3">&quot;padding-box|content-box&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow-inline&quot;</span><span class="s0">: </span><span class="s3">&quot;visible|hidden|clip|scroll|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow-wrap&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|break-word|anywhere&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow-x&quot;</span><span class="s0">: </span><span class="s3">&quot;visible|hidden|clip|scroll|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overflow-y&quot;</span><span class="s0">: </span><span class="s3">&quot;visible|hidden|clip|scroll|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overscroll-behavior&quot;</span><span class="s0">: </span><span class="s3">&quot;[contain|none|auto]{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overscroll-behavior-block&quot;</span><span class="s0">: </span><span class="s3">&quot;contain|none|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overscroll-behavior-inline&quot;</span><span class="s0">: </span><span class="s3">&quot;contain|none|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overscroll-behavior-x&quot;</span><span class="s0">: </span><span class="s3">&quot;contain|none|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;overscroll-behavior-y&quot;</span><span class="s0">: </span><span class="s3">&quot;contain|none|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length&gt;|&lt;percentage&gt;]{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-block&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'padding-left'&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-block-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'padding-left'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-block-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'padding-left'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-bottom&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-inline&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'padding-left'&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-inline-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'padding-left'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-inline-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'padding-left'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-left&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-right&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;padding-top&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-break-after&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|always|avoid|left|right|recto|verso&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-break-before&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|always|avoid|left|right|recto|verso&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;page-break-inside&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|avoid&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;paint-order&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|[fill||stroke||markers]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;perspective&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;perspective-origin&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;position&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;place-content&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'align-content'&gt; &lt;'justify-content'&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;place-items&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'align-items'&gt; &lt;'justify-items'&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;place-self&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'align-self'&gt; &lt;'justify-self'&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;pointer-events&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;position&quot;</span><span class="s0">: </span><span class="s3">&quot;static|relative|absolute|sticky|fixed|-webkit-sticky&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;quotes&quot;</span><span class="s0">: </span><span class="s3">&quot;none|auto|[&lt;string&gt; &lt;string&gt;]+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;resize&quot;</span><span class="s0">: </span><span class="s3">&quot;none|both|horizontal|vertical|block|inline&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;right&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rotate&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;angle&gt;|[x|y|z|&lt;number&gt;{3}]&amp;&amp;&lt;angle&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;row-gap&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;ruby-align&quot;</span><span class="s0">: </span><span class="s3">&quot;start|center|space-between|space-around&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;ruby-merge&quot;</span><span class="s0">: </span><span class="s3">&quot;separate|collapse|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;ruby-position&quot;</span><span class="s0">: </span><span class="s3">&quot;over|under|inter-character&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scale&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;number&gt;{1,3}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scrollbar-color&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|dark|light|&lt;color&gt;{2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scrollbar-gutter&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|[stable|always]&amp;&amp;both?&amp;&amp;force?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scrollbar-width&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|thin|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-behavior&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|smooth&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-block&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-block-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-block-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-bottom&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-inline&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-inline-start&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-inline-end&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-left&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-right&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-margin-top&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding&quot;</span><span class="s0">: </span><span class="s3">&quot;[auto|&lt;length-percentage&gt;]{1,4}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-block&quot;</span><span class="s0">: </span><span class="s3">&quot;[auto|&lt;length-percentage&gt;]{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-block-start&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-block-end&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-bottom&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-inline&quot;</span><span class="s0">: </span><span class="s3">&quot;[auto|&lt;length-percentage&gt;]{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-inline-start&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-inline-end&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-left&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-right&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-padding-top&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-align&quot;</span><span class="s0">: </span><span class="s3">&quot;[none|start|end|center]{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-coordinate&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;position&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-destination&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;position&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-points-x&quot;</span><span class="s0">: </span><span class="s3">&quot;none|repeat( &lt;length-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-points-y&quot;</span><span class="s0">: </span><span class="s3">&quot;none|repeat( &lt;length-percentage&gt; )&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-stop&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|always&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-type&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[x|y|block|inline|both] [mandatory|proximity]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-type-x&quot;</span><span class="s0">: </span><span class="s3">&quot;none|mandatory|proximity&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;scroll-snap-type-y&quot;</span><span class="s0">: </span><span class="s3">&quot;none|mandatory|proximity&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shape-image-threshold&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;alpha-value&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shape-margin&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shape-outside&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;shape-box&gt;||&lt;basic-shape&gt;|&lt;image&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;tab-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;|&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;table-layout&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|fixed&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-align&quot;</span><span class="s0">: </span><span class="s3">&quot;start|end|left|right|center|justify|match-parent&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-align-last&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|start|end|left|right|center|justify&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-combine-upright&quot;</span><span class="s0">: </span><span class="s3">&quot;none|all|[digits &lt;integer&gt;?]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-decoration&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'text-decoration-line'&gt;||&lt;'text-decoration-style'&gt;||&lt;'text-decoration-color'&gt;||&lt;'text-decoration-thickness'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-decoration-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-decoration-line&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[underline||overline||line-through||blink]|spelling-error|grammar-error&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-decoration-skip&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-decoration-skip-ink&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|all|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-decoration-style&quot;</span><span class="s0">: </span><span class="s3">&quot;solid|double|dotted|dashed|wavy&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-decoration-thickness&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|from-font|&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-emphasis&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'text-emphasis-style'&gt;||&lt;'text-emphasis-color'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-emphasis-color&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;color&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-emphasis-position&quot;</span><span class="s0">: </span><span class="s3">&quot;[over|under]&amp;&amp;[right|left]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-emphasis-style&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|&lt;string&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-indent&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length-percentage&gt;&amp;&amp;hanging?&amp;&amp;each-line?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-justify&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|inter-character|inter-word|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-orientation&quot;</span><span class="s0">: </span><span class="s3">&quot;mixed|upright|sideways&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-overflow&quot;</span><span class="s0">: </span><span class="s3">&quot;[clip|ellipsis|&lt;string&gt;]{1,2}&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-rendering&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|optimizeSpeed|optimizeLegibility|geometricPrecision&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-shadow&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;shadow-t&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-size-adjust&quot;</span><span class="s0">: </span><span class="s3">&quot;none|auto|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-transform&quot;</span><span class="s0">: </span><span class="s3">&quot;none|capitalize|uppercase|lowercase|full-width|full-size-kana&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-underline-offset&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-underline-position&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|from-font|[under||[left|right]]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;top&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;|&lt;percentage&gt;|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;touch-action&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transform&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;transform-list&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transform-box&quot;</span><span class="s0">: </span><span class="s3">&quot;content-box|border-box|fill-box|stroke-box|view-box&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transform-origin&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;length-percentage&gt;|left|center|right|top|bottom]|[[&lt;length-percentage&gt;|left|center|right]&amp;&amp;[&lt;length-percentage&gt;|top|center|bottom]] &lt;length&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transform-style&quot;</span><span class="s0">: </span><span class="s3">&quot;flat|preserve-3d&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transition&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;single-transition&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transition-delay&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transition-duration&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transition-property&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;single-transition-property&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;transition-timing-function&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;timing-function&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;translate&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;length-percentage&gt; [&lt;length-percentage&gt; &lt;length&gt;?]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;unicode-bidi&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;user-select&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|text|none|contain|all&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;vertical-align&quot;</span><span class="s0">: </span><span class="s3">&quot;baseline|sub|super|text-top|text-bottom|middle|top|bottom|&lt;percentage&gt;|&lt;length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;visibility&quot;</span><span class="s0">: </span><span class="s3">&quot;visible|hidden|collapse&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;white-space&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|pre|nowrap|pre-wrap|pre-line|break-spaces&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;widows&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;width&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length&gt;|&lt;percentage&gt;|min-content|max-content|fit-content( &lt;length-percentage&gt; )|fit-content|-moz-fit-content|-webkit-fit-content&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;will-change&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;animateable-feature&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;word-break&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|break-all|keep-all|break-word&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;word-spacing&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;length-percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;word-wrap&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|break-word&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;writing-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|&lt;svg-writing-mode&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;z-index&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;zoom&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|reset|&lt;number&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-background-clip&quot;</span><span class="s0">: </span><span class="s3">&quot;padding|border&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-border-radius-bottomleft&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-bottom-left-radius'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-border-radius-bottomright&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-bottom-right-radius'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-border-radius-topleft&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-top-left-radius'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-border-radius-topright&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'border-bottom-right-radius'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-control-character-visibility&quot;</span><span class="s0">: </span><span class="s3">&quot;visible|hidden&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-osx-font-smoothing&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|grayscale&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-moz-user-select&quot;</span><span class="s0">: </span><span class="s3">&quot;none|text|all|-moz-none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flex-align&quot;</span><span class="s0">: </span><span class="s3">&quot;start|end|center|baseline|stretch&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flex-item-align&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|start|end|center|baseline|stretch&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flex-line-pack&quot;</span><span class="s0">: </span><span class="s3">&quot;start|end|center|justify|distribute|stretch&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flex-negative&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'flex-shrink'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flex-pack&quot;</span><span class="s0">: </span><span class="s3">&quot;start|end|center|justify|distribute&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flex-order&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flex-positive&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'flex-grow'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-flex-preferred-size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'flex-basis'&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-interpolation-mode&quot;</span><span class="s0">: </span><span class="s3">&quot;nearest-neighbor|bicubic&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-grid-column-align&quot;</span><span class="s0">: </span><span class="s3">&quot;start|end|center|stretch&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-grid-row-align&quot;</span><span class="s0">: </span><span class="s3">&quot;start|end|center|stretch&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-ms-hyphenate-limit-last&quot;</span><span class="s0">: </span><span class="s3">&quot;none|always|column|page|spread&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-background-clip&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;box&gt;|border|padding|content|text]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-column-break-after&quot;</span><span class="s0">: </span><span class="s3">&quot;always|auto|avoid&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-column-break-before&quot;</span><span class="s0">: </span><span class="s3">&quot;always|auto|avoid&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-column-break-inside&quot;</span><span class="s0">: </span><span class="s3">&quot;always|auto|avoid&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-font-smoothing&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none|antialiased|subpixel-antialiased&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-mask-box-image&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;url&gt;|&lt;gradient&gt;|none] [&lt;length-percentage&gt;{4} &lt;-webkit-mask-box-repeat&gt;{2}]?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-print-color-adjust&quot;</span><span class="s0">: </span><span class="s3">&quot;economy|exact&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-text-security&quot;</span><span class="s0">: </span><span class="s3">&quot;none|circle|disc|square&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-user-drag&quot;</span><span class="s0">: </span><span class="s3">&quot;none|element|auto&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;-webkit-user-select&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none|text|all&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;alignment-baseline&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;baseline-shift&quot;</span><span class="s0">: </span><span class="s3">&quot;baseline|sub|super|&lt;svg-length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;behavior&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt;+&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;clip-rule&quot;</span><span class="s0">: </span><span class="s3">&quot;nonzero|evenodd&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;cue&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'cue-before'&gt; &lt;'cue-after'&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;cue-after&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt; &lt;decibel&gt;?|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;cue-before&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;url&gt; &lt;decibel&gt;?|none&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;dominant-baseline&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;fill&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;paint&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;fill-opacity&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number-zero-one&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;fill-rule&quot;</span><span class="s0">: </span><span class="s3">&quot;nonzero|evenodd&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;glyph-orientation-horizontal&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;angle&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;glyph-orientation-vertical&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;angle&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;kerning&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;svg-length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;marker&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;url&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;marker-end&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;url&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;marker-mid&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;url&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;marker-start&quot;</span><span class="s0">: </span><span class="s3">&quot;none|&lt;url&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;pause&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'pause-before'&gt; &lt;'pause-after'&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;pause-after&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;|none|x-weak|weak|medium|strong|x-strong&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;pause-before&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;|none|x-weak|weak|medium|strong|x-strong&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rest&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;'rest-before'&gt; &lt;'rest-after'&gt;?&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rest-after&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;|none|x-weak|weak|medium|strong|x-strong&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;rest-before&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;time&gt;|none|x-weak|weak|medium|strong|x-strong&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;shape-rendering&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|optimizeSpeed|crispEdges|geometricPrecision&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;src&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;url&gt; [format( &lt;string&gt;# )]?|local( &lt;family-name&gt; )]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;speak&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|none|normal&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;speak-as&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|spell-out||digits||[literal-punctuation|no-punctuation]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;stroke&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;paint&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;stroke-dasharray&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[&lt;svg-length&gt;+]#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;stroke-dashoffset&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;svg-length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;stroke-linecap&quot;</span><span class="s0">: </span><span class="s3">&quot;butt|round|square&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;stroke-linejoin&quot;</span><span class="s0">: </span><span class="s3">&quot;miter|round|bevel&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;stroke-miterlimit&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number-one-or-greater&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;stroke-opacity&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number-zero-one&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;stroke-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;svg-length&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;text-anchor&quot;</span><span class="s0">: </span><span class="s3">&quot;start|middle|end&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;unicode-range&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;urange&gt;#&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;voice-balance&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;number&gt;|left|center|right|leftwards|rightwards&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;voice-duration&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;time&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;voice-family&quot;</span><span class="s0">: </span><span class="s3">&quot;[[&lt;family-name&gt;|&lt;generic-voice&gt;] ,]* [&lt;family-name&gt;|&lt;generic-voice&gt;]|preserve&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;voice-pitch&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;frequency&gt;&amp;&amp;absolute|[[x-low|low|medium|high|x-high]||[&lt;frequency&gt;|&lt;semitones&gt;|&lt;percentage&gt;]]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;voice-range&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;frequency&gt;&amp;&amp;absolute|[[x-low|low|medium|high|x-high]||[&lt;frequency&gt;|&lt;semitones&gt;|&lt;percentage&gt;]]&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;voice-rate&quot;</span><span class="s0">: </span><span class="s3">&quot;[normal|x-slow|slow|medium|fast|x-fast]||&lt;percentage&gt;&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;voice-stress&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|strong|moderate|none|reduced&quot;</span><span class="s0">,</span>
            <span class="s3">&quot;voice-volume&quot;</span><span class="s0">: </span><span class="s3">&quot;silent|[[x-soft|soft|medium|loud|x-loud]||&lt;decibel&gt;]&quot;</span>
        <span class="s0">},</span>
        <span class="s3">&quot;atrules&quot;</span><span class="s0">: {</span>
            <span class="s3">&quot;charset&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;string&gt;&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">},</span>
            <span class="s3">&quot;counter-style&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;counter-style-name&gt;&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: {</span>
                    <span class="s3">&quot;additive-symbols&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;integer&gt;&amp;&amp;&lt;symbol&gt;]#&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;fallback&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;counter-style-name&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;negative&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;symbol&gt; &lt;symbol&gt;?&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;pad&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;integer&gt;&amp;&amp;&lt;symbol&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;prefix&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;symbol&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;range&quot;</span><span class="s0">: </span><span class="s3">&quot;[[&lt;integer&gt;|infinite]{2}]#|auto&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;speak-as&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|bullets|numbers|words|spell-out|&lt;counter-style-name&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;suffix&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;symbol&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;symbols&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;symbol&gt;+&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;system&quot;</span><span class="s0">: </span><span class="s3">&quot;cyclic|numeric|alphabetic|symbolic|additive|[fixed &lt;integer&gt;?]|[extends &lt;counter-style-name&gt;]&quot;</span>
                <span class="s0">}</span>
            <span class="s0">},</span>
            <span class="s3">&quot;document&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;url&gt;|url-prefix( &lt;string&gt; )|domain( &lt;string&gt; )|media-document( &lt;string&gt; )|regexp( &lt;string&gt; )]#&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">},</span>
            <span class="s3">&quot;font-face&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: {</span>
                    <span class="s3">&quot;font-display&quot;</span><span class="s0">: </span><span class="s3">&quot;[auto|block|swap|fallback|optional]&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;font-family&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;family-name&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;font-feature-settings&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|&lt;feature-tag-value&gt;#&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;font-variation-settings&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|[&lt;string&gt; &lt;number&gt;]#&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;font-stretch&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;font-stretch-absolute&gt;{1,2}&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;font-style&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|italic|oblique &lt;angle&gt;{0,2}&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;font-weight&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;font-weight-absolute&gt;{1,2}&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;font-variant&quot;</span><span class="s0">: </span><span class="s3">&quot;normal|none|[&lt;common-lig-values&gt;||&lt;discretionary-lig-values&gt;||&lt;historical-lig-values&gt;||&lt;contextual-alt-values&gt;||stylistic( &lt;feature-value-name&gt; )||historical-forms||styleset( &lt;feature-value-name&gt;# )||character-variant( &lt;feature-value-name&gt;# )||swash( &lt;feature-value-name&gt; )||ornaments( &lt;feature-value-name&gt; )||annotation( &lt;feature-value-name&gt; )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||&lt;numeric-figure-values&gt;||&lt;numeric-spacing-values&gt;||&lt;numeric-fraction-values&gt;||ordinal||slashed-zero||&lt;east-asian-variant-values&gt;||&lt;east-asian-width-values&gt;||ruby]&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;src&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;url&gt; [format( &lt;string&gt;# )]?|local( &lt;family-name&gt; )]#&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;unicode-range&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;urange&gt;#&quot;</span>
                <span class="s0">}</span>
            <span class="s0">},</span>
            <span class="s3">&quot;font-feature-values&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;family-name&gt;#&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">},</span>
            <span class="s3">&quot;import&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;[&lt;string&gt;|&lt;url&gt;] [&lt;media-query-list&gt;]?&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">},</span>
            <span class="s3">&quot;keyframes&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;keyframes-name&gt;&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">},</span>
            <span class="s3">&quot;media&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;media-query-list&gt;&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">},</span>
            <span class="s3">&quot;namespace&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;namespace-prefix&gt;? [&lt;string&gt;|&lt;url&gt;]&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">},</span>
            <span class="s3">&quot;page&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;page-selector-list&gt;&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: {</span>
                    <span class="s3">&quot;bleed&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;length&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;marks&quot;</span><span class="s0">: </span><span class="s3">&quot;none|[crop||cross]&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;size&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;length&gt;{1,2}|auto|[&lt;page-size&gt;||[portrait|landscape]]&quot;</span>
                <span class="s0">}</span>
            <span class="s0">},</span>
            <span class="s3">&quot;property&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;custom-property-name&gt;&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: {</span>
                    <span class="s3">&quot;syntax&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;string&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;inherits&quot;</span><span class="s0">: </span><span class="s3">&quot;true|false&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;initial-value&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;string&gt;&quot;</span>
                <span class="s0">}</span>
            <span class="s0">},</span>
            <span class="s3">&quot;supports&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;supports-condition&gt;&quot;</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: </span><span class="s1">null</span>
            <span class="s0">},</span>
            <span class="s3">&quot;viewport&quot;</span><span class="s0">: {</span>
                <span class="s3">&quot;prelude&quot;</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                <span class="s3">&quot;descriptors&quot;</span><span class="s0">: {</span>
                    <span class="s3">&quot;height&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;viewport-length&gt;{1,2}&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;max-height&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;viewport-length&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;max-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;viewport-length&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;max-zoom&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;number&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;min-height&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;viewport-length&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;min-width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;viewport-length&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;min-zoom&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;number&gt;|&lt;percentage&gt;&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;orientation&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|portrait|landscape&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;user-zoom&quot;</span><span class="s0">: </span><span class="s3">&quot;zoom|fixed&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;viewport-fit&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|contain|cover&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;width&quot;</span><span class="s0">: </span><span class="s3">&quot;&lt;viewport-length&gt;{1,2}&quot;</span><span class="s0">,</span>
                    <span class="s3">&quot;zoom&quot;</span><span class="s0">: </span><span class="s3">&quot;auto|&lt;number&gt;|&lt;percentage&gt;&quot;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">cmpChar$3 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">cmpChar</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">isDigit$4 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$9 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">WHITESPACE$4 </span><span class="s0">= </span><span class="s2">TYPE$9</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$4 </span><span class="s0">= </span><span class="s2">TYPE$9</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">IDENT$3 </span><span class="s0">= </span><span class="s2">TYPE$9</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBER$3 </span><span class="s0">= </span><span class="s2">TYPE$9</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DIMENSION$2 </span><span class="s0">= </span><span class="s2">TYPE$9</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN$3 </span><span class="s0">= </span><span class="s5">0x002B</span><span class="s0">;    </span><span class="s4">// U+002B PLUS SIGN (+)</span>
    <span class="s1">var </span><span class="s2">HYPHENMINUS$3 </span><span class="s0">= </span><span class="s5">0x002D</span><span class="s0">; </span><span class="s4">// U+002D HYPHEN-MINUS (-)</span>
    <span class="s1">var </span><span class="s2">N$4 </span><span class="s0">= </span><span class="s5">0x006E</span><span class="s0">;           </span><span class="s4">// U+006E LATIN SMALL LETTER N (n)</span>
    <span class="s1">var </span><span class="s2">DISALLOW_SIGN$1 </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">ALLOW_SIGN$1 </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">checkInteger$1</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">, </span><span class="s2">disallowSign</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">pos </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s2">offset</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s2">PLUSSIGN$3 </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">HYPHENMINUS$3</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">disallowSign</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Number sign is not allowed'</span><span class="s0">);</span>
            <span class="s0">}</span>
            <span class="s2">pos</span><span class="s0">++;</span>
        <span class="s0">}</span>

        <span class="s1">for </span><span class="s0">(; </span><span class="s2">pos </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">; </span><span class="s2">pos</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDigit$4</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">))) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Integer is expected'</span><span class="s0">, </span><span class="s2">pos</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">checkTokenIsInteger</span><span class="s0">(</span><span class="s2">disallowSign</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">checkInteger$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">disallowSign</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">expectCharCode</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">, </span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(!</span><span class="s2">cmpChar$3</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">code</span><span class="s0">)) {</span>
            <span class="s1">var </span><span class="s2">msg </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s2">N$4</span><span class="s0">:</span>
                    <span class="s2">msg </span><span class="s0">= </span><span class="s3">'N is expected'</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>
                <span class="s1">case </span><span class="s2">HYPHENMINUS$3</span><span class="s0">:</span>
                    <span class="s2">msg </span><span class="s0">= </span><span class="s3">'HyphenMinus is expected'</span><span class="s0">;</span>
                    <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s2">msg</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s2">offset</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s4">// ... &lt;signed-integer&gt;</span>
    <span class="s4">// ... ['+' | '-'] &lt;signless-integer&gt;</span>
    <span class="s1">function </span><span class="s2">consumeB$1</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">offset </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">sign </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">type </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">WHITESPACE$4 </span><span class="s0">|| </span><span class="s2">type </span><span class="s0">=== </span><span class="s2">COMMENT$4</span><span class="s0">) {</span>
            <span class="s2">type </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">NUMBER$3</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">PLUSSIGN$3</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) ||</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">HYPHENMINUS$3</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">)) {</span>
                <span class="s2">sign </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">PLUSSIGN$3</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) ? </span><span class="s2">PLUSSIGN$3 </span><span class="s0">: </span><span class="s2">HYPHENMINUS$3</span><span class="s0">;</span>

                <span class="s1">do </span><span class="s0">{</span>
                    <span class="s2">type </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(++</span><span class="s2">offset</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">while </span><span class="s0">(</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">WHITESPACE$4 </span><span class="s0">|| </span><span class="s2">type </span><span class="s0">=== </span><span class="s2">COMMENT$4</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">NUMBER$3</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skip</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>
                    <span class="s2">checkTokenIsInteger</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN$1</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">return null</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">offset </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skip</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">sign </span><span class="s0">=== </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s2">type </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">type </span><span class="s0">!== </span><span class="s2">PLUSSIGN$3 </span><span class="s0">&amp;&amp; </span><span class="s2">type </span><span class="s0">!== </span><span class="s2">HYPHENMINUS$3</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Number sign is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s2">checkTokenIsInteger</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">sign </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">);</span>
        <span class="s1">return </span><span class="s2">sign </span><span class="s0">=== </span><span class="s2">HYPHENMINUS$3 </span><span class="s0">? </span><span class="s3">'-' </span><span class="s0">+ </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">NUMBER$3</span><span class="s0">) : </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">NUMBER$3</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s4">// An+B microsyntax https://www.w3.org/TR/css-syntax-3/#anb</span>
    <span class="s1">var </span><span class="s2">AnPlusB </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'AnPlusB'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">a</span><span class="s0">: [</span><span class="s2">String</span><span class="s0">, </span><span class="s1">null</span><span class="s0">],</span>
            <span class="s2">b</span><span class="s0">: [</span><span class="s2">String</span><span class="s0">, </span><span class="s1">null</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s4">/* eslint-disable brace-style*/</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">a </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">b </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s4">// &lt;integer&gt;</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">NUMBER$3</span><span class="s0">) {</span>
                <span class="s2">checkTokenIsInteger</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">ALLOW_SIGN$1</span><span class="s0">);</span>
                <span class="s2">b </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">NUMBER$3</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s4">// -n</span>
            <span class="s4">// -n &lt;signed-integer&gt;</span>
            <span class="s4">// -n ['+' | '-'] &lt;signless-integer&gt;</span>
            <span class="s4">// -n- &lt;signless-integer&gt;</span>
            <span class="s4">// &lt;dashndashdigit-ident&gt;</span>
            <span class="s1">else if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">IDENT$3 </span><span class="s0">&amp;&amp; </span><span class="s2">cmpChar$3</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s2">HYPHENMINUS$3</span><span class="s0">)) {</span>
                <span class="s2">a </span><span class="s0">= </span><span class="s3">'-1'</span><span class="s0">;</span>

                <span class="s2">expectCharCode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s2">N$4</span><span class="s0">);</span>

                <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">getTokenLength</span><span class="s0">()) {</span>
                    <span class="s4">// -n</span>
                    <span class="s4">// -n &lt;signed-integer&gt;</span>
                    <span class="s4">// -n ['+' | '-'] &lt;signless-integer&gt;</span>
                    <span class="s1">case </span><span class="s5">2</span><span class="s0">:</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s2">b </span><span class="s0">= </span><span class="s2">consumeB$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s4">// -n- &lt;signless-integer&gt;</span>
                    <span class="s1">case </span><span class="s5">3</span><span class="s0">:</span>
                        <span class="s2">expectCharCode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s2">HYPHENMINUS$3</span><span class="s0">);</span>

                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

                        <span class="s2">checkTokenIsInteger</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN$1</span><span class="s0">);</span>

                        <span class="s2">b </span><span class="s0">= </span><span class="s3">'-' </span><span class="s0">+ </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">NUMBER$3</span><span class="s0">);</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s4">// &lt;dashndashdigit-ident&gt;</span>
                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s2">expectCharCode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s2">HYPHENMINUS$3</span><span class="s0">);</span>
                        <span class="s2">checkInteger$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN$1</span><span class="s0">);</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

                        <span class="s2">b </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s4">// '+'? n</span>
            <span class="s4">// '+'? n &lt;signed-integer&gt;</span>
            <span class="s4">// '+'? n ['+' | '-'] &lt;signless-integer&gt;</span>
            <span class="s4">// '+'? n- &lt;signless-integer&gt;</span>
            <span class="s4">// '+'? &lt;ndashdigit-ident&gt;</span>
            <span class="s1">else if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">IDENT$3 </span><span class="s0">|| (</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">PLUSSIGN$3</span><span class="s0">) &amp;&amp; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(</span><span class="s5">1</span><span class="s0">) === </span><span class="s2">IDENT$3</span><span class="s0">)) {</span>
                <span class="s1">var </span><span class="s2">sign </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>
                <span class="s2">a </span><span class="s0">= </span><span class="s3">'1'</span><span class="s0">;</span>

                <span class="s4">// just ignore a plus</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">PLUSSIGN$3</span><span class="s0">)) {</span>
                    <span class="s2">sign </span><span class="s0">= </span><span class="s5">1</span><span class="s0">;</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                <span class="s0">}</span>

                <span class="s2">expectCharCode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s2">N$4</span><span class="s0">);</span>

                <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">getTokenLength</span><span class="s0">()) {</span>
                    <span class="s4">// '+'? n</span>
                    <span class="s4">// '+'? n &lt;signed-integer&gt;</span>
                    <span class="s4">// '+'? n ['+' | '-'] &lt;signless-integer&gt;</span>
                    <span class="s1">case </span><span class="s5">1</span><span class="s0">:</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s2">b </span><span class="s0">= </span><span class="s2">consumeB$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s4">// '+'? n- &lt;signless-integer&gt;</span>
                    <span class="s1">case </span><span class="s5">2</span><span class="s0">:</span>
                        <span class="s2">expectCharCode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s2">HYPHENMINUS$3</span><span class="s0">);</span>

                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

                        <span class="s2">checkTokenIsInteger</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN$1</span><span class="s0">);</span>

                        <span class="s2">b </span><span class="s0">= </span><span class="s3">'-' </span><span class="s0">+ </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">NUMBER$3</span><span class="s0">);</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s4">// '+'? &lt;ndashdigit-ident&gt;</span>
                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s2">expectCharCode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s2">HYPHENMINUS$3</span><span class="s0">);</span>
                        <span class="s2">checkInteger$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN$1</span><span class="s0">);</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

                        <span class="s2">b </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s2">sign </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s4">// &lt;ndashdigit-dimension&gt;</span>
            <span class="s4">// &lt;ndash-dimension&gt; &lt;signless-integer&gt;</span>
            <span class="s4">// &lt;n-dimension&gt;</span>
            <span class="s4">// &lt;n-dimension&gt; &lt;signed-integer&gt;</span>
            <span class="s4">// &lt;n-dimension&gt; ['+' | '-'] &lt;signless-integer&gt;</span>
            <span class="s1">else if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">DIMENSION$2</span><span class="s0">) {</span>
                <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">);</span>
                <span class="s1">var </span><span class="s2">sign </span><span class="s0">= </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">PLUSSIGN$3 </span><span class="s0">|| </span><span class="s2">code </span><span class="s0">=== </span><span class="s2">HYPHENMINUS$3</span><span class="s0">;</span>

                <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s2">sign</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
                    <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDigit$4</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">))) {</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">=== </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s2">sign</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Integer is expected'</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s2">sign</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s2">expectCharCode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">i </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s2">N$4</span><span class="s0">);</span>
                <span class="s2">a </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">i</span><span class="s0">);</span>

                <span class="s4">// &lt;n-dimension&gt;</span>
                <span class="s4">// &lt;n-dimension&gt; &lt;signed-integer&gt;</span>
                <span class="s4">// &lt;n-dimension&gt; ['+' | '-'] &lt;signless-integer&gt;</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">+ </span><span class="s5">1 </span><span class="s0">=== </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s2">b </span><span class="s0">= </span><span class="s2">consumeB$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">expectCharCode</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">i </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">, </span><span class="s2">HYPHENMINUS$3</span><span class="s0">);</span>

                    <span class="s4">// &lt;ndash-dimension&gt; &lt;signless-integer&gt;</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">i </span><span class="s0">+ </span><span class="s5">2 </span><span class="s0">=== </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">) {</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                        <span class="s2">checkTokenIsInteger</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN$1</span><span class="s0">);</span>
                        <span class="s2">b </span><span class="s0">= </span><span class="s3">'-' </span><span class="s0">+ </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">NUMBER$3</span><span class="s0">);</span>
                    <span class="s0">}</span>
                    <span class="s4">// &lt;ndashdigit-dimension&gt;</span>
                    <span class="s1">else </span><span class="s0">{</span>
                        <span class="s2">checkInteger$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">i </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">, </span><span class="s2">DISALLOW_SIGN$1</span><span class="s0">);</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s2">b </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">i </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">a </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">a</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s2">PLUSSIGN$3</span><span class="s0">) {</span>
                <span class="s2">a </span><span class="s0">= </span><span class="s2">a</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s5">1</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">b </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">b</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s2">PLUSSIGN$3</span><span class="s0">) {</span>
                <span class="s2">b </span><span class="s0">= </span><span class="s2">b</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s5">1</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'AnPlusB'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">a</span><span class="s0">: </span><span class="s2">a</span><span class="s0">,</span>
                <span class="s2">b</span><span class="s0">: </span><span class="s2">b</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">a </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">a </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">a </span><span class="s0">!== </span><span class="s2">undefined</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">b </span><span class="s0">= </span><span class="s2">node</span><span class="s0">.</span><span class="s2">b </span><span class="s0">!== </span><span class="s1">null </span><span class="s0">&amp;&amp; </span><span class="s2">node</span><span class="s0">.</span><span class="s2">b </span><span class="s0">!== </span><span class="s2">undefined</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">a</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span>
                    <span class="s2">node</span><span class="s0">.</span><span class="s2">a </span><span class="s0">=== </span><span class="s3">'+1' </span><span class="s0">? </span><span class="s3">'+n' </span><span class="s0">: </span><span class="s4">// eslint-disable-line operator-linebreak, indent</span>
                    <span class="s2">node</span><span class="s0">.</span><span class="s2">a </span><span class="s0">===  </span><span class="s3">'1' </span><span class="s0">?  </span><span class="s3">'n' </span><span class="s0">: </span><span class="s4">// eslint-disable-line operator-linebreak, indent</span>
                    <span class="s2">node</span><span class="s0">.</span><span class="s2">a </span><span class="s0">=== </span><span class="s3">'-1' </span><span class="s0">? </span><span class="s3">'-n' </span><span class="s0">: </span><span class="s4">// eslint-disable-line operator-linebreak, indent</span>
                    <span class="s2">node</span><span class="s0">.</span><span class="s2">a </span><span class="s0">+ </span><span class="s3">'n'             </span><span class="s4">// eslint-disable-line operator-linebreak, indent</span>
                <span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">b</span><span class="s0">) {</span>
                    <span class="s2">b </span><span class="s0">= </span><span class="s2">String</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">b</span><span class="s0">);</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">b</span><span class="s0">.</span><span class="s2">charAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s3">'-' </span><span class="s0">|| </span><span class="s2">b</span><span class="s0">.</span><span class="s2">charAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s3">'+'</span><span class="s0">) {</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">b</span><span class="s0">.</span><span class="s2">charAt</span><span class="s0">(</span><span class="s5">0</span><span class="s0">));</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">b</span><span class="s0">.</span><span class="s2">substr</span><span class="s0">(</span><span class="s5">1</span><span class="s0">));</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'+'</span><span class="s0">);</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">b</span><span class="s0">);</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">String</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">b</span><span class="s0">));</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$a </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">WhiteSpace </span><span class="s0">= </span><span class="s2">TYPE$a</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">Semicolon </span><span class="s0">= </span><span class="s2">TYPE$a</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LeftCurlyBracket </span><span class="s0">= </span><span class="s2">TYPE$a</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">Delim </span><span class="s0">= </span><span class="s2">TYPE$a</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">EXCLAMATIONMARK$1 </span><span class="s0">= </span><span class="s5">0x0021</span><span class="s0">; </span><span class="s4">// U+0021 EXCLAMATION MARK (!)</span>

    <span class="s1">function </span><span class="s2">getOffsetExcludeWS</span><span class="s0">() {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(-</span><span class="s5">1</span><span class="s0">) === </span><span class="s2">WhiteSpace</span><span class="s0">) {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">&gt; </span><span class="s5">1</span>
                    <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">getTokenStart</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex </span><span class="s0">- </span><span class="s5">1</span><span class="s0">)</span>
                    <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">firstCharOffset</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// 0, 0, false</span>
    <span class="s1">function </span><span class="s2">balanceEnd</span><span class="s0">() {</span>
        <span class="s1">return </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// LEFTCURLYBRACKET, 0, false</span>
    <span class="s1">function </span><span class="s2">leftCurlyBracket</span><span class="s0">(</span><span class="s2">tokenType</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">LeftCurlyBracket </span><span class="s0">? </span><span class="s5">1 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// LEFTCURLYBRACKET, SEMICOLON, false</span>
    <span class="s1">function </span><span class="s2">leftCurlyBracketOrSemicolon</span><span class="s0">(</span><span class="s2">tokenType</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">LeftCurlyBracket </span><span class="s0">|| </span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">Semicolon </span><span class="s0">? </span><span class="s5">1 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// EXCLAMATIONMARK, SEMICOLON, false</span>
    <span class="s1">function </span><span class="s2">exclamationMarkOrSemicolon</span><span class="s0">(</span><span class="s2">tokenType</span><span class="s0">, </span><span class="s2">source</span><span class="s0">, </span><span class="s2">offset</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">Delim </span><span class="s0">&amp;&amp; </span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s2">EXCLAMATIONMARK$1</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s5">1</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">Semicolon </span><span class="s0">? </span><span class="s5">1 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// 0, SEMICOLON, true</span>
    <span class="s1">function </span><span class="s2">semicolonIncluded</span><span class="s0">(</span><span class="s2">tokenType</span><span class="s0">) {</span>
        <span class="s1">return </span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">Semicolon </span><span class="s0">? </span><span class="s5">2 </span><span class="s0">: </span><span class="s5">0</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">Raw </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Raw'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">mode</span><span class="s0">, </span><span class="s2">excludeWhiteSpace</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">startOffset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">getTokenStart</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">endOffset</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skip</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">getRawLength</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">mode </span><span class="s0">|| </span><span class="s2">balanceEnd</span><span class="s0">)</span>
            <span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">excludeWhiteSpace </span><span class="s0">&amp;&amp; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">&gt; </span><span class="s2">startOffset</span><span class="s0">) {</span>
                <span class="s2">endOffset </span><span class="s0">= </span><span class="s2">getOffsetExcludeWS</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">endOffset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Raw'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">startOffset</span><span class="s0">, </span><span class="s2">endOffset</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">startOffset</span><span class="s0">, </span><span class="s2">endOffset</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">},</span>

        <span class="s2">mode</span><span class="s0">: {</span>
            <span class="s1">default</span><span class="s0">: </span><span class="s2">balanceEnd</span><span class="s0">,</span>
            <span class="s2">leftCurlyBracket</span><span class="s0">: </span><span class="s2">leftCurlyBracket</span><span class="s0">,</span>
            <span class="s2">leftCurlyBracketOrSemicolon</span><span class="s0">: </span><span class="s2">leftCurlyBracketOrSemicolon</span><span class="s0">,</span>
            <span class="s2">exclamationMarkOrSemicolon</span><span class="s0">: </span><span class="s2">exclamationMarkOrSemicolon</span><span class="s0">,</span>
            <span class="s2">semicolonIncluded</span><span class="s0">: </span><span class="s2">semicolonIncluded</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$b </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">rawMode </span><span class="s0">= </span><span class="s2">Raw</span><span class="s0">.</span><span class="s2">mode</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">ATKEYWORD </span><span class="s0">= </span><span class="s2">TYPE$b</span><span class="s0">.</span><span class="s2">AtKeyword</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SEMICOLON </span><span class="s0">= </span><span class="s2">TYPE$b</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTCURLYBRACKET$1 </span><span class="s0">= </span><span class="s2">TYPE$b</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTCURLYBRACKET$1 </span><span class="s0">= </span><span class="s2">TYPE$b</span><span class="s0">.</span><span class="s2">RightCurlyBracket</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">consumeRaw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">rawMode</span><span class="s0">.</span><span class="s2">leftCurlyBracketOrSemicolon</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">isDeclarationBlockAtrule</span><span class="s0">() {</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">offset </span><span class="s0">= </span><span class="s5">1</span><span class="s0">, </span><span class="s2">type</span><span class="s0">; </span><span class="s2">type </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">); </span><span class="s2">offset</span><span class="s0">++) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">RIGHTCURLYBRACKET$1</span><span class="s0">) {</span>
                <span class="s1">return true</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">type </span><span class="s0">=== </span><span class="s2">LEFTCURLYBRACKET$1 </span><span class="s0">||</span>
                <span class="s2">type </span><span class="s0">=== </span><span class="s2">ATKEYWORD</span><span class="s0">) {</span>
                <span class="s1">return false</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return false</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">Atrule </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Atrule'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">prelude</span><span class="s0">: [</span><span class="s3">'AtrulePrelude'</span><span class="s0">, </span><span class="s3">'Raw'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">],</span>
            <span class="s2">block</span><span class="s0">: [</span><span class="s3">'Block'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">name</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">nameLowerCase</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">prelude </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">block </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">ATKEYWORD</span><span class="s0">);</span>

            <span class="s2">name </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
            <span class="s2">nameLowerCase </span><span class="s0">= </span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s4">// parse prelude</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof </span><span class="s0">=== </span><span class="s1">false </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">LEFTCURLYBRACKET$1 </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">SEMICOLON</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseAtrulePrelude</span><span class="s0">) {</span>
                    <span class="s2">prelude </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">AtrulePrelude</span><span class="s0">.</span><span class="s2">bind</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">name</span><span class="s0">), </span><span class="s2">consumeRaw</span><span class="s0">);</span>

                    <span class="s4">// turn empty AtrulePrelude into null</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">prelude</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'AtrulePrelude' </span><span class="s0">&amp;&amp; </span><span class="s2">prelude</span><span class="s0">.</span><span class="s2">children</span><span class="s0">.</span><span class="s2">head </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                        <span class="s2">prelude </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">prelude </span><span class="s0">= </span><span class="s2">consumeRaw</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s2">SEMICOLON</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">LEFTCURLYBRACKET$1</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">nameLowerCase</span><span class="s0">) &amp;&amp;</span>
                        <span class="s1">typeof this</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">[</span><span class="s2">nameLowerCase</span><span class="s0">].</span><span class="s2">block </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
                        <span class="s2">block </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">[</span><span class="s2">nameLowerCase</span><span class="s0">].</span><span class="s2">block</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                    <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                        <span class="s4">// TODO: should consume block content as Raw?</span>
                        <span class="s2">block </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Block</span><span class="s0">(</span><span class="s2">isDeclarationBlockAtrule</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">));</span>
                    <span class="s0">}</span>

                    <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Atrule'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
                <span class="s2">prelude</span><span class="s0">: </span><span class="s2">prelude</span><span class="s0">,</span>
                <span class="s2">block</span><span class="s0">: </span><span class="s2">block</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'@'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">prelude </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">' '</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">prelude</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">block</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">block</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">';'</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'atrule'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$c </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">SEMICOLON$1 </span><span class="s0">= </span><span class="s2">TYPE$c</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTCURLYBRACKET$2 </span><span class="s0">= </span><span class="s2">TYPE$c</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">AtrulePrelude </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'AtrulePrelude'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">name </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">name </span><span class="s0">= </span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">name</span><span class="s0">) &amp;&amp;</span>
                <span class="s1">typeof this</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">[</span><span class="s2">name</span><span class="s0">].</span><span class="s2">prelude </span><span class="s0">=== </span><span class="s3">'function'</span><span class="s0">) {</span>
                <span class="s4">// custom consumer</span>
                <span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">[</span><span class="s2">name</span><span class="s0">].</span><span class="s2">prelude</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s4">// default consumer</span>
                <span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">readSequence</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">.</span><span class="s2">AtrulePrelude</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof </span><span class="s0">!== </span><span class="s1">true </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">LEFTCURLYBRACKET$2 </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">SEMICOLON$1</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Semicolon or block is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">children </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'AtrulePrelude'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocationFromList</span><span class="s0">(</span><span class="s2">children</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'atrulePrelude'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$d </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$4 </span><span class="s0">= </span><span class="s2">TYPE$d</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">STRING </span><span class="s0">= </span><span class="s2">TYPE$d</span><span class="s0">.</span><span class="s2">String</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COLON </span><span class="s0">= </span><span class="s2">TYPE$d</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTSQUAREBRACKET$1 </span><span class="s0">= </span><span class="s2">TYPE$d</span><span class="s0">.</span><span class="s2">LeftSquareBracket</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTSQUAREBRACKET$1 </span><span class="s0">= </span><span class="s2">TYPE$d</span><span class="s0">.</span><span class="s2">RightSquareBracket</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DOLLARSIGN </span><span class="s0">= </span><span class="s5">0x0024</span><span class="s0">;       </span><span class="s4">// U+0024 DOLLAR SIGN ($)</span>
    <span class="s1">var </span><span class="s2">ASTERISK$1 </span><span class="s0">= </span><span class="s5">0x002A</span><span class="s0">;         </span><span class="s4">// U+002A ASTERISK (*)</span>
    <span class="s1">var </span><span class="s2">EQUALSSIGN </span><span class="s0">= </span><span class="s5">0x003D</span><span class="s0">;       </span><span class="s4">// U+003D EQUALS SIGN (=)</span>
    <span class="s1">var </span><span class="s2">CIRCUMFLEXACCENT </span><span class="s0">= </span><span class="s5">0x005E</span><span class="s0">; </span><span class="s4">// U+005E (^)</span>
    <span class="s1">var </span><span class="s2">VERTICALLINE$1 </span><span class="s0">= </span><span class="s5">0x007C</span><span class="s0">;     </span><span class="s4">// U+007C VERTICAL LINE (|)</span>
    <span class="s1">var </span><span class="s2">TILDE </span><span class="s0">= </span><span class="s5">0x007E</span><span class="s0">;            </span><span class="s4">// U+007E TILDE (~)</span>

    <span class="s1">function </span><span class="s2">getAttributeName</span><span class="s0">() {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Unexpected end of input'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">expectIdent </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">checkColon </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">ASTERISK$1</span><span class="s0">)) {</span>
            <span class="s2">expectIdent </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
            <span class="s2">checkColon </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">VERTICALLINE$1</span><span class="s0">)) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">IDENT$4</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">VERTICALLINE$1</span><span class="s0">)) {</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">) !== </span><span class="s2">EQUALSSIGN</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">IDENT$4</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">expectIdent</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Identifier is expected'</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">} </span><span class="s1">else if </span><span class="s0">(</span><span class="s2">expectIdent</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Vertical line is expected'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">checkColon </span><span class="s0">&amp;&amp; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">COLON</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">IDENT$4</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s0">{</span>
            <span class="s2">type</span><span class="s0">: </span><span class="s3">'Identifier'</span><span class="s0">,</span>
            <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start</span><span class="s0">)</span>
        <span class="s0">};</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">getOperator</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">start</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">!== </span><span class="s2">EQUALSSIGN </span><span class="s0">&amp;&amp;        </span><span class="s4">// =</span>
            <span class="s2">code </span><span class="s0">!== </span><span class="s2">TILDE </span><span class="s0">&amp;&amp;             </span><span class="s4">// ~=</span>
            <span class="s2">code </span><span class="s0">!== </span><span class="s2">CIRCUMFLEXACCENT </span><span class="s0">&amp;&amp;  </span><span class="s4">// ^=</span>
            <span class="s2">code </span><span class="s0">!== </span><span class="s2">DOLLARSIGN </span><span class="s0">&amp;&amp;        </span><span class="s4">// $=</span>
            <span class="s2">code </span><span class="s0">!== </span><span class="s2">ASTERISK$1 </span><span class="s0">&amp;&amp;          </span><span class="s4">// *=</span>
            <span class="s2">code </span><span class="s0">!== </span><span class="s2">VERTICALLINE$1         </span><span class="s4">// |=</span>
        <span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Attribute selector (=, ~=, ^=, $=, *=, |=) is expected'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">!== </span><span class="s2">EQUALSSIGN</span><span class="s0">) {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">EQUALSSIGN</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Equal sign is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
        <span class="s0">}</span>

        <span class="s1">return this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s4">// '[' &lt;wq-name&gt; ']'</span>
    <span class="s4">// '[' &lt;wq-name&gt; &lt;attr-matcher&gt; [ &lt;string-token&gt; | &lt;ident-token&gt; ] &lt;attr-modifier&gt;? ']'</span>
    <span class="s1">var </span><span class="s2">AttributeSelector </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'AttributeSelector'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s3">'Identifier'</span><span class="s0">,</span>
            <span class="s2">matcher</span><span class="s0">: [</span><span class="s2">String</span><span class="s0">, </span><span class="s1">null</span><span class="s0">],</span>
            <span class="s2">value</span><span class="s0">: [</span><span class="s3">'String'</span><span class="s0">, </span><span class="s3">'Identifier'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">],</span>
            <span class="s2">flags</span><span class="s0">: [</span><span class="s2">String</span><span class="s0">, </span><span class="s1">null</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">name</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">matcher </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">value </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">flags </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LEFTSQUAREBRACKET$1</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s2">name </span><span class="s0">= </span><span class="s2">getAttributeName</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">RIGHTSQUAREBRACKET$1</span><span class="s0">) {</span>
                <span class="s4">// avoid case `[name i]`</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">IDENT$4</span><span class="s0">) {</span>
                    <span class="s2">matcher </span><span class="s0">= </span><span class="s2">getOperator</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

                    <span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">STRING</span>
                        <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">String</span><span class="s0">()</span>
                        <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">();</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                <span class="s0">}</span>

                <span class="s4">// attribute flags</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">IDENT$4</span><span class="s0">) {</span>
                    <span class="s2">flags </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">getTokenValue</span><span class="s0">();</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTSQUAREBRACKET$1</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'AttributeSelector'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
                <span class="s2">matcher</span><span class="s0">: </span><span class="s2">matcher</span><span class="s0">,</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s2">value</span><span class="s0">,</span>
                <span class="s2">flags</span><span class="s0">: </span><span class="s2">flags</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">flagsPrefix </span><span class="s0">= </span><span class="s3">' '</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'['</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">matcher </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">matcher</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>

                    <span class="s4">// space between string and flags is not required</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'String'</span><span class="s0">) {</span>
                        <span class="s2">flagsPrefix </span><span class="s0">= </span><span class="s3">''</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">flags </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">flagsPrefix</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">flags</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">']'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$e </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">rawMode$1 </span><span class="s0">= </span><span class="s2">Raw</span><span class="s0">.</span><span class="s2">mode</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">WHITESPACE$5 </span><span class="s0">= </span><span class="s2">TYPE$e</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$5 </span><span class="s0">= </span><span class="s2">TYPE$e</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SEMICOLON$2 </span><span class="s0">= </span><span class="s2">TYPE$e</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">ATKEYWORD$1 </span><span class="s0">= </span><span class="s2">TYPE$e</span><span class="s0">.</span><span class="s2">AtKeyword</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTCURLYBRACKET$3 </span><span class="s0">= </span><span class="s2">TYPE$e</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTCURLYBRACKET$2 </span><span class="s0">= </span><span class="s2">TYPE$e</span><span class="s0">.</span><span class="s2">RightCurlyBracket</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">consumeRaw$1</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
    <span class="s0">}</span>
    <span class="s1">function </span><span class="s2">consumeRule</span><span class="s0">() {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Rule</span><span class="s0">, </span><span class="s2">consumeRaw$1</span><span class="s0">);</span>
    <span class="s0">}</span>
    <span class="s1">function </span><span class="s2">consumeRawDeclaration</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">rawMode$1</span><span class="s0">.</span><span class="s2">semicolonIncluded</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
    <span class="s0">}</span>
    <span class="s1">function </span><span class="s2">consumeDeclaration</span><span class="s0">() {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">SEMICOLON$2</span><span class="s0">) {</span>
            <span class="s1">return </span><span class="s2">consumeRawDeclaration</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">var </span><span class="s2">node </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Declaration</span><span class="s0">, </span><span class="s2">consumeRawDeclaration</span><span class="s0">);</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">SEMICOLON$2</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">node</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">Block </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Block'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[</span>
                <span class="s3">'Atrule'</span><span class="s0">,</span>
                <span class="s3">'Rule'</span><span class="s0">,</span>
                <span class="s3">'Declaration'</span>
            <span class="s0">]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">isDeclaration</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">consumer </span><span class="s0">= </span><span class="s2">isDeclaration </span><span class="s0">? </span><span class="s2">consumeDeclaration </span><span class="s0">: </span><span class="s2">consumeRule</span><span class="s0">;</span>

            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LEFTCURLYBRACKET$3</span><span class="s0">);</span>

            <span class="s2">scan</span><span class="s0">:</span>
            <span class="s1">while </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                    <span class="s1">case </span><span class="s2">RIGHTCURLYBRACKET$2</span><span class="s0">:</span>
                        <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">WHITESPACE$5</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">COMMENT$5</span><span class="s0">:</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">ATKEYWORD$1</span><span class="s0">:</span>
                        <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Atrule</span><span class="s0">, </span><span class="s2">consumeRaw$1</span><span class="s0">));</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">consumer</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">));</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTCURLYBRACKET$2</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Block'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'{'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">prev</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">prev</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Declaration'</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">';'</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">});</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'}'</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'block'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$f </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">LEFTSQUAREBRACKET$2 </span><span class="s0">= </span><span class="s2">TYPE$f</span><span class="s0">.</span><span class="s2">LeftSquareBracket</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTSQUAREBRACKET$2 </span><span class="s0">= </span><span class="s2">TYPE$f</span><span class="s0">.</span><span class="s2">RightSquareBracket</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">Brackets </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Brackets'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">readSequence</span><span class="s0">, </span><span class="s2">recognizer</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LEFTSQUAREBRACKET$2</span><span class="s0">);</span>

            <span class="s2">children </span><span class="s0">= </span><span class="s2">readSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">recognizer</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTSQUAREBRACKET$2</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Brackets'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'['</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">']'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">CDC </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">.</span><span class="s2">CDC</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">CDC_1 </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'CDC'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: [],</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">CDC</span><span class="s0">); </span><span class="s4">// --&gt;</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'CDC'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'--&gt;'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">CDO </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">.</span><span class="s2">CDO</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">CDO_1 </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'CDO'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: [],</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">CDO</span><span class="s0">); </span><span class="s4">// &lt;!--</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'CDO'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'&lt;!--'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$g </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$5 </span><span class="s0">= </span><span class="s2">TYPE$g</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">FULLSTOP </span><span class="s0">= </span><span class="s5">0x002E</span><span class="s0">; </span><span class="s4">// U+002E FULL STOP (.)</span>

    <span class="s4">// '.' ident</span>
    <span class="s1">var </span><span class="s2">ClassSelector </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'ClassSelector'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">FULLSTOP</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Full stop is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'ClassSelector'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">- </span><span class="s5">1</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">IDENT$5</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'.'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$h </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$6 </span><span class="s0">= </span><span class="s2">TYPE$h</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN$4 </span><span class="s0">= </span><span class="s5">0x002B</span><span class="s0">;        </span><span class="s4">// U+002B PLUS SIGN (+)</span>
    <span class="s1">var </span><span class="s2">SOLIDUS </span><span class="s0">= </span><span class="s5">0x002F</span><span class="s0">;         </span><span class="s4">// U+002F SOLIDUS (/)</span>
    <span class="s1">var </span><span class="s2">GREATERTHANSIGN$1 </span><span class="s0">= </span><span class="s5">0x003E</span><span class="s0">; </span><span class="s4">// U+003E GREATER-THAN SIGN (&gt;)</span>
    <span class="s1">var </span><span class="s2">TILDE$1 </span><span class="s0">= </span><span class="s5">0x007E</span><span class="s0">;           </span><span class="s4">// U+007E TILDE (~)</span>

    <span class="s4">// + | &gt; | ~ | /deep/</span>
    <span class="s1">var </span><span class="s2">Combinator </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Combinator'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">);</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s2">GREATERTHANSIGN$1</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">PLUSSIGN$4</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">TILDE$1</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">SOLIDUS</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

                    <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">IDENT$6 </span><span class="s0">|| </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupValue</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s3">'deep'</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Identifier `deep` is expected'</span><span class="s0">);</span>
                    <span class="s0">}</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

                    <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">SOLIDUS</span><span class="s0">)) {</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Solidus is expected'</span><span class="s0">);</span>
                    <span class="s0">}</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Combinator is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Combinator'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$i </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">COMMENT$6 </span><span class="s0">= </span><span class="s2">TYPE$i</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">ASTERISK$2 </span><span class="s0">= </span><span class="s5">0x002A</span><span class="s0">;        </span><span class="s4">// U+002A ASTERISK (*)</span>
    <span class="s1">var </span><span class="s2">SOLIDUS$1 </span><span class="s0">= </span><span class="s5">0x002F</span><span class="s0">;         </span><span class="s4">// U+002F SOLIDUS (/)</span>

    <span class="s4">// '/*' .* '*/'</span>
    <span class="s1">var </span><span class="s2">Comment </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Comment'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">end </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">COMMENT$6</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">((</span><span class="s2">end </span><span class="s0">- </span><span class="s2">start </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">) &gt;= </span><span class="s5">2 </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">end </span><span class="s0">- </span><span class="s5">2</span><span class="s0">) === </span><span class="s2">ASTERISK$2 </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">end </span><span class="s0">- </span><span class="s5">1</span><span class="s0">) === </span><span class="s2">SOLIDUS$1</span><span class="s0">) {</span>
                <span class="s2">end </span><span class="s0">-= </span><span class="s5">2</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Comment'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">, </span><span class="s2">end</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'/*'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'*/'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">isCustomProperty$1 </span><span class="s0">= </span><span class="s2">names</span><span class="s0">.</span><span class="s2">isCustomProperty</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$j </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">rawMode$2 </span><span class="s0">= </span><span class="s2">Raw</span><span class="s0">.</span><span class="s2">mode</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$7 </span><span class="s0">= </span><span class="s2">TYPE$j</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">HASH$1 </span><span class="s0">= </span><span class="s2">TYPE$j</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COLON$1 </span><span class="s0">= </span><span class="s2">TYPE$j</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SEMICOLON$3 </span><span class="s0">= </span><span class="s2">TYPE$j</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DELIM$2 </span><span class="s0">= </span><span class="s2">TYPE$j</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">WHITESPACE$6 </span><span class="s0">= </span><span class="s2">TYPE$j</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">EXCLAMATIONMARK$2 </span><span class="s0">= </span><span class="s5">0x0021</span><span class="s0">; </span><span class="s4">// U+0021 EXCLAMATION MARK (!)</span>
    <span class="s1">var </span><span class="s2">NUMBERSIGN$2 </span><span class="s0">= </span><span class="s5">0x0023</span><span class="s0">;      </span><span class="s4">// U+0023 NUMBER SIGN (#)</span>
    <span class="s1">var </span><span class="s2">DOLLARSIGN$1 </span><span class="s0">= </span><span class="s5">0x0024</span><span class="s0">;      </span><span class="s4">// U+0024 DOLLAR SIGN ($)</span>
    <span class="s1">var </span><span class="s2">AMPERSAND$1 </span><span class="s0">= </span><span class="s5">0x0026</span><span class="s0">;       </span><span class="s4">// U+0026 ANPERSAND (&amp;)</span>
    <span class="s1">var </span><span class="s2">ASTERISK$3 </span><span class="s0">= </span><span class="s5">0x002A</span><span class="s0">;        </span><span class="s4">// U+002A ASTERISK (*)</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN$5 </span><span class="s0">= </span><span class="s5">0x002B</span><span class="s0">;        </span><span class="s4">// U+002B PLUS SIGN (+)</span>
    <span class="s1">var </span><span class="s2">SOLIDUS$2 </span><span class="s0">= </span><span class="s5">0x002F</span><span class="s0">;         </span><span class="s4">// U+002F SOLIDUS (/)</span>

    <span class="s1">function </span><span class="s2">consumeValueRaw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">rawMode$2</span><span class="s0">.</span><span class="s2">exclamationMarkOrSemicolon</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">consumeCustomPropertyRaw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">rawMode$2</span><span class="s0">.</span><span class="s2">exclamationMarkOrSemicolon</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">consumeValue</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">startValueToken </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Value</span><span class="s0">();</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">value</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s3">'Raw' </span><span class="s0">&amp;&amp;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof </span><span class="s0">=== </span><span class="s1">false </span><span class="s0">&amp;&amp;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">SEMICOLON$3 </span><span class="s0">&amp;&amp;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">EXCLAMATIONMARK$2</span><span class="s0">) === </span><span class="s1">false </span><span class="s0">&amp;&amp;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isBalanceEdge</span><span class="s0">(</span><span class="s2">startValueToken</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">();</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">value</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">Declaration </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Declaration'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">important</span><span class="s0">: [</span><span class="s2">Boolean</span><span class="s0">, </span><span class="s2">String</span><span class="s0">],</span>
            <span class="s2">property</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">value</span><span class="s0">: [</span><span class="s3">'Value'</span><span class="s0">, </span><span class="s3">'Raw'</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">startToken </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">property </span><span class="s0">= </span><span class="s2">readProperty$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">customProperty </span><span class="s0">= </span><span class="s2">isCustomProperty$1</span><span class="s0">(</span><span class="s2">property</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">parseValue </span><span class="s0">= </span><span class="s2">customProperty </span><span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseCustomProperty </span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseValue</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">consumeRaw </span><span class="s0">= </span><span class="s2">customProperty </span><span class="s0">? </span><span class="s2">consumeCustomPropertyRaw </span><span class="s0">: </span><span class="s2">consumeValueRaw</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">important </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">value</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">COLON$1</span><span class="s0">);</span>

            <span class="s1">const </span><span class="s2">valueStart </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">customProperty</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">parseValue</span><span class="s0">) {</span>
                <span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s2">consumeValue</span><span class="s0">, </span><span class="s2">consumeRaw</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">value </span><span class="s0">= </span><span class="s2">consumeRaw</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">customProperty </span><span class="s0">&amp;&amp; </span><span class="s2">value</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Value' </span><span class="s0">&amp;&amp; </span><span class="s2">value</span><span class="s0">.</span><span class="s2">children</span><span class="s0">.</span><span class="s2">isEmpty</span><span class="s0">()) {</span>
                <span class="s1">for </span><span class="s0">(</span><span class="s1">let </span><span class="s2">offset </span><span class="s0">= </span><span class="s2">valueStart </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">; </span><span class="s2">offset </span><span class="s0">&lt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s2">WHITESPACE$6</span><span class="s0">) {</span>
                        <span class="s2">value</span><span class="s0">.</span><span class="s2">children</span><span class="s0">.</span><span class="s2">appendData</span><span class="s0">({</span>
                            <span class="s2">type</span><span class="s0">: </span><span class="s3">'WhiteSpace'</span><span class="s0">,</span>
                            <span class="s2">loc</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                            <span class="s2">value</span><span class="s0">: </span><span class="s3">' '</span>
                        <span class="s0">});</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">EXCLAMATIONMARK$2</span><span class="s0">)) {</span>
                <span class="s2">important </span><span class="s0">= </span><span class="s2">getImportant</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s4">// Do not include semicolon to range per spec</span>
            <span class="s4">// https://drafts.csswg.org/css-syntax/#declaration-diagram</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof </span><span class="s0">=== </span><span class="s1">false </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">SEMICOLON$3 </span><span class="s0">&amp;&amp;</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isBalanceEdge</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Declaration'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">important</span><span class="s0">: </span><span class="s2">important</span><span class="s0">,</span>
                <span class="s2">property</span><span class="s0">: </span><span class="s2">property</span><span class="s0">,</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s2">value</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">property</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">':'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">important</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">important </span><span class="s0">=== </span><span class="s1">true </span><span class="s0">? </span><span class="s3">'!important' </span><span class="s0">: </span><span class="s3">'!' </span><span class="s0">+ </span><span class="s2">node</span><span class="s0">.</span><span class="s2">important</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'declaration'</span>
    <span class="s0">};</span>

    <span class="s1">function </span><span class="s2">readProperty$1</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>

        <span class="s4">// hacks</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">DELIM$2</span><span class="s0">) {</span>
            <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">)) {</span>
                <span class="s1">case </span><span class="s2">ASTERISK$3</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">DOLLARSIGN$1</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">PLUSSIGN$5</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">NUMBERSIGN$2</span><span class="s0">:</span>
                <span class="s1">case </span><span class="s2">AMPERSAND$1</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s4">// TODO: not sure we should support this hack</span>
                <span class="s1">case </span><span class="s2">SOLIDUS$2</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">SOLIDUS$2</span><span class="s0">)) {</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s0">}</span>
                    <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">HASH$1</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">HASH$1</span><span class="s0">);</span>
        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">IDENT$7</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s4">// ! ws* important</span>
    <span class="s1">function </span><span class="s2">getImportant</span><span class="s0">() {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">DELIM$2</span><span class="s0">);</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

        <span class="s1">var </span><span class="s2">important </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">IDENT$7</span><span class="s0">);</span>

        <span class="s4">// store original value in case it differ from `important`</span>
        <span class="s4">// for better original source restoring and hacks like `!ie` support</span>
        <span class="s1">return </span><span class="s2">important </span><span class="s0">=== </span><span class="s3">'important' </span><span class="s0">? </span><span class="s1">true </span><span class="s0">: </span><span class="s2">important</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">TYPE$k </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">rawMode$3 </span><span class="s0">= </span><span class="s2">Raw</span><span class="s0">.</span><span class="s2">mode</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">WHITESPACE$7 </span><span class="s0">= </span><span class="s2">TYPE$k</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$7 </span><span class="s0">= </span><span class="s2">TYPE$k</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SEMICOLON$4 </span><span class="s0">= </span><span class="s2">TYPE$k</span><span class="s0">.</span><span class="s2">Semicolon</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">consumeRaw$2</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">rawMode$3</span><span class="s0">.</span><span class="s2">semicolonIncluded</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">DeclarationList </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'DeclarationList'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[</span>
                <span class="s3">'Declaration'</span>
            <span class="s0">]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>

            
            <span class="s1">while </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                    <span class="s1">case </span><span class="s2">WHITESPACE$7</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">COMMENT$7</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">SEMICOLON$4</span><span class="s0">:</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Declaration</span><span class="s0">, </span><span class="s2">consumeRaw$2</span><span class="s0">));</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'DeclarationList'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocationFromList</span><span class="s0">(</span><span class="s2">children</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s1">function</span><span class="s0">(</span><span class="s2">prev</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">prev</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Declaration'</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">';'</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">});</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">consumeNumber$3 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">consumeNumber</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$l </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">DIMENSION$3 </span><span class="s0">= </span><span class="s2">TYPE$l</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">Dimension </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Dimension'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">unit</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">numberEnd </span><span class="s0">= </span><span class="s2">consumeNumber$3</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s2">start</span><span class="s0">);</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">DIMENSION$3</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Dimension'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">numberEnd</span><span class="s0">),</span>
                <span class="s2">unit</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">numberEnd</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">unit</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$m </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">RIGHTPARENTHESIS$2 </span><span class="s0">= </span><span class="s2">TYPE$m</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">;</span>

    <span class="s4">// &lt;function-token&gt; &lt;sequence&gt; )</span>
    <span class="s1">var </span><span class="s2">_Function </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Function'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">children</span><span class="s0">: [[]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">readSequence</span><span class="s0">, </span><span class="s2">recognizer</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">name </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consumeFunctionName</span><span class="s0">();</span>
            <span class="s1">var </span><span class="s2">nameLowerCase </span><span class="s0">= </span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>
            <span class="s1">var </span><span class="s2">children</span><span class="s0">;</span>

            <span class="s2">children </span><span class="s0">= </span><span class="s2">recognizer</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">nameLowerCase</span><span class="s0">)</span>
                <span class="s0">? </span><span class="s2">recognizer</span><span class="s0">[</span><span class="s2">nameLowerCase</span><span class="s0">].</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">recognizer</span><span class="s0">)</span>
                <span class="s0">: </span><span class="s2">readSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">recognizer</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTPARENTHESIS$2</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Function'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'('</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">')'</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'function'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$n </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">HASH$2 </span><span class="s0">= </span><span class="s2">TYPE$n</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">;</span>

    <span class="s4">// '#' ident</span>
    <span class="s1">var </span><span class="s2">Hash </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Hash'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">HASH$2</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Hash'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'#'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$o </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$8 </span><span class="s0">= </span><span class="s2">TYPE$o</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">Identifier </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Identifier'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Identifier'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">IDENT$8</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$p </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">HASH$3 </span><span class="s0">= </span><span class="s2">TYPE$p</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">;</span>

    <span class="s4">// &lt;hash-token&gt;</span>
    <span class="s1">var </span><span class="s2">IdSelector </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'IdSelector'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>

            <span class="s4">// TODO: check value is an ident</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">HASH$3</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'IdSelector'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'#'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$q </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$9 </span><span class="s0">= </span><span class="s2">TYPE$q</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBER$4 </span><span class="s0">= </span><span class="s2">TYPE$q</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DIMENSION$4 </span><span class="s0">= </span><span class="s2">TYPE$q</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTPARENTHESIS$2 </span><span class="s0">= </span><span class="s2">TYPE$q</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTPARENTHESIS$3 </span><span class="s0">= </span><span class="s2">TYPE$q</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COLON$2 </span><span class="s0">= </span><span class="s2">TYPE$q</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DELIM$3 </span><span class="s0">= </span><span class="s2">TYPE$q</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">MediaFeature </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'MediaFeature'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">value</span><span class="s0">: [</span><span class="s3">'Identifier'</span><span class="s0">, </span><span class="s3">'Number'</span><span class="s0">, </span><span class="s3">'Dimension'</span><span class="s0">, </span><span class="s3">'Ratio'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">name</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">value </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LEFTPARENTHESIS$2</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s2">name </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">IDENT$9</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">RIGHTPARENTHESIS$3</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">COLON$2</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

                <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                    <span class="s1">case </span><span class="s2">NUMBER$4</span><span class="s0">:</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">lookupNonWSType</span><span class="s0">(</span><span class="s5">1</span><span class="s0">) === </span><span class="s2">DELIM$3</span><span class="s0">) {</span>
                            <span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Ratio</span><span class="s0">();</span>
                        <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                            <span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">();</span>
                        <span class="s0">}</span>

                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">DIMENSION$4</span><span class="s0">:</span>
                        <span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">();</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">IDENT$9</span><span class="s0">:</span>
                        <span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">();</span>

                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Number, dimension, ratio or identifier is expected'</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTPARENTHESIS$3</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'MediaFeature'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s2">value</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'('</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">':'</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
            <span class="s0">}</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">')'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$r </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">WHITESPACE$8 </span><span class="s0">= </span><span class="s2">TYPE$r</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$8 </span><span class="s0">= </span><span class="s2">TYPE$r</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">IDENT$a </span><span class="s0">= </span><span class="s2">TYPE$r</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTPARENTHESIS$3 </span><span class="s0">= </span><span class="s2">TYPE$r</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">MediaQuery </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'MediaQuery'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[</span>
                <span class="s3">'Identifier'</span><span class="s0">,</span>
                <span class="s3">'MediaFeature'</span><span class="s0">,</span>
                <span class="s3">'WhiteSpace'</span>
            <span class="s0">]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>
            <span class="s1">var </span><span class="s2">child </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">space </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s2">scan</span><span class="s0">:</span>
            <span class="s1">while </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                    <span class="s1">case </span><span class="s2">COMMENT$8</span><span class="s0">:</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s1">continue</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">WHITESPACE$8</span><span class="s0">:</span>
                        <span class="s2">space </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">();</span>
                        <span class="s1">continue</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">IDENT$a</span><span class="s0">:</span>
                        <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">();</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">LEFTPARENTHESIS$3</span><span class="s0">:</span>
                        <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">MediaFeature</span><span class="s0">();</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">space </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                    <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">space</span><span class="s0">);</span>
                    <span class="s2">space </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">child</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">child </span><span class="s0">=== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Identifier or parenthesis is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'MediaQuery'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocationFromList</span><span class="s0">(</span><span class="s2">children</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">COMMA$1 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">.</span><span class="s2">Comma</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">MediaQueryList </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'MediaQueryList'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[</span>
                <span class="s3">'MediaQuery'</span>
            <span class="s0">]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">relative</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s1">while </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">MediaQuery</span><span class="s0">(</span><span class="s2">relative</span><span class="s0">));</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">COMMA$1</span><span class="s0">) {</span>
                    <span class="s1">break</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'MediaQueryList'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocationFromList</span><span class="s0">(</span><span class="s2">children</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">','</span><span class="s0">);</span>
            <span class="s0">});</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">Nth </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Nth'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">nth</span><span class="s0">: [</span><span class="s3">'AnPlusB'</span><span class="s0">, </span><span class="s3">'Identifier'</span><span class="s0">],</span>
            <span class="s2">selector</span><span class="s0">: [</span><span class="s3">'SelectorList'</span><span class="s0">, </span><span class="s1">null</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">allowOfClause</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">end </span><span class="s0">= </span><span class="s2">start</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">selector </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">query</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupValue</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s3">'odd'</span><span class="s0">) || </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupValue</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s3">'even'</span><span class="s0">)) {</span>
                <span class="s2">query </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">();</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">query </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">AnPlusB</span><span class="s0">();</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">allowOfClause </span><span class="s0">&amp;&amp; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupValue</span><span class="s0">(</span><span class="s5">0</span><span class="s0">, </span><span class="s3">'of'</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

                <span class="s2">selector </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">SelectorList</span><span class="s0">();</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">needPositions</span><span class="s0">) {</span>
                    <span class="s2">end </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLastListNode</span><span class="s0">(</span><span class="s2">selector</span><span class="s0">.</span><span class="s2">children</span><span class="s0">).</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">end</span><span class="s0">.</span><span class="s2">offset</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">needPositions</span><span class="s0">) {</span>
                    <span class="s2">end </span><span class="s0">= </span><span class="s2">query</span><span class="s0">.</span><span class="s2">loc</span><span class="s0">.</span><span class="s2">end</span><span class="s0">.</span><span class="s2">offset</span><span class="s0">;</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Nth'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">end</span><span class="s0">),</span>
                <span class="s2">nth</span><span class="s0">: </span><span class="s2">query</span><span class="s0">,</span>
                <span class="s2">selector</span><span class="s0">: </span><span class="s2">selector</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">nth</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">selector </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">' of '</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">selector</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">NUMBER$5 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">_Number </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Number'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Number'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">NUMBER$5</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s4">// '/' | '*' | ',' | ':' | '+' | '-'</span>
    <span class="s1">var </span><span class="s2">Operator </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Operator'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Operator'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$s </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">LEFTPARENTHESIS$4 </span><span class="s0">= </span><span class="s2">TYPE$s</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTPARENTHESIS$4 </span><span class="s0">= </span><span class="s2">TYPE$s</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">Parentheses </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Parentheses'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">readSequence</span><span class="s0">, </span><span class="s2">recognizer</span><span class="s0">) {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">LEFTPARENTHESIS$4</span><span class="s0">);</span>

            <span class="s2">children </span><span class="s0">= </span><span class="s2">readSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">recognizer</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTPARENTHESIS$4</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Parentheses'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'('</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">')'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">consumeNumber$4 </span><span class="s0">= </span><span class="s2">utils</span><span class="s0">.</span><span class="s2">consumeNumber</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$t </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">PERCENTAGE$1 </span><span class="s0">= </span><span class="s2">TYPE$t</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">Percentage </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Percentage'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">numberEnd </span><span class="s0">= </span><span class="s2">consumeNumber$4</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s2">start</span><span class="s0">);</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">PERCENTAGE$1</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Percentage'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s2">numberEnd</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'%'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$u </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$b </span><span class="s0">= </span><span class="s2">TYPE$u</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">FUNCTION$1 </span><span class="s0">= </span><span class="s2">TYPE$u</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COLON$3 </span><span class="s0">= </span><span class="s2">TYPE$u</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTPARENTHESIS$5 </span><span class="s0">= </span><span class="s2">TYPE$u</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">;</span>

    <span class="s4">// : [ &lt;ident&gt; | &lt;function-token&gt; &lt;any-value&gt;? ) ]</span>
    <span class="s1">var </span><span class="s2">PseudoClassSelector </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'PseudoClassSelector'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">children</span><span class="s0">: [[</span><span class="s3">'Raw'</span><span class="s0">], </span><span class="s1">null</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">name</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">nameLowerCase</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">COLON$3</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">FUNCTION$1</span><span class="s0">) {</span>
                <span class="s2">name </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consumeFunctionName</span><span class="s0">();</span>
                <span class="s2">nameLowerCase </span><span class="s0">= </span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">pseudo</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">nameLowerCase</span><span class="s0">)) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                    <span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">pseudo</span><span class="s0">[</span><span class="s2">nameLowerCase</span><span class="s0">].</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>
                    <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s1">false</span><span class="s0">)</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTPARENTHESIS$5</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">name </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">IDENT$b</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'PseudoClassSelector'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">':'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">children </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'('</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">')'</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'function'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$v </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$c </span><span class="s0">= </span><span class="s2">TYPE$v</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">FUNCTION$2 </span><span class="s0">= </span><span class="s2">TYPE$v</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COLON$4 </span><span class="s0">= </span><span class="s2">TYPE$v</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTPARENTHESIS$6 </span><span class="s0">= </span><span class="s2">TYPE$v</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">;</span>

    <span class="s4">// :: [ &lt;ident&gt; | &lt;function-token&gt; &lt;any-value&gt;? ) ]</span>
    <span class="s1">var </span><span class="s2">PseudoElementSelector </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'PseudoElementSelector'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">children</span><span class="s0">: [[</span><span class="s3">'Raw'</span><span class="s0">], </span><span class="s1">null</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">name</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">nameLowerCase</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">COLON$4</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">COLON$4</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">FUNCTION$2</span><span class="s0">) {</span>
                <span class="s2">name </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consumeFunctionName</span><span class="s0">();</span>
                <span class="s2">nameLowerCase </span><span class="s0">= </span><span class="s2">name</span><span class="s0">.</span><span class="s2">toLowerCase</span><span class="s0">();</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">pseudo</span><span class="s0">.</span><span class="s2">hasOwnProperty</span><span class="s0">(</span><span class="s2">nameLowerCase</span><span class="s0">)) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                    <span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">pseudo</span><span class="s0">[</span><span class="s2">nameLowerCase</span><span class="s0">].</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>
                    <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s1">false</span><span class="s0">)</span>
                    <span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTPARENTHESIS$6</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">name </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">IDENT$c</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'PseudoElementSelector'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s2">name</span><span class="s0">,</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'::'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">children </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'('</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">')'</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'function'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">isDigit$5 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$w </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">NUMBER$6 </span><span class="s0">= </span><span class="s2">TYPE$w</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DELIM$4 </span><span class="s0">= </span><span class="s2">TYPE$w</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SOLIDUS$3 </span><span class="s0">= </span><span class="s5">0x002F</span><span class="s0">;  </span><span class="s4">// U+002F SOLIDUS (/)</span>
    <span class="s1">var </span><span class="s2">FULLSTOP$1 </span><span class="s0">= </span><span class="s5">0x002E</span><span class="s0">; </span><span class="s4">// U+002E FULL STOP (.)</span>

    <span class="s4">// Terms of &lt;ratio&gt; should be a positive numbers (not zero or negative)</span>
    <span class="s4">// (see https://drafts.csswg.org/mediaqueries-3/#values)</span>
    <span class="s4">// However, -o-min-device-pixel-ratio takes fractional values as a ratio's term</span>
    <span class="s4">// and this is using by various sites. Therefore we relax checking on parse</span>
    <span class="s4">// to test a term is unsigned number without an exponent part.</span>
    <span class="s4">// Additional checking may be applied on lexer validation.</span>
    <span class="s1">function </span><span class="s2">consumeNumber$5</span><span class="s0">() {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipWS</span><span class="s0">();</span>

        <span class="s1">var </span><span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">NUMBER$6</span><span class="s0">);</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s2">value</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">i</span><span class="s0">);</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isDigit$5</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) &amp;&amp; </span><span class="s2">code </span><span class="s0">!== </span><span class="s2">FULLSTOP$1</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Unsigned number is expected'</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">- </span><span class="s2">value</span><span class="s0">.</span><span class="s2">length </span><span class="s0">+ </span><span class="s2">i</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">Number</span><span class="s0">(</span><span class="s2">value</span><span class="s0">) === </span><span class="s5">0</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Zero number is not allowed'</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">- </span><span class="s2">value</span><span class="s0">.</span><span class="s2">length</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">value</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s4">// &lt;positive-integer&gt; S* '/' S* &lt;positive-integer&gt;</span>
    <span class="s1">var </span><span class="s2">Ratio </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Ratio'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">left</span><span class="s0">: </span><span class="s2">String</span><span class="s0">,</span>
            <span class="s2">right</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">left </span><span class="s0">= </span><span class="s2">consumeNumber$5</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
            <span class="s1">var </span><span class="s2">right</span><span class="s0">;</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipWS</span><span class="s0">();</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">SOLIDUS$3</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Solidus is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">DELIM$4</span><span class="s0">);</span>
            <span class="s2">right </span><span class="s0">= </span><span class="s2">consumeNumber$5</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Ratio'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">left</span><span class="s0">: </span><span class="s2">left</span><span class="s0">,</span>
                <span class="s2">right</span><span class="s0">: </span><span class="s2">right</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">left</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'/'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">right</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$x </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">rawMode$4 </span><span class="s0">= </span><span class="s2">Raw</span><span class="s0">.</span><span class="s2">mode</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">LEFTCURLYBRACKET$4 </span><span class="s0">= </span><span class="s2">TYPE$x</span><span class="s0">.</span><span class="s2">LeftCurlyBracket</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">consumeRaw$3</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s2">rawMode$4</span><span class="s0">.</span><span class="s2">leftCurlyBracket</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">consumePrelude</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">prelude </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">SelectorList</span><span class="s0">();</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s2">prelude</span><span class="s0">.</span><span class="s2">type </span><span class="s0">!== </span><span class="s3">'Raw' </span><span class="s0">&amp;&amp;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof </span><span class="s0">=== </span><span class="s1">false </span><span class="s0">&amp;&amp;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">LEFTCURLYBRACKET$4</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">();</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">prelude</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">Rule </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Rule'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">prelude</span><span class="s0">: [</span><span class="s3">'SelectorList'</span><span class="s0">, </span><span class="s3">'Raw'</span><span class="s0">],</span>
            <span class="s2">block</span><span class="s0">: [</span><span class="s3">'Block'</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">startToken </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">startOffset </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">prelude</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">block</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseRulePrelude</span><span class="s0">) {</span>
                <span class="s2">prelude </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s2">consumePrelude</span><span class="s0">, </span><span class="s2">consumeRaw$3</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">prelude </span><span class="s0">= </span><span class="s2">consumeRaw$3</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">startToken</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s2">block </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Block</span><span class="s0">(</span><span class="s1">true</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Rule'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">startOffset</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">prelude</span><span class="s0">: </span><span class="s2">prelude</span><span class="s0">,</span>
                <span class="s2">block</span><span class="s0">: </span><span class="s2">block</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">prelude</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">block</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'rule'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">Selector </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Selector'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[</span>
                <span class="s3">'TypeSelector'</span><span class="s0">,</span>
                <span class="s3">'IdSelector'</span><span class="s0">,</span>
                <span class="s3">'ClassSelector'</span><span class="s0">,</span>
                <span class="s3">'AttributeSelector'</span><span class="s0">,</span>
                <span class="s3">'PseudoClassSelector'</span><span class="s0">,</span>
                <span class="s3">'PseudoElementSelector'</span><span class="s0">,</span>
                <span class="s3">'Combinator'</span><span class="s0">,</span>
                <span class="s3">'WhiteSpace'</span>
            <span class="s0">]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">readSequence</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">.</span><span class="s2">Selector</span><span class="s0">);</span>

            <span class="s4">// nothing were consumed</span>
            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">getFirstListNode</span><span class="s0">(</span><span class="s2">children</span><span class="s0">) === </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Selector is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Selector'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocationFromList</span><span class="s0">(</span><span class="s2">children</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$y </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">COMMA$2 </span><span class="s0">= </span><span class="s2">TYPE$y</span><span class="s0">.</span><span class="s2">Comma</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">SelectorList </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'SelectorList'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[</span>
                <span class="s3">'Selector'</span><span class="s0">,</span>
                <span class="s3">'Raw'</span>
            <span class="s0">]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>

            <span class="s1">while </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Selector</span><span class="s0">());</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">COMMA$2</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s1">continue</span><span class="s0">;</span>
                <span class="s0">}</span>

                <span class="s1">break</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'SelectorList'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocationFromList</span><span class="s0">(</span><span class="s2">children</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">, </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">','</span><span class="s0">);</span>
            <span class="s0">});</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'selector'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">STRING$1 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">.</span><span class="s2">String</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">_String </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'String'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'String'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">consume</span><span class="s0">(</span><span class="s2">STRING$1</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$z </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">WHITESPACE$9 </span><span class="s0">= </span><span class="s2">TYPE$z</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$9 </span><span class="s0">= </span><span class="s2">TYPE$z</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">ATKEYWORD$2 </span><span class="s0">= </span><span class="s2">TYPE$z</span><span class="s0">.</span><span class="s2">AtKeyword</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">CDO$1 </span><span class="s0">= </span><span class="s2">TYPE$z</span><span class="s0">.</span><span class="s2">CDO</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">CDC$1 </span><span class="s0">= </span><span class="s2">TYPE$z</span><span class="s0">.</span><span class="s2">CDC</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">EXCLAMATIONMARK$3 </span><span class="s0">= </span><span class="s5">0x0021</span><span class="s0">; </span><span class="s4">// U+0021 EXCLAMATION MARK (!)</span>

    <span class="s1">function </span><span class="s2">consumeRaw$4</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">) {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s2">startToken</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">StyleSheet </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'StyleSheet'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[</span>
                <span class="s3">'Comment'</span><span class="s0">,</span>
                <span class="s3">'CDO'</span><span class="s0">,</span>
                <span class="s3">'CDC'</span><span class="s0">,</span>
                <span class="s3">'Atrule'</span><span class="s0">,</span>
                <span class="s3">'Rule'</span><span class="s0">,</span>
                <span class="s3">'Raw'</span>
            <span class="s0">]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>
            <span class="s1">var </span><span class="s2">child</span><span class="s0">;</span>

            
            <span class="s1">while </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
                <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                    <span class="s1">case </span><span class="s2">WHITESPACE$9</span><span class="s0">:</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                        <span class="s1">continue</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">COMMENT$9</span><span class="s0">:</span>
                        <span class="s4">// ignore comments except exclamation comments (i.e. /*! .. */) on top level</span>
                        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s5">2</span><span class="s0">) !== </span><span class="s2">EXCLAMATIONMARK$3</span><span class="s0">) {</span>
                            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                            <span class="s1">continue</span><span class="s0">;</span>
                        <span class="s0">}</span>

                        <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">();</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">CDO$1</span><span class="s0">: </span><span class="s4">// &lt;!--</span>
                        <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">CDO</span><span class="s0">();</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">CDC$1</span><span class="s0">: </span><span class="s4">// --&gt;</span>
                        <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">CDC</span><span class="s0">();</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s4">// CSS Syntax Module Level 3</span>
                    <span class="s4">// §2.2 Error handling</span>
                    <span class="s4">// At the &quot;top level&quot; of a stylesheet, an &lt;at-keyword-token&gt; starts an at-rule.</span>
                    <span class="s1">case </span><span class="s2">ATKEYWORD$2</span><span class="s0">:</span>
                        <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Atrule</span><span class="s0">, </span><span class="s2">consumeRaw$4</span><span class="s0">);</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s4">// Anything else starts a qualified rule ...</span>
                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseWithFallback</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Rule</span><span class="s0">, </span><span class="s2">consumeRaw$4</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">child</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'StyleSheet'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
        <span class="s0">},</span>
        <span class="s2">walkContext</span><span class="s0">: </span><span class="s3">'stylesheet'</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$A </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$d </span><span class="s0">= </span><span class="s2">TYPE$A</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">ASTERISK$4 </span><span class="s0">= </span><span class="s5">0x002A</span><span class="s0">;     </span><span class="s4">// U+002A ASTERISK (*)</span>
    <span class="s1">var </span><span class="s2">VERTICALLINE$2 </span><span class="s0">= </span><span class="s5">0x007C</span><span class="s0">; </span><span class="s4">// U+007C VERTICAL LINE (|)</span>

    <span class="s1">function </span><span class="s2">eatIdentifierOrAsterisk</span><span class="s0">() {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">!== </span><span class="s2">IDENT$d </span><span class="s0">&amp;&amp;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">ASTERISK$4</span><span class="s0">) === </span><span class="s1">false</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Identifier or asterisk is expected'</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
    <span class="s0">}</span>

    <span class="s4">// ident</span>
    <span class="s4">// ident|ident</span>
    <span class="s4">// ident|*</span>
    <span class="s4">// *</span>
    <span class="s4">// *|ident</span>
    <span class="s4">// *|*</span>
    <span class="s4">// |ident</span>
    <span class="s4">// |*</span>
    <span class="s1">var </span><span class="s2">TypeSelector </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'TypeSelector'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">name</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">VERTICALLINE$2</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                <span class="s2">eatIdentifierOrAsterisk</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
            <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                <span class="s2">eatIdentifierOrAsterisk</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">VERTICALLINE$2</span><span class="s0">)) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s2">eatIdentifierOrAsterisk</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'TypeSelector'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">name</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">name</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">isHexDigit$4 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isHexDigit</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">cmpChar$4 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">cmpChar</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$B </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NAME$3 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">NAME</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$e </span><span class="s0">= </span><span class="s2">TYPE$B</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBER$7 </span><span class="s0">= </span><span class="s2">TYPE$B</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DIMENSION$5 </span><span class="s0">= </span><span class="s2">TYPE$B</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN$6 </span><span class="s0">= </span><span class="s5">0x002B</span><span class="s0">;     </span><span class="s4">// U+002B PLUS SIGN (+)</span>
    <span class="s1">var </span><span class="s2">HYPHENMINUS$4 </span><span class="s0">= </span><span class="s5">0x002D</span><span class="s0">;  </span><span class="s4">// U+002D HYPHEN-MINUS (-)</span>
    <span class="s1">var </span><span class="s2">QUESTIONMARK$2 </span><span class="s0">= </span><span class="s5">0x003F</span><span class="s0">; </span><span class="s4">// U+003F QUESTION MARK (?)</span>
    <span class="s1">var </span><span class="s2">U$1 </span><span class="s0">= </span><span class="s5">0x0075</span><span class="s0">;            </span><span class="s4">// U+0075 LATIN SMALL LETTER U (u)</span>

    <span class="s1">function </span><span class="s2">eatHexSequence</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">, </span><span class="s2">allowDash</span><span class="s0">) {</span>
        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">pos </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s2">offset</span><span class="s0">, </span><span class="s2">len </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">pos </span><span class="s0">&lt; </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">; </span><span class="s2">pos</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">pos</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s2">HYPHENMINUS$4 </span><span class="s0">&amp;&amp; </span><span class="s2">allowDash </span><span class="s0">&amp;&amp; </span><span class="s2">len </span><span class="s0">!== </span><span class="s5">0</span><span class="s0">) {</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">eatHexSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">offset </span><span class="s0">+ </span><span class="s2">len </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">, </span><span class="s1">false</span><span class="s0">) === </span><span class="s5">0</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">();</span>
                <span class="s0">}</span>

                <span class="s1">return </span><span class="s0">-</span><span class="s5">1</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">isHexDigit$4</span><span class="s0">(</span><span class="s2">code</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span>
                    <span class="s2">allowDash </span><span class="s0">&amp;&amp; </span><span class="s2">len </span><span class="s0">!== </span><span class="s5">0</span>
                        <span class="s0">? </span><span class="s3">'HyphenMinus' </span><span class="s0">+ (</span><span class="s2">len </span><span class="s0">&lt; </span><span class="s5">6 </span><span class="s0">? </span><span class="s3">' or hex digit' </span><span class="s0">: </span><span class="s3">''</span><span class="s0">) + </span><span class="s3">' is expected'</span>
                        <span class="s0">: (</span><span class="s2">len </span><span class="s0">&lt; </span><span class="s5">6 </span><span class="s0">? </span><span class="s3">'Hex digit is expected' </span><span class="s0">: </span><span class="s3">'Unexpected input'</span><span class="s0">),</span>
                    <span class="s2">pos</span>
                <span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(++</span><span class="s2">len </span><span class="s0">&gt; </span><span class="s5">6</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Too many hex digits'</span><span class="s0">, </span><span class="s2">pos</span><span class="s0">);</span>
            <span class="s0">}    }</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
        <span class="s1">return </span><span class="s2">len</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">eatQuestionMarkSequence</span><span class="s0">(</span><span class="s2">max</span><span class="s0">) {</span>
        <span class="s1">var </span><span class="s2">count </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s1">while </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">QUESTIONMARK$2</span><span class="s0">)) {</span>
            <span class="s1">if </span><span class="s0">(++</span><span class="s2">count </span><span class="s0">&gt; </span><span class="s2">max</span><span class="s0">) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Too many question marks'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">startsWith$1</span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">) !== </span><span class="s2">code</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s2">NAME$3</span><span class="s0">[</span><span class="s2">code</span><span class="s0">] + </span><span class="s3">' is expected'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">}</span>

    <span class="s4">// https://drafts.csswg.org/css-syntax/#urange</span>
    <span class="s4">// Informally, the &lt;urange&gt; production has three forms:</span>
    <span class="s4">// U+0001</span>
    <span class="s4">//      Defines a range consisting of a single code point, in this case the code point &quot;1&quot;.</span>
    <span class="s4">// U+0001-00ff</span>
    <span class="s4">//      Defines a range of codepoints between the first and the second value, in this case</span>
    <span class="s4">//      the range between &quot;1&quot; and &quot;ff&quot; (255 in decimal) inclusive.</span>
    <span class="s4">// U+00??</span>
    <span class="s4">//      Defines a range of codepoints where the &quot;?&quot; characters range over all hex digits,</span>
    <span class="s4">//      in this case defining the same as the value U+0000-00ff.</span>
    <span class="s4">// In each form, a maximum of 6 digits is allowed for each hexadecimal number (if you treat &quot;?&quot; as a hexadecimal digit).</span>
    <span class="s4">//</span>
    <span class="s4">// &lt;urange&gt; =</span>
    <span class="s4">//   u '+' &lt;ident-token&gt; '?'* |</span>
    <span class="s4">//   u &lt;dimension-token&gt; '?'* |</span>
    <span class="s4">//   u &lt;number-token&gt; '?'* |</span>
    <span class="s4">//   u &lt;number-token&gt; &lt;dimension-token&gt; |</span>
    <span class="s4">//   u &lt;number-token&gt; &lt;number-token&gt; |</span>
    <span class="s4">//   u '+' '?'+</span>
    <span class="s1">function </span><span class="s2">scanUnicodeRange</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">hexLength </span><span class="s0">= </span><span class="s5">0</span><span class="s0">;</span>

        <span class="s4">// u '+' &lt;ident-token&gt; '?'*</span>
        <span class="s4">// u '+' '?'+</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">PLUSSIGN$6</span><span class="s0">)) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">IDENT$e</span><span class="s0">) {</span>
                <span class="s2">hexLength </span><span class="s0">= </span><span class="s2">eatHexSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">hexLength </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
                    <span class="s2">eatQuestionMarkSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">6 </span><span class="s0">- </span><span class="s2">hexLength</span><span class="s0">);</span>
                <span class="s0">}</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">QUESTIONMARK$2</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                <span class="s2">eatQuestionMarkSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">5</span><span class="s0">);</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Hex digit or question mark is expected'</span><span class="s0">);</span>
            <span class="s1">return</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// u &lt;number-token&gt; '?'*</span>
        <span class="s4">// u &lt;number-token&gt; &lt;dimension-token&gt;</span>
        <span class="s4">// u &lt;number-token&gt; &lt;number-token&gt;</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">NUMBER$7</span><span class="s0">) {</span>
            <span class="s2">startsWith$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">PLUSSIGN$6</span><span class="s0">);</span>
            <span class="s2">hexLength </span><span class="s0">= </span><span class="s2">eatHexSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">isDelim</span><span class="s0">(</span><span class="s2">QUESTIONMARK$2</span><span class="s0">)) {</span>
                <span class="s2">eatQuestionMarkSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">6 </span><span class="s0">- </span><span class="s2">hexLength</span><span class="s0">);</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">DIMENSION$5 </span><span class="s0">||</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">NUMBER$7</span><span class="s0">) {</span>
                <span class="s2">startsWith$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">HYPHENMINUS$4</span><span class="s0">);</span>
                <span class="s2">eatHexSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>
                <span class="s1">return</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">return</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s4">// u &lt;dimension-token&gt; '?'*</span>
        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">DIMENSION$5</span><span class="s0">) {</span>
            <span class="s2">startsWith$1</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s2">PLUSSIGN$6</span><span class="s0">);</span>
            <span class="s2">hexLength </span><span class="s0">= </span><span class="s2">eatHexSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s1">true</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">hexLength </span><span class="s0">&gt; </span><span class="s5">0</span><span class="s0">) {</span>
                <span class="s2">eatQuestionMarkSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">, </span><span class="s5">6 </span><span class="s0">- </span><span class="s2">hexLength</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return</span><span class="s0">;</span>
        <span class="s0">}</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">();</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">UnicodeRange </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'UnicodeRange'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>

            <span class="s4">// U or u</span>
            <span class="s1">if </span><span class="s0">(!</span><span class="s2">cmpChar$4</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s2">start</span><span class="s0">, </span><span class="s2">U$1</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'U is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(!</span><span class="s2">cmpChar$4</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s2">start </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">, </span><span class="s2">PLUSSIGN$6</span><span class="s0">)) {</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Plus sign is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
            <span class="s2">scanUnicodeRange</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'UnicodeRange'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">substrToCursor</span><span class="s0">(</span><span class="s2">start</span><span class="s0">)</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">isWhiteSpace$2 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">isWhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">cmpStr$5 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">cmpStr</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$C </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">FUNCTION$3 </span><span class="s0">= </span><span class="s2">TYPE$C</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">URL$1 </span><span class="s0">= </span><span class="s2">TYPE$C</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">RIGHTPARENTHESIS$7 </span><span class="s0">= </span><span class="s2">TYPE$C</span><span class="s0">.</span><span class="s2">RightParenthesis</span><span class="s0">;</span>

    <span class="s4">// &lt;url-token&gt; | &lt;function-token&gt; &lt;string&gt; )</span>
    <span class="s1">var </span><span class="s2">Url </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Url'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: [</span><span class="s3">'String'</span><span class="s0">, </span><span class="s3">'Raw'</span><span class="s0">]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">value</span><span class="s0">;</span>

            <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s2">URL$1</span><span class="s0">:</span>
                    <span class="s1">var </span><span class="s2">rawStart </span><span class="s0">= </span><span class="s2">start </span><span class="s0">+ </span><span class="s5">4</span><span class="s0">;</span>
                    <span class="s1">var </span><span class="s2">rawEnd </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd </span><span class="s0">- </span><span class="s5">1</span><span class="s0">;</span>

                    <span class="s1">while </span><span class="s0">(</span><span class="s2">rawStart </span><span class="s0">&lt; </span><span class="s2">rawEnd </span><span class="s0">&amp;&amp; </span><span class="s2">isWhiteSpace$2</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">rawStart</span><span class="s0">))) {</span>
                        <span class="s2">rawStart</span><span class="s0">++;</span>
                    <span class="s0">}</span>

                    <span class="s1">while </span><span class="s0">(</span><span class="s2">rawStart </span><span class="s0">&lt; </span><span class="s2">rawEnd </span><span class="s0">&amp;&amp; </span><span class="s2">isWhiteSpace$2</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s2">rawEnd </span><span class="s0">- </span><span class="s5">1</span><span class="s0">))) {</span>
                        <span class="s2">rawEnd</span><span class="s0">--;</span>
                    <span class="s0">}</span>

                    <span class="s2">value </span><span class="s0">= {</span>
                        <span class="s2">type</span><span class="s0">: </span><span class="s3">'Raw'</span><span class="s0">,</span>
                        <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">rawStart</span><span class="s0">, </span><span class="s2">rawEnd</span><span class="s0">),</span>
                        <span class="s2">value</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">substring</span><span class="s0">(</span><span class="s2">rawStart</span><span class="s0">, </span><span class="s2">rawEnd</span><span class="s0">)</span>
                    <span class="s0">};</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">URL$1</span><span class="s0">);</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">FUNCTION$3</span><span class="s0">:</span>
                    <span class="s1">if </span><span class="s0">(!</span><span class="s2">cmpStr$5</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">, </span><span class="s3">'url('</span><span class="s0">)) {</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Function name must be `url`'</span><span class="s0">);</span>
                    <span class="s0">}</span>

                    <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">FUNCTION$3</span><span class="s0">);</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                    <span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">String</span><span class="s0">();</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">RIGHTPARENTHESIS$7</span><span class="s0">);</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Url or Function is expected'</span><span class="s0">);</span>
            <span class="s0">}</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Url'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">value</span><span class="s0">: </span><span class="s2">value</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'url'</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">'('</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">node</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s3">')'</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">Value </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'Value'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">children</span><span class="s0">: [[]]</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">var </span><span class="s2">start </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">;</span>
            <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">readSequence</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">.</span><span class="s2">Value</span><span class="s0">);</span>

            <span class="s1">return </span><span class="s0">{</span>
                <span class="s2">type</span><span class="s0">: </span><span class="s3">'Value'</span><span class="s0">,</span>
                <span class="s2">loc</span><span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">getLocation</span><span class="s0">(</span><span class="s2">start</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">),</span>
                <span class="s2">children</span><span class="s0">: </span><span class="s2">children</span>
            <span class="s0">};</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">children</span><span class="s0">(</span><span class="s2">node</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">WHITESPACE$a </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">SPACE$2 </span><span class="s0">= </span><span class="s2">Object</span><span class="s0">.</span><span class="s2">freeze</span><span class="s0">({</span>
        <span class="s2">type</span><span class="s0">: </span><span class="s3">'WhiteSpace'</span><span class="s0">,</span>
        <span class="s2">loc</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
        <span class="s2">value</span><span class="s0">: </span><span class="s3">' '</span>
    <span class="s0">});</span>

    <span class="s1">var </span><span class="s2">WhiteSpace$1 </span><span class="s0">= {</span>
        <span class="s2">name</span><span class="s0">: </span><span class="s3">'WhiteSpace'</span><span class="s0">,</span>
        <span class="s2">structure</span><span class="s0">: {</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s2">String</span>
        <span class="s0">},</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">eat</span><span class="s0">(</span><span class="s2">WHITESPACE$a</span><span class="s0">);</span>
            <span class="s1">return </span><span class="s2">SPACE$2</span><span class="s0">;</span>

            <span class="s4">// return {</span>
            <span class="s4">//     type: 'WhiteSpace',</span>
            <span class="s4">//     loc: this.getLocation(this.scanner.tokenStart, this.scanner.tokenEnd),</span>
            <span class="s4">//     value: this.consume(WHITESPACE)</span>
            <span class="s4">// };</span>
        <span class="s0">},</span>
        <span class="s2">generate</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">node</span><span class="s0">) {</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">chunk</span><span class="s0">(</span><span class="s2">node</span><span class="s0">.</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">node </span><span class="s0">= {</span>
        <span class="s2">AnPlusB</span><span class="s0">: </span><span class="s2">AnPlusB</span><span class="s0">,</span>
        <span class="s2">Atrule</span><span class="s0">: </span><span class="s2">Atrule</span><span class="s0">,</span>
        <span class="s2">AtrulePrelude</span><span class="s0">: </span><span class="s2">AtrulePrelude</span><span class="s0">,</span>
        <span class="s2">AttributeSelector</span><span class="s0">: </span><span class="s2">AttributeSelector</span><span class="s0">,</span>
        <span class="s2">Block</span><span class="s0">: </span><span class="s2">Block</span><span class="s0">,</span>
        <span class="s2">Brackets</span><span class="s0">: </span><span class="s2">Brackets</span><span class="s0">,</span>
        <span class="s2">CDC</span><span class="s0">: </span><span class="s2">CDC_1</span><span class="s0">,</span>
        <span class="s2">CDO</span><span class="s0">: </span><span class="s2">CDO_1</span><span class="s0">,</span>
        <span class="s2">ClassSelector</span><span class="s0">: </span><span class="s2">ClassSelector</span><span class="s0">,</span>
        <span class="s2">Combinator</span><span class="s0">: </span><span class="s2">Combinator</span><span class="s0">,</span>
        <span class="s2">Comment</span><span class="s0">: </span><span class="s2">Comment</span><span class="s0">,</span>
        <span class="s2">Declaration</span><span class="s0">: </span><span class="s2">Declaration</span><span class="s0">,</span>
        <span class="s2">DeclarationList</span><span class="s0">: </span><span class="s2">DeclarationList</span><span class="s0">,</span>
        <span class="s2">Dimension</span><span class="s0">: </span><span class="s2">Dimension</span><span class="s0">,</span>
        <span class="s2">Function</span><span class="s0">: </span><span class="s2">_Function</span><span class="s0">,</span>
        <span class="s2">Hash</span><span class="s0">: </span><span class="s2">Hash</span><span class="s0">,</span>
        <span class="s2">Identifier</span><span class="s0">: </span><span class="s2">Identifier</span><span class="s0">,</span>
        <span class="s2">IdSelector</span><span class="s0">: </span><span class="s2">IdSelector</span><span class="s0">,</span>
        <span class="s2">MediaFeature</span><span class="s0">: </span><span class="s2">MediaFeature</span><span class="s0">,</span>
        <span class="s2">MediaQuery</span><span class="s0">: </span><span class="s2">MediaQuery</span><span class="s0">,</span>
        <span class="s2">MediaQueryList</span><span class="s0">: </span><span class="s2">MediaQueryList</span><span class="s0">,</span>
        <span class="s2">Nth</span><span class="s0">: </span><span class="s2">Nth</span><span class="s0">,</span>
        <span class="s2">Number</span><span class="s0">: </span><span class="s2">_Number</span><span class="s0">,</span>
        <span class="s2">Operator</span><span class="s0">: </span><span class="s2">Operator</span><span class="s0">,</span>
        <span class="s2">Parentheses</span><span class="s0">: </span><span class="s2">Parentheses</span><span class="s0">,</span>
        <span class="s2">Percentage</span><span class="s0">: </span><span class="s2">Percentage</span><span class="s0">,</span>
        <span class="s2">PseudoClassSelector</span><span class="s0">: </span><span class="s2">PseudoClassSelector</span><span class="s0">,</span>
        <span class="s2">PseudoElementSelector</span><span class="s0">: </span><span class="s2">PseudoElementSelector</span><span class="s0">,</span>
        <span class="s2">Ratio</span><span class="s0">: </span><span class="s2">Ratio</span><span class="s0">,</span>
        <span class="s2">Raw</span><span class="s0">: </span><span class="s2">Raw</span><span class="s0">,</span>
        <span class="s2">Rule</span><span class="s0">: </span><span class="s2">Rule</span><span class="s0">,</span>
        <span class="s2">Selector</span><span class="s0">: </span><span class="s2">Selector</span><span class="s0">,</span>
        <span class="s2">SelectorList</span><span class="s0">: </span><span class="s2">SelectorList</span><span class="s0">,</span>
        <span class="s2">String</span><span class="s0">: </span><span class="s2">_String</span><span class="s0">,</span>
        <span class="s2">StyleSheet</span><span class="s0">: </span><span class="s2">StyleSheet</span><span class="s0">,</span>
        <span class="s2">TypeSelector</span><span class="s0">: </span><span class="s2">TypeSelector</span><span class="s0">,</span>
        <span class="s2">UnicodeRange</span><span class="s0">: </span><span class="s2">UnicodeRange</span><span class="s0">,</span>
        <span class="s2">Url</span><span class="s0">: </span><span class="s2">Url</span><span class="s0">,</span>
        <span class="s2">Value</span><span class="s0">: </span><span class="s2">Value</span><span class="s0">,</span>
        <span class="s2">WhiteSpace</span><span class="s0">: </span><span class="s2">WhiteSpace$1</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">lexer </span><span class="s0">= {</span>
        <span class="s2">generic</span><span class="s0">: </span><span class="s1">true</span><span class="s0">,</span>
        <span class="s2">types</span><span class="s0">: </span><span class="s2">data</span><span class="s0">.</span><span class="s2">types</span><span class="s0">,</span>
        <span class="s2">atrules</span><span class="s0">: </span><span class="s2">data</span><span class="s0">.</span><span class="s2">atrules</span><span class="s0">,</span>
        <span class="s2">properties</span><span class="s0">: </span><span class="s2">data</span><span class="s0">.</span><span class="s2">properties</span><span class="s0">,</span>
        <span class="s2">node</span><span class="s0">: </span><span class="s2">node</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">cmpChar$5 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">cmpChar</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">cmpStr$6 </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">cmpStr</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">TYPE$D </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">IDENT$f </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">STRING$2 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">String</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBER$8 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">FUNCTION$4 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">URL$2 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">HASH$4 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DIMENSION$6 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">PERCENTAGE$2 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTPARENTHESIS$5 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTSQUAREBRACKET$3 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">LeftSquareBracket</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMA$3 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Comma</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DELIM$5 </span><span class="s0">= </span><span class="s2">TYPE$D</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBERSIGN$3 </span><span class="s0">= </span><span class="s5">0x0023</span><span class="s0">;  </span><span class="s4">// U+0023 NUMBER SIGN (#)</span>
    <span class="s1">var </span><span class="s2">ASTERISK$5 </span><span class="s0">= </span><span class="s5">0x002A</span><span class="s0">;    </span><span class="s4">// U+002A ASTERISK (*)</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN$7 </span><span class="s0">= </span><span class="s5">0x002B</span><span class="s0">;    </span><span class="s4">// U+002B PLUS SIGN (+)</span>
    <span class="s1">var </span><span class="s2">HYPHENMINUS$5 </span><span class="s0">= </span><span class="s5">0x002D</span><span class="s0">; </span><span class="s4">// U+002D HYPHEN-MINUS (-)</span>
    <span class="s1">var </span><span class="s2">SOLIDUS$4 </span><span class="s0">= </span><span class="s5">0x002F</span><span class="s0">;     </span><span class="s4">// U+002F SOLIDUS (/)</span>
    <span class="s1">var </span><span class="s2">U$2 </span><span class="s0">= </span><span class="s5">0x0075</span><span class="s0">;           </span><span class="s4">// U+0075 LATIN SMALL LETTER U (u)</span>

    <span class="s1">var </span><span class="s2">_default </span><span class="s0">= </span><span class="s1">function </span><span class="s2">defaultRecognizer</span><span class="s0">(</span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
            <span class="s1">case </span><span class="s2">HASH$4</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">COMMA$3</span><span class="s0">:</span>
                <span class="s2">context</span><span class="s0">.</span><span class="s2">space </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
                <span class="s2">context</span><span class="s0">.</span><span class="s2">ignoreWSAfter </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Operator</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">LEFTPARENTHESIS$5</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Parentheses</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">readSequence</span><span class="s0">, </span><span class="s2">context</span><span class="s0">.</span><span class="s2">recognizer</span><span class="s0">);</span>

            <span class="s1">case </span><span class="s2">LEFTSQUAREBRACKET$3</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Brackets</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">readSequence</span><span class="s0">, </span><span class="s2">context</span><span class="s0">.</span><span class="s2">recognizer</span><span class="s0">);</span>

            <span class="s1">case </span><span class="s2">STRING$2</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">String</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">DIMENSION$6</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">PERCENTAGE$2</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">NUMBER$8</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">FUNCTION$4</span><span class="s0">:</span>
                <span class="s1">return </span><span class="s2">cmpStr$6</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenEnd</span><span class="s0">, </span><span class="s3">'url('</span><span class="s0">)</span>
                    <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">()</span>
                    <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">readSequence</span><span class="s0">, </span><span class="s2">context</span><span class="s0">.</span><span class="s2">recognizer</span><span class="s0">);</span>

            <span class="s1">case </span><span class="s2">URL$2</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">IDENT$f</span><span class="s0">:</span>
                <span class="s4">// check for unicode range, it should start with u+ or U+</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s2">cmpChar$5</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">, </span><span class="s2">U$2</span><span class="s0">) &amp;&amp;</span>
                    <span class="s2">cmpChar$5</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">, </span><span class="s2">PLUSSIGN$7</span><span class="s0">)) {</span>
                    <span class="s1">return this</span><span class="s0">.</span><span class="s2">UnicodeRange</span><span class="s0">();</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s1">return this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">();</span>
                <span class="s0">}</span>

            <span class="s1">case </span><span class="s2">DELIM$5</span><span class="s0">:</span>
                <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s2">SOLIDUS$4 </span><span class="s0">||</span>
                    <span class="s2">code </span><span class="s0">=== </span><span class="s2">ASTERISK$5 </span><span class="s0">||</span>
                    <span class="s2">code </span><span class="s0">=== </span><span class="s2">PLUSSIGN$7 </span><span class="s0">||</span>
                    <span class="s2">code </span><span class="s0">=== </span><span class="s2">HYPHENMINUS$5</span><span class="s0">) {</span>
                    <span class="s1">return this</span><span class="s0">.</span><span class="s2">Operator</span><span class="s0">(); </span><span class="s4">// TODO: replace with Delim</span>
                <span class="s0">}</span>

                <span class="s4">// TODO: produce a node with Delim node type</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s2">code </span><span class="s0">=== </span><span class="s2">NUMBERSIGN$3</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Hex or identifier is expected'</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">break</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">atrulePrelude </span><span class="s0">= {</span>
        <span class="s2">getNode</span><span class="s0">: </span><span class="s2">_default</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$E </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">DELIM$6 </span><span class="s0">= </span><span class="s2">TYPE$E</span><span class="s0">.</span><span class="s2">Delim</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">IDENT$g </span><span class="s0">= </span><span class="s2">TYPE$E</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">DIMENSION$7 </span><span class="s0">= </span><span class="s2">TYPE$E</span><span class="s0">.</span><span class="s2">Dimension</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">PERCENTAGE$3 </span><span class="s0">= </span><span class="s2">TYPE$E</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBER$9 </span><span class="s0">= </span><span class="s2">TYPE$E</span><span class="s0">.</span><span class="s2">Number</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">HASH$5 </span><span class="s0">= </span><span class="s2">TYPE$E</span><span class="s0">.</span><span class="s2">Hash</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COLON$5 </span><span class="s0">= </span><span class="s2">TYPE$E</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTSQUAREBRACKET$4 </span><span class="s0">= </span><span class="s2">TYPE$E</span><span class="s0">.</span><span class="s2">LeftSquareBracket</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">NUMBERSIGN$4 </span><span class="s0">= </span><span class="s5">0x0023</span><span class="s0">;      </span><span class="s4">// U+0023 NUMBER SIGN (#)</span>
    <span class="s1">var </span><span class="s2">ASTERISK$6 </span><span class="s0">= </span><span class="s5">0x002A</span><span class="s0">;        </span><span class="s4">// U+002A ASTERISK (*)</span>
    <span class="s1">var </span><span class="s2">PLUSSIGN$8 </span><span class="s0">= </span><span class="s5">0x002B</span><span class="s0">;        </span><span class="s4">// U+002B PLUS SIGN (+)</span>
    <span class="s1">var </span><span class="s2">SOLIDUS$5 </span><span class="s0">= </span><span class="s5">0x002F</span><span class="s0">;         </span><span class="s4">// U+002F SOLIDUS (/)</span>
    <span class="s1">var </span><span class="s2">FULLSTOP$2 </span><span class="s0">= </span><span class="s5">0x002E</span><span class="s0">;        </span><span class="s4">// U+002E FULL STOP (.)</span>
    <span class="s1">var </span><span class="s2">GREATERTHANSIGN$2 </span><span class="s0">= </span><span class="s5">0x003E</span><span class="s0">; </span><span class="s4">// U+003E GREATER-THAN SIGN (&gt;)</span>
    <span class="s1">var </span><span class="s2">VERTICALLINE$3 </span><span class="s0">= </span><span class="s5">0x007C</span><span class="s0">;    </span><span class="s4">// U+007C VERTICAL LINE (|)</span>
    <span class="s1">var </span><span class="s2">TILDE$2 </span><span class="s0">= </span><span class="s5">0x007E</span><span class="s0">;           </span><span class="s4">// U+007E TILDE (~)</span>

    <span class="s1">function </span><span class="s2">getNode</span><span class="s0">(</span><span class="s2">context</span><span class="s0">) {</span>
        <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
            <span class="s1">case </span><span class="s2">LEFTSQUAREBRACKET$4</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">AttributeSelector</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">HASH$5</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">IdSelector</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">COLON$5</span><span class="s0">:</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(</span><span class="s5">1</span><span class="s0">) === </span><span class="s2">COLON$5</span><span class="s0">) {</span>
                    <span class="s1">return this</span><span class="s0">.</span><span class="s2">PseudoElementSelector</span><span class="s0">();</span>
                <span class="s0">} </span><span class="s1">else </span><span class="s0">{</span>
                    <span class="s1">return this</span><span class="s0">.</span><span class="s2">PseudoClassSelector</span><span class="s0">();</span>
                <span class="s0">}</span>

            <span class="s1">case </span><span class="s2">IDENT$g</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">TypeSelector</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">NUMBER$9</span><span class="s0">:</span>
            <span class="s1">case </span><span class="s2">PERCENTAGE$3</span><span class="s0">:</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Percentage</span><span class="s0">();</span>

            <span class="s1">case </span><span class="s2">DIMENSION$7</span><span class="s0">:</span>
                <span class="s4">// throws when .123ident</span>
                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">) === </span><span class="s2">FULLSTOP$2</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Identifier is expected'</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart </span><span class="s0">+ </span><span class="s5">1</span><span class="s0">);</span>
                <span class="s0">}</span>
                <span class="s1">break</span><span class="s0">;</span>

            <span class="s1">case </span><span class="s2">DELIM$6</span><span class="s0">:</span>
                <span class="s1">var </span><span class="s2">code </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">source</span><span class="s0">.</span><span class="s2">charCodeAt</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenStart</span><span class="s0">);</span>

                <span class="s1">switch </span><span class="s0">(</span><span class="s2">code</span><span class="s0">) {</span>
                    <span class="s1">case </span><span class="s2">PLUSSIGN$8</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">GREATERTHANSIGN$2</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">TILDE$2</span><span class="s0">:</span>
                        <span class="s2">context</span><span class="s0">.</span><span class="s2">space </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
                        <span class="s2">context</span><span class="s0">.</span><span class="s2">ignoreWSAfter </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>
                        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Combinator</span><span class="s0">();</span>

                    <span class="s1">case </span><span class="s2">SOLIDUS$5</span><span class="s0">:  </span><span class="s4">// /deep/</span>
                        <span class="s1">return this</span><span class="s0">.</span><span class="s2">Combinator</span><span class="s0">();</span>

                    <span class="s1">case </span><span class="s2">FULLSTOP$2</span><span class="s0">:</span>
                        <span class="s1">return this</span><span class="s0">.</span><span class="s2">ClassSelector</span><span class="s0">();</span>

                    <span class="s1">case </span><span class="s2">ASTERISK$6</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">VERTICALLINE$3</span><span class="s0">:</span>
                        <span class="s1">return this</span><span class="s0">.</span><span class="s2">TypeSelector</span><span class="s0">();</span>

                    <span class="s1">case </span><span class="s2">NUMBERSIGN$4</span><span class="s0">:</span>
                        <span class="s1">return this</span><span class="s0">.</span><span class="s2">IdSelector</span><span class="s0">();</span>
                <span class="s0">}</span>

                <span class="s1">break</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">}</span>
    <span class="s1">var </span><span class="s2">selector </span><span class="s0">= {</span>
        <span class="s2">getNode</span><span class="s0">: </span><span class="s2">getNode</span>
    <span class="s0">};</span>

    <span class="s4">// legacy IE function</span>
    <span class="s4">// expression( &lt;any-value&gt; )</span>
    <span class="s1">var </span><span class="s2">expression </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s1">false</span><span class="s0">)</span>
        <span class="s0">);</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$F </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">rawMode$5 </span><span class="s0">= </span><span class="s2">Raw</span><span class="s0">.</span><span class="s2">mode</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">COMMA$4 </span><span class="s0">= </span><span class="s2">TYPE$F</span><span class="s0">.</span><span class="s2">Comma</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">WHITESPACE$b </span><span class="s0">= </span><span class="s2">TYPE$F</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>

    <span class="s4">// var( &lt;ident&gt; , &lt;value&gt;? )</span>
    <span class="s1">var </span><span class="s2">_var </span><span class="s0">= </span><span class="s1">function</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

        <span class="s4">// NOTE: Don't check more than a first argument is an ident, rest checks are for lexer</span>
        <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">());</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">COMMA$4</span><span class="s0">) {</span>
            <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Operator</span><span class="s0">());</span>

            <span class="s1">const </span><span class="s2">startIndex </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">;</span>
            <span class="s1">const </span><span class="s2">value </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">parseCustomProperty</span>
                <span class="s0">? </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Value</span><span class="s0">(</span><span class="s1">null</span><span class="s0">)</span>
                <span class="s0">: </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">, </span><span class="s2">rawMode$5</span><span class="s0">.</span><span class="s2">exclamationMarkOrSemicolon</span><span class="s0">, </span><span class="s1">false</span><span class="s0">);</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">value</span><span class="s0">.</span><span class="s2">type </span><span class="s0">=== </span><span class="s3">'Value' </span><span class="s0">&amp;&amp; </span><span class="s2">value</span><span class="s0">.</span><span class="s2">children</span><span class="s0">.</span><span class="s2">isEmpty</span><span class="s0">()) {</span>
                <span class="s1">for </span><span class="s0">(</span><span class="s1">let </span><span class="s2">offset </span><span class="s0">= </span><span class="s2">startIndex </span><span class="s0">- </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">; </span><span class="s2">offset </span><span class="s0">&lt;= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">offset</span><span class="s0">++) {</span>
                    <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">lookupType</span><span class="s0">(</span><span class="s2">offset</span><span class="s0">) === </span><span class="s2">WHITESPACE$b</span><span class="s0">) {</span>
                        <span class="s2">value</span><span class="s0">.</span><span class="s2">children</span><span class="s0">.</span><span class="s2">appendData</span><span class="s0">({</span>
                            <span class="s2">type</span><span class="s0">: </span><span class="s3">'WhiteSpace'</span><span class="s0">,</span>
                            <span class="s2">loc</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
                            <span class="s2">value</span><span class="s0">: </span><span class="s3">' '</span>
                        <span class="s0">});</span>
                        <span class="s1">break</span><span class="s0">;</span>
                    <span class="s0">}</span>
                <span class="s0">}</span>
            <span class="s0">}</span>

            <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">value</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">children</span><span class="s0">;</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">value </span><span class="s0">= {</span>
        <span class="s2">getNode</span><span class="s0">: </span><span class="s2">_default</span><span class="s0">,</span>
        <span class="s3">'expression'</span><span class="s0">: </span><span class="s2">expression</span><span class="s0">,</span>
        <span class="s3">'var'</span><span class="s0">: </span><span class="s2">_var</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">scope </span><span class="s0">= {</span>
        <span class="s2">AtrulePrelude</span><span class="s0">: </span><span class="s2">atrulePrelude</span><span class="s0">,</span>
        <span class="s2">Selector</span><span class="s0">: </span><span class="s2">selector</span><span class="s0">,</span>
        <span class="s2">Value</span><span class="s0">: </span><span class="s2">value</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">fontFace </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: {</span>
            <span class="s2">prelude</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
            <span class="s2">block</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Block</span><span class="s0">(</span><span class="s1">true</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$G </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">STRING$3 </span><span class="s0">= </span><span class="s2">TYPE$G</span><span class="s0">.</span><span class="s2">String</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">IDENT$h </span><span class="s0">= </span><span class="s2">TYPE$G</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">URL$3 </span><span class="s0">= </span><span class="s2">TYPE$G</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">FUNCTION$5 </span><span class="s0">= </span><span class="s2">TYPE$G</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTPARENTHESIS$6 </span><span class="s0">= </span><span class="s2">TYPE$G</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">_import </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: {</span>
            <span class="s2">prelude</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>

                <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

                <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                    <span class="s1">case </span><span class="s2">STRING$3</span><span class="s0">:</span>
                        <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">String</span><span class="s0">());</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">case </span><span class="s2">URL$3</span><span class="s0">:</span>
                    <span class="s1">case </span><span class="s2">FUNCTION$5</span><span class="s0">:</span>
                        <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">Url</span><span class="s0">());</span>
                        <span class="s1">break</span><span class="s0">;</span>

                    <span class="s1">default</span><span class="s0">:</span>
                        <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'String or url() is expected'</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">lookupNonWSType</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s2">IDENT$h </span><span class="s0">||</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">lookupNonWSType</span><span class="s0">(</span><span class="s5">0</span><span class="s0">) === </span><span class="s2">LEFTPARENTHESIS$6</span><span class="s0">) {</span>
                    <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">());</span>
                    <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">MediaQueryList</span><span class="s0">());</span>
                <span class="s0">}</span>

                <span class="s1">return </span><span class="s2">children</span><span class="s0">;</span>
            <span class="s0">},</span>
            <span class="s2">block</span><span class="s0">: </span><span class="s1">null</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">media </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: {</span>
            <span class="s2">prelude</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">MediaQueryList</span><span class="s0">()</span>
                <span class="s0">);</span>
            <span class="s0">},</span>
            <span class="s2">block</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Block</span><span class="s0">(</span><span class="s1">false</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">page </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: {</span>
            <span class="s2">prelude</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">SelectorList</span><span class="s0">()</span>
                <span class="s0">);</span>
            <span class="s0">},</span>
            <span class="s2">block</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Block</span><span class="s0">(</span><span class="s1">true</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">TYPE$H </span><span class="s0">= </span><span class="s2">tokenizer</span><span class="s0">.</span><span class="s2">TYPE</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">WHITESPACE$c </span><span class="s0">= </span><span class="s2">TYPE$H</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COMMENT$a </span><span class="s0">= </span><span class="s2">TYPE$H</span><span class="s0">.</span><span class="s2">Comment</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">IDENT$i </span><span class="s0">= </span><span class="s2">TYPE$H</span><span class="s0">.</span><span class="s2">Ident</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">FUNCTION$6 </span><span class="s0">= </span><span class="s2">TYPE$H</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">COLON$6 </span><span class="s0">= </span><span class="s2">TYPE$H</span><span class="s0">.</span><span class="s2">Colon</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">LEFTPARENTHESIS$7 </span><span class="s0">= </span><span class="s2">TYPE$H</span><span class="s0">.</span><span class="s2">LeftParenthesis</span><span class="s0">;</span>

    <span class="s1">function </span><span class="s2">consumeRaw$5</span><span class="s0">() {</span>
        <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">Raw</span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenIndex</span><span class="s0">, </span><span class="s1">null</span><span class="s0">, </span><span class="s1">false</span><span class="s0">)</span>
        <span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">parentheses</span><span class="s0">() {</span>
        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

        <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType </span><span class="s0">=== </span><span class="s2">IDENT$i </span><span class="s0">&amp;&amp;</span>
            <span class="s1">this</span><span class="s0">.</span><span class="s2">lookupNonWSType</span><span class="s0">(</span><span class="s5">1</span><span class="s0">) === </span><span class="s2">COLON$6</span><span class="s0">) {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">Declaration</span><span class="s0">()</span>
            <span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">readSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>
    <span class="s0">}</span>

    <span class="s1">function </span><span class="s2">readSequence</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">createList</span><span class="s0">();</span>
        <span class="s1">var </span><span class="s2">space </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
        <span class="s1">var </span><span class="s2">child</span><span class="s0">;</span>

        <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">skipSC</span><span class="s0">();</span>

        <span class="s2">scan</span><span class="s0">:</span>
        <span class="s1">while </span><span class="s0">(!</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">eof</span><span class="s0">) {</span>
            <span class="s1">switch </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">tokenType</span><span class="s0">) {</span>
                <span class="s1">case </span><span class="s2">WHITESPACE$c</span><span class="s0">:</span>
                    <span class="s2">space </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">WhiteSpace</span><span class="s0">();</span>
                    <span class="s1">continue</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">COMMENT$a</span><span class="s0">:</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">scanner</span><span class="s0">.</span><span class="s2">next</span><span class="s0">();</span>
                    <span class="s1">continue</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">FUNCTION$6</span><span class="s0">:</span>
                    <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Function</span><span class="s0">(</span><span class="s2">consumeRaw$5</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">.</span><span class="s2">AtrulePrelude</span><span class="s0">);</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">IDENT$i</span><span class="s0">:</span>
                    <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">();</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">case </span><span class="s2">LEFTPARENTHESIS$7</span><span class="s0">:</span>
                    <span class="s2">child </span><span class="s0">= </span><span class="s1">this</span><span class="s0">.</span><span class="s2">Parentheses</span><span class="s0">(</span><span class="s2">parentheses</span><span class="s0">, </span><span class="s1">this</span><span class="s0">.</span><span class="s2">scope</span><span class="s0">.</span><span class="s2">AtrulePrelude</span><span class="s0">);</span>
                    <span class="s1">break</span><span class="s0">;</span>

                <span class="s1">default</span><span class="s0">:</span>
                    <span class="s1">break </span><span class="s2">scan</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s1">if </span><span class="s0">(</span><span class="s2">space </span><span class="s0">!== </span><span class="s1">null</span><span class="s0">) {</span>
                <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">space</span><span class="s0">);</span>
                <span class="s2">space </span><span class="s0">= </span><span class="s1">null</span><span class="s0">;</span>
            <span class="s0">}</span>

            <span class="s2">children</span><span class="s0">.</span><span class="s2">push</span><span class="s0">(</span><span class="s2">child</span><span class="s0">);</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">children</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">supports </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: {</span>
            <span class="s2">prelude</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">var </span><span class="s2">children </span><span class="s0">= </span><span class="s2">readSequence</span><span class="s0">.</span><span class="s2">call</span><span class="s0">(</span><span class="s1">this</span><span class="s0">);</span>

                <span class="s1">if </span><span class="s0">(</span><span class="s1">this</span><span class="s0">.</span><span class="s2">getFirstListNode</span><span class="s0">(</span><span class="s2">children</span><span class="s0">) === </span><span class="s1">null</span><span class="s0">) {</span>
                    <span class="s1">this</span><span class="s0">.</span><span class="s2">error</span><span class="s0">(</span><span class="s3">'Condition is expected'</span><span class="s0">);</span>
                <span class="s0">}</span>

                <span class="s1">return </span><span class="s2">children</span><span class="s0">;</span>
            <span class="s0">},</span>
            <span class="s2">block</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Block</span><span class="s0">(</span><span class="s1">false</span><span class="s0">);</span>
            <span class="s0">}</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">atrule </span><span class="s0">= {</span>
        <span class="s3">'font-face'</span><span class="s0">: </span><span class="s2">fontFace</span><span class="s0">,</span>
        <span class="s3">'import'</span><span class="s0">: </span><span class="s2">_import</span><span class="s0">,</span>
        <span class="s3">'media'</span><span class="s0">: </span><span class="s2">media</span><span class="s0">,</span>
        <span class="s3">'page'</span><span class="s0">: </span><span class="s2">page</span><span class="s0">,</span>
        <span class="s3">'supports'</span><span class="s0">: </span><span class="s2">supports</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">dir </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">()</span>
            <span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">has$1 </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">SelectorList</span><span class="s0">()</span>
            <span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">lang </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">Identifier</span><span class="s0">()</span>
            <span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">selectorList </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function </span><span class="s2">selectorList</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">SelectorList</span><span class="s0">()</span>
            <span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">matches </span><span class="s0">= </span><span class="s2">selectorList</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">not </span><span class="s0">= </span><span class="s2">selectorList</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">ALLOW_OF_CLAUSE </span><span class="s0">= </span><span class="s1">true</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">nthWithOfClause </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function </span><span class="s2">nthWithOfClause</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">Nth</span><span class="s0">(</span><span class="s2">ALLOW_OF_CLAUSE</span><span class="s0">)</span>
            <span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">nthChild </span><span class="s0">= </span><span class="s2">nthWithOfClause</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">nthLastChild </span><span class="s0">= </span><span class="s2">nthWithOfClause</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">DISALLOW_OF_CLAUSE </span><span class="s0">= </span><span class="s1">false</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">nth </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function </span><span class="s2">nth</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">Nth</span><span class="s0">(</span><span class="s2">DISALLOW_OF_CLAUSE</span><span class="s0">)</span>
            <span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">nthLastOfType </span><span class="s0">= </span><span class="s2">nth</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">nthOfType </span><span class="s0">= </span><span class="s2">nth</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">slotted </span><span class="s0">= {</span>
        <span class="s2">parse</span><span class="s0">: </span><span class="s1">function </span><span class="s2">compoundSelector</span><span class="s0">() {</span>
            <span class="s1">return this</span><span class="s0">.</span><span class="s2">createSingleNodeList</span><span class="s0">(</span>
                <span class="s1">this</span><span class="s0">.</span><span class="s2">Selector</span><span class="s0">()</span>
            <span class="s0">);</span>
        <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">pseudo </span><span class="s0">= {</span>
        <span class="s3">'dir'</span><span class="s0">: </span><span class="s2">dir</span><span class="s0">,</span>
        <span class="s3">'has'</span><span class="s0">: </span><span class="s2">has$1</span><span class="s0">,</span>
        <span class="s3">'lang'</span><span class="s0">: </span><span class="s2">lang</span><span class="s0">,</span>
        <span class="s3">'matches'</span><span class="s0">: </span><span class="s2">matches</span><span class="s0">,</span>
        <span class="s3">'not'</span><span class="s0">: </span><span class="s2">not</span><span class="s0">,</span>
        <span class="s3">'nth-child'</span><span class="s0">: </span><span class="s2">nthChild</span><span class="s0">,</span>
        <span class="s3">'nth-last-child'</span><span class="s0">: </span><span class="s2">nthLastChild</span><span class="s0">,</span>
        <span class="s3">'nth-last-of-type'</span><span class="s0">: </span><span class="s2">nthLastOfType</span><span class="s0">,</span>
        <span class="s3">'nth-of-type'</span><span class="s0">: </span><span class="s2">nthOfType</span><span class="s0">,</span>
        <span class="s3">'slotted'</span><span class="s0">: </span><span class="s2">slotted</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">parser </span><span class="s0">= {</span>
        <span class="s2">parseContext</span><span class="s0">: {</span>
            <span class="s1">default</span><span class="s0">: </span><span class="s3">'StyleSheet'</span><span class="s0">,</span>
            <span class="s2">stylesheet</span><span class="s0">: </span><span class="s3">'StyleSheet'</span><span class="s0">,</span>
            <span class="s2">atrule</span><span class="s0">: </span><span class="s3">'Atrule'</span><span class="s0">,</span>
            <span class="s2">atrulePrelude</span><span class="s0">: </span><span class="s1">function</span><span class="s0">(</span><span class="s2">options</span><span class="s0">) {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">AtrulePrelude</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">atrule </span><span class="s0">? </span><span class="s2">String</span><span class="s0">(</span><span class="s2">options</span><span class="s0">.</span><span class="s2">atrule</span><span class="s0">) : </span><span class="s1">null</span><span class="s0">);</span>
            <span class="s0">},</span>
            <span class="s2">mediaQueryList</span><span class="s0">: </span><span class="s3">'MediaQueryList'</span><span class="s0">,</span>
            <span class="s2">mediaQuery</span><span class="s0">: </span><span class="s3">'MediaQuery'</span><span class="s0">,</span>
            <span class="s2">rule</span><span class="s0">: </span><span class="s3">'Rule'</span><span class="s0">,</span>
            <span class="s2">selectorList</span><span class="s0">: </span><span class="s3">'SelectorList'</span><span class="s0">,</span>
            <span class="s2">selector</span><span class="s0">: </span><span class="s3">'Selector'</span><span class="s0">,</span>
            <span class="s2">block</span><span class="s0">: </span><span class="s1">function</span><span class="s0">() {</span>
                <span class="s1">return this</span><span class="s0">.</span><span class="s2">Block</span><span class="s0">(</span><span class="s1">true</span><span class="s0">);</span>
            <span class="s0">},</span>
            <span class="s2">declarationList</span><span class="s0">: </span><span class="s3">'DeclarationList'</span><span class="s0">,</span>
            <span class="s2">declaration</span><span class="s0">: </span><span class="s3">'Declaration'</span><span class="s0">,</span>
            <span class="s2">value</span><span class="s0">: </span><span class="s3">'Value'</span>
        <span class="s0">},</span>
        <span class="s2">scope</span><span class="s0">: </span><span class="s2">scope</span><span class="s0">,</span>
        <span class="s2">atrule</span><span class="s0">: </span><span class="s2">atrule</span><span class="s0">,</span>
        <span class="s2">pseudo</span><span class="s0">: </span><span class="s2">pseudo</span><span class="s0">,</span>
        <span class="s2">node</span><span class="s0">: </span><span class="s2">node</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">walker </span><span class="s0">= {</span>
        <span class="s2">node</span><span class="s0">: </span><span class="s2">node</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">version </span><span class="s0">= </span><span class="s3">&quot;1.1.3&quot;</span><span class="s0">;</span>
    <span class="s1">var </span><span class="s2">_package </span><span class="s0">= {</span>
    	<span class="s2">version</span><span class="s0">: </span><span class="s2">version</span>
    <span class="s0">};</span>

    <span class="s1">var </span><span class="s2">_package$1 </span><span class="s0">= </span><span class="s4">/*#__PURE__*/</span><span class="s2">Object</span><span class="s0">.</span><span class="s2">freeze</span><span class="s0">({</span>
        <span class="s2">__proto__</span><span class="s0">: </span><span class="s1">null</span><span class="s0">,</span>
        <span class="s2">version</span><span class="s0">: </span><span class="s2">version</span><span class="s0">,</span>
        <span class="s3">'default'</span><span class="s0">: </span><span class="s2">_package</span>
    <span class="s0">});</span>

    <span class="s1">var </span><span class="s2">require$$4 </span><span class="s0">= </span><span class="s2">getCjsExportFromNamespace</span><span class="s0">(</span><span class="s2">_package$1</span><span class="s0">);</span>

    <span class="s1">function </span><span class="s2">merge</span><span class="s0">() {</span>
        <span class="s1">var </span><span class="s2">dest </span><span class="s0">= {};</span>

        <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">i </span><span class="s0">= </span><span class="s5">0</span><span class="s0">; </span><span class="s2">i </span><span class="s0">&lt; </span><span class="s2">arguments</span><span class="s0">.</span><span class="s2">length</span><span class="s0">; </span><span class="s2">i</span><span class="s0">++) {</span>
            <span class="s1">var </span><span class="s2">src </span><span class="s0">= </span><span class="s2">arguments</span><span class="s0">[</span><span class="s2">i</span><span class="s0">];</span>
            <span class="s1">for </span><span class="s0">(</span><span class="s1">var </span><span class="s2">key </span><span class="s1">in </span><span class="s2">src</span><span class="s0">) {</span>
                <span class="s2">dest</span><span class="s0">[</span><span class="s2">key</span><span class="s0">] = </span><span class="s2">src</span><span class="s0">[</span><span class="s2">key</span><span class="s0">];</span>
            <span class="s0">}</span>
        <span class="s0">}</span>

        <span class="s1">return </span><span class="s2">dest</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s1">var </span><span class="s2">syntax </span><span class="s0">= </span><span class="s2">create$4</span><span class="s0">.</span><span class="s2">create</span><span class="s0">(</span>
        <span class="s2">merge</span><span class="s0">(</span>
            <span class="s2">lexer</span><span class="s0">,</span>
            <span class="s2">parser</span><span class="s0">,</span>
            <span class="s2">walker</span>
        <span class="s0">)</span>
    <span class="s0">);</span>
    <span class="s1">var </span><span class="s2">version$1 </span><span class="s0">= </span><span class="s2">require$$4</span><span class="s0">.</span><span class="s2">version</span><span class="s0">;</span>
    <span class="s2">syntax</span><span class="s0">.</span><span class="s2">version </span><span class="s0">= </span><span class="s2">version$1</span><span class="s0">;</span>

    <span class="s1">var </span><span class="s2">lib </span><span class="s0">= </span><span class="s2">syntax</span><span class="s0">;</span>

    <span class="s1">return </span><span class="s2">lib</span><span class="s0">;</span>

<span class="s0">})));</span>
</pre>
</body>
</html>