<html>
<head>
<title>formats.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6aab73;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #cf8e6d;}
.s4 { color: #2aacb8;}
.s5 { color: #7a7e85;}
.s6 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
formats.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>
<span class="s2">Object</span><span class="s1">.</span><span class="s2">defineProperty</span><span class="s1">(</span><span class="s2">exports</span><span class="s1">, </span><span class="s0">&quot;__esModule&quot;</span><span class="s1">, { </span><span class="s2">value</span><span class="s1">: </span><span class="s3">true </span><span class="s1">});</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">formatNames </span><span class="s1">= </span><span class="s2">exports</span><span class="s1">.</span><span class="s2">fastFormats </span><span class="s1">= </span><span class="s2">exports</span><span class="s1">.</span><span class="s2">fullFormats </span><span class="s1">= </span><span class="s3">void </span><span class="s4">0</span><span class="s1">;</span>
<span class="s3">function </span><span class="s2">fmtDef</span><span class="s1">(</span><span class="s2">validate</span><span class="s1">, </span><span class="s2">compare</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s1">{ </span><span class="s2">validate</span><span class="s1">, </span><span class="s2">compare </span><span class="s1">};</span>
<span class="s1">}</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">fullFormats </span><span class="s1">= {</span>
    <span class="s5">// date: http://tools.ietf.org/html/rfc3339#section-5.6</span>
    <span class="s2">date</span><span class="s1">: </span><span class="s2">fmtDef</span><span class="s1">(</span><span class="s2">date</span><span class="s1">, </span><span class="s2">compareDate</span><span class="s1">),</span>
    <span class="s5">// date-time: http://tools.ietf.org/html/rfc3339#section-5.6</span>
    <span class="s2">time</span><span class="s1">: </span><span class="s2">fmtDef</span><span class="s1">(</span><span class="s2">time</span><span class="s1">, </span><span class="s2">compareTime</span><span class="s1">),</span>
    <span class="s0">&quot;date-time&quot;</span><span class="s1">: </span><span class="s2">fmtDef</span><span class="s1">(</span><span class="s2">date_time</span><span class="s1">, </span><span class="s2">compareDateTime</span><span class="s1">),</span>
    <span class="s5">// duration: https://tools.ietf.org/html/rfc3339#appendix-A</span>
    <span class="s2">duration</span><span class="s1">: </span><span class="s6">/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/</span><span class="s1">,</span>
    <span class="s2">uri</span><span class="s1">,</span>
    <span class="s0">&quot;uri-reference&quot;</span><span class="s1">: </span><span class="s6">/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&amp;'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&amp;'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i</span><span class="s1">,</span>
    <span class="s5">// uri-template: https://tools.ietf.org/html/rfc6570</span>
    <span class="s0">&quot;uri-template&quot;</span><span class="s1">: </span><span class="s6">/^(?:(?:[^\x00-\x20&quot;'&lt;&gt;%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&amp;=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i</span><span class="s1">,</span>
    <span class="s5">// For the source: https://gist.github.com/dperini/729294</span>
    <span class="s5">// For test cases: https://mathiasbynens.be/demo/url-regex</span>
    <span class="s2">url</span><span class="s1">: </span><span class="s6">/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu</span><span class="s1">,</span>
    <span class="s2">email</span><span class="s1">: </span><span class="s6">/^[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i</span><span class="s1">,</span>
    <span class="s2">hostname</span><span class="s1">: </span><span class="s6">/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i</span><span class="s1">,</span>
    <span class="s5">// optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html</span>
    <span class="s2">ipv4</span><span class="s1">: </span><span class="s6">/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/</span><span class="s1">,</span>
    <span class="s2">ipv6</span><span class="s1">: </span><span class="s6">/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i</span><span class="s1">,</span>
    <span class="s2">regex</span><span class="s1">,</span>
    <span class="s5">// uuid: http://tools.ietf.org/html/rfc4122</span>
    <span class="s2">uuid</span><span class="s1">: </span><span class="s6">/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i</span><span class="s1">,</span>
    <span class="s5">// JSON-pointer: https://tools.ietf.org/html/rfc6901</span>
    <span class="s5">// uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A</span>
    <span class="s0">&quot;json-pointer&quot;</span><span class="s1">: </span><span class="s6">/^(?:\/(?:[^~/]|~0|~1)*)*$/</span><span class="s1">,</span>
    <span class="s0">&quot;json-pointer-uri-fragment&quot;</span><span class="s1">: </span><span class="s6">/^#(?:\/(?:[a-z0-9_\-.!$&amp;'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i</span><span class="s1">,</span>
    <span class="s5">// relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00</span>
    <span class="s0">&quot;relative-json-pointer&quot;</span><span class="s1">: </span><span class="s6">/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/</span><span class="s1">,</span>
    <span class="s5">// the following formats are used by the openapi specification: https://spec.openapis.org/oas/v3.0.0#data-types</span>
    <span class="s5">// byte: https://github.com/miguelmota/is-base64</span>
    <span class="s2">byte</span><span class="s1">,</span>
    <span class="s5">// signed 32 bit integer</span>
    <span class="s2">int32</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;number&quot;</span><span class="s1">, </span><span class="s2">validate</span><span class="s1">: </span><span class="s2">validateInt32 </span><span class="s1">},</span>
    <span class="s5">// signed 64 bit integer</span>
    <span class="s2">int64</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;number&quot;</span><span class="s1">, </span><span class="s2">validate</span><span class="s1">: </span><span class="s2">validateInt64 </span><span class="s1">},</span>
    <span class="s5">// C-type float</span>
    <span class="s2">float</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;number&quot;</span><span class="s1">, </span><span class="s2">validate</span><span class="s1">: </span><span class="s2">validateNumber </span><span class="s1">},</span>
    <span class="s5">// C-type double</span>
    <span class="s2">double</span><span class="s1">: { </span><span class="s2">type</span><span class="s1">: </span><span class="s0">&quot;number&quot;</span><span class="s1">, </span><span class="s2">validate</span><span class="s1">: </span><span class="s2">validateNumber </span><span class="s1">},</span>
    <span class="s5">// hint to the UI to hide input strings</span>
    <span class="s2">password</span><span class="s1">: </span><span class="s3">true</span><span class="s1">,</span>
    <span class="s5">// unchecked string payload</span>
    <span class="s2">binary</span><span class="s1">: </span><span class="s3">true</span><span class="s1">,</span>
<span class="s1">};</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">fastFormats </span><span class="s1">= {</span>
    <span class="s2">...exports</span><span class="s1">.</span><span class="s2">fullFormats</span><span class="s1">,</span>
    <span class="s2">date</span><span class="s1">: </span><span class="s2">fmtDef</span><span class="s1">(</span><span class="s6">/^\d\d\d\d-[0-1]\d-[0-3]\d$/</span><span class="s1">, </span><span class="s2">compareDate</span><span class="s1">),</span>
    <span class="s2">time</span><span class="s1">: </span><span class="s2">fmtDef</span><span class="s1">(</span><span class="s6">/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i</span><span class="s1">, </span><span class="s2">compareTime</span><span class="s1">),</span>
    <span class="s0">&quot;date-time&quot;</span><span class="s1">: </span><span class="s2">fmtDef</span><span class="s1">(</span><span class="s6">/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i</span><span class="s1">, </span><span class="s2">compareDateTime</span><span class="s1">),</span>
    <span class="s5">// uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js</span>
    <span class="s2">uri</span><span class="s1">: </span><span class="s6">/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i</span><span class="s1">,</span>
    <span class="s0">&quot;uri-reference&quot;</span><span class="s1">: </span><span class="s6">/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i</span><span class="s1">,</span>
    <span class="s5">// email (sources from jsen validator):</span>
    <span class="s5">// http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363</span>
    <span class="s5">// http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'wilful violation')</span>
    <span class="s2">email</span><span class="s1">: </span><span class="s6">/^[a-z0-9.!#$%&amp;'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i</span><span class="s1">,</span>
<span class="s1">};</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">formatNames </span><span class="s1">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">keys</span><span class="s1">(</span><span class="s2">exports</span><span class="s1">.</span><span class="s2">fullFormats</span><span class="s1">);</span>
<span class="s3">function </span><span class="s2">isLeapYear</span><span class="s1">(</span><span class="s2">year</span><span class="s1">) {</span>
    <span class="s5">// https://tools.ietf.org/html/rfc3339#appendix-C</span>
    <span class="s3">return </span><span class="s2">year </span><span class="s1">% </span><span class="s4">4 </span><span class="s1">=== </span><span class="s4">0 </span><span class="s1">&amp;&amp; (</span><span class="s2">year </span><span class="s1">% </span><span class="s4">100 </span><span class="s1">!== </span><span class="s4">0 </span><span class="s1">|| </span><span class="s2">year </span><span class="s1">% </span><span class="s4">400 </span><span class="s1">=== </span><span class="s4">0</span><span class="s1">);</span>
<span class="s1">}</span>
<span class="s3">const </span><span class="s2">DATE </span><span class="s1">= </span><span class="s6">/^(\d\d\d\d)-(\d\d)-(\d\d)$/</span><span class="s1">;</span>
<span class="s3">const </span><span class="s2">DAYS </span><span class="s1">= [</span><span class="s4">0</span><span class="s1">, </span><span class="s4">31</span><span class="s1">, </span><span class="s4">28</span><span class="s1">, </span><span class="s4">31</span><span class="s1">, </span><span class="s4">30</span><span class="s1">, </span><span class="s4">31</span><span class="s1">, </span><span class="s4">30</span><span class="s1">, </span><span class="s4">31</span><span class="s1">, </span><span class="s4">31</span><span class="s1">, </span><span class="s4">30</span><span class="s1">, </span><span class="s4">31</span><span class="s1">, </span><span class="s4">30</span><span class="s1">, </span><span class="s4">31</span><span class="s1">];</span>
<span class="s3">function </span><span class="s2">date</span><span class="s1">(</span><span class="s2">str</span><span class="s1">) {</span>
    <span class="s5">// full-date from http://tools.ietf.org/html/rfc3339#section-5.6</span>
    <span class="s3">const </span><span class="s2">matches </span><span class="s1">= </span><span class="s2">DATE</span><span class="s1">.</span><span class="s2">exec</span><span class="s1">(</span><span class="s2">str</span><span class="s1">);</span>
    <span class="s3">if </span><span class="s1">(!</span><span class="s2">matches</span><span class="s1">)</span>
        <span class="s3">return false</span><span class="s1">;</span>
    <span class="s3">const </span><span class="s2">year </span><span class="s1">= +</span><span class="s2">matches</span><span class="s1">[</span><span class="s4">1</span><span class="s1">];</span>
    <span class="s3">const </span><span class="s2">month </span><span class="s1">= +</span><span class="s2">matches</span><span class="s1">[</span><span class="s4">2</span><span class="s1">];</span>
    <span class="s3">const </span><span class="s2">day </span><span class="s1">= +</span><span class="s2">matches</span><span class="s1">[</span><span class="s4">3</span><span class="s1">];</span>
    <span class="s3">return </span><span class="s1">(</span><span class="s2">month </span><span class="s1">&gt;= </span><span class="s4">1 </span><span class="s1">&amp;&amp;</span>
        <span class="s2">month </span><span class="s1">&lt;= </span><span class="s4">12 </span><span class="s1">&amp;&amp;</span>
        <span class="s2">day </span><span class="s1">&gt;= </span><span class="s4">1 </span><span class="s1">&amp;&amp;</span>
        <span class="s2">day </span><span class="s1">&lt;= (</span><span class="s2">month </span><span class="s1">=== </span><span class="s4">2 </span><span class="s1">&amp;&amp; </span><span class="s2">isLeapYear</span><span class="s1">(</span><span class="s2">year</span><span class="s1">) ? </span><span class="s4">29 </span><span class="s1">: </span><span class="s2">DAYS</span><span class="s1">[</span><span class="s2">month</span><span class="s1">]));</span>
<span class="s1">}</span>
<span class="s3">function </span><span class="s2">compareDate</span><span class="s1">(</span><span class="s2">d1</span><span class="s1">, </span><span class="s2">d2</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(!(</span><span class="s2">d1 </span><span class="s1">&amp;&amp; </span><span class="s2">d2</span><span class="s1">))</span>
        <span class="s3">return </span><span class="s2">undefined</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">d1 </span><span class="s1">&gt; </span><span class="s2">d2</span><span class="s1">)</span>
        <span class="s3">return </span><span class="s4">1</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">d1 </span><span class="s1">&lt; </span><span class="s2">d2</span><span class="s1">)</span>
        <span class="s3">return </span><span class="s1">-</span><span class="s4">1</span><span class="s1">;</span>
    <span class="s3">return </span><span class="s4">0</span><span class="s1">;</span>
<span class="s1">}</span>
<span class="s3">const </span><span class="s2">TIME </span><span class="s1">= </span><span class="s6">/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i</span><span class="s1">;</span>
<span class="s3">function </span><span class="s2">time</span><span class="s1">(</span><span class="s2">str</span><span class="s1">, </span><span class="s2">withTimeZone</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">matches </span><span class="s1">= </span><span class="s2">TIME</span><span class="s1">.</span><span class="s2">exec</span><span class="s1">(</span><span class="s2">str</span><span class="s1">);</span>
    <span class="s3">if </span><span class="s1">(!</span><span class="s2">matches</span><span class="s1">)</span>
        <span class="s3">return false</span><span class="s1">;</span>
    <span class="s3">const </span><span class="s2">hour </span><span class="s1">= +</span><span class="s2">matches</span><span class="s1">[</span><span class="s4">1</span><span class="s1">];</span>
    <span class="s3">const </span><span class="s2">minute </span><span class="s1">= +</span><span class="s2">matches</span><span class="s1">[</span><span class="s4">2</span><span class="s1">];</span>
    <span class="s3">const </span><span class="s2">second </span><span class="s1">= +</span><span class="s2">matches</span><span class="s1">[</span><span class="s4">3</span><span class="s1">];</span>
    <span class="s3">const </span><span class="s2">timeZone </span><span class="s1">= </span><span class="s2">matches</span><span class="s1">[</span><span class="s4">5</span><span class="s1">];</span>
    <span class="s3">return </span><span class="s1">(((</span><span class="s2">hour </span><span class="s1">&lt;= </span><span class="s4">23 </span><span class="s1">&amp;&amp; </span><span class="s2">minute </span><span class="s1">&lt;= </span><span class="s4">59 </span><span class="s1">&amp;&amp; </span><span class="s2">second </span><span class="s1">&lt;= </span><span class="s4">59</span><span class="s1">) ||</span>
        <span class="s1">(</span><span class="s2">hour </span><span class="s1">=== </span><span class="s4">23 </span><span class="s1">&amp;&amp; </span><span class="s2">minute </span><span class="s1">=== </span><span class="s4">59 </span><span class="s1">&amp;&amp; </span><span class="s2">second </span><span class="s1">=== </span><span class="s4">60</span><span class="s1">)) &amp;&amp;</span>
        <span class="s1">(!</span><span class="s2">withTimeZone </span><span class="s1">|| </span><span class="s2">timeZone </span><span class="s1">!== </span><span class="s0">&quot;&quot;</span><span class="s1">));</span>
<span class="s1">}</span>
<span class="s3">function </span><span class="s2">compareTime</span><span class="s1">(</span><span class="s2">t1</span><span class="s1">, </span><span class="s2">t2</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(!(</span><span class="s2">t1 </span><span class="s1">&amp;&amp; </span><span class="s2">t2</span><span class="s1">))</span>
        <span class="s3">return </span><span class="s2">undefined</span><span class="s1">;</span>
    <span class="s3">const </span><span class="s2">a1 </span><span class="s1">= </span><span class="s2">TIME</span><span class="s1">.</span><span class="s2">exec</span><span class="s1">(</span><span class="s2">t1</span><span class="s1">);</span>
    <span class="s3">const </span><span class="s2">a2 </span><span class="s1">= </span><span class="s2">TIME</span><span class="s1">.</span><span class="s2">exec</span><span class="s1">(</span><span class="s2">t2</span><span class="s1">);</span>
    <span class="s3">if </span><span class="s1">(!(</span><span class="s2">a1 </span><span class="s1">&amp;&amp; </span><span class="s2">a2</span><span class="s1">))</span>
        <span class="s3">return </span><span class="s2">undefined</span><span class="s1">;</span>
    <span class="s2">t1 </span><span class="s1">= </span><span class="s2">a1</span><span class="s1">[</span><span class="s4">1</span><span class="s1">] + </span><span class="s2">a1</span><span class="s1">[</span><span class="s4">2</span><span class="s1">] + </span><span class="s2">a1</span><span class="s1">[</span><span class="s4">3</span><span class="s1">] + (</span><span class="s2">a1</span><span class="s1">[</span><span class="s4">4</span><span class="s1">] || </span><span class="s0">&quot;&quot;</span><span class="s1">);</span>
    <span class="s2">t2 </span><span class="s1">= </span><span class="s2">a2</span><span class="s1">[</span><span class="s4">1</span><span class="s1">] + </span><span class="s2">a2</span><span class="s1">[</span><span class="s4">2</span><span class="s1">] + </span><span class="s2">a2</span><span class="s1">[</span><span class="s4">3</span><span class="s1">] + (</span><span class="s2">a2</span><span class="s1">[</span><span class="s4">4</span><span class="s1">] || </span><span class="s0">&quot;&quot;</span><span class="s1">);</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">t1 </span><span class="s1">&gt; </span><span class="s2">t2</span><span class="s1">)</span>
        <span class="s3">return </span><span class="s4">1</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">t1 </span><span class="s1">&lt; </span><span class="s2">t2</span><span class="s1">)</span>
        <span class="s3">return </span><span class="s1">-</span><span class="s4">1</span><span class="s1">;</span>
    <span class="s3">return </span><span class="s4">0</span><span class="s1">;</span>
<span class="s1">}</span>
<span class="s3">const </span><span class="s2">DATE_TIME_SEPARATOR </span><span class="s1">= </span><span class="s6">/t|\s/i</span><span class="s1">;</span>
<span class="s3">function </span><span class="s2">date_time</span><span class="s1">(</span><span class="s2">str</span><span class="s1">) {</span>
    <span class="s5">// http://tools.ietf.org/html/rfc3339#section-5.6</span>
    <span class="s3">const </span><span class="s2">dateTime </span><span class="s1">= </span><span class="s2">str</span><span class="s1">.</span><span class="s2">split</span><span class="s1">(</span><span class="s2">DATE_TIME_SEPARATOR</span><span class="s1">);</span>
    <span class="s3">return </span><span class="s2">dateTime</span><span class="s1">.</span><span class="s2">length </span><span class="s1">=== </span><span class="s4">2 </span><span class="s1">&amp;&amp; </span><span class="s2">date</span><span class="s1">(</span><span class="s2">dateTime</span><span class="s1">[</span><span class="s4">0</span><span class="s1">]) &amp;&amp; </span><span class="s2">time</span><span class="s1">(</span><span class="s2">dateTime</span><span class="s1">[</span><span class="s4">1</span><span class="s1">], </span><span class="s3">true</span><span class="s1">);</span>
<span class="s1">}</span>
<span class="s3">function </span><span class="s2">compareDateTime</span><span class="s1">(</span><span class="s2">dt1</span><span class="s1">, </span><span class="s2">dt2</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(!(</span><span class="s2">dt1 </span><span class="s1">&amp;&amp; </span><span class="s2">dt2</span><span class="s1">))</span>
        <span class="s3">return </span><span class="s2">undefined</span><span class="s1">;</span>
    <span class="s3">const </span><span class="s1">[</span><span class="s2">d1</span><span class="s1">, </span><span class="s2">t1</span><span class="s1">] = </span><span class="s2">dt1</span><span class="s1">.</span><span class="s2">split</span><span class="s1">(</span><span class="s2">DATE_TIME_SEPARATOR</span><span class="s1">);</span>
    <span class="s3">const </span><span class="s1">[</span><span class="s2">d2</span><span class="s1">, </span><span class="s2">t2</span><span class="s1">] = </span><span class="s2">dt2</span><span class="s1">.</span><span class="s2">split</span><span class="s1">(</span><span class="s2">DATE_TIME_SEPARATOR</span><span class="s1">);</span>
    <span class="s3">const </span><span class="s2">res </span><span class="s1">= </span><span class="s2">compareDate</span><span class="s1">(</span><span class="s2">d1</span><span class="s1">, </span><span class="s2">d2</span><span class="s1">);</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">res </span><span class="s1">=== </span><span class="s2">undefined</span><span class="s1">)</span>
        <span class="s3">return </span><span class="s2">undefined</span><span class="s1">;</span>
    <span class="s3">return </span><span class="s2">res </span><span class="s1">|| </span><span class="s2">compareTime</span><span class="s1">(</span><span class="s2">t1</span><span class="s1">, </span><span class="s2">t2</span><span class="s1">);</span>
<span class="s1">}</span>
<span class="s3">const </span><span class="s2">NOT_URI_FRAGMENT </span><span class="s1">= </span><span class="s6">/\/|:/</span><span class="s1">;</span>
<span class="s3">const </span><span class="s2">URI </span><span class="s1">= </span><span class="s6">/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&amp;'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&amp;'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&amp;'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&amp;'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&amp;'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i</span><span class="s1">;</span>
<span class="s3">function </span><span class="s2">uri</span><span class="s1">(</span><span class="s2">str</span><span class="s1">) {</span>
    <span class="s5">// http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required &quot;.&quot;</span>
    <span class="s3">return </span><span class="s2">NOT_URI_FRAGMENT</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">str</span><span class="s1">) &amp;&amp; </span><span class="s2">URI</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">str</span><span class="s1">);</span>
<span class="s1">}</span>
<span class="s3">const </span><span class="s2">BYTE </span><span class="s1">= </span><span class="s6">/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm</span><span class="s1">;</span>
<span class="s3">function </span><span class="s2">byte</span><span class="s1">(</span><span class="s2">str</span><span class="s1">) {</span>
    <span class="s2">BYTE</span><span class="s1">.</span><span class="s2">lastIndex </span><span class="s1">= </span><span class="s4">0</span><span class="s1">;</span>
    <span class="s3">return </span><span class="s2">BYTE</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">str</span><span class="s1">);</span>
<span class="s1">}</span>
<span class="s3">const </span><span class="s2">MIN_INT32 </span><span class="s1">= -(</span><span class="s4">2 </span><span class="s1">** </span><span class="s4">31</span><span class="s1">);</span>
<span class="s3">const </span><span class="s2">MAX_INT32 </span><span class="s1">= </span><span class="s4">2 </span><span class="s1">** </span><span class="s4">31 </span><span class="s1">- </span><span class="s4">1</span><span class="s1">;</span>
<span class="s3">function </span><span class="s2">validateInt32</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">Number</span><span class="s1">.</span><span class="s2">isInteger</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) &amp;&amp; </span><span class="s2">value </span><span class="s1">&lt;= </span><span class="s2">MAX_INT32 </span><span class="s1">&amp;&amp; </span><span class="s2">value </span><span class="s1">&gt;= </span><span class="s2">MIN_INT32</span><span class="s1">;</span>
<span class="s1">}</span>
<span class="s3">function </span><span class="s2">validateInt64</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) {</span>
    <span class="s5">// JSON and javascript max Int is 2**53, so any int that passes isInteger is valid for Int64</span>
    <span class="s3">return </span><span class="s2">Number</span><span class="s1">.</span><span class="s2">isInteger</span><span class="s1">(</span><span class="s2">value</span><span class="s1">);</span>
<span class="s1">}</span>
<span class="s3">function </span><span class="s2">validateNumber</span><span class="s1">() {</span>
    <span class="s3">return true</span><span class="s1">;</span>
<span class="s1">}</span>
<span class="s3">const </span><span class="s2">Z_ANCHOR </span><span class="s1">= </span><span class="s6">/[^\\]\\Z/</span><span class="s1">;</span>
<span class="s3">function </span><span class="s2">regex</span><span class="s1">(</span><span class="s2">str</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">Z_ANCHOR</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">str</span><span class="s1">))</span>
        <span class="s3">return false</span><span class="s1">;</span>
    <span class="s3">try </span><span class="s1">{</span>
        <span class="s3">new </span><span class="s2">RegExp</span><span class="s1">(</span><span class="s2">str</span><span class="s1">);</span>
        <span class="s3">return true</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s3">return false</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
<span class="s5">//# sourceMappingURL=formats.js.map</span></pre>
</body>
</html>