<html>
<head>
<title>picomatch.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6aab73;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #cf8e6d;}
.s4 { color: #5f826b; font-style: italic;}
.s5 { color: #67a37c; font-style: italic;}
.s6 { color: #2aacb8;}
.s7 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
picomatch.js</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span><span class="s1">;</span>

<span class="s3">const </span><span class="s2">path </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'path'</span><span class="s1">);</span>
<span class="s3">const </span><span class="s2">scan </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'./scan'</span><span class="s1">);</span>
<span class="s3">const </span><span class="s2">parse </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'./parse'</span><span class="s1">);</span>
<span class="s3">const </span><span class="s2">utils </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'./utils'</span><span class="s1">);</span>
<span class="s3">const </span><span class="s2">constants </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">'./constants'</span><span class="s1">);</span>
<span class="s3">const </span><span class="s2">isObject </span><span class="s1">= </span><span class="s2">val </span><span class="s1">=&gt; </span><span class="s2">val </span><span class="s1">&amp;&amp; </span><span class="s3">typeof </span><span class="s2">val </span><span class="s1">=== </span><span class="s0">'object' </span><span class="s1">&amp;&amp; !</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">val</span><span class="s1">);</span>

<span class="s4">/**</span>
 <span class="s4">* Creates a matcher function from one or more glob patterns. The</span>
 <span class="s4">* returned function takes a string to match as its first argument,</span>
 <span class="s4">* and returns true if the string is a match. The returned matcher</span>
 <span class="s4">* function also takes a boolean as the second argument that, when true,</span>
 <span class="s4">* returns an object with additional information.</span>
 <span class="s4">*</span>
 <span class="s4">* ```js</span>
 <span class="s4">* const picomatch = require('picomatch');</span>
 <span class="s4">* // picomatch(glob[, options]);</span>
 <span class="s4">*</span>
 <span class="s4">* const isMatch = picomatch('*.!(*a)');</span>
 <span class="s4">* console.log(isMatch('a.a')); //=&gt; false</span>
 <span class="s4">* console.log(isMatch('a.b')); //=&gt; true</span>
 <span class="s4">* ```</span>
 <span class="s4">* </span><span class="s5">@name </span><span class="s4">picomatch</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String|Array} `globs` One or more glob patterns.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Object=} `options`</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{Function=} Returns a matcher function.</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s3">const </span><span class="s2">picomatch </span><span class="s1">= (</span><span class="s2">glob</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, </span><span class="s2">returnState </span><span class="s1">= </span><span class="s3">false</span><span class="s1">) =&gt; {</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">glob</span><span class="s1">)) {</span>
    <span class="s3">const </span><span class="s2">fns </span><span class="s1">= </span><span class="s2">glob</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">input </span><span class="s1">=&gt; </span><span class="s2">picomatch</span><span class="s1">(</span><span class="s2">input</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, </span><span class="s2">returnState</span><span class="s1">));</span>
    <span class="s3">const </span><span class="s2">arrayMatcher </span><span class="s1">= </span><span class="s2">str </span><span class="s1">=&gt; {</span>
      <span class="s3">for </span><span class="s1">(</span><span class="s3">const </span><span class="s2">isMatch of fns</span><span class="s1">) {</span>
        <span class="s3">const </span><span class="s2">state </span><span class="s1">= </span><span class="s2">isMatch</span><span class="s1">(</span><span class="s2">str</span><span class="s1">);</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">state</span><span class="s1">) </span><span class="s3">return </span><span class="s2">state</span><span class="s1">;</span>
      <span class="s1">}</span>
      <span class="s3">return false</span><span class="s1">;</span>
    <span class="s1">};</span>
    <span class="s3">return </span><span class="s2">arrayMatcher</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s3">const </span><span class="s2">isState </span><span class="s1">= </span><span class="s2">isObject</span><span class="s1">(</span><span class="s2">glob</span><span class="s1">) &amp;&amp; </span><span class="s2">glob</span><span class="s1">.</span><span class="s2">tokens </span><span class="s1">&amp;&amp; </span><span class="s2">glob</span><span class="s1">.</span><span class="s2">input</span><span class="s1">;</span>

  <span class="s3">if </span><span class="s1">(</span><span class="s2">glob </span><span class="s1">=== </span><span class="s0">'' </span><span class="s1">|| (</span><span class="s3">typeof </span><span class="s2">glob </span><span class="s1">!== </span><span class="s0">'string' </span><span class="s1">&amp;&amp; !</span><span class="s2">isState</span><span class="s1">)) {</span>
    <span class="s3">throw new </span><span class="s2">TypeError</span><span class="s1">(</span><span class="s0">'Expected pattern to be a non-empty string'</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s3">const </span><span class="s2">opts </span><span class="s1">= </span><span class="s2">options </span><span class="s1">|| {};</span>
  <span class="s3">const </span><span class="s2">posix </span><span class="s1">= </span><span class="s2">utils</span><span class="s1">.</span><span class="s2">isWindows</span><span class="s1">(</span><span class="s2">options</span><span class="s1">);</span>
  <span class="s3">const </span><span class="s2">regex </span><span class="s1">= </span><span class="s2">isState</span>
    <span class="s1">? </span><span class="s2">picomatch</span><span class="s1">.</span><span class="s2">compileRe</span><span class="s1">(</span><span class="s2">glob</span><span class="s1">, </span><span class="s2">options</span><span class="s1">)</span>
    <span class="s1">: </span><span class="s2">picomatch</span><span class="s1">.</span><span class="s2">makeRe</span><span class="s1">(</span><span class="s2">glob</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, </span><span class="s3">false</span><span class="s1">, </span><span class="s3">true</span><span class="s1">);</span>

  <span class="s3">const </span><span class="s2">state </span><span class="s1">= </span><span class="s2">regex</span><span class="s1">.</span><span class="s2">state</span><span class="s1">;</span>
  <span class="s3">delete </span><span class="s2">regex</span><span class="s1">.</span><span class="s2">state</span><span class="s1">;</span>

  <span class="s3">let </span><span class="s2">isIgnored </span><span class="s1">= () =&gt; </span><span class="s3">false</span><span class="s1">;</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">ignore</span><span class="s1">) {</span>
    <span class="s3">const </span><span class="s2">ignoreOpts </span><span class="s1">= { </span><span class="s2">...options</span><span class="s1">, </span><span class="s2">ignore</span><span class="s1">: </span><span class="s3">null</span><span class="s1">, </span><span class="s2">onMatch</span><span class="s1">: </span><span class="s3">null</span><span class="s1">, </span><span class="s2">onResult</span><span class="s1">: </span><span class="s3">null </span><span class="s1">};</span>
    <span class="s2">isIgnored </span><span class="s1">= </span><span class="s2">picomatch</span><span class="s1">(</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">ignore</span><span class="s1">, </span><span class="s2">ignoreOpts</span><span class="s1">, </span><span class="s2">returnState</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s3">const </span><span class="s2">matcher </span><span class="s1">= (</span><span class="s2">input</span><span class="s1">, </span><span class="s2">returnObject </span><span class="s1">= </span><span class="s3">false</span><span class="s1">) =&gt; {</span>
    <span class="s3">const </span><span class="s1">{ </span><span class="s2">isMatch</span><span class="s1">, </span><span class="s2">match</span><span class="s1">, </span><span class="s2">output </span><span class="s1">} = </span><span class="s2">picomatch</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">input</span><span class="s1">, </span><span class="s2">regex</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, { </span><span class="s2">glob</span><span class="s1">, </span><span class="s2">posix </span><span class="s1">});</span>
    <span class="s3">const </span><span class="s2">result </span><span class="s1">= { </span><span class="s2">glob</span><span class="s1">, </span><span class="s2">state</span><span class="s1">, </span><span class="s2">regex</span><span class="s1">, </span><span class="s2">posix</span><span class="s1">, </span><span class="s2">input</span><span class="s1">, </span><span class="s2">output</span><span class="s1">, </span><span class="s2">match</span><span class="s1">, </span><span class="s2">isMatch </span><span class="s1">};</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">onResult </span><span class="s1">=== </span><span class="s0">'function'</span><span class="s1">) {</span>
      <span class="s2">opts</span><span class="s1">.</span><span class="s2">onResult</span><span class="s1">(</span><span class="s2">result</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">isMatch </span><span class="s1">=== </span><span class="s3">false</span><span class="s1">) {</span>
      <span class="s2">result</span><span class="s1">.</span><span class="s2">isMatch </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
      <span class="s3">return </span><span class="s2">returnObject </span><span class="s1">? </span><span class="s2">result </span><span class="s1">: </span><span class="s3">false</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s2">isIgnored</span><span class="s1">(</span><span class="s2">input</span><span class="s1">)) {</span>
      <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">onIgnore </span><span class="s1">=== </span><span class="s0">'function'</span><span class="s1">) {</span>
        <span class="s2">opts</span><span class="s1">.</span><span class="s2">onIgnore</span><span class="s1">(</span><span class="s2">result</span><span class="s1">);</span>
      <span class="s1">}</span>
      <span class="s2">result</span><span class="s1">.</span><span class="s2">isMatch </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
      <span class="s3">return </span><span class="s2">returnObject </span><span class="s1">? </span><span class="s2">result </span><span class="s1">: </span><span class="s3">false</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">onMatch </span><span class="s1">=== </span><span class="s0">'function'</span><span class="s1">) {</span>
      <span class="s2">opts</span><span class="s1">.</span><span class="s2">onMatch</span><span class="s1">(</span><span class="s2">result</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s2">returnObject </span><span class="s1">? </span><span class="s2">result </span><span class="s1">: </span><span class="s3">true</span><span class="s1">;</span>
  <span class="s1">};</span>

  <span class="s3">if </span><span class="s1">(</span><span class="s2">returnState</span><span class="s1">) {</span>
    <span class="s2">matcher</span><span class="s1">.</span><span class="s2">state </span><span class="s1">= </span><span class="s2">state</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s3">return </span><span class="s2">matcher</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s4">/**</span>
 <span class="s4">* Test `input` with the given `regex`. This is used by the main</span>
 <span class="s4">* `picomatch()` function to test the input string.</span>
 <span class="s4">*</span>
 <span class="s4">* ```js</span>
 <span class="s4">* const picomatch = require('picomatch');</span>
 <span class="s4">* // picomatch.test(input, regex[, options]);</span>
 <span class="s4">*</span>
 <span class="s4">* console.log(picomatch.test('foo/bar', /^(?:([^/]*?)\/([^/]*?))$/));</span>
 <span class="s4">* // { isMatch: true, match: [ 'foo/', 'foo', 'bar' ], output: 'foo/bar' }</span>
 <span class="s4">* ```</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String} `input` String to test.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{RegExp} `regex`</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{Object} Returns an object with matching info.</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">test </span><span class="s1">= (</span><span class="s2">input</span><span class="s1">, </span><span class="s2">regex</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, { </span><span class="s2">glob</span><span class="s1">, </span><span class="s2">posix </span><span class="s1">} = {}) =&gt; {</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s3">typeof </span><span class="s2">input </span><span class="s1">!== </span><span class="s0">'string'</span><span class="s1">) {</span>
    <span class="s3">throw new </span><span class="s2">TypeError</span><span class="s1">(</span><span class="s0">'Expected input to be a string'</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s3">if </span><span class="s1">(</span><span class="s2">input </span><span class="s1">=== </span><span class="s0">''</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s1">{ </span><span class="s2">isMatch</span><span class="s1">: </span><span class="s3">false</span><span class="s1">, </span><span class="s2">output</span><span class="s1">: </span><span class="s0">'' </span><span class="s1">};</span>
  <span class="s1">}</span>

  <span class="s3">const </span><span class="s2">opts </span><span class="s1">= </span><span class="s2">options </span><span class="s1">|| {};</span>
  <span class="s3">const </span><span class="s2">format </span><span class="s1">= </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">format </span><span class="s1">|| (</span><span class="s2">posix </span><span class="s1">? </span><span class="s2">utils</span><span class="s1">.</span><span class="s2">toPosixSlashes </span><span class="s1">: </span><span class="s3">null</span><span class="s1">);</span>
  <span class="s3">let </span><span class="s2">match </span><span class="s1">= </span><span class="s2">input </span><span class="s1">=== </span><span class="s2">glob</span><span class="s1">;</span>
  <span class="s3">let </span><span class="s2">output </span><span class="s1">= (</span><span class="s2">match </span><span class="s1">&amp;&amp; </span><span class="s2">format</span><span class="s1">) ? </span><span class="s2">format</span><span class="s1">(</span><span class="s2">input</span><span class="s1">) : </span><span class="s2">input</span><span class="s1">;</span>

  <span class="s3">if </span><span class="s1">(</span><span class="s2">match </span><span class="s1">=== </span><span class="s3">false</span><span class="s1">) {</span>
    <span class="s2">output </span><span class="s1">= </span><span class="s2">format </span><span class="s1">? </span><span class="s2">format</span><span class="s1">(</span><span class="s2">input</span><span class="s1">) : </span><span class="s2">input</span><span class="s1">;</span>
    <span class="s2">match </span><span class="s1">= </span><span class="s2">output </span><span class="s1">=== </span><span class="s2">glob</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s3">if </span><span class="s1">(</span><span class="s2">match </span><span class="s1">=== </span><span class="s3">false </span><span class="s1">|| </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">capture </span><span class="s1">=== </span><span class="s3">true</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">matchBase </span><span class="s1">=== </span><span class="s3">true </span><span class="s1">|| </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">basename </span><span class="s1">=== </span><span class="s3">true</span><span class="s1">) {</span>
      <span class="s2">match </span><span class="s1">= </span><span class="s2">picomatch</span><span class="s1">.</span><span class="s2">matchBase</span><span class="s1">(</span><span class="s2">input</span><span class="s1">, </span><span class="s2">regex</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, </span><span class="s2">posix</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
      <span class="s2">match </span><span class="s1">= </span><span class="s2">regex</span><span class="s1">.</span><span class="s2">exec</span><span class="s1">(</span><span class="s2">output</span><span class="s1">);</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s3">return </span><span class="s1">{ </span><span class="s2">isMatch</span><span class="s1">: </span><span class="s2">Boolean</span><span class="s1">(</span><span class="s2">match</span><span class="s1">), </span><span class="s2">match</span><span class="s1">, </span><span class="s2">output </span><span class="s1">};</span>
<span class="s1">};</span>

<span class="s4">/**</span>
 <span class="s4">* Match the basename of a filepath.</span>
 <span class="s4">*</span>
 <span class="s4">* ```js</span>
 <span class="s4">* const picomatch = require('picomatch');</span>
 <span class="s4">* // picomatch.matchBase(input, glob[, options]);</span>
 <span class="s4">* console.log(picomatch.matchBase('foo/bar.js', '*.js'); // true</span>
 <span class="s4">* ```</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String} `input` String to test.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{RegExp|String} `glob` Glob pattern or regex created by [.makeRe](#makeRe).</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{Boolean}</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">matchBase </span><span class="s1">= (</span><span class="s2">input</span><span class="s1">, </span><span class="s2">glob</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, </span><span class="s2">posix </span><span class="s1">= </span><span class="s2">utils</span><span class="s1">.</span><span class="s2">isWindows</span><span class="s1">(</span><span class="s2">options</span><span class="s1">)) =&gt; {</span>
  <span class="s3">const </span><span class="s2">regex </span><span class="s1">= </span><span class="s2">glob </span><span class="s3">instanceof </span><span class="s2">RegExp </span><span class="s1">? </span><span class="s2">glob </span><span class="s1">: </span><span class="s2">picomatch</span><span class="s1">.</span><span class="s2">makeRe</span><span class="s1">(</span><span class="s2">glob</span><span class="s1">, </span><span class="s2">options</span><span class="s1">);</span>
  <span class="s3">return </span><span class="s2">regex</span><span class="s1">.</span><span class="s2">test</span><span class="s1">(</span><span class="s2">path</span><span class="s1">.</span><span class="s2">basename</span><span class="s1">(</span><span class="s2">input</span><span class="s1">));</span>
<span class="s1">};</span>

<span class="s4">/**</span>
 <span class="s4">* Returns true if **any** of the given glob `patterns` match the specified `string`.</span>
 <span class="s4">*</span>
 <span class="s4">* ```js</span>
 <span class="s4">* const picomatch = require('picomatch');</span>
 <span class="s4">* // picomatch.isMatch(string, patterns[, options]);</span>
 <span class="s4">*</span>
 <span class="s4">* console.log(picomatch.isMatch('a.a', ['b.*', '*.a'])); //=&gt; true</span>
 <span class="s4">* console.log(picomatch.isMatch('a.a', 'b.*')); //=&gt; false</span>
 <span class="s4">* ```</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String|Array} str The string to test.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String|Array} patterns One or more glob patterns to use for matching.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Object} [options] See available [options](#options).</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{Boolean} Returns true if any patterns match `str`</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">isMatch </span><span class="s1">= (</span><span class="s2">str</span><span class="s1">, </span><span class="s2">patterns</span><span class="s1">, </span><span class="s2">options</span><span class="s1">) =&gt; </span><span class="s2">picomatch</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">, </span><span class="s2">options</span><span class="s1">)(</span><span class="s2">str</span><span class="s1">);</span>

<span class="s4">/**</span>
 <span class="s4">* Parse a glob pattern to create the source string for a regular</span>
 <span class="s4">* expression.</span>
 <span class="s4">*</span>
 <span class="s4">* ```js</span>
 <span class="s4">* const picomatch = require('picomatch');</span>
 <span class="s4">* const result = picomatch.parse(pattern[, options]);</span>
 <span class="s4">* ```</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String} `pattern`</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Object} `options`</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{Object} Returns an object with useful properties and output to be used as a regex source string.</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">parse </span><span class="s1">= (</span><span class="s2">pattern</span><span class="s1">, </span><span class="s2">options</span><span class="s1">) =&gt; {</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s2">isArray</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">)) </span><span class="s3">return </span><span class="s2">pattern</span><span class="s1">.</span><span class="s2">map</span><span class="s1">(</span><span class="s2">p </span><span class="s1">=&gt; </span><span class="s2">picomatch</span><span class="s1">.</span><span class="s2">parse</span><span class="s1">(</span><span class="s2">p</span><span class="s1">, </span><span class="s2">options</span><span class="s1">));</span>
  <span class="s3">return </span><span class="s2">parse</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">, { </span><span class="s2">...options</span><span class="s1">, </span><span class="s2">fastpaths</span><span class="s1">: </span><span class="s3">false </span><span class="s1">});</span>
<span class="s1">};</span>

<span class="s4">/**</span>
 <span class="s4">* Scan a glob pattern to separate the pattern into segments.</span>
 <span class="s4">*</span>
 <span class="s4">* ```js</span>
 <span class="s4">* const picomatch = require('picomatch');</span>
 <span class="s4">* // picomatch.scan(input[, options]);</span>
 <span class="s4">*</span>
 <span class="s4">* const result = picomatch.scan('!./foo/*.js');</span>
 <span class="s4">* console.log(result);</span>
 <span class="s4">* { prefix: '!./',</span>
 <span class="s4">*   input: '!./foo/*.js',</span>
 <span class="s4">*   start: 3,</span>
 <span class="s4">*   base: 'foo',</span>
 <span class="s4">*   glob: '*.js',</span>
 <span class="s4">*   isBrace: false,</span>
 <span class="s4">*   isBracket: false,</span>
 <span class="s4">*   isGlob: true,</span>
 <span class="s4">*   isExtglob: false,</span>
 <span class="s4">*   isGlobstar: false,</span>
 <span class="s4">*   negated: true }</span>
 <span class="s4">* ```</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String} `input` Glob pattern to scan.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Object} `options`</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{Object} Returns an object with</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">scan </span><span class="s1">= (</span><span class="s2">input</span><span class="s1">, </span><span class="s2">options</span><span class="s1">) =&gt; </span><span class="s2">scan</span><span class="s1">(</span><span class="s2">input</span><span class="s1">, </span><span class="s2">options</span><span class="s1">);</span>

<span class="s4">/**</span>
 <span class="s4">* Compile a regular expression from the `state` object returned by the</span>
 <span class="s4">* [parse()](#parse) method.</span>
 <span class="s4">*</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Object} `state`</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Object} `options`</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Boolean} `returnOutput` Intended for implementors, this argument allows you to return the raw output from the parser.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Boolean} `returnState` Adds the state to a `state` property on the returned regex. Useful for implementors and debugging.</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{RegExp}</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">compileRe </span><span class="s1">= (</span><span class="s2">state</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, </span><span class="s2">returnOutput </span><span class="s1">= </span><span class="s3">false</span><span class="s1">, </span><span class="s2">returnState </span><span class="s1">= </span><span class="s3">false</span><span class="s1">) =&gt; {</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">returnOutput </span><span class="s1">=== </span><span class="s3">true</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">state</span><span class="s1">.</span><span class="s2">output</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s3">const </span><span class="s2">opts </span><span class="s1">= </span><span class="s2">options </span><span class="s1">|| {};</span>
  <span class="s3">const </span><span class="s2">prepend </span><span class="s1">= </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">contains </span><span class="s1">? </span><span class="s0">'' </span><span class="s1">: </span><span class="s0">'^'</span><span class="s1">;</span>
  <span class="s3">const </span><span class="s2">append </span><span class="s1">= </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">contains </span><span class="s1">? </span><span class="s0">'' </span><span class="s1">: </span><span class="s0">'$'</span><span class="s1">;</span>

  <span class="s3">let </span><span class="s2">source </span><span class="s1">= </span><span class="s0">`</span><span class="s2">$</span><span class="s1">{</span><span class="s2">prepend</span><span class="s1">}</span><span class="s0">(?:</span><span class="s2">$</span><span class="s1">{</span><span class="s2">state</span><span class="s1">.</span><span class="s2">output</span><span class="s1">}</span><span class="s0">)</span><span class="s2">$</span><span class="s1">{</span><span class="s2">append</span><span class="s1">}</span><span class="s0">`</span><span class="s1">;</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">state </span><span class="s1">&amp;&amp; </span><span class="s2">state</span><span class="s1">.</span><span class="s2">negated </span><span class="s1">=== </span><span class="s3">true</span><span class="s1">) {</span>
    <span class="s2">source </span><span class="s1">= </span><span class="s0">`^(?!</span><span class="s2">$</span><span class="s1">{</span><span class="s2">source</span><span class="s1">}</span><span class="s0">).*$`</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s3">const </span><span class="s2">regex </span><span class="s1">= </span><span class="s2">picomatch</span><span class="s1">.</span><span class="s2">toRegex</span><span class="s1">(</span><span class="s2">source</span><span class="s1">, </span><span class="s2">options</span><span class="s1">);</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">returnState </span><span class="s1">=== </span><span class="s3">true</span><span class="s1">) {</span>
    <span class="s2">regex</span><span class="s1">.</span><span class="s2">state </span><span class="s1">= </span><span class="s2">state</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s3">return </span><span class="s2">regex</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s4">/**</span>
 <span class="s4">* Create a regular expression from a parsed glob pattern.</span>
 <span class="s4">*</span>
 <span class="s4">* ```js</span>
 <span class="s4">* const picomatch = require('picomatch');</span>
 <span class="s4">* const state = picomatch.parse('*.js');</span>
 <span class="s4">* // picomatch.compileRe(state[, options]);</span>
 <span class="s4">*</span>
 <span class="s4">* console.log(picomatch.compileRe(state));</span>
 <span class="s4">* //=&gt; /^(?:(?!\.)(?=.)[^/]*?\.js)$/</span>
 <span class="s4">* ```</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String} `state` The object returned from the `.parse` method.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Object} `options`</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Boolean} `returnOutput` Implementors may use this argument to return the compiled output, instead of a regular expression. This is not exposed on the options to prevent end-users from mutating the result.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Boolean} `returnState` Implementors may use this argument to return the state from the parsed glob with the returned regular expression.</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{RegExp} Returns a regex created from the given pattern.</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">makeRe </span><span class="s1">= (</span><span class="s2">input</span><span class="s1">, </span><span class="s2">options </span><span class="s1">= {}, </span><span class="s2">returnOutput </span><span class="s1">= </span><span class="s3">false</span><span class="s1">, </span><span class="s2">returnState </span><span class="s1">= </span><span class="s3">false</span><span class="s1">) =&gt; {</span>
  <span class="s3">if </span><span class="s1">(!</span><span class="s2">input </span><span class="s1">|| </span><span class="s3">typeof </span><span class="s2">input </span><span class="s1">!== </span><span class="s0">'string'</span><span class="s1">) {</span>
    <span class="s3">throw new </span><span class="s2">TypeError</span><span class="s1">(</span><span class="s0">'Expected a non-empty string'</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s3">let </span><span class="s2">parsed </span><span class="s1">= { </span><span class="s2">negated</span><span class="s1">: </span><span class="s3">false</span><span class="s1">, </span><span class="s2">fastpaths</span><span class="s1">: </span><span class="s3">true </span><span class="s1">};</span>

  <span class="s3">if </span><span class="s1">(</span><span class="s2">options</span><span class="s1">.</span><span class="s2">fastpaths </span><span class="s1">!== </span><span class="s3">false </span><span class="s1">&amp;&amp; (</span><span class="s2">input</span><span class="s1">[</span><span class="s6">0</span><span class="s1">] === </span><span class="s0">'.' </span><span class="s1">|| </span><span class="s2">input</span><span class="s1">[</span><span class="s6">0</span><span class="s1">] === </span><span class="s0">'*'</span><span class="s1">)) {</span>
    <span class="s2">parsed</span><span class="s1">.</span><span class="s2">output </span><span class="s1">= </span><span class="s2">parse</span><span class="s1">.</span><span class="s2">fastpaths</span><span class="s1">(</span><span class="s2">input</span><span class="s1">, </span><span class="s2">options</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s3">if </span><span class="s1">(!</span><span class="s2">parsed</span><span class="s1">.</span><span class="s2">output</span><span class="s1">) {</span>
    <span class="s2">parsed </span><span class="s1">= </span><span class="s2">parse</span><span class="s1">(</span><span class="s2">input</span><span class="s1">, </span><span class="s2">options</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s3">return </span><span class="s2">picomatch</span><span class="s1">.</span><span class="s2">compileRe</span><span class="s1">(</span><span class="s2">parsed</span><span class="s1">, </span><span class="s2">options</span><span class="s1">, </span><span class="s2">returnOutput</span><span class="s1">, </span><span class="s2">returnState</span><span class="s1">);</span>
<span class="s1">};</span>

<span class="s4">/**</span>
 <span class="s4">* Create a regular expression from the given regex source string.</span>
 <span class="s4">*</span>
 <span class="s4">* ```js</span>
 <span class="s4">* const picomatch = require('picomatch');</span>
 <span class="s4">* // picomatch.toRegex(source[, options]);</span>
 <span class="s4">*</span>
 <span class="s4">* const { output } = picomatch.parse('*.js');</span>
 <span class="s4">* console.log(picomatch.toRegex(output));</span>
 <span class="s4">* //=&gt; /^(?:(?!\.)(?=.)[^/]*?\.js)$/</span>
 <span class="s4">* ```</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String} `source` Regular expression source string.</span>
 <span class="s4">* </span><span class="s5">@param </span><span class="s4">{Object} `options`</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{RegExp}</span>
 <span class="s4">* </span><span class="s5">@api </span><span class="s4">public</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">toRegex </span><span class="s1">= (</span><span class="s2">source</span><span class="s1">, </span><span class="s2">options</span><span class="s1">) =&gt; {</span>
  <span class="s3">try </span><span class="s1">{</span>
    <span class="s3">const </span><span class="s2">opts </span><span class="s1">= </span><span class="s2">options </span><span class="s1">|| {};</span>
    <span class="s3">return new </span><span class="s2">RegExp</span><span class="s1">(</span><span class="s2">source</span><span class="s1">, </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">flags </span><span class="s1">|| (</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">nocase </span><span class="s1">? </span><span class="s0">'i' </span><span class="s1">: </span><span class="s0">''</span><span class="s1">));</span>
  <span class="s1">} </span><span class="s3">catch </span><span class="s1">(</span><span class="s2">err</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">options </span><span class="s1">&amp;&amp; </span><span class="s2">options</span><span class="s1">.</span><span class="s2">debug </span><span class="s1">=== </span><span class="s3">true</span><span class="s1">) </span><span class="s3">throw </span><span class="s2">err</span><span class="s1">;</span>
    <span class="s3">return </span><span class="s7">/$^/</span><span class="s1">;</span>
  <span class="s1">}</span>
<span class="s1">};</span>

<span class="s4">/**</span>
 <span class="s4">* Picomatch constants.</span>
 <span class="s4">* </span><span class="s5">@return </span><span class="s4">{Object}</span>
 <span class="s4">*/</span>

<span class="s2">picomatch</span><span class="s1">.</span><span class="s2">constants </span><span class="s1">= </span><span class="s2">constants</span><span class="s1">;</span>

<span class="s4">/**</span>
 <span class="s4">* Expose &quot;picomatch&quot;</span>
 <span class="s4">*/</span>

<span class="s2">module</span><span class="s1">.</span><span class="s2">exports </span><span class="s1">= </span><span class="s2">picomatch</span><span class="s1">;</span>
</pre>
</body>
</html>