<html>
<head>
<title>ResizeObserver.es.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #bcbec4;}
.s2 { color: #7a7e85;}
.s3 { color: #cf8e6d;}
.s4 { color: #bcbec4;}
.s5 { color: #6aab73;}
.s6 { color: #67a37c; font-style: italic;}
.s7 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ResizeObserver.es.js</font>
</center></td></tr></table>
<pre><span class="s0">/**</span>
 <span class="s0">* A collection of shims that provide minimal functionality of the ES6 collections.</span>
 <span class="s0">*</span>
 <span class="s0">* These implementations are not meant to be used outside of the ResizeObserver</span>
 <span class="s0">* modules as they cover only a limited range of use cases.</span>
 <span class="s0">*/</span>
<span class="s2">/* eslint-disable require-jsdoc, valid-jsdoc */</span>
<span class="s3">var </span><span class="s1">MapShim </span><span class="s4">= (</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">Map </span><span class="s4">!== </span><span class="s5">'undefined'</span><span class="s4">) {</span>
        <span class="s3">return </span><span class="s1">Map</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s0">/**</span>
     <span class="s0">* Returns index in provided array that matches the specified key.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Array&lt;Array&gt;} arr</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{*} key</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{number}</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">getIndex</span><span class="s4">(</span><span class="s1">arr</span><span class="s4">, </span><span class="s1">key</span><span class="s4">) {</span>
        <span class="s3">var </span><span class="s1">result </span><span class="s4">= -</span><span class="s7">1</span><span class="s4">;</span>
        <span class="s1">arr</span><span class="s4">.</span><span class="s1">some</span><span class="s4">(</span><span class="s3">function </span><span class="s4">(</span><span class="s1">entry</span><span class="s4">, </span><span class="s1">index</span><span class="s4">) {</span>
            <span class="s3">if </span><span class="s4">(</span><span class="s1">entry</span><span class="s4">[</span><span class="s7">0</span><span class="s4">] === </span><span class="s1">key</span><span class="s4">) {</span>
                <span class="s1">result </span><span class="s4">= </span><span class="s1">index</span><span class="s4">;</span>
                <span class="s3">return true</span><span class="s4">;</span>
            <span class="s4">}</span>
            <span class="s3">return false</span><span class="s4">;</span>
        <span class="s4">});</span>
        <span class="s3">return </span><span class="s1">result</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s0">/** </span><span class="s6">@class </span><span class="s0">*/ </span><span class="s4">(</span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">function </span><span class="s1">class_1</span><span class="s4">() {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__ </span><span class="s4">= [];</span>
        <span class="s4">}</span>
        <span class="s1">Object</span><span class="s4">.</span><span class="s1">defineProperty</span><span class="s4">(</span><span class="s1">class_1</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">, </span><span class="s5">&quot;size&quot;</span><span class="s4">, {</span>
            <span class="s0">/**</span>
             <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{boolean}</span>
             <span class="s0">*/</span>
            <span class="s1">get</span><span class="s4">: </span><span class="s3">function </span><span class="s4">() {</span>
                <span class="s3">return this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">.</span><span class="s1">length</span><span class="s4">;</span>
            <span class="s4">},</span>
            <span class="s1">enumerable</span><span class="s4">: </span><span class="s3">true</span><span class="s4">,</span>
            <span class="s1">configurable</span><span class="s4">: </span><span class="s3">true</span>
        <span class="s4">});</span>
        <span class="s0">/**</span>
         <span class="s0">* </span><span class="s6">@param </span><span class="s0">{*} key</span>
         <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{*}</span>
         <span class="s0">*/</span>
        <span class="s1">class_1</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">get </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">key</span><span class="s4">) {</span>
            <span class="s3">var </span><span class="s1">index </span><span class="s4">= </span><span class="s1">getIndex</span><span class="s4">(</span><span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">, </span><span class="s1">key</span><span class="s4">);</span>
            <span class="s3">var </span><span class="s1">entry </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">[</span><span class="s1">index</span><span class="s4">];</span>
            <span class="s3">return </span><span class="s1">entry </span><span class="s4">&amp;&amp; </span><span class="s1">entry</span><span class="s4">[</span><span class="s7">1</span><span class="s4">];</span>
        <span class="s4">};</span>
        <span class="s0">/**</span>
         <span class="s0">* </span><span class="s6">@param </span><span class="s0">{*} key</span>
         <span class="s0">* </span><span class="s6">@param </span><span class="s0">{*} value</span>
         <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
         <span class="s0">*/</span>
        <span class="s1">class_1</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">set </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">key</span><span class="s4">, </span><span class="s1">value</span><span class="s4">) {</span>
            <span class="s3">var </span><span class="s1">index </span><span class="s4">= </span><span class="s1">getIndex</span><span class="s4">(</span><span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">, </span><span class="s1">key</span><span class="s4">);</span>
            <span class="s3">if </span><span class="s4">(~</span><span class="s1">index</span><span class="s4">) {</span>
                <span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">[</span><span class="s1">index</span><span class="s4">][</span><span class="s7">1</span><span class="s4">] = </span><span class="s1">value</span><span class="s4">;</span>
            <span class="s4">}</span>
            <span class="s3">else </span><span class="s4">{</span>
                <span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">.</span><span class="s1">push</span><span class="s4">([</span><span class="s1">key</span><span class="s4">, </span><span class="s1">value</span><span class="s4">]);</span>
            <span class="s4">}</span>
        <span class="s4">};</span>
        <span class="s0">/**</span>
         <span class="s0">* </span><span class="s6">@param </span><span class="s0">{*} key</span>
         <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
         <span class="s0">*/</span>
        <span class="s1">class_1</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">delete </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">key</span><span class="s4">) {</span>
            <span class="s3">var </span><span class="s1">entries </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">;</span>
            <span class="s3">var </span><span class="s1">index </span><span class="s4">= </span><span class="s1">getIndex</span><span class="s4">(</span><span class="s1">entries</span><span class="s4">, </span><span class="s1">key</span><span class="s4">);</span>
            <span class="s3">if </span><span class="s4">(~</span><span class="s1">index</span><span class="s4">) {</span>
                <span class="s1">entries</span><span class="s4">.</span><span class="s1">splice</span><span class="s4">(</span><span class="s1">index</span><span class="s4">, </span><span class="s7">1</span><span class="s4">);</span>
            <span class="s4">}</span>
        <span class="s4">};</span>
        <span class="s0">/**</span>
         <span class="s0">* </span><span class="s6">@param </span><span class="s0">{*} key</span>
         <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
         <span class="s0">*/</span>
        <span class="s1">class_1</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">has </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">key</span><span class="s4">) {</span>
            <span class="s3">return </span><span class="s4">!!~</span><span class="s1">getIndex</span><span class="s4">(</span><span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">, </span><span class="s1">key</span><span class="s4">);</span>
        <span class="s4">};</span>
        <span class="s0">/**</span>
         <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
         <span class="s0">*/</span>
        <span class="s1">class_1</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">clear </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">.</span><span class="s1">splice</span><span class="s4">(</span><span class="s7">0</span><span class="s4">);</span>
        <span class="s4">};</span>
        <span class="s0">/**</span>
         <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Function} callback</span>
         <span class="s0">* </span><span class="s6">@param </span><span class="s0">{*} [ctx=null]</span>
         <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
         <span class="s0">*/</span>
        <span class="s1">class_1</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">forEach </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">callback</span><span class="s4">, </span><span class="s1">ctx</span><span class="s4">) {</span>
            <span class="s3">if </span><span class="s4">(</span><span class="s1">ctx </span><span class="s4">=== </span><span class="s3">void </span><span class="s7">0</span><span class="s4">) { </span><span class="s1">ctx </span><span class="s4">= </span><span class="s3">null</span><span class="s4">; }</span>
            <span class="s3">for </span><span class="s4">(</span><span class="s3">var </span><span class="s1">_i </span><span class="s4">= </span><span class="s7">0</span><span class="s4">, </span><span class="s1">_a </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">__entries__</span><span class="s4">; </span><span class="s1">_i </span><span class="s4">&lt; </span><span class="s1">_a</span><span class="s4">.</span><span class="s1">length</span><span class="s4">; </span><span class="s1">_i</span><span class="s4">++) {</span>
                <span class="s3">var </span><span class="s1">entry </span><span class="s4">= </span><span class="s1">_a</span><span class="s4">[</span><span class="s1">_i</span><span class="s4">];</span>
                <span class="s1">callback</span><span class="s4">.</span><span class="s1">call</span><span class="s4">(</span><span class="s1">ctx</span><span class="s4">, </span><span class="s1">entry</span><span class="s4">[</span><span class="s7">1</span><span class="s4">], </span><span class="s1">entry</span><span class="s4">[</span><span class="s7">0</span><span class="s4">]);</span>
            <span class="s4">}</span>
        <span class="s4">};</span>
        <span class="s3">return </span><span class="s1">class_1</span><span class="s4">;</span>
    <span class="s4">}());</span>
<span class="s4">})();</span>

<span class="s0">/**</span>
 <span class="s0">* Detects whether window and document objects are available in current environment.</span>
 <span class="s0">*/</span>
<span class="s3">var </span><span class="s1">isBrowser </span><span class="s4">= </span><span class="s3">typeof </span><span class="s1">window </span><span class="s4">!== </span><span class="s5">'undefined' </span><span class="s4">&amp;&amp; </span><span class="s3">typeof </span><span class="s1">document </span><span class="s4">!== </span><span class="s5">'undefined' </span><span class="s4">&amp;&amp; </span><span class="s1">window</span><span class="s4">.</span><span class="s1">document </span><span class="s4">=== </span><span class="s1">document</span><span class="s4">;</span>

<span class="s2">// Returns global object of a current environment.</span>
<span class="s3">var </span><span class="s1">global$1 </span><span class="s4">= (</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">global </span><span class="s4">!== </span><span class="s5">'undefined' </span><span class="s4">&amp;&amp; </span><span class="s1">global</span><span class="s4">.</span><span class="s1">Math </span><span class="s4">=== </span><span class="s1">Math</span><span class="s4">) {</span>
        <span class="s3">return </span><span class="s1">global</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">self </span><span class="s4">!== </span><span class="s5">'undefined' </span><span class="s4">&amp;&amp; </span><span class="s1">self</span><span class="s4">.</span><span class="s1">Math </span><span class="s4">=== </span><span class="s1">Math</span><span class="s4">) {</span>
        <span class="s3">return </span><span class="s1">self</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">window </span><span class="s4">!== </span><span class="s5">'undefined' </span><span class="s4">&amp;&amp; </span><span class="s1">window</span><span class="s4">.</span><span class="s1">Math </span><span class="s4">=== </span><span class="s1">Math</span><span class="s4">) {</span>
        <span class="s3">return </span><span class="s1">window</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s2">// eslint-disable-next-line no-new-func</span>
    <span class="s3">return </span><span class="s1">Function</span><span class="s4">(</span><span class="s5">'return this'</span><span class="s4">)();</span>
<span class="s4">})();</span>

<span class="s0">/**</span>
 <span class="s0">* A shim for the requestAnimationFrame which falls back to the setTimeout if</span>
 <span class="s0">* first one is not supported.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{number} Requests' identifier.</span>
 <span class="s0">*/</span>
<span class="s3">var </span><span class="s1">requestAnimationFrame$1 </span><span class="s4">= (</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">requestAnimationFrame </span><span class="s4">=== </span><span class="s5">'function'</span><span class="s4">) {</span>
        <span class="s2">// It's required to use a bounded function because IE sometimes throws</span>
        <span class="s2">// an &quot;Invalid calling object&quot; error if rAF is invoked without the global</span>
        <span class="s2">// object on the left hand side.</span>
        <span class="s3">return </span><span class="s1">requestAnimationFrame</span><span class="s4">.</span><span class="s1">bind</span><span class="s4">(</span><span class="s1">global$1</span><span class="s4">);</span>
    <span class="s4">}</span>
    <span class="s3">return function </span><span class="s4">(</span><span class="s1">callback</span><span class="s4">) { </span><span class="s3">return </span><span class="s1">setTimeout</span><span class="s4">(</span><span class="s3">function </span><span class="s4">() { </span><span class="s3">return </span><span class="s1">callback</span><span class="s4">(</span><span class="s1">Date</span><span class="s4">.</span><span class="s1">now</span><span class="s4">()); }, </span><span class="s7">1000 </span><span class="s4">/ </span><span class="s7">60</span><span class="s4">); };</span>
<span class="s4">})();</span>

<span class="s2">// Defines minimum timeout before adding a trailing call.</span>
<span class="s3">var </span><span class="s1">trailingTimeout </span><span class="s4">= </span><span class="s7">2</span><span class="s4">;</span>
<span class="s0">/**</span>
 <span class="s0">* Creates a wrapper function which ensures that provided callback will be</span>
 <span class="s0">* invoked only once during the specified delay period.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Function} callback - Function to be invoked after the delay period.</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{number} delay - Delay after which to invoke callback.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{Function}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">throttle </span><span class="s4">(</span><span class="s1">callback</span><span class="s4">, </span><span class="s1">delay</span><span class="s4">) {</span>
    <span class="s3">var </span><span class="s1">leadingCall </span><span class="s4">= </span><span class="s3">false</span><span class="s4">, </span><span class="s1">trailingCall </span><span class="s4">= </span><span class="s3">false</span><span class="s4">, </span><span class="s1">lastCallTime </span><span class="s4">= </span><span class="s7">0</span><span class="s4">;</span>
    <span class="s0">/**</span>
     <span class="s0">* Invokes the original callback function and schedules new invocation if</span>
     <span class="s0">* the &quot;proxy&quot; was called during current request.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">resolvePending</span><span class="s4">() {</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">leadingCall</span><span class="s4">) {</span>
            <span class="s1">leadingCall </span><span class="s4">= </span><span class="s3">false</span><span class="s4">;</span>
            <span class="s1">callback</span><span class="s4">();</span>
        <span class="s4">}</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">trailingCall</span><span class="s4">) {</span>
            <span class="s1">proxy</span><span class="s4">();</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
    <span class="s0">/**</span>
     <span class="s0">* Callback invoked after the specified delay. It will further postpone</span>
     <span class="s0">* invocation of the original function delegating it to the</span>
     <span class="s0">* requestAnimationFrame.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">timeoutCallback</span><span class="s4">() {</span>
        <span class="s1">requestAnimationFrame$1</span><span class="s4">(</span><span class="s1">resolvePending</span><span class="s4">);</span>
    <span class="s4">}</span>
    <span class="s0">/**</span>
     <span class="s0">* Schedules invocation of the original function.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">proxy</span><span class="s4">() {</span>
        <span class="s3">var </span><span class="s1">timeStamp </span><span class="s4">= </span><span class="s1">Date</span><span class="s4">.</span><span class="s1">now</span><span class="s4">();</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">leadingCall</span><span class="s4">) {</span>
            <span class="s2">// Reject immediately following calls.</span>
            <span class="s3">if </span><span class="s4">(</span><span class="s1">timeStamp </span><span class="s4">- </span><span class="s1">lastCallTime </span><span class="s4">&lt; </span><span class="s1">trailingTimeout</span><span class="s4">) {</span>
                <span class="s3">return</span><span class="s4">;</span>
            <span class="s4">}</span>
            <span class="s2">// Schedule new call to be in invoked when the pending one is resolved.</span>
            <span class="s2">// This is important for &quot;transitions&quot; which never actually start</span>
            <span class="s2">// immediately so there is a chance that we might miss one if change</span>
            <span class="s2">// happens amids the pending invocation.</span>
            <span class="s1">trailingCall </span><span class="s4">= </span><span class="s3">true</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s3">else </span><span class="s4">{</span>
            <span class="s1">leadingCall </span><span class="s4">= </span><span class="s3">true</span><span class="s4">;</span>
            <span class="s1">trailingCall </span><span class="s4">= </span><span class="s3">false</span><span class="s4">;</span>
            <span class="s1">setTimeout</span><span class="s4">(</span><span class="s1">timeoutCallback</span><span class="s4">, </span><span class="s1">delay</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s1">lastCallTime </span><span class="s4">= </span><span class="s1">timeStamp</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">proxy</span><span class="s4">;</span>
<span class="s4">}</span>

<span class="s2">// Minimum delay before invoking the update of observers.</span>
<span class="s3">var </span><span class="s1">REFRESH_DELAY </span><span class="s4">= </span><span class="s7">20</span><span class="s4">;</span>
<span class="s2">// A list of substrings of CSS properties used to find transition events that</span>
<span class="s2">// might affect dimensions of observed elements.</span>
<span class="s3">var </span><span class="s1">transitionKeys </span><span class="s4">= [</span><span class="s5">'top'</span><span class="s4">, </span><span class="s5">'right'</span><span class="s4">, </span><span class="s5">'bottom'</span><span class="s4">, </span><span class="s5">'left'</span><span class="s4">, </span><span class="s5">'width'</span><span class="s4">, </span><span class="s5">'height'</span><span class="s4">, </span><span class="s5">'size'</span><span class="s4">, </span><span class="s5">'weight'</span><span class="s4">];</span>
<span class="s2">// Check if MutationObserver is available.</span>
<span class="s3">var </span><span class="s1">mutationObserverSupported </span><span class="s4">= </span><span class="s3">typeof </span><span class="s1">MutationObserver </span><span class="s4">!== </span><span class="s5">'undefined'</span><span class="s4">;</span>
<span class="s0">/**</span>
 <span class="s0">* Singleton controller class which handles updates of ResizeObserver instances.</span>
 <span class="s0">*/</span>
<span class="s3">var </span><span class="s1">ResizeObserverController </span><span class="s4">= </span><span class="s0">/** </span><span class="s6">@class </span><span class="s0">*/ </span><span class="s4">(</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s0">/**</span>
     <span class="s0">* Creates a new instance of ResizeObserverController.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@private</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">ResizeObserverController</span><span class="s4">() {</span>
        <span class="s0">/**</span>
         <span class="s0">* Indicates whether DOM listeners have been added.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@private </span><span class="s0">{boolean}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">connected_ </span><span class="s4">= </span><span class="s3">false</span><span class="s4">;</span>
        <span class="s0">/**</span>
         <span class="s0">* Tells that controller has subscribed for Mutation Events.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@private </span><span class="s0">{boolean}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">mutationEventsAdded_ </span><span class="s4">= </span><span class="s3">false</span><span class="s4">;</span>
        <span class="s0">/**</span>
         <span class="s0">* Keeps reference to the instance of MutationObserver.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@private </span><span class="s0">{MutationObserver}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">mutationsObserver_ </span><span class="s4">= </span><span class="s3">null</span><span class="s4">;</span>
        <span class="s0">/**</span>
         <span class="s0">* A list of connected observers.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@private </span><span class="s0">{Array&lt;ResizeObserverSPI&gt;}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">observers_ </span><span class="s4">= [];</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">onTransitionEnd_ </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">onTransitionEnd_</span><span class="s4">.</span><span class="s1">bind</span><span class="s4">(</span><span class="s3">this</span><span class="s4">);</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">refresh </span><span class="s4">= </span><span class="s1">throttle</span><span class="s4">(</span><span class="s3">this</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">.</span><span class="s1">bind</span><span class="s4">(</span><span class="s3">this</span><span class="s4">), </span><span class="s1">REFRESH_DELAY</span><span class="s4">);</span>
    <span class="s4">}</span>
    <span class="s0">/**</span>
     <span class="s0">* Adds observer to observers list.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{ResizeObserverSPI} observer - Observer to be added.</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">addObserver </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">observer</span><span class="s4">) {</span>
        <span class="s3">if </span><span class="s4">(!~</span><span class="s3">this</span><span class="s4">.</span><span class="s1">observers_</span><span class="s4">.</span><span class="s1">indexOf</span><span class="s4">(</span><span class="s1">observer</span><span class="s4">)) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">observers_</span><span class="s4">.</span><span class="s1">push</span><span class="s4">(</span><span class="s1">observer</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s2">// Add listeners if they haven't been added yet.</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s3">this</span><span class="s4">.</span><span class="s1">connected_</span><span class="s4">) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">connect_</span><span class="s4">();</span>
        <span class="s4">}</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Removes observer from observers list.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{ResizeObserverSPI} observer - Observer to be removed.</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">removeObserver </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">observer</span><span class="s4">) {</span>
        <span class="s3">var </span><span class="s1">observers </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">observers_</span><span class="s4">;</span>
        <span class="s3">var </span><span class="s1">index </span><span class="s4">= </span><span class="s1">observers</span><span class="s4">.</span><span class="s1">indexOf</span><span class="s4">(</span><span class="s1">observer</span><span class="s4">);</span>
        <span class="s2">// Remove observer if it's present in registry.</span>
        <span class="s3">if </span><span class="s4">(~</span><span class="s1">index</span><span class="s4">) {</span>
            <span class="s1">observers</span><span class="s4">.</span><span class="s1">splice</span><span class="s4">(</span><span class="s1">index</span><span class="s4">, </span><span class="s7">1</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s2">// Remove listeners if controller has no connected observers.</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s1">observers</span><span class="s4">.</span><span class="s1">length </span><span class="s4">&amp;&amp; </span><span class="s3">this</span><span class="s4">.</span><span class="s1">connected_</span><span class="s4">) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">disconnect_</span><span class="s4">();</span>
        <span class="s4">}</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Invokes the update of observers. It will continue running updates insofar</span>
     <span class="s0">* it detects changes.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">refresh </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">var </span><span class="s1">changesDetected </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">updateObservers_</span><span class="s4">();</span>
        <span class="s2">// Continue running updates if changes have been detected as there might</span>
        <span class="s2">// be future ones caused by CSS transitions.</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">changesDetected</span><span class="s4">) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">();</span>
        <span class="s4">}</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Updates every observer from observers list and notifies them of queued</span>
     <span class="s0">* entries.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@private</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{boolean} Returns &quot;true&quot; if any observer has detected changes in</span>
     <span class="s0">*      dimensions of it's elements.</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">updateObservers_ </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s2">// Collect observers that have active observations.</span>
        <span class="s3">var </span><span class="s1">activeObservers </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">observers_</span><span class="s4">.</span><span class="s1">filter</span><span class="s4">(</span><span class="s3">function </span><span class="s4">(</span><span class="s1">observer</span><span class="s4">) {</span>
            <span class="s3">return </span><span class="s1">observer</span><span class="s4">.</span><span class="s1">gatherActive</span><span class="s4">(), </span><span class="s1">observer</span><span class="s4">.</span><span class="s1">hasActive</span><span class="s4">();</span>
        <span class="s4">});</span>
        <span class="s2">// Deliver notifications in a separate cycle in order to avoid any</span>
        <span class="s2">// collisions between observers, e.g. when multiple instances of</span>
        <span class="s2">// ResizeObserver are tracking the same element and the callback of one</span>
        <span class="s2">// of them changes content dimensions of the observed target. Sometimes</span>
        <span class="s2">// this may result in notifications being blocked for the rest of observers.</span>
        <span class="s1">activeObservers</span><span class="s4">.</span><span class="s1">forEach</span><span class="s4">(</span><span class="s3">function </span><span class="s4">(</span><span class="s1">observer</span><span class="s4">) { </span><span class="s3">return </span><span class="s1">observer</span><span class="s4">.</span><span class="s1">broadcastActive</span><span class="s4">(); });</span>
        <span class="s3">return </span><span class="s1">activeObservers</span><span class="s4">.</span><span class="s1">length </span><span class="s4">&gt; </span><span class="s7">0</span><span class="s4">;</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Initializes DOM listeners.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@private</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">connect_ </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s2">// Do nothing if running in a non-browser environment or if listeners</span>
        <span class="s2">// have been already added.</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s1">isBrowser </span><span class="s4">|| </span><span class="s3">this</span><span class="s4">.</span><span class="s1">connected_</span><span class="s4">) {</span>
            <span class="s3">return</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s2">// Subscription to the &quot;Transitionend&quot; event is used as a workaround for</span>
        <span class="s2">// delayed transitions. This way it's possible to capture at least the</span>
        <span class="s2">// final state of an element.</span>
        <span class="s1">document</span><span class="s4">.</span><span class="s1">addEventListener</span><span class="s4">(</span><span class="s5">'transitionend'</span><span class="s4">, </span><span class="s3">this</span><span class="s4">.</span><span class="s1">onTransitionEnd_</span><span class="s4">);</span>
        <span class="s1">window</span><span class="s4">.</span><span class="s1">addEventListener</span><span class="s4">(</span><span class="s5">'resize'</span><span class="s4">, </span><span class="s3">this</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">);</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">mutationObserverSupported</span><span class="s4">) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">mutationsObserver_ </span><span class="s4">= </span><span class="s3">new </span><span class="s1">MutationObserver</span><span class="s4">(</span><span class="s3">this</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">);</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">mutationsObserver_</span><span class="s4">.</span><span class="s1">observe</span><span class="s4">(</span><span class="s1">document</span><span class="s4">, {</span>
                <span class="s1">attributes</span><span class="s4">: </span><span class="s3">true</span><span class="s4">,</span>
                <span class="s1">childList</span><span class="s4">: </span><span class="s3">true</span><span class="s4">,</span>
                <span class="s1">characterData</span><span class="s4">: </span><span class="s3">true</span><span class="s4">,</span>
                <span class="s1">subtree</span><span class="s4">: </span><span class="s3">true</span>
            <span class="s4">});</span>
        <span class="s4">}</span>
        <span class="s3">else </span><span class="s4">{</span>
            <span class="s1">document</span><span class="s4">.</span><span class="s1">addEventListener</span><span class="s4">(</span><span class="s5">'DOMSubtreeModified'</span><span class="s4">, </span><span class="s3">this</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">);</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">mutationEventsAdded_ </span><span class="s4">= </span><span class="s3">true</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">connected_ </span><span class="s4">= </span><span class="s3">true</span><span class="s4">;</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Removes DOM listeners.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@private</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">disconnect_ </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s2">// Do nothing if running in a non-browser environment or if listeners</span>
        <span class="s2">// have been already removed.</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s1">isBrowser </span><span class="s4">|| !</span><span class="s3">this</span><span class="s4">.</span><span class="s1">connected_</span><span class="s4">) {</span>
            <span class="s3">return</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s1">document</span><span class="s4">.</span><span class="s1">removeEventListener</span><span class="s4">(</span><span class="s5">'transitionend'</span><span class="s4">, </span><span class="s3">this</span><span class="s4">.</span><span class="s1">onTransitionEnd_</span><span class="s4">);</span>
        <span class="s1">window</span><span class="s4">.</span><span class="s1">removeEventListener</span><span class="s4">(</span><span class="s5">'resize'</span><span class="s4">, </span><span class="s3">this</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">);</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s3">this</span><span class="s4">.</span><span class="s1">mutationsObserver_</span><span class="s4">) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">mutationsObserver_</span><span class="s4">.</span><span class="s1">disconnect</span><span class="s4">();</span>
        <span class="s4">}</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s3">this</span><span class="s4">.</span><span class="s1">mutationEventsAdded_</span><span class="s4">) {</span>
            <span class="s1">document</span><span class="s4">.</span><span class="s1">removeEventListener</span><span class="s4">(</span><span class="s5">'DOMSubtreeModified'</span><span class="s4">, </span><span class="s3">this</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">mutationsObserver_ </span><span class="s4">= </span><span class="s3">null</span><span class="s4">;</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">mutationEventsAdded_ </span><span class="s4">= </span><span class="s3">false</span><span class="s4">;</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">connected_ </span><span class="s4">= </span><span class="s3">false</span><span class="s4">;</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* &quot;Transitionend&quot; event handler.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@private</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{TransitionEvent} event</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">onTransitionEnd_ </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">_a</span><span class="s4">) {</span>
        <span class="s3">var </span><span class="s1">_b </span><span class="s4">= </span><span class="s1">_a</span><span class="s4">.</span><span class="s1">propertyName</span><span class="s4">, </span><span class="s1">propertyName </span><span class="s4">= </span><span class="s1">_b </span><span class="s4">=== </span><span class="s3">void </span><span class="s7">0 </span><span class="s4">? </span><span class="s5">'' </span><span class="s4">: </span><span class="s1">_b</span><span class="s4">;</span>
        <span class="s2">// Detect whether transition may affect dimensions of an element.</span>
        <span class="s3">var </span><span class="s1">isReflowProperty </span><span class="s4">= </span><span class="s1">transitionKeys</span><span class="s4">.</span><span class="s1">some</span><span class="s4">(</span><span class="s3">function </span><span class="s4">(</span><span class="s1">key</span><span class="s4">) {</span>
            <span class="s3">return </span><span class="s4">!!~</span><span class="s1">propertyName</span><span class="s4">.</span><span class="s1">indexOf</span><span class="s4">(</span><span class="s1">key</span><span class="s4">);</span>
        <span class="s4">});</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">isReflowProperty</span><span class="s4">) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">();</span>
        <span class="s4">}</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Returns instance of the ResizeObserverController.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{ResizeObserverController}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">getInstance </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s3">this</span><span class="s4">.</span><span class="s1">instance_</span><span class="s4">) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">instance_ </span><span class="s4">= </span><span class="s3">new </span><span class="s1">ResizeObserverController</span><span class="s4">();</span>
        <span class="s4">}</span>
        <span class="s3">return this</span><span class="s4">.</span><span class="s1">instance_</span><span class="s4">;</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Holds reference to the controller's instance.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@private </span><span class="s0">{ResizeObserverController}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">instance_ </span><span class="s4">= </span><span class="s3">null</span><span class="s4">;</span>
    <span class="s3">return </span><span class="s1">ResizeObserverController</span><span class="s4">;</span>
<span class="s4">}());</span>

<span class="s0">/**</span>
 <span class="s0">* Defines non-writable/enumerable properties of the provided target object.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Object} target - Object for which to define properties.</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Object} props - Properties to be defined.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{Object} Target object.</span>
 <span class="s0">*/</span>
<span class="s3">var </span><span class="s1">defineConfigurable </span><span class="s4">= (</span><span class="s3">function </span><span class="s4">(</span><span class="s1">target</span><span class="s4">, </span><span class="s1">props</span><span class="s4">) {</span>
    <span class="s3">for </span><span class="s4">(</span><span class="s3">var </span><span class="s1">_i </span><span class="s4">= </span><span class="s7">0</span><span class="s4">, </span><span class="s1">_a </span><span class="s4">= </span><span class="s1">Object</span><span class="s4">.</span><span class="s1">keys</span><span class="s4">(</span><span class="s1">props</span><span class="s4">); </span><span class="s1">_i </span><span class="s4">&lt; </span><span class="s1">_a</span><span class="s4">.</span><span class="s1">length</span><span class="s4">; </span><span class="s1">_i</span><span class="s4">++) {</span>
        <span class="s3">var </span><span class="s1">key </span><span class="s4">= </span><span class="s1">_a</span><span class="s4">[</span><span class="s1">_i</span><span class="s4">];</span>
        <span class="s1">Object</span><span class="s4">.</span><span class="s1">defineProperty</span><span class="s4">(</span><span class="s1">target</span><span class="s4">, </span><span class="s1">key</span><span class="s4">, {</span>
            <span class="s1">value</span><span class="s4">: </span><span class="s1">props</span><span class="s4">[</span><span class="s1">key</span><span class="s4">],</span>
            <span class="s1">enumerable</span><span class="s4">: </span><span class="s3">false</span><span class="s4">,</span>
            <span class="s1">writable</span><span class="s4">: </span><span class="s3">false</span><span class="s4">,</span>
            <span class="s1">configurable</span><span class="s4">: </span><span class="s3">true</span>
        <span class="s4">});</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">target</span><span class="s4">;</span>
<span class="s4">});</span>

<span class="s0">/**</span>
 <span class="s0">* Returns the global object associated with provided element.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Object} target</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{Object}</span>
 <span class="s0">*/</span>
<span class="s3">var </span><span class="s1">getWindowOf </span><span class="s4">= (</span><span class="s3">function </span><span class="s4">(</span><span class="s1">target</span><span class="s4">) {</span>
    <span class="s2">// Assume that the element is an instance of Node, which means that it</span>
    <span class="s2">// has the &quot;ownerDocument&quot; property from which we can retrieve a</span>
    <span class="s2">// corresponding global object.</span>
    <span class="s3">var </span><span class="s1">ownerGlobal </span><span class="s4">= </span><span class="s1">target </span><span class="s4">&amp;&amp; </span><span class="s1">target</span><span class="s4">.</span><span class="s1">ownerDocument </span><span class="s4">&amp;&amp; </span><span class="s1">target</span><span class="s4">.</span><span class="s1">ownerDocument</span><span class="s4">.</span><span class="s1">defaultView</span><span class="s4">;</span>
    <span class="s2">// Return the local global object if it's not possible extract one from</span>
    <span class="s2">// provided element.</span>
    <span class="s3">return </span><span class="s1">ownerGlobal </span><span class="s4">|| </span><span class="s1">global$1</span><span class="s4">;</span>
<span class="s4">});</span>

<span class="s2">// Placeholder of an empty content rectangle.</span>
<span class="s3">var </span><span class="s1">emptyRect </span><span class="s4">= </span><span class="s1">createRectInit</span><span class="s4">(</span><span class="s7">0</span><span class="s4">, </span><span class="s7">0</span><span class="s4">, </span><span class="s7">0</span><span class="s4">, </span><span class="s7">0</span><span class="s4">);</span>
<span class="s0">/**</span>
 <span class="s0">* Converts provided string to a number.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{number|string} value</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{number}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">toFloat</span><span class="s4">(</span><span class="s1">value</span><span class="s4">) {</span>
    <span class="s3">return </span><span class="s1">parseFloat</span><span class="s4">(</span><span class="s1">value</span><span class="s4">) || </span><span class="s7">0</span><span class="s4">;</span>
<span class="s4">}</span>
<span class="s0">/**</span>
 <span class="s0">* Extracts borders size from provided styles.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{CSSStyleDeclaration} styles</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{...string} positions - Borders positions (top, right, ...)</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{number}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">getBordersSize</span><span class="s4">(</span><span class="s1">styles</span><span class="s4">) {</span>
    <span class="s3">var </span><span class="s1">positions </span><span class="s4">= [];</span>
    <span class="s3">for </span><span class="s4">(</span><span class="s3">var </span><span class="s1">_i </span><span class="s4">= </span><span class="s7">1</span><span class="s4">; </span><span class="s1">_i </span><span class="s4">&lt; </span><span class="s1">arguments</span><span class="s4">.</span><span class="s1">length</span><span class="s4">; </span><span class="s1">_i</span><span class="s4">++) {</span>
        <span class="s1">positions</span><span class="s4">[</span><span class="s1">_i </span><span class="s4">- </span><span class="s7">1</span><span class="s4">] = </span><span class="s1">arguments</span><span class="s4">[</span><span class="s1">_i</span><span class="s4">];</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">positions</span><span class="s4">.</span><span class="s1">reduce</span><span class="s4">(</span><span class="s3">function </span><span class="s4">(</span><span class="s1">size</span><span class="s4">, </span><span class="s1">position</span><span class="s4">) {</span>
        <span class="s3">var </span><span class="s1">value </span><span class="s4">= </span><span class="s1">styles</span><span class="s4">[</span><span class="s5">'border-' </span><span class="s4">+ </span><span class="s1">position </span><span class="s4">+ </span><span class="s5">'-width'</span><span class="s4">];</span>
        <span class="s3">return </span><span class="s1">size </span><span class="s4">+ </span><span class="s1">toFloat</span><span class="s4">(</span><span class="s1">value</span><span class="s4">);</span>
    <span class="s4">}, </span><span class="s7">0</span><span class="s4">);</span>
<span class="s4">}</span>
<span class="s0">/**</span>
 <span class="s0">* Extracts paddings sizes from provided styles.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{CSSStyleDeclaration} styles</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{Object} Paddings box.</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">getPaddings</span><span class="s4">(</span><span class="s1">styles</span><span class="s4">) {</span>
    <span class="s3">var </span><span class="s1">positions </span><span class="s4">= [</span><span class="s5">'top'</span><span class="s4">, </span><span class="s5">'right'</span><span class="s4">, </span><span class="s5">'bottom'</span><span class="s4">, </span><span class="s5">'left'</span><span class="s4">];</span>
    <span class="s3">var </span><span class="s1">paddings </span><span class="s4">= {};</span>
    <span class="s3">for </span><span class="s4">(</span><span class="s3">var </span><span class="s1">_i </span><span class="s4">= </span><span class="s7">0</span><span class="s4">, </span><span class="s1">positions_1 </span><span class="s4">= </span><span class="s1">positions</span><span class="s4">; </span><span class="s1">_i </span><span class="s4">&lt; </span><span class="s1">positions_1</span><span class="s4">.</span><span class="s1">length</span><span class="s4">; </span><span class="s1">_i</span><span class="s4">++) {</span>
        <span class="s3">var </span><span class="s1">position </span><span class="s4">= </span><span class="s1">positions_1</span><span class="s4">[</span><span class="s1">_i</span><span class="s4">];</span>
        <span class="s3">var </span><span class="s1">value </span><span class="s4">= </span><span class="s1">styles</span><span class="s4">[</span><span class="s5">'padding-' </span><span class="s4">+ </span><span class="s1">position</span><span class="s4">];</span>
        <span class="s1">paddings</span><span class="s4">[</span><span class="s1">position</span><span class="s4">] = </span><span class="s1">toFloat</span><span class="s4">(</span><span class="s1">value</span><span class="s4">);</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">paddings</span><span class="s4">;</span>
<span class="s4">}</span>
<span class="s0">/**</span>
 <span class="s0">* Calculates content rectangle of provided SVG element.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{SVGGraphicsElement} target - Element content rectangle of which needs</span>
 <span class="s0">*      to be calculated.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{DOMRectInit}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">getSVGContentRect</span><span class="s4">(</span><span class="s1">target</span><span class="s4">) {</span>
    <span class="s3">var </span><span class="s1">bbox </span><span class="s4">= </span><span class="s1">target</span><span class="s4">.</span><span class="s1">getBBox</span><span class="s4">();</span>
    <span class="s3">return </span><span class="s1">createRectInit</span><span class="s4">(</span><span class="s7">0</span><span class="s4">, </span><span class="s7">0</span><span class="s4">, </span><span class="s1">bbox</span><span class="s4">.</span><span class="s1">width</span><span class="s4">, </span><span class="s1">bbox</span><span class="s4">.</span><span class="s1">height</span><span class="s4">);</span>
<span class="s4">}</span>
<span class="s0">/**</span>
 <span class="s0">* Calculates content rectangle of provided HTMLElement.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{HTMLElement} target - Element for which to calculate the content rectangle.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{DOMRectInit}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">getHTMLElementContentRect</span><span class="s4">(</span><span class="s1">target</span><span class="s4">) {</span>
    <span class="s2">// Client width &amp; height properties can't be</span>
    <span class="s2">// used exclusively as they provide rounded values.</span>
    <span class="s3">var </span><span class="s1">clientWidth </span><span class="s4">= </span><span class="s1">target</span><span class="s4">.</span><span class="s1">clientWidth</span><span class="s4">, </span><span class="s1">clientHeight </span><span class="s4">= </span><span class="s1">target</span><span class="s4">.</span><span class="s1">clientHeight</span><span class="s4">;</span>
    <span class="s2">// By this condition we can catch all non-replaced inline, hidden and</span>
    <span class="s2">// detached elements. Though elements with width &amp; height properties less</span>
    <span class="s2">// than 0.5 will be discarded as well.</span>
    <span class="s2">//</span>
    <span class="s2">// Without it we would need to implement separate methods for each of</span>
    <span class="s2">// those cases and it's not possible to perform a precise and performance</span>
    <span class="s2">// effective test for hidden elements. E.g. even jQuery's ':visible' filter</span>
    <span class="s2">// gives wrong results for elements with width &amp; height less than 0.5.</span>
    <span class="s3">if </span><span class="s4">(!</span><span class="s1">clientWidth </span><span class="s4">&amp;&amp; !</span><span class="s1">clientHeight</span><span class="s4">) {</span>
        <span class="s3">return </span><span class="s1">emptyRect</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s3">var </span><span class="s1">styles </span><span class="s4">= </span><span class="s1">getWindowOf</span><span class="s4">(</span><span class="s1">target</span><span class="s4">).</span><span class="s1">getComputedStyle</span><span class="s4">(</span><span class="s1">target</span><span class="s4">);</span>
    <span class="s3">var </span><span class="s1">paddings </span><span class="s4">= </span><span class="s1">getPaddings</span><span class="s4">(</span><span class="s1">styles</span><span class="s4">);</span>
    <span class="s3">var </span><span class="s1">horizPad </span><span class="s4">= </span><span class="s1">paddings</span><span class="s4">.</span><span class="s1">left </span><span class="s4">+ </span><span class="s1">paddings</span><span class="s4">.</span><span class="s1">right</span><span class="s4">;</span>
    <span class="s3">var </span><span class="s1">vertPad </span><span class="s4">= </span><span class="s1">paddings</span><span class="s4">.</span><span class="s1">top </span><span class="s4">+ </span><span class="s1">paddings</span><span class="s4">.</span><span class="s1">bottom</span><span class="s4">;</span>
    <span class="s2">// Computed styles of width &amp; height are being used because they are the</span>
    <span class="s2">// only dimensions available to JS that contain non-rounded values. It could</span>
    <span class="s2">// be possible to utilize the getBoundingClientRect if only it's data wasn't</span>
    <span class="s2">// affected by CSS transformations let alone paddings, borders and scroll bars.</span>
    <span class="s3">var </span><span class="s1">width </span><span class="s4">= </span><span class="s1">toFloat</span><span class="s4">(</span><span class="s1">styles</span><span class="s4">.</span><span class="s1">width</span><span class="s4">), </span><span class="s1">height </span><span class="s4">= </span><span class="s1">toFloat</span><span class="s4">(</span><span class="s1">styles</span><span class="s4">.</span><span class="s1">height</span><span class="s4">);</span>
    <span class="s2">// Width &amp; height include paddings and borders when the 'border-box' box</span>
    <span class="s2">// model is applied (except for IE).</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s1">styles</span><span class="s4">.</span><span class="s1">boxSizing </span><span class="s4">=== </span><span class="s5">'border-box'</span><span class="s4">) {</span>
        <span class="s2">// Following conditions are required to handle Internet Explorer which</span>
        <span class="s2">// doesn't include paddings and borders to computed CSS dimensions.</span>
        <span class="s2">//</span>
        <span class="s2">// We can say that if CSS dimensions + paddings are equal to the &quot;client&quot;</span>
        <span class="s2">// properties then it's either IE, and thus we don't need to subtract</span>
        <span class="s2">// anything, or an element merely doesn't have paddings/borders styles.</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">Math</span><span class="s4">.</span><span class="s1">round</span><span class="s4">(</span><span class="s1">width </span><span class="s4">+ </span><span class="s1">horizPad</span><span class="s4">) !== </span><span class="s1">clientWidth</span><span class="s4">) {</span>
            <span class="s1">width </span><span class="s4">-= </span><span class="s1">getBordersSize</span><span class="s4">(</span><span class="s1">styles</span><span class="s4">, </span><span class="s5">'left'</span><span class="s4">, </span><span class="s5">'right'</span><span class="s4">) + </span><span class="s1">horizPad</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">Math</span><span class="s4">.</span><span class="s1">round</span><span class="s4">(</span><span class="s1">height </span><span class="s4">+ </span><span class="s1">vertPad</span><span class="s4">) !== </span><span class="s1">clientHeight</span><span class="s4">) {</span>
            <span class="s1">height </span><span class="s4">-= </span><span class="s1">getBordersSize</span><span class="s4">(</span><span class="s1">styles</span><span class="s4">, </span><span class="s5">'top'</span><span class="s4">, </span><span class="s5">'bottom'</span><span class="s4">) + </span><span class="s1">vertPad</span><span class="s4">;</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
    <span class="s2">// Following steps can't be applied to the document's root element as its</span>
    <span class="s2">// client[Width/Height] properties represent viewport area of the window.</span>
    <span class="s2">// Besides, it's as well not necessary as the &lt;html&gt; itself neither has</span>
    <span class="s2">// rendered scroll bars nor it can be clipped.</span>
    <span class="s3">if </span><span class="s4">(!</span><span class="s1">isDocumentElement</span><span class="s4">(</span><span class="s1">target</span><span class="s4">)) {</span>
        <span class="s2">// In some browsers (only in Firefox, actually) CSS width &amp; height</span>
        <span class="s2">// include scroll bars size which can be removed at this step as scroll</span>
        <span class="s2">// bars are the only difference between rounded dimensions + paddings</span>
        <span class="s2">// and &quot;client&quot; properties, though that is not always true in Chrome.</span>
        <span class="s3">var </span><span class="s1">vertScrollbar </span><span class="s4">= </span><span class="s1">Math</span><span class="s4">.</span><span class="s1">round</span><span class="s4">(</span><span class="s1">width </span><span class="s4">+ </span><span class="s1">horizPad</span><span class="s4">) - </span><span class="s1">clientWidth</span><span class="s4">;</span>
        <span class="s3">var </span><span class="s1">horizScrollbar </span><span class="s4">= </span><span class="s1">Math</span><span class="s4">.</span><span class="s1">round</span><span class="s4">(</span><span class="s1">height </span><span class="s4">+ </span><span class="s1">vertPad</span><span class="s4">) - </span><span class="s1">clientHeight</span><span class="s4">;</span>
        <span class="s2">// Chrome has a rather weird rounding of &quot;client&quot; properties.</span>
        <span class="s2">// E.g. for an element with content width of 314.2px it sometimes gives</span>
        <span class="s2">// the client width of 315px and for the width of 314.7px it may give</span>
        <span class="s2">// 314px. And it doesn't happen all the time. So just ignore this delta</span>
        <span class="s2">// as a non-relevant.</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">Math</span><span class="s4">.</span><span class="s1">abs</span><span class="s4">(</span><span class="s1">vertScrollbar</span><span class="s4">) !== </span><span class="s7">1</span><span class="s4">) {</span>
            <span class="s1">width </span><span class="s4">-= </span><span class="s1">vertScrollbar</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">Math</span><span class="s4">.</span><span class="s1">abs</span><span class="s4">(</span><span class="s1">horizScrollbar</span><span class="s4">) !== </span><span class="s7">1</span><span class="s4">) {</span>
            <span class="s1">height </span><span class="s4">-= </span><span class="s1">horizScrollbar</span><span class="s4">;</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">createRectInit</span><span class="s4">(</span><span class="s1">paddings</span><span class="s4">.</span><span class="s1">left</span><span class="s4">, </span><span class="s1">paddings</span><span class="s4">.</span><span class="s1">top</span><span class="s4">, </span><span class="s1">width</span><span class="s4">, </span><span class="s1">height</span><span class="s4">);</span>
<span class="s4">}</span>
<span class="s0">/**</span>
 <span class="s0">* Checks whether provided element is an instance of the SVGGraphicsElement.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Element} target - Element to be checked.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{boolean}</span>
 <span class="s0">*/</span>
<span class="s3">var </span><span class="s1">isSVGGraphicsElement </span><span class="s4">= (</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s2">// Some browsers, namely IE and Edge, don't have the SVGGraphicsElement</span>
    <span class="s2">// interface.</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">SVGGraphicsElement </span><span class="s4">!== </span><span class="s5">'undefined'</span><span class="s4">) {</span>
        <span class="s3">return function </span><span class="s4">(</span><span class="s1">target</span><span class="s4">) { </span><span class="s3">return </span><span class="s1">target </span><span class="s3">instanceof </span><span class="s1">getWindowOf</span><span class="s4">(</span><span class="s1">target</span><span class="s4">).</span><span class="s1">SVGGraphicsElement</span><span class="s4">; };</span>
    <span class="s4">}</span>
    <span class="s2">// If it's so, then check that element is at least an instance of the</span>
    <span class="s2">// SVGElement and that it has the &quot;getBBox&quot; method.</span>
    <span class="s2">// eslint-disable-next-line no-extra-parens</span>
    <span class="s3">return function </span><span class="s4">(</span><span class="s1">target</span><span class="s4">) { </span><span class="s3">return </span><span class="s4">(</span><span class="s1">target </span><span class="s3">instanceof </span><span class="s1">getWindowOf</span><span class="s4">(</span><span class="s1">target</span><span class="s4">).</span><span class="s1">SVGElement </span><span class="s4">&amp;&amp;</span>
        <span class="s3">typeof </span><span class="s1">target</span><span class="s4">.</span><span class="s1">getBBox </span><span class="s4">=== </span><span class="s5">'function'</span><span class="s4">); };</span>
<span class="s4">})();</span>
<span class="s0">/**</span>
 <span class="s0">* Checks whether provided element is a document element (&lt;html&gt;).</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Element} target - Element to be checked.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{boolean}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">isDocumentElement</span><span class="s4">(</span><span class="s1">target</span><span class="s4">) {</span>
    <span class="s3">return </span><span class="s1">target </span><span class="s4">=== </span><span class="s1">getWindowOf</span><span class="s4">(</span><span class="s1">target</span><span class="s4">).</span><span class="s1">document</span><span class="s4">.</span><span class="s1">documentElement</span><span class="s4">;</span>
<span class="s4">}</span>
<span class="s0">/**</span>
 <span class="s0">* Calculates an appropriate content rectangle for provided html or svg element.</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Element} target - Element content rectangle of which needs to be calculated.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{DOMRectInit}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">getContentRect</span><span class="s4">(</span><span class="s1">target</span><span class="s4">) {</span>
    <span class="s3">if </span><span class="s4">(!</span><span class="s1">isBrowser</span><span class="s4">) {</span>
        <span class="s3">return </span><span class="s1">emptyRect</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s1">isSVGGraphicsElement</span><span class="s4">(</span><span class="s1">target</span><span class="s4">)) {</span>
        <span class="s3">return </span><span class="s1">getSVGContentRect</span><span class="s4">(</span><span class="s1">target</span><span class="s4">);</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">getHTMLElementContentRect</span><span class="s4">(</span><span class="s1">target</span><span class="s4">);</span>
<span class="s4">}</span>
<span class="s0">/**</span>
 <span class="s0">* Creates rectangle with an interface of the DOMRectReadOnly.</span>
 <span class="s0">* Spec: https://drafts.fxtf.org/geometry/#domrectreadonly</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{DOMRectReadOnly}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">createReadOnlyRect</span><span class="s4">(</span><span class="s1">_a</span><span class="s4">) {</span>
    <span class="s3">var </span><span class="s1">x </span><span class="s4">= </span><span class="s1">_a</span><span class="s4">.</span><span class="s1">x</span><span class="s4">, </span><span class="s1">y </span><span class="s4">= </span><span class="s1">_a</span><span class="s4">.</span><span class="s1">y</span><span class="s4">, </span><span class="s1">width </span><span class="s4">= </span><span class="s1">_a</span><span class="s4">.</span><span class="s1">width</span><span class="s4">, </span><span class="s1">height </span><span class="s4">= </span><span class="s1">_a</span><span class="s4">.</span><span class="s1">height</span><span class="s4">;</span>
    <span class="s2">// If DOMRectReadOnly is available use it as a prototype for the rectangle.</span>
    <span class="s3">var </span><span class="s1">Constr </span><span class="s4">= </span><span class="s3">typeof </span><span class="s1">DOMRectReadOnly </span><span class="s4">!== </span><span class="s5">'undefined' </span><span class="s4">? </span><span class="s1">DOMRectReadOnly </span><span class="s4">: </span><span class="s1">Object</span><span class="s4">;</span>
    <span class="s3">var </span><span class="s1">rect </span><span class="s4">= </span><span class="s1">Object</span><span class="s4">.</span><span class="s1">create</span><span class="s4">(</span><span class="s1">Constr</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">);</span>
    <span class="s2">// Rectangle's properties are not writable and non-enumerable.</span>
    <span class="s1">defineConfigurable</span><span class="s4">(</span><span class="s1">rect</span><span class="s4">, {</span>
        <span class="s1">x</span><span class="s4">: </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">: </span><span class="s1">y</span><span class="s4">, </span><span class="s1">width</span><span class="s4">: </span><span class="s1">width</span><span class="s4">, </span><span class="s1">height</span><span class="s4">: </span><span class="s1">height</span><span class="s4">,</span>
        <span class="s1">top</span><span class="s4">: </span><span class="s1">y</span><span class="s4">,</span>
        <span class="s1">right</span><span class="s4">: </span><span class="s1">x </span><span class="s4">+ </span><span class="s1">width</span><span class="s4">,</span>
        <span class="s1">bottom</span><span class="s4">: </span><span class="s1">height </span><span class="s4">+ </span><span class="s1">y</span><span class="s4">,</span>
        <span class="s1">left</span><span class="s4">: </span><span class="s1">x</span>
    <span class="s4">});</span>
    <span class="s3">return </span><span class="s1">rect</span><span class="s4">;</span>
<span class="s4">}</span>
<span class="s0">/**</span>
 <span class="s0">* Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.</span>
 <span class="s0">* Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit</span>
 <span class="s0">*</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{number} x - X coordinate.</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{number} y - Y coordinate.</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{number} width - Rectangle's width.</span>
 <span class="s0">* </span><span class="s6">@param </span><span class="s0">{number} height - Rectangle's height.</span>
 <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{DOMRectInit}</span>
 <span class="s0">*/</span>
<span class="s3">function </span><span class="s1">createRectInit</span><span class="s4">(</span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">width</span><span class="s4">, </span><span class="s1">height</span><span class="s4">) {</span>
    <span class="s3">return </span><span class="s4">{ </span><span class="s1">x</span><span class="s4">: </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">: </span><span class="s1">y</span><span class="s4">, </span><span class="s1">width</span><span class="s4">: </span><span class="s1">width</span><span class="s4">, </span><span class="s1">height</span><span class="s4">: </span><span class="s1">height </span><span class="s4">};</span>
<span class="s4">}</span>

<span class="s0">/**</span>
 <span class="s0">* Class that is responsible for computations of the content rectangle of</span>
 <span class="s0">* provided DOM element and for keeping track of it's changes.</span>
 <span class="s0">*/</span>
<span class="s3">var </span><span class="s1">ResizeObservation </span><span class="s4">= </span><span class="s0">/** </span><span class="s6">@class </span><span class="s0">*/ </span><span class="s4">(</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s0">/**</span>
     <span class="s0">* Creates an instance of ResizeObservation.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Element} target - Element to be observed.</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">ResizeObservation</span><span class="s4">(</span><span class="s1">target</span><span class="s4">) {</span>
        <span class="s0">/**</span>
         <span class="s0">* Broadcasted width of content rectangle.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@type </span><span class="s0">{number}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">broadcastWidth </span><span class="s4">= </span><span class="s7">0</span><span class="s4">;</span>
        <span class="s0">/**</span>
         <span class="s0">* Broadcasted height of content rectangle.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@type </span><span class="s0">{number}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">broadcastHeight </span><span class="s4">= </span><span class="s7">0</span><span class="s4">;</span>
        <span class="s0">/**</span>
         <span class="s0">* Reference to the last observed content rectangle.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@private </span><span class="s0">{DOMRectInit}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">contentRect_ </span><span class="s4">= </span><span class="s1">createRectInit</span><span class="s4">(</span><span class="s7">0</span><span class="s4">, </span><span class="s7">0</span><span class="s4">, </span><span class="s7">0</span><span class="s4">, </span><span class="s7">0</span><span class="s4">);</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">target </span><span class="s4">= </span><span class="s1">target</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s0">/**</span>
     <span class="s0">* Updates content rectangle and tells whether it's width or height properties</span>
     <span class="s0">* have changed since the last broadcast.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{boolean}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObservation</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">isActive </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">var </span><span class="s1">rect </span><span class="s4">= </span><span class="s1">getContentRect</span><span class="s4">(</span><span class="s3">this</span><span class="s4">.</span><span class="s1">target</span><span class="s4">);</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">contentRect_ </span><span class="s4">= </span><span class="s1">rect</span><span class="s4">;</span>
        <span class="s3">return </span><span class="s4">(</span><span class="s1">rect</span><span class="s4">.</span><span class="s1">width </span><span class="s4">!== </span><span class="s3">this</span><span class="s4">.</span><span class="s1">broadcastWidth </span><span class="s4">||</span>
            <span class="s1">rect</span><span class="s4">.</span><span class="s1">height </span><span class="s4">!== </span><span class="s3">this</span><span class="s4">.</span><span class="s1">broadcastHeight</span><span class="s4">);</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Updates 'broadcastWidth' and 'broadcastHeight' properties with a data</span>
     <span class="s0">* from the corresponding properties of the last observed content rectangle.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{DOMRectInit} Last observed content rectangle.</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObservation</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">broadcastRect </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">var </span><span class="s1">rect </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">contentRect_</span><span class="s4">;</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">broadcastWidth </span><span class="s4">= </span><span class="s1">rect</span><span class="s4">.</span><span class="s1">width</span><span class="s4">;</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">broadcastHeight </span><span class="s4">= </span><span class="s1">rect</span><span class="s4">.</span><span class="s1">height</span><span class="s4">;</span>
        <span class="s3">return </span><span class="s1">rect</span><span class="s4">;</span>
    <span class="s4">};</span>
    <span class="s3">return </span><span class="s1">ResizeObservation</span><span class="s4">;</span>
<span class="s4">}());</span>

<span class="s3">var </span><span class="s1">ResizeObserverEntry </span><span class="s4">= </span><span class="s0">/** </span><span class="s6">@class </span><span class="s0">*/ </span><span class="s4">(</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s0">/**</span>
     <span class="s0">* Creates an instance of ResizeObserverEntry.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Element} target - Element that is being observed.</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{DOMRectInit} rectInit - Data of the element's content rectangle.</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">ResizeObserverEntry</span><span class="s4">(</span><span class="s1">target</span><span class="s4">, </span><span class="s1">rectInit</span><span class="s4">) {</span>
        <span class="s3">var </span><span class="s1">contentRect </span><span class="s4">= </span><span class="s1">createReadOnlyRect</span><span class="s4">(</span><span class="s1">rectInit</span><span class="s4">);</span>
        <span class="s2">// According to the specification following properties are not writable</span>
        <span class="s2">// and are also not enumerable in the native implementation.</span>
        <span class="s2">//</span>
        <span class="s2">// Property accessors are not being used as they'd require to define a</span>
        <span class="s2">// private WeakMap storage which may cause memory leaks in browsers that</span>
        <span class="s2">// don't support this type of collections.</span>
        <span class="s1">defineConfigurable</span><span class="s4">(</span><span class="s3">this</span><span class="s4">, { </span><span class="s1">target</span><span class="s4">: </span><span class="s1">target</span><span class="s4">, </span><span class="s1">contentRect</span><span class="s4">: </span><span class="s1">contentRect </span><span class="s4">});</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">ResizeObserverEntry</span><span class="s4">;</span>
<span class="s4">}());</span>

<span class="s3">var </span><span class="s1">ResizeObserverSPI </span><span class="s4">= </span><span class="s0">/** </span><span class="s6">@class </span><span class="s0">*/ </span><span class="s4">(</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s0">/**</span>
     <span class="s0">* Creates a new instance of ResizeObserver.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{ResizeObserverCallback} callback - Callback function that is invoked</span>
     <span class="s0">*      when one of the observed elements changes it's content dimensions.</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{ResizeObserverController} controller - Controller instance which</span>
     <span class="s0">*      is responsible for the updates of observer.</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{ResizeObserver} callbackCtx - Reference to the public</span>
     <span class="s0">*      ResizeObserver instance which will be passed to callback function.</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">ResizeObserverSPI</span><span class="s4">(</span><span class="s1">callback</span><span class="s4">, </span><span class="s1">controller</span><span class="s4">, </span><span class="s1">callbackCtx</span><span class="s4">) {</span>
        <span class="s0">/**</span>
         <span class="s0">* Collection of resize observations that have detected changes in dimensions</span>
         <span class="s0">* of elements.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@private </span><span class="s0">{Array&lt;ResizeObservation&gt;}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">activeObservations_ </span><span class="s4">= [];</span>
        <span class="s0">/**</span>
         <span class="s0">* Registry of the ResizeObservation instances.</span>
         <span class="s0">*</span>
         <span class="s0">* </span><span class="s6">@private </span><span class="s0">{Map&lt;Element, ResizeObservation&gt;}</span>
         <span class="s0">*/</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">observations_ </span><span class="s4">= </span><span class="s3">new </span><span class="s1">MapShim</span><span class="s4">();</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">callback </span><span class="s4">!== </span><span class="s5">'function'</span><span class="s4">) {</span>
            <span class="s3">throw new </span><span class="s1">TypeError</span><span class="s4">(</span><span class="s5">'The callback provided as parameter 1 is not a function.'</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">callback_ </span><span class="s4">= </span><span class="s1">callback</span><span class="s4">;</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">controller_ </span><span class="s4">= </span><span class="s1">controller</span><span class="s4">;</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">callbackCtx_ </span><span class="s4">= </span><span class="s1">callbackCtx</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s0">/**</span>
     <span class="s0">* Starts observing provided element.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Element} target - Element to be observed.</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverSPI</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">observe </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">target</span><span class="s4">) {</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s1">arguments</span><span class="s4">.</span><span class="s1">length</span><span class="s4">) {</span>
            <span class="s3">throw new </span><span class="s1">TypeError</span><span class="s4">(</span><span class="s5">'1 argument required, but only 0 present.'</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s2">// Do nothing if current environment doesn't have the Element interface.</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">Element </span><span class="s4">=== </span><span class="s5">'undefined' </span><span class="s4">|| !(</span><span class="s1">Element </span><span class="s3">instanceof </span><span class="s1">Object</span><span class="s4">)) {</span>
            <span class="s3">return</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s3">if </span><span class="s4">(!(</span><span class="s1">target </span><span class="s3">instanceof </span><span class="s1">getWindowOf</span><span class="s4">(</span><span class="s1">target</span><span class="s4">).</span><span class="s1">Element</span><span class="s4">)) {</span>
            <span class="s3">throw new </span><span class="s1">TypeError</span><span class="s4">(</span><span class="s5">'parameter 1 is not of type &quot;Element&quot;.'</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s3">var </span><span class="s1">observations </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">observations_</span><span class="s4">;</span>
        <span class="s2">// Do nothing if element is already being observed.</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s1">observations</span><span class="s4">.</span><span class="s1">has</span><span class="s4">(</span><span class="s1">target</span><span class="s4">)) {</span>
            <span class="s3">return</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s1">observations</span><span class="s4">.</span><span class="s1">set</span><span class="s4">(</span><span class="s1">target</span><span class="s4">, </span><span class="s3">new </span><span class="s1">ResizeObservation</span><span class="s4">(</span><span class="s1">target</span><span class="s4">));</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">controller_</span><span class="s4">.</span><span class="s1">addObserver</span><span class="s4">(</span><span class="s3">this</span><span class="s4">);</span>
        <span class="s2">// Force the update of observations.</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">controller_</span><span class="s4">.</span><span class="s1">refresh</span><span class="s4">();</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Stops observing provided element.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{Element} target - Element to stop observing.</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverSPI</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">unobserve </span><span class="s4">= </span><span class="s3">function </span><span class="s4">(</span><span class="s1">target</span><span class="s4">) {</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s1">arguments</span><span class="s4">.</span><span class="s1">length</span><span class="s4">) {</span>
            <span class="s3">throw new </span><span class="s1">TypeError</span><span class="s4">(</span><span class="s5">'1 argument required, but only 0 present.'</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s2">// Do nothing if current environment doesn't have the Element interface.</span>
        <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">Element </span><span class="s4">=== </span><span class="s5">'undefined' </span><span class="s4">|| !(</span><span class="s1">Element </span><span class="s3">instanceof </span><span class="s1">Object</span><span class="s4">)) {</span>
            <span class="s3">return</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s3">if </span><span class="s4">(!(</span><span class="s1">target </span><span class="s3">instanceof </span><span class="s1">getWindowOf</span><span class="s4">(</span><span class="s1">target</span><span class="s4">).</span><span class="s1">Element</span><span class="s4">)) {</span>
            <span class="s3">throw new </span><span class="s1">TypeError</span><span class="s4">(</span><span class="s5">'parameter 1 is not of type &quot;Element&quot;.'</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s3">var </span><span class="s1">observations </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">observations_</span><span class="s4">;</span>
        <span class="s2">// Do nothing if element is not being observed.</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s1">observations</span><span class="s4">.</span><span class="s1">has</span><span class="s4">(</span><span class="s1">target</span><span class="s4">)) {</span>
            <span class="s3">return</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s1">observations</span><span class="s4">.</span><span class="s1">delete</span><span class="s4">(</span><span class="s1">target</span><span class="s4">);</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s1">observations</span><span class="s4">.</span><span class="s1">size</span><span class="s4">) {</span>
            <span class="s3">this</span><span class="s4">.</span><span class="s1">controller_</span><span class="s4">.</span><span class="s1">removeObserver</span><span class="s4">(</span><span class="s3">this</span><span class="s4">);</span>
        <span class="s4">}</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Stops observing all elements.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverSPI</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">disconnect </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">clearActive</span><span class="s4">();</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">observations_</span><span class="s4">.</span><span class="s1">clear</span><span class="s4">();</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">controller_</span><span class="s4">.</span><span class="s1">removeObserver</span><span class="s4">(</span><span class="s3">this</span><span class="s4">);</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Collects observation instances the associated element of which has changed</span>
     <span class="s0">* it's content rectangle.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverSPI</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">gatherActive </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">var </span><span class="s1">_this </span><span class="s4">= </span><span class="s3">this</span><span class="s4">;</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">clearActive</span><span class="s4">();</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">observations_</span><span class="s4">.</span><span class="s1">forEach</span><span class="s4">(</span><span class="s3">function </span><span class="s4">(</span><span class="s1">observation</span><span class="s4">) {</span>
            <span class="s3">if </span><span class="s4">(</span><span class="s1">observation</span><span class="s4">.</span><span class="s1">isActive</span><span class="s4">()) {</span>
                <span class="s1">_this</span><span class="s4">.</span><span class="s1">activeObservations_</span><span class="s4">.</span><span class="s1">push</span><span class="s4">(</span><span class="s1">observation</span><span class="s4">);</span>
            <span class="s4">}</span>
        <span class="s4">});</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Invokes initial callback function with a list of ResizeObserverEntry</span>
     <span class="s0">* instances collected from active resize observations.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverSPI</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">broadcastActive </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s2">// Do nothing if observer doesn't have active observations.</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s3">this</span><span class="s4">.</span><span class="s1">hasActive</span><span class="s4">()) {</span>
            <span class="s3">return</span><span class="s4">;</span>
        <span class="s4">}</span>
        <span class="s3">var </span><span class="s1">ctx </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">callbackCtx_</span><span class="s4">;</span>
        <span class="s2">// Create ResizeObserverEntry instance for every active observation.</span>
        <span class="s3">var </span><span class="s1">entries </span><span class="s4">= </span><span class="s3">this</span><span class="s4">.</span><span class="s1">activeObservations_</span><span class="s4">.</span><span class="s1">map</span><span class="s4">(</span><span class="s3">function </span><span class="s4">(</span><span class="s1">observation</span><span class="s4">) {</span>
            <span class="s3">return new </span><span class="s1">ResizeObserverEntry</span><span class="s4">(</span><span class="s1">observation</span><span class="s4">.</span><span class="s1">target</span><span class="s4">, </span><span class="s1">observation</span><span class="s4">.</span><span class="s1">broadcastRect</span><span class="s4">());</span>
        <span class="s4">});</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">callback_</span><span class="s4">.</span><span class="s1">call</span><span class="s4">(</span><span class="s1">ctx</span><span class="s4">, </span><span class="s1">entries</span><span class="s4">, </span><span class="s1">ctx</span><span class="s4">);</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">clearActive</span><span class="s4">();</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Clears the collection of active observations.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{void}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverSPI</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">clearActive </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">this</span><span class="s4">.</span><span class="s1">activeObservations_</span><span class="s4">.</span><span class="s1">splice</span><span class="s4">(</span><span class="s7">0</span><span class="s4">);</span>
    <span class="s4">};</span>
    <span class="s0">/**</span>
     <span class="s0">* Tells whether observer has active observations.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@returns </span><span class="s0">{boolean}</span>
     <span class="s0">*/</span>
    <span class="s1">ResizeObserverSPI</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">.</span><span class="s1">hasActive </span><span class="s4">= </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">return this</span><span class="s4">.</span><span class="s1">activeObservations_</span><span class="s4">.</span><span class="s1">length </span><span class="s4">&gt; </span><span class="s7">0</span><span class="s4">;</span>
    <span class="s4">};</span>
    <span class="s3">return </span><span class="s1">ResizeObserverSPI</span><span class="s4">;</span>
<span class="s4">}());</span>

<span class="s2">// Registry of internal observers. If WeakMap is not available use current shim</span>
<span class="s2">// for the Map collection as it has all required methods and because WeakMap</span>
<span class="s2">// can't be fully polyfilled anyway.</span>
<span class="s3">var </span><span class="s1">observers </span><span class="s4">= </span><span class="s3">typeof </span><span class="s1">WeakMap </span><span class="s4">!== </span><span class="s5">'undefined' </span><span class="s4">? </span><span class="s3">new </span><span class="s1">WeakMap</span><span class="s4">() : </span><span class="s3">new </span><span class="s1">MapShim</span><span class="s4">();</span>
<span class="s0">/**</span>
 <span class="s0">* ResizeObserver API. Encapsulates the ResizeObserver SPI implementation</span>
 <span class="s0">* exposing only those methods and properties that are defined in the spec.</span>
 <span class="s0">*/</span>
<span class="s3">var </span><span class="s1">ResizeObserver </span><span class="s4">= </span><span class="s0">/** </span><span class="s6">@class </span><span class="s0">*/ </span><span class="s4">(</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s0">/**</span>
     <span class="s0">* Creates a new instance of ResizeObserver.</span>
     <span class="s0">*</span>
     <span class="s0">* </span><span class="s6">@param </span><span class="s0">{ResizeObserverCallback} callback - Callback that is invoked when</span>
     <span class="s0">*      dimensions of the observed elements change.</span>
     <span class="s0">*/</span>
    <span class="s3">function </span><span class="s1">ResizeObserver</span><span class="s4">(</span><span class="s1">callback</span><span class="s4">) {</span>
        <span class="s3">if </span><span class="s4">(!(</span><span class="s3">this instanceof </span><span class="s1">ResizeObserver</span><span class="s4">)) {</span>
            <span class="s3">throw new </span><span class="s1">TypeError</span><span class="s4">(</span><span class="s5">'Cannot call a class as a function.'</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s3">if </span><span class="s4">(!</span><span class="s1">arguments</span><span class="s4">.</span><span class="s1">length</span><span class="s4">) {</span>
            <span class="s3">throw new </span><span class="s1">TypeError</span><span class="s4">(</span><span class="s5">'1 argument required, but only 0 present.'</span><span class="s4">);</span>
        <span class="s4">}</span>
        <span class="s3">var </span><span class="s1">controller </span><span class="s4">= </span><span class="s1">ResizeObserverController</span><span class="s4">.</span><span class="s1">getInstance</span><span class="s4">();</span>
        <span class="s3">var </span><span class="s1">observer </span><span class="s4">= </span><span class="s3">new </span><span class="s1">ResizeObserverSPI</span><span class="s4">(</span><span class="s1">callback</span><span class="s4">, </span><span class="s1">controller</span><span class="s4">, </span><span class="s3">this</span><span class="s4">);</span>
        <span class="s1">observers</span><span class="s4">.</span><span class="s1">set</span><span class="s4">(</span><span class="s3">this</span><span class="s4">, </span><span class="s1">observer</span><span class="s4">);</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">ResizeObserver</span><span class="s4">;</span>
<span class="s4">}());</span>
<span class="s2">// Expose public methods of ResizeObserver.</span>
<span class="s4">[</span>
    <span class="s5">'observe'</span><span class="s4">,</span>
    <span class="s5">'unobserve'</span><span class="s4">,</span>
    <span class="s5">'disconnect'</span>
<span class="s4">].</span><span class="s1">forEach</span><span class="s4">(</span><span class="s3">function </span><span class="s4">(</span><span class="s1">method</span><span class="s4">) {</span>
    <span class="s1">ResizeObserver</span><span class="s4">.</span><span class="s1">prototype</span><span class="s4">[</span><span class="s1">method</span><span class="s4">] = </span><span class="s3">function </span><span class="s4">() {</span>
        <span class="s3">var </span><span class="s1">_a</span><span class="s4">;</span>
        <span class="s3">return </span><span class="s4">(</span><span class="s1">_a </span><span class="s4">= </span><span class="s1">observers</span><span class="s4">.</span><span class="s1">get</span><span class="s4">(</span><span class="s3">this</span><span class="s4">))[</span><span class="s1">method</span><span class="s4">].</span><span class="s1">apply</span><span class="s4">(</span><span class="s1">_a</span><span class="s4">, </span><span class="s1">arguments</span><span class="s4">);</span>
    <span class="s4">};</span>
<span class="s4">});</span>

<span class="s3">var </span><span class="s1">index </span><span class="s4">= (</span><span class="s3">function </span><span class="s4">() {</span>
    <span class="s2">// Export existing implementation if available.</span>
    <span class="s3">if </span><span class="s4">(</span><span class="s3">typeof </span><span class="s1">global$1</span><span class="s4">.</span><span class="s1">ResizeObserver </span><span class="s4">!== </span><span class="s5">'undefined'</span><span class="s4">) {</span>
        <span class="s3">return </span><span class="s1">global$1</span><span class="s4">.</span><span class="s1">ResizeObserver</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s3">return </span><span class="s1">ResizeObserver</span><span class="s4">;</span>
<span class="s4">})();</span>

<span class="s3">export default </span><span class="s1">index</span><span class="s4">;</span>
</pre>
</body>
</html>