<html>
<head>
<title>dom-events.d.ts</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #7a7e85;}
.s4 { color: #5f826b; font-style: italic;}
.s5 { color: #2aacb8;}
.s6 { color: #6aab73;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
dom-events.d.ts</font>
</center></td></tr></table>
<pre><span class="s0">export </span><span class="s2">{}; </span><span class="s3">// Don't export anything!</span>

<span class="s3">//// DOM-like Events</span>
<span class="s3">// NB: The Event / EventTarget / EventListener implementations below were copied</span>
<span class="s3">// from lib.dom.d.ts, then edited to reflect Node's documentation at</span>
<span class="s3">// https://nodejs.org/api/events.html#class-eventtarget.</span>
<span class="s3">// Please read that link to understand important implementation differences.</span>

<span class="s3">// This conditional type will be the existing global Event in a browser, or</span>
<span class="s3">// the copy below in a Node environment.</span>
<span class="s1">type __Event </span><span class="s2">= </span><span class="s0">typeof </span><span class="s1">globalThis </span><span class="s0">extends </span><span class="s2">{ </span><span class="s1">onmessage</span><span class="s2">: </span><span class="s1">any</span><span class="s2">; </span><span class="s1">Event</span><span class="s2">: </span><span class="s1">any </span><span class="s2">} ? {}</span>
    <span class="s2">: {</span>
        <span class="s4">/** This is not used in Node.js and is provided purely for completeness. */</span>
        <span class="s1">readonly bubbles</span><span class="s2">: </span><span class="s1">boolean</span><span class="s2">;</span>
        <span class="s4">/** Alias for event.stopPropagation(). This is not used in Node.js and is provided purely for completeness. */</span>
        <span class="s1">cancelBubble</span><span class="s2">: () =&gt; </span><span class="s0">void</span><span class="s2">;</span>
        <span class="s4">/** True if the event was created with the cancelable option */</span>
        <span class="s1">readonly cancelable</span><span class="s2">: </span><span class="s1">boolean</span><span class="s2">;</span>
        <span class="s4">/** This is not used in Node.js and is provided purely for completeness. */</span>
        <span class="s1">readonly composed</span><span class="s2">: </span><span class="s1">boolean</span><span class="s2">;</span>
        <span class="s4">/** Returns an array containing the current EventTarget as the only entry or empty if the event is not being dispatched. This is not used in Node.js and is provided purely for completeness. */</span>
        <span class="s1">composedPath</span><span class="s2">(): [</span><span class="s1">EventTarget</span><span class="s2">?];</span>
        <span class="s4">/** Alias for event.target. */</span>
        <span class="s1">readonly currentTarget</span><span class="s2">: </span><span class="s1">EventTarget </span><span class="s2">| </span><span class="s0">null</span><span class="s2">;</span>
        <span class="s4">/** Is true if cancelable is true and event.preventDefault() has been called. */</span>
        <span class="s1">readonly defaultPrevented</span><span class="s2">: </span><span class="s1">boolean</span><span class="s2">;</span>
        <span class="s4">/** This is not used in Node.js and is provided purely for completeness. */</span>
        <span class="s1">readonly eventPhase</span><span class="s2">: </span><span class="s5">0 </span><span class="s2">| </span><span class="s5">2</span><span class="s2">;</span>
        <span class="s4">/** The `AbortSignal` &quot;abort&quot; event is emitted with `isTrusted` set to `true`. The value is `false` in all other cases. */</span>
        <span class="s1">readonly isTrusted</span><span class="s2">: </span><span class="s1">boolean</span><span class="s2">;</span>
        <span class="s4">/** Sets the `defaultPrevented` property to `true` if `cancelable` is `true`. */</span>
        <span class="s1">preventDefault</span><span class="s2">(): </span><span class="s0">void</span><span class="s2">;</span>
        <span class="s4">/** This is not used in Node.js and is provided purely for completeness. */</span>
        <span class="s1">returnValue</span><span class="s2">: </span><span class="s1">boolean</span><span class="s2">;</span>
        <span class="s4">/** Alias for event.target. */</span>
        <span class="s1">readonly srcElement</span><span class="s2">: </span><span class="s1">EventTarget </span><span class="s2">| </span><span class="s0">null</span><span class="s2">;</span>
        <span class="s4">/** Stops the invocation of event listeners after the current one completes. */</span>
        <span class="s1">stopImmediatePropagation</span><span class="s2">(): </span><span class="s0">void</span><span class="s2">;</span>
        <span class="s4">/** This is not used in Node.js and is provided purely for completeness. */</span>
        <span class="s1">stopPropagation</span><span class="s2">(): </span><span class="s0">void</span><span class="s2">;</span>
        <span class="s4">/** The `EventTarget` dispatching the event */</span>
        <span class="s1">readonly target</span><span class="s2">: </span><span class="s1">EventTarget </span><span class="s2">| </span><span class="s0">null</span><span class="s2">;</span>
        <span class="s4">/** The millisecond timestamp when the Event object was created. */</span>
        <span class="s1">readonly timeStamp</span><span class="s2">: </span><span class="s1">number</span><span class="s2">;</span>
        <span class="s4">/** Returns the type of event, e.g. &quot;click&quot;, &quot;hashchange&quot;, or &quot;submit&quot;. */</span>
        <span class="s1">readonly type</span><span class="s2">: </span><span class="s1">string</span><span class="s2">;</span>
    <span class="s2">};</span>

<span class="s3">// See comment above explaining conditional type</span>
<span class="s1">type __EventTarget </span><span class="s2">= </span><span class="s0">typeof </span><span class="s1">globalThis </span><span class="s0">extends </span><span class="s2">{ </span><span class="s1">onmessage</span><span class="s2">: </span><span class="s1">any</span><span class="s2">; </span><span class="s1">EventTarget</span><span class="s2">: </span><span class="s1">any </span><span class="s2">} ? {}</span>
    <span class="s2">: {</span>
        <span class="s4">/**</span>
         <span class="s4">* Adds a new handler for the `type` event. Any given `listener` is added only once per `type` and per `capture` option value.</span>
         <span class="s4">*</span>
         <span class="s4">* If the `once` option is true, the `listener` is removed after the next time a `type` event is dispatched.</span>
         <span class="s4">*</span>
         <span class="s4">* The `capture` option is not used by Node.js in any functional way other than tracking registered event listeners per the `EventTarget` specification.</span>
         <span class="s4">* Specifically, the `capture` option is used as part of the key when registering a `listener`.</span>
         <span class="s4">* Any individual `listener` may be added once with `capture = false`, and once with `capture = true`.</span>
         <span class="s4">*/</span>
        <span class="s1">addEventListener</span><span class="s2">(</span>
            <span class="s1">type</span><span class="s2">: </span><span class="s1">string</span><span class="s2">,</span>
            <span class="s1">listener</span><span class="s2">: </span><span class="s1">EventListener </span><span class="s2">| </span><span class="s1">EventListenerObject</span><span class="s2">,</span>
            <span class="s1">options</span><span class="s2">?: </span><span class="s1">AddEventListenerOptions </span><span class="s2">| </span><span class="s1">boolean</span><span class="s2">,</span>
        <span class="s2">): </span><span class="s0">void</span><span class="s2">;</span>
        <span class="s4">/** Dispatches a synthetic event event to target and returns true if either event's cancelable attribute value is false or its preventDefault() method was not invoked, and false otherwise. */</span>
        <span class="s1">dispatchEvent</span><span class="s2">(</span><span class="s1">event</span><span class="s2">: </span><span class="s1">Event</span><span class="s2">): </span><span class="s1">boolean</span><span class="s2">;</span>
        <span class="s4">/** Removes the event listener in target's event listener list with the same type, callback, and options. */</span>
        <span class="s1">removeEventListener</span><span class="s2">(</span>
            <span class="s1">type</span><span class="s2">: </span><span class="s1">string</span><span class="s2">,</span>
            <span class="s1">listener</span><span class="s2">: </span><span class="s1">EventListener </span><span class="s2">| </span><span class="s1">EventListenerObject</span><span class="s2">,</span>
            <span class="s1">options</span><span class="s2">?: </span><span class="s1">EventListenerOptions </span><span class="s2">| </span><span class="s1">boolean</span><span class="s2">,</span>
        <span class="s2">): </span><span class="s0">void</span><span class="s2">;</span>
    <span class="s2">};</span>

<span class="s0">interface </span><span class="s1">EventInit </span><span class="s2">{</span>
    <span class="s1">bubbles</span><span class="s2">?: </span><span class="s1">boolean</span><span class="s2">;</span>
    <span class="s1">cancelable</span><span class="s2">?: </span><span class="s1">boolean</span><span class="s2">;</span>
    <span class="s1">composed</span><span class="s2">?: </span><span class="s1">boolean</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">interface </span><span class="s1">EventListenerOptions </span><span class="s2">{</span>
    <span class="s4">/** Not directly used by Node.js. Added for API completeness. Default: `false`. */</span>
    <span class="s1">capture</span><span class="s2">?: </span><span class="s1">boolean</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">interface </span><span class="s1">AddEventListenerOptions </span><span class="s0">extends </span><span class="s1">EventListenerOptions </span><span class="s2">{</span>
    <span class="s4">/** When `true`, the listener is automatically removed when it is first invoked. Default: `false`. */</span>
    <span class="s1">once</span><span class="s2">?: </span><span class="s1">boolean</span><span class="s2">;</span>
    <span class="s4">/** When `true`, serves as a hint that the listener will not call the `Event` object's `preventDefault()` method. Default: false. */</span>
    <span class="s1">passive</span><span class="s2">?: </span><span class="s1">boolean</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">interface </span><span class="s1">EventListener </span><span class="s2">{</span>
    <span class="s2">(</span><span class="s1">evt</span><span class="s2">: </span><span class="s1">Event</span><span class="s2">): </span><span class="s0">void</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">interface </span><span class="s1">EventListenerObject </span><span class="s2">{</span>
    <span class="s1">handleEvent</span><span class="s2">(</span><span class="s1">object</span><span class="s2">: </span><span class="s1">Event</span><span class="s2">): </span><span class="s0">void</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">import </span><span class="s2">{} </span><span class="s1">from </span><span class="s6">&quot;events&quot;</span><span class="s2">; </span><span class="s3">// Make this an ambient declaration</span>
<span class="s1">declare global </span><span class="s2">{</span>
    <span class="s4">/** An event which takes place in the DOM. */</span>
    <span class="s0">interface </span><span class="s1">Event </span><span class="s0">extends </span><span class="s1">__Event </span><span class="s2">{}</span>
    <span class="s0">var </span><span class="s1">Event</span><span class="s2">: </span><span class="s0">typeof </span><span class="s1">globalThis </span><span class="s0">extends </span><span class="s2">{ </span><span class="s1">onmessage</span><span class="s2">: </span><span class="s1">any</span><span class="s2">; </span><span class="s1">Event</span><span class="s2">: </span><span class="s1">infer T </span><span class="s2">} ? </span><span class="s1">T</span>
        <span class="s2">: {</span>
            <span class="s1">prototype</span><span class="s2">: </span><span class="s1">__Event</span><span class="s2">;</span>
            <span class="s0">new</span><span class="s2">(</span><span class="s1">type</span><span class="s2">: </span><span class="s1">string</span><span class="s2">, </span><span class="s1">eventInitDict</span><span class="s2">?: </span><span class="s1">EventInit</span><span class="s2">): </span><span class="s1">__Event</span><span class="s2">;</span>
        <span class="s2">};</span>

    <span class="s4">/**</span>
     <span class="s4">* EventTarget is a DOM interface implemented by objects that can</span>
     <span class="s4">* receive events and may have listeners for them.</span>
     <span class="s4">*/</span>
    <span class="s0">interface </span><span class="s1">EventTarget </span><span class="s0">extends </span><span class="s1">__EventTarget </span><span class="s2">{}</span>
    <span class="s0">var </span><span class="s1">EventTarget</span><span class="s2">: </span><span class="s0">typeof </span><span class="s1">globalThis </span><span class="s0">extends </span><span class="s2">{ </span><span class="s1">onmessage</span><span class="s2">: </span><span class="s1">any</span><span class="s2">; </span><span class="s1">EventTarget</span><span class="s2">: </span><span class="s1">infer T </span><span class="s2">} ? </span><span class="s1">T</span>
        <span class="s2">: {</span>
            <span class="s1">prototype</span><span class="s2">: </span><span class="s1">__EventTarget</span><span class="s2">;</span>
            <span class="s0">new</span><span class="s2">(): </span><span class="s1">__EventTarget</span><span class="s2">;</span>
        <span class="s2">};</span>
<span class="s2">}</span>
</pre>
</body>
</html>