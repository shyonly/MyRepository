<html>
<head>
<title>normalize-options.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
normalize-options.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;_semver&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;_corejs2BuiltIns&quot;</span><span class="s0">,</span><span class="s1">&quot;_coreJsCompat&quot;</span><span class="s0">,</span><span class="s1">&quot;_pluginsCompatData&quot;</span><span class="s0">,</span><span class="s1">&quot;_moduleTransformations&quot;</span><span class="s0">,</span><span class="s1">&quot;_options&quot;</span><span class="s0">,</span><span class="s1">&quot;_helperValidatorOption&quot;</span><span class="s0">,</span><span class="s1">&quot;corejs2DefaultWebIncludes&quot;</span><span class="s0">,</span><span class="s1">&quot;v&quot;</span><span class="s0">,</span><span class="s1">&quot;OptionValidator&quot;</span><span class="s0">,</span><span class="s1">&quot;allPluginsList&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginsList&quot;</span><span class="s0">,</span><span class="s1">&quot;modulePlugins&quot;</span><span class="s0">,</span><span class="s1">&quot;moduleTransformations&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;m&quot;</span><span class="s0">,</span><span class="s1">&quot;getValidIncludesAndExcludes&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;corejs&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;from&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;corejs2Polyfills&quot;</span><span class="s0">,</span><span class="s1">&quot;corejs3Polyfills&quot;</span><span class="s0">,</span><span class="s1">&quot;flatMap&quot;</span><span class="s0">,</span><span class="s1">&quot;array&quot;</span><span class="s0">,</span><span class="s1">&quot;fn&quot;</span><span class="s0">,</span><span class="s1">&quot;prototype&quot;</span><span class="s0">,</span><span class="s1">&quot;concat&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizePluginName&quot;</span><span class="s0">,</span><span class="s1">&quot;plugin&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;expandIncludesAndExcludes&quot;</span><span class="s0">,</span><span class="s1">&quot;filterList&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;filterableItems&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidFilters&quot;</span><span class="s0">,</span><span class="s1">&quot;selectedPlugins&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;re&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;items&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;invariant&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;checkDuplicateIncludeExcludes&quot;</span><span class="s0">,</span><span class="s1">&quot;include&quot;</span><span class="s0">,</span><span class="s1">&quot;exclude&quot;</span><span class="s0">,</span><span class="s1">&quot;duplicates&quot;</span><span class="s0">,</span><span class="s1">&quot;opt&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeTargets&quot;</span><span class="s0">,</span><span class="s1">&quot;targets&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;browsers&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;validateModulesOption&quot;</span><span class="s0">,</span><span class="s1">&quot;modulesOpt&quot;</span><span class="s0">,</span><span class="s1">&quot;ModulesOption&quot;</span><span class="s0">,</span><span class="s1">&quot;auto&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;false&quot;</span><span class="s0">,</span><span class="s1">&quot;validateUseBuiltInsOption&quot;</span><span class="s0">,</span><span class="s1">&quot;builtInsOpt&quot;</span><span class="s0">,</span><span class="s1">&quot;UseBuiltInsOption&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeCoreJSOption&quot;</span><span class="s0">,</span><span class="s1">&quot;useBuiltIns&quot;</span><span class="s0">,</span><span class="s1">&quot;proposals&quot;</span><span class="s0">,</span><span class="s1">&quot;rawVersion&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;semver&quot;</span><span class="s0">,</span><span class="s1">&quot;coerce&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;major&quot;</span><span class="s0">,</span><span class="s1">&quot;RangeError&quot;</span><span class="s0">,</span><span class="s1">&quot;normalizeOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;validateTopLevelOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;TopLevelOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;bugfixes&quot;</span><span class="s0">,</span><span class="s1">&quot;validateBooleanOption&quot;</span><span class="s0">,</span><span class="s1">&quot;configPath&quot;</span><span class="s0">,</span><span class="s1">&quot;validateStringOption&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;forceAllTransforms&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreBrowserslistConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;loose&quot;</span><span class="s0">,</span><span class="s1">&quot;modules&quot;</span><span class="s0">,</span><span class="s1">&quot;shippedProposals&quot;</span><span class="s0">,</span><span class="s1">&quot;spec&quot;</span><span class="s0">,</span><span class="s1">&quot;browserslistEnv&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../src/normalize-options.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import semver, { type SemVer } from </span><span class="s3">\&quot;</span><span class="s1">semver</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import corejs2Polyfills from </span><span class="s3">\&quot;</span><span class="s1">@babel/compat-data/corejs2-built-ins</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">// @ts-expect-error Fixme: TS can not infer types from ../data/core-js-compat.js</span><span class="s3">\n</span><span class="s1">// but we can't import core-js-compat/data.json because JSON imports do</span><span class="s3">\n</span><span class="s1">// not work on Node 14</span><span class="s3">\n</span><span class="s1">import corejs3Polyfills from </span><span class="s3">\&quot;</span><span class="s1">../data/core-js-compat.js</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { plugins as pluginsList } from </span><span class="s3">\&quot;</span><span class="s1">./plugins-compat-data.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import moduleTransformations from </span><span class="s3">\&quot;</span><span class="s1">./module-transformations.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">TopLevelOptions,</span><span class="s3">\n  </span><span class="s1">ModulesOption,</span><span class="s3">\n  </span><span class="s1">UseBuiltInsOption,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./options.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { OptionValidator } from </span><span class="s3">\&quot;</span><span class="s1">@babel/helper-validator-option</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">const corejs2DefaultWebIncludes = [</span><span class="s3">\n  \&quot;</span><span class="s1">web.timers</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">web.immediate</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  \&quot;</span><span class="s1">web.dom.iterable</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">BuiltInsOption,</span><span class="s3">\n  </span><span class="s1">CorejsOption,</span><span class="s3">\n  </span><span class="s1">ModuleOption,</span><span class="s3">\n  </span><span class="s1">Options,</span><span class="s3">\n  </span><span class="s1">PluginListOption,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./types.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">const v = new OptionValidator(PACKAGE_JSON.name);</span><span class="s3">\n\n</span><span class="s1">const allPluginsList = Object.keys(pluginsList);</span><span class="s3">\n\n</span><span class="s1">// NOTE: Since module plugins are handled separately compared to other plugins (via the </span><span class="s3">\&quot;</span><span class="s1">modules</span><span class="s3">\&quot; </span><span class="s1">option) it</span><span class="s3">\n</span><span class="s1">// should only be possible to exclude and not include module plugins, otherwise it's possible that preset-env</span><span class="s3">\n</span><span class="s1">// will add a module plugin twice.</span><span class="s3">\n</span><span class="s1">const modulePlugins = [</span><span class="s3">\n  \&quot;</span><span class="s1">transform-dynamic-import</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">...Object.keys(moduleTransformations).map(m =&gt; moduleTransformations[m]),</span><span class="s3">\n</span><span class="s1">];</span><span class="s3">\n\n</span><span class="s1">const getValidIncludesAndExcludes = (</span><span class="s3">\n  </span><span class="s1">type: </span><span class="s3">\&quot;</span><span class="s1">include</span><span class="s3">\&quot; </span><span class="s1">| </span><span class="s3">\&quot;</span><span class="s1">exclude</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">corejs: number | false,</span><span class="s3">\n</span><span class="s1">) =&gt;</span><span class="s3">\n  </span><span class="s1">Array.from(</span><span class="s3">\n    </span><span class="s1">new Set([</span><span class="s3">\n      </span><span class="s1">...allPluginsList,</span><span class="s3">\n      </span><span class="s1">...(type === </span><span class="s3">\&quot;</span><span class="s1">exclude</span><span class="s3">\&quot; </span><span class="s1">? modulePlugins : []),</span><span class="s3">\n      </span><span class="s1">...(corejs</span><span class="s3">\n        </span><span class="s1">? corejs == 2</span><span class="s3">\n          </span><span class="s1">? [...Object.keys(corejs2Polyfills), ...corejs2DefaultWebIncludes]</span><span class="s3">\n          </span><span class="s1">: Object.keys(corejs3Polyfills)</span><span class="s3">\n        </span><span class="s1">: []),</span><span class="s3">\n    </span><span class="s1">]),</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">function flatMap&lt;T, U&gt;(array: Array&lt;T&gt;, fn: (item: T) =&gt; Array&lt;U&gt;): Array&lt;U&gt; {</span><span class="s3">\n  </span><span class="s1">return Array.prototype.concat.apply([], array.map(fn));</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const normalizePluginName = (plugin: string) =&gt;</span><span class="s3">\n  </span><span class="s1">plugin.replace(/^(@babel</span><span class="s3">\\</span><span class="s1">/|babel-)(plugin-)?/, </span><span class="s3">\&quot;\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">const expandIncludesAndExcludes = (</span><span class="s3">\n  </span><span class="s1">filterList: PluginListOption = [],</span><span class="s3">\n  </span><span class="s1">type: </span><span class="s3">\&quot;</span><span class="s1">include</span><span class="s3">\&quot; </span><span class="s1">| </span><span class="s3">\&quot;</span><span class="s1">exclude</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">corejs: number | false,</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">if (filterList.length === 0) return [];</span><span class="s3">\n\n  </span><span class="s1">const filterableItems = getValidIncludesAndExcludes(type, corejs);</span><span class="s3">\n\n  </span><span class="s1">const invalidFilters: PluginListOption = [];</span><span class="s3">\n  </span><span class="s1">const selectedPlugins = flatMap(filterList, filter =&gt; {</span><span class="s3">\n    </span><span class="s1">let re: RegExp;</span><span class="s3">\n    </span><span class="s1">if (typeof filter === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">re = new RegExp(`^${normalizePluginName(filter)}$`);</span><span class="s3">\n      </span><span class="s1">} catch (e) {</span><span class="s3">\n        </span><span class="s1">invalidFilters.push(filter);</span><span class="s3">\n        </span><span class="s1">return [];</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">re = filter;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const items = filterableItems.filter(item =&gt; {</span><span class="s3">\n      </span><span class="s1">return process.env.BABEL_8_BREAKING</span><span class="s3">\n        </span><span class="s1">? re.test(item)</span><span class="s3">\n        </span><span class="s1">: re.test(item) ||</span><span class="s3">\n            </span><span class="s1">// For backwards compatibility, we also support matching against the</span><span class="s3">\n            </span><span class="s1">// proposal- name.</span><span class="s3">\n            </span><span class="s1">re.test(item.replace(/^transform-/, </span><span class="s3">\&quot;</span><span class="s1">proposal-</span><span class="s3">\&quot;</span><span class="s1">));</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">if (items.length === 0) invalidFilters.push(filter);</span><span class="s3">\n    </span><span class="s1">return items;</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n\n  </span><span class="s1">v.invariant(</span><span class="s3">\n    </span><span class="s1">invalidFilters.length === 0,</span><span class="s3">\n    </span><span class="s1">`The plugins/built-ins '${invalidFilters.join(</span><span class="s3">\n      \&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">)}' passed to the '${type}' option are not</span><span class="s3">\n    </span><span class="s1">valid. Please check data/[plugin-features|built-in-features].js in babel-preset-env`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">return selectedPlugins;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export const checkDuplicateIncludeExcludes = (</span><span class="s3">\n  </span><span class="s1">include: Array&lt;string&gt; = [],</span><span class="s3">\n  </span><span class="s1">exclude: Array&lt;string&gt; = [],</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">const duplicates = include.filter(opt =&gt; exclude.indexOf(opt) &gt;= 0);</span><span class="s3">\n\n  </span><span class="s1">v.invariant(</span><span class="s3">\n    </span><span class="s1">duplicates.length === 0,</span><span class="s3">\n    </span><span class="s1">`The plugins/built-ins '${duplicates.join(</span><span class="s3">\n      \&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">)}' were found in both the </span><span class="s3">\&quot;</span><span class="s1">include</span><span class="s3">\&quot; </span><span class="s1">and</span><span class="s3">\n    \&quot;</span><span class="s1">exclude</span><span class="s3">\&quot; </span><span class="s1">options.`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">const normalizeTargets = (</span><span class="s3">\n  </span><span class="s1">targets: string | string[] | Options[</span><span class="s3">\&quot;</span><span class="s1">targets</span><span class="s3">\&quot;</span><span class="s1">],</span><span class="s3">\n</span><span class="s1">): Options[</span><span class="s3">\&quot;</span><span class="s1">targets</span><span class="s3">\&quot;</span><span class="s1">] =&gt; {</span><span class="s3">\n  </span><span class="s1">// TODO: Allow to use only query or strings as a targets from next breaking change.</span><span class="s3">\n  </span><span class="s1">if (typeof targets === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot; </span><span class="s1">|| Array.isArray(targets)) {</span><span class="s3">\n    </span><span class="s1">return { browsers: targets };</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return { ...targets };</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export const validateModulesOption = (</span><span class="s3">\n  </span><span class="s1">modulesOpt: ModuleOption = ModulesOption.auto,</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">v.invariant(</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error we have provided fallback for undefined keys</span><span class="s3">\n    </span><span class="s1">ModulesOption[modulesOpt.toString()] || modulesOpt === ModulesOption.false,</span><span class="s3">\n    </span><span class="s1">`The 'modules' option must be one of </span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n      </span><span class="s1">` - 'false' to indicate no module processing</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n      </span><span class="s1">` - a specific module type: 'commonjs', 'amd', 'umd', 'systemjs'` +</span><span class="s3">\n      </span><span class="s1">` - 'auto' (default) which will automatically select 'false' if the current</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n      </span><span class="s1">`   process is known to support ES module syntax, or </span><span class="s3">\&quot;</span><span class="s1">commonjs</span><span class="s3">\&quot; </span><span class="s1">otherwise</span><span class="s3">\\</span><span class="s1">n`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">return modulesOpt;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export const validateUseBuiltInsOption = (</span><span class="s3">\n  </span><span class="s1">builtInsOpt: BuiltInsOption = false,</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">v.invariant(</span><span class="s3">\n    </span><span class="s1">// @ts-expect-error we have provided fallback for undefined keys</span><span class="s3">\n    </span><span class="s1">UseBuiltInsOption[builtInsOpt.toString()] ||</span><span class="s3">\n      </span><span class="s1">builtInsOpt === UseBuiltInsOption.false,</span><span class="s3">\n    </span><span class="s1">`The 'useBuiltIns' option must be either</span><span class="s3">\n    </span><span class="s1">'false' (default) to indicate no polyfill,</span><span class="s3">\n    </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">entry</span><span class="s3">\&quot;</span><span class="s1">' to indicate replacing the entry polyfill, or</span><span class="s3">\n    </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">usage</span><span class="s3">\&quot;</span><span class="s1">' to import only used polyfills per file`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">return builtInsOpt;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export type NormalizedCorejsOption = {</span><span class="s3">\n  </span><span class="s1">proposals: boolean;</span><span class="s3">\n  </span><span class="s1">version: SemVer | null | false;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export function normalizeCoreJSOption(</span><span class="s3">\n  </span><span class="s1">corejs: CorejsOption | undefined | null,</span><span class="s3">\n  </span><span class="s1">useBuiltIns: BuiltInsOption,</span><span class="s3">\n</span><span class="s1">): NormalizedCorejsOption {</span><span class="s3">\n  </span><span class="s1">let proposals = false;</span><span class="s3">\n  </span><span class="s1">let rawVersion;</span><span class="s3">\n\n  </span><span class="s1">if (useBuiltIns &amp;&amp; corejs === undefined) {</span><span class="s3">\n    </span><span class="s1">rawVersion = 2;</span><span class="s3">\n    </span><span class="s1">console.warn(</span><span class="s3">\n      \&quot;\\</span><span class="s1">nWARNING (@babel/preset-env): We noticed you're using the `useBuiltIns` option without declaring a </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">core-js version. Currently, we assume version 2.x when no version </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">is passed. Since this default version will likely change in future </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">versions of Babel, we recommend explicitly setting the core-js version </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">you are using via the `corejs` option.</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;\\</span><span class="s1">nYou should also be sure that the version you pass to the `corejs` </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">option matches the version specified in your `package.json`'s </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">`dependencies` section. If it doesn't, you need to run one of the </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">following commands:</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;  </span><span class="s1">npm install --save core-js@2    npm install --save core-js@3</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;  </span><span class="s1">yarn add core-js@2              yarn add core-js@3</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">More info about useBuiltIns: https://babeljs.io/docs/en/babel-preset-env#usebuiltins</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">More info about core-js: https://babeljs.io/docs/en/babel-preset-env#corejs</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">} else if (typeof corejs === </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; corejs !== null) {</span><span class="s3">\n    </span><span class="s1">rawVersion = corejs.version;</span><span class="s3">\n    </span><span class="s1">proposals = Boolean(corejs.proposals);</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">rawVersion = corejs;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const version = rawVersion ? semver.coerce(String(rawVersion)) : false;</span><span class="s3">\n\n  </span><span class="s1">if (!useBuiltIns &amp;&amp; version) {</span><span class="s3">\n    </span><span class="s1">console.warn(</span><span class="s3">\n      \&quot;\\</span><span class="s1">nWARNING (@babel/preset-env): The `corejs` option only has an effect when the `useBuiltIns` option is not `false`</span><span class="s3">\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (useBuiltIns &amp;&amp; (!version || version.major &lt; 2 || version.major &gt; 3)) {</span><span class="s3">\n    </span><span class="s1">throw new RangeError(</span><span class="s3">\n      \&quot;</span><span class="s1">Invalid Option: The version passed to `corejs` is invalid. Currently, </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        \&quot;</span><span class="s1">only core-js@2 and core-js@3 are supported.</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return { version, proposals };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default function normalizeOptions(opts: Options) {</span><span class="s3">\n  </span><span class="s1">v.validateTopLevelOptions(opts, TopLevelOptions);</span><span class="s3">\n\n  </span><span class="s1">const useBuiltIns = validateUseBuiltInsOption(opts.useBuiltIns);</span><span class="s3">\n\n  </span><span class="s1">const corejs = normalizeCoreJSOption(opts.corejs, useBuiltIns);</span><span class="s3">\n\n  </span><span class="s1">const include = expandIncludesAndExcludes(</span><span class="s3">\n    </span><span class="s1">opts.include,</span><span class="s3">\n    </span><span class="s1">TopLevelOptions.include,</span><span class="s3">\n    </span><span class="s1">!!corejs.version &amp;&amp; corejs.version.major,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">const exclude = expandIncludesAndExcludes(</span><span class="s3">\n    </span><span class="s1">opts.exclude,</span><span class="s3">\n    </span><span class="s1">TopLevelOptions.exclude,</span><span class="s3">\n    </span><span class="s1">!!corejs.version &amp;&amp; corejs.version.major,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">checkDuplicateIncludeExcludes(include, exclude);</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">bugfixes: v.validateBooleanOption(</span><span class="s3">\n      </span><span class="s1">TopLevelOptions.bugfixes,</span><span class="s3">\n      </span><span class="s1">opts.bugfixes,</span><span class="s3">\n      </span><span class="s1">process.env.BABEL_8_BREAKING ? true : false,</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">configPath: v.validateStringOption(</span><span class="s3">\n      </span><span class="s1">TopLevelOptions.configPath,</span><span class="s3">\n      </span><span class="s1">opts.configPath,</span><span class="s3">\n      </span><span class="s1">process.cwd(),</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">corejs,</span><span class="s3">\n    </span><span class="s1">debug: v.validateBooleanOption(TopLevelOptions.debug, opts.debug, false),</span><span class="s3">\n    </span><span class="s1">include,</span><span class="s3">\n    </span><span class="s1">exclude,</span><span class="s3">\n    </span><span class="s1">forceAllTransforms: v.validateBooleanOption(</span><span class="s3">\n      </span><span class="s1">TopLevelOptions.forceAllTransforms,</span><span class="s3">\n      </span><span class="s1">opts.forceAllTransforms,</span><span class="s3">\n      </span><span class="s1">false,</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">ignoreBrowserslistConfig: v.validateBooleanOption(</span><span class="s3">\n      </span><span class="s1">TopLevelOptions.ignoreBrowserslistConfig,</span><span class="s3">\n      </span><span class="s1">opts.ignoreBrowserslistConfig,</span><span class="s3">\n      </span><span class="s1">false,</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">loose: v.validateBooleanOption&lt;boolean&gt;(TopLevelOptions.loose, opts.loose),</span><span class="s3">\n    </span><span class="s1">modules: validateModulesOption(opts.modules),</span><span class="s3">\n    </span><span class="s1">shippedProposals: v.validateBooleanOption(</span><span class="s3">\n      </span><span class="s1">TopLevelOptions.shippedProposals,</span><span class="s3">\n      </span><span class="s1">opts.shippedProposals,</span><span class="s3">\n      </span><span class="s1">false,</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">spec: v.validateBooleanOption(TopLevelOptions.spec, opts.spec, false),</span><span class="s3">\n    </span><span class="s1">targets: normalizeTargets(opts.targets),</span><span class="s3">\n    </span><span class="s1">useBuiltIns: useBuiltIns,</span><span class="s3">\n    </span><span class="s1">browserslistEnv: v.validateStringOption&lt;string&gt;(</span><span class="s3">\n      </span><span class="s1">TopLevelOptions.browserslistEnv,</span><span class="s3">\n      </span><span class="s1">opts.browserslistEnv,</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>