<html>
<head>
<title>Schema-e94716c8.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #2aacb8;}
.s5 { color: #7a7e85;}
.s6 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Schema-e94716c8.js</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s2">{ </span><span class="s1">_ </span><span class="s2">as </span><span class="s1">_createForOfIteratorHelper</span><span class="s2">, </span><span class="s1">h </span><span class="s2">as </span><span class="s1">_slicedToArray</span><span class="s2">, </span><span class="s1">a </span><span class="s2">as </span><span class="s1">_typeof</span><span class="s2">, </span><span class="s1">b </span><span class="s2">as </span><span class="s1">_createClass</span><span class="s2">, </span><span class="s1">e </span><span class="s2">as </span><span class="s1">_defineProperty</span><span class="s2">, </span><span class="s1">c </span><span class="s2">as </span><span class="s1">_classCallCheck</span><span class="s2">, </span><span class="s1">d </span><span class="s2">as </span><span class="s1">defaultTagPrefix</span><span class="s2">, </span><span class="s1">n </span><span class="s2">as </span><span class="s1">defaultTags </span><span class="s2">} </span><span class="s1">from </span><span class="s3">'./PlainValue-b8036b75.js'</span><span class="s2">;</span>
<span class="s0">import </span><span class="s2">{ </span><span class="s1">d </span><span class="s2">as </span><span class="s1">YAMLMap</span><span class="s2">, </span><span class="s1">g </span><span class="s2">as </span><span class="s1">resolveMap</span><span class="s2">, </span><span class="s1">Y </span><span class="s2">as </span><span class="s1">YAMLSeq</span><span class="s2">, </span><span class="s1">h </span><span class="s2">as </span><span class="s1">resolveSeq</span><span class="s2">, </span><span class="s1">j </span><span class="s2">as </span><span class="s1">resolveString</span><span class="s2">, </span><span class="s1">c </span><span class="s2">as </span><span class="s1">stringifyString</span><span class="s2">, </span><span class="s1">s </span><span class="s2">as </span><span class="s1">strOptions</span><span class="s2">, </span><span class="s1">S </span><span class="s2">as </span><span class="s1">Scalar</span><span class="s2">, </span><span class="s1">n </span><span class="s2">as </span><span class="s1">nullOptions</span><span class="s2">, </span><span class="s1">a </span><span class="s2">as </span><span class="s1">boolOptions</span><span class="s2">, </span><span class="s1">i </span><span class="s2">as </span><span class="s1">intOptions</span><span class="s2">, </span><span class="s1">k </span><span class="s2">as </span><span class="s1">stringifyNumber</span><span class="s2">, </span><span class="s1">N </span><span class="s2">as </span><span class="s1">Node</span><span class="s2">, </span><span class="s1">A </span><span class="s2">as </span><span class="s1">Alias</span><span class="s2">, </span><span class="s1">P </span><span class="s2">as </span><span class="s1">Pair </span><span class="s2">} </span><span class="s1">from </span><span class="s3">'./resolveSeq-492ab440.js'</span><span class="s2">;</span>
<span class="s0">import </span><span class="s2">{ </span><span class="s1">b </span><span class="s2">as </span><span class="s1">binary</span><span class="s2">, </span><span class="s1">o </span><span class="s2">as </span><span class="s1">omap</span><span class="s2">, </span><span class="s1">p </span><span class="s2">as </span><span class="s1">pairs</span><span class="s2">, </span><span class="s1">s </span><span class="s2">as </span><span class="s1">set</span><span class="s2">, </span><span class="s1">i </span><span class="s2">as </span><span class="s1">intTime</span><span class="s2">, </span><span class="s1">f </span><span class="s2">as </span><span class="s1">floatTime</span><span class="s2">, </span><span class="s1">t </span><span class="s2">as </span><span class="s1">timestamp</span><span class="s2">, </span><span class="s1">a </span><span class="s2">as </span><span class="s1">warnOptionDeprecation </span><span class="s2">} </span><span class="s1">from </span><span class="s3">'./warnings-df54cb69.js'</span><span class="s2">;</span>

<span class="s0">function </span><span class="s1">createMap</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">, </span><span class="s1">obj</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">map </span><span class="s2">= </span><span class="s0">new </span><span class="s1">YAMLMap</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">);</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">obj </span><span class="s0">instanceof </span><span class="s1">Map</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">_iterator </span><span class="s2">= </span><span class="s1">_createForOfIteratorHelper</span><span class="s2">(</span><span class="s1">obj</span><span class="s2">),</span>
        <span class="s1">_step</span><span class="s2">;</span>

    <span class="s0">try </span><span class="s2">{</span>
      <span class="s0">for </span><span class="s2">(</span><span class="s1">_iterator</span><span class="s2">.</span><span class="s1">s</span><span class="s2">(); !(</span><span class="s1">_step </span><span class="s2">= </span><span class="s1">_iterator</span><span class="s2">.</span><span class="s1">n</span><span class="s2">()).</span><span class="s1">done</span><span class="s2">;) {</span>
        <span class="s0">var </span><span class="s1">_step$value </span><span class="s2">= </span><span class="s1">_slicedToArray</span><span class="s2">(</span><span class="s1">_step</span><span class="s2">.</span><span class="s1">value</span><span class="s2">, </span><span class="s4">2</span><span class="s2">),</span>
            <span class="s1">key </span><span class="s2">= </span><span class="s1">_step$value</span><span class="s2">[</span><span class="s4">0</span><span class="s2">],</span>
            <span class="s1">value </span><span class="s2">= </span><span class="s1">_step$value</span><span class="s2">[</span><span class="s4">1</span><span class="s2">];</span>

        <span class="s1">map</span><span class="s2">.</span><span class="s1">items</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">createPair</span><span class="s2">(</span><span class="s1">key</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">));</span>
      <span class="s2">}</span>
    <span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">err</span><span class="s2">) {</span>
      <span class="s1">_iterator</span><span class="s2">.</span><span class="s1">e</span><span class="s2">(</span><span class="s1">err</span><span class="s2">);</span>
    <span class="s2">} </span><span class="s0">finally </span><span class="s2">{</span>
      <span class="s1">_iterator</span><span class="s2">.</span><span class="s1">f</span><span class="s2">();</span>
    <span class="s2">}</span>
  <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">obj </span><span class="s2">&amp;&amp; </span><span class="s1">_typeof</span><span class="s2">(</span><span class="s1">obj</span><span class="s2">) === </span><span class="s3">'object'</span><span class="s2">) {</span>
    <span class="s0">for </span><span class="s2">(</span><span class="s0">var </span><span class="s1">_i </span><span class="s2">= </span><span class="s4">0</span><span class="s2">, </span><span class="s1">_Object$keys </span><span class="s2">= </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">obj</span><span class="s2">); </span><span class="s1">_i </span><span class="s2">&lt; </span><span class="s1">_Object$keys</span><span class="s2">.</span><span class="s1">length</span><span class="s2">; </span><span class="s1">_i</span><span class="s2">++) {</span>
      <span class="s0">var </span><span class="s1">_key </span><span class="s2">= </span><span class="s1">_Object$keys</span><span class="s2">[</span><span class="s1">_i</span><span class="s2">];</span>
      <span class="s1">map</span><span class="s2">.</span><span class="s1">items</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">createPair</span><span class="s2">(</span><span class="s1">_key</span><span class="s2">, </span><span class="s1">obj</span><span class="s2">[</span><span class="s1">_key</span><span class="s2">], </span><span class="s1">ctx</span><span class="s2">));</span>
    <span class="s2">}</span>
  <span class="s2">}</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s0">typeof </span><span class="s1">schema</span><span class="s2">.</span><span class="s1">sortMapEntries </span><span class="s2">=== </span><span class="s3">'function'</span><span class="s2">) {</span>
    <span class="s1">map</span><span class="s2">.</span><span class="s1">items</span><span class="s2">.</span><span class="s1">sort</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">sortMapEntries</span><span class="s2">);</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">map</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">var </span><span class="s1">map </span><span class="s2">= {</span>
  <span class="s1">createNode</span><span class="s2">: </span><span class="s1">createMap</span><span class="s2">,</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">nodeClass</span><span class="s2">: </span><span class="s1">YAMLMap</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:map'</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s1">resolveMap</span>
<span class="s2">};</span>

<span class="s0">function </span><span class="s1">createSeq</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">, </span><span class="s1">obj</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">seq </span><span class="s2">= </span><span class="s0">new </span><span class="s1">YAMLSeq</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">);</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">obj </span><span class="s2">&amp;&amp; </span><span class="s1">obj</span><span class="s2">[</span><span class="s1">Symbol</span><span class="s2">.</span><span class="s1">iterator</span><span class="s2">]) {</span>
    <span class="s0">var </span><span class="s1">_iterator </span><span class="s2">= </span><span class="s1">_createForOfIteratorHelper</span><span class="s2">(</span><span class="s1">obj</span><span class="s2">),</span>
        <span class="s1">_step</span><span class="s2">;</span>

    <span class="s0">try </span><span class="s2">{</span>
      <span class="s0">for </span><span class="s2">(</span><span class="s1">_iterator</span><span class="s2">.</span><span class="s1">s</span><span class="s2">(); !(</span><span class="s1">_step </span><span class="s2">= </span><span class="s1">_iterator</span><span class="s2">.</span><span class="s1">n</span><span class="s2">()).</span><span class="s1">done</span><span class="s2">;) {</span>
        <span class="s0">var </span><span class="s1">it </span><span class="s2">= </span><span class="s1">_step</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
        <span class="s0">var </span><span class="s1">v </span><span class="s2">= </span><span class="s1">schema</span><span class="s2">.</span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">it</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">wrapScalars</span><span class="s2">, </span><span class="s0">null</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">);</span>
        <span class="s1">seq</span><span class="s2">.</span><span class="s1">items</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">v</span><span class="s2">);</span>
      <span class="s2">}</span>
    <span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">err</span><span class="s2">) {</span>
      <span class="s1">_iterator</span><span class="s2">.</span><span class="s1">e</span><span class="s2">(</span><span class="s1">err</span><span class="s2">);</span>
    <span class="s2">} </span><span class="s0">finally </span><span class="s2">{</span>
      <span class="s1">_iterator</span><span class="s2">.</span><span class="s1">f</span><span class="s2">();</span>
    <span class="s2">}</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">seq</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">var </span><span class="s1">seq </span><span class="s2">= {</span>
  <span class="s1">createNode</span><span class="s2">: </span><span class="s1">createSeq</span><span class="s2">,</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">nodeClass</span><span class="s2">: </span><span class="s1">YAMLSeq</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:seq'</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s1">resolveSeq</span>
<span class="s2">};</span>

<span class="s0">var </span><span class="s1">string </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'string'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:str'</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s1">resolveString</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">item</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">, </span><span class="s1">onComment</span><span class="s2">, </span><span class="s1">onChompKeep</span><span class="s2">) {</span>
    <span class="s1">ctx </span><span class="s2">= </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">assign</span><span class="s2">({</span>
      <span class="s1">actualString</span><span class="s2">: </span><span class="s0">true</span>
    <span class="s2">}, </span><span class="s1">ctx</span><span class="s2">);</span>
    <span class="s0">return </span><span class="s1">stringifyString</span><span class="s2">(</span><span class="s1">item</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">, </span><span class="s1">onComment</span><span class="s2">, </span><span class="s1">onChompKeep</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">strOptions</span>
<span class="s2">};</span>

<span class="s0">var </span><span class="s1">failsafe </span><span class="s2">= [</span><span class="s1">map</span><span class="s2">, </span><span class="s1">seq</span><span class="s2">, </span><span class="s1">string</span><span class="s2">];</span>

<span class="s5">/* global BigInt */</span>

<span class="s0">var </span><span class="s1">intIdentify$2 </span><span class="s2">= </span><span class="s0">function </span><span class="s1">intIdentify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
  <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'bigint' </span><span class="s2">|| </span><span class="s1">Number</span><span class="s2">.</span><span class="s1">isInteger</span><span class="s2">(</span><span class="s1">value</span><span class="s2">);</span>
<span class="s2">};</span>

<span class="s0">var </span><span class="s1">intResolve$1 </span><span class="s2">= </span><span class="s0">function </span><span class="s1">intResolve</span><span class="s2">(</span><span class="s1">src</span><span class="s2">, </span><span class="s1">part</span><span class="s2">, </span><span class="s1">radix</span><span class="s2">) {</span>
  <span class="s0">return </span><span class="s1">intOptions</span><span class="s2">.</span><span class="s1">asBigInt </span><span class="s2">? </span><span class="s1">BigInt</span><span class="s2">(</span><span class="s1">src</span><span class="s2">) : </span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">part</span><span class="s2">, </span><span class="s1">radix</span><span class="s2">);</span>
<span class="s2">};</span>

<span class="s0">function </span><span class="s1">intStringify$1</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">radix</span><span class="s2">, </span><span class="s1">prefix</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">value </span><span class="s2">= </span><span class="s1">node</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">intIdentify$2</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) &amp;&amp; </span><span class="s1">value </span><span class="s2">&gt;= </span><span class="s4">0</span><span class="s2">) </span><span class="s0">return </span><span class="s1">prefix </span><span class="s2">+ </span><span class="s1">value</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">(</span><span class="s1">radix</span><span class="s2">);</span>
  <span class="s0">return </span><span class="s1">stringifyNumber</span><span class="s2">(</span><span class="s1">node</span><span class="s2">);</span>
<span class="s2">}</span>

<span class="s0">var </span><span class="s1">nullObj </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">value </span><span class="s2">== </span><span class="s0">null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">createNode</span><span class="s2">: </span><span class="s0">function </span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">wrapScalars </span><span class="s2">? </span><span class="s0">new </span><span class="s1">Scalar</span><span class="s2">(</span><span class="s0">null</span><span class="s2">) : </span><span class="s0">null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:null'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^(?:~|[Nn]ull|NULL)?$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">() {</span>
    <span class="s0">return null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">nullOptions</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">() {</span>
    <span class="s0">return </span><span class="s1">nullOptions</span><span class="s2">.</span><span class="s1">nullStr</span><span class="s2">;</span>
  <span class="s2">}</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">boolObj </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'boolean'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:bool'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">str</span><span class="s2">[</span><span class="s4">0</span><span class="s2">] === </span><span class="s3">'t' </span><span class="s2">|| </span><span class="s1">str</span><span class="s2">[</span><span class="s4">0</span><span class="s2">] === </span><span class="s3">'T'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">boolOptions</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">_ref</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">value </span><span class="s2">= </span><span class="s1">_ref</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
    <span class="s0">return </span><span class="s1">value </span><span class="s2">? </span><span class="s1">boolOptions</span><span class="s2">.</span><span class="s1">trueStr </span><span class="s2">: </span><span class="s1">boolOptions</span><span class="s2">.</span><span class="s1">falseStr</span><span class="s2">;</span>
  <span class="s2">}</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">octObj </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intIdentify$2</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) &amp;&amp; </span><span class="s1">value </span><span class="s2">&gt;= </span><span class="s4">0</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:int'</span><span class="s2">,</span>
  <span class="s1">format</span><span class="s2">: </span><span class="s3">'OCT'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^0o([0-7]+)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">oct</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intResolve$1</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">oct</span><span class="s2">, </span><span class="s4">8</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">intOptions</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intStringify$1</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">8</span><span class="s2">, </span><span class="s3">'0o'</span><span class="s2">);</span>
  <span class="s2">}</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">intObj </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s1">intIdentify$2</span><span class="s2">,</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:int'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^[-+]?[0-9]+$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intResolve$1</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">str</span><span class="s2">, </span><span class="s4">10</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">intOptions</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyNumber</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">hexObj </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intIdentify$2</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) &amp;&amp; </span><span class="s1">value </span><span class="s2">&gt;= </span><span class="s4">0</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:int'</span><span class="s2">,</span>
  <span class="s1">format</span><span class="s2">: </span><span class="s3">'HEX'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^0x([0-9a-fA-F]+)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">hex</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intResolve$1</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">hex</span><span class="s2">, </span><span class="s4">16</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">intOptions</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intStringify$1</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">16</span><span class="s2">, </span><span class="s3">'0x'</span><span class="s2">);</span>
  <span class="s2">}</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">nanObj </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'number'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:float'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^(?:[-+]?\.inf|(\.nan))$/i</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">nan</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">nan </span><span class="s2">? </span><span class="s1">NaN </span><span class="s2">: </span><span class="s1">str</span><span class="s2">[</span><span class="s4">0</span><span class="s2">] === </span><span class="s3">'-' </span><span class="s2">? </span><span class="s1">Number</span><span class="s2">.</span><span class="s1">NEGATIVE_INFINITY </span><span class="s2">: </span><span class="s1">Number</span><span class="s2">.</span><span class="s1">POSITIVE_INFINITY</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyNumber</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">expObj </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'number'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:float'</span><span class="s2">,</span>
  <span class="s1">format</span><span class="s2">: </span><span class="s3">'EXP'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">parseFloat</span><span class="s2">(</span><span class="s1">str</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">_ref2</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">value </span><span class="s2">= </span><span class="s1">_ref2</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
    <span class="s0">return </span><span class="s1">Number</span><span class="s2">(</span><span class="s1">value</span><span class="s2">).</span><span class="s1">toExponential</span><span class="s2">();</span>
  <span class="s2">}</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">floatObj </span><span class="s2">= {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'number'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:float'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^[-+]?(?:\.([0-9]+)|[0-9]+\.([0-9]*))$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">frac1</span><span class="s2">, </span><span class="s1">frac2</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">frac </span><span class="s2">= </span><span class="s1">frac1 </span><span class="s2">|| </span><span class="s1">frac2</span><span class="s2">;</span>
    <span class="s0">var </span><span class="s1">node </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Scalar</span><span class="s2">(</span><span class="s1">parseFloat</span><span class="s2">(</span><span class="s1">str</span><span class="s2">));</span>
    <span class="s0">if </span><span class="s2">(</span><span class="s1">frac </span><span class="s2">&amp;&amp; </span><span class="s1">frac</span><span class="s2">[</span><span class="s1">frac</span><span class="s2">.</span><span class="s1">length </span><span class="s2">- </span><span class="s4">1</span><span class="s2">] === </span><span class="s3">'0'</span><span class="s2">) </span><span class="s1">node</span><span class="s2">.</span><span class="s1">minFractionDigits </span><span class="s2">= </span><span class="s1">frac</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span>
    <span class="s0">return </span><span class="s1">node</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyNumber</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">core </span><span class="s2">= </span><span class="s1">failsafe</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">([</span><span class="s1">nullObj</span><span class="s2">, </span><span class="s1">boolObj</span><span class="s2">, </span><span class="s1">octObj</span><span class="s2">, </span><span class="s1">intObj</span><span class="s2">, </span><span class="s1">hexObj</span><span class="s2">, </span><span class="s1">nanObj</span><span class="s2">, </span><span class="s1">expObj</span><span class="s2">, </span><span class="s1">floatObj</span><span class="s2">]);</span>

<span class="s5">/* global BigInt */</span>

<span class="s0">var </span><span class="s1">intIdentify$1 </span><span class="s2">= </span><span class="s0">function </span><span class="s1">intIdentify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
  <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'bigint' </span><span class="s2">|| </span><span class="s1">Number</span><span class="s2">.</span><span class="s1">isInteger</span><span class="s2">(</span><span class="s1">value</span><span class="s2">);</span>
<span class="s2">};</span>

<span class="s0">var </span><span class="s1">stringifyJSON </span><span class="s2">= </span><span class="s0">function </span><span class="s1">stringifyJSON</span><span class="s2">(</span><span class="s1">_ref</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">value </span><span class="s2">= </span><span class="s1">_ref</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
  <span class="s0">return </span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">);</span>
<span class="s2">};</span>

<span class="s0">var </span><span class="s1">json </span><span class="s2">= [</span><span class="s1">map</span><span class="s2">, </span><span class="s1">seq</span><span class="s2">, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'string'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:str'</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s1">resolveString</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyJSON</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">value </span><span class="s2">== </span><span class="s0">null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">createNode</span><span class="s2">: </span><span class="s0">function </span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">wrapScalars </span><span class="s2">? </span><span class="s0">new </span><span class="s1">Scalar</span><span class="s2">(</span><span class="s0">null</span><span class="s2">) : </span><span class="s0">null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:null'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^null$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">() {</span>
    <span class="s0">return null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyJSON</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'boolean'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:bool'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^true|false$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">str </span><span class="s2">=== </span><span class="s3">'true'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyJSON</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s1">intIdentify$1</span><span class="s2">,</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:int'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^-?(?:0|[1-9][0-9]*)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intOptions</span><span class="s2">.</span><span class="s1">asBigInt </span><span class="s2">? </span><span class="s1">BigInt</span><span class="s2">(</span><span class="s1">str</span><span class="s2">) : </span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s4">10</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">_ref2</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">value </span><span class="s2">= </span><span class="s1">_ref2</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
    <span class="s0">return </span><span class="s1">intIdentify$1</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) ? </span><span class="s1">value</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">() : </span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">);</span>
  <span class="s2">}</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'number'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:float'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">parseFloat</span><span class="s2">(</span><span class="s1">str</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyJSON</span>
<span class="s2">}];</span>

<span class="s1">json</span><span class="s2">.</span><span class="s1">scalarFallback </span><span class="s2">= </span><span class="s0">function </span><span class="s2">(</span><span class="s1">str</span><span class="s2">) {</span>
  <span class="s0">throw new </span><span class="s1">SyntaxError</span><span class="s2">(</span><span class="s3">&quot;Unresolved plain scalar &quot;</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">str</span><span class="s2">)));</span>
<span class="s2">};</span>

<span class="s5">/* global BigInt */</span>

<span class="s0">var </span><span class="s1">boolStringify </span><span class="s2">= </span><span class="s0">function </span><span class="s1">boolStringify</span><span class="s2">(</span><span class="s1">_ref</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">value </span><span class="s2">= </span><span class="s1">_ref</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
  <span class="s0">return </span><span class="s1">value </span><span class="s2">? </span><span class="s1">boolOptions</span><span class="s2">.</span><span class="s1">trueStr </span><span class="s2">: </span><span class="s1">boolOptions</span><span class="s2">.</span><span class="s1">falseStr</span><span class="s2">;</span>
<span class="s2">};</span>

<span class="s0">var </span><span class="s1">intIdentify </span><span class="s2">= </span><span class="s0">function </span><span class="s1">intIdentify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
  <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'bigint' </span><span class="s2">|| </span><span class="s1">Number</span><span class="s2">.</span><span class="s1">isInteger</span><span class="s2">(</span><span class="s1">value</span><span class="s2">);</span>
<span class="s2">};</span>

<span class="s0">function </span><span class="s1">intResolve</span><span class="s2">(</span><span class="s1">sign</span><span class="s2">, </span><span class="s1">src</span><span class="s2">, </span><span class="s1">radix</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">str </span><span class="s2">= </span><span class="s1">src</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/_/g</span><span class="s2">, </span><span class="s3">''</span><span class="s2">);</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">intOptions</span><span class="s2">.</span><span class="s1">asBigInt</span><span class="s2">) {</span>
    <span class="s0">switch </span><span class="s2">(</span><span class="s1">radix</span><span class="s2">) {</span>
      <span class="s0">case </span><span class="s4">2</span><span class="s2">:</span>
        <span class="s1">str </span><span class="s2">= </span><span class="s3">&quot;0b&quot;</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">str</span><span class="s2">);</span>
        <span class="s0">break</span><span class="s2">;</span>

      <span class="s0">case </span><span class="s4">8</span><span class="s2">:</span>
        <span class="s1">str </span><span class="s2">= </span><span class="s3">&quot;0o&quot;</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">str</span><span class="s2">);</span>
        <span class="s0">break</span><span class="s2">;</span>

      <span class="s0">case </span><span class="s4">16</span><span class="s2">:</span>
        <span class="s1">str </span><span class="s2">= </span><span class="s3">&quot;0x&quot;</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">str</span><span class="s2">);</span>
        <span class="s0">break</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s0">var </span><span class="s1">_n </span><span class="s2">= </span><span class="s1">BigInt</span><span class="s2">(</span><span class="s1">str</span><span class="s2">);</span>

    <span class="s0">return </span><span class="s1">sign </span><span class="s2">=== </span><span class="s3">'-' </span><span class="s2">? </span><span class="s1">BigInt</span><span class="s2">(-</span><span class="s4">1</span><span class="s2">) * </span><span class="s1">_n </span><span class="s2">: </span><span class="s1">_n</span><span class="s2">;</span>
  <span class="s2">}</span>

  <span class="s0">var </span><span class="s1">n </span><span class="s2">= </span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">radix</span><span class="s2">);</span>
  <span class="s0">return </span><span class="s1">sign </span><span class="s2">=== </span><span class="s3">'-' </span><span class="s2">? -</span><span class="s4">1 </span><span class="s2">* </span><span class="s1">n </span><span class="s2">: </span><span class="s1">n</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">intStringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s1">radix</span><span class="s2">, </span><span class="s1">prefix</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">value </span><span class="s2">= </span><span class="s1">node</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">intIdentify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">)) {</span>
    <span class="s0">var </span><span class="s1">str </span><span class="s2">= </span><span class="s1">value</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">(</span><span class="s1">radix</span><span class="s2">);</span>
    <span class="s0">return </span><span class="s1">value </span><span class="s2">&lt; </span><span class="s4">0 </span><span class="s2">? </span><span class="s3">'-' </span><span class="s2">+ </span><span class="s1">prefix </span><span class="s2">+ </span><span class="s1">str</span><span class="s2">.</span><span class="s1">substr</span><span class="s2">(</span><span class="s4">1</span><span class="s2">) : </span><span class="s1">prefix </span><span class="s2">+ </span><span class="s1">str</span><span class="s2">;</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">stringifyNumber</span><span class="s2">(</span><span class="s1">node</span><span class="s2">);</span>
<span class="s2">}</span>

<span class="s0">var </span><span class="s1">yaml11 </span><span class="s2">= </span><span class="s1">failsafe</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">([{</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">value </span><span class="s2">== </span><span class="s0">null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">createNode</span><span class="s2">: </span><span class="s0">function </span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">schema</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">wrapScalars </span><span class="s2">? </span><span class="s0">new </span><span class="s1">Scalar</span><span class="s2">(</span><span class="s0">null</span><span class="s2">) : </span><span class="s0">null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:null'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^(?:~|[Nn]ull|NULL)?$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">() {</span>
    <span class="s0">return null</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">nullOptions</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">() {</span>
    <span class="s0">return </span><span class="s1">nullOptions</span><span class="s2">.</span><span class="s1">nullStr</span><span class="s2">;</span>
  <span class="s2">}</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'boolean'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:bool'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">() {</span>
    <span class="s0">return true</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">boolOptions</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">boolStringify</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'boolean'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:bool'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">() {</span>
    <span class="s0">return false</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">options</span><span class="s2">: </span><span class="s1">boolOptions</span><span class="s2">,</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">boolStringify</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s1">intIdentify</span><span class="s2">,</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:int'</span><span class="s2">,</span>
  <span class="s1">format</span><span class="s2">: </span><span class="s3">'BIN'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^([-+]?)0b([0-1_]+)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">sign</span><span class="s2">, </span><span class="s1">bin</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intResolve</span><span class="s2">(</span><span class="s1">sign</span><span class="s2">, </span><span class="s1">bin</span><span class="s2">, </span><span class="s4">2</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intStringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s3">'0b'</span><span class="s2">);</span>
  <span class="s2">}</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s1">intIdentify</span><span class="s2">,</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:int'</span><span class="s2">,</span>
  <span class="s1">format</span><span class="s2">: </span><span class="s3">'OCT'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^([-+]?)0([0-7_]+)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">sign</span><span class="s2">, </span><span class="s1">oct</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intResolve</span><span class="s2">(</span><span class="s1">sign</span><span class="s2">, </span><span class="s1">oct</span><span class="s2">, </span><span class="s4">8</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intStringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">8</span><span class="s2">, </span><span class="s3">'0'</span><span class="s2">);</span>
  <span class="s2">}</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s1">intIdentify</span><span class="s2">,</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:int'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^([-+]?)([0-9][0-9_]*)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">sign</span><span class="s2">, </span><span class="s1">abs</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intResolve</span><span class="s2">(</span><span class="s1">sign</span><span class="s2">, </span><span class="s1">abs</span><span class="s2">, </span><span class="s4">10</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyNumber</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s1">intIdentify</span><span class="s2">,</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:int'</span><span class="s2">,</span>
  <span class="s1">format</span><span class="s2">: </span><span class="s3">'HEX'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^([-+]?)0x([0-9a-fA-F_]+)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">sign</span><span class="s2">, </span><span class="s1">hex</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intResolve</span><span class="s2">(</span><span class="s1">sign</span><span class="s2">, </span><span class="s1">hex</span><span class="s2">, </span><span class="s4">16</span><span class="s2">);</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">intStringify</span><span class="s2">(</span><span class="s1">node</span><span class="s2">, </span><span class="s4">16</span><span class="s2">, </span><span class="s3">'0x'</span><span class="s2">);</span>
  <span class="s2">}</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'number'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:float'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^(?:[-+]?\.inf|(\.nan))$/i</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">nan</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">nan </span><span class="s2">? </span><span class="s1">NaN </span><span class="s2">: </span><span class="s1">str</span><span class="s2">[</span><span class="s4">0</span><span class="s2">] === </span><span class="s3">'-' </span><span class="s2">? </span><span class="s1">Number</span><span class="s2">.</span><span class="s1">NEGATIVE_INFINITY </span><span class="s2">: </span><span class="s1">Number</span><span class="s2">.</span><span class="s1">POSITIVE_INFINITY</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyNumber</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'number'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:float'</span><span class="s2">,</span>
  <span class="s1">format</span><span class="s2">: </span><span class="s3">'EXP'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s1">parseFloat</span><span class="s2">(</span><span class="s1">str</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/_/g</span><span class="s2">, </span><span class="s3">''</span><span class="s2">));</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">_ref2</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">value </span><span class="s2">= </span><span class="s1">_ref2</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
    <span class="s0">return </span><span class="s1">Number</span><span class="s2">(</span><span class="s1">value</span><span class="s2">).</span><span class="s1">toExponential</span><span class="s2">();</span>
  <span class="s2">}</span>
<span class="s2">}, {</span>
  <span class="s1">identify</span><span class="s2">: </span><span class="s0">function </span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) {</span>
    <span class="s0">return typeof </span><span class="s1">value </span><span class="s2">=== </span><span class="s3">'number'</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s0">default</span><span class="s2">: </span><span class="s0">true</span><span class="s2">,</span>
  <span class="s1">tag</span><span class="s2">: </span><span class="s3">'tag:yaml.org,2002:float'</span><span class="s2">,</span>
  <span class="s1">test</span><span class="s2">: </span><span class="s6">/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/</span><span class="s2">,</span>
  <span class="s1">resolve</span><span class="s2">: </span><span class="s0">function </span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">str</span><span class="s2">, </span><span class="s1">frac</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">node </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Scalar</span><span class="s2">(</span><span class="s1">parseFloat</span><span class="s2">(</span><span class="s1">str</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/_/g</span><span class="s2">, </span><span class="s3">''</span><span class="s2">)));</span>

    <span class="s0">if </span><span class="s2">(</span><span class="s1">frac</span><span class="s2">) {</span>
      <span class="s0">var </span><span class="s1">f </span><span class="s2">= </span><span class="s1">frac</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/_/g</span><span class="s2">, </span><span class="s3">''</span><span class="s2">);</span>
      <span class="s0">if </span><span class="s2">(</span><span class="s1">f</span><span class="s2">[</span><span class="s1">f</span><span class="s2">.</span><span class="s1">length </span><span class="s2">- </span><span class="s4">1</span><span class="s2">] === </span><span class="s3">'0'</span><span class="s2">) </span><span class="s1">node</span><span class="s2">.</span><span class="s1">minFractionDigits </span><span class="s2">= </span><span class="s1">f</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s0">return </span><span class="s1">node</span><span class="s2">;</span>
  <span class="s2">},</span>
  <span class="s1">stringify</span><span class="s2">: </span><span class="s1">stringifyNumber</span>
<span class="s2">}], </span><span class="s1">binary</span><span class="s2">, </span><span class="s1">omap</span><span class="s2">, </span><span class="s1">pairs</span><span class="s2">, </span><span class="s1">set</span><span class="s2">, </span><span class="s1">intTime</span><span class="s2">, </span><span class="s1">floatTime</span><span class="s2">, </span><span class="s1">timestamp</span><span class="s2">);</span>

<span class="s0">var </span><span class="s1">schemas </span><span class="s2">= {</span>
  <span class="s1">core</span><span class="s2">: </span><span class="s1">core</span><span class="s2">,</span>
  <span class="s1">failsafe</span><span class="s2">: </span><span class="s1">failsafe</span><span class="s2">,</span>
  <span class="s1">json</span><span class="s2">: </span><span class="s1">json</span><span class="s2">,</span>
  <span class="s1">yaml11</span><span class="s2">: </span><span class="s1">yaml11</span>
<span class="s2">};</span>
<span class="s0">var </span><span class="s1">tags </span><span class="s2">= {</span>
  <span class="s1">binary</span><span class="s2">: </span><span class="s1">binary</span><span class="s2">,</span>
  <span class="s1">bool</span><span class="s2">: </span><span class="s1">boolObj</span><span class="s2">,</span>
  <span class="s1">float</span><span class="s2">: </span><span class="s1">floatObj</span><span class="s2">,</span>
  <span class="s1">floatExp</span><span class="s2">: </span><span class="s1">expObj</span><span class="s2">,</span>
  <span class="s1">floatNaN</span><span class="s2">: </span><span class="s1">nanObj</span><span class="s2">,</span>
  <span class="s1">floatTime</span><span class="s2">: </span><span class="s1">floatTime</span><span class="s2">,</span>
  <span class="s1">int</span><span class="s2">: </span><span class="s1">intObj</span><span class="s2">,</span>
  <span class="s1">intHex</span><span class="s2">: </span><span class="s1">hexObj</span><span class="s2">,</span>
  <span class="s1">intOct</span><span class="s2">: </span><span class="s1">octObj</span><span class="s2">,</span>
  <span class="s1">intTime</span><span class="s2">: </span><span class="s1">intTime</span><span class="s2">,</span>
  <span class="s1">map</span><span class="s2">: </span><span class="s1">map</span><span class="s2">,</span>
  <span class="s0">null</span><span class="s2">: </span><span class="s1">nullObj</span><span class="s2">,</span>
  <span class="s1">omap</span><span class="s2">: </span><span class="s1">omap</span><span class="s2">,</span>
  <span class="s1">pairs</span><span class="s2">: </span><span class="s1">pairs</span><span class="s2">,</span>
  <span class="s1">seq</span><span class="s2">: </span><span class="s1">seq</span><span class="s2">,</span>
  <span class="s1">set</span><span class="s2">: </span><span class="s1">set</span><span class="s2">,</span>
  <span class="s1">timestamp</span><span class="s2">: </span><span class="s1">timestamp</span>
<span class="s2">};</span>

<span class="s0">function </span><span class="s1">findTagObject</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tagName</span><span class="s2">, </span><span class="s1">tags</span><span class="s2">) {</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">tagName</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">match </span><span class="s2">= </span><span class="s1">tags</span><span class="s2">.</span><span class="s1">filter</span><span class="s2">(</span><span class="s0">function </span><span class="s2">(</span><span class="s1">t</span><span class="s2">) {</span>
      <span class="s0">return </span><span class="s1">t</span><span class="s2">.</span><span class="s1">tag </span><span class="s2">=== </span><span class="s1">tagName</span><span class="s2">;</span>
    <span class="s2">});</span>
    <span class="s0">var </span><span class="s1">tagObj </span><span class="s2">= </span><span class="s1">match</span><span class="s2">.</span><span class="s1">find</span><span class="s2">(</span><span class="s0">function </span><span class="s2">(</span><span class="s1">t</span><span class="s2">) {</span>
      <span class="s0">return </span><span class="s2">!</span><span class="s1">t</span><span class="s2">.</span><span class="s1">format</span><span class="s2">;</span>
    <span class="s2">}) || </span><span class="s1">match</span><span class="s2">[</span><span class="s4">0</span><span class="s2">];</span>
    <span class="s0">if </span><span class="s2">(!</span><span class="s1">tagObj</span><span class="s2">) </span><span class="s0">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s3">&quot;Tag &quot;</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">tagName</span><span class="s2">, </span><span class="s3">&quot; not found&quot;</span><span class="s2">));</span>
    <span class="s0">return </span><span class="s1">tagObj</span><span class="s2">;</span>
  <span class="s2">} </span><span class="s5">// TODO: deprecate/remove class check</span>


  <span class="s0">return </span><span class="s1">tags</span><span class="s2">.</span><span class="s1">find</span><span class="s2">(</span><span class="s0">function </span><span class="s2">(</span><span class="s1">t</span><span class="s2">) {</span>
    <span class="s0">return </span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">identify </span><span class="s2">&amp;&amp; </span><span class="s1">t</span><span class="s2">.</span><span class="s1">identify</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) || </span><span class="s1">t</span><span class="s2">.</span><span class="s1">class </span><span class="s2">&amp;&amp; </span><span class="s1">value </span><span class="s0">instanceof </span><span class="s1">t</span><span class="s2">.</span><span class="s1">class</span><span class="s2">) &amp;&amp; !</span><span class="s1">t</span><span class="s2">.</span><span class="s1">format</span><span class="s2">;</span>
  <span class="s2">});</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tagName</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) {</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">value </span><span class="s0">instanceof </span><span class="s1">Node</span><span class="s2">) </span><span class="s0">return </span><span class="s1">value</span><span class="s2">;</span>
  <span class="s0">var </span><span class="s1">defaultPrefix </span><span class="s2">= </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">defaultPrefix</span><span class="s2">,</span>
      <span class="s1">onTagObj </span><span class="s2">= </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">onTagObj</span><span class="s2">,</span>
      <span class="s1">prevObjects </span><span class="s2">= </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">prevObjects</span><span class="s2">,</span>
      <span class="s1">schema </span><span class="s2">= </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span>
      <span class="s1">wrapScalars </span><span class="s2">= </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">wrapScalars</span><span class="s2">;</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">tagName </span><span class="s2">&amp;&amp; </span><span class="s1">tagName</span><span class="s2">.</span><span class="s1">startsWith</span><span class="s2">(</span><span class="s3">'!!'</span><span class="s2">)) </span><span class="s1">tagName </span><span class="s2">= </span><span class="s1">defaultPrefix </span><span class="s2">+ </span><span class="s1">tagName</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s4">2</span><span class="s2">);</span>
  <span class="s0">var </span><span class="s1">tagObj </span><span class="s2">= </span><span class="s1">findTagObject</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tagName</span><span class="s2">, </span><span class="s1">schema</span><span class="s2">.</span><span class="s1">tags</span><span class="s2">);</span>

  <span class="s0">if </span><span class="s2">(!</span><span class="s1">tagObj</span><span class="s2">) {</span>
    <span class="s0">if </span><span class="s2">(</span><span class="s0">typeof </span><span class="s1">value</span><span class="s2">.</span><span class="s1">toJSON </span><span class="s2">=== </span><span class="s3">'function'</span><span class="s2">) </span><span class="s1">value </span><span class="s2">= </span><span class="s1">value</span><span class="s2">.</span><span class="s1">toJSON</span><span class="s2">();</span>
    <span class="s0">if </span><span class="s2">(!</span><span class="s1">value </span><span class="s2">|| </span><span class="s1">_typeof</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) !== </span><span class="s3">'object'</span><span class="s2">) </span><span class="s0">return </span><span class="s1">wrapScalars </span><span class="s2">? </span><span class="s0">new </span><span class="s1">Scalar</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) : </span><span class="s1">value</span><span class="s2">;</span>
    <span class="s1">tagObj </span><span class="s2">= </span><span class="s1">value </span><span class="s0">instanceof </span><span class="s1">Map </span><span class="s2">? </span><span class="s1">map </span><span class="s2">: </span><span class="s1">value</span><span class="s2">[</span><span class="s1">Symbol</span><span class="s2">.</span><span class="s1">iterator</span><span class="s2">] ? </span><span class="s1">seq </span><span class="s2">: </span><span class="s1">map</span><span class="s2">;</span>
  <span class="s2">}</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">onTagObj</span><span class="s2">) {</span>
    <span class="s1">onTagObj</span><span class="s2">(</span><span class="s1">tagObj</span><span class="s2">);</span>
    <span class="s0">delete </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">onTagObj</span><span class="s2">;</span>
  <span class="s2">} </span><span class="s5">// Detect duplicate references to the same object &amp; use Alias nodes for all</span>
  <span class="s5">// after first. The `obj` wrapper allows for circular references to resolve.</span>


  <span class="s0">var </span><span class="s1">obj </span><span class="s2">= {</span>
    <span class="s1">value</span><span class="s2">: </span><span class="s1">undefined</span><span class="s2">,</span>
    <span class="s1">node</span><span class="s2">: </span><span class="s1">undefined</span>
  <span class="s2">};</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">value </span><span class="s2">&amp;&amp; </span><span class="s1">_typeof</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) === </span><span class="s3">'object' </span><span class="s2">&amp;&amp; </span><span class="s1">prevObjects</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">prev </span><span class="s2">= </span><span class="s1">prevObjects</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">value</span><span class="s2">);</span>

    <span class="s0">if </span><span class="s2">(</span><span class="s1">prev</span><span class="s2">) {</span>
      <span class="s0">var </span><span class="s1">alias </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Alias</span><span class="s2">(</span><span class="s1">prev</span><span class="s2">); </span><span class="s5">// leaves source dirty; must be cleaned by caller</span>

      <span class="s1">ctx</span><span class="s2">.</span><span class="s1">aliasNodes</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">alias</span><span class="s2">); </span><span class="s5">// defined along with prevObjects</span>

      <span class="s0">return </span><span class="s1">alias</span><span class="s2">;</span>
    <span class="s2">}</span>

    <span class="s1">obj</span><span class="s2">.</span><span class="s1">value </span><span class="s2">= </span><span class="s1">value</span><span class="s2">;</span>
    <span class="s1">prevObjects</span><span class="s2">.</span><span class="s1">set</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">obj</span><span class="s2">);</span>
  <span class="s2">}</span>

  <span class="s1">obj</span><span class="s2">.</span><span class="s1">node </span><span class="s2">= </span><span class="s1">tagObj</span><span class="s2">.</span><span class="s1">createNode </span><span class="s2">? </span><span class="s1">tagObj</span><span class="s2">.</span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) : </span><span class="s1">wrapScalars </span><span class="s2">? </span><span class="s0">new </span><span class="s1">Scalar</span><span class="s2">(</span><span class="s1">value</span><span class="s2">) : </span><span class="s1">value</span><span class="s2">;</span>
  <span class="s0">if </span><span class="s2">(</span><span class="s1">tagName </span><span class="s2">&amp;&amp; </span><span class="s1">obj</span><span class="s2">.</span><span class="s1">node </span><span class="s0">instanceof </span><span class="s1">Node</span><span class="s2">) </span><span class="s1">obj</span><span class="s2">.</span><span class="s1">node</span><span class="s2">.</span><span class="s1">tag </span><span class="s2">= </span><span class="s1">tagName</span><span class="s2">;</span>
  <span class="s0">return </span><span class="s1">obj</span><span class="s2">.</span><span class="s1">node</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">function </span><span class="s1">getSchemaTags</span><span class="s2">(</span><span class="s1">schemas</span><span class="s2">, </span><span class="s1">knownTags</span><span class="s2">, </span><span class="s1">customTags</span><span class="s2">, </span><span class="s1">schemaId</span><span class="s2">) {</span>
  <span class="s0">var </span><span class="s1">tags </span><span class="s2">= </span><span class="s1">schemas</span><span class="s2">[</span><span class="s1">schemaId</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/\W/g</span><span class="s2">, </span><span class="s3">''</span><span class="s2">)]; </span><span class="s5">// 'yaml-1.1' -&gt; 'yaml11'</span>

  <span class="s0">if </span><span class="s2">(!</span><span class="s1">tags</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">keys </span><span class="s2">= </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">schemas</span><span class="s2">).</span><span class="s1">map</span><span class="s2">(</span><span class="s0">function </span><span class="s2">(</span><span class="s1">key</span><span class="s2">) {</span>
      <span class="s0">return </span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">key</span><span class="s2">);</span>
    <span class="s2">}).</span><span class="s1">join</span><span class="s2">(</span><span class="s3">', '</span><span class="s2">);</span>
    <span class="s0">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s3">&quot;Unknown schema </span><span class="s0">\&quot;</span><span class="s3">&quot;</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">schemaId</span><span class="s2">, </span><span class="s3">&quot;</span><span class="s0">\&quot;</span><span class="s3">; use one of &quot;</span><span class="s2">).</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">keys</span><span class="s2">));</span>
  <span class="s2">}</span>

  <span class="s0">if </span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">customTags</span><span class="s2">)) {</span>
    <span class="s0">var </span><span class="s1">_iterator </span><span class="s2">= </span><span class="s1">_createForOfIteratorHelper</span><span class="s2">(</span><span class="s1">customTags</span><span class="s2">),</span>
        <span class="s1">_step</span><span class="s2">;</span>

    <span class="s0">try </span><span class="s2">{</span>
      <span class="s0">for </span><span class="s2">(</span><span class="s1">_iterator</span><span class="s2">.</span><span class="s1">s</span><span class="s2">(); !(</span><span class="s1">_step </span><span class="s2">= </span><span class="s1">_iterator</span><span class="s2">.</span><span class="s1">n</span><span class="s2">()).</span><span class="s1">done</span><span class="s2">;) {</span>
        <span class="s0">var </span><span class="s1">tag </span><span class="s2">= </span><span class="s1">_step</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span>
        <span class="s1">tags </span><span class="s2">= </span><span class="s1">tags</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">tag</span><span class="s2">);</span>
      <span class="s2">}</span>
    <span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">err</span><span class="s2">) {</span>
      <span class="s1">_iterator</span><span class="s2">.</span><span class="s1">e</span><span class="s2">(</span><span class="s1">err</span><span class="s2">);</span>
    <span class="s2">} </span><span class="s0">finally </span><span class="s2">{</span>
      <span class="s1">_iterator</span><span class="s2">.</span><span class="s1">f</span><span class="s2">();</span>
    <span class="s2">}</span>
  <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s0">typeof </span><span class="s1">customTags </span><span class="s2">=== </span><span class="s3">'function'</span><span class="s2">) {</span>
    <span class="s1">tags </span><span class="s2">= </span><span class="s1">customTags</span><span class="s2">(</span><span class="s1">tags</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">());</span>
  <span class="s2">}</span>

  <span class="s0">for </span><span class="s2">(</span><span class="s0">var </span><span class="s1">i </span><span class="s2">= </span><span class="s4">0</span><span class="s2">; </span><span class="s1">i </span><span class="s2">&lt; </span><span class="s1">tags</span><span class="s2">.</span><span class="s1">length</span><span class="s2">; ++</span><span class="s1">i</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">_tag </span><span class="s2">= </span><span class="s1">tags</span><span class="s2">[</span><span class="s1">i</span><span class="s2">];</span>

    <span class="s0">if </span><span class="s2">(</span><span class="s0">typeof </span><span class="s1">_tag </span><span class="s2">=== </span><span class="s3">'string'</span><span class="s2">) {</span>
      <span class="s0">var </span><span class="s1">tagObj </span><span class="s2">= </span><span class="s1">knownTags</span><span class="s2">[</span><span class="s1">_tag</span><span class="s2">];</span>

      <span class="s0">if </span><span class="s2">(!</span><span class="s1">tagObj</span><span class="s2">) {</span>
        <span class="s0">var </span><span class="s1">_keys </span><span class="s2">= </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">knownTags</span><span class="s2">).</span><span class="s1">map</span><span class="s2">(</span><span class="s0">function </span><span class="s2">(</span><span class="s1">key</span><span class="s2">) {</span>
          <span class="s0">return </span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">key</span><span class="s2">);</span>
        <span class="s2">}).</span><span class="s1">join</span><span class="s2">(</span><span class="s3">', '</span><span class="s2">);</span>

        <span class="s0">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s3">&quot;Unknown custom tag </span><span class="s0">\&quot;</span><span class="s3">&quot;</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">_tag</span><span class="s2">, </span><span class="s3">&quot;</span><span class="s0">\&quot;</span><span class="s3">; use one of &quot;</span><span class="s2">).</span><span class="s1">concat</span><span class="s2">(</span><span class="s1">_keys</span><span class="s2">));</span>
      <span class="s2">}</span>

      <span class="s1">tags</span><span class="s2">[</span><span class="s1">i</span><span class="s2">] = </span><span class="s1">tagObj</span><span class="s2">;</span>
    <span class="s2">}</span>
  <span class="s2">}</span>

  <span class="s0">return </span><span class="s1">tags</span><span class="s2">;</span>
<span class="s2">}</span>

<span class="s0">var </span><span class="s1">sortMapEntriesByKey </span><span class="s2">= </span><span class="s0">function </span><span class="s1">sortMapEntriesByKey</span><span class="s2">(</span><span class="s1">a</span><span class="s2">, </span><span class="s1">b</span><span class="s2">) {</span>
  <span class="s0">return </span><span class="s1">a</span><span class="s2">.</span><span class="s1">key </span><span class="s2">&lt; </span><span class="s1">b</span><span class="s2">.</span><span class="s1">key </span><span class="s2">? -</span><span class="s4">1 </span><span class="s2">: </span><span class="s1">a</span><span class="s2">.</span><span class="s1">key </span><span class="s2">&gt; </span><span class="s1">b</span><span class="s2">.</span><span class="s1">key </span><span class="s2">? </span><span class="s4">1 </span><span class="s2">: </span><span class="s4">0</span><span class="s2">;</span>
<span class="s2">};</span>

<span class="s0">var </span><span class="s1">Schema </span><span class="s2">= </span><span class="s5">/*#__PURE__*/</span><span class="s0">function </span><span class="s2">() {</span>
  <span class="s5">// TODO: remove in v2</span>
  <span class="s5">// TODO: remove in v2</span>
  <span class="s0">function </span><span class="s1">Schema</span><span class="s2">(</span><span class="s1">_ref</span><span class="s2">) {</span>
    <span class="s0">var </span><span class="s1">customTags </span><span class="s2">= </span><span class="s1">_ref</span><span class="s2">.</span><span class="s1">customTags</span><span class="s2">,</span>
        <span class="s1">merge </span><span class="s2">= </span><span class="s1">_ref</span><span class="s2">.</span><span class="s1">merge</span><span class="s2">,</span>
        <span class="s1">schema </span><span class="s2">= </span><span class="s1">_ref</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span>
        <span class="s1">sortMapEntries </span><span class="s2">= </span><span class="s1">_ref</span><span class="s2">.</span><span class="s1">sortMapEntries</span><span class="s2">,</span>
        <span class="s1">deprecatedCustomTags </span><span class="s2">= </span><span class="s1">_ref</span><span class="s2">.</span><span class="s1">tags</span><span class="s2">;</span>

    <span class="s1">_classCallCheck</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s1">Schema</span><span class="s2">);</span>

    <span class="s0">this</span><span class="s2">.</span><span class="s1">merge </span><span class="s2">= !!</span><span class="s1">merge</span><span class="s2">;</span>
    <span class="s0">this</span><span class="s2">.</span><span class="s1">name </span><span class="s2">= </span><span class="s1">schema</span><span class="s2">;</span>
    <span class="s0">this</span><span class="s2">.</span><span class="s1">sortMapEntries </span><span class="s2">= </span><span class="s1">sortMapEntries </span><span class="s2">=== </span><span class="s0">true </span><span class="s2">? </span><span class="s1">sortMapEntriesByKey </span><span class="s2">: </span><span class="s1">sortMapEntries </span><span class="s2">|| </span><span class="s0">null</span><span class="s2">;</span>
    <span class="s0">if </span><span class="s2">(!</span><span class="s1">customTags </span><span class="s2">&amp;&amp; </span><span class="s1">deprecatedCustomTags</span><span class="s2">) </span><span class="s1">warnOptionDeprecation</span><span class="s2">(</span><span class="s3">'tags'</span><span class="s2">, </span><span class="s3">'customTags'</span><span class="s2">);</span>
    <span class="s0">this</span><span class="s2">.</span><span class="s1">tags </span><span class="s2">= </span><span class="s1">getSchemaTags</span><span class="s2">(</span><span class="s1">schemas</span><span class="s2">, </span><span class="s1">tags</span><span class="s2">, </span><span class="s1">customTags </span><span class="s2">|| </span><span class="s1">deprecatedCustomTags</span><span class="s2">, </span><span class="s1">schema</span><span class="s2">);</span>
  <span class="s2">}</span>

  <span class="s1">_createClass</span><span class="s2">(</span><span class="s1">Schema</span><span class="s2">, [{</span>
    <span class="s1">key</span><span class="s2">: </span><span class="s3">&quot;createNode&quot;</span><span class="s2">,</span>
    <span class="s1">value</span><span class="s2">: </span><span class="s0">function </span><span class="s1">createNode$1</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">wrapScalars</span><span class="s2">, </span><span class="s1">tagName</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) {</span>
      <span class="s0">var </span><span class="s1">baseCtx </span><span class="s2">= {</span>
        <span class="s1">defaultPrefix</span><span class="s2">: </span><span class="s1">Schema</span><span class="s2">.</span><span class="s1">defaultPrefix</span><span class="s2">,</span>
        <span class="s1">schema</span><span class="s2">: </span><span class="s0">this</span><span class="s2">,</span>
        <span class="s1">wrapScalars</span><span class="s2">: </span><span class="s1">wrapScalars</span>
      <span class="s2">};</span>
      <span class="s0">var </span><span class="s1">createCtx </span><span class="s2">= </span><span class="s1">ctx </span><span class="s2">? </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">assign</span><span class="s2">(</span><span class="s1">ctx</span><span class="s2">, </span><span class="s1">baseCtx</span><span class="s2">) : </span><span class="s1">baseCtx</span><span class="s2">;</span>
      <span class="s0">return </span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">tagName</span><span class="s2">, </span><span class="s1">createCtx</span><span class="s2">);</span>
    <span class="s2">}</span>
  <span class="s2">}, {</span>
    <span class="s1">key</span><span class="s2">: </span><span class="s3">&quot;createPair&quot;</span><span class="s2">,</span>
    <span class="s1">value</span><span class="s2">: </span><span class="s0">function </span><span class="s1">createPair</span><span class="s2">(</span><span class="s1">key</span><span class="s2">, </span><span class="s1">value</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">) {</span>
      <span class="s0">if </span><span class="s2">(!</span><span class="s1">ctx</span><span class="s2">) </span><span class="s1">ctx </span><span class="s2">= {</span>
        <span class="s1">wrapScalars</span><span class="s2">: </span><span class="s0">true</span>
      <span class="s2">};</span>
      <span class="s0">var </span><span class="s1">k </span><span class="s2">= </span><span class="s0">this</span><span class="s2">.</span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">key</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">wrapScalars</span><span class="s2">, </span><span class="s0">null</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">);</span>
      <span class="s0">var </span><span class="s1">v </span><span class="s2">= </span><span class="s0">this</span><span class="s2">.</span><span class="s1">createNode</span><span class="s2">(</span><span class="s1">value</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">.</span><span class="s1">wrapScalars</span><span class="s2">, </span><span class="s0">null</span><span class="s2">, </span><span class="s1">ctx</span><span class="s2">);</span>
      <span class="s0">return new </span><span class="s1">Pair</span><span class="s2">(</span><span class="s1">k</span><span class="s2">, </span><span class="s1">v</span><span class="s2">);</span>
    <span class="s2">}</span>
  <span class="s2">}]);</span>

  <span class="s0">return </span><span class="s1">Schema</span><span class="s2">;</span>
<span class="s2">}();</span>

<span class="s1">_defineProperty</span><span class="s2">(</span><span class="s1">Schema</span><span class="s2">, </span><span class="s3">&quot;defaultPrefix&quot;</span><span class="s2">, </span><span class="s1">defaultTagPrefix</span><span class="s2">);</span>

<span class="s1">_defineProperty</span><span class="s2">(</span><span class="s1">Schema</span><span class="s2">, </span><span class="s3">&quot;defaultTags&quot;</span><span class="s2">, </span><span class="s1">defaultTags</span><span class="s2">);</span>

<span class="s0">export </span><span class="s2">{ </span><span class="s1">Schema </span><span class="s2">as </span><span class="s1">S </span><span class="s2">};</span>
</pre>
</body>
</html>