<html>
<head>
<title>JavascriptParser.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #bcbec4;}
.s4 { color: #cf8e6d;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #67a37c; font-style: italic;}
.s7 { color: #2aacb8;}
.s8 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
JavascriptParser.js</font>
</center></td></tr></table>
<pre><span class="s0">/* 
    MIT License http://www.opensource.org/licenses/mit-license.php 
    Author Tobias Koppers @sokra 
*/</span>

<span class="s2">&quot;use strict&quot;</span><span class="s3">;</span>

<span class="s4">const </span><span class="s3">{ </span><span class="s1">Parser</span><span class="s3">: </span><span class="s1">AcornParser </span><span class="s3">} = </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;acorn&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s3">{ </span><span class="s1">importAssertions </span><span class="s3">} = </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;acorn-import-assertions&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s3">{ </span><span class="s1">SyncBailHook</span><span class="s3">, </span><span class="s1">HookMap </span><span class="s3">} = </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;tapable&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">vm </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;vm&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">Parser </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../Parser&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">StackedMap </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../util/StackedMap&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">binarySearchBounds </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../util/binarySearchBounds&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">memoize </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../util/memoize&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">BasicEvaluatedExpression </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;./BasicEvaluatedExpression&quot;</span><span class="s3">);</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;acorn&quot;).Options} AcornOptions */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).AssignmentExpression} AssignmentExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).BinaryExpression} BinaryExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).BlockStatement} BlockStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).SequenceExpression} SequenceExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).CallExpression} CallExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).BaseCallExpression} BaseCallExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).StaticBlock} StaticBlock */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ImportExpression} ImportExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ClassDeclaration} ClassDeclaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ForStatement} ForStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).SwitchStatement} SwitchStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ExportNamedDeclaration} ExportNamedDeclaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ClassExpression} ClassExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Comment} Comment */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ConditionalExpression} ConditionalExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Declaration} Declaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).PrivateIdentifier} PrivateIdentifier */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).PropertyDefinition} PropertyDefinition */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Expression} Expression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Identifier} Identifier */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).VariableDeclaration} VariableDeclaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).IfStatement} IfStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).LabeledStatement} LabeledStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Literal} Literal */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).LogicalExpression} LogicalExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ChainExpression} ChainExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).MemberExpression} MemberExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).YieldExpression} YieldExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).MetaProperty} MetaProperty */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Property} Property */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).AssignmentPattern} AssignmentPattern */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ChainElement} ChainElement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Pattern} Pattern */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).UpdateExpression} UpdateExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ObjectExpression} ObjectExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).UnaryExpression} UnaryExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ArrayExpression} ArrayExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ArrayPattern} ArrayPattern */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).AwaitExpression} AwaitExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ThisExpression} ThisExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).RestElement} RestElement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ObjectPattern} ObjectPattern */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).SwitchCase} SwitchCase */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).CatchClause} CatchClause */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).VariableDeclarator} VariableDeclarator */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ForInStatement} ForInStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ForOfStatement} ForOfStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ReturnStatement} ReturnStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).WithStatement} WithStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ThrowStatement} ThrowStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).MethodDefinition} MethodDefinition */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ModuleDeclaration} ModuleDeclaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).NewExpression} NewExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).SpreadElement} SpreadElement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).FunctionExpression} FunctionExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).WhileStatement} WhileStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ArrowFunctionExpression} ArrowFunctionExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ExpressionStatement} ExpressionStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).FunctionDeclaration} FunctionDeclaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).DoWhileStatement} DoWhileStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).TryStatement} TryStatement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Node} AnyNode */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Program} Program */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Directive} Directive */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Statement} Statement */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ImportDeclaration} ImportDeclaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ExportDefaultDeclaration} ExportDefaultDeclaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).ExportAllDeclaration} ExportAllDeclaration */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).Super} Super */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).TaggedTemplateExpression} TaggedTemplateExpression */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;estree&quot;).TemplateLiteral} TemplateLiteral */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{Record&lt;string, any&gt;} Assertions */</span>
<span class="s5">/** </span><span class="s6">@template </span><span class="s5">T @typedef {import(&quot;tapable&quot;).AsArray&lt;T&gt;} AsArray&lt;T&gt; */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Parser&quot;).ParserState} ParserState */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Parser&quot;).PreparsedAst} PreparsedAst */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{{declaredScope: ScopeInfo, freeName: string | true, tagInfo: TagInfo | undefined}} VariableInfoInterface */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{{ name: string | VariableInfo, rootInfo: string | VariableInfo, getMembers: () =&gt; string[], getMembersOptionals: () =&gt; boolean[], getMemberRanges: () =&gt; Range[] }} GetInfoResult */</span>

<span class="s4">const </span><span class="s1">EMPTY_ARRAY </span><span class="s3">= [];</span>
<span class="s4">const </span><span class="s1">ALLOWED_MEMBER_TYPES_CALL_EXPRESSION </span><span class="s3">= </span><span class="s7">0b01</span><span class="s3">;</span>
<span class="s4">const </span><span class="s1">ALLOWED_MEMBER_TYPES_EXPRESSION </span><span class="s3">= </span><span class="s7">0b10</span><span class="s3">;</span>
<span class="s4">const </span><span class="s1">ALLOWED_MEMBER_TYPES_ALL </span><span class="s3">= </span><span class="s7">0b11</span><span class="s3">;</span>

<span class="s0">// Syntax: https://developer.mozilla.org/en/SpiderMonkey/Parser_API</span>

<span class="s4">const </span><span class="s1">parser </span><span class="s3">= </span><span class="s1">AcornParser</span><span class="s3">.</span><span class="s1">extend</span><span class="s3">(</span><span class="s1">importAssertions</span><span class="s3">);</span>

<span class="s4">class </span><span class="s1">VariableInfo </span><span class="s3">{</span>
	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ScopeInfo} declaredScope scope in which the variable is declared</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string | true | undefined} freeName which free name the variable aliases, or true when none</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TagInfo | undefined} tagInfo info about tags</span>
	 <span class="s5">*/</span>
	<span class="s1">constructor</span><span class="s3">(</span><span class="s1">declaredScope</span><span class="s3">, </span><span class="s1">freeName</span><span class="s3">, </span><span class="s1">tagInfo</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">declaredScope </span><span class="s3">= </span><span class="s1">declaredScope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">freeName </span><span class="s3">= </span><span class="s1">freeName</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">tagInfo </span><span class="s3">= </span><span class="s1">tagInfo</span><span class="s3">;</span>
	<span class="s3">}</span>
<span class="s3">}</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{string | ScopeInfo | VariableInfo} ExportedVariableInfo */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{Literal | string | null | undefined} ImportSource */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{Omit&lt;AcornOptions, &quot;sourceType&quot; | &quot;ecmaVersion&quot;&gt; &amp; { sourceType: &quot;module&quot; | &quot;script&quot; | &quot;auto&quot;, ecmaVersion?: AcornOptions[&quot;ecmaVersion&quot;] }} ParseOptions */</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} TagInfo</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{any} tag</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{any} data</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{TagInfo | undefined} next</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} ScopeInfo</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StackedMap&lt;string, VariableInfo | ScopeInfo&gt;} definitions</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean | &quot;arrow&quot;} topLevelScope</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean | string} inShorthand</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} inTaggedTemplateTag</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} inTry</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} isStrict</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} isAsmJs</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{[number, number]} Range */</span>

<span class="s5">/**</span>
 <span class="s5">* Helper function for joining two ranges into a single range. This is useful</span>
 <span class="s5">* when working with AST nodes, as it allows you to combine the ranges of child nodes</span>
 <span class="s5">* to create the range of the _parent node_.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{[number, number]} startRange start range to join</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{[number, number]} endRange end range to join</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{[number, number]} joined range</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@example</span>
 <span class="s5">* ```js</span>
 <span class="s5">* 	const startRange = [0, 5];</span>
 <span class="s5">* 	const endRange = [10, 15];</span>
 <span class="s5">* 	const joinedRange = joinRanges(startRange, endRange);</span>
 <span class="s5">* 	console.log(joinedRange); // [0, 15]</span>
 <span class="s5">* ```</span>
 <span class="s5">*</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">joinRanges </span><span class="s3">= (</span><span class="s1">startRange</span><span class="s3">, </span><span class="s1">endRange</span><span class="s3">) =&gt; {</span>
	<span class="s4">if </span><span class="s3">(!</span><span class="s1">endRange</span><span class="s3">) </span><span class="s4">return </span><span class="s1">startRange</span><span class="s3">;</span>
	<span class="s4">if </span><span class="s3">(!</span><span class="s1">startRange</span><span class="s3">) </span><span class="s4">return </span><span class="s1">endRange</span><span class="s3">;</span>
	<span class="s4">return </span><span class="s3">[</span><span class="s1">startRange</span><span class="s3">[</span><span class="s7">0</span><span class="s3">], </span><span class="s1">endRange</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]];</span>
<span class="s3">};</span>

<span class="s5">/**</span>
 <span class="s5">* Helper function used to generate a string representation of a</span>
 <span class="s5">* [member expression](https://github.com/estree/estree/blob/master/es5.md#memberexpression).</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} object object to name</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string[]} membersReversed reversed list of members</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} member expression as a string</span>
 <span class="s5">* </span><span class="s6">@example</span>
 <span class="s5">* ```js</span>
 <span class="s5">* const membersReversed = [&quot;property1&quot;, &quot;property2&quot;, &quot;property3&quot;]; // Members parsed from the AST</span>
 <span class="s5">* const name = objectAndMembersToName(&quot;myObject&quot;, membersReversed);</span>
 <span class="s5">*</span>
 <span class="s5">* console.log(name); // &quot;myObject.property1.property2.property3&quot;</span>
 <span class="s5">* ```</span>
 <span class="s5">*</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">objectAndMembersToName </span><span class="s3">= (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">membersReversed</span><span class="s3">) =&gt; {</span>
	<span class="s4">let </span><span class="s1">name </span><span class="s3">= </span><span class="s1">object</span><span class="s3">;</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s1">membersReversed</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&gt;= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i</span><span class="s3">--) {</span>
		<span class="s1">name </span><span class="s3">= </span><span class="s1">name </span><span class="s3">+ </span><span class="s2">&quot;.&quot; </span><span class="s3">+ </span><span class="s1">membersReversed</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">name</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s5">/**</span>
 <span class="s5">* Grabs the name of a given expression and returns it as a string or undefined. Has particular</span>
 <span class="s5">* handling for [Identifiers](https://github.com/estree/estree/blob/master/es5.md#identifier),</span>
 <span class="s5">* [ThisExpressions](https://github.com/estree/estree/blob/master/es5.md#identifier), and</span>
 <span class="s5">* [MetaProperties](https://github.com/estree/estree/blob/master/es2015.md#metaproperty) which is</span>
 <span class="s5">* specifically for handling the `new.target` meta property.</span>
 <span class="s5">*</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Expression | Super} expression expression</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string | &quot;this&quot; | undefined} name or variable info</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">getRootName </span><span class="s3">= </span><span class="s1">expression </span><span class="s3">=&gt; {</span>
	<span class="s4">switch </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
		<span class="s4">case </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">:</span>
			<span class="s4">return </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
		<span class="s4">case </span><span class="s2">&quot;ThisExpression&quot;</span><span class="s3">:</span>
			<span class="s4">return </span><span class="s2">&quot;this&quot;</span><span class="s3">;</span>
		<span class="s4">case </span><span class="s2">&quot;MetaProperty&quot;</span><span class="s3">:</span>
			<span class="s4">return </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">meta</span><span class="s3">.</span><span class="s1">name</span><span class="s3">}</span><span class="s2">.</span><span class="s1">$</span><span class="s3">{</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">name</span><span class="s3">}</span><span class="s2">`</span><span class="s3">;</span>
		<span class="s4">default</span><span class="s3">:</span>
			<span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{AcornOptions} */</span>
<span class="s4">const </span><span class="s1">defaultParserOptions </span><span class="s3">= {</span>
	<span class="s1">ranges</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
	<span class="s1">locations</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
	<span class="s1">ecmaVersion</span><span class="s3">: </span><span class="s2">&quot;latest&quot;</span><span class="s3">,</span>
	<span class="s1">sourceType</span><span class="s3">: </span><span class="s2">&quot;module&quot;</span><span class="s3">,</span>
	<span class="s0">// https://github.com/tc39/proposal-hashbang</span>
	<span class="s1">allowHashBang</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
	<span class="s1">onComment</span><span class="s3">: </span><span class="s4">null</span>
<span class="s3">};</span>

<span class="s0">// regexp to match at least one &quot;magic comment&quot;</span>
<span class="s4">const </span><span class="s1">webpackCommentRegExp </span><span class="s3">= </span><span class="s4">new </span><span class="s1">RegExp</span><span class="s3">(</span><span class="s8">/(^|\W)webpack[A-Z]{1,}[A-Za-z]{1,}:/</span><span class="s3">);</span>

<span class="s4">const </span><span class="s1">EMPTY_COMMENT_OPTIONS </span><span class="s3">= {</span>
	<span class="s1">options</span><span class="s3">: </span><span class="s4">null</span><span class="s3">,</span>
	<span class="s1">errors</span><span class="s3">: </span><span class="s4">null</span>
<span class="s3">};</span>

<span class="s4">class </span><span class="s1">JavascriptParser </span><span class="s4">extends </span><span class="s1">Parser </span><span class="s3">{</span>
	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{&quot;module&quot; | &quot;script&quot; | &quot;auto&quot;} sourceType default source type</span>
	 <span class="s5">*/</span>
	<span class="s1">constructor</span><span class="s3">(</span><span class="s1">sourceType </span><span class="s3">= </span><span class="s2">&quot;auto&quot;</span><span class="s3">) {</span>
		<span class="s4">super</span><span class="s3">();</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">freeze</span><span class="s3">({</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[UnaryExpression], BasicEvaluatedExpression | undefined | null&gt;&gt;} */</span>
			<span class="s1">evaluateTypeof</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Expression], BasicEvaluatedExpression | undefined | null&gt;&gt;} */</span>
			<span class="s1">evaluate</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Identifier | ThisExpression | MemberExpression | MetaProperty], BasicEvaluatedExpression | undefined | null&gt;&gt;} */</span>
			<span class="s1">evaluateIdentifier</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Identifier | ThisExpression | MemberExpression], BasicEvaluatedExpression | undefined | null&gt;&gt;} */</span>
			<span class="s1">evaluateDefinedIdentifier</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[NewExpression], BasicEvaluatedExpression | undefined | null&gt;&gt;} */</span>
			<span class="s1">evaluateNewExpression</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[CallExpression], BasicEvaluatedExpression | undefined | null&gt;&gt;} */</span>
			<span class="s1">evaluateCallExpression</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[CallExpression, BasicEvaluatedExpression | undefined], BasicEvaluatedExpression | undefined | null&gt;&gt;} */</span>
			<span class="s1">evaluateCallExpressionMember</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">, </span><span class="s2">&quot;param&quot;</span><span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Expression | Declaration | PrivateIdentifier, number], boolean | void&gt;&gt;} */</span>
			<span class="s1">isPure</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">, </span><span class="s2">&quot;commentsStartPosition&quot;</span><span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[Statement | ModuleDeclaration], boolean | void&gt;} */</span>
			<span class="s1">preStatement</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">]),</span>

			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[Statement | ModuleDeclaration], boolean | void&gt;} */</span>
			<span class="s1">blockPreStatement</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;declaration&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[Statement | ModuleDeclaration], boolean | void&gt;} */</span>
			<span class="s1">statement</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[IfStatement], boolean | void&gt;} */</span>
			<span class="s1">statementIf</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[Expression, ClassExpression | ClassDeclaration], boolean | void&gt;} */</span>
			<span class="s1">classExtendsExpression</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
				<span class="s2">&quot;expression&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;classDefinition&quot;</span>
			<span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[MethodDefinition | PropertyDefinition | StaticBlock, ClassExpression | ClassDeclaration], boolean | void&gt;} */</span>
			<span class="s1">classBodyElement</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;element&quot;</span><span class="s3">, </span><span class="s2">&quot;classDefinition&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[Expression, MethodDefinition | PropertyDefinition, ClassExpression | ClassDeclaration], boolean | void&gt;} */</span>
			<span class="s1">classBodyValue</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
				<span class="s2">&quot;expression&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;element&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;classDefinition&quot;</span>
			<span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[LabeledStatement], boolean | void&gt;&gt;} */</span>
			<span class="s1">label</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ImportDeclaration, ImportSource], boolean | void&gt;} */</span>
			<span class="s4">import</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">, </span><span class="s2">&quot;source&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ImportDeclaration, ImportSource, string, string], boolean | void&gt;} */</span>
			<span class="s1">importSpecifier</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
				<span class="s2">&quot;statement&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;source&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;exportName&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;identifierName&quot;</span>
			<span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ExportNamedDeclaration | ExportAllDeclaration], boolean | void&gt;} */</span>
			<span class="s4">export</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ExportNamedDeclaration | ExportAllDeclaration, ImportSource], boolean | void&gt;} */</span>
			<span class="s1">exportImport</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">, </span><span class="s2">&quot;source&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ExportNamedDeclaration | ExportAllDeclaration, Declaration], boolean | void&gt;} */</span>
			<span class="s1">exportDeclaration</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">, </span><span class="s2">&quot;declaration&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ExportDefaultDeclaration, Declaration], boolean | void&gt;} */</span>
			<span class="s1">exportExpression</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;statement&quot;</span><span class="s3">, </span><span class="s2">&quot;declaration&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ExportNamedDeclaration | ExportAllDeclaration, string, string, number | undefined], boolean | void&gt;} */</span>
			<span class="s1">exportSpecifier</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
				<span class="s2">&quot;statement&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;identifierName&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;exportName&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;index&quot;</span>
			<span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ExportNamedDeclaration | ExportAllDeclaration, ImportSource, string, string, number | undefined], boolean | void&gt;} */</span>
			<span class="s1">exportImportSpecifier</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
				<span class="s2">&quot;statement&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;source&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;identifierName&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;exportName&quot;</span><span class="s3">,</span>
				<span class="s2">&quot;index&quot;</span>
			<span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[VariableDeclarator, Statement], boolean | void&gt;} */</span>
			<span class="s1">preDeclarator</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;declarator&quot;</span><span class="s3">, </span><span class="s2">&quot;statement&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[VariableDeclarator, Statement], boolean | void&gt;} */</span>
			<span class="s1">declarator</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;declarator&quot;</span><span class="s3">, </span><span class="s2">&quot;statement&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Declaration], boolean | void&gt;&gt;} */</span>
			<span class="s1">varDeclaration</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;declaration&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Declaration], boolean | void&gt;&gt;} */</span>
			<span class="s1">varDeclarationLet</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;declaration&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Declaration], boolean | void&gt;&gt;} */</span>
			<span class="s1">varDeclarationConst</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;declaration&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Declaration], boolean | void&gt;&gt;} */</span>
			<span class="s1">varDeclarationVar</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;declaration&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Identifier], boolean | void&gt;&gt;} */</span>
			<span class="s1">pattern</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;pattern&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Expression], boolean | void&gt;&gt;} */</span>
			<span class="s1">canRename</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;initExpression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Expression], boolean | void&gt;&gt;} */</span>
			<span class="s1">rename</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;initExpression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[AssignmentExpression], boolean | void&gt;&gt;} */</span>
			<span class="s1">assign</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[AssignmentExpression, string[]], boolean | void&gt;&gt;} */</span>
			<span class="s1">assignMemberChain</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">, </span><span class="s2">&quot;members&quot;</span><span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Expression], boolean | void&gt;&gt;} */</span>
			<span class="s4">typeof</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ImportExpression], boolean | void&gt;} */</span>
			<span class="s1">importCall</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[Expression], boolean | void&gt;} */</span>
			<span class="s1">topLevelAwait</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[CallExpression], boolean | void&gt;&gt;} */</span>
			<span class="s1">call</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** Something like &quot;a.b()&quot; */</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[CallExpression, string[], boolean[], Range[]], boolean | void&gt;&gt;} */</span>
			<span class="s1">callMemberChain</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt;</span>
					<span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
						<span class="s2">&quot;expression&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;members&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;membersOptionals&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;memberRanges&quot;</span>
					<span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** Something like &quot;a.b().c.d&quot; */</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Expression, string[], CallExpression, string[], Range[]], boolean | void&gt;&gt;} */</span>
			<span class="s1">memberChainOfCallMemberChain</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt;</span>
					<span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
						<span class="s2">&quot;expression&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;calleeMembers&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;callExpression&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;members&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;memberRanges&quot;</span>
					<span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** Something like &quot;a.b().c.d()&quot;&quot; */</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[CallExpression, string[], CallExpression, string[], Range[]], boolean | void&gt;&gt;} */</span>
			<span class="s1">callMemberChainOfCallMemberChain</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt;</span>
					<span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
						<span class="s2">&quot;expression&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;calleeMembers&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;innerCallExpression&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;members&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;memberRanges&quot;</span>
					<span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ChainExpression], boolean | void&gt;} */</span>
			<span class="s1">optionalChaining</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;optionalChaining&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[NewExpression], boolean | void&gt;&gt;} */</span>
			<span class="s4">new</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[BinaryExpression], boolean | void&gt;} */</span>
			<span class="s1">binaryExpression</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;binaryExpression&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[Expression], boolean | void&gt;&gt;} */</span>
			<span class="s1">expression</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">])),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[MemberExpression, string[], boolean[], Range[]], boolean | void&gt;&gt;} */</span>
			<span class="s1">expressionMemberChain</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt;</span>
					<span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span>
						<span class="s2">&quot;expression&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;members&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;membersOptionals&quot;</span><span class="s3">,</span>
						<span class="s2">&quot;memberRanges&quot;</span>
					<span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{HookMap&lt;SyncBailHook&lt;[MemberExpression, string[]], boolean | void&gt;&gt;} */</span>
			<span class="s1">unhandledExpressionMemberChain</span><span class="s3">: </span><span class="s4">new </span><span class="s1">HookMap</span><span class="s3">(</span>
				<span class="s3">() =&gt; </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">, </span><span class="s2">&quot;members&quot;</span><span class="s3">])</span>
			<span class="s3">),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[ConditionalExpression], boolean | void&gt;} */</span>
			<span class="s1">expressionConditionalOperator</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[LogicalExpression], boolean | void&gt;} */</span>
			<span class="s1">expressionLogicalOperator</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;expression&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[Program, Comment[]], boolean | void&gt;} */</span>
			<span class="s1">program</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;ast&quot;</span><span class="s3">, </span><span class="s2">&quot;comments&quot;</span><span class="s3">]),</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SyncBailHook&lt;[Program, Comment[]], boolean | void&gt;} */</span>
			<span class="s1">finish</span><span class="s3">: </span><span class="s4">new </span><span class="s1">SyncBailHook</span><span class="s3">([</span><span class="s2">&quot;ast&quot;</span><span class="s3">, </span><span class="s2">&quot;comments&quot;</span><span class="s3">])</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">sourceType </span><span class="s3">= </span><span class="s1">sourceType</span><span class="s3">;</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ScopeInfo} */</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ParserState} */</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">state </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">comments </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">semicolons </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{(Statement | ModuleDeclaration | Expression)[]} */</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Statement | ModuleDeclaration | Expression | undefined} */</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{WeakMap&lt;Expression, Set&lt;string&gt;&gt;} */</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">currentTagData </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">_initializeEvaluating</span><span class="s3">();</span>
	<span class="s3">}</span>

	<span class="s1">_initializeEvaluating</span><span class="s3">() {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;Literal&quot;</span><span class="s3">).</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
			<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Literal} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>

			<span class="s4">switch </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">value</span><span class="s3">) {</span>
				<span class="s4">case </span><span class="s2">&quot;number&quot;</span><span class="s3">:</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setNumber</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">value</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s4">case </span><span class="s2">&quot;bigint&quot;</span><span class="s3">:</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setBigInt</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">value</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s4">case </span><span class="s2">&quot;string&quot;</span><span class="s3">:</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">value</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s4">case </span><span class="s2">&quot;boolean&quot;</span><span class="s3">:</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">value</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">value </span><span class="s3">=== </span><span class="s4">null</span><span class="s3">) {</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setNull</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">value </span><span class="s4">instanceof </span><span class="s1">RegExp</span><span class="s3">) {</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setRegExp</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">value</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;NewExpression&quot;</span><span class="s3">).</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
			<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{NewExpression} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">callee </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">name </span><span class="s3">!== </span><span class="s2">&quot;RegExp&quot;</span><span class="s3">) {</span>
				<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateNewExpression</span><span class="s3">,</span>
					<span class="s1">callee</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
					<span class="s1">expr</span>
				<span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span>
				<span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">2 </span><span class="s3">||</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">getVariableInfo</span><span class="s3">(</span><span class="s2">&quot;RegExp&quot;</span><span class="s3">) !== </span><span class="s2">&quot;RegExp&quot;</span>
			<span class="s3">)</span>
				<span class="s4">return</span><span class="s3">;</span>

			<span class="s4">let </span><span class="s1">regExp</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">arg1 </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">];</span>

			<span class="s4">if </span><span class="s3">(</span><span class="s1">arg1</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>

				<span class="s4">const </span><span class="s1">evaluatedRegExp </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">arg1</span><span class="s3">);</span>

				<span class="s4">if </span><span class="s3">(!</span><span class="s1">evaluatedRegExp</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>

				<span class="s1">regExp </span><span class="s3">= </span><span class="s1">evaluatedRegExp</span><span class="s3">.</span><span class="s1">asString</span><span class="s3">();</span>

				<span class="s4">if </span><span class="s3">(!</span><span class="s1">regExp</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setRegExp</span><span class="s3">(</span><span class="s4">new </span><span class="s1">RegExp</span><span class="s3">(</span><span class="s2">&quot;&quot;</span><span class="s3">))</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
			<span class="s3">}</span>

			<span class="s4">const </span><span class="s1">arg2 </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">1</span><span class="s3">];</span>

			<span class="s4">if </span><span class="s3">(</span><span class="s1">arg2</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">arg2</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>

				<span class="s4">const </span><span class="s1">evaluatedFlags </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">arg2</span><span class="s3">);</span>

				<span class="s4">if </span><span class="s3">(!</span><span class="s1">evaluatedFlags</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>

				<span class="s4">if </span><span class="s3">(!</span><span class="s1">evaluatedFlags</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">()) {</span>
					<span class="s1">flags </span><span class="s3">= </span><span class="s1">evaluatedFlags</span><span class="s3">.</span><span class="s1">asString</span><span class="s3">();</span>

					<span class="s4">if </span><span class="s3">(</span>
						<span class="s1">flags </span><span class="s3">=== </span><span class="s1">undefined </span><span class="s3">||</span>
						<span class="s3">!</span><span class="s1">BasicEvaluatedExpression</span><span class="s3">.</span><span class="s1">isValidRegExpFlags</span><span class="s3">(</span><span class="s1">flags</span><span class="s3">)</span>
					<span class="s3">)</span>
						<span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>

			<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
				<span class="s3">.</span><span class="s1">setRegExp</span><span class="s3">(</span><span class="s1">flags </span><span class="s3">? </span><span class="s4">new </span><span class="s1">RegExp</span><span class="s3">(</span><span class="s1">regExp</span><span class="s3">, </span><span class="s1">flags</span><span class="s3">) : </span><span class="s4">new </span><span class="s1">RegExp</span><span class="s3">(</span><span class="s1">regExp</span><span class="s3">))</span>
				<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;LogicalExpression&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{LogicalExpression} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>

				<span class="s4">const </span><span class="s1">left </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
				<span class="s4">let </span><span class="s1">returnRight </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
				<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{boolean|undefined} */</span>
				<span class="s4">let </span><span class="s1">allowedRight</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">leftAsBool </span><span class="s3">= </span><span class="s1">left</span><span class="s3">.</span><span class="s1">asBool</span><span class="s3">();</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">leftAsBool </span><span class="s3">=== </span><span class="s4">false</span><span class="s3">) </span><span class="s4">return </span><span class="s1">left</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s1">returnRight </span><span class="s3">= </span><span class="s1">leftAsBool </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">;</span>
					<span class="s1">allowedRight </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;||&quot;</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">leftAsBool </span><span class="s3">= </span><span class="s1">left</span><span class="s3">.</span><span class="s1">asBool</span><span class="s3">();</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">leftAsBool </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return </span><span class="s1">left</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s1">returnRight </span><span class="s3">= </span><span class="s1">leftAsBool </span><span class="s3">=== </span><span class="s4">false</span><span class="s3">;</span>
					<span class="s1">allowedRight </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;??&quot;</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">leftAsNullish </span><span class="s3">= </span><span class="s1">left</span><span class="s3">.</span><span class="s1">asNullish</span><span class="s3">();</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">leftAsNullish </span><span class="s3">=== </span><span class="s4">false</span><span class="s3">) </span><span class="s4">return </span><span class="s1">left</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">leftAsNullish </span><span class="s3">!== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s1">returnRight </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
				<span class="s3">} </span><span class="s4">else return</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">right </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">returnRight</span><span class="s3">) {</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()) </span><span class="s1">right</span><span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">();</span>
					<span class="s4">return </span><span class="s1">right</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
				<span class="s3">}</span>

				<span class="s4">const </span><span class="s1">asBool </span><span class="s3">= </span><span class="s1">right</span><span class="s3">.</span><span class="s1">asBool</span><span class="s3">();</span>

				<span class="s4">if </span><span class="s3">(</span><span class="s1">allowedRight </span><span class="s3">=== </span><span class="s4">true </span><span class="s3">&amp;&amp; </span><span class="s1">asBool </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) {</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setTruthy</span><span class="s3">();</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">allowedRight </span><span class="s3">=== </span><span class="s4">false </span><span class="s3">&amp;&amp; </span><span class="s1">asBool </span><span class="s3">=== </span><span class="s4">false</span><span class="s3">) {</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">().</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">).</span><span class="s1">setFalsy</span><span class="s3">();</span>
				<span class="s3">}</span>
			<span class="s3">});</span>

		<span class="s5">/**</span>
		 <span class="s5">* In simple logical cases, we can use valueAsExpression to assist us in evaluating the expression on</span>
		 <span class="s5">* either side of a [BinaryExpression](https://github.com/estree/estree/blob/master/es5.md#binaryexpression).</span>
		 <span class="s5">* This supports scenarios in webpack like conditionally `import()`'ing modules based on some simple evaluation:</span>
		 <span class="s5">*</span>
		 <span class="s5">* ```js</span>
		 <span class="s5">* if (1 === 3) {</span>
		 <span class="s5">*  import(&quot;./moduleA&quot;); // webpack will auto evaluate this and not import the modules</span>
		 <span class="s5">* }</span>
		 <span class="s5">* ```</span>
		 <span class="s5">*</span>
		 <span class="s5">* Additional scenarios include evaluation of strings inside of dynamic import statements:</span>
		 <span class="s5">*</span>
		 <span class="s5">* ```js</span>
		 <span class="s5">* const foo = &quot;foo&quot;;</span>
		 <span class="s5">* const bar = &quot;bar&quot;;</span>
		 <span class="s5">*</span>
		 <span class="s5">* import(&quot;./&quot; + foo + bar); // webpack will auto evaluate this into import(&quot;./foobar&quot;)</span>
		 <span class="s5">* ```</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean | number | BigInt | string} value the value to convert to an expression</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{BinaryExpression | UnaryExpression} expr the expression being evaluated</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} sideEffects whether the expression has side effects</span>
		 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{BasicEvaluatedExpression | undefined} the evaluated expression</span>
		 <span class="s5">* </span><span class="s6">@example</span>
		 <span class="s5">*</span>
		 <span class="s5">* ```js</span>
		 <span class="s5">* const binaryExpr = new BinaryExpression(&quot;+&quot;,</span>
		 <span class="s5">* 	{ type: &quot;Literal&quot;, value: 2 },</span>
		 <span class="s5">* 	{ type: &quot;Literal&quot;, value: 3 }</span>
		 <span class="s5">* );</span>
		 <span class="s5">*</span>
		 <span class="s5">* const leftValue = 2;</span>
		 <span class="s5">* const rightValue = 3;</span>
		 <span class="s5">*</span>
		 <span class="s5">* const leftExpr = valueAsExpression(leftValue, binaryExpr.left, false);</span>
		 <span class="s5">* const rightExpr = valueAsExpression(rightValue, binaryExpr.right, false);</span>
		 <span class="s5">* const result = new BasicEvaluatedExpression()</span>
		 <span class="s5">* 	.setNumber(leftExpr.number + rightExpr.number)</span>
		 <span class="s5">* 	.setRange(binaryExpr.range);</span>
		 <span class="s5">*</span>
		 <span class="s5">* console.log(result.number); // Output: 5</span>
		 <span class="s5">* ```</span>
		 <span class="s5">*/</span>
		<span class="s4">const </span><span class="s1">valueAsExpression </span><span class="s3">= (</span><span class="s1">value</span><span class="s3">, </span><span class="s1">expr</span><span class="s3">, </span><span class="s1">sideEffects</span><span class="s3">) =&gt; {</span>
			<span class="s4">switch </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">value</span><span class="s3">) {</span>
				<span class="s4">case </span><span class="s2">&quot;boolean&quot;</span><span class="s3">:</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">sideEffects</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s4">case </span><span class="s2">&quot;number&quot;</span><span class="s3">:</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setNumber</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">sideEffects</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s4">case </span><span class="s2">&quot;bigint&quot;</span><span class="s3">:</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setBigInt</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">sideEffects</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s4">case </span><span class="s2">&quot;string&quot;</span><span class="s3">:</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">sideEffects</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
			<span class="s3">}</span>
		<span class="s3">};</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;BinaryExpression&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{BinaryExpression} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>

				<span class="s5">/**</span>
				 <span class="s5">* Evaluates a binary expression if and only if it is a const operation (e.g. 1 + 2, &quot;a&quot; + &quot;b&quot;, etc.).</span>
				 <span class="s5">*</span>
				 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(leftOperand: T, rightOperand: T) =&gt; boolean | number | BigInt | string} operandHandler the handler for the operation (e.g. (a, b) =&gt; a + b)</span>
				 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{BasicEvaluatedExpression | undefined} the evaluated expression</span>
				 <span class="s5">*/</span>
				<span class="s4">const </span><span class="s1">handleConstOperation </span><span class="s3">= </span><span class="s1">operandHandler </span><span class="s3">=&gt; {</span>
					<span class="s4">const </span><span class="s1">left </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isCompileTimeValue</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>

					<span class="s4">const </span><span class="s1">right </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isCompileTimeValue</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>

					<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s1">operandHandler</span><span class="s3">(</span>
						<span class="s1">left</span><span class="s3">.</span><span class="s1">asCompileTimeValue</span><span class="s3">(),</span>
						<span class="s1">right</span><span class="s3">.</span><span class="s1">asCompileTimeValue</span><span class="s3">()</span>
					<span class="s3">);</span>
					<span class="s4">return </span><span class="s1">valueAsExpression</span><span class="s3">(</span>
						<span class="s1">result</span><span class="s3">,</span>
						<span class="s1">expr</span><span class="s3">,</span>
						<span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">() || </span><span class="s1">right</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
					<span class="s3">);</span>
				<span class="s3">};</span>

				<span class="s5">/**</span>
				 <span class="s5">* Helper function to determine if two booleans are always different. This is used in `handleStrictEqualityComparison`</span>
				 <span class="s5">* to determine if an expressions boolean or nullish conversion is equal or not.</span>
				 <span class="s5">*</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} a first boolean to compare</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} b second boolean to compare</span>
				 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} true if the two booleans are always different, false otherwise</span>
				 <span class="s5">*/</span>
				<span class="s4">const </span><span class="s1">isAlwaysDifferent </span><span class="s3">= (</span><span class="s1">a</span><span class="s3">, </span><span class="s1">b</span><span class="s3">) =&gt;</span>
					<span class="s3">(</span><span class="s1">a </span><span class="s3">=== </span><span class="s4">true </span><span class="s3">&amp;&amp; </span><span class="s1">b </span><span class="s3">=== </span><span class="s4">false</span><span class="s3">) || (</span><span class="s1">a </span><span class="s3">=== </span><span class="s4">false </span><span class="s3">&amp;&amp; </span><span class="s1">b </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">);</span>

				<span class="s4">const </span><span class="s1">handleTemplateStringCompare </span><span class="s3">= (</span><span class="s1">left</span><span class="s3">, </span><span class="s1">right</span><span class="s3">, </span><span class="s1">res</span><span class="s3">, </span><span class="s1">eql</span><span class="s3">) =&gt; {</span>
					<span class="s4">const </span><span class="s1">getPrefix </span><span class="s3">= </span><span class="s1">parts </span><span class="s3">=&gt; {</span>
						<span class="s4">let </span><span class="s1">value </span><span class="s3">= </span><span class="s2">&quot;&quot;</span><span class="s3">;</span>
						<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">p of parts</span><span class="s3">) {</span>
							<span class="s4">const </span><span class="s1">v </span><span class="s3">= </span><span class="s1">p</span><span class="s3">.</span><span class="s1">asString</span><span class="s3">();</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">v </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s1">value </span><span class="s3">+= </span><span class="s1">v</span><span class="s3">;</span>
							<span class="s4">else break</span><span class="s3">;</span>
						<span class="s3">}</span>
						<span class="s4">return </span><span class="s1">value</span><span class="s3">;</span>
					<span class="s3">};</span>
					<span class="s4">const </span><span class="s1">getSuffix </span><span class="s3">= </span><span class="s1">parts </span><span class="s3">=&gt; {</span>
						<span class="s4">let </span><span class="s1">value </span><span class="s3">= </span><span class="s2">&quot;&quot;</span><span class="s3">;</span>
						<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s1">parts</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&gt;= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i</span><span class="s3">--) {</span>
							<span class="s4">const </span><span class="s1">v </span><span class="s3">= </span><span class="s1">parts</span><span class="s3">[</span><span class="s1">i</span><span class="s3">].</span><span class="s1">asString</span><span class="s3">();</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">v </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s1">value </span><span class="s3">= </span><span class="s1">v </span><span class="s3">+ </span><span class="s1">value</span><span class="s3">;</span>
							<span class="s4">else break</span><span class="s3">;</span>
						<span class="s3">}</span>
						<span class="s4">return </span><span class="s1">value</span><span class="s3">;</span>
					<span class="s3">};</span>
					<span class="s4">const </span><span class="s1">leftPrefix </span><span class="s3">= </span><span class="s1">getPrefix</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">parts</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">rightPrefix </span><span class="s3">= </span><span class="s1">getPrefix</span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">parts</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">leftSuffix </span><span class="s3">= </span><span class="s1">getSuffix</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">parts</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">rightSuffix </span><span class="s3">= </span><span class="s1">getSuffix</span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">parts</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">lenPrefix </span><span class="s3">= </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">min</span><span class="s3">(</span><span class="s1">leftPrefix</span><span class="s3">.</span><span class="s1">length</span><span class="s3">, </span><span class="s1">rightPrefix</span><span class="s3">.</span><span class="s1">length</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">lenSuffix </span><span class="s3">= </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">min</span><span class="s3">(</span><span class="s1">leftSuffix</span><span class="s3">.</span><span class="s1">length</span><span class="s3">, </span><span class="s1">rightSuffix</span><span class="s3">.</span><span class="s1">length</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">prefixMismatch </span><span class="s3">=</span>
						<span class="s1">lenPrefix </span><span class="s3">&gt; </span><span class="s7">0 </span><span class="s3">&amp;&amp;</span>
						<span class="s1">leftPrefix</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, </span><span class="s1">lenPrefix</span><span class="s3">) !== </span><span class="s1">rightPrefix</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, </span><span class="s1">lenPrefix</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">suffixMismatch </span><span class="s3">=</span>
						<span class="s1">lenSuffix </span><span class="s3">&gt; </span><span class="s7">0 </span><span class="s3">&amp;&amp;</span>
						<span class="s1">leftSuffix</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(-</span><span class="s1">lenSuffix</span><span class="s3">) !== </span><span class="s1">rightSuffix</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(-</span><span class="s1">lenSuffix</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">prefixMismatch </span><span class="s3">|| </span><span class="s1">suffixMismatch</span><span class="s3">) {</span>
						<span class="s4">return </span><span class="s1">res</span>
							<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(!</span><span class="s1">eql</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">() || </span><span class="s1">right</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
							<span class="s3">);</span>
					<span class="s3">}</span>
				<span class="s3">};</span>

				<span class="s5">/**</span>
				 <span class="s5">* Helper function to handle BinaryExpressions using strict equality comparisons (e.g. &quot;===&quot; and &quot;!==&quot;).</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} eql true for &quot;===&quot; and false for &quot;!==&quot;</span>
				 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{BasicEvaluatedExpression | undefined} the evaluated expression</span>
				 <span class="s5">*/</span>
				<span class="s4">const </span><span class="s1">handleStrictEqualityComparison </span><span class="s3">= </span><span class="s1">eql </span><span class="s3">=&gt; {</span>
					<span class="s4">const </span><span class="s1">left </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">right </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">res </span><span class="s3">= </span><span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">();</span>
					<span class="s1">res</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>

					<span class="s4">const </span><span class="s1">leftConst </span><span class="s3">= </span><span class="s1">left</span><span class="s3">.</span><span class="s1">isCompileTimeValue</span><span class="s3">();</span>
					<span class="s4">const </span><span class="s1">rightConst </span><span class="s3">= </span><span class="s1">right</span><span class="s3">.</span><span class="s1">isCompileTimeValue</span><span class="s3">();</span>

					<span class="s4">if </span><span class="s3">(</span><span class="s1">leftConst </span><span class="s3">&amp;&amp; </span><span class="s1">rightConst</span><span class="s3">) {</span>
						<span class="s4">return </span><span class="s1">res</span>
							<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(</span>
								<span class="s1">eql </span><span class="s3">===</span>
									<span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">asCompileTimeValue</span><span class="s3">() === </span><span class="s1">right</span><span class="s3">.</span><span class="s1">asCompileTimeValue</span><span class="s3">())</span>
							<span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">() || </span><span class="s1">right</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
							<span class="s3">);</span>
					<span class="s3">}</span>

					<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">() &amp;&amp; </span><span class="s1">right</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">()) {</span>
						<span class="s4">return </span><span class="s1">res</span>
							<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(!</span><span class="s1">eql</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">() || </span><span class="s1">right</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
							<span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isTemplateString</span><span class="s3">() &amp;&amp; </span><span class="s1">right</span><span class="s3">.</span><span class="s1">isTemplateString</span><span class="s3">()) {</span>
						<span class="s4">return </span><span class="s1">handleTemplateStringCompare</span><span class="s3">(</span><span class="s1">left</span><span class="s3">, </span><span class="s1">right</span><span class="s3">, </span><span class="s1">res</span><span class="s3">, </span><span class="s1">eql</span><span class="s3">);</span>
					<span class="s3">}</span>

					<span class="s4">const </span><span class="s1">leftPrimitive </span><span class="s3">= </span><span class="s1">left</span><span class="s3">.</span><span class="s1">isPrimitiveType</span><span class="s3">();</span>
					<span class="s4">const </span><span class="s1">rightPrimitive </span><span class="s3">= </span><span class="s1">right</span><span class="s3">.</span><span class="s1">isPrimitiveType</span><span class="s3">();</span>

					<span class="s4">if </span><span class="s3">(</span>
						<span class="s0">// Primitive !== Object or</span>
						<span class="s0">// compile-time object types are never equal to something at runtime</span>
						<span class="s3">(</span><span class="s1">leftPrimitive </span><span class="s3">=== </span><span class="s4">false </span><span class="s3">&amp;&amp;</span>
							<span class="s3">(</span><span class="s1">leftConst </span><span class="s3">|| </span><span class="s1">rightPrimitive </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">)) ||</span>
						<span class="s3">(</span><span class="s1">rightPrimitive </span><span class="s3">=== </span><span class="s4">false </span><span class="s3">&amp;&amp;</span>
							<span class="s3">(</span><span class="s1">rightConst </span><span class="s3">|| </span><span class="s1">leftPrimitive </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">)) ||</span>
						<span class="s0">// Different nullish or boolish status also means not equal</span>
						<span class="s1">isAlwaysDifferent</span><span class="s3">(</span>
							<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{boolean} */ </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">asBool</span><span class="s3">()),</span>
							<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{boolean} */ </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">asBool</span><span class="s3">())</span>
						<span class="s3">) ||</span>
						<span class="s1">isAlwaysDifferent</span><span class="s3">(</span>
							<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{boolean} */ </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">asNullish</span><span class="s3">()),</span>
							<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{boolean} */ </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">asNullish</span><span class="s3">())</span>
						<span class="s3">)</span>
					<span class="s3">) {</span>
						<span class="s4">return </span><span class="s1">res</span>
							<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(!</span><span class="s1">eql</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">() || </span><span class="s1">right</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
							<span class="s3">);</span>
					<span class="s3">}</span>
				<span class="s3">};</span>

				<span class="s5">/**</span>
				 <span class="s5">* Helper function to handle BinaryExpressions using abstract equality comparisons (e.g. &quot;==&quot; and &quot;!=&quot;).</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} eql true for &quot;==&quot; and false for &quot;!=&quot;</span>
				 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{BasicEvaluatedExpression | undefined} the evaluated expression</span>
				 <span class="s5">*/</span>
				<span class="s4">const </span><span class="s1">handleAbstractEqualityComparison </span><span class="s3">= </span><span class="s1">eql </span><span class="s3">=&gt; {</span>
					<span class="s4">const </span><span class="s1">left </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">right </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">res </span><span class="s3">= </span><span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">();</span>
					<span class="s1">res</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>

					<span class="s4">const </span><span class="s1">leftConst </span><span class="s3">= </span><span class="s1">left</span><span class="s3">.</span><span class="s1">isCompileTimeValue</span><span class="s3">();</span>
					<span class="s4">const </span><span class="s1">rightConst </span><span class="s3">= </span><span class="s1">right</span><span class="s3">.</span><span class="s1">isCompileTimeValue</span><span class="s3">();</span>

					<span class="s4">if </span><span class="s3">(</span><span class="s1">leftConst </span><span class="s3">&amp;&amp; </span><span class="s1">rightConst</span><span class="s3">) {</span>
						<span class="s4">return </span><span class="s1">res</span>
							<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(</span>
								<span class="s1">eql </span><span class="s3">===</span>
									<span class="s0">// eslint-disable-next-line eqeqeq</span>
									<span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">asCompileTimeValue</span><span class="s3">() == </span><span class="s1">right</span><span class="s3">.</span><span class="s1">asCompileTimeValue</span><span class="s3">())</span>
							<span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">() || </span><span class="s1">right</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
							<span class="s3">);</span>
					<span class="s3">}</span>

					<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">() &amp;&amp; </span><span class="s1">right</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">()) {</span>
						<span class="s4">return </span><span class="s1">res</span>
							<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(!</span><span class="s1">eql</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">() || </span><span class="s1">right</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
							<span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isTemplateString</span><span class="s3">() &amp;&amp; </span><span class="s1">right</span><span class="s3">.</span><span class="s1">isTemplateString</span><span class="s3">()) {</span>
						<span class="s4">return </span><span class="s1">handleTemplateStringCompare</span><span class="s3">(</span><span class="s1">left</span><span class="s3">, </span><span class="s1">right</span><span class="s3">, </span><span class="s1">res</span><span class="s3">, </span><span class="s1">eql</span><span class="s3">);</span>
					<span class="s3">}</span>
				<span class="s3">};</span>

				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;+&quot;</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">left </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">right </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">res </span><span class="s3">= </span><span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">();</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) {</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">string </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">string</span><span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) {</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">string </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">number</span><span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span>
							<span class="s1">right</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">() &amp;&amp;</span>
							<span class="s1">right</span><span class="s3">.</span><span class="s1">prefix </span><span class="s3">&amp;&amp;</span>
							<span class="s1">right</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()</span>
						<span class="s3">) {</span>
							<span class="s0">// &quot;left&quot; + (&quot;prefix&quot; + inner + &quot;postfix&quot;)</span>
							<span class="s0">// =&gt; (&quot;leftPrefix&quot; + inner + &quot;postfix&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span>
								<span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
									<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">string </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">.</span><span class="s1">string</span><span class="s3">)</span>
									<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">joinRanges</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">range</span><span class="s3">, </span><span class="s1">right</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)),</span>
								<span class="s1">right</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">,</span>
								<span class="s1">right</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
							<span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">()) {</span>
							<span class="s0">// &quot;left&quot; + ([null] + inner + &quot;postfix&quot;)</span>
							<span class="s0">// =&gt; (&quot;left&quot; + inner + &quot;postfix&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">,</span>
								<span class="s1">right</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">,</span>
								<span class="s1">right</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
							<span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
							<span class="s0">// &quot;left&quot; + expr</span>
							<span class="s0">// =&gt; (&quot;left&quot; + expr + &quot;&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span><span class="s1">left</span><span class="s3">, </span><span class="s4">null</span><span class="s3">, [</span><span class="s1">right</span><span class="s3">]);</span>
						<span class="s3">}</span>
					<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) {</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">number </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">string</span><span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) {</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setNumber</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">number </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">number</span><span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
							<span class="s4">return</span><span class="s3">;</span>
						<span class="s3">}</span>
					<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isBigInt</span><span class="s3">()) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isBigInt</span><span class="s3">()) {</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setBigInt</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">bigint </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">bigint</span><span class="s3">);</span>
						<span class="s3">}</span>
					<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">()) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix </span><span class="s3">&amp;&amp; </span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">() &amp;&amp; </span><span class="s1">right</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) {</span>
							<span class="s0">// (&quot;prefix&quot; + inner + &quot;postfix&quot;) + &quot;right&quot;</span>
							<span class="s0">// =&gt; (&quot;prefix&quot; + inner + &quot;postfixRight&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">,</span>
								<span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
									<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">.</span><span class="s1">string </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">string</span><span class="s3">)</span>
									<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">joinRanges</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">.</span><span class="s1">range</span><span class="s3">, </span><span class="s1">right</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)),</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
							<span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span>
							<span class="s1">left</span><span class="s3">.</span><span class="s1">postfix </span><span class="s3">&amp;&amp;</span>
							<span class="s1">left</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">() &amp;&amp;</span>
							<span class="s1">right</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()</span>
						<span class="s3">) {</span>
							<span class="s0">// (&quot;prefix&quot; + inner + &quot;postfix&quot;) + 123</span>
							<span class="s0">// =&gt; (&quot;prefix&quot; + inner + &quot;postfix123&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">,</span>
								<span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
									<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">.</span><span class="s1">string </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">number</span><span class="s3">)</span>
									<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">joinRanges</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">.</span><span class="s1">range</span><span class="s3">, </span><span class="s1">right</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)),</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
							<span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) {</span>
							<span class="s0">// (&quot;prefix&quot; + inner + [null]) + &quot;right&quot;</span>
							<span class="s0">// =&gt; (&quot;prefix&quot; + inner + &quot;right&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">, </span><span class="s1">right</span><span class="s3">, </span><span class="s1">left</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span><span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) {</span>
							<span class="s0">// (&quot;prefix&quot; + inner + [null]) + 123</span>
							<span class="s0">// =&gt; (&quot;prefix&quot; + inner + &quot;123&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">,</span>
								<span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
									<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">number </span><span class="s3">+ </span><span class="s2">&quot;&quot;</span><span class="s3">)</span>
									<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">range</span><span class="s3">),</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
							<span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">()) {</span>
							<span class="s0">// (&quot;prefix1&quot; + inner1 + &quot;postfix1&quot;) + (&quot;prefix2&quot; + inner2 + &quot;postfix2&quot;)</span>
							<span class="s0">// (&quot;prefix1&quot; + inner1 + &quot;postfix1&quot; + &quot;prefix2&quot; + inner2 + &quot;postfix2&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">,</span>
								<span class="s1">right</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">,</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions </span><span class="s3">&amp;&amp;</span>
									<span class="s1">right</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions </span><span class="s3">&amp;&amp;</span>
									<span class="s1">left</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
										<span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix </span><span class="s3">? [</span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">] : [])</span>
										<span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">prefix </span><span class="s3">? [</span><span class="s1">right</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">] : [])</span>
										<span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span><span class="s3">)</span>
							<span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
							<span class="s0">// (&quot;prefix&quot; + inner + postfix) + expr</span>
							<span class="s0">// =&gt; (&quot;prefix&quot; + inner + postfix + expr + [null])</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">,</span>
								<span class="s4">null</span><span class="s3">,</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions </span><span class="s3">&amp;&amp;</span>
									<span class="s1">left</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span><span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span>
										<span class="s1">left</span><span class="s3">.</span><span class="s1">postfix </span><span class="s3">? [</span><span class="s1">left</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">, </span><span class="s1">right</span><span class="s3">] : [</span><span class="s1">right</span><span class="s3">]</span>
									<span class="s3">)</span>
							<span class="s3">);</span>
						<span class="s3">}</span>
					<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) {</span>
							<span class="s0">// left + &quot;right&quot;</span>
							<span class="s0">// =&gt; ([null] + left + &quot;right&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span><span class="s4">null</span><span class="s3">, </span><span class="s1">right</span><span class="s3">, [</span><span class="s1">left</span><span class="s3">]);</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">()) {</span>
							<span class="s0">// left + (prefix + inner + &quot;postfix&quot;)</span>
							<span class="s0">// =&gt; ([null] + left + prefix + inner + &quot;postfix&quot;)</span>
							<span class="s1">res</span><span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span>
								<span class="s4">null</span><span class="s3">,</span>
								<span class="s1">right</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">,</span>
								<span class="s1">right</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions </span><span class="s3">&amp;&amp;</span>
									<span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">prefix </span><span class="s3">? [</span><span class="s1">left</span><span class="s3">, </span><span class="s1">right</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">] : [</span><span class="s1">left</span><span class="s3">]).</span><span class="s1">concat</span><span class="s3">(</span>
										<span class="s1">right</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
									<span class="s3">)</span>
							<span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
							<span class="s4">return</span><span class="s3">;</span>
						<span class="s3">}</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">() || </span><span class="s1">right</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">())</span>
						<span class="s1">res</span><span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">();</span>
					<span class="s1">res</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s4">return </span><span class="s1">res</span><span class="s3">;</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;-&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">- </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;*&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">* </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;/&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">/ </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;**&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">** </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;===&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleStrictEqualityComparison</span><span class="s3">(</span><span class="s4">true</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;==&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleAbstractEqualityComparison</span><span class="s3">(</span><span class="s4">true</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;!==&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleStrictEqualityComparison</span><span class="s3">(</span><span class="s4">false</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;!=&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleAbstractEqualityComparison</span><span class="s3">(</span><span class="s4">false</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&amp;&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">&amp; </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;|&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">| </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;^&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">^ </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&gt;&gt;&gt;&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">&gt;&gt;&gt; </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&gt;&gt;&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">&gt;&gt; </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&lt;&lt;&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">&lt;&lt; </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&lt;&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">&lt; </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&gt;&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">&gt; </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&lt;=&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">&lt;= </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;&gt;=&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">((</span><span class="s1">l</span><span class="s3">, </span><span class="s1">r</span><span class="s3">) =&gt; </span><span class="s1">l </span><span class="s3">&gt;= </span><span class="s1">r</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;UnaryExpression&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{UnaryExpression} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>

				<span class="s5">/**</span>
				 <span class="s5">* Evaluates a UnaryExpression if and only if it is a basic const operator (e.g. +a, -a, ~a).</span>
				 <span class="s5">*</span>
				 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(operand: T) =&gt; boolean | number | BigInt | string} operandHandler handler for the operand</span>
				 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{BasicEvaluatedExpression | undefined} evaluated expression</span>
				 <span class="s5">*/</span>
				<span class="s4">const </span><span class="s1">handleConstOperation </span><span class="s3">= </span><span class="s1">operandHandler </span><span class="s3">=&gt; {</span>
					<span class="s4">const </span><span class="s1">argument </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s1">argument</span><span class="s3">.</span><span class="s1">isCompileTimeValue</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s1">operandHandler</span><span class="s3">(</span><span class="s1">argument</span><span class="s3">.</span><span class="s1">asCompileTimeValue</span><span class="s3">());</span>
					<span class="s4">return </span><span class="s1">valueAsExpression</span><span class="s3">(</span>
						<span class="s1">result</span><span class="s3">,</span>
						<span class="s1">expr</span><span class="s3">,</span>
						<span class="s1">argument</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
					<span class="s3">);</span>
				<span class="s3">};</span>

				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;typeof&quot;</span><span class="s3">) {</span>
					<span class="s4">switch </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
						<span class="s4">case </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">: {</span>
							<span class="s4">const </span><span class="s1">res </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateTypeof</span><span class="s3">,</span>
								<span class="s1">expr</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
								<span class="s1">expr</span>
							<span class="s3">);</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">res </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s4">return </span><span class="s1">res</span><span class="s3">;</span>
							<span class="s4">break</span><span class="s3">;</span>
						<span class="s3">}</span>
						<span class="s4">case </span><span class="s2">&quot;MetaProperty&quot;</span><span class="s3">: {</span>
							<span class="s4">const </span><span class="s1">res </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateTypeof</span><span class="s3">,</span>
								<span class="s1">getRootName</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">),</span>
								<span class="s1">expr</span>
							<span class="s3">);</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">res </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s4">return </span><span class="s1">res</span><span class="s3">;</span>
							<span class="s4">break</span><span class="s3">;</span>
						<span class="s3">}</span>
						<span class="s4">case </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">: {</span>
							<span class="s4">const </span><span class="s1">res </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForExpression</span><span class="s3">(</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateTypeof</span><span class="s3">,</span>
								<span class="s1">expr</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">,</span>
								<span class="s1">expr</span>
							<span class="s3">);</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">res </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s4">return </span><span class="s1">res</span><span class="s3">;</span>
							<span class="s4">break</span><span class="s3">;</span>
						<span class="s3">}</span>
						<span class="s4">case </span><span class="s2">&quot;ChainExpression&quot;</span><span class="s3">: {</span>
							<span class="s4">const </span><span class="s1">res </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForExpression</span><span class="s3">(</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateTypeof</span><span class="s3">,</span>
								<span class="s1">expr</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">,</span>
								<span class="s1">expr</span>
							<span class="s3">);</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">res </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s4">return </span><span class="s1">res</span><span class="s3">;</span>
							<span class="s4">break</span><span class="s3">;</span>
						<span class="s3">}</span>
						<span class="s4">case </span><span class="s2">&quot;FunctionExpression&quot;</span><span class="s3">: {</span>
							<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
								<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;function&quot;</span><span class="s3">)</span>
								<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
						<span class="s3">}</span>
					<span class="s3">}</span>
					<span class="s4">const </span><span class="s1">arg </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isUnknown</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;string&quot;</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">()) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;string&quot;</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isUndefined</span><span class="s3">()) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;undefined&quot;</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;number&quot;</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isBigInt</span><span class="s3">()) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;bigint&quot;</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isBoolean</span><span class="s3">()) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;boolean&quot;</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isConstArray</span><span class="s3">() || </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isRegExp</span><span class="s3">() || </span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isNull</span><span class="s3">()) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;object&quot;</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">()) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;object&quot;</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">())</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;!&quot;</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">argument </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">bool </span><span class="s3">= </span><span class="s1">argument</span><span class="s3">.</span><span class="s1">asBool</span><span class="s3">();</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">bool </span><span class="s3">!== </span><span class="s2">&quot;boolean&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setBoolean</span><span class="s3">(!</span><span class="s1">bool</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">argument</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">())</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;~&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">(</span><span class="s1">v </span><span class="s3">=&gt; ~</span><span class="s1">v</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;+&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">(</span><span class="s1">v </span><span class="s3">=&gt; +</span><span class="s1">v</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;-&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">handleConstOperation</span><span class="s3">(</span><span class="s1">v </span><span class="s3">=&gt; -</span><span class="s1">v</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateTypeof</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;undefined&quot;</span><span class="s3">).</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">expr </span><span class="s3">=&gt; {</span>
			<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
				<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s2">&quot;undefined&quot;</span><span class="s3">)</span>
				<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;Identifier&quot;</span><span class="s3">).</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">expr </span><span class="s3">=&gt; {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Identifier} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">).</span><span class="s1">name </span><span class="s3">=== </span><span class="s2">&quot;undefined&quot;</span><span class="s3">) {</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setUndefined</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s5">/**</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} exprType expression type name</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(Expression): GetInfoResult | undefined} getInfo get info</span>
		 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
		 <span class="s5">*/</span>
		<span class="s4">const </span><span class="s1">tapEvaluateWithVariableInfo </span><span class="s3">= (</span><span class="s1">exprType</span><span class="s3">, </span><span class="s1">getInfo</span><span class="s3">) =&gt; {</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Expression | undefined} */</span>
			<span class="s4">let </span><span class="s1">cachedExpression </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{GetInfoResult | undefined} */</span>
			<span class="s4">let </span><span class="s1">cachedInfo </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">exprType</span><span class="s3">).</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">expr </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">expression </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{MemberExpression} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>

				<span class="s4">const </span><span class="s1">info </span><span class="s3">= </span><span class="s1">getInfo</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">info </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
					<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForInfoWithFallback</span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateIdentifier</span><span class="s3">,</span>
						<span class="s1">info</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
						<span class="s1">name </span><span class="s3">=&gt; {</span>
							<span class="s1">cachedExpression </span><span class="s3">= </span><span class="s1">expression</span><span class="s3">;</span>
							<span class="s1">cachedInfo </span><span class="s3">= </span><span class="s1">info</span><span class="s3">;</span>
						<span class="s3">},</span>
						<span class="s1">name </span><span class="s3">=&gt; {</span>
							<span class="s4">const </span><span class="s1">hook </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateDefinedIdentifier</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
								<span class="s4">return </span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
							<span class="s3">}</span>
						<span class="s3">},</span>
						<span class="s1">expression</span>
					<span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
				<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">exprType</span><span class="s3">)</span>
				<span class="s3">.</span><span class="s1">tap</span><span class="s3">({ </span><span class="s1">name</span><span class="s3">: </span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">stage</span><span class="s3">: </span><span class="s7">100 </span><span class="s3">}, </span><span class="s1">expr </span><span class="s3">=&gt; {</span>
					<span class="s4">const </span><span class="s1">info </span><span class="s3">= </span><span class="s1">cachedExpression </span><span class="s3">=== </span><span class="s1">expr </span><span class="s3">? </span><span class="s1">cachedInfo </span><span class="s3">: </span><span class="s1">getInfo</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">info </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
						<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
							<span class="s3">.</span><span class="s1">setIdentifier</span><span class="s3">(</span>
								<span class="s1">info</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
								<span class="s1">info</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">,</span>
								<span class="s1">info</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">,</span>
								<span class="s1">info</span><span class="s3">.</span><span class="s1">getMembersOptionals</span><span class="s3">,</span>
								<span class="s1">info</span><span class="s3">.</span><span class="s1">getMemberRanges</span>
							<span class="s3">)</span>
							<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
					<span class="s3">}</span>
				<span class="s3">});</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">finish</span><span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, () =&gt; {</span>
				<span class="s0">// Cleanup for GC</span>
				<span class="s1">cachedExpression </span><span class="s3">= </span><span class="s1">cachedInfo </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
			<span class="s3">});</span>
		<span class="s3">};</span>
		<span class="s1">tapEvaluateWithVariableInfo</span><span class="s3">(</span><span class="s2">&quot;Identifier&quot;</span><span class="s3">, </span><span class="s1">expr </span><span class="s3">=&gt; {</span>
			<span class="s4">const </span><span class="s1">info </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getVariableInfo</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Identifier} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">).</span><span class="s1">name</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s4">typeof </span><span class="s1">info </span><span class="s3">=== </span><span class="s2">&quot;string&quot; </span><span class="s3">||</span>
				<span class="s3">(</span><span class="s1">info </span><span class="s4">instanceof </span><span class="s1">VariableInfo </span><span class="s3">&amp;&amp; </span><span class="s4">typeof </span><span class="s1">info</span><span class="s3">.</span><span class="s1">freeName </span><span class="s3">=== </span><span class="s2">&quot;string&quot;</span><span class="s3">)</span>
			<span class="s3">) {</span>
				<span class="s4">return </span><span class="s3">{</span>
					<span class="s1">name</span><span class="s3">: </span><span class="s1">info</span><span class="s3">,</span>
					<span class="s1">rootInfo</span><span class="s3">: </span><span class="s1">info</span><span class="s3">,</span>
					<span class="s1">getMembers</span><span class="s3">: () =&gt; [],</span>
					<span class="s1">getMembersOptionals</span><span class="s3">: () =&gt; [],</span>
					<span class="s1">getMemberRanges</span><span class="s3">: () =&gt; []</span>
				<span class="s3">};</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s1">tapEvaluateWithVariableInfo</span><span class="s3">(</span><span class="s2">&quot;ThisExpression&quot;</span><span class="s3">, </span><span class="s1">expr </span><span class="s3">=&gt; {</span>
			<span class="s4">const </span><span class="s1">info </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getVariableInfo</span><span class="s3">(</span><span class="s2">&quot;this&quot;</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s4">typeof </span><span class="s1">info </span><span class="s3">=== </span><span class="s2">&quot;string&quot; </span><span class="s3">||</span>
				<span class="s3">(</span><span class="s1">info </span><span class="s4">instanceof </span><span class="s1">VariableInfo </span><span class="s3">&amp;&amp; </span><span class="s4">typeof </span><span class="s1">info</span><span class="s3">.</span><span class="s1">freeName </span><span class="s3">=== </span><span class="s2">&quot;string&quot;</span><span class="s3">)</span>
			<span class="s3">) {</span>
				<span class="s4">return </span><span class="s3">{</span>
					<span class="s1">name</span><span class="s3">: </span><span class="s1">info</span><span class="s3">,</span>
					<span class="s1">rootInfo</span><span class="s3">: </span><span class="s1">info</span><span class="s3">,</span>
					<span class="s1">getMembers</span><span class="s3">: () =&gt; [],</span>
					<span class="s1">getMembersOptionals</span><span class="s3">: () =&gt; [],</span>
					<span class="s1">getMemberRanges</span><span class="s3">: () =&gt; []</span>
				<span class="s3">};</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;MetaProperty&quot;</span><span class="s3">).</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">expr </span><span class="s3">=&gt; {</span>
			<span class="s4">const </span><span class="s1">metaProperty </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{MetaProperty} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>

			<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateIdentifier</span><span class="s3">,</span>
				<span class="s1">getRootName</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">),</span>
				<span class="s1">metaProperty</span>
			<span class="s3">);</span>
		<span class="s3">});</span>
		<span class="s1">tapEvaluateWithVariableInfo</span><span class="s3">(</span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">, </span><span class="s1">expr </span><span class="s3">=&gt;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">getMemberExpressionInfo</span><span class="s3">(</span>
				<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{MemberExpression} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">),</span>
				<span class="s1">ALLOWED_MEMBER_TYPES_EXPRESSION</span>
			<span class="s3">)</span>
		<span class="s3">);</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;CallExpression&quot;</span><span class="s3">).</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
			<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{CallExpression} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot; </span><span class="s3">&amp;&amp;</span>
				<span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">type </span><span class="s3">===</span>
					<span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">computed </span><span class="s3">? </span><span class="s2">&quot;Literal&quot; </span><span class="s3">: </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">)</span>
			<span class="s3">) {</span>
				<span class="s0">// type Super also possible here</span>
				<span class="s4">const </span><span class="s1">param </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span>
					<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Expression} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">object</span><span class="s3">)</span>
				<span class="s3">);</span>
				<span class="s4">const </span><span class="s1">property </span><span class="s3">=</span>
					<span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Literal&quot;</span>
						<span class="s3">? </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">value</span><span class="s3">}</span><span class="s2">`</span>
						<span class="s3">: </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">hook </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateCallExpressionMember</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">property</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">param</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) {</span>
				<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateCallExpression</span><span class="s3">,</span>
					<span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
					<span class="s1">expr</span>
				<span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateCallExpressionMember</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;indexOf&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, (</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">param</span><span class="s3">) =&gt; {</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">param</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s3">[</span><span class="s1">arg1</span><span class="s3">, </span><span class="s1">arg2</span><span class="s3">] = </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">arg1Eval </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">arg1</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">arg1Eval</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">arg1Value </span><span class="s3">= </span><span class="s1">arg1Eval</span><span class="s3">.</span><span class="s1">string</span><span class="s3">;</span>

				<span class="s4">let </span><span class="s1">result</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">arg2</span><span class="s3">) {</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg2</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">arg2Eval </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">arg2</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s1">arg2Eval</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s1">result </span><span class="s3">= </span><span class="s1">param</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s1">arg1Value</span><span class="s3">, </span><span class="s1">arg2Eval</span><span class="s3">.</span><span class="s1">number</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s1">result </span><span class="s3">= </span><span class="s1">param</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s1">arg1Value</span><span class="s3">);</span>
				<span class="s3">}</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setNumber</span><span class="s3">(</span><span class="s1">result</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">param</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">())</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
			<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateCallExpressionMember</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;replace&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, (</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">param</span><span class="s3">) =&gt; {</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">param</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">length </span><span class="s3">!== </span><span class="s7">2</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">1</span><span class="s3">].</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">let </span><span class="s1">arg1 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]);</span>
				<span class="s4">let </span><span class="s1">arg2 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]);</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">() &amp;&amp; !</span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">isRegExp</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">arg1Value </span><span class="s3">= </span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">regExp </span><span class="s3">|| </span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">string</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">arg2</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">arg2Value </span><span class="s3">= </span><span class="s1">arg2</span><span class="s3">.</span><span class="s1">string</span><span class="s3">;</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">param</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s1">arg1Value</span><span class="s3">, </span><span class="s1">arg2Value</span><span class="s3">))</span>
					<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">param</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">())</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
			<span class="s3">});</span>
		<span class="s3">[</span><span class="s2">&quot;substr&quot;</span><span class="s3">, </span><span class="s2">&quot;substring&quot;</span><span class="s3">, </span><span class="s2">&quot;slice&quot;</span><span class="s3">].</span><span class="s1">forEach</span><span class="s3">(</span><span class="s1">fn </span><span class="s3">=&gt; {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateCallExpressionMember</span>
				<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">fn</span><span class="s3">)</span>
				<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, (</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">param</span><span class="s3">) =&gt; {</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s1">param</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">let </span><span class="s1">arg1</span><span class="s3">;</span>
					<span class="s4">let </span><span class="s1">result</span><span class="s3">,</span>
						<span class="s1">str </span><span class="s3">= </span><span class="s1">param</span><span class="s3">.</span><span class="s1">string</span><span class="s3">;</span>
					<span class="s4">switch </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">length</span><span class="s3">) {</span>
						<span class="s4">case </span><span class="s7">1</span><span class="s3">:</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
							<span class="s1">arg1 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]);</span>
							<span class="s4">if </span><span class="s3">(!</span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
							<span class="s1">result </span><span class="s3">= </span><span class="s1">str</span><span class="s3">[</span><span class="s1">fn</span><span class="s3">](</span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">number</span><span class="s3">);</span>
							<span class="s4">break</span><span class="s3">;</span>
						<span class="s4">case </span><span class="s7">2</span><span class="s3">: {</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">1</span><span class="s3">].</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
							<span class="s1">arg1 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]);</span>
							<span class="s4">const </span><span class="s1">arg2 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]);</span>
							<span class="s4">if </span><span class="s3">(!</span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
							<span class="s4">if </span><span class="s3">(!</span><span class="s1">arg2</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
							<span class="s1">result </span><span class="s3">= </span><span class="s1">str</span><span class="s3">[</span><span class="s1">fn</span><span class="s3">](</span><span class="s1">arg1</span><span class="s3">.</span><span class="s1">number</span><span class="s3">, </span><span class="s1">arg2</span><span class="s3">.</span><span class="s1">number</span><span class="s3">);</span>
							<span class="s4">break</span><span class="s3">;</span>
						<span class="s3">}</span>
						<span class="s4">default</span><span class="s3">:</span>
							<span class="s4">return</span><span class="s3">;</span>
					<span class="s3">}</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">result</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">param</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">())</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
				<span class="s3">});</span>
		<span class="s3">});</span>

		<span class="s5">/**</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{&quot;cooked&quot; | &quot;raw&quot;} kind kind of values to get</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TemplateLiteral} templateLiteralExpr TemplateLiteral expr</span>
		 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{{quasis: BasicEvaluatedExpression[], parts: BasicEvaluatedExpression[]}} Simplified template</span>
		 <span class="s5">*/</span>
		<span class="s4">const </span><span class="s1">getSimplifiedTemplateResult </span><span class="s3">= (</span><span class="s1">kind</span><span class="s3">, </span><span class="s1">templateLiteralExpr</span><span class="s3">) =&gt; {</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{BasicEvaluatedExpression[]} */</span>
			<span class="s4">const </span><span class="s1">quasis </span><span class="s3">= [];</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{BasicEvaluatedExpression[]} */</span>
			<span class="s4">const </span><span class="s1">parts </span><span class="s3">= [];</span>

			<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">templateLiteralExpr</span><span class="s3">.</span><span class="s1">quasis</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
				<span class="s4">const </span><span class="s1">quasiExpr </span><span class="s3">= </span><span class="s1">templateLiteralExpr</span><span class="s3">.</span><span class="s1">quasis</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
				<span class="s4">const </span><span class="s1">quasi </span><span class="s3">= </span><span class="s1">quasiExpr</span><span class="s3">.</span><span class="s1">value</span><span class="s3">[</span><span class="s1">kind</span><span class="s3">];</span>

				<span class="s4">if </span><span class="s3">(</span><span class="s1">i </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">prevExpr </span><span class="s3">= </span><span class="s1">parts</span><span class="s3">[</span><span class="s1">parts</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">];</span>
					<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span>
						<span class="s1">templateLiteralExpr</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">[</span><span class="s1">i </span><span class="s3">- </span><span class="s7">1</span><span class="s3">]</span>
					<span class="s3">);</span>
					<span class="s4">const </span><span class="s1">exprAsString </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">asString</span><span class="s3">();</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s4">typeof </span><span class="s1">exprAsString </span><span class="s3">=== </span><span class="s2">&quot;string&quot; </span><span class="s3">&amp;&amp;</span>
						<span class="s3">!</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
					<span class="s3">) {</span>
						<span class="s0">// We can merge quasi + expr + quasi when expr</span>
						<span class="s0">// is a const string</span>

						<span class="s1">prevExpr</span><span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">prevExpr</span><span class="s3">.</span><span class="s1">string </span><span class="s3">+ </span><span class="s1">exprAsString </span><span class="s3">+ </span><span class="s1">quasi</span><span class="s3">);</span>
						<span class="s1">prevExpr</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">([</span><span class="s1">prevExpr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">], </span><span class="s1">quasiExpr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]]);</span>
						<span class="s0">// We unset the expression as it doesn't match to a single expression</span>
						<span class="s1">prevExpr</span><span class="s3">.</span><span class="s1">setExpression</span><span class="s3">(</span><span class="s1">undefined</span><span class="s3">);</span>
						<span class="s4">continue</span><span class="s3">;</span>
					<span class="s3">}</span>
					<span class="s1">parts</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>
				<span class="s3">}</span>

				<span class="s4">const </span><span class="s1">part </span><span class="s3">= </span><span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">quasi</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">quasiExpr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">))</span>
					<span class="s3">.</span><span class="s1">setExpression</span><span class="s3">(</span><span class="s1">quasiExpr</span><span class="s3">);</span>
				<span class="s1">quasis</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">part</span><span class="s3">);</span>
				<span class="s1">parts</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">part</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">return </span><span class="s3">{</span>
				<span class="s1">quasis</span><span class="s3">,</span>
				<span class="s1">parts</span>
			<span class="s3">};</span>
		<span class="s3">};</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;TemplateLiteral&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_node </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">node </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{TemplateLiteral} */ </span><span class="s3">(</span><span class="s1">_node</span><span class="s3">);</span>

				<span class="s4">const </span><span class="s3">{ </span><span class="s1">quasis</span><span class="s3">, </span><span class="s1">parts </span><span class="s3">} = </span><span class="s1">getSimplifiedTemplateResult</span><span class="s3">(</span><span class="s2">&quot;cooked&quot;</span><span class="s3">, </span><span class="s1">node</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">parts</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">1</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">parts</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">node</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s3">}</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setTemplateString</span><span class="s3">(</span><span class="s1">quasis</span><span class="s3">, </span><span class="s1">parts</span><span class="s3">, </span><span class="s2">&quot;cooked&quot;</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">node</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
			<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;TaggedTemplateExpression&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_node </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">node </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{TaggedTemplateExpression} */ </span><span class="s3">(</span><span class="s1">_node</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">tag </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">node</span><span class="s3">.</span><span class="s1">tag</span><span class="s3">);</span>

				<span class="s4">if </span><span class="s3">(</span><span class="s1">tag</span><span class="s3">.</span><span class="s1">isIdentifier</span><span class="s3">() &amp;&amp; </span><span class="s1">tag</span><span class="s3">.</span><span class="s1">identifier </span><span class="s3">=== </span><span class="s2">&quot;String.raw&quot;</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s3">{ </span><span class="s1">quasis</span><span class="s3">, </span><span class="s1">parts </span><span class="s3">} = </span><span class="s1">getSimplifiedTemplateResult</span><span class="s3">(</span>
						<span class="s2">&quot;raw&quot;</span><span class="s3">,</span>
						<span class="s1">node</span><span class="s3">.</span><span class="s1">quasi</span>
					<span class="s3">);</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setTemplateString</span><span class="s3">(</span><span class="s1">quasis</span><span class="s3">, </span><span class="s1">parts</span><span class="s3">, </span><span class="s2">&quot;raw&quot;</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">node</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s3">}</span>
			<span class="s3">});</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateCallExpressionMember</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;concat&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, (</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">param</span><span class="s3">) =&gt; {</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">param</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">() &amp;&amp; !</span><span class="s1">param</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>

				<span class="s4">let </span><span class="s1">stringSuffix </span><span class="s3">= </span><span class="s4">null</span><span class="s3">;</span>
				<span class="s4">let </span><span class="s1">hasUnknownParams </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">innerExpressions </span><span class="s3">= [];</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&gt;= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i</span><span class="s3">--) {</span>
					<span class="s4">const </span><span class="s1">arg </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">argExpr </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s1">hasUnknownParams </span><span class="s3">||</span>
						<span class="s3">(!</span><span class="s1">argExpr</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">() &amp;&amp; !</span><span class="s1">argExpr</span><span class="s3">.</span><span class="s1">isNumber</span><span class="s3">())</span>
					<span class="s3">) {</span>
						<span class="s1">hasUnknownParams </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
						<span class="s1">innerExpressions</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">argExpr</span><span class="s3">);</span>
						<span class="s4">continue</span><span class="s3">;</span>
					<span class="s3">}</span>

					<span class="s4">const </span><span class="s1">value </span><span class="s3">= </span><span class="s1">argExpr</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()</span>
						<span class="s3">? </span><span class="s1">argExpr</span><span class="s3">.</span><span class="s1">string</span>
						<span class="s3">: </span><span class="s2">&quot;&quot; </span><span class="s3">+ </span><span class="s1">argExpr</span><span class="s3">.</span><span class="s1">number</span><span class="s3">;</span>

					<span class="s4">const </span><span class="s1">newString </span><span class="s3">= </span><span class="s1">value </span><span class="s3">+ (</span><span class="s1">stringSuffix </span><span class="s3">? </span><span class="s1">stringSuffix</span><span class="s3">.</span><span class="s1">string </span><span class="s3">: </span><span class="s2">&quot;&quot;</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">newRange </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">([</span>
						<span class="s1">argExpr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">],</span>
						<span class="s3">(</span><span class="s1">stringSuffix </span><span class="s3">|| </span><span class="s1">argExpr</span><span class="s3">).</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]</span>
					<span class="s3">]);</span>
					<span class="s1">stringSuffix </span><span class="s3">= </span><span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">newString</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span>
							<span class="s3">(</span><span class="s1">stringSuffix </span><span class="s3">&amp;&amp; </span><span class="s1">stringSuffix</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()) ||</span>
								<span class="s1">argExpr</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
						<span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">newRange</span><span class="s3">);</span>
				<span class="s3">}</span>

				<span class="s4">if </span><span class="s3">(</span><span class="s1">hasUnknownParams</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">prefix </span><span class="s3">= </span><span class="s1">param</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">() ? </span><span class="s1">param </span><span class="s3">: </span><span class="s1">param</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">inner </span><span class="s3">=</span>
						<span class="s1">param</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">() &amp;&amp; </span><span class="s1">param</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
							<span class="s3">? </span><span class="s1">param</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span><span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">innerExpressions</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">())</span>
							<span class="s3">: </span><span class="s1">innerExpressions</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">();</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span><span class="s1">prefix</span><span class="s3">, </span><span class="s1">stringSuffix</span><span class="s3">, </span><span class="s1">inner</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">param</span><span class="s3">.</span><span class="s1">isWrapped</span><span class="s3">()) {</span>
					<span class="s4">const </span><span class="s1">postfix </span><span class="s3">= </span><span class="s1">stringSuffix </span><span class="s3">|| </span><span class="s1">param</span><span class="s3">.</span><span class="s1">postfix</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">inner </span><span class="s3">= </span><span class="s1">param</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span>
						<span class="s3">? </span><span class="s1">param</span><span class="s3">.</span><span class="s1">wrappedInnerExpressions</span><span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">innerExpressions</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">())</span>
						<span class="s3">: </span><span class="s1">innerExpressions</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">();</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setWrapped</span><span class="s3">(</span><span class="s1">param</span><span class="s3">.</span><span class="s1">prefix</span><span class="s3">, </span><span class="s1">postfix</span><span class="s3">, </span><span class="s1">inner</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s4">const </span><span class="s1">newString </span><span class="s3">=</span>
						<span class="s1">param</span><span class="s3">.</span><span class="s1">string </span><span class="s3">+ (</span><span class="s1">stringSuffix </span><span class="s3">? </span><span class="s1">stringSuffix</span><span class="s3">.</span><span class="s1">string </span><span class="s3">: </span><span class="s2">&quot;&quot;</span><span class="s3">);</span>
					<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
						<span class="s3">.</span><span class="s1">setString</span><span class="s3">(</span><span class="s1">newString</span><span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span>
							<span class="s3">(</span><span class="s1">stringSuffix </span><span class="s3">&amp;&amp; </span><span class="s1">stringSuffix</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()) ||</span>
								<span class="s1">param</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()</span>
						<span class="s3">)</span>
						<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluateCallExpressionMember</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;split&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, (</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">param</span><span class="s3">) =&gt; {</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">param</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">length </span><span class="s3">!== </span><span class="s7">1</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">let </span><span class="s1">result</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">arg </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isString</span><span class="s3">()) {</span>
					<span class="s1">result </span><span class="s3">= </span><span class="s1">param</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">string</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">isRegExp</span><span class="s3">()) {</span>
					<span class="s1">result </span><span class="s3">= </span><span class="s1">param</span><span class="s3">.</span><span class="s1">string</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">regExp</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setArray</span><span class="s3">(</span><span class="s1">result</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">(</span><span class="s1">param</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">())</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
			<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;ConditionalExpression&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ConditionalExpression} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>

				<span class="s4">const </span><span class="s1">condition </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">test</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">conditionValue </span><span class="s3">= </span><span class="s1">condition</span><span class="s3">.</span><span class="s1">asBool</span><span class="s3">();</span>
				<span class="s4">let </span><span class="s1">res</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">conditionValue </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">consequent </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">alternate </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">);</span>
					<span class="s1">res </span><span class="s3">= </span><span class="s4">new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">();</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">consequent</span><span class="s3">.</span><span class="s1">isConditional</span><span class="s3">()) {</span>
						<span class="s1">res</span><span class="s3">.</span><span class="s1">setOptions</span><span class="s3">(</span>
							<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{BasicEvaluatedExpression[]} */ </span><span class="s3">(</span><span class="s1">consequent</span><span class="s3">.</span><span class="s1">options</span><span class="s3">)</span>
						<span class="s3">);</span>
					<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
						<span class="s1">res</span><span class="s3">.</span><span class="s1">setOptions</span><span class="s3">([</span><span class="s1">consequent</span><span class="s3">]);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">alternate</span><span class="s3">.</span><span class="s1">isConditional</span><span class="s3">()) {</span>
						<span class="s1">res</span><span class="s3">.</span><span class="s1">addOptions</span><span class="s3">(</span>
							<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{BasicEvaluatedExpression[]} */ </span><span class="s3">(</span><span class="s1">alternate</span><span class="s3">.</span><span class="s1">options</span><span class="s3">)</span>
						<span class="s3">);</span>
					<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
						<span class="s1">res</span><span class="s3">.</span><span class="s1">addOptions</span><span class="s3">([</span><span class="s1">alternate</span><span class="s3">]);</span>
					<span class="s3">}</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s1">res </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span>
						<span class="s1">conditionValue </span><span class="s3">? </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">consequent </span><span class="s3">: </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">alternate</span>
					<span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">condition</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">()) </span><span class="s1">res</span><span class="s3">.</span><span class="s1">setSideEffects</span><span class="s3">();</span>
				<span class="s3">}</span>
				<span class="s1">res</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
				<span class="s4">return </span><span class="s1">res</span><span class="s3">;</span>
			<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;ArrayExpression&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ArrayExpression} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>

				<span class="s4">const </span><span class="s1">items </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">elements</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">element </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s3">(</span>
						<span class="s1">element </span><span class="s3">!== </span><span class="s4">null </span><span class="s3">&amp;&amp;</span>
						<span class="s1">element</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;SpreadElement&quot; </span><span class="s3">&amp;&amp;</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">element</span><span class="s3">)</span>
					<span class="s3">);</span>
				<span class="s3">});</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">items</span><span class="s3">.</span><span class="s1">every</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">)) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
					<span class="s3">.</span><span class="s1">setItems</span><span class="s3">(</span><span class="s1">items</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
			<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;ChainExpression&quot;</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;JavascriptParser&quot;</span><span class="s3">, </span><span class="s1">_expr </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">expr </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ChainExpression} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">);</span>
				<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Expression[]} */</span>
				<span class="s4">const </span><span class="s1">optionalExpressionsStack </span><span class="s3">= [];</span>
				<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Expression|Super} */</span>
				<span class="s4">let </span><span class="s1">next </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">;</span>

				<span class="s4">while </span><span class="s3">(</span>
					<span class="s1">next</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot; </span><span class="s3">||</span>
					<span class="s1">next</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;CallExpression&quot;</span>
				<span class="s3">) {</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">next</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">next</span><span class="s3">.</span><span class="s1">optional</span><span class="s3">) {</span>
							<span class="s0">// SuperNode can not be optional</span>
							<span class="s1">optionalExpressionsStack</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
								<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Expression} */ </span><span class="s3">(</span><span class="s1">next</span><span class="s3">.</span><span class="s1">object</span><span class="s3">)</span>
							<span class="s3">);</span>
						<span class="s3">}</span>
						<span class="s1">next </span><span class="s3">= </span><span class="s1">next</span><span class="s3">.</span><span class="s1">object</span><span class="s3">;</span>
					<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">next</span><span class="s3">.</span><span class="s1">optional</span><span class="s3">) {</span>
							<span class="s0">// SuperNode can not be optional</span>
							<span class="s1">optionalExpressionsStack</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
								<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Expression} */ </span><span class="s3">(</span><span class="s1">next</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">)</span>
							<span class="s3">);</span>
						<span class="s3">}</span>
						<span class="s1">next </span><span class="s3">= </span><span class="s1">next</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">;</span>
					<span class="s3">}</span>
				<span class="s3">}</span>

				<span class="s4">while </span><span class="s3">(</span><span class="s1">optionalExpressionsStack</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">expression </span><span class="s3">=</span>
						<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Expression} */</span>
						<span class="s3">(</span><span class="s1">optionalExpressionsStack</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">());</span>
					<span class="s4">const </span><span class="s1">evaluated </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>

					<span class="s4">if </span><span class="s3">(</span><span class="s1">evaluated</span><span class="s3">.</span><span class="s1">asNullish</span><span class="s3">()) {</span>
						<span class="s4">return </span><span class="s1">evaluated</span><span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">_expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">));</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
				<span class="s4">return this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">);</span>
			<span class="s3">});</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Expression} node node</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Set&lt;string&gt;|undefined} destructured identifiers</span>
	 <span class="s5">*/</span>
	<span class="s1">destructuringAssignmentPropertiesFor</span><span class="s3">(</span><span class="s1">node</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span><span class="s3">) </span><span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s4">return this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">node</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Expression} expr expression</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string | VariableInfoInterface | undefined} identifier</span>
	 <span class="s5">*/</span>
	<span class="s1">getRenameIdentifier</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">result</span><span class="s3">.</span><span class="s1">isIdentifier</span><span class="s3">()) {</span>
			<span class="s4">return </span><span class="s1">result</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ClassExpression | ClassDeclaration} classy a class node</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
	 <span class="s5">*/</span>
	<span class="s1">walkClass</span><span class="s3">(</span><span class="s1">classy</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">classy</span><span class="s3">.</span><span class="s1">superClass</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">classExtendsExpression</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">classy</span><span class="s3">.</span><span class="s1">superClass</span><span class="s3">, </span><span class="s1">classy</span><span class="s3">)) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">classy</span><span class="s3">.</span><span class="s1">superClass</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">classy</span><span class="s3">.</span><span class="s1">body </span><span class="s3">&amp;&amp; </span><span class="s1">classy</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;ClassBody&quot;</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">scopeParams </span><span class="s3">= [];</span>
			<span class="s0">// Add class name in scope for recursive calls</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">classy</span><span class="s3">.</span><span class="s1">id</span><span class="s3">) {</span>
				<span class="s1">scopeParams</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">classy</span><span class="s3">.</span><span class="s1">id</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">inClassScope</span><span class="s3">(</span><span class="s4">true</span><span class="s3">, </span><span class="s1">scopeParams</span><span class="s3">, () =&gt; {</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">classElement of </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{TODO} */ </span><span class="s3">(</span><span class="s1">classy</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">)) {</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">classBodyElement</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">classElement</span><span class="s3">, </span><span class="s1">classy</span><span class="s3">)) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">classElement</span><span class="s3">.</span><span class="s1">computed </span><span class="s3">&amp;&amp; </span><span class="s1">classElement</span><span class="s3">.</span><span class="s1">key</span><span class="s3">) {</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">classElement</span><span class="s3">.</span><span class="s1">key</span><span class="s3">);</span>
						<span class="s3">}</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">classElement</span><span class="s3">.</span><span class="s1">value</span><span class="s3">) {</span>
							<span class="s4">if </span><span class="s3">(</span>
								<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">classBodyValue</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span>
									<span class="s1">classElement</span><span class="s3">.</span><span class="s1">value</span><span class="s3">,</span>
									<span class="s1">classElement</span><span class="s3">,</span>
									<span class="s1">classy</span>
								<span class="s3">)</span>
							<span class="s3">) {</span>
								<span class="s4">const </span><span class="s1">wasTopLevel </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">;</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">classElement</span><span class="s3">.</span><span class="s1">value</span><span class="s3">);</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s1">wasTopLevel</span><span class="s3">;</span>
							<span class="s3">}</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">classElement</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;StaticBlock&quot;</span><span class="s3">) {</span>
							<span class="s4">const </span><span class="s1">wasTopLevel </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">;</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">walkBlockStatement</span><span class="s3">(</span><span class="s1">classElement</span><span class="s3">);</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s1">wasTopLevel</span><span class="s3">;</span>
						<span class="s3">}</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* Pre walking iterates the scope for variable declarations</span>
	 <span class="s5">*</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(Statement | ModuleDeclaration)[]} statements statements</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkStatements</span><span class="s3">(</span><span class="s1">statements</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">index </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">statements</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">index </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">; </span><span class="s1">index</span><span class="s3">++) {</span>
			<span class="s4">const </span><span class="s1">statement </span><span class="s3">= </span><span class="s1">statements</span><span class="s3">[</span><span class="s1">index</span><span class="s3">];</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* Block pre walking iterates the scope for block variable declarations</span>
	 <span class="s5">*</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(Statement | ModuleDeclaration)[]} statements statements</span>
	 <span class="s5">*/</span>
	<span class="s1">blockPreWalkStatements</span><span class="s3">(</span><span class="s1">statements</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">index </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">statements</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">index </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">; </span><span class="s1">index</span><span class="s3">++) {</span>
			<span class="s4">const </span><span class="s1">statement </span><span class="s3">= </span><span class="s1">statements</span><span class="s3">[</span><span class="s1">index</span><span class="s3">];</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* Walking iterates the statements and expressions and processes them</span>
	 <span class="s5">*</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(Statement | ModuleDeclaration)[]} statements statements</span>
	 <span class="s5">*/</span>
	<span class="s1">walkStatements</span><span class="s3">(</span><span class="s1">statements</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">index </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">statements</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">index </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">; </span><span class="s1">index</span><span class="s3">++) {</span>
			<span class="s4">const </span><span class="s1">statement </span><span class="s3">= </span><span class="s1">statements</span><span class="s3">[</span><span class="s1">index</span><span class="s3">];</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* Walking iterates the statements and expressions and processes them</span>
	 <span class="s5">*</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Statement | ModuleDeclaration} statement statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">preStatement</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">)) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkBlockStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;DoWhileStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkDoWhileStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ForInStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkForInStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ForOfStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkForOfStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ForStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkForStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;FunctionDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkFunctionDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;IfStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkIfStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;LabeledStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkLabeledStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;SwitchStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkSwitchStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;TryStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkTryStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;WhileStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkWhileStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;WithStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkWithStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Statement | ModuleDeclaration} statement statement</span>
	 <span class="s5">*/</span>
	<span class="s1">blockPreWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">blockPreStatement</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">)) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;ImportDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkImportDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ExportAllDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkExportAllDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ExportDefaultDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkExportDefaultDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ExportNamedDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkExportNamedDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ClassDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkClassDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ExpressionStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkExpressionStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Statement | ModuleDeclaration} statement statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) !== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkBlockStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ClassDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkClassDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;DoWhileStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkDoWhileStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ExportDefaultDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExportDefaultDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ExportNamedDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExportNamedDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ExpressionStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpressionStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ForInStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkForInStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ForOfStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkForOfStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ForStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkForStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;FunctionDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkFunctionDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;IfStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkIfStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;LabeledStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkLabeledStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ReturnStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkReturnStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;SwitchStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkSwitchStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ThrowStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkThrowStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;TryStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkTryStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;WhileStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkWhileStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;WithStatement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkWithStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* Walks a statements that is nested within a parent statement</span>
	 <span class="s5">* and can potentially be a non-block statement.</span>
	 <span class="s5">* This enforces the nested statement to never be in ASI position.</span>
	 <span class="s5">*</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Statement} statement the nested statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s0">// Real Statements</span>
	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{BlockStatement} statement block statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkBlockStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatements</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{BlockStatement} statement block statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkBlockStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">inBlockScope</span><span class="s3">(() =&gt; {</span>
			<span class="s4">const </span><span class="s1">body </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatements</span><span class="s3">(</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatements</span><span class="s3">(</span><span class="s1">body</span><span class="s3">);</span>
		<span class="s3">});</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ExpressionStatement} statement expression statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkExpressionStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{IfStatement} statement if statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkIfStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{IfStatement} statement if statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkIfStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">statementIf</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">test</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">result</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{LabeledStatement} statement with statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkLabeledStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{LabeledStatement} statement with statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkLabeledStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">hook </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">label</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">label</span><span class="s3">.</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{WithStatement} statement with statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkWithStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{WithStatement} statement with statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkWithStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">object</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{SwitchStatement} statement switch statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkSwitchStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkSwitchCases</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">cases</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{SwitchStatement} statement switch statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkSwitchStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">discriminant</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkSwitchCases</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">cases</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ReturnStatement | ThrowStatement} statement return or throw statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkTerminatingStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ReturnStatement} statement return statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkReturnStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkTerminatingStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ThrowStatement} statement return statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkThrowStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkTerminatingStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TryStatement} statement try statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkTryStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">block</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">handler</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkCatchClause</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">handler</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">finalizer</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">finalizer</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TryStatement} statement try statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkTryStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inTry</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">block</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inTry </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">block</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inTry </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">handler</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkCatchClause</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">handler</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">finalizer</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">finalizer</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{WhileStatement} statement while statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkWhileStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{WhileStatement} statement while statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkWhileStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">test</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{DoWhileStatement} statement do while statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkDoWhileStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{DoWhileStatement} statement do while statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkDoWhileStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">test</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ForStatement} statement for statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkForStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">init</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">init</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">init</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ForStatement} statement for statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkForStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">inBlockScope</span><span class="s3">(() =&gt; {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">init</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">init</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">) {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">init</span><span class="s3">);</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">init</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">init</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">test</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">test</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">update</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">update</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">const </span><span class="s1">body </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">) {</span>
				<span class="s0">// no need to add additional scope</span>
				<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatements</span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatements</span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ForInStatement} statement for statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkForInStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ForInStatement} statement for statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkForInStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">inBlockScope</span><span class="s3">(() =&gt; {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">body </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">) {</span>
				<span class="s0">// no need to add additional scope</span>
				<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatements</span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatements</span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
	<span class="s3">}</span>

	<span class="s1">preWalkForOfStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">await </span><span class="s3">&amp;&amp; </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">topLevelAwait</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ForOfStatement} statement for statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkForOfStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">inBlockScope</span><span class="s3">(() =&gt; {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">body </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">) {</span>
				<span class="s0">// no need to add additional scope</span>
				<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatements</span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatements</span><span class="s3">(</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNestedStatement</span><span class="s3">(</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{FunctionDeclaration} statement function declaration</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkFunctionDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">id</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">id</span><span class="s3">.</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{FunctionDeclaration} statement function declaration</span>
	 <span class="s5">*/</span>
	<span class="s1">walkFunctionDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">wasTopLevel </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">inFunctionScope</span><span class="s3">(</span><span class="s4">true</span><span class="s3">, </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">params</span><span class="s3">, () =&gt; {</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">param of statement</span><span class="s3">.</span><span class="s1">params</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">param</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">detectMode</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s1">wasTopLevel</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ExpressionStatement} statement expression statement</span>
	 <span class="s5">*/</span>
	<span class="s1">blockPreWalkExpressionStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">expression </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">;</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;AssignmentExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkAssignmentExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AssignmentExpression} expression assignment expression</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkAssignmentExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;ObjectPattern&quot; </span><span class="s3">||</span>
			<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span>
		<span class="s3">)</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">keys </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">_preWalkObjectPattern</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(!</span><span class="s1">keys</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>

		<span class="s0">// check multiple assignments</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">)) {</span>
			<span class="s4">const </span><span class="s1">set </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span><span class="s3">.</span><span class="s1">delete</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">id of set</span><span class="s3">) </span><span class="s1">keys</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">id</span><span class="s3">);</span>
		<span class="s3">}</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span>
			<span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;AwaitExpression&quot;</span>
				<span class="s3">? </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">.</span><span class="s1">argument</span>
				<span class="s3">: </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">,</span>
			<span class="s1">keys</span>
		<span class="s3">);</span>

		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;AssignmentExpression&quot;</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkAssignmentExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">blockPreWalkImportDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">source </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">source</span><span class="s3">.</span><span class="s1">value</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">import</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">source</span><span class="s3">);</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">specifier of statement</span><span class="s3">.</span><span class="s1">specifiers</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">name </span><span class="s3">= </span><span class="s1">specifier</span><span class="s3">.</span><span class="s1">local</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
			<span class="s4">switch </span><span class="s3">(</span><span class="s1">specifier</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
				<span class="s4">case </span><span class="s2">&quot;ImportDefaultSpecifier&quot;</span><span class="s3">:</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">importSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">source</span><span class="s3">, </span><span class="s2">&quot;default&quot;</span><span class="s3">, </span><span class="s1">name</span><span class="s3">)</span>
					<span class="s3">) {</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">break</span><span class="s3">;</span>
				<span class="s4">case </span><span class="s2">&quot;ImportSpecifier&quot;</span><span class="s3">:</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">importSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span>
							<span class="s1">statement</span><span class="s3">,</span>
							<span class="s1">source</span><span class="s3">,</span>
							<span class="s1">specifier</span><span class="s3">.</span><span class="s1">imported</span><span class="s3">.</span><span class="s1">name </span><span class="s3">|| </span><span class="s1">specifier</span><span class="s3">.</span><span class="s1">imported</span><span class="s3">.</span><span class="s1">value</span><span class="s3">,</span>
							<span class="s1">name</span>
						<span class="s3">)</span>
					<span class="s3">) {</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">break</span><span class="s3">;</span>
				<span class="s4">case </span><span class="s2">&quot;ImportNamespaceSpecifier&quot;</span><span class="s3">:</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">importSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">source</span><span class="s3">, </span><span class="s4">null</span><span class="s3">, </span><span class="s1">name</span><span class="s3">)) {</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">break</span><span class="s3">;</span>
				<span class="s4">default</span><span class="s3">:</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">enterDeclaration</span><span class="s3">(</span><span class="s1">declaration</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">) {</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">declarator of declaration</span><span class="s3">.</span><span class="s1">declarations</span><span class="s3">) {</span>
					<span class="s4">switch </span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
						<span class="s4">case </span><span class="s2">&quot;VariableDeclarator&quot;</span><span class="s3">: {</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">id</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
							<span class="s4">break</span><span class="s3">;</span>
						<span class="s3">}</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;FunctionDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">id</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ClassDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">id</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">blockPreWalkExportNamedDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">let </span><span class="s1">source</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">source</span><span class="s3">) {</span>
			<span class="s1">source </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">source</span><span class="s3">.</span><span class="s1">value</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportImport</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">source</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">export</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportDeclaration</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">)</span>
			<span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">);</span>
				<span class="s4">let </span><span class="s1">index </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">, </span><span class="s1">def </span><span class="s3">=&gt; {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">def</span><span class="s3">, </span><span class="s1">def</span><span class="s3">, </span><span class="s1">index</span><span class="s3">++);</span>
				<span class="s3">});</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">specifiers</span><span class="s3">) {</span>
			<span class="s4">for </span><span class="s3">(</span>
				<span class="s4">let </span><span class="s1">specifierIndex </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
				<span class="s1">specifierIndex </span><span class="s3">&lt; </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">specifiers</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
				<span class="s1">specifierIndex</span><span class="s3">++</span>
			<span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">specifier </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">specifiers</span><span class="s3">[</span><span class="s1">specifierIndex</span><span class="s3">];</span>
				<span class="s4">switch </span><span class="s3">(</span><span class="s1">specifier</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
					<span class="s4">case </span><span class="s2">&quot;ExportSpecifier&quot;</span><span class="s3">: {</span>
						<span class="s4">const </span><span class="s1">name </span><span class="s3">= </span><span class="s1">specifier</span><span class="s3">.</span><span class="s1">exported</span><span class="s3">.</span><span class="s1">name </span><span class="s3">|| </span><span class="s1">specifier</span><span class="s3">.</span><span class="s1">exported</span><span class="s3">.</span><span class="s1">value</span><span class="s3">;</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">source</span><span class="s3">) {</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportImportSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span>
								<span class="s1">statement</span><span class="s3">,</span>
								<span class="s1">source</span><span class="s3">,</span>
								<span class="s1">specifier</span><span class="s3">.</span><span class="s1">local</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
								<span class="s1">name</span><span class="s3">,</span>
								<span class="s1">specifierIndex</span>
							<span class="s3">);</span>
						<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span>
								<span class="s1">statement</span><span class="s3">,</span>
								<span class="s1">specifier</span><span class="s3">.</span><span class="s1">local</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
								<span class="s1">name</span><span class="s3">,</span>
								<span class="s1">specifierIndex</span>
							<span class="s3">);</span>
						<span class="s3">}</span>
						<span class="s4">break</span><span class="s3">;</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ExportNamedDeclaration} statement the statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkExportNamedDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">blockPreWalkExportDefaultDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">id </span><span class="s3">&amp;&amp;</span>
			<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;FunctionExpression&quot; </span><span class="s3">&amp;&amp;</span>
			<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;ClassExpression&quot;</span>
		<span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span>
				<span class="s1">statement</span><span class="s3">,</span>
				<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">id</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
				<span class="s2">&quot;default&quot;</span><span class="s3">,</span>
				<span class="s1">undefined</span>
			<span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">walkExportDefaultDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">export</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">id </span><span class="s3">&amp;&amp;</span>
			<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;FunctionExpression&quot; </span><span class="s3">&amp;&amp;</span>
			<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;ClassExpression&quot;</span>
		<span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportDeclaration</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">)</span>
			<span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s0">// Acorn parses `export default function() {}` as `FunctionDeclaration` and</span>
			<span class="s0">// `export default class {}` as `ClassDeclaration`, both with `id = null`.</span>
			<span class="s0">// These nodes must be treated as expressions.</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;FunctionDeclaration&quot; </span><span class="s3">||</span>
				<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;ClassDeclaration&quot;</span>
			<span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportExpression</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">)) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span>
					<span class="s1">statement</span><span class="s3">,</span>
					<span class="s1">statement</span><span class="s3">.</span><span class="s1">declaration</span><span class="s3">,</span>
					<span class="s2">&quot;default&quot;</span><span class="s3">,</span>
					<span class="s1">undefined</span>
				<span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">blockPreWalkExportAllDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">source </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">source</span><span class="s3">.</span><span class="s1">value</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">name </span><span class="s3">= </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">exported </span><span class="s3">? </span><span class="s1">statement</span><span class="s3">.</span><span class="s1">exported</span><span class="s3">.</span><span class="s1">name </span><span class="s3">: </span><span class="s4">null</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportImport</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">source</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">exportImportSpecifier</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">source</span><span class="s3">, </span><span class="s4">null</span><span class="s3">, </span><span class="s1">name</span><span class="s3">, </span><span class="s7">0</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{VariableDeclaration} statement variable declaration</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">kind </span><span class="s3">!== </span><span class="s2">&quot;var&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">_preWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">varDeclarationVar</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{VariableDeclaration} statement variable declaration</span>
	 <span class="s5">*/</span>
	<span class="s1">blockPreWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">kind </span><span class="s3">=== </span><span class="s2">&quot;var&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">hookMap </span><span class="s3">=</span>
			<span class="s1">statement</span><span class="s3">.</span><span class="s1">kind </span><span class="s3">=== </span><span class="s2">&quot;const&quot;</span>
				<span class="s3">? </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">varDeclarationConst</span>
				<span class="s3">: </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">varDeclarationLet</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">_preWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">hookMap</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{VariableDeclaration} statement variable declaration</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TODO} hookMap map of hooks</span>
	 <span class="s5">*/</span>
	<span class="s1">_preWalkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">, </span><span class="s1">hookMap</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">declarator of statement</span><span class="s3">.</span><span class="s1">declarations</span><span class="s3">) {</span>
			<span class="s4">switch </span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
				<span class="s4">case </span><span class="s2">&quot;VariableDeclarator&quot;</span><span class="s3">: {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkVariableDeclarator</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">preDeclarator</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">, </span><span class="s1">statement</span><span class="s3">)) {</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">id</span><span class="s3">, (</span><span class="s1">name</span><span class="s3">, </span><span class="s1">decl</span><span class="s3">) =&gt; {</span>
							<span class="s4">let </span><span class="s1">hook </span><span class="s3">= </span><span class="s1">hookMap</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">=== </span><span class="s1">undefined </span><span class="s3">|| !</span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">decl</span><span class="s3">)) {</span>
								<span class="s1">hook </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">varDeclaration</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
								<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">=== </span><span class="s1">undefined </span><span class="s3">|| !</span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">decl</span><span class="s3">)) {</span>
									<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
								<span class="s3">}</span>
							<span class="s3">}</span>
						<span class="s3">});</span>
					<span class="s3">}</span>
					<span class="s4">break</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ObjectPattern} objectPattern object pattern</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Set&lt;string&gt; | undefined} set of names or undefined if not all keys are identifiers</span>
	 <span class="s5">*/</span>
	<span class="s1">_preWalkObjectPattern</span><span class="s3">(</span><span class="s1">objectPattern</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">ids </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
		<span class="s4">const </span><span class="s1">properties </span><span class="s3">= </span><span class="s1">objectPattern</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">;</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">properties</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
			<span class="s4">const </span><span class="s1">property </span><span class="s3">= </span><span class="s1">properties</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">property</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;Property&quot;</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">key </span><span class="s3">= </span><span class="s1">property</span><span class="s3">.</span><span class="s1">key</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">key</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) {</span>
				<span class="s1">ids</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">key</span><span class="s3">.</span><span class="s1">name</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">const </span><span class="s1">id </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">str </span><span class="s3">= </span><span class="s1">id</span><span class="s3">.</span><span class="s1">asString</span><span class="s3">();</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">str</span><span class="s3">) {</span>
					<span class="s1">ids</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">str</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s0">// could not evaluate key</span>
					<span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">}</span>

		<span class="s4">return </span><span class="s1">ids</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{VariableDeclarator} declarator variable declarator</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkVariableDeclarator</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s3">!</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init </span><span class="s3">||</span>
			<span class="s1">declarator</span><span class="s3">.</span><span class="s1">id</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;ObjectPattern&quot; </span><span class="s3">||</span>
			<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span>
		<span class="s3">)</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">keys </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">_preWalkObjectPattern</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">id</span><span class="s3">);</span>

		<span class="s4">if </span><span class="s3">(!</span><span class="s1">keys</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span>
			<span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;AwaitExpression&quot;</span>
				<span class="s3">? </span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">.</span><span class="s1">argument</span>
				<span class="s3">: </span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">,</span>
			<span class="s1">keys</span>
		<span class="s3">);</span>

		<span class="s4">if </span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;AssignmentExpression&quot;</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkAssignmentExpression</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{VariableDeclaration} statement variable declaration</span>
	 <span class="s5">*/</span>
	<span class="s1">walkVariableDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">declarator of statement</span><span class="s3">.</span><span class="s1">declarations</span><span class="s3">) {</span>
			<span class="s4">switch </span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
				<span class="s4">case </span><span class="s2">&quot;VariableDeclarator&quot;</span><span class="s3">: {</span>
					<span class="s4">const </span><span class="s1">renameIdentifier </span><span class="s3">=</span>
						<span class="s1">declarator</span><span class="s3">.</span><span class="s1">init </span><span class="s3">&amp;&amp; </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getRenameIdentifier</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">renameIdentifier </span><span class="s3">&amp;&amp; </span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">id</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) {</span>
						<span class="s4">const </span><span class="s1">hook </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">canRename</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">renameIdentifier</span><span class="s3">);</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">&amp;&amp; </span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">)) {</span>
							<span class="s0">// renaming with &quot;var a = b;&quot;</span>
							<span class="s4">const </span><span class="s1">hook </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">rename</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">renameIdentifier</span><span class="s3">);</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">=== </span><span class="s1">undefined </span><span class="s3">|| !</span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">)) {</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">setVariable</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">id</span><span class="s3">.</span><span class="s1">name</span><span class="s3">, </span><span class="s1">renameIdentifier</span><span class="s3">);</span>
							<span class="s3">}</span>
							<span class="s4">break</span><span class="s3">;</span>
						<span class="s3">}</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">, </span><span class="s1">statement</span><span class="s3">)) {</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">id</span><span class="s3">);</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">declarator</span><span class="s3">.</span><span class="s1">init</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">break</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ClassDeclaration} statement class declaration</span>
	 <span class="s5">*/</span>
	<span class="s1">blockPreWalkClassDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">id</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">.</span><span class="s1">id</span><span class="s3">.</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ClassDeclaration} statement class declaration</span>
	 <span class="s5">*/</span>
	<span class="s1">walkClassDeclaration</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkClass</span><span class="s3">(</span><span class="s1">statement</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{SwitchCase[]} switchCases switch statement</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkSwitchCases</span><span class="s3">(</span><span class="s1">switchCases</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">index </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">switchCases</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">index </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">; </span><span class="s1">index</span><span class="s3">++) {</span>
			<span class="s4">const </span><span class="s1">switchCase </span><span class="s3">= </span><span class="s1">switchCases</span><span class="s3">[</span><span class="s1">index</span><span class="s3">];</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatements</span><span class="s3">(</span><span class="s1">switchCase</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{SwitchCase[]} switchCases switch statement</span>
	 <span class="s5">*/</span>
	<span class="s1">walkSwitchCases</span><span class="s3">(</span><span class="s1">switchCases</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">inBlockScope</span><span class="s3">(() =&gt; {</span>
			<span class="s4">const </span><span class="s1">len </span><span class="s3">= </span><span class="s1">switchCases</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>

			<span class="s0">// we need to pre walk all statements first since we can have invalid code</span>
			<span class="s0">// import A from &quot;module&quot;;</span>
			<span class="s0">// switch(1) {</span>
			<span class="s0">//    case 1:</span>
			<span class="s0">//      console.log(A); // should fail at runtime</span>
			<span class="s0">//    case 2:</span>
			<span class="s0">//      const A = 1;</span>
			<span class="s0">// }</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">index </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">index </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">; </span><span class="s1">index</span><span class="s3">++) {</span>
				<span class="s4">const </span><span class="s1">switchCase </span><span class="s3">= </span><span class="s1">switchCases</span><span class="s3">[</span><span class="s1">index</span><span class="s3">];</span>

				<span class="s4">if </span><span class="s3">(</span><span class="s1">switchCase</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatements</span><span class="s3">(</span><span class="s1">switchCase</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>

			<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">index </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">index </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">; </span><span class="s1">index</span><span class="s3">++) {</span>
				<span class="s4">const </span><span class="s1">switchCase </span><span class="s3">= </span><span class="s1">switchCases</span><span class="s3">[</span><span class="s1">index</span><span class="s3">];</span>

				<span class="s4">if </span><span class="s3">(</span><span class="s1">switchCase</span><span class="s3">.</span><span class="s1">test</span><span class="s3">) {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">switchCase</span><span class="s3">.</span><span class="s1">test</span><span class="s3">);</span>
				<span class="s3">}</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">switchCase</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatements</span><span class="s3">(</span><span class="s1">switchCase</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{CatchClause} catchClause catch clause</span>
	 <span class="s5">*/</span>
	<span class="s1">preWalkCatchClause</span><span class="s3">(</span><span class="s1">catchClause</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">catchClause</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{CatchClause} catchClause catch clause</span>
	 <span class="s5">*/</span>
	<span class="s1">walkCatchClause</span><span class="s3">(</span><span class="s1">catchClause</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">inBlockScope</span><span class="s3">(() =&gt; {</span>
			<span class="s0">// Error binding is optional in catch clause since ECMAScript 2019</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">catchClause</span><span class="s3">.</span><span class="s1">param </span><span class="s3">!== </span><span class="s4">null</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">catchClause</span><span class="s3">.</span><span class="s1">param</span><span class="s3">, </span><span class="s1">ident </span><span class="s3">=&gt; {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">ident</span><span class="s3">);</span>
				<span class="s3">});</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">catchClause</span><span class="s3">.</span><span class="s1">param</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatement</span><span class="s3">(</span><span class="s1">catchClause</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">catchClause</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
		<span class="s3">});</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Pattern} pattern pattern</span>
	 <span class="s5">*/</span>
	<span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">) {</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;ArrayPattern&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkArrayPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;AssignmentPattern&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkAssignmentPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkMemberExpression</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ObjectPattern&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkObjectPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;RestElement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkRestElement</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AssignmentPattern} pattern assignment pattern</span>
	 <span class="s5">*/</span>
	<span class="s1">walkAssignmentPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s1">walkObjectPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
			<span class="s4">const </span><span class="s1">prop </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">prop</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">computed</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">key</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">value</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">value</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ArrayPattern} pattern array pattern</span>
	 <span class="s5">*/</span>
	<span class="s1">walkArrayPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">elements</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
			<span class="s4">const </span><span class="s1">element </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">elements</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">element</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">element</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{RestElement} pattern rest element</span>
	 <span class="s5">*/</span>
	<span class="s1">walkRestElement</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(Expression | SpreadElement | null)[]} expressions expressions</span>
	 <span class="s5">*/</span>
	<span class="s1">walkExpressions</span><span class="s3">(</span><span class="s1">expressions</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">expression of expressions</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TODO} expression expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;ArrayExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkArrayExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ArrowFunctionExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkArrowFunctionExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;AssignmentExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkAssignmentExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;AwaitExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkAwaitExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;BinaryExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkBinaryExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;CallExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkCallExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ChainExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkChainExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ClassExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkClassExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ConditionalExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkConditionalExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;FunctionExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkFunctionExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkIdentifier</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ImportExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkImportExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;LogicalExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkLogicalExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;MetaProperty&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkMetaProperty</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkMemberExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;NewExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkNewExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ObjectExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkObjectExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;SequenceExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkSequenceExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkSpreadElement</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;TaggedTemplateExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkTaggedTemplateExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;TemplateLiteral&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkTemplateLiteral</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ThisExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkThisExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;UnaryExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkUnaryExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;UpdateExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkUpdateExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;YieldExpression&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkYieldExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AwaitExpression} expression await expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkAwaitExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">)</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">topLevelAwait</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ArrayExpression} expression array expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkArrayExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">elements</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpressions</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">elements</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{SpreadElement} expression spread element</span>
	 <span class="s5">*/</span>
	<span class="s1">walkSpreadElement</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ObjectExpression} expression object expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkObjectExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span>
			<span class="s4">let </span><span class="s1">propIndex </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
			<span class="s1">propIndex </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">;</span>
			<span class="s1">propIndex</span><span class="s3">++</span>
		<span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">prop </span><span class="s3">= </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">[</span><span class="s1">propIndex</span><span class="s3">];</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkProperty</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Property | SpreadElement} prop property or spread element</span>
	 <span class="s5">*/</span>
	<span class="s1">walkProperty</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">computed</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">key</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">shorthand </span><span class="s3">&amp;&amp; </span><span class="s1">prop</span><span class="s3">.</span><span class="s1">value </span><span class="s3">&amp;&amp; </span><span class="s1">prop</span><span class="s3">.</span><span class="s1">value</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inShorthand </span><span class="s3">= </span><span class="s1">prop</span><span class="s3">.</span><span class="s1">value</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkIdentifier</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">value</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inShorthand </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">.</span><span class="s1">value</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{FunctionExpression} expression arrow function expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkFunctionExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">wasTopLevel </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">scopeParams </span><span class="s3">= [</span><span class="s1">...expression</span><span class="s3">.</span><span class="s1">params</span><span class="s3">];</span>

		<span class="s0">// Add function name in scope for recursive calls</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">id</span><span class="s3">) {</span>
			<span class="s1">scopeParams</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">id</span><span class="s3">);</span>
		<span class="s3">}</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">inFunctionScope</span><span class="s3">(</span><span class="s4">true</span><span class="s3">, </span><span class="s1">scopeParams</span><span class="s3">, () =&gt; {</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">param of expression</span><span class="s3">.</span><span class="s1">params</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">param</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">detectMode</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s1">wasTopLevel</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ArrowFunctionExpression} expression arrow function expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkArrowFunctionExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">wasTopLevel </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s1">wasTopLevel </span><span class="s3">? </span><span class="s2">&quot;arrow&quot; </span><span class="s3">: </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">inFunctionScope</span><span class="s3">(</span><span class="s4">false</span><span class="s3">, </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">params</span><span class="s3">, () =&gt; {</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">param of expression</span><span class="s3">.</span><span class="s1">params</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">param</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">detectMode</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s1">wasTopLevel</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{SequenceExpression} expression the sequence</span>
	 <span class="s5">*/</span>
	<span class="s1">walkSequenceExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(!</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
		<span class="s0">// We treat sequence expressions like statements when they are one statement level</span>
		<span class="s0">// This has some benefits for optimizations that only work on statement level</span>
		<span class="s4">const </span><span class="s1">currentStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">[</span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">];</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s1">currentStatement </span><span class="s3">=== </span><span class="s1">expression </span><span class="s3">||</span>
			<span class="s3">(</span><span class="s1">currentStatement</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;ExpressionStatement&quot; </span><span class="s3">&amp;&amp;</span>
				<span class="s1">currentStatement</span><span class="s3">.</span><span class="s1">expression </span><span class="s3">=== </span><span class="s1">expression</span><span class="s3">)</span>
		<span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">old </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">expr of expression</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
			<span class="s3">}</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">old</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpressions</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{UpdateExpression} expression the update expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkUpdateExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{UnaryExpression} expression the unary expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkUnaryExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;typeof&quot;</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForExpression</span><span class="s3">(</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">typeof</span><span class="s3">,</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">,</span>
				<span class="s1">expression</span>
			<span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;ChainExpression&quot;</span><span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForExpression</span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">typeof</span><span class="s3">,</span>
					<span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">,</span>
					<span class="s1">expression</span>
				<span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{LogicalExpression | BinaryExpression} expression the expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkLeftRightExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{BinaryExpression} expression the binary expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkBinaryExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">binaryExpression</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) === </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkLeftRightExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{LogicalExpression} expression the logical expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkLogicalExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">expressionLogicalOperator</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkLeftRightExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">result</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AssignmentExpression} expression assignment expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkAssignmentExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">renameIdentifier </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getRenameIdentifier</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">renameIdentifier</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">canRename</span><span class="s3">,</span>
						<span class="s1">renameIdentifier</span><span class="s3">,</span>
						<span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span>
					<span class="s3">)</span>
				<span class="s3">) {</span>
					<span class="s0">// renaming &quot;a = b;&quot;</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">rename</span><span class="s3">,</span>
							<span class="s1">renameIdentifier</span><span class="s3">,</span>
							<span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span>
						<span class="s3">)</span>
					<span class="s3">) {</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">setVariable</span><span class="s3">(</span>
							<span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
							<span class="s4">typeof </span><span class="s1">renameIdentifier </span><span class="s3">=== </span><span class="s2">&quot;string&quot;</span>
								<span class="s3">? </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getVariableInfo</span><span class="s3">(</span><span class="s1">renameIdentifier</span><span class="s3">)</span>
								<span class="s3">: </span><span class="s1">renameIdentifier</span>
						<span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">, (</span><span class="s1">name</span><span class="s3">, </span><span class="s1">decl</span><span class="s3">) =&gt; {</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">, </span><span class="s1">name</span><span class="s3">, </span><span class="s1">expression</span><span class="s3">)) {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">type</span><span class="s3">.</span><span class="s1">endsWith</span><span class="s3">(</span><span class="s2">&quot;Pattern&quot;</span><span class="s3">)) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">, (</span><span class="s1">name</span><span class="s3">, </span><span class="s1">decl</span><span class="s3">) =&gt; {</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">, </span><span class="s1">name</span><span class="s3">, </span><span class="s1">expression</span><span class="s3">)) {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkPattern</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">exprName </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getMemberExpressionInfo</span><span class="s3">(</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">,</span>
				<span class="s1">ALLOWED_MEMBER_TYPES_EXPRESSION</span>
			<span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">exprName</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">assignMemberChain</span><span class="s3">,</span>
						<span class="s1">exprName</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">,</span>
						<span class="s1">expression</span><span class="s3">,</span>
						<span class="s1">exprName</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">()</span>
					<span class="s3">)</span>
				<span class="s3">) {</span>
					<span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ConditionalExpression} expression conditional expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkConditionalExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">expressionConditionalOperator</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">test</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">result</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{NewExpression} expression new expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkNewExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForExpression</span><span class="s3">(</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">new</span><span class="s3">,</span>
			<span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">,</span>
			<span class="s1">expression</span>
		<span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpressions</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{YieldExpression} expression yield expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkYieldExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TemplateLiteral} expression template literal</span>
	 <span class="s5">*/</span>
	<span class="s1">walkTemplateLiteral</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpressions</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TaggedTemplateExpression} expression tagged template expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkTaggedTemplateExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">tag</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inTaggedTemplateTag </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">tag</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inTaggedTemplateTag </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">quasi </span><span class="s3">&amp;&amp; </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">quasi</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpressions</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">quasi</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ClassExpression} expression the class expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkClassExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkClass</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ChainExpression} expression expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkChainExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">optionalChaining</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>

		<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;CallExpression&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkCallExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkMemberExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">_walkIIFE</span><span class="s3">(</span><span class="s1">functionExpression</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">currentThis</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">getVarInfo </span><span class="s3">= </span><span class="s1">argOrThis </span><span class="s3">=&gt; {</span>
			<span class="s4">const </span><span class="s1">renameIdentifier </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getRenameIdentifier</span><span class="s3">(</span><span class="s1">argOrThis</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">renameIdentifier</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">canRename</span><span class="s3">,</span>
						<span class="s1">renameIdentifier</span><span class="s3">,</span>
						<span class="s1">argOrThis</span>
					<span class="s3">)</span>
				<span class="s3">) {</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">rename</span><span class="s3">,</span>
							<span class="s1">renameIdentifier</span><span class="s3">,</span>
							<span class="s1">argOrThis</span>
						<span class="s3">)</span>
					<span class="s3">) {</span>
						<span class="s4">return typeof </span><span class="s1">renameIdentifier </span><span class="s3">=== </span><span class="s2">&quot;string&quot;</span>
							<span class="s3">? </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getVariableInfo</span><span class="s3">(</span><span class="s1">renameIdentifier</span><span class="s3">)</span>
							<span class="s3">: </span><span class="s1">renameIdentifier</span><span class="s3">;</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">argOrThis</span><span class="s3">);</span>
		<span class="s3">};</span>
		<span class="s4">const </span><span class="s3">{ </span><span class="s1">params</span><span class="s3">, </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">functionExpression</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">arrow </span><span class="s3">= </span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;ArrowFunctionExpression&quot;</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">renameThis </span><span class="s3">= </span><span class="s1">currentThis </span><span class="s3">? </span><span class="s1">getVarInfo</span><span class="s3">(</span><span class="s1">currentThis</span><span class="s3">) : </span><span class="s4">null</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">varInfoForArgs </span><span class="s3">= </span><span class="s1">options</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">getVarInfo</span><span class="s3">);</span>
		<span class="s4">const </span><span class="s1">wasTopLevel </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s1">wasTopLevel </span><span class="s3">&amp;&amp; </span><span class="s1">arrow </span><span class="s3">? </span><span class="s2">&quot;arrow&quot; </span><span class="s3">: </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">scopeParams </span><span class="s3">= </span><span class="s1">params</span><span class="s3">.</span><span class="s1">filter</span><span class="s3">(</span>
			<span class="s3">(</span><span class="s1">identifier</span><span class="s3">, </span><span class="s1">idx</span><span class="s3">) =&gt; !</span><span class="s1">varInfoForArgs</span><span class="s3">[</span><span class="s1">idx</span><span class="s3">]</span>
		<span class="s3">);</span>

		<span class="s0">// Add function name in scope for recursive calls</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">functionExpression</span><span class="s3">.</span><span class="s1">id</span><span class="s3">) {</span>
			<span class="s1">scopeParams</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">functionExpression</span><span class="s3">.</span><span class="s1">id</span><span class="s3">.</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s3">}</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">inFunctionScope</span><span class="s3">(</span><span class="s4">true</span><span class="s3">, </span><span class="s1">scopeParams</span><span class="s3">, () =&gt; {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">renameThis </span><span class="s3">&amp;&amp; !</span><span class="s1">arrow</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">setVariable</span><span class="s3">(</span><span class="s2">&quot;this&quot;</span><span class="s3">, </span><span class="s1">renameThis</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">varInfoForArgs</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
				<span class="s4">const </span><span class="s1">varInfo </span><span class="s3">= </span><span class="s1">varInfoForArgs</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">varInfo</span><span class="s3">) </span><span class="s4">continue</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">params</span><span class="s3">[</span><span class="s1">i</span><span class="s3">] || </span><span class="s1">params</span><span class="s3">[</span><span class="s1">i</span><span class="s3">].</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) </span><span class="s4">continue</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">setVariable</span><span class="s3">(</span><span class="s1">params</span><span class="s3">[</span><span class="s1">i</span><span class="s3">].</span><span class="s1">name</span><span class="s3">, </span><span class="s1">varInfo</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">functionExpression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;BlockStatement&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">detectMode</span><span class="s3">(</span><span class="s1">functionExpression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">prev </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatement</span><span class="s3">(</span><span class="s1">functionExpression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">prev</span><span class="s3">;</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatement</span><span class="s3">(</span><span class="s1">functionExpression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">functionExpression</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">});</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">topLevelScope </span><span class="s3">= </span><span class="s1">wasTopLevel</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ImportExpression} expression import expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkImportExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">let </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">importCall</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">source</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s1">walkCallExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">isSimpleFunction </span><span class="s3">= </span><span class="s1">fn </span><span class="s3">=&gt; {</span>
			<span class="s4">return </span><span class="s1">fn</span><span class="s3">.</span><span class="s1">params</span><span class="s3">.</span><span class="s1">every</span><span class="s3">(</span><span class="s1">p </span><span class="s3">=&gt; </span><span class="s1">p</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">);</span>
		<span class="s3">};</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot; </span><span class="s3">&amp;&amp;</span>
			<span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">object</span><span class="s3">.</span><span class="s1">type</span><span class="s3">.</span><span class="s1">endsWith</span><span class="s3">(</span><span class="s2">&quot;FunctionExpression&quot;</span><span class="s3">) &amp;&amp;</span>
			<span class="s3">!</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">computed </span><span class="s3">&amp;&amp;</span>
			<span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">name </span><span class="s3">=== </span><span class="s2">&quot;call&quot; </span><span class="s3">||</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">name </span><span class="s3">=== </span><span class="s2">&quot;bind&quot;</span><span class="s3">) &amp;&amp;</span>
			<span class="s1">expression</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0 </span><span class="s3">&amp;&amp;</span>
			<span class="s1">isSimpleFunction</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">object</span><span class="s3">)</span>
		<span class="s3">) {</span>
			<span class="s0">// (function() { }.call/bind(?, ))</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">_walkIIFE</span><span class="s3">(</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">object</span><span class="s3">,</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">1</span><span class="s3">),</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]</span>
			<span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span>
			<span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">type</span><span class="s3">.</span><span class="s1">endsWith</span><span class="s3">(</span><span class="s2">&quot;FunctionExpression&quot;</span><span class="s3">) &amp;&amp;</span>
			<span class="s1">isSimpleFunction</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">)</span>
		<span class="s3">) {</span>
			<span class="s0">// (function() { }())</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">_walkIIFE</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">, </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">, </span><span class="s4">null</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">exprInfo </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getMemberExpressionInfo</span><span class="s3">(</span>
					<span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">,</span>
					<span class="s1">ALLOWED_MEMBER_TYPES_CALL_EXPRESSION</span>
				<span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">exprInfo </span><span class="s3">&amp;&amp; </span><span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;call&quot;</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">callMemberChainOfCallMemberChain</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">,</span>
						<span class="s1">expression</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getCalleeMembers</span><span class="s3">(),</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">call</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">(),</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getMemberRanges</span><span class="s3">()</span>
					<span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s4">const </span><span class="s1">callee </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">isIdentifier</span><span class="s3">()) {</span>
				<span class="s4">const </span><span class="s1">result1 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">callMemberChain</span><span class="s3">,</span>
					<span class="s1">callee</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">,</span>
					<span class="s1">expression</span><span class="s3">,</span>
					<span class="s1">callee</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">(),</span>
					<span class="s1">callee</span><span class="s3">.</span><span class="s1">getMembersOptionals</span>
						<span class="s3">? </span><span class="s1">callee</span><span class="s3">.</span><span class="s1">getMembersOptionals</span><span class="s3">()</span>
						<span class="s3">: </span><span class="s1">callee</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">().</span><span class="s1">map</span><span class="s3">(() =&gt; </span><span class="s4">false</span><span class="s3">),</span>
					<span class="s1">callee</span><span class="s3">.</span><span class="s1">getMemberRanges </span><span class="s3">? </span><span class="s1">callee</span><span class="s3">.</span><span class="s1">getMemberRanges</span><span class="s3">() : []</span>
				<span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">result1 </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">result2 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">call</span><span class="s3">,</span>
					<span class="s1">callee</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">,</span>
					<span class="s1">expression</span>
				<span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">result2 </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
			<span class="s3">}</span>

			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">) {</span>
					<span class="s0">// because of call context we need to walk the call context as expression</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">object</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">computed </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">)</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">property</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpressions</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{MemberExpression} expression member expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkMemberExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">exprInfo </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getMemberExpressionInfo</span><span class="s3">(</span>
			<span class="s1">expression</span><span class="s3">,</span>
			<span class="s1">ALLOWED_MEMBER_TYPES_ALL</span>
		<span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">exprInfo</span><span class="s3">) {</span>
			<span class="s4">switch </span><span class="s3">(</span><span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
				<span class="s4">case </span><span class="s2">&quot;expression&quot;</span><span class="s3">: {</span>
					<span class="s4">const </span><span class="s1">result1 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
						<span class="s1">expression</span>
					<span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">result1 </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">members </span><span class="s3">= </span><span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">();</span>
					<span class="s4">const </span><span class="s1">membersOptionals </span><span class="s3">= </span><span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getMembersOptionals</span><span class="s3">();</span>
					<span class="s4">const </span><span class="s1">memberRanges </span><span class="s3">= </span><span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getMemberRanges</span><span class="s3">();</span>
					<span class="s4">const </span><span class="s1">result2 </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">expressionMemberChain</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">,</span>
						<span class="s1">expression</span><span class="s3">,</span>
						<span class="s1">members</span><span class="s3">,</span>
						<span class="s1">membersOptionals</span><span class="s3">,</span>
						<span class="s1">memberRanges</span>
					<span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">result2 </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkMemberExpressionWithExpressionName</span><span class="s3">(</span>
						<span class="s1">expression</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">,</span>
						<span class="s1">members</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(),</span>
						<span class="s3">() =&gt;</span>
							<span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
								<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">unhandledExpressionMemberChain</span><span class="s3">,</span>
								<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">,</span>
								<span class="s1">expression</span><span class="s3">,</span>
								<span class="s1">members</span>
							<span class="s3">)</span>
					<span class="s3">);</span>
					<span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
				<span class="s4">case </span><span class="s2">&quot;call&quot;</span><span class="s3">: {</span>
					<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">memberChainOfCallMemberChain</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">,</span>
						<span class="s1">expression</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getCalleeMembers</span><span class="s3">(),</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">call</span><span class="s3">,</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">(),</span>
						<span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">getMemberRanges</span><span class="s3">()</span>
					<span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s0">// Fast skip over the member chain as we already called memberChainOfCallMemberChain</span>
					<span class="s0">// and call computed property are literals anyway</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">exprInfo</span><span class="s3">.</span><span class="s1">call</span><span class="s3">);</span>
					<span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">object</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">computed </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">property</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s1">walkMemberExpressionWithExpressionName</span><span class="s3">(</span>
		<span class="s1">expression</span><span class="s3">,</span>
		<span class="s1">name</span><span class="s3">,</span>
		<span class="s1">rootInfo</span><span class="s3">,</span>
		<span class="s1">members</span><span class="s3">,</span>
		<span class="s1">onUnhandled</span>
	<span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">object</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">) {</span>
			<span class="s0">// optimize the case where expression.object is a MemberExpression too.</span>
			<span class="s0">// we can keep info here when calling walkMemberExpression directly</span>
			<span class="s4">const </span><span class="s1">property </span><span class="s3">=</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">name </span><span class="s3">|| </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">value</span><span class="s3">}</span><span class="s2">`</span><span class="s3">;</span>
			<span class="s1">name </span><span class="s3">= </span><span class="s1">name</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s1">property</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">);</span>
			<span class="s1">members</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
			<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForInfo</span><span class="s3">(</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">,</span>
				<span class="s1">name</span><span class="s3">,</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">object</span>
			<span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkMemberExpressionWithExpressionName</span><span class="s3">(</span>
				<span class="s1">expression</span><span class="s3">.</span><span class="s1">object</span><span class="s3">,</span>
				<span class="s1">name</span><span class="s3">,</span>
				<span class="s1">rootInfo</span><span class="s3">,</span>
				<span class="s1">members</span><span class="s3">,</span>
				<span class="s1">onUnhandled</span>
			<span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else if </span><span class="s3">(!</span><span class="s1">onUnhandled </span><span class="s3">|| !</span><span class="s1">onUnhandled</span><span class="s3">()) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">object</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">computed </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) </span><span class="s4">this</span><span class="s3">.</span><span class="s1">walkExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">property</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ThisExpression} expression this expression</span>
	 <span class="s5">*/</span>
	<span class="s1">walkThisExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">, </span><span class="s2">&quot;this&quot;</span><span class="s3">, </span><span class="s1">expression</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Identifier} expression identifier</span>
	 <span class="s5">*/</span>
	<span class="s1">walkIdentifier</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">, </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">name</span><span class="s3">, </span><span class="s1">expression</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{MetaProperty} metaProperty meta property</span>
	 <span class="s5">*/</span>
	<span class="s1">walkMetaProperty</span><span class="s3">(</span><span class="s1">metaProperty</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">getRootName</span><span class="s3">(</span><span class="s1">metaProperty</span><span class="s3">)).</span><span class="s1">call</span><span class="s3">(</span><span class="s1">metaProperty</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s1">callHooksForExpression</span><span class="s3">(</span><span class="s1">hookMap</span><span class="s3">, </span><span class="s1">expr</span><span class="s3">, </span><span class="s1">...args</span><span class="s3">) {</span>
		<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForExpressionWithFallback</span><span class="s3">(</span>
			<span class="s1">hookMap</span><span class="s3">,</span>
			<span class="s1">expr</span><span class="s3">,</span>
			<span class="s1">undefined</span><span class="s3">,</span>
			<span class="s1">undefined</span><span class="s3">,</span>
			<span class="s1">...args</span>
		<span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">R</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{HookMap&lt;SyncBailHook&lt;T, R&gt;&gt;} hookMap hooks the should be called</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{MemberExpression} expr expression info</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(function(string, string | ScopeInfo | VariableInfo, function(): string[]): any) | undefined} fallback callback when variable in not handled by hooks</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(function(string): any) | undefined} defined callback when variable is defined</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AsArray&lt;T&gt;} args args for the hook</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{R | undefined} result of hook</span>
	 <span class="s5">*/</span>
	<span class="s1">callHooksForExpressionWithFallback</span><span class="s3">(</span>
		<span class="s1">hookMap</span><span class="s3">,</span>
		<span class="s1">expr</span><span class="s3">,</span>
		<span class="s1">fallback</span><span class="s3">,</span>
		<span class="s1">defined</span><span class="s3">,</span>
		<span class="s1">...args</span>
	<span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">exprName </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getMemberExpressionInfo</span><span class="s3">(</span>
			<span class="s1">expr</span><span class="s3">,</span>
			<span class="s1">ALLOWED_MEMBER_TYPES_EXPRESSION</span>
		<span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">exprName </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">members </span><span class="s3">= </span><span class="s1">exprName</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">();</span>
			<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForInfoWithFallback</span><span class="s3">(</span>
				<span class="s1">hookMap</span><span class="s3">,</span>
				<span class="s1">members</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0 </span><span class="s3">? </span><span class="s1">exprName</span><span class="s3">.</span><span class="s1">rootInfo </span><span class="s3">: </span><span class="s1">exprName</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
				<span class="s1">fallback </span><span class="s3">&amp;&amp;</span>
					<span class="s3">(</span><span class="s1">name </span><span class="s3">=&gt; </span><span class="s1">fallback</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s1">exprName</span><span class="s3">.</span><span class="s1">rootInfo</span><span class="s3">, </span><span class="s1">exprName</span><span class="s3">.</span><span class="s1">getMembers</span><span class="s3">)),</span>
				<span class="s1">defined </span><span class="s3">&amp;&amp; (() =&gt; </span><span class="s1">defined</span><span class="s3">(</span><span class="s1">exprName</span><span class="s3">.</span><span class="s1">name</span><span class="s3">)),</span>
				<span class="s1">...args</span>
			<span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">R</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{HookMap&lt;SyncBailHook&lt;T, R&gt;&gt;} hookMap hooks the should be called</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name key in map</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AsArray&lt;T&gt;} args args for the hook</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{R | undefined} result of hook</span>
	 <span class="s5">*/</span>
	<span class="s1">callHooksForName</span><span class="s3">(</span><span class="s1">hookMap</span><span class="s3">, </span><span class="s1">name</span><span class="s3">, </span><span class="s1">...args</span><span class="s3">) {</span>
		<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForNameWithFallback</span><span class="s3">(</span>
			<span class="s1">hookMap</span><span class="s3">,</span>
			<span class="s1">name</span><span class="s3">,</span>
			<span class="s1">undefined</span><span class="s3">,</span>
			<span class="s1">undefined</span><span class="s3">,</span>
			<span class="s1">...args</span>
		<span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">R</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{HookMap&lt;SyncBailHook&lt;T, R&gt;&gt;} hookMap hooks that should be called</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ExportedVariableInfo} info variable info</span>
	 <span class="s5">* </span><span class="s6">@param  </span><span class="s5">{AsArray&lt;T&gt;} args args for the hook</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{R | undefined} result of hook</span>
	 <span class="s5">*/</span>
	<span class="s1">callHooksForInfo</span><span class="s3">(</span><span class="s1">hookMap</span><span class="s3">, </span><span class="s1">info</span><span class="s3">, </span><span class="s1">...args</span><span class="s3">) {</span>
		<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForInfoWithFallback</span><span class="s3">(</span>
			<span class="s1">hookMap</span><span class="s3">,</span>
			<span class="s1">info</span><span class="s3">,</span>
			<span class="s1">undefined</span><span class="s3">,</span>
			<span class="s1">undefined</span><span class="s3">,</span>
			<span class="s1">...args</span>
		<span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">R</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{HookMap&lt;SyncBailHook&lt;T, R&gt;&gt;} hookMap hooks the should be called</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ExportedVariableInfo} info variable info</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(function(string): any) | undefined} fallback callback when variable in not handled by hooks</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(function(): any) | undefined} defined callback when variable is defined</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AsArray&lt;T&gt;} args args for the hook</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{R | undefined} result of hook</span>
	 <span class="s5">*/</span>
	<span class="s1">callHooksForInfoWithFallback</span><span class="s3">(</span><span class="s1">hookMap</span><span class="s3">, </span><span class="s1">info</span><span class="s3">, </span><span class="s1">fallback</span><span class="s3">, </span><span class="s1">defined</span><span class="s3">, </span><span class="s1">...args</span><span class="s3">) {</span>
		<span class="s4">let </span><span class="s1">name</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">info </span><span class="s3">=== </span><span class="s2">&quot;string&quot;</span><span class="s3">) {</span>
			<span class="s1">name </span><span class="s3">= </span><span class="s1">info</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">if </span><span class="s3">(!(</span><span class="s1">info </span><span class="s4">instanceof </span><span class="s1">VariableInfo</span><span class="s3">)) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">defined </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">defined</span><span class="s3">();</span>
				<span class="s3">}</span>
				<span class="s4">return</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">let </span><span class="s1">tagInfo </span><span class="s3">= </span><span class="s1">info</span><span class="s3">.</span><span class="s1">tagInfo</span><span class="s3">;</span>
			<span class="s4">while </span><span class="s3">(</span><span class="s1">tagInfo </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">hook </span><span class="s3">= </span><span class="s1">hookMap</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">tagInfo</span><span class="s3">.</span><span class="s1">tag</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">currentTagData </span><span class="s3">= </span><span class="s1">tagInfo</span><span class="s3">.</span><span class="s1">data</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">...args</span><span class="s3">);</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">currentTagData </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s4">return </span><span class="s1">result</span><span class="s3">;</span>
				<span class="s3">}</span>
				<span class="s1">tagInfo </span><span class="s3">= </span><span class="s1">tagInfo</span><span class="s3">.</span><span class="s1">next</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">info</span><span class="s3">.</span><span class="s1">freeName </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">defined </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s1">defined</span><span class="s3">();</span>
				<span class="s3">}</span>
				<span class="s4">return</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s1">name </span><span class="s3">= </span><span class="s1">info</span><span class="s3">.</span><span class="s1">freeName</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">const </span><span class="s1">hook </span><span class="s3">= </span><span class="s1">hookMap</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">...args</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s4">return </span><span class="s1">result</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">fallback </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">return </span><span class="s1">fallback</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
	 <span class="s5">* </span><span class="s6">@template </span><span class="s5">R</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{HookMap&lt;SyncBailHook&lt;T, R&gt;&gt;} hookMap hooks the should be called</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name key in map</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(function(string): any) | undefined} fallback callback when variable in not handled by hooks</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{(function(): any) | undefined} defined callback when variable is defined</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AsArray&lt;T&gt;} args args for the hook</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{R | undefined} result of hook</span>
	 <span class="s5">*/</span>
	<span class="s1">callHooksForNameWithFallback</span><span class="s3">(</span><span class="s1">hookMap</span><span class="s3">, </span><span class="s1">name</span><span class="s3">, </span><span class="s1">fallback</span><span class="s3">, </span><span class="s1">defined</span><span class="s3">, </span><span class="s1">...args</span><span class="s3">) {</span>
		<span class="s4">return this</span><span class="s3">.</span><span class="s1">callHooksForInfoWithFallback</span><span class="s3">(</span>
			<span class="s1">hookMap</span><span class="s3">,</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">getVariableInfo</span><span class="s3">(</span><span class="s1">name</span><span class="s3">),</span>
			<span class="s1">fallback</span><span class="s3">,</span>
			<span class="s1">defined</span><span class="s3">,</span>
			<span class="s1">...args</span>
		<span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@deprecated</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{any} params scope params</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(): void} fn inner function</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
	 <span class="s5">*/</span>
	<span class="s1">inScope</span><span class="s3">(</span><span class="s1">params</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">oldScope </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= {</span>
			<span class="s1">topLevelScope</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">,</span>
			<span class="s1">inTry</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inShorthand</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inTaggedTemplateTag</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">isStrict</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">isStrict</span><span class="s3">,</span>
			<span class="s1">isAsmJs</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">isAsmJs</span><span class="s3">,</span>
			<span class="s1">definitions</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">createChild</span><span class="s3">()</span>
		<span class="s3">};</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">undefineVariable</span><span class="s3">(</span><span class="s2">&quot;this&quot;</span><span class="s3">);</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPatterns</span><span class="s3">(</span><span class="s1">params</span><span class="s3">, (</span><span class="s1">ident</span><span class="s3">, </span><span class="s1">pattern</span><span class="s3">) =&gt; {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">ident</span><span class="s3">);</span>
		<span class="s3">});</span>

		<span class="s1">fn</span><span class="s3">();</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= </span><span class="s1">oldScope</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} hasThis true, when this is defined</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{any} params scope params</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(): void} fn inner function</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
	 <span class="s5">*/</span>
	<span class="s1">inClassScope</span><span class="s3">(</span><span class="s1">hasThis</span><span class="s3">, </span><span class="s1">params</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">oldScope </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= {</span>
			<span class="s1">topLevelScope</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">,</span>
			<span class="s1">inTry</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inShorthand</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inTaggedTemplateTag</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">isStrict</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">isStrict</span><span class="s3">,</span>
			<span class="s1">isAsmJs</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">isAsmJs</span><span class="s3">,</span>
			<span class="s1">definitions</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">createChild</span><span class="s3">()</span>
		<span class="s3">};</span>

		<span class="s4">if </span><span class="s3">(</span><span class="s1">hasThis</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">undefineVariable</span><span class="s3">(</span><span class="s2">&quot;this&quot;</span><span class="s3">);</span>
		<span class="s3">}</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPatterns</span><span class="s3">(</span><span class="s1">params</span><span class="s3">, (</span><span class="s1">ident</span><span class="s3">, </span><span class="s1">pattern</span><span class="s3">) =&gt; {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">ident</span><span class="s3">);</span>
		<span class="s3">});</span>

		<span class="s1">fn</span><span class="s3">();</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= </span><span class="s1">oldScope</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{boolean} hasThis true, when this is defined</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{any} params scope params</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(): void} fn inner function</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
	 <span class="s5">*/</span>
	<span class="s1">inFunctionScope</span><span class="s3">(</span><span class="s1">hasThis</span><span class="s3">, </span><span class="s1">params</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">oldScope </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= {</span>
			<span class="s1">topLevelScope</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">,</span>
			<span class="s1">inTry</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inShorthand</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inTaggedTemplateTag</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">isStrict</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">isStrict</span><span class="s3">,</span>
			<span class="s1">isAsmJs</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">isAsmJs</span><span class="s3">,</span>
			<span class="s1">definitions</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">createChild</span><span class="s3">()</span>
		<span class="s3">};</span>

		<span class="s4">if </span><span class="s3">(</span><span class="s1">hasThis</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">undefineVariable</span><span class="s3">(</span><span class="s2">&quot;this&quot;</span><span class="s3">);</span>
		<span class="s3">}</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPatterns</span><span class="s3">(</span><span class="s1">params</span><span class="s3">, (</span><span class="s1">ident</span><span class="s3">, </span><span class="s1">pattern</span><span class="s3">) =&gt; {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">ident</span><span class="s3">);</span>
		<span class="s3">});</span>

		<span class="s1">fn</span><span class="s3">();</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= </span><span class="s1">oldScope</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(): void} fn inner function</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
	 <span class="s5">*/</span>
	<span class="s1">inBlockScope</span><span class="s3">(</span><span class="s1">fn</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">oldScope </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= {</span>
			<span class="s1">topLevelScope</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">topLevelScope</span><span class="s3">,</span>
			<span class="s1">inTry</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">inTry</span><span class="s3">,</span>
			<span class="s1">inShorthand</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inTaggedTemplateTag</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">isStrict</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">isStrict</span><span class="s3">,</span>
			<span class="s1">isAsmJs</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">isAsmJs</span><span class="s3">,</span>
			<span class="s1">definitions</span><span class="s3">: </span><span class="s1">oldScope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">createChild</span><span class="s3">()</span>
		<span class="s3">};</span>

		<span class="s1">fn</span><span class="s3">();</span>

		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= </span><span class="s1">oldScope</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Array&lt;Directive | Statement | ModuleDeclaration&gt;} statements statements</span>
	 <span class="s5">*/</span>
	<span class="s1">detectMode</span><span class="s3">(</span><span class="s1">statements</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">isLiteral </span><span class="s3">=</span>
			<span class="s1">statements</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt;= </span><span class="s7">1 </span><span class="s3">&amp;&amp;</span>
			<span class="s1">statements</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;ExpressionStatement&quot; </span><span class="s3">&amp;&amp;</span>
			<span class="s1">statements</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Literal&quot;</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s1">isLiteral </span><span class="s3">&amp;&amp;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Literal} */</span>
			<span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ExpressionStatement} */ </span><span class="s3">(</span><span class="s1">statements</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]).</span><span class="s1">expression</span><span class="s3">).</span><span class="s1">value </span><span class="s3">===</span>
				<span class="s2">&quot;use strict&quot;</span>
		<span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">isStrict </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s1">isLiteral </span><span class="s3">&amp;&amp;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Literal} */</span>
			<span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ExpressionStatement} */ </span><span class="s3">(</span><span class="s1">statements</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]).</span><span class="s1">expression</span><span class="s3">).</span><span class="s1">value </span><span class="s3">===</span>
				<span class="s2">&quot;use asm&quot;</span>
		<span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">isAsmJs </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">enterPatterns</span><span class="s3">(</span><span class="s1">patterns</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">pattern of patterns</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">pattern </span><span class="s3">!== </span><span class="s2">&quot;string&quot;</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">) {</span>
				<span class="s1">onIdent</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(!</span><span class="s1">pattern</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;ArrayPattern&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterArrayPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;AssignmentPattern&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterAssignmentPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterIdentifier</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ObjectPattern&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterObjectPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;RestElement&quot;</span><span class="s3">:</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">enterRestElement</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;Property&quot;</span><span class="s3">:</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">shorthand </span><span class="s3">&amp;&amp; </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">value</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) {</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inShorthand </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">value</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">enterIdentifier</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">value</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">inShorthand </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">value</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
				<span class="s3">}</span>
				<span class="s4">break</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Identifier} pattern identifier pattern</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TODO} onIdent callback</span>
	 <span class="s5">*/</span>
	<span class="s1">enterIdentifier</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">callHooksForName</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">name</span><span class="s3">, </span><span class="s1">pattern</span><span class="s3">)) {</span>
			<span class="s1">onIdent</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">name</span><span class="s3">, </span><span class="s1">pattern</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ObjectPattern} pattern object pattern</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TODO} onIdent callback</span>
	 <span class="s5">*/</span>
	<span class="s1">enterObjectPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span>
			<span class="s4">let </span><span class="s1">propIndex </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
			<span class="s1">propIndex </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">;</span>
			<span class="s1">propIndex</span><span class="s3">++</span>
		<span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">prop </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">properties</span><span class="s3">[</span><span class="s1">propIndex</span><span class="s3">];</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">prop</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ArrayPattern} pattern object pattern</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TODO} onIdent callback</span>
	 <span class="s5">*/</span>
	<span class="s1">enterArrayPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span>
			<span class="s4">let </span><span class="s1">elementIndex </span><span class="s3">= </span><span class="s7">0</span><span class="s3">, </span><span class="s1">len </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">elements</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
			<span class="s1">elementIndex </span><span class="s3">&lt; </span><span class="s1">len</span><span class="s3">;</span>
			<span class="s1">elementIndex</span><span class="s3">++</span>
		<span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">element </span><span class="s3">= </span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">elements</span><span class="s3">[</span><span class="s1">elementIndex</span><span class="s3">];</span>
			<span class="s0">// TODO check on `null`?</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">element</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{RestElement} pattern object pattern</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TODO} onIdent callback</span>
	 <span class="s5">*/</span>
	<span class="s1">enterRestElement</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">argument</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{AssignmentPattern} pattern object pattern</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TODO} onIdent callback</span>
	 <span class="s5">*/</span>
	<span class="s1">enterAssignmentPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">enterPattern</span><span class="s3">(</span><span class="s1">pattern</span><span class="s3">.</span><span class="s1">left</span><span class="s3">, </span><span class="s1">onIdent</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TODO} expression expression node</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{BasicEvaluatedExpression} evaluation result</span>
	 <span class="s5">*/</span>
	<span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">try </span><span class="s3">{</span>
			<span class="s4">const </span><span class="s1">hook </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">evaluate</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">type</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">hook </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s1">hook</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">result </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">&amp;&amp; </span><span class="s1">result </span><span class="s3">!== </span><span class="s4">null</span><span class="s3">) {</span>
					<span class="s1">result</span><span class="s3">.</span><span class="s1">setExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
					<span class="s4">return </span><span class="s1">result</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">} </span><span class="s4">catch </span><span class="s3">(</span><span class="s1">e</span><span class="s3">) {</span>
			<span class="s1">console</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">(</span><span class="s1">e</span><span class="s3">);</span>
			<span class="s0">// ignore error</span>
		<span class="s3">}</span>
		<span class="s4">return new </span><span class="s1">BasicEvaluatedExpression</span><span class="s3">()</span>
			<span class="s3">.</span><span class="s1">setRange</span><span class="s3">(</span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">range</span><span class="s3">))</span>
			<span class="s3">.</span><span class="s1">setExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Expression} expression expression</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} parsed string</span>
	 <span class="s5">*/</span>
	<span class="s1">parseString</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;BinaryExpression&quot;</span><span class="s3">:</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;+&quot;</span><span class="s3">) {</span>
					<span class="s4">return </span><span class="s3">(</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">parseString</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">) +</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">parseString</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">)</span>
					<span class="s3">);</span>
				<span class="s3">}</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;Literal&quot;</span><span class="s3">:</span>
				<span class="s4">return </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">value </span><span class="s3">+ </span><span class="s2">&quot;&quot;</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">throw new </span><span class="s1">Error</span><span class="s3">(</span>
			<span class="s1">expression</span><span class="s3">.</span><span class="s1">type </span><span class="s3">+ </span><span class="s2">&quot; is not supported as parameter for require&quot;</span>
		<span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s1">parseCalculatedString</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;BinaryExpression&quot;</span><span class="s3">:</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">operator </span><span class="s3">=== </span><span class="s2">&quot;+&quot;</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">left </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">parseCalculatedString</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">left</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">right </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">parseCalculatedString</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">right</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">left</span><span class="s3">.</span><span class="s1">code</span><span class="s3">) {</span>
						<span class="s4">return </span><span class="s3">{</span>
							<span class="s1">range</span><span class="s3">: </span><span class="s1">left</span><span class="s3">.</span><span class="s1">range</span><span class="s3">,</span>
							<span class="s1">value</span><span class="s3">: </span><span class="s1">left</span><span class="s3">.</span><span class="s1">value</span><span class="s3">,</span>
							<span class="s1">code</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
							<span class="s1">conditional</span><span class="s3">: </span><span class="s4">false</span>
						<span class="s3">};</span>
					<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">right</span><span class="s3">.</span><span class="s1">code</span><span class="s3">) {</span>
						<span class="s4">return </span><span class="s3">{</span>
							<span class="s1">range</span><span class="s3">: [</span>
								<span class="s1">left</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">],</span>
								<span class="s1">right</span><span class="s3">.</span><span class="s1">range </span><span class="s3">? </span><span class="s1">right</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">] : </span><span class="s1">left</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]</span>
							<span class="s3">],</span>
							<span class="s1">value</span><span class="s3">: </span><span class="s1">left</span><span class="s3">.</span><span class="s1">value </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">value</span><span class="s3">,</span>
							<span class="s1">code</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
							<span class="s1">conditional</span><span class="s3">: </span><span class="s4">false</span>
						<span class="s3">};</span>
					<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
						<span class="s4">return </span><span class="s3">{</span>
							<span class="s1">range</span><span class="s3">: [</span><span class="s1">left</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">], </span><span class="s1">right</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]],</span>
							<span class="s1">value</span><span class="s3">: </span><span class="s1">left</span><span class="s3">.</span><span class="s1">value </span><span class="s3">+ </span><span class="s1">right</span><span class="s3">.</span><span class="s1">value</span><span class="s3">,</span>
							<span class="s1">code</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
							<span class="s1">conditional</span><span class="s3">: </span><span class="s4">false</span>
						<span class="s3">};</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s4">case </span><span class="s2">&quot;ConditionalExpression&quot;</span><span class="s3">: {</span>
				<span class="s4">const </span><span class="s1">consequent </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">parseCalculatedString</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">alternate </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">parseCalculatedString</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">items </span><span class="s3">= [];</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">consequent</span><span class="s3">.</span><span class="s1">conditional</span><span class="s3">) {</span>
					<span class="s1">items</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">...consequent</span><span class="s3">.</span><span class="s1">conditional</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(!</span><span class="s1">consequent</span><span class="s3">.</span><span class="s1">code</span><span class="s3">) {</span>
					<span class="s1">items</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">consequent</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s4">break</span><span class="s3">;</span>
				<span class="s3">}</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">alternate</span><span class="s3">.</span><span class="s1">conditional</span><span class="s3">) {</span>
					<span class="s1">items</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">...alternate</span><span class="s3">.</span><span class="s1">conditional</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else if </span><span class="s3">(!</span><span class="s1">alternate</span><span class="s3">.</span><span class="s1">code</span><span class="s3">) {</span>
					<span class="s1">items</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">alternate</span><span class="s3">);</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s4">break</span><span class="s3">;</span>
				<span class="s3">}</span>
				<span class="s4">return </span><span class="s3">{</span>
					<span class="s1">range</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
					<span class="s1">value</span><span class="s3">: </span><span class="s2">&quot;&quot;</span><span class="s3">,</span>
					<span class="s1">code</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
					<span class="s1">conditional</span><span class="s3">: </span><span class="s1">items</span>
				<span class="s3">};</span>
			<span class="s3">}</span>
			<span class="s4">case </span><span class="s2">&quot;Literal&quot;</span><span class="s3">:</span>
				<span class="s4">return </span><span class="s3">{</span>
					<span class="s1">range</span><span class="s3">: </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">range</span><span class="s3">,</span>
					<span class="s1">value</span><span class="s3">: </span><span class="s1">expression</span><span class="s3">.</span><span class="s1">value </span><span class="s3">+ </span><span class="s2">&quot;&quot;</span><span class="s3">,</span>
					<span class="s1">code</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
					<span class="s1">conditional</span><span class="s3">: </span><span class="s4">false</span>
				<span class="s3">};</span>
		<span class="s3">}</span>
		<span class="s4">return </span><span class="s3">{</span>
			<span class="s1">range</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
			<span class="s1">value</span><span class="s3">: </span><span class="s2">&quot;&quot;</span><span class="s3">,</span>
			<span class="s1">code</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
			<span class="s1">conditional</span><span class="s3">: </span><span class="s4">false</span>
		<span class="s3">};</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string | Buffer | PreparsedAst} source the source to parse</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ParserState} state the parser state</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ParserState} the parser state</span>
	 <span class="s5">*/</span>
	<span class="s1">parse</span><span class="s3">(</span><span class="s1">source</span><span class="s3">, </span><span class="s1">state</span><span class="s3">) {</span>
		<span class="s4">let </span><span class="s1">ast</span><span class="s3">;</span>
		<span class="s4">let </span><span class="s1">comments</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">semicolons </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">source </span><span class="s3">=== </span><span class="s4">null</span><span class="s3">) {</span>
			<span class="s4">throw new </span><span class="s1">Error</span><span class="s3">(</span><span class="s2">&quot;source must not be null&quot;</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">Buffer</span><span class="s3">.</span><span class="s1">isBuffer</span><span class="s3">(</span><span class="s1">source</span><span class="s3">)) {</span>
			<span class="s1">source </span><span class="s3">= </span><span class="s1">source</span><span class="s3">.</span><span class="s1">toString</span><span class="s3">(</span><span class="s2">&quot;utf-8&quot;</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">source </span><span class="s3">=== </span><span class="s2">&quot;object&quot;</span><span class="s3">) {</span>
			<span class="s1">ast </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Program} */ </span><span class="s3">(</span><span class="s1">source</span><span class="s3">);</span>
			<span class="s1">comments </span><span class="s3">= </span><span class="s1">source</span><span class="s3">.</span><span class="s1">comments</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s1">comments </span><span class="s3">= [];</span>
			<span class="s1">ast </span><span class="s3">= </span><span class="s1">JavascriptParser</span><span class="s3">.</span><span class="s1">_parse</span><span class="s3">(</span><span class="s1">source</span><span class="s3">, {</span>
				<span class="s1">sourceType</span><span class="s3">: </span><span class="s4">this</span><span class="s3">.</span><span class="s1">sourceType</span><span class="s3">,</span>
				<span class="s1">onComment</span><span class="s3">: </span><span class="s1">comments</span><span class="s3">,</span>
				<span class="s1">onInsertedSemicolon</span><span class="s3">: </span><span class="s1">pos </span><span class="s3">=&gt; </span><span class="s1">semicolons</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">pos</span><span class="s3">)</span>
			<span class="s3">});</span>
		<span class="s3">}</span>

		<span class="s4">const </span><span class="s1">oldScope </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">oldState </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">state</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">oldComments </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">comments</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">oldSemicolons </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">semicolons</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">oldStatementPath </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">oldPrevStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= {</span>
			<span class="s1">topLevelScope</span><span class="s3">: </span><span class="s4">true</span><span class="s3">,</span>
			<span class="s1">inTry</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inShorthand</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">inTaggedTemplateTag</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">isStrict</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">isAsmJs</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
			<span class="s1">definitions</span><span class="s3">: </span><span class="s4">new </span><span class="s1">StackedMap</span><span class="s3">()</span>
		<span class="s3">};</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ParserState} */</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">state </span><span class="s3">= </span><span class="s1">state</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">comments </span><span class="s3">= </span><span class="s1">comments</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">semicolons </span><span class="s3">= </span><span class="s1">semicolons</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath </span><span class="s3">= [];</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">program</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">ast</span><span class="s3">, </span><span class="s1">comments</span><span class="s3">) === </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties </span><span class="s3">= </span><span class="s4">new </span><span class="s1">WeakMap</span><span class="s3">();</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">detectMode</span><span class="s3">(</span><span class="s1">ast</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">preWalkStatements</span><span class="s3">(</span><span class="s1">ast</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">blockPreWalkStatements</span><span class="s3">(</span><span class="s1">ast</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">walkStatements</span><span class="s3">(</span><span class="s1">ast</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">destructuringAssignmentProperties </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">finish</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">ast</span><span class="s3">, </span><span class="s1">comments</span><span class="s3">);</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope </span><span class="s3">= </span><span class="s1">oldScope</span><span class="s3">;</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ParserState} */</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">state </span><span class="s3">= </span><span class="s1">oldState</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">comments </span><span class="s3">= </span><span class="s1">oldComments</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">semicolons </span><span class="s3">= </span><span class="s1">oldSemicolons</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath </span><span class="s3">= </span><span class="s1">oldStatementPath</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">= </span><span class="s1">oldPrevStatement</span><span class="s3">;</span>
		<span class="s4">return </span><span class="s1">state</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} source source code</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{BasicEvaluatedExpression} evaluation result</span>
	 <span class="s5">*/</span>
	<span class="s1">evaluate</span><span class="s3">(</span><span class="s1">source</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">ast </span><span class="s3">= </span><span class="s1">JavascriptParser</span><span class="s3">.</span><span class="s1">_parse</span><span class="s3">(</span><span class="s2">&quot;(&quot; </span><span class="s3">+ </span><span class="s1">source </span><span class="s3">+ </span><span class="s2">&quot;)&quot;</span><span class="s3">, {</span>
			<span class="s1">sourceType</span><span class="s3">: </span><span class="s4">this</span><span class="s3">.</span><span class="s1">sourceType</span><span class="s3">,</span>
			<span class="s1">locations</span><span class="s3">: </span><span class="s4">false</span>
		<span class="s3">});</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">ast</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">length </span><span class="s3">!== </span><span class="s7">1 </span><span class="s3">|| </span><span class="s1">ast</span><span class="s3">.</span><span class="s1">body</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;ExpressionStatement&quot;</span><span class="s3">) {</span>
			<span class="s4">throw new </span><span class="s1">Error</span><span class="s3">(</span><span class="s2">&quot;evaluate: Source is not a expression&quot;</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">return this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">ast</span><span class="s3">.</span><span class="s1">body</span><span class="s3">[</span><span class="s7">0</span><span class="s3">].</span><span class="s1">expression</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Expression | Declaration | PrivateIdentifier | null | undefined} expr an expression</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{number} commentsStartPos source position from which annotation comments are checked</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} true, when the expression is pure</span>
	 <span class="s5">*/</span>
	<span class="s1">isPure</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">commentsStartPos</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(!</span><span class="s1">expr</span><span class="s3">) </span><span class="s4">return true</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">isPure</span>
			<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">type</span><span class="s3">)</span>
			<span class="s3">.</span><span class="s1">call</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">commentsStartPos</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">result </span><span class="s3">=== </span><span class="s2">&quot;boolean&quot;</span><span class="s3">) </span><span class="s4">return </span><span class="s1">result</span><span class="s3">;</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s0">// TODO handle more cases</span>
			<span class="s4">case </span><span class="s2">&quot;ClassDeclaration&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;ClassExpression&quot;</span><span class="s3">: {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;ClassBody&quot;</span><span class="s3">) </span><span class="s4">return false</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">superClass </span><span class="s3">&amp;&amp; !</span><span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">superClass</span><span class="s3">, </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">])) {</span>
					<span class="s4">return false</span><span class="s3">;</span>
				<span class="s3">}</span>
				<span class="s4">const </span><span class="s1">items </span><span class="s3">=</span>
					<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{TODO[]} */</span>
					<span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">body</span><span class="s3">.</span><span class="s1">body</span><span class="s3">);</span>
				<span class="s4">return </span><span class="s1">items</span><span class="s3">.</span><span class="s1">every</span><span class="s3">(</span><span class="s1">item </span><span class="s3">=&gt; {</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s1">item</span><span class="s3">.</span><span class="s1">computed </span><span class="s3">&amp;&amp;</span>
						<span class="s1">item</span><span class="s3">.</span><span class="s1">key </span><span class="s3">&amp;&amp;</span>
						<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span><span class="s1">item</span><span class="s3">.</span><span class="s1">key</span><span class="s3">, </span><span class="s1">item</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">])</span>
					<span class="s3">) {</span>
						<span class="s4">return false</span><span class="s3">;</span>
					<span class="s3">}</span>

					<span class="s4">if </span><span class="s3">(</span>
						<span class="s1">item</span><span class="s3">.</span><span class="s1">static </span><span class="s3">&amp;&amp;</span>
						<span class="s1">item</span><span class="s3">.</span><span class="s1">value </span><span class="s3">&amp;&amp;</span>
						<span class="s3">!</span><span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span>
							<span class="s1">item</span><span class="s3">.</span><span class="s1">value</span><span class="s3">,</span>
							<span class="s1">item</span><span class="s3">.</span><span class="s1">key </span><span class="s3">? </span><span class="s1">item</span><span class="s3">.</span><span class="s1">key</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">] : </span><span class="s1">item</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]</span>
						<span class="s3">)</span>
					<span class="s3">) {</span>
						<span class="s4">return false</span><span class="s3">;</span>
					<span class="s3">}</span>

					<span class="s4">if </span><span class="s3">(</span><span class="s1">item</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;StaticBlock&quot;</span><span class="s3">) {</span>
						<span class="s4">return false</span><span class="s3">;</span>
					<span class="s3">}</span>

					<span class="s4">return true</span><span class="s3">;</span>
				<span class="s3">});</span>
			<span class="s3">}</span>

			<span class="s4">case </span><span class="s2">&quot;FunctionDeclaration&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;FunctionExpression&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;ArrowFunctionExpression&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;ThisExpression&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;Literal&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;TemplateLiteral&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;PrivateIdentifier&quot;</span><span class="s3">:</span>
				<span class="s4">return true</span><span class="s3">;</span>

			<span class="s4">case </span><span class="s2">&quot;VariableDeclaration&quot;</span><span class="s3">:</span>
				<span class="s4">return </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">declarations</span><span class="s3">.</span><span class="s1">every</span><span class="s3">(</span><span class="s1">decl </span><span class="s3">=&gt;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span><span class="s1">decl</span><span class="s3">.</span><span class="s1">init</span><span class="s3">, </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">decl</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">0</span><span class="s3">])</span>
				<span class="s3">);</span>

			<span class="s4">case </span><span class="s2">&quot;ConditionalExpression&quot;</span><span class="s3">:</span>
				<span class="s4">return </span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">test</span><span class="s3">, </span><span class="s1">commentsStartPos</span><span class="s3">) &amp;&amp;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span>
						<span class="s1">expr</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">,</span>
						<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">test</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">1</span><span class="s3">]</span>
					<span class="s3">) &amp;&amp;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span>
						<span class="s1">expr</span><span class="s3">.</span><span class="s1">alternate</span><span class="s3">,</span>
						<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">consequent</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">1</span><span class="s3">]</span>
					<span class="s3">)</span>
				<span class="s3">);</span>

			<span class="s4">case </span><span class="s2">&quot;LogicalExpression&quot;</span><span class="s3">:</span>
				<span class="s4">return </span><span class="s3">(</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">left</span><span class="s3">, </span><span class="s1">commentsStartPos</span><span class="s3">) &amp;&amp;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">right</span><span class="s3">, </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">left</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">1</span><span class="s3">])</span>
				<span class="s3">);</span>

			<span class="s4">case </span><span class="s2">&quot;SequenceExpression&quot;</span><span class="s3">:</span>
				<span class="s4">return </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">expressions</span><span class="s3">.</span><span class="s1">every</span><span class="s3">(</span><span class="s1">expr </span><span class="s3">=&gt; {</span>
					<span class="s4">const </span><span class="s1">pureFlag </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">, </span><span class="s1">commentsStartPos</span><span class="s3">);</span>
					<span class="s1">commentsStartPos </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">1</span><span class="s3">];</span>
					<span class="s4">return </span><span class="s1">pureFlag</span><span class="s3">;</span>
				<span class="s3">});</span>

			<span class="s4">case </span><span class="s2">&quot;CallExpression&quot;</span><span class="s3">: {</span>
				<span class="s4">const </span><span class="s1">pureFlag </span><span class="s3">=</span>
					<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">0</span><span class="s3">] - </span><span class="s1">commentsStartPos </span><span class="s3">&gt; </span><span class="s7">12 </span><span class="s3">&amp;&amp;</span>
					<span class="s4">this</span><span class="s3">.</span><span class="s1">getComments</span><span class="s3">([</span>
						<span class="s1">commentsStartPos</span><span class="s3">,</span>
						<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">0</span><span class="s3">]</span>
					<span class="s3">]).</span><span class="s1">some</span><span class="s3">(</span>
						<span class="s1">comment </span><span class="s3">=&gt;</span>
							<span class="s1">comment</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;Block&quot; </span><span class="s3">&amp;&amp;</span>
							<span class="s8">/^\s*(#|@)__PURE__\s*$/</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">comment</span><span class="s3">.</span><span class="s1">value</span><span class="s3">)</span>
					<span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">pureFlag</span><span class="s3">) </span><span class="s4">return false</span><span class="s3">;</span>
				<span class="s1">commentsStartPos </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">1</span><span class="s3">];</span>
				<span class="s4">return </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">arguments</span><span class="s3">.</span><span class="s1">every</span><span class="s3">(</span><span class="s1">arg </span><span class="s3">=&gt; {</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;SpreadElement&quot;</span><span class="s3">) </span><span class="s4">return false</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">pureFlag </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">isPure</span><span class="s3">(</span><span class="s1">arg</span><span class="s3">, </span><span class="s1">commentsStartPos</span><span class="s3">);</span>
					<span class="s1">commentsStartPos </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Range} */ </span><span class="s3">(</span><span class="s1">arg</span><span class="s3">.</span><span class="s1">range</span><span class="s3">)[</span><span class="s7">1</span><span class="s3">];</span>
					<span class="s4">return </span><span class="s1">pureFlag</span><span class="s3">;</span>
				<span class="s3">});</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
		<span class="s4">const </span><span class="s1">evaluated </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">evaluateExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">);</span>
		<span class="s4">return </span><span class="s3">!</span><span class="s1">evaluated</span><span class="s3">.</span><span class="s1">couldHaveSideEffects</span><span class="s3">();</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Range} range range</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{TODO[]} comments in the range</span>
	 <span class="s5">*/</span>
	<span class="s1">getComments</span><span class="s3">(</span><span class="s1">range</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s3">[</span><span class="s1">rangeStart</span><span class="s3">, </span><span class="s1">rangeEnd</span><span class="s3">] = </span><span class="s1">range</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">compare </span><span class="s3">= (</span><span class="s1">comment</span><span class="s3">, </span><span class="s1">needle</span><span class="s3">) =&gt; </span><span class="s1">comment</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">] - </span><span class="s1">needle</span><span class="s3">;</span>
		<span class="s4">let </span><span class="s1">idx </span><span class="s3">= </span><span class="s1">binarySearchBounds</span><span class="s3">.</span><span class="s1">ge</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">comments</span><span class="s3">, </span><span class="s1">rangeStart</span><span class="s3">, </span><span class="s1">compare</span><span class="s3">);</span>
		<span class="s4">let </span><span class="s1">commentsInRange </span><span class="s3">= [];</span>
		<span class="s4">while </span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">comments</span><span class="s3">[</span><span class="s1">idx</span><span class="s3">] &amp;&amp; </span><span class="s4">this</span><span class="s3">.</span><span class="s1">comments</span><span class="s3">[</span><span class="s1">idx</span><span class="s3">].</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">] &lt;= </span><span class="s1">rangeEnd</span><span class="s3">) {</span>
			<span class="s1">commentsInRange</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">comments</span><span class="s3">[</span><span class="s1">idx</span><span class="s3">]);</span>
			<span class="s1">idx</span><span class="s3">++;</span>
		<span class="s3">}</span>

		<span class="s4">return </span><span class="s1">commentsInRange</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{number} pos source code position</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} true when a semicolon has been inserted before this position, false if not</span>
	 <span class="s5">*/</span>
	<span class="s1">isAsiPosition</span><span class="s3">(</span><span class="s1">pos</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">currentStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">[</span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">];</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">currentStatement </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s4">throw new </span><span class="s1">Error</span><span class="s3">(</span><span class="s2">&quot;Not in statement&quot;</span><span class="s3">);</span>
		<span class="s4">return </span><span class="s3">(</span>
			<span class="s0">// Either asking directly for the end position of the current statement</span>
			<span class="s3">(</span><span class="s1">currentStatement</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">] === </span><span class="s1">pos </span><span class="s3">&amp;&amp; </span><span class="s4">this</span><span class="s3">.</span><span class="s1">semicolons</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">pos</span><span class="s3">)) ||</span>
			<span class="s0">// Or asking for the start position of the current statement,</span>
			<span class="s0">// here we have to check multiple things</span>
			<span class="s3">(</span><span class="s1">currentStatement</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">0</span><span class="s3">] === </span><span class="s1">pos </span><span class="s3">&amp;&amp;</span>
				<span class="s0">// is there a previous statement which might be relevant?</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">&amp;&amp;</span>
				<span class="s0">// is the end position of the previous statement an ASI position?</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">semicolons</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">prevStatement</span><span class="s3">.</span><span class="s1">range</span><span class="s3">[</span><span class="s7">1</span><span class="s3">]))</span>
		<span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{number} pos source code position</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
	 <span class="s5">*/</span>
	<span class="s1">unsetAsiPosition</span><span class="s3">(</span><span class="s1">pos</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">semicolons</span><span class="s3">.</span><span class="s1">delete</span><span class="s3">(</span><span class="s1">pos</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Expression} expr expression</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} true, when the expression is a statement level expression</span>
	 <span class="s5">*/</span>
	<span class="s1">isStatementLevelExpression</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">currentStatement </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">[</span><span class="s4">this</span><span class="s3">.</span><span class="s1">statementPath</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">];</span>
		<span class="s4">return </span><span class="s3">(</span>
			<span class="s1">expr </span><span class="s3">=== </span><span class="s1">currentStatement </span><span class="s3">||</span>
			<span class="s3">(</span><span class="s1">currentStatement</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;ExpressionStatement&quot; </span><span class="s3">&amp;&amp;</span>
				<span class="s1">currentStatement</span><span class="s3">.</span><span class="s1">expression </span><span class="s3">=== </span><span class="s1">expr</span><span class="s3">)</span>
		<span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s1">getTagData</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s1">tag</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">info </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">info </span><span class="s4">instanceof </span><span class="s1">VariableInfo</span><span class="s3">) {</span>
			<span class="s4">let </span><span class="s1">tagInfo </span><span class="s3">= </span><span class="s1">info</span><span class="s3">.</span><span class="s1">tagInfo</span><span class="s3">;</span>
			<span class="s4">while </span><span class="s3">(</span><span class="s1">tagInfo </span><span class="s3">!== </span><span class="s1">undefined</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">tagInfo</span><span class="s3">.</span><span class="s1">tag </span><span class="s3">=== </span><span class="s1">tag</span><span class="s3">) </span><span class="s4">return </span><span class="s1">tagInfo</span><span class="s3">.</span><span class="s1">data</span><span class="s3">;</span>
				<span class="s1">tagInfo </span><span class="s3">= </span><span class="s1">tagInfo</span><span class="s3">.</span><span class="s1">next</span><span class="s3">;</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s1">tagVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s1">tag</span><span class="s3">, </span><span class="s1">data</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">oldInfo </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{VariableInfo} */</span>
		<span class="s4">let </span><span class="s1">newInfo</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">oldInfo </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s1">newInfo </span><span class="s3">= </span><span class="s4">new </span><span class="s1">VariableInfo</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">, </span><span class="s1">name</span><span class="s3">, {</span>
				<span class="s1">tag</span><span class="s3">,</span>
				<span class="s1">data</span><span class="s3">,</span>
				<span class="s1">next</span><span class="s3">: </span><span class="s1">undefined</span>
			<span class="s3">});</span>
		<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">oldInfo </span><span class="s4">instanceof </span><span class="s1">VariableInfo</span><span class="s3">) {</span>
			<span class="s1">newInfo </span><span class="s3">= </span><span class="s4">new </span><span class="s1">VariableInfo</span><span class="s3">(</span><span class="s1">oldInfo</span><span class="s3">.</span><span class="s1">declaredScope</span><span class="s3">, </span><span class="s1">oldInfo</span><span class="s3">.</span><span class="s1">freeName</span><span class="s3">, {</span>
				<span class="s1">tag</span><span class="s3">,</span>
				<span class="s1">data</span><span class="s3">,</span>
				<span class="s1">next</span><span class="s3">: </span><span class="s1">oldInfo</span><span class="s3">.</span><span class="s1">tagInfo</span>
			<span class="s3">});</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s1">newInfo </span><span class="s3">= </span><span class="s4">new </span><span class="s1">VariableInfo</span><span class="s3">(</span><span class="s1">oldInfo</span><span class="s3">, </span><span class="s4">true</span><span class="s3">, {</span>
				<span class="s1">tag</span><span class="s3">,</span>
				<span class="s1">data</span><span class="s3">,</span>
				<span class="s1">next</span><span class="s3">: </span><span class="s1">undefined</span>
			<span class="s3">});</span>
		<span class="s3">}</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s1">newInfo</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name variable name</span>
	 <span class="s5">*/</span>
	<span class="s1">defineVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">oldInfo </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s0">// Don't redefine variable in same scope to keep existing tags</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">oldInfo </span><span class="s4">instanceof </span><span class="s1">VariableInfo </span><span class="s3">&amp;&amp; </span><span class="s1">oldInfo</span><span class="s3">.</span><span class="s1">declaredScope </span><span class="s3">=== </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">)</span>
			<span class="s4">return</span><span class="s3">;</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name variable name</span>
	 <span class="s5">*/</span>
	<span class="s1">undefineVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">) {</span>
		<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">delete</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name variable name</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{boolean} true, when variable is defined</span>
	 <span class="s5">*/</span>
	<span class="s1">isVariableDefined</span><span class="s3">(</span><span class="s1">name</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">info </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">info </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) </span><span class="s4">return false</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">info </span><span class="s4">instanceof </span><span class="s1">VariableInfo</span><span class="s3">) {</span>
			<span class="s4">return </span><span class="s1">info</span><span class="s3">.</span><span class="s1">freeName </span><span class="s3">=== </span><span class="s4">true</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">return true</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name variable name</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{ExportedVariableInfo} info for this variable</span>
	 <span class="s5">*/</span>
	<span class="s1">getVariableInfo</span><span class="s3">(</span><span class="s1">name</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">value </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">value </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
			<span class="s4">return </span><span class="s1">name</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">return </span><span class="s1">value</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name variable name</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ExportedVariableInfo} variableInfo new info for this variable</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
	 <span class="s5">*/</span>
	<span class="s1">setVariable</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s1">variableInfo</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">variableInfo </span><span class="s3">=== </span><span class="s2">&quot;string&quot;</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">variableInfo </span><span class="s3">=== </span><span class="s1">name</span><span class="s3">) {</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">delete</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span>
					<span class="s1">name</span><span class="s3">,</span>
					<span class="s4">new </span><span class="s1">VariableInfo</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">, </span><span class="s1">variableInfo</span><span class="s3">, </span><span class="s1">undefined</span><span class="s3">)</span>
				<span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">.</span><span class="s1">definitions</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s1">variableInfo</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{TagInfo} tagInfo tag info</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{VariableInfo} variable info</span>
	 <span class="s5">*/</span>
	<span class="s1">evaluatedVariable</span><span class="s3">(</span><span class="s1">tagInfo</span><span class="s3">) {</span>
		<span class="s4">return new </span><span class="s1">VariableInfo</span><span class="s3">(</span><span class="s4">this</span><span class="s3">.</span><span class="s1">scope</span><span class="s3">, </span><span class="s1">undefined</span><span class="s3">, </span><span class="s1">tagInfo</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Range} range range of the comment</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{TODO} TODO</span>
	 <span class="s5">*/</span>
	<span class="s1">parseCommentOptions</span><span class="s3">(</span><span class="s1">range</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">comments </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getComments</span><span class="s3">(</span><span class="s1">range</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">comments</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">) {</span>
			<span class="s4">return </span><span class="s1">EMPTY_COMMENT_OPTIONS</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">let </span><span class="s1">options </span><span class="s3">= {};</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{unknown[]} */</span>
		<span class="s4">let </span><span class="s1">errors </span><span class="s3">= [];</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">comment of comments</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">value </span><span class="s3">} = </span><span class="s1">comment</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">value </span><span class="s3">&amp;&amp; </span><span class="s1">webpackCommentRegExp</span><span class="s3">.</span><span class="s1">test</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)) {</span>
				<span class="s0">// try compile only if webpack options comment is present</span>
				<span class="s4">try </span><span class="s3">{</span>
					<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s3">[</span><span class="s1">key</span><span class="s3">, </span><span class="s1">val</span><span class="s3">] </span><span class="s1">of Object</span><span class="s3">.</span><span class="s1">entries</span><span class="s3">(</span>
						<span class="s1">vm</span><span class="s3">.</span><span class="s1">runInNewContext</span><span class="s3">(</span><span class="s2">`(function(){return {</span><span class="s1">$</span><span class="s3">{</span><span class="s1">value</span><span class="s3">}</span><span class="s2">};})()`</span><span class="s3">)</span>
					<span class="s3">)) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">val </span><span class="s3">=== </span><span class="s2">&quot;object&quot; </span><span class="s3">&amp;&amp; </span><span class="s1">val </span><span class="s3">!== </span><span class="s4">null</span><span class="s3">) {</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">val</span><span class="s3">.</span><span class="s1">constructor</span><span class="s3">.</span><span class="s1">name </span><span class="s3">=== </span><span class="s2">&quot;RegExp&quot;</span><span class="s3">) </span><span class="s1">val </span><span class="s3">= </span><span class="s4">new </span><span class="s1">RegExp</span><span class="s3">(</span><span class="s1">val</span><span class="s3">);</span>
							<span class="s4">else </span><span class="s1">val </span><span class="s3">= </span><span class="s1">JSON</span><span class="s3">.</span><span class="s1">parse</span><span class="s3">(</span><span class="s1">JSON</span><span class="s3">.</span><span class="s1">stringify</span><span class="s3">(</span><span class="s1">val</span><span class="s3">));</span>
						<span class="s3">}</span>
						<span class="s1">options</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">val</span><span class="s3">;</span>
					<span class="s3">}</span>
				<span class="s3">} </span><span class="s4">catch </span><span class="s3">(</span><span class="s1">e</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">newErr </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Error</span><span class="s3">(</span><span class="s1">String</span><span class="s3">(</span><span class="s1">e</span><span class="s3">.</span><span class="s1">message</span><span class="s3">));</span>
					<span class="s1">newErr</span><span class="s3">.</span><span class="s1">stack </span><span class="s3">= </span><span class="s1">String</span><span class="s3">(</span><span class="s1">e</span><span class="s3">.</span><span class="s1">stack</span><span class="s3">);</span>
					<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">newErr</span><span class="s3">, { </span><span class="s1">comment </span><span class="s3">});</span>
					<span class="s1">errors</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">newErr</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
		<span class="s4">return </span><span class="s3">{ </span><span class="s1">options</span><span class="s3">, </span><span class="s1">errors </span><span class="s3">};</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{MemberExpression} expression a member expression</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{{ members: string[], object: Expression | Super, membersOptionals: boolean[], memberRanges: Range[] }} member names (reverse order) and remaining object</span>
	 <span class="s5">*/</span>
	<span class="s1">extractMemberExpressionChain</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{AnyNode} */</span>
		<span class="s4">let </span><span class="s1">expr </span><span class="s3">= </span><span class="s1">expression</span><span class="s3">;</span>
		<span class="s4">const </span><span class="s1">members </span><span class="s3">= [];</span>
		<span class="s4">const </span><span class="s1">membersOptionals </span><span class="s3">= [];</span>
		<span class="s4">const </span><span class="s1">memberRanges </span><span class="s3">= [];</span>
		<span class="s4">while </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">computed</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;Literal&quot;</span><span class="s3">) </span><span class="s4">break</span><span class="s3">;</span>
				<span class="s1">members</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">value</span><span class="s3">}</span><span class="s2">`</span><span class="s3">); </span><span class="s0">// the literal</span>
				<span class="s1">memberRanges</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">object</span><span class="s3">.</span><span class="s1">range</span><span class="s3">); </span><span class="s0">// the range of the expression fragment before the literal</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">type </span><span class="s3">!== </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">) </span><span class="s4">break</span><span class="s3">;</span>
				<span class="s1">members</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">property</span><span class="s3">.</span><span class="s1">name</span><span class="s3">); </span><span class="s0">// the identifier</span>
				<span class="s1">memberRanges</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">object</span><span class="s3">.</span><span class="s1">range</span><span class="s3">); </span><span class="s0">// the range of the expression fragment before the identifier</span>
			<span class="s3">}</span>
			<span class="s1">membersOptionals</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">expr</span><span class="s3">.</span><span class="s1">optional</span><span class="s3">);</span>
			<span class="s1">expr </span><span class="s3">= </span><span class="s1">expr</span><span class="s3">.</span><span class="s1">object</span><span class="s3">;</span>
		<span class="s3">}</span>

		<span class="s4">return </span><span class="s3">{</span>
			<span class="s1">members</span><span class="s3">,</span>
			<span class="s1">membersOptionals</span><span class="s3">,</span>
			<span class="s1">memberRanges</span><span class="s3">,</span>
			<span class="s1">object</span><span class="s3">: </span><span class="s1">expr</span>
		<span class="s3">};</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} varName variable name</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{{name: string, info: VariableInfo | string} | undefined} name of the free variable and variable info for that</span>
	 <span class="s5">*/</span>
	<span class="s1">getFreeInfoFromVariable</span><span class="s3">(</span><span class="s1">varName</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">info </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getVariableInfo</span><span class="s3">(</span><span class="s1">varName</span><span class="s3">);</span>
		<span class="s4">let </span><span class="s1">name</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">info </span><span class="s4">instanceof </span><span class="s1">VariableInfo</span><span class="s3">) {</span>
			<span class="s1">name </span><span class="s3">= </span><span class="s1">info</span><span class="s3">.</span><span class="s1">freeName</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">name </span><span class="s3">!== </span><span class="s2">&quot;string&quot;</span><span class="s3">) </span><span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">info </span><span class="s3">!== </span><span class="s2">&quot;string&quot;</span><span class="s3">) {</span>
			<span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s1">name </span><span class="s3">= </span><span class="s1">info</span><span class="s3">;</span>
		<span class="s3">}</span>
		<span class="s4">return </span><span class="s3">{ </span><span class="s1">info</span><span class="s3">, </span><span class="s1">name </span><span class="s3">};</span>
	<span class="s3">}</span>

	<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{{ type: &quot;call&quot;, call: CallExpression, calleeName: string, rootInfo: string | VariableInfo, getCalleeMembers: () =&gt; string[], name: string, getMembers: () =&gt; string[], getMembersOptionals: () =&gt; boolean[], getMemberRanges: () =&gt; Range[]}} CallExpressionInfo */</span>
	<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{{ type: &quot;expression&quot;, rootInfo: string | VariableInfo, name: string, getMembers: () =&gt; string[], getMembersOptionals: () =&gt; boolean[], getMemberRanges: () =&gt; Range[]}} ExpressionExpressionInfo */</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{MemberExpression} expression a member expression</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{number} allowedTypes which types should be returned, presented in bit mask</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{CallExpressionInfo | ExpressionExpressionInfo | undefined} expression info</span>
	 <span class="s5">*/</span>
	<span class="s1">getMemberExpressionInfo</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">, </span><span class="s1">allowedTypes</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s3">{ </span><span class="s1">object</span><span class="s3">, </span><span class="s1">members</span><span class="s3">, </span><span class="s1">membersOptionals</span><span class="s3">, </span><span class="s1">memberRanges </span><span class="s3">} =</span>
			<span class="s4">this</span><span class="s3">.</span><span class="s1">extractMemberExpressionChain</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">);</span>
		<span class="s4">switch </span><span class="s3">(</span><span class="s1">object</span><span class="s3">.</span><span class="s1">type</span><span class="s3">) {</span>
			<span class="s4">case </span><span class="s2">&quot;CallExpression&quot;</span><span class="s3">: {</span>
				<span class="s4">if </span><span class="s3">((</span><span class="s1">allowedTypes </span><span class="s3">&amp; </span><span class="s1">ALLOWED_MEMBER_TYPES_CALL_EXPRESSION</span><span class="s3">) === </span><span class="s7">0</span><span class="s3">)</span>
					<span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
				<span class="s4">let </span><span class="s1">callee </span><span class="s3">= </span><span class="s1">object</span><span class="s3">.</span><span class="s1">callee</span><span class="s3">;</span>
				<span class="s4">let </span><span class="s1">rootMembers </span><span class="s3">= </span><span class="s1">EMPTY_ARRAY</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">callee</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;MemberExpression&quot;</span><span class="s3">) {</span>
					<span class="s3">({ </span><span class="s1">object</span><span class="s3">: </span><span class="s1">callee</span><span class="s3">, </span><span class="s1">members</span><span class="s3">: </span><span class="s1">rootMembers </span><span class="s3">} =</span>
						<span class="s4">this</span><span class="s3">.</span><span class="s1">extractMemberExpressionChain</span><span class="s3">(</span><span class="s1">callee</span><span class="s3">));</span>
				<span class="s3">}</span>
				<span class="s4">const </span><span class="s1">rootName </span><span class="s3">= </span><span class="s1">getRootName</span><span class="s3">(</span><span class="s1">callee</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">rootName</span><span class="s3">) </span><span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getFreeInfoFromVariable</span><span class="s3">(</span><span class="s1">rootName</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">result</span><span class="s3">) </span><span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s3">{ </span><span class="s1">info</span><span class="s3">: </span><span class="s1">rootInfo</span><span class="s3">, </span><span class="s1">name</span><span class="s3">: </span><span class="s1">resolvedRoot </span><span class="s3">} = </span><span class="s1">result</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">calleeName </span><span class="s3">= </span><span class="s1">objectAndMembersToName</span><span class="s3">(</span><span class="s1">resolvedRoot</span><span class="s3">, </span><span class="s1">rootMembers</span><span class="s3">);</span>
				<span class="s4">return </span><span class="s3">{</span>
					<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;call&quot;</span><span class="s3">,</span>
					<span class="s1">call</span><span class="s3">: </span><span class="s1">object</span><span class="s3">,</span>
					<span class="s1">calleeName</span><span class="s3">,</span>
					<span class="s1">rootInfo</span><span class="s3">,</span>
					<span class="s1">getCalleeMembers</span><span class="s3">: </span><span class="s1">memoize</span><span class="s3">(() =&gt; </span><span class="s1">rootMembers</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">()),</span>
					<span class="s1">name</span><span class="s3">: </span><span class="s1">objectAndMembersToName</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">calleeName</span><span class="s3">}</span><span class="s2">()`</span><span class="s3">, </span><span class="s1">members</span><span class="s3">),</span>
					<span class="s1">getMembers</span><span class="s3">: </span><span class="s1">memoize</span><span class="s3">(() =&gt; </span><span class="s1">members</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">()),</span>
					<span class="s1">getMembersOptionals</span><span class="s3">: </span><span class="s1">memoize</span><span class="s3">(() =&gt; </span><span class="s1">membersOptionals</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">()),</span>
					<span class="s1">getMemberRanges</span><span class="s3">: </span><span class="s1">memoize</span><span class="s3">(() =&gt; </span><span class="s1">memberRanges</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">())</span>
				<span class="s3">};</span>
			<span class="s3">}</span>
			<span class="s4">case </span><span class="s2">&quot;Identifier&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;MetaProperty&quot;</span><span class="s3">:</span>
			<span class="s4">case </span><span class="s2">&quot;ThisExpression&quot;</span><span class="s3">: {</span>
				<span class="s4">if </span><span class="s3">((</span><span class="s1">allowedTypes </span><span class="s3">&amp; </span><span class="s1">ALLOWED_MEMBER_TYPES_EXPRESSION</span><span class="s3">) === </span><span class="s7">0</span><span class="s3">)</span>
					<span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">rootName </span><span class="s3">= </span><span class="s1">getRootName</span><span class="s3">(</span><span class="s1">object</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">rootName</span><span class="s3">) </span><span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>

				<span class="s4">const </span><span class="s1">result </span><span class="s3">= </span><span class="s4">this</span><span class="s3">.</span><span class="s1">getFreeInfoFromVariable</span><span class="s3">(</span><span class="s1">rootName</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">result</span><span class="s3">) </span><span class="s4">return </span><span class="s1">undefined</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s3">{ </span><span class="s1">info</span><span class="s3">: </span><span class="s1">rootInfo</span><span class="s3">, </span><span class="s1">name</span><span class="s3">: </span><span class="s1">resolvedRoot </span><span class="s3">} = </span><span class="s1">result</span><span class="s3">;</span>
				<span class="s4">return </span><span class="s3">{</span>
					<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;expression&quot;</span><span class="s3">,</span>
					<span class="s1">name</span><span class="s3">: </span><span class="s1">objectAndMembersToName</span><span class="s3">(</span><span class="s1">resolvedRoot</span><span class="s3">, </span><span class="s1">members</span><span class="s3">),</span>
					<span class="s1">rootInfo</span><span class="s3">,</span>
					<span class="s1">getMembers</span><span class="s3">: </span><span class="s1">memoize</span><span class="s3">(() =&gt; </span><span class="s1">members</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">()),</span>
					<span class="s1">getMembersOptionals</span><span class="s3">: </span><span class="s1">memoize</span><span class="s3">(() =&gt; </span><span class="s1">membersOptionals</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">()),</span>
					<span class="s1">getMemberRanges</span><span class="s3">: </span><span class="s1">memoize</span><span class="s3">(() =&gt; </span><span class="s1">memberRanges</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">())</span>
				<span class="s3">};</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{MemberExpression} expression an expression</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{{ name: string, rootInfo: ExportedVariableInfo, getMembers: () =&gt; string[]} | undefined} name info</span>
	 <span class="s5">*/</span>
	<span class="s1">getNameForExpression</span><span class="s3">(</span><span class="s1">expression</span><span class="s3">) {</span>
		<span class="s4">return this</span><span class="s3">.</span><span class="s1">getMemberExpressionInfo</span><span class="s3">(</span>
			<span class="s1">expression</span><span class="s3">,</span>
			<span class="s1">ALLOWED_MEMBER_TYPES_EXPRESSION</span>
		<span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s5">/**</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} code source code</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{ParseOptions} options parsing options</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Program} parsed ast</span>
	 <span class="s5">*/</span>
	<span class="s4">static </span><span class="s1">_parse</span><span class="s3">(</span><span class="s1">code</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">type </span><span class="s3">= </span><span class="s1">options </span><span class="s3">? </span><span class="s1">options</span><span class="s3">.</span><span class="s1">sourceType </span><span class="s3">: </span><span class="s2">&quot;module&quot;</span><span class="s3">;</span>
		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{AcornOptions} */</span>
		<span class="s4">const </span><span class="s1">parserOptions </span><span class="s3">= {</span>
			<span class="s1">...defaultParserOptions</span><span class="s3">,</span>
			<span class="s1">allowReturnOutsideFunction</span><span class="s3">: </span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;script&quot;</span><span class="s3">,</span>
			<span class="s1">...options</span><span class="s3">,</span>
			<span class="s1">sourceType</span><span class="s3">: </span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;auto&quot; </span><span class="s3">? </span><span class="s2">&quot;module&quot; </span><span class="s3">: </span><span class="s1">type</span>
		<span class="s3">};</span>

		<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{AnyNode | undefined} */</span>
		<span class="s4">let </span><span class="s1">ast</span><span class="s3">;</span>
		<span class="s4">let </span><span class="s1">error</span><span class="s3">;</span>
		<span class="s4">let </span><span class="s1">threw </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
		<span class="s4">try </span><span class="s3">{</span>
			<span class="s1">ast </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{AnyNode} */ </span><span class="s3">(</span><span class="s1">parser</span><span class="s3">.</span><span class="s1">parse</span><span class="s3">(</span><span class="s1">code</span><span class="s3">, </span><span class="s1">parserOptions</span><span class="s3">));</span>
		<span class="s3">} </span><span class="s4">catch </span><span class="s3">(</span><span class="s1">e</span><span class="s3">) {</span>
			<span class="s1">error </span><span class="s3">= </span><span class="s1">e</span><span class="s3">;</span>
			<span class="s1">threw </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
		<span class="s3">}</span>

		<span class="s4">if </span><span class="s3">(</span><span class="s1">threw </span><span class="s3">&amp;&amp; </span><span class="s1">type </span><span class="s3">=== </span><span class="s2">&quot;auto&quot;</span><span class="s3">) {</span>
			<span class="s1">parserOptions</span><span class="s3">.</span><span class="s1">sourceType </span><span class="s3">= </span><span class="s2">&quot;script&quot;</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(!(</span><span class="s2">&quot;allowReturnOutsideFunction&quot; </span><span class="s4">in </span><span class="s1">options</span><span class="s3">)) {</span>
				<span class="s1">parserOptions</span><span class="s3">.</span><span class="s1">allowReturnOutsideFunction </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">parserOptions</span><span class="s3">.</span><span class="s1">onComment</span><span class="s3">)) {</span>
				<span class="s1">parserOptions</span><span class="s3">.</span><span class="s1">onComment</span><span class="s3">.</span><span class="s1">length </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">try </span><span class="s3">{</span>
				<span class="s1">ast </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{AnyNode} */ </span><span class="s3">(</span><span class="s1">parser</span><span class="s3">.</span><span class="s1">parse</span><span class="s3">(</span><span class="s1">code</span><span class="s3">, </span><span class="s1">parserOptions</span><span class="s3">));</span>
				<span class="s1">threw </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
			<span class="s3">} </span><span class="s4">catch </span><span class="s3">(</span><span class="s1">e</span><span class="s3">) {</span>
				<span class="s0">// we use the error from first parse try</span>
				<span class="s0">// so nothing to do here</span>
			<span class="s3">}</span>
		<span class="s3">}</span>

		<span class="s4">if </span><span class="s3">(</span><span class="s1">threw</span><span class="s3">) {</span>
			<span class="s4">throw </span><span class="s1">error</span><span class="s3">;</span>
		<span class="s3">}</span>

		<span class="s4">return </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Program} */ </span><span class="s3">(</span><span class="s1">ast</span><span class="s3">);</span>
	<span class="s3">}</span>
<span class="s3">}</span>

<span class="s1">module</span><span class="s3">.</span><span class="s1">exports </span><span class="s3">= </span><span class="s1">JavascriptParser</span><span class="s3">;</span>
<span class="s1">module</span><span class="s3">.</span><span class="s1">exports</span><span class="s3">.</span><span class="s1">ALLOWED_MEMBER_TYPES_ALL </span><span class="s3">= </span><span class="s1">ALLOWED_MEMBER_TYPES_ALL</span><span class="s3">;</span>
<span class="s1">module</span><span class="s3">.</span><span class="s1">exports</span><span class="s3">.</span><span class="s1">ALLOWED_MEMBER_TYPES_EXPRESSION </span><span class="s3">=</span>
	<span class="s1">ALLOWED_MEMBER_TYPES_EXPRESSION</span><span class="s3">;</span>
<span class="s1">module</span><span class="s3">.</span><span class="s1">exports</span><span class="s3">.</span><span class="s1">ALLOWED_MEMBER_TYPES_CALL_EXPRESSION </span><span class="s3">=</span>
	<span class="s1">ALLOWED_MEMBER_TYPES_CALL_EXPRESSION</span><span class="s3">;</span>
</pre>
</body>
</html>