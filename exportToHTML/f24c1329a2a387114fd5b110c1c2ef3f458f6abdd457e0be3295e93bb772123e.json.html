<html>
<head>
<title>f24c1329a2a387114fd5b110c1c2ef3f458f6abdd457e0be3295e93bb772123e.json</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #cf8e6d;}
.s3 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
f24c1329a2a387114fd5b110c1c2ef3f458f6abdd457e0be3295e93bb772123e.json</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;ast&quot;</span><span class="s0">:</span><span class="s2">null</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">:</span><span class="s1">&quot;import </span><span class="s2">\&quot;</span><span class="s1">core-js/modules/es.array.push.js</span><span class="s2">\&quot;</span><span class="s1">;</span><span class="s2">\n</span><span class="s1">export default {</span><span class="s2">\n  </span><span class="s1">data() {</span><span class="s2">\n    </span><span class="s1">const validatePassword = (rule, value, callback) =&gt; {</span><span class="s2">\n      </span><span class="s1">if (value === '') {</span><span class="s2">\n        </span><span class="s1">callback(new Error('请确认密码'));</span><span class="s2">\n      </span><span class="s1">} else if (value !== this.user.newPassword) {</span><span class="s2">\n        </span><span class="s1">callback(new Error('确认密码错误'));</span><span class="s2">\n      </span><span class="s1">} else {</span><span class="s2">\n        </span><span class="s1">callback();</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">};</span><span class="s2">\n    </span><span class="s1">return {</span><span class="s2">\n      </span><span class="s1">user: JSON.parse(localStorage.getItem('xm-user') || '{}'),</span><span class="s2">\n      </span><span class="s1">dialogVisible: false,</span><span class="s2">\n      </span><span class="s1">rules: {</span><span class="s2">\n        </span><span class="s1">password: [{</span><span class="s2">\n          </span><span class="s1">required: true,</span><span class="s2">\n          </span><span class="s1">message: '请输入原始密码',</span><span class="s2">\n          </span><span class="s1">trigger: 'blur'</span><span class="s2">\n        </span><span class="s1">}],</span><span class="s2">\n        </span><span class="s1">newPassword: [{</span><span class="s2">\n          </span><span class="s1">required: true,</span><span class="s2">\n          </span><span class="s1">message: '请输入新密码',</span><span class="s2">\n          </span><span class="s1">trigger: 'blur'</span><span class="s2">\n        </span><span class="s1">}],</span><span class="s2">\n        </span><span class="s1">confirmPassword: [{</span><span class="s2">\n          </span><span class="s1">validator: validatePassword,</span><span class="s2">\n          </span><span class="s1">required: true,</span><span class="s2">\n          </span><span class="s1">trigger: 'blur'</span><span class="s2">\n        </span><span class="s1">}]</span><span class="s2">\n      </span><span class="s1">}</span><span class="s2">\n    </span><span class="s1">};</span><span class="s2">\n  </span><span class="s1">},</span><span class="s2">\n  </span><span class="s1">created() {},</span><span class="s2">\n  </span><span class="s1">methods: {</span><span class="s2">\n    </span><span class="s1">update() {</span><span class="s2">\n      </span><span class="s1">// 保存当前的用户信息到数据库</span><span class="s2">\n      </span><span class="s1">this.$request.put('/admin/update', this.user).then(res =&gt; {</span><span class="s2">\n        </span><span class="s1">if (res.code === '200') {</span><span class="s2">\n          </span><span class="s1">// 成功更新</span><span class="s2">\n          </span><span class="s1">this.$message.success('保存成功');</span><span class="s2">\n          </span><span class="s1">// 更新浏览器缓存里的用户信息</span><span class="s2">\n          </span><span class="s1">localStorage.setItem('xm-user', JSON.stringify(this.user));</span><span class="s2">\n\n          </span><span class="s1">// 触发父级的数据更新</span><span class="s2">\n          </span><span class="s1">this.$emit('update:user');</span><span class="s2">\n        </span><span class="s1">} else {</span><span class="s2">\n          </span><span class="s1">this.$message.error(res.msg);</span><span class="s2">\n        </span><span class="s1">}</span><span class="s2">\n      </span><span class="s1">});</span><span class="s2">\n    </span><span class="s1">},</span><span class="s2">\n    </span><span class="s1">handleAvatarSuccess(response, file, fileList) {</span><span class="s2">\n      </span><span class="s1">// 把user的头像属性换成上传的图片的链接</span><span class="s2">\n      </span><span class="s1">this.$set(this.user, 'avatar', response.data);</span><span class="s2">\n    </span><span class="s1">},</span><span class="s2">\n    </span><span class="s1">// 修改密码</span><span class="s2">\n    </span><span class="s1">updatePassword() {</span><span class="s2">\n      </span><span class="s1">this.dialogVisible = true;</span><span class="s2">\n    </span><span class="s1">},</span><span class="s2">\n    </span><span class="s1">save() {</span><span class="s2">\n      </span><span class="s1">this.$refs.formRef.validate(valid =&gt; {</span><span class="s2">\n        </span><span class="s1">if (valid) {</span><span class="s2">\n          </span><span class="s1">this.$request.put('/updatePassword', this.user).then(res =&gt; {</span><span class="s2">\n            </span><span class="s1">if (res.code === '200') {</span><span class="s2">\n              </span><span class="s1">// 成功更新</span><span class="s2">\n              </span><span class="s1">this.$message.success('修改密码成功');</span><span class="s2">\n              </span><span class="s1">this.$router.push('/login');</span><span class="s2">\n            </span><span class="s1">} else {</span><span class="s2">\n              </span><span class="s1">this.$message.error(res.msg);</span><span class="s2">\n            </span><span class="s1">}</span><span class="s2">\n          </span><span class="s1">});</span><span class="s2">\n        </span><span class="s1">}</span><span class="s2">\n      </span><span class="s1">});</span><span class="s2">\n    </span><span class="s1">}</span><span class="s2">\n  </span><span class="s1">}</span><span class="s2">\n</span><span class="s1">};&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">:{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s3">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;validatePassword&quot;</span><span class="s0">,</span><span class="s1">&quot;rule&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;callback&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;user&quot;</span><span class="s0">,</span><span class="s1">&quot;newPassword&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;localStorage&quot;</span><span class="s0">,</span><span class="s1">&quot;getItem&quot;</span><span class="s0">,</span><span class="s1">&quot;dialogVisible&quot;</span><span class="s0">,</span><span class="s1">&quot;rules&quot;</span><span class="s0">,</span><span class="s1">&quot;password&quot;</span><span class="s0">,</span><span class="s1">&quot;required&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;trigger&quot;</span><span class="s0">,</span><span class="s1">&quot;confirmPassword&quot;</span><span class="s0">,</span><span class="s1">&quot;validator&quot;</span><span class="s0">,</span><span class="s1">&quot;created&quot;</span><span class="s0">,</span><span class="s1">&quot;methods&quot;</span><span class="s0">,</span><span class="s1">&quot;update&quot;</span><span class="s0">,</span><span class="s1">&quot;$request&quot;</span><span class="s0">,</span><span class="s1">&quot;put&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;$message&quot;</span><span class="s0">,</span><span class="s1">&quot;success&quot;</span><span class="s0">,</span><span class="s1">&quot;setItem&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;$emit&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;msg&quot;</span><span class="s0">,</span><span class="s1">&quot;handleAvatarSuccess&quot;</span><span class="s0">,</span><span class="s1">&quot;response&quot;</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">,</span><span class="s1">&quot;fileList&quot;</span><span class="s0">,</span><span class="s1">&quot;$set&quot;</span><span class="s0">,</span><span class="s1">&quot;updatePassword&quot;</span><span class="s0">,</span><span class="s1">&quot;save&quot;</span><span class="s0">,</span><span class="s1">&quot;$refs&quot;</span><span class="s0">,</span><span class="s1">&quot;formRef&quot;</span><span class="s0">,</span><span class="s1">&quot;validate&quot;</span><span class="s0">,</span><span class="s1">&quot;valid&quot;</span><span class="s0">,</span><span class="s1">&quot;$router&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;src/views/front/Person.vue&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;&lt;template&gt;</span><span class="s2">\r\n  </span><span class="s1">&lt;div class=</span><span class="s2">\&quot;</span><span class="s1">main-content</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n    </span><span class="s1">&lt;el-card style=</span><span class="s2">\&quot;</span><span class="s1">width: 50%; margin: 30px auto</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n      </span><span class="s1">&lt;div style=</span><span class="s2">\&quot;</span><span class="s1">text-align: right; margin-bottom: 20px</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-button type=</span><span class="s2">\&quot;</span><span class="s1">primary</span><span class="s2">\&quot; </span><span class="s1">@click=</span><span class="s2">\&quot;</span><span class="s1">updatePassword</span><span class="s2">\&quot;</span><span class="s1">&gt;修改密码&lt;/el-button&gt;</span><span class="s2">\r\n      </span><span class="s1">&lt;/div&gt;</span><span class="s2">\r\n      </span><span class="s1">&lt;el-form :model=</span><span class="s2">\&quot;</span><span class="s1">user</span><span class="s2">\&quot; </span><span class="s1">label-width=</span><span class="s2">\&quot;</span><span class="s1">80px</span><span class="s2">\&quot; </span><span class="s1">style=</span><span class="s2">\&quot;</span><span class="s1">padding-right: 20px</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;div style=</span><span class="s2">\&quot;</span><span class="s1">margin: 15px; text-align: center</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-upload</span><span class="s2">\r\n              </span><span class="s1">class=</span><span class="s2">\&quot;</span><span class="s1">avatar-uploader</span><span class="s2">\&quot;\r\n              </span><span class="s1">:action=</span><span class="s2">\&quot;</span><span class="s1">$baseUrl + '/files/upload'</span><span class="s2">\&quot;\r\n              </span><span class="s1">:show-file-list=</span><span class="s2">\&quot;</span><span class="s1">false</span><span class="s2">\&quot;\r\n              </span><span class="s1">:on-success=</span><span class="s2">\&quot;</span><span class="s1">handleAvatarSuccess</span><span class="s2">\&quot;\r\n          </span><span class="s1">&gt;</span><span class="s2">\r\n            </span><span class="s1">&lt;img v-if=</span><span class="s2">\&quot;</span><span class="s1">user.avatar</span><span class="s2">\&quot; </span><span class="s1">:src=</span><span class="s2">\&quot;</span><span class="s1">user.avatar</span><span class="s2">\&quot; </span><span class="s1">class=</span><span class="s2">\&quot;</span><span class="s1">avatar</span><span class="s2">\&quot; </span><span class="s1">/&gt;</span><span class="s2">\r\n            </span><span class="s1">&lt;i v-else class=</span><span class="s2">\&quot;</span><span class="s1">el-icon-plus avatar-uploader-icon</span><span class="s2">\&quot;</span><span class="s1">&gt;&lt;/i&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;/el-upload&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/div&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-form-item label=</span><span class="s2">\&quot;</span><span class="s1">用户名</span><span class="s2">\&quot; </span><span class="s1">prop=</span><span class="s2">\&quot;</span><span class="s1">username</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-input v-model=</span><span class="s2">\&quot;</span><span class="s1">user.username</span><span class="s2">\&quot; </span><span class="s1">placeholder=</span><span class="s2">\&quot;</span><span class="s1">用户名</span><span class="s2">\&quot; </span><span class="s1">disabled&gt;&lt;/el-input&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/el-form-item&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-form-item label=</span><span class="s2">\&quot;</span><span class="s1">姓名</span><span class="s2">\&quot; </span><span class="s1">prop=</span><span class="s2">\&quot;</span><span class="s1">name</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-input v-model=</span><span class="s2">\&quot;</span><span class="s1">user.name</span><span class="s2">\&quot; </span><span class="s1">placeholder=</span><span class="s2">\&quot;</span><span class="s1">姓名</span><span class="s2">\&quot;</span><span class="s1">&gt;&lt;/el-input&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/el-form-item&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-form-item label=</span><span class="s2">\&quot;</span><span class="s1">电话</span><span class="s2">\&quot; </span><span class="s1">prop=</span><span class="s2">\&quot;</span><span class="s1">phone</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-input v-model=</span><span class="s2">\&quot;</span><span class="s1">user.phone</span><span class="s2">\&quot; </span><span class="s1">placeholder=</span><span class="s2">\&quot;</span><span class="s1">电话</span><span class="s2">\&quot;</span><span class="s1">&gt;&lt;/el-input&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/el-form-item&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-form-item label=</span><span class="s2">\&quot;</span><span class="s1">邮箱</span><span class="s2">\&quot; </span><span class="s1">prop=</span><span class="s2">\&quot;</span><span class="s1">email</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-input v-model=</span><span class="s2">\&quot;</span><span class="s1">user.email</span><span class="s2">\&quot; </span><span class="s1">placeholder=</span><span class="s2">\&quot;</span><span class="s1">邮箱</span><span class="s2">\&quot;</span><span class="s1">&gt;&lt;/el-input&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/el-form-item&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;div style=</span><span class="s2">\&quot;</span><span class="s1">text-align: center; margin-bottom: 20px</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-button type=</span><span class="s2">\&quot;</span><span class="s1">primary</span><span class="s2">\&quot; </span><span class="s1">@click=</span><span class="s2">\&quot;</span><span class="s1">update</span><span class="s2">\&quot;</span><span class="s1">&gt;保 存&lt;/el-button&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/div&gt;</span><span class="s2">\r\n      </span><span class="s1">&lt;/el-form&gt;</span><span class="s2">\r\n    </span><span class="s1">&lt;/el-card&gt;</span><span class="s2">\r\n    </span><span class="s1">&lt;el-dialog title=</span><span class="s2">\&quot;</span><span class="s1">修改密码</span><span class="s2">\&quot; </span><span class="s1">:visible.sync=</span><span class="s2">\&quot;</span><span class="s1">dialogVisible</span><span class="s2">\&quot; </span><span class="s1">width=</span><span class="s2">\&quot;</span><span class="s1">30%</span><span class="s2">\&quot; </span><span class="s1">:close-on-click-modal=</span><span class="s2">\&quot;</span><span class="s1">false</span><span class="s2">\&quot; </span><span class="s1">destroy-on-close&gt;</span><span class="s2">\r\n      </span><span class="s1">&lt;el-form :model=</span><span class="s2">\&quot;</span><span class="s1">user</span><span class="s2">\&quot; </span><span class="s1">label-width=</span><span class="s2">\&quot;</span><span class="s1">80px</span><span class="s2">\&quot; </span><span class="s1">style=</span><span class="s2">\&quot;</span><span class="s1">padding-right: 20px</span><span class="s2">\&quot; </span><span class="s1">:rules=</span><span class="s2">\&quot;</span><span class="s1">rules</span><span class="s2">\&quot; </span><span class="s1">ref=</span><span class="s2">\&quot;</span><span class="s1">formRef</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-form-item label=</span><span class="s2">\&quot;</span><span class="s1">原始密码</span><span class="s2">\&quot; </span><span class="s1">prop=</span><span class="s2">\&quot;</span><span class="s1">password</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-input show-password v-model=</span><span class="s2">\&quot;</span><span class="s1">user.password</span><span class="s2">\&quot; </span><span class="s1">placeholder=</span><span class="s2">\&quot;</span><span class="s1">原始密码</span><span class="s2">\&quot;</span><span class="s1">&gt;&lt;/el-input&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/el-form-item&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-form-item label=</span><span class="s2">\&quot;</span><span class="s1">新密码</span><span class="s2">\&quot; </span><span class="s1">prop=</span><span class="s2">\&quot;</span><span class="s1">newPassword</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-input show-password v-model=</span><span class="s2">\&quot;</span><span class="s1">user.newPassword</span><span class="s2">\&quot; </span><span class="s1">placeholder=</span><span class="s2">\&quot;</span><span class="s1">新密码</span><span class="s2">\&quot;</span><span class="s1">&gt;&lt;/el-input&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/el-form-item&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-form-item label=</span><span class="s2">\&quot;</span><span class="s1">确认密码</span><span class="s2">\&quot; </span><span class="s1">prop=</span><span class="s2">\&quot;</span><span class="s1">confirmPassword</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n          </span><span class="s1">&lt;el-input show-password v-model=</span><span class="s2">\&quot;</span><span class="s1">user.confirmPassword</span><span class="s2">\&quot; </span><span class="s1">placeholder=</span><span class="s2">\&quot;</span><span class="s1">确认密码</span><span class="s2">\&quot;</span><span class="s1">&gt;&lt;/el-input&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;/el-form-item&gt;</span><span class="s2">\r\n      </span><span class="s1">&lt;/el-form&gt;</span><span class="s2">\r\n      </span><span class="s1">&lt;div slot=</span><span class="s2">\&quot;</span><span class="s1">footer</span><span class="s2">\&quot; </span><span class="s1">class=</span><span class="s2">\&quot;</span><span class="s1">dialog-footer</span><span class="s2">\&quot;</span><span class="s1">&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-button @click=</span><span class="s2">\&quot;</span><span class="s1">fromVisible = false</span><span class="s2">\&quot;</span><span class="s1">&gt;取 消&lt;/el-button&gt;</span><span class="s2">\r\n        </span><span class="s1">&lt;el-button type=</span><span class="s2">\&quot;</span><span class="s1">primary</span><span class="s2">\&quot; </span><span class="s1">@click=</span><span class="s2">\&quot;</span><span class="s1">save</span><span class="s2">\&quot;</span><span class="s1">&gt;确 定&lt;/el-button&gt;</span><span class="s2">\r\n      </span><span class="s1">&lt;/div&gt;</span><span class="s2">\r\n    </span><span class="s1">&lt;/el-dialog&gt;</span><span class="s2">\r\n  </span><span class="s1">&lt;/div&gt;</span><span class="s2">\r\n</span><span class="s1">&lt;/template&gt;</span><span class="s2">\r\n\r\n</span><span class="s1">&lt;script&gt;</span><span class="s2">\r\n</span><span class="s1">export default {</span><span class="s2">\r\n  </span><span class="s1">data() {</span><span class="s2">\r\n    </span><span class="s1">const validatePassword = (rule, value, callback) =&gt; {</span><span class="s2">\r\n      </span><span class="s1">if (value === '') {</span><span class="s2">\r\n        </span><span class="s1">callback(new Error('请确认密码'))</span><span class="s2">\r\n      </span><span class="s1">} else if (value !== this.user.newPassword) {</span><span class="s2">\r\n        </span><span class="s1">callback(new Error('确认密码错误'))</span><span class="s2">\r\n      </span><span class="s1">} else {</span><span class="s2">\r\n        </span><span class="s1">callback()</span><span class="s2">\r\n      </span><span class="s1">}</span><span class="s2">\r\n    </span><span class="s1">}</span><span class="s2">\r\n    </span><span class="s1">return {</span><span class="s2">\r\n      </span><span class="s1">user: JSON.parse(localStorage.getItem('xm-user') || '{}'),</span><span class="s2">\r\n      </span><span class="s1">dialogVisible: false,</span><span class="s2">\r\n\r\n      </span><span class="s1">rules: {</span><span class="s2">\r\n        </span><span class="s1">password: [</span><span class="s2">\r\n          </span><span class="s1">{ required: true, message: '请输入原始密码', trigger: 'blur' },</span><span class="s2">\r\n        </span><span class="s1">],</span><span class="s2">\r\n        </span><span class="s1">newPassword: [</span><span class="s2">\r\n          </span><span class="s1">{ required: true, message: '请输入新密码', trigger: 'blur' },</span><span class="s2">\r\n        </span><span class="s1">],</span><span class="s2">\r\n        </span><span class="s1">confirmPassword: [</span><span class="s2">\r\n          </span><span class="s1">{ validator: validatePassword, required: true, trigger: 'blur' },</span><span class="s2">\r\n        </span><span class="s1">],</span><span class="s2">\r\n      </span><span class="s1">}</span><span class="s2">\r\n    </span><span class="s1">}</span><span class="s2">\r\n  </span><span class="s1">},</span><span class="s2">\r\n  </span><span class="s1">created() {</span><span class="s2">\r\n\r\n  </span><span class="s1">},</span><span class="s2">\r\n  </span><span class="s1">methods: {</span><span class="s2">\r\n    </span><span class="s1">update() {</span><span class="s2">\r\n      </span><span class="s1">// 保存当前的用户信息到数据库</span><span class="s2">\r\n      </span><span class="s1">this.$request.put('/admin/update', this.user).then(res =&gt; {</span><span class="s2">\r\n        </span><span class="s1">if (res.code === '200') {</span><span class="s2">\r\n          </span><span class="s1">// 成功更新</span><span class="s2">\r\n          </span><span class="s1">this.$message.success('保存成功')</span><span class="s2">\r\n          </span><span class="s1">// 更新浏览器缓存里的用户信息</span><span class="s2">\r\n          </span><span class="s1">localStorage.setItem('xm-user', JSON.stringify(this.user))</span><span class="s2">\r\n\r\n          </span><span class="s1">// 触发父级的数据更新</span><span class="s2">\r\n          </span><span class="s1">this.$emit('update:user')</span><span class="s2">\r\n        </span><span class="s1">} else {</span><span class="s2">\r\n          </span><span class="s1">this.$message.error(res.msg)</span><span class="s2">\r\n        </span><span class="s1">}</span><span class="s2">\r\n      </span><span class="s1">})</span><span class="s2">\r\n    </span><span class="s1">},</span><span class="s2">\r\n    </span><span class="s1">handleAvatarSuccess(response, file, fileList) {</span><span class="s2">\r\n      </span><span class="s1">// 把user的头像属性换成上传的图片的链接</span><span class="s2">\r\n      </span><span class="s1">this.$set(this.user, 'avatar', response.data)</span><span class="s2">\r\n    </span><span class="s1">},</span><span class="s2">\r\n    </span><span class="s1">// 修改密码</span><span class="s2">\r\n    </span><span class="s1">updatePassword() {</span><span class="s2">\r\n      </span><span class="s1">this.dialogVisible = true</span><span class="s2">\r\n    </span><span class="s1">},</span><span class="s2">\r\n    </span><span class="s1">save() {</span><span class="s2">\r\n      </span><span class="s1">this.$refs.formRef.validate((valid) =&gt; {</span><span class="s2">\r\n        </span><span class="s1">if (valid) {</span><span class="s2">\r\n          </span><span class="s1">this.$request.put('/updatePassword', this.user).then(res =&gt; {</span><span class="s2">\r\n            </span><span class="s1">if (res.code === '200') {</span><span class="s2">\r\n              </span><span class="s1">// 成功更新</span><span class="s2">\r\n              </span><span class="s1">this.$message.success('修改密码成功')</span><span class="s2">\r\n              </span><span class="s1">this.$router.push('/login')</span><span class="s2">\r\n            </span><span class="s1">} else {</span><span class="s2">\r\n              </span><span class="s1">this.$message.error(res.msg)</span><span class="s2">\r\n            </span><span class="s1">}</span><span class="s2">\r\n          </span><span class="s1">})</span><span class="s2">\r\n        </span><span class="s1">}</span><span class="s2">\r\n      </span><span class="s1">})</span><span class="s2">\r\n    </span><span class="s1">}</span><span class="s2">\r\n  </span><span class="s1">}</span><span class="s2">\r\n</span><span class="s1">}</span><span class="s2">\r\n</span><span class="s1">&lt;/script&gt;</span><span class="s2">\r\n\r\n</span><span class="s1">&lt;style scoped&gt;</span><span class="s2">\r\n</span><span class="s1">/deep/.el-form-item__label {</span><span class="s2">\r\n  </span><span class="s1">font-weight: bold;</span><span class="s2">\r\n</span><span class="s1">}</span><span class="s2">\r\n</span><span class="s1">/deep/.el-upload {</span><span class="s2">\r\n  </span><span class="s1">border-radius: 50%;</span><span class="s2">\r\n</span><span class="s1">}</span><span class="s2">\r\n</span><span class="s1">/deep/.avatar-uploader .el-upload {</span><span class="s2">\r\n  </span><span class="s1">border: 1px dashed #d9d9d9;</span><span class="s2">\r\n  </span><span class="s1">cursor: pointer;</span><span class="s2">\r\n  </span><span class="s1">position: relative;</span><span class="s2">\r\n  </span><span class="s1">overflow: hidden;</span><span class="s2">\r\n  </span><span class="s1">border-radius: 50%;</span><span class="s2">\r\n</span><span class="s1">}</span><span class="s2">\r\n</span><span class="s1">/deep/.avatar-uploader .el-upload:hover {</span><span class="s2">\r\n  </span><span class="s1">border-color: #409EFF;</span><span class="s2">\r\n</span><span class="s1">}</span><span class="s2">\r\n</span><span class="s1">.avatar-uploader-icon {</span><span class="s2">\r\n  </span><span class="s1">font-size: 28px;</span><span class="s2">\r\n  </span><span class="s1">color: #8c939d;</span><span class="s2">\r\n  </span><span class="s1">width: 120px;</span><span class="s2">\r\n  </span><span class="s1">height: 120px;</span><span class="s2">\r\n  </span><span class="s1">line-height: 120px;</span><span class="s2">\r\n  </span><span class="s1">text-align: center;</span><span class="s2">\r\n  </span><span class="s1">border-radius: 50%;</span><span class="s2">\r\n</span><span class="s1">}</span><span class="s2">\r\n</span><span class="s1">.avatar {</span><span class="s2">\r\n  </span><span class="s1">width: 120px;</span><span class="s2">\r\n  </span><span class="s1">height: 120px;</span><span class="s2">\r\n  </span><span class="s1">display: block;</span><span class="s2">\r\n  </span><span class="s1">border-radius: 50%;</span><span class="s2">\r\n</span><span class="s1">}</span><span class="s2">\r\n</span><span class="s1">&lt;/style&gt;&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;AAwDA;EACAA,KAAA;IACA,MAAAC,gBAAA,GAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,IAAAD,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA,WAAAF,KAAA,UAAAG,IAAA,CAAAC,WAAA;QACAH,QAAA,KAAAC,KAAA;MACA;QACAD,QAAA;MACA;IACA;IACA;MACAE,IAAA,EAAAE,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,aAAA;MAEAC,KAAA;QACAC,QAAA,GACA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAV,WAAA,GACA;UAAAQ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAC,eAAA,GACA;UAAAC,SAAA,EAAAlB,gBAAA;UAAAc,QAAA;UAAAE,OAAA;QAAA;MAEA;IACA;EACA;EACAG,QAAA,GAEA;EACAC,OAAA;IACAC,OAAA;MACA;MACA,KAAAC,QAAA,CAAAC,GAAA,uBAAAlB,IAAA,EAAAmB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA;UACAnB,YAAA,CAAAoB,OAAA,YAAAtB,IAAA,CAAAuB,SAAA,MAAAzB,IAAA;;UAEA;UACA,KAAA0B,KAAA;QACA;UACA,KAAAJ,QAAA,CAAAK,KAAA,CAAAP,GAAA,CAAAQ,GAAA;QACA;MACA;IACA;IACAC,oBAAAC,QAAA,EAAAC,IAAA,EAAAC,QAAA;MACA;MACA,KAAAC,IAAA,MAAAjC,IAAA,YAAA8B,QAAA,CAAApC,IAAA;IACA;IACA;IACAwC,eAAA;MACA,KAAA5B,aAAA;IACA;IACA6B,KAAA;MACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAtB,QAAA,CAAAC,GAAA,yBAAAlB,IAAA,EAAAmB,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,IAAA;cACA;cACA,KAAAC,QAAA,CAAAC,OAAA;cACA,KAAAiB,OAAA,CAAAC,IAAA;YACA;cACA,KAAAnB,QAAA,CAAAK,KAAA,CAAAP,GAAA,CAAAQ,GAAA;YACA;UACA;QACA;MACA;IACA;EACA;AACA&quot;</span><span class="s0">},</span><span class="s1">&quot;metadata&quot;</span><span class="s0">:{},</span><span class="s1">&quot;sourceType&quot;</span><span class="s0">:</span><span class="s1">&quot;module&quot;</span><span class="s0">,</span><span class="s1">&quot;externalDependencies&quot;</span><span class="s0">:[]}</span></pre>
</body>
</html>