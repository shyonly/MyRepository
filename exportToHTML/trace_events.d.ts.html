<html>
<head>
<title>trace_events.d.ts</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #5f826b; font-style: italic;}
.s1 { color: #67a37c; font-style: italic;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #bcbec4;}
.s5 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
trace_events.d.ts</font>
</center></td></tr></table>
<pre><span class="s0">/**</span>
 <span class="s0">* The `node:trace_events` module provides a mechanism to centralize tracing</span>
 <span class="s0">* information generated by V8, Node.js core, and userspace code.</span>
 <span class="s0">*</span>
 <span class="s0">* Tracing can be enabled with the `--trace-event-categories` command-line flag</span>
 <span class="s0">* or by using the `node:trace_events` module. The `--trace-event-categories` flag</span>
 <span class="s0">* accepts a list of comma-separated category names.</span>
 <span class="s0">*</span>
 <span class="s0">* The available categories are:</span>
 <span class="s0">*</span>
 <span class="s0">* * `node`: An empty placeholder.</span>
 <span class="s0">* * `node.async_hooks`: Enables capture of detailed `async_hooks` trace data.</span>
 <span class="s0">* The `async_hooks` events have a unique `asyncId` and a special `triggerId` `triggerAsyncId` property.</span>
 <span class="s0">* * `node.bootstrap`: Enables capture of Node.js bootstrap milestones.</span>
 <span class="s0">* * `node.console`: Enables capture of `console.time()` and `console.count()`output.</span>
 <span class="s0">* * `node.threadpoolwork.sync`: Enables capture of trace data for threadpool</span>
 <span class="s0">* synchronous operations, such as `blob`, `zlib`, `crypto` and `node_api`.</span>
 <span class="s0">* * `node.threadpoolwork.async`: Enables capture of trace data for threadpool</span>
 <span class="s0">* asynchronous operations, such as `blob`, `zlib`, `crypto` and `node_api`.</span>
 <span class="s0">* * `node.dns.native`: Enables capture of trace data for DNS queries.</span>
 <span class="s0">* * `node.net.native`: Enables capture of trace data for network.</span>
 <span class="s0">* * `node.environment`: Enables capture of Node.js Environment milestones.</span>
 <span class="s0">* * `node.fs.sync`: Enables capture of trace data for file system sync methods.</span>
 <span class="s0">* * `node.fs_dir.sync`: Enables capture of trace data for file system sync</span>
 <span class="s0">* directory methods.</span>
 <span class="s0">* * `node.fs.async`: Enables capture of trace data for file system async methods.</span>
 <span class="s0">* * `node.fs_dir.async`: Enables capture of trace data for file system async</span>
 <span class="s0">* directory methods.</span>
 <span class="s0">* * `node.perf`: Enables capture of `Performance API` measurements.</span>
 <span class="s0">*    * `node.perf.usertiming`: Enables capture of only Performance API User Timing</span>
 <span class="s0">*    measures and marks.</span>
 <span class="s0">*    * `node.perf.timerify`: Enables capture of only Performance API timerify</span>
 <span class="s0">*    measurements.</span>
 <span class="s0">* * `node.promises.rejections`: Enables capture of trace data tracking the number</span>
 <span class="s0">* of unhandled Promise rejections and handled-after-rejections.</span>
 <span class="s0">* * `node.vm.script`: Enables capture of trace data for the `node:vm` module's`runInNewContext()`, `runInContext()`, and `runInThisContext()` methods.</span>
 <span class="s0">* * `v8`: The `V8` events are GC, compiling, and execution related.</span>
 <span class="s0">* * `node.http`: Enables capture of trace data for http request / response.</span>
 <span class="s0">*</span>
 <span class="s0">* By default the `node`, `node.async_hooks`, and `v8` categories are enabled.</span>
 <span class="s0">*</span>
 <span class="s0">* ```bash</span>
 <span class="s0">* node --trace-event-categories v8,node,node.async_hooks server.js</span>
 <span class="s0">* ```</span>
 <span class="s0">*</span>
 <span class="s0">* Prior versions of Node.js required the use of the `--trace-events-enabled`flag to enable trace events. This requirement has been removed. However, the`--trace-events-enabled` flag _may_ still be</span>
 <span class="s0">* used and will enable the`node`, `node.async_hooks`, and `v8` trace event categories by default.</span>
 <span class="s0">*</span>
 <span class="s0">* ```bash</span>
 <span class="s0">* node --trace-events-enabled</span>
 <span class="s0">*</span>
 <span class="s0">* # is equivalent to</span>
 <span class="s0">*</span>
 <span class="s0">* node --trace-event-categories v8,node,node.async_hooks</span>
 <span class="s0">* ```</span>
 <span class="s0">*</span>
 <span class="s0">* Alternatively, trace events may be enabled using the `node:trace_events` module:</span>
 <span class="s0">*</span>
 <span class="s0">* ```js</span>
 <span class="s0">* const trace_events = require('node:trace_events');</span>
 <span class="s0">* const tracing = trace_events.createTracing({ categories: ['node.perf'] });</span>
 <span class="s0">* tracing.enable();  // Enable trace event capture for the 'node.perf' category</span>
 <span class="s0">*</span>
 <span class="s0">* // do work</span>
 <span class="s0">*</span>
 <span class="s0">* tracing.disable();  // Disable trace event capture for the 'node.perf' category</span>
 <span class="s0">* ```</span>
 <span class="s0">*</span>
 <span class="s0">* Running Node.js with tracing enabled will produce log files that can be opened</span>
 <span class="s0">* in the [`chrome://tracing`](https://www.chromium.org/developers/how-tos/trace-event-profiling-tool) tab of Chrome.</span>
 <span class="s0">*</span>
 <span class="s0">* The logging file is by default called `node_trace.${rotation}.log`, where`${rotation}` is an incrementing log-rotation id. The filepath pattern can</span>
 <span class="s0">* be specified with `--trace-event-file-pattern` that accepts a template</span>
 <span class="s0">* string that supports `${rotation}` and `${pid}`:</span>
 <span class="s0">*</span>
 <span class="s0">* ```bash</span>
 <span class="s0">* node --trace-event-categories v8 --trace-event-file-pattern '${pid}-${rotation}.log' server.js</span>
 <span class="s0">* ```</span>
 <span class="s0">*</span>
 <span class="s0">* To guarantee that the log file is properly generated after signal events like`SIGINT`, `SIGTERM`, or `SIGBREAK`, make sure to have the appropriate handlers</span>
 <span class="s0">* in your code, such as:</span>
 <span class="s0">*</span>
 <span class="s0">* ```js</span>
 <span class="s0">* process.on('SIGINT', function onSigint() {</span>
 <span class="s0">*   console.info('Received SIGINT.');</span>
 <span class="s0">*   process.exit(130);  // Or applicable exit code depending on OS and signal</span>
 <span class="s0">* });</span>
 <span class="s0">* ```</span>
 <span class="s0">*</span>
 <span class="s0">* The tracing system uses the same time source</span>
 <span class="s0">* as the one used by `process.hrtime()`.</span>
 <span class="s0">* However the trace-event timestamps are expressed in microseconds,</span>
 <span class="s0">* unlike `process.hrtime()` which returns nanoseconds.</span>
 <span class="s0">*</span>
 <span class="s0">* The features from this module are not available in `Worker` threads.</span>
 <span class="s0">* </span><span class="s1">@experimental</span>
 <span class="s0">* </span><span class="s1">@see </span><span class="s0">[source](https://github.com/nodejs/node/blob/v20.2.0/lib/trace_events.js)</span>
 <span class="s0">*/</span>
<span class="s2">declare module </span><span class="s3">&quot;trace_events&quot; </span><span class="s4">{</span>
    <span class="s0">/**</span>
     <span class="s0">* The `Tracing` object is used to enable or disable tracing for sets of</span>
     <span class="s0">* categories. Instances are created using the</span>
     <span class="s0">* `trace_events.createTracing()` method.</span>
     <span class="s0">*</span>
     <span class="s0">* When created, the `Tracing` object is disabled. Calling the</span>
     <span class="s0">* `tracing.enable()` method adds the categories to the set of enabled trace</span>
     <span class="s0">* event categories. Calling `tracing.disable()` will remove the categories</span>
     <span class="s0">* from the set of enabled trace event categories.</span>
     <span class="s0">*/</span>
    <span class="s5">interface </span><span class="s2">Tracing </span><span class="s4">{</span>
        <span class="s0">/**</span>
         <span class="s0">* A comma-separated list of the trace event categories covered by this</span>
         <span class="s0">* `Tracing` object.</span>
         <span class="s0">*/</span>
        <span class="s2">readonly categories</span><span class="s4">: </span><span class="s2">string</span><span class="s4">;</span>
        <span class="s0">/**</span>
         <span class="s0">* Disables this `Tracing` object.</span>
         <span class="s0">*</span>
         <span class="s0">* Only trace event categories _not_ covered by other enabled `Tracing`</span>
         <span class="s0">* objects and _not_ specified by the `--trace-event-categories` flag</span>
         <span class="s0">* will be disabled.</span>
         <span class="s0">*/</span>
        <span class="s2">disable</span><span class="s4">(): </span><span class="s5">void</span><span class="s4">;</span>
        <span class="s0">/**</span>
         <span class="s0">* Enables this `Tracing` object for the set of categories covered by</span>
         <span class="s0">* the `Tracing` object.</span>
         <span class="s0">*/</span>
        <span class="s2">enable</span><span class="s4">(): </span><span class="s5">void</span><span class="s4">;</span>
        <span class="s0">/**</span>
         <span class="s0">* `true` only if the `Tracing` object has been enabled.</span>
         <span class="s0">*/</span>
        <span class="s2">readonly enabled</span><span class="s4">: </span><span class="s2">boolean</span><span class="s4">;</span>
    <span class="s4">}</span>
    <span class="s5">interface </span><span class="s2">CreateTracingOptions </span><span class="s4">{</span>
        <span class="s0">/**</span>
         <span class="s0">* An array of trace category names. Values included in the array are</span>
         <span class="s0">* coerced to a string when possible. An error will be thrown if the</span>
         <span class="s0">* value cannot be coerced.</span>
         <span class="s0">*/</span>
        <span class="s2">categories</span><span class="s4">: </span><span class="s2">string</span><span class="s4">[];</span>
    <span class="s4">}</span>
    <span class="s0">/**</span>
     <span class="s0">* Creates and returns a `Tracing` object for the given set of `categories`.</span>
     <span class="s0">*</span>
     <span class="s0">* ```js</span>
     <span class="s0">* const trace_events = require('node:trace_events');</span>
     <span class="s0">* const categories = ['node.perf', 'node.async_hooks'];</span>
     <span class="s0">* const tracing = trace_events.createTracing({ categories });</span>
     <span class="s0">* tracing.enable();</span>
     <span class="s0">* // do stuff</span>
     <span class="s0">* tracing.disable();</span>
     <span class="s0">* ```</span>
     <span class="s0">* </span><span class="s1">@since </span><span class="s0">v10.0.0</span>
     <span class="s0">* </span><span class="s1">@return </span><span class="s0">.</span>
     <span class="s0">*/</span>
    <span class="s5">function </span><span class="s2">createTracing</span><span class="s4">(</span><span class="s2">options</span><span class="s4">: </span><span class="s2">CreateTracingOptions</span><span class="s4">): </span><span class="s2">Tracing</span><span class="s4">;</span>
    <span class="s0">/**</span>
     <span class="s0">* Returns a comma-separated list of all currently-enabled trace event</span>
     <span class="s0">* categories. The current set of enabled trace event categories is determined</span>
     <span class="s0">* by the _union_ of all currently-enabled `Tracing` objects and any categories</span>
     <span class="s0">* enabled using the `--trace-event-categories` flag.</span>
     <span class="s0">*</span>
     <span class="s0">* Given the file `test.js` below, the command`node --trace-event-categories node.perf test.js` will print`'node.async_hooks,node.perf'` to the console.</span>
     <span class="s0">*</span>
     <span class="s0">* ```js</span>
     <span class="s0">* const trace_events = require('node:trace_events');</span>
     <span class="s0">* const t1 = trace_events.createTracing({ categories: ['node.async_hooks'] });</span>
     <span class="s0">* const t2 = trace_events.createTracing({ categories: ['node.perf'] });</span>
     <span class="s0">* const t3 = trace_events.createTracing({ categories: ['v8'] });</span>
     <span class="s0">*</span>
     <span class="s0">* t1.enable();</span>
     <span class="s0">* t2.enable();</span>
     <span class="s0">*</span>
     <span class="s0">* console.log(trace_events.getEnabledCategories());</span>
     <span class="s0">* ```</span>
     <span class="s0">* </span><span class="s1">@since </span><span class="s0">v10.0.0</span>
     <span class="s0">*/</span>
    <span class="s5">function </span><span class="s2">getEnabledCategories</span><span class="s4">(): </span><span class="s2">string </span><span class="s4">| </span><span class="s2">undefined</span><span class="s4">;</span>
<span class="s4">}</span>
<span class="s2">declare module </span><span class="s3">&quot;node:trace_events&quot; </span><span class="s4">{</span>
    <span class="s5">export </span><span class="s4">* </span><span class="s2">from </span><span class="s3">&quot;trace_events&quot;</span><span class="s4">;</span>
<span class="s4">}</span>
</pre>
</body>
</html>