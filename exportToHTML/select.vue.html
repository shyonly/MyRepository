<html>
<head>
<title>select.vue</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #d5b778;}
.s1 { color: #bcbec4;}
.s2 { color: #bababa;}
.s3 { color: #6aab73;}
.s4 { color: #2aacb8;}
.s5 { color: #cf8e6d;}
.s6 { color: #5f826b; font-style: italic;}
.s7 { color: #67a37c; font-style: italic;}
.s8 { color: #7a7e85;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
select.vue</font>
</center></td></tr></table>
<pre><span class="s0">&lt;template&gt;</span>
  <span class="s0">&lt;div</span>
    <span class="s2">class</span><span class="s3">=&quot;el-select&quot;</span>
    <span class="s2">:class</span><span class="s3">=&quot;</span><span class="s1">[selectSize ? </span><span class="s3">'el-select--' </span><span class="s1">+ selectSize : </span><span class="s3">''</span><span class="s1">]</span><span class="s3">&quot;</span>
    <span class="s2">@click.stop</span><span class="s3">=&quot;</span><span class="s1">toggleMenu</span><span class="s3">&quot;</span>
    <span class="s2">v-clickoutside</span><span class="s3">=&quot;</span><span class="s1">handleClose</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
    <span class="s0">&lt;div</span>
      <span class="s2">class</span><span class="s3">=&quot;el-select__tags&quot;</span>
      <span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">multiple</span><span class="s3">&quot;</span>
      <span class="s2">ref</span><span class="s3">=&quot;tags&quot;</span>
      <span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">{ </span><span class="s3">'max-width'</span><span class="s1">: inputWidth - </span><span class="s4">32 </span><span class="s1">+ </span><span class="s3">'px'</span><span class="s1">, width: </span><span class="s3">'100%' </span><span class="s1">}</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
      <span class="s0">&lt;span </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">collapseTags &amp;&amp; selected.length</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;el-tag</span>
          <span class="s2">:closable</span><span class="s3">=&quot;</span><span class="s1">!selectDisabled</span><span class="s3">&quot;</span>
          <span class="s2">:size</span><span class="s3">=&quot;</span><span class="s1">collapseTagSize</span><span class="s3">&quot;</span>
          <span class="s2">:hit</span><span class="s3">=&quot;</span><span class="s1">selected[</span><span class="s4">0</span><span class="s1">].hitState</span><span class="s3">&quot;</span>
          <span class="s2">type</span><span class="s3">=&quot;info&quot;</span>
          <span class="s2">@close</span><span class="s3">=&quot;</span><span class="s1">deleteTag($event, selected[</span><span class="s4">0</span><span class="s1">])</span><span class="s3">&quot;</span>
          <span class="s2">disable-transitions</span><span class="s0">&gt;</span>
          <span class="s0">&lt;span </span><span class="s2">class</span><span class="s3">=&quot;el-select__tags-text&quot;</span><span class="s0">&gt;</span><span class="s1">{{ selected[0].currentLabel }}</span><span class="s0">&lt;/span&gt;</span>
        <span class="s0">&lt;/el-tag&gt;</span>
        <span class="s0">&lt;el-tag</span>
          <span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">selected.length &gt; </span><span class="s4">1</span><span class="s3">&quot;</span>
          <span class="s2">:closable</span><span class="s3">=&quot;</span><span class="s5">false</span><span class="s3">&quot;</span>
          <span class="s2">:size</span><span class="s3">=&quot;</span><span class="s1">collapseTagSize</span><span class="s3">&quot;</span>
          <span class="s2">type</span><span class="s3">=&quot;info&quot;</span>
          <span class="s2">disable-transitions</span><span class="s0">&gt;</span>
          <span class="s0">&lt;span </span><span class="s2">class</span><span class="s3">=&quot;el-select__tags-text&quot;</span><span class="s0">&gt;</span><span class="s1">+ {{ selected.length - 1 }}</span><span class="s0">&lt;/span&gt;</span>
        <span class="s0">&lt;/el-tag&gt;</span>
      <span class="s0">&lt;/span&gt;</span>
      <span class="s0">&lt;transition-group </span><span class="s2">@after-leave</span><span class="s3">=&quot;</span><span class="s1">resetInputHeight</span><span class="s3">&quot; </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">!collapseTags</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;el-tag</span>
          <span class="s2">v-for</span><span class="s3">=&quot;</span><span class="s1">item </span><span class="s5">in </span><span class="s1">selected</span><span class="s3">&quot;</span>
          <span class="s2">:key</span><span class="s3">=&quot;</span><span class="s1">getValueKey(item)</span><span class="s3">&quot;</span>
          <span class="s2">:closable</span><span class="s3">=&quot;</span><span class="s1">!selectDisabled</span><span class="s3">&quot;</span>
          <span class="s2">:size</span><span class="s3">=&quot;</span><span class="s1">collapseTagSize</span><span class="s3">&quot;</span>
          <span class="s2">:hit</span><span class="s3">=&quot;</span><span class="s1">item.hitState</span><span class="s3">&quot;</span>
          <span class="s2">type</span><span class="s3">=&quot;info&quot;</span>
          <span class="s2">@close</span><span class="s3">=&quot;</span><span class="s1">deleteTag($event, item)</span><span class="s3">&quot;</span>
          <span class="s2">disable-transitions</span><span class="s0">&gt;</span>
          <span class="s0">&lt;span </span><span class="s2">class</span><span class="s3">=&quot;el-select__tags-text&quot;</span><span class="s0">&gt;</span><span class="s1">{{ item.currentLabel }}</span><span class="s0">&lt;/span&gt;</span>
        <span class="s0">&lt;/el-tag&gt;</span>
      <span class="s0">&lt;/transition-group&gt;</span>

      <span class="s0">&lt;input</span>
        <span class="s2">type</span><span class="s3">=&quot;text&quot;</span>
        <span class="s2">class</span><span class="s3">=&quot;el-select__input&quot;</span>
        <span class="s2">:class</span><span class="s3">=&quot;</span><span class="s1">[selectSize ? </span><span class="s3">`is-</span><span class="s1">${ selectSize }</span><span class="s3">` </span><span class="s1">: </span><span class="s3">''</span><span class="s1">]</span><span class="s3">&quot;</span>
        <span class="s2">:disabled</span><span class="s3">=&quot;</span><span class="s1">selectDisabled</span><span class="s3">&quot;</span>
        <span class="s2">:autocomplete</span><span class="s3">=&quot;</span><span class="s1">autoComplete || autocomplete</span><span class="s3">&quot;</span>
        <span class="s2">@focus</span><span class="s3">=&quot;</span><span class="s1">handleFocus</span><span class="s3">&quot;</span>
        <span class="s2">@blur</span><span class="s3">=&quot;</span><span class="s1">softFocus = </span><span class="s5">false</span><span class="s3">&quot;</span>
        <span class="s2">@keyup</span><span class="s3">=&quot;</span><span class="s1">managePlaceholder</span><span class="s3">&quot;</span>
        <span class="s2">@keydown</span><span class="s3">=&quot;</span><span class="s1">resetInputState</span><span class="s3">&quot;</span>
        <span class="s2">@keydown.down.prevent</span><span class="s3">=&quot;</span><span class="s1">handleNavigate(</span><span class="s3">'next'</span><span class="s1">)</span><span class="s3">&quot;</span>
        <span class="s2">@keydown.up.prevent</span><span class="s3">=&quot;</span><span class="s1">handleNavigate(</span><span class="s3">'prev'</span><span class="s1">)</span><span class="s3">&quot;</span>
        <span class="s2">@keydown.enter.prevent</span><span class="s3">=&quot;</span><span class="s1">selectOption</span><span class="s3">&quot;</span>
        <span class="s2">@keydown.esc.stop.prevent</span><span class="s3">=&quot;</span><span class="s1">visible = </span><span class="s5">false</span><span class="s3">&quot;</span>
        <span class="s2">@keydown.delete</span><span class="s3">=&quot;</span><span class="s1">deletePrevTag</span><span class="s3">&quot;</span>
        <span class="s2">@keydown.tab</span><span class="s3">=&quot;</span><span class="s1">visible = </span><span class="s5">false</span><span class="s3">&quot;</span>
        <span class="s2">@compositionstart</span><span class="s3">=&quot;</span><span class="s1">handleComposition</span><span class="s3">&quot;</span>
        <span class="s2">@compositionupdate</span><span class="s3">=&quot;</span><span class="s1">handleComposition</span><span class="s3">&quot;</span>
        <span class="s2">@compositionend</span><span class="s3">=&quot;</span><span class="s1">handleComposition</span><span class="s3">&quot;</span>
        <span class="s2">v-model</span><span class="s3">=&quot;</span><span class="s1">query</span><span class="s3">&quot;</span>
        <span class="s2">@input</span><span class="s3">=&quot;</span><span class="s1">debouncedQueryChange</span><span class="s3">&quot;</span>
        <span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">filterable</span><span class="s3">&quot;</span>
        <span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">{ </span><span class="s3">'flex-grow'</span><span class="s1">: </span><span class="s3">'1'</span><span class="s1">, width: inputLength / (inputWidth - </span><span class="s4">32</span><span class="s1">) + </span><span class="s3">'%'</span><span class="s1">, </span><span class="s3">'max-width'</span><span class="s1">: inputWidth - </span><span class="s4">42 </span><span class="s1">+ </span><span class="s3">'px' </span><span class="s1">}</span><span class="s3">&quot;</span>
        <span class="s2">ref</span><span class="s3">=&quot;input&quot;</span><span class="s0">&gt;</span>
    <span class="s0">&lt;/div&gt;</span>
    <span class="s0">&lt;el-input</span>
      <span class="s2">ref</span><span class="s3">=&quot;reference&quot;</span>
      <span class="s2">v-model</span><span class="s3">=&quot;</span><span class="s1">selectedLabel</span><span class="s3">&quot;</span>
      <span class="s2">type</span><span class="s3">=&quot;text&quot;</span>
      <span class="s2">:placeholder</span><span class="s3">=&quot;</span><span class="s1">currentPlaceholder</span><span class="s3">&quot;</span>
      <span class="s2">:name</span><span class="s3">=&quot;</span><span class="s1">name</span><span class="s3">&quot;</span>
      <span class="s2">:id</span><span class="s3">=&quot;</span><span class="s1">id</span><span class="s3">&quot;</span>
      <span class="s2">:autocomplete</span><span class="s3">=&quot;</span><span class="s1">autoComplete || autocomplete</span><span class="s3">&quot;</span>
      <span class="s2">:size</span><span class="s3">=&quot;</span><span class="s1">selectSize</span><span class="s3">&quot;</span>
      <span class="s2">:disabled</span><span class="s3">=&quot;</span><span class="s1">selectDisabled</span><span class="s3">&quot;</span>
      <span class="s2">:readonly</span><span class="s3">=&quot;</span><span class="s1">readonly</span><span class="s3">&quot;</span>
      <span class="s2">:validate-event</span><span class="s3">=&quot;</span><span class="s5">false</span><span class="s3">&quot;</span>
      <span class="s2">:class</span><span class="s3">=&quot;</span><span class="s1">{ </span><span class="s3">'is-focus'</span><span class="s1">: visible }</span><span class="s3">&quot;</span>
      <span class="s2">:tabindex</span><span class="s3">=&quot;</span><span class="s1">(multiple &amp;&amp; filterable) ? </span><span class="s3">'-1' </span><span class="s1">: </span><span class="s5">null</span><span class="s3">&quot;</span>
      <span class="s2">@focus</span><span class="s3">=&quot;</span><span class="s1">handleFocus</span><span class="s3">&quot;</span>
      <span class="s2">@blur</span><span class="s3">=&quot;</span><span class="s1">handleBlur</span><span class="s3">&quot;</span>
      <span class="s2">@input</span><span class="s3">=&quot;</span><span class="s1">debouncedOnInputChange</span><span class="s3">&quot;</span>
      <span class="s2">@keydown.native.down.stop.prevent</span><span class="s3">=&quot;</span><span class="s1">handleNavigate(</span><span class="s3">'next'</span><span class="s1">)</span><span class="s3">&quot;</span>
      <span class="s2">@keydown.native.up.stop.prevent</span><span class="s3">=&quot;</span><span class="s1">handleNavigate(</span><span class="s3">'prev'</span><span class="s1">)</span><span class="s3">&quot;</span>
      <span class="s2">@keydown.native.enter.prevent</span><span class="s3">=&quot;</span><span class="s1">selectOption</span><span class="s3">&quot;</span>
      <span class="s2">@keydown.native.esc.stop.prevent</span><span class="s3">=&quot;</span><span class="s1">visible = </span><span class="s5">false</span><span class="s3">&quot;</span>
      <span class="s2">@keydown.native.tab</span><span class="s3">=&quot;</span><span class="s1">visible = </span><span class="s5">false</span><span class="s3">&quot;</span>
      <span class="s2">@compositionstart</span><span class="s3">=&quot;</span><span class="s1">handleComposition</span><span class="s3">&quot;</span>
      <span class="s2">@compositionupdate</span><span class="s3">=&quot;</span><span class="s1">handleComposition</span><span class="s3">&quot;</span>
      <span class="s2">@compositionend</span><span class="s3">=&quot;</span><span class="s1">handleComposition</span><span class="s3">&quot;</span>
      <span class="s2">@mouseenter.native</span><span class="s3">=&quot;</span><span class="s1">inputHovering = </span><span class="s5">true</span><span class="s3">&quot;</span>
      <span class="s2">@mouseleave.native</span><span class="s3">=&quot;</span><span class="s1">inputHovering = </span><span class="s5">false</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
      <span class="s0">&lt;template </span><span class="s2">slot</span><span class="s3">=&quot;prefix&quot; </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">$slots.prefix</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;slot </span><span class="s2">name</span><span class="s3">=&quot;prefix&quot;</span><span class="s0">&gt;&lt;/slot&gt;</span>
      <span class="s0">&lt;/template&gt;</span>
      <span class="s0">&lt;template </span><span class="s2">slot</span><span class="s3">=&quot;suffix&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;i </span><span class="s2">v-show</span><span class="s3">=&quot;</span><span class="s1">!showClose</span><span class="s3">&quot; </span><span class="s2">:class</span><span class="s3">=&quot;</span><span class="s1">[</span><span class="s3">'el-select__caret'</span><span class="s1">, </span><span class="s3">'el-input__icon'</span><span class="s1">, </span><span class="s3">'el-icon-' </span><span class="s1">+ iconClass]</span><span class="s3">&quot;</span><span class="s0">&gt;&lt;/i&gt;</span>
        <span class="s0">&lt;i </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">showClose</span><span class="s3">&quot; </span><span class="s2">class</span><span class="s3">=&quot;el-select__caret el-input__icon el-icon-circle-close&quot; </span><span class="s2">@click</span><span class="s3">=&quot;</span><span class="s1">handleClearClick</span><span class="s3">&quot;</span><span class="s0">&gt;&lt;/i&gt;</span>
      <span class="s0">&lt;/template&gt;</span>
    <span class="s0">&lt;/el-input&gt;</span>
    <span class="s0">&lt;transition</span>
      <span class="s2">name</span><span class="s3">=&quot;el-zoom-in-top&quot;</span>
      <span class="s2">@before-enter</span><span class="s3">=&quot;</span><span class="s1">handleMenuEnter</span><span class="s3">&quot;</span>
      <span class="s2">@after-leave</span><span class="s3">=&quot;</span><span class="s1">doDestroy</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
      <span class="s0">&lt;el-select-menu</span>
        <span class="s2">ref</span><span class="s3">=&quot;popper&quot;</span>
        <span class="s2">:append-to-body</span><span class="s3">=&quot;</span><span class="s1">popperAppendToBody</span><span class="s3">&quot;</span>
        <span class="s2">v-show</span><span class="s3">=&quot;</span><span class="s1">visible &amp;&amp; emptyText !== </span><span class="s5">false</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;el-scrollbar</span>
          <span class="s2">tag</span><span class="s3">=&quot;ul&quot;</span>
          <span class="s2">wrap-class</span><span class="s3">=&quot;el-select-dropdown__wrap&quot;</span>
          <span class="s2">view-class</span><span class="s3">=&quot;el-select-dropdown__list&quot;</span>
          <span class="s2">ref</span><span class="s3">=&quot;scrollbar&quot;</span>
          <span class="s2">:class</span><span class="s3">=&quot;</span><span class="s1">{ </span><span class="s3">'is-empty'</span><span class="s1">: !allowCreate &amp;&amp; query &amp;&amp; filteredOptionsCount === </span><span class="s4">0 </span><span class="s1">}</span><span class="s3">&quot;</span>
          <span class="s2">v-show</span><span class="s3">=&quot;</span><span class="s1">options.length &gt; </span><span class="s4">0 </span><span class="s1">&amp;&amp; !loading</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
          <span class="s0">&lt;el-option</span>
            <span class="s2">:value</span><span class="s3">=&quot;</span><span class="s1">query</span><span class="s3">&quot;</span>
            <span class="s2">created</span>
            <span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">showNewOption</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
          <span class="s0">&lt;/el-option&gt;</span>
          <span class="s0">&lt;slot&gt;&lt;/slot&gt;</span>
        <span class="s0">&lt;/el-scrollbar&gt;</span>
        <span class="s0">&lt;template </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">emptyText &amp;&amp; (!allowCreate || loading || (allowCreate &amp;&amp; options.length === </span><span class="s4">0 </span><span class="s1">))</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
          <span class="s0">&lt;slot </span><span class="s2">name</span><span class="s3">=&quot;empty&quot; </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">$slots.empty</span><span class="s3">&quot;</span><span class="s0">&gt;&lt;/slot&gt;</span>
          <span class="s0">&lt;p </span><span class="s2">class</span><span class="s3">=&quot;el-select-dropdown__empty&quot; </span><span class="s2">v-else</span><span class="s0">&gt;</span>
            <span class="s1">{{ emptyText }}</span>
          <span class="s0">&lt;/p&gt;</span>
        <span class="s0">&lt;/template&gt;</span>
      <span class="s0">&lt;/el-select-menu&gt;</span>
    <span class="s0">&lt;/transition&gt;</span>
  <span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/template&gt;</span>

<span class="s0">&lt;script </span><span class="s2">type</span><span class="s3">=&quot;text/babel&quot;</span><span class="s0">&gt;</span>
  <span class="s5">import </span><span class="s1">Emitter from </span><span class="s3">'element-ui/src/mixins/emitter'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">Focus from </span><span class="s3">'element-ui/src/mixins/focus'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">Locale from </span><span class="s3">'element-ui/src/mixins/locale'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">ElInput from </span><span class="s3">'element-ui/packages/input'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">ElSelectMenu from </span><span class="s3">'./select-dropdown.vue'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">ElOption from </span><span class="s3">'./option.vue'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">ElTag from </span><span class="s3">'element-ui/packages/tag'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">ElScrollbar from </span><span class="s3">'element-ui/packages/scrollbar'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">debounce from </span><span class="s3">'throttle-debounce/debounce'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">Clickoutside from </span><span class="s3">'element-ui/src/utils/clickoutside'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">{ addResizeListener, removeResizeListener } from </span><span class="s3">'element-ui/src/utils/resize-event'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">scrollIntoView from </span><span class="s3">'element-ui/src/utils/scroll-into-view'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">{ getValueByPath, valueEquals, isIE, isEdge } from </span><span class="s3">'element-ui/src/utils/util'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">NavigationMixin from </span><span class="s3">'./navigation-mixin'</span><span class="s1">;</span>
  <span class="s5">import </span><span class="s1">{ isKorean } from </span><span class="s3">'element-ui/src/utils/shared'</span><span class="s1">;</span>

  <span class="s5">export default </span><span class="s1">{</span>
    <span class="s1">mixins: [Emitter, Locale, Focus(</span><span class="s3">'reference'</span><span class="s1">), NavigationMixin],</span>

    <span class="s1">name: </span><span class="s3">'ElSelect'</span><span class="s1">,</span>

    <span class="s1">componentName: </span><span class="s3">'ElSelect'</span><span class="s1">,</span>

    <span class="s1">inject: {</span>
      <span class="s1">elForm: {</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">''</span>
      <span class="s1">},</span>

      <span class="s1">elFormItem: {</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">''</span>
      <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s1">provide() {</span>
      <span class="s5">return </span><span class="s1">{</span>
        <span class="s3">'select'</span><span class="s1">: </span><span class="s5">this</span>
      <span class="s1">};</span>
    <span class="s1">},</span>

    <span class="s1">computed: {</span>
      <span class="s1">_elFormItemSize() {</span>
        <span class="s5">return </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.elFormItem || {}).elFormItemSize;</span>
      <span class="s1">},</span>

      <span class="s1">readonly() {</span>
        <span class="s5">return </span><span class="s1">!</span><span class="s5">this</span><span class="s1">.filterable || </span><span class="s5">this</span><span class="s1">.multiple || (!isIE() &amp;&amp; !isEdge() &amp;&amp; !</span><span class="s5">this</span><span class="s1">.visible);</span>
      <span class="s1">},</span>

      <span class="s1">showClose() {</span>
        <span class="s5">let </span><span class="s1">hasValue = </span><span class="s5">this</span><span class="s1">.multiple</span>
          <span class="s1">? Array.isArray(</span><span class="s5">this</span><span class="s1">.value) &amp;&amp; </span><span class="s5">this</span><span class="s1">.value.length &gt; </span><span class="s4">0</span>
          <span class="s1">: </span><span class="s5">this</span><span class="s1">.value !== undefined &amp;&amp; </span><span class="s5">this</span><span class="s1">.value !== </span><span class="s5">null </span><span class="s1">&amp;&amp; </span><span class="s5">this</span><span class="s1">.value !== </span><span class="s3">''</span><span class="s1">;</span>
        <span class="s5">let </span><span class="s1">criteria = </span><span class="s5">this</span><span class="s1">.clearable &amp;&amp;</span>
          <span class="s1">!</span><span class="s5">this</span><span class="s1">.selectDisabled &amp;&amp;</span>
          <span class="s5">this</span><span class="s1">.inputHovering &amp;&amp;</span>
          <span class="s1">hasValue;</span>
        <span class="s5">return </span><span class="s1">criteria;</span>
      <span class="s1">},</span>

      <span class="s1">iconClass() {</span>
        <span class="s5">return this</span><span class="s1">.remote &amp;&amp; </span><span class="s5">this</span><span class="s1">.filterable ? </span><span class="s3">'' </span><span class="s1">: (</span><span class="s5">this</span><span class="s1">.visible ? </span><span class="s3">'arrow-up is-reverse' </span><span class="s1">: </span><span class="s3">'arrow-up'</span><span class="s1">);</span>
      <span class="s1">},</span>

      <span class="s1">debounce() {</span>
        <span class="s5">return this</span><span class="s1">.remote ? </span><span class="s4">300 </span><span class="s1">: </span><span class="s4">0</span><span class="s1">;</span>
      <span class="s1">},</span>

      <span class="s1">emptyText() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.loading) {</span>
          <span class="s5">return this</span><span class="s1">.loadingText || </span><span class="s5">this</span><span class="s1">.t(</span><span class="s3">'el.select.loading'</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.remote &amp;&amp; </span><span class="s5">this</span><span class="s1">.query === </span><span class="s3">'' </span><span class="s1">&amp;&amp; </span><span class="s5">this</span><span class="s1">.options.length === </span><span class="s4">0</span><span class="s1">) </span><span class="s5">return false</span><span class="s1">;</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable &amp;&amp; </span><span class="s5">this</span><span class="s1">.query &amp;&amp; </span><span class="s5">this</span><span class="s1">.options.length &gt; </span><span class="s4">0 </span><span class="s1">&amp;&amp; </span><span class="s5">this</span><span class="s1">.filteredOptionsCount === </span><span class="s4">0</span><span class="s1">) {</span>
            <span class="s5">return this</span><span class="s1">.noMatchText || </span><span class="s5">this</span><span class="s1">.t(</span><span class="s3">'el.select.noMatch'</span><span class="s1">);</span>
          <span class="s1">}</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.options.length === </span><span class="s4">0</span><span class="s1">) {</span>
            <span class="s5">return this</span><span class="s1">.noDataText || </span><span class="s5">this</span><span class="s1">.t(</span><span class="s3">'el.select.noData'</span><span class="s1">);</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">return null</span><span class="s1">;</span>
      <span class="s1">},</span>

      <span class="s1">showNewOption() {</span>
        <span class="s5">let </span><span class="s1">hasExistingOption = </span><span class="s5">this</span><span class="s1">.options.filter(option =&gt; !option.created)</span>
          <span class="s1">.some(option =&gt; option.currentLabel === </span><span class="s5">this</span><span class="s1">.query);</span>
        <span class="s5">return this</span><span class="s1">.filterable &amp;&amp; </span><span class="s5">this</span><span class="s1">.allowCreate &amp;&amp; </span><span class="s5">this</span><span class="s1">.query !== </span><span class="s3">'' </span><span class="s1">&amp;&amp; !hasExistingOption;</span>
      <span class="s1">},</span>

      <span class="s1">selectSize() {</span>
        <span class="s5">return this</span><span class="s1">.size || </span><span class="s5">this</span><span class="s1">._elFormItemSize || (</span><span class="s5">this</span><span class="s1">.$ELEMENT || {}).size;</span>
      <span class="s1">},</span>

      <span class="s1">selectDisabled() {</span>
        <span class="s5">return this</span><span class="s1">.disabled || (</span><span class="s5">this</span><span class="s1">.elForm || {}).disabled;</span>
      <span class="s1">},</span>

      <span class="s1">collapseTagSize() {</span>
        <span class="s5">return </span><span class="s1">[</span><span class="s3">'small'</span><span class="s1">, </span><span class="s3">'mini'</span><span class="s1">].indexOf(</span><span class="s5">this</span><span class="s1">.selectSize) &gt; -</span><span class="s4">1</span>
          <span class="s1">? </span><span class="s3">'mini'</span>
          <span class="s1">: </span><span class="s3">'small'</span><span class="s1">;</span>
      <span class="s1">},</span>
      <span class="s1">propPlaceholder() {</span>
        <span class="s5">return typeof this</span><span class="s1">.placeholder !== </span><span class="s3">'undefined' </span><span class="s1">? </span><span class="s5">this</span><span class="s1">.placeholder : </span><span class="s5">this</span><span class="s1">.t(</span><span class="s3">'el.select.placeholder'</span><span class="s1">);</span>
      <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s1">components: {</span>
      <span class="s1">ElInput,</span>
      <span class="s1">ElSelectMenu,</span>
      <span class="s1">ElOption,</span>
      <span class="s1">ElTag,</span>
      <span class="s1">ElScrollbar</span>
    <span class="s1">},</span>

    <span class="s1">directives: { Clickoutside },</span>

    <span class="s1">props: {</span>
      <span class="s1">name: String,</span>
      <span class="s1">id: String,</span>
      <span class="s1">value: {</span>
        <span class="s1">required: </span><span class="s5">true</span>
      <span class="s1">},</span>
      <span class="s1">autocomplete: {</span>
        <span class="s1">type: String,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">'off'</span>
      <span class="s1">},</span>
      <span class="s6">/** </span><span class="s7">@Deprecated </span><span class="s6">in next major version */</span>
      <span class="s1">autoComplete: {</span>
        <span class="s1">type: String,</span>
        <span class="s1">validator(val) {</span>
          <span class="s1">process.env.NODE_ENV !== </span><span class="s3">'production' </span><span class="s1">&amp;&amp;</span>
            <span class="s1">console.warn(</span><span class="s3">'[Element Warn][Select]</span><span class="s5">\'</span><span class="s3">auto-complete</span><span class="s5">\' </span><span class="s3">property will be deprecated in next major version. please use </span><span class="s5">\'</span><span class="s3">autocomplete</span><span class="s5">\' </span><span class="s3">instead.'</span><span class="s1">);</span>
          <span class="s5">return true</span><span class="s1">;</span>
        <span class="s1">}</span>
      <span class="s1">},</span>
      <span class="s1">automaticDropdown: Boolean,</span>
      <span class="s1">size: String,</span>
      <span class="s1">disabled: Boolean,</span>
      <span class="s1">clearable: Boolean,</span>
      <span class="s1">filterable: Boolean,</span>
      <span class="s1">allowCreate: Boolean,</span>
      <span class="s1">loading: Boolean,</span>
      <span class="s1">popperClass: String,</span>
      <span class="s1">remote: Boolean,</span>
      <span class="s1">loadingText: String,</span>
      <span class="s1">noMatchText: String,</span>
      <span class="s1">noDataText: String,</span>
      <span class="s1">remoteMethod: Function,</span>
      <span class="s1">filterMethod: Function,</span>
      <span class="s1">multiple: Boolean,</span>
      <span class="s1">multipleLimit: {</span>
        <span class="s1">type: Number,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s4">0</span>
      <span class="s1">},</span>
      <span class="s1">placeholder: {</span>
        <span class="s1">type: String,</span>
        <span class="s1">required: </span><span class="s5">false</span>
      <span class="s1">},</span>
      <span class="s1">defaultFirstOption: Boolean,</span>
      <span class="s1">reserveKeyword: Boolean,</span>
      <span class="s1">valueKey: {</span>
        <span class="s1">type: String,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">'value'</span>
      <span class="s1">},</span>
      <span class="s1">collapseTags: Boolean,</span>
      <span class="s1">popperAppendToBody: {</span>
        <span class="s1">type: Boolean,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s5">true</span>
      <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s1">data() {</span>
      <span class="s5">return </span><span class="s1">{</span>
        <span class="s1">options: [],</span>
        <span class="s1">cachedOptions: [],</span>
        <span class="s1">createdLabel: </span><span class="s5">null</span><span class="s1">,</span>
        <span class="s1">createdSelected: </span><span class="s5">false</span><span class="s1">,</span>
        <span class="s1">selected: </span><span class="s5">this</span><span class="s1">.multiple ? [] : {},</span>
        <span class="s1">inputLength: </span><span class="s4">20</span><span class="s1">,</span>
        <span class="s1">inputWidth: </span><span class="s4">0</span><span class="s1">,</span>
        <span class="s1">initialInputHeight: </span><span class="s4">0</span><span class="s1">,</span>
        <span class="s1">cachedPlaceHolder: </span><span class="s3">''</span><span class="s1">,</span>
        <span class="s1">optionsCount: </span><span class="s4">0</span><span class="s1">,</span>
        <span class="s1">filteredOptionsCount: </span><span class="s4">0</span><span class="s1">,</span>
        <span class="s1">visible: </span><span class="s5">false</span><span class="s1">,</span>
        <span class="s1">softFocus: </span><span class="s5">false</span><span class="s1">,</span>
        <span class="s1">selectedLabel: </span><span class="s3">''</span><span class="s1">,</span>
        <span class="s1">hoverIndex: -</span><span class="s4">1</span><span class="s1">,</span>
        <span class="s1">query: </span><span class="s3">''</span><span class="s1">,</span>
        <span class="s1">previousQuery: </span><span class="s5">null</span><span class="s1">,</span>
        <span class="s1">inputHovering: </span><span class="s5">false</span><span class="s1">,</span>
        <span class="s1">currentPlaceholder: </span><span class="s3">''</span><span class="s1">,</span>
        <span class="s1">menuVisibleOnFocus: </span><span class="s5">false</span><span class="s1">,</span>
        <span class="s1">isOnComposition: </span><span class="s5">false</span><span class="s1">,</span>
        <span class="s1">isSilentBlur: </span><span class="s5">false</span>
      <span class="s1">};</span>
    <span class="s1">},</span>

    <span class="s1">watch: {</span>
      <span class="s1">selectDisabled() {</span>
        <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
          <span class="s5">this</span><span class="s1">.resetInputHeight();</span>
        <span class="s1">});</span>
      <span class="s1">},</span>

      <span class="s1">propPlaceholder(val) {</span>
        <span class="s5">this</span><span class="s1">.cachedPlaceHolder = </span><span class="s5">this</span><span class="s1">.currentPlaceholder = val;</span>
      <span class="s1">},</span>

      <span class="s1">value(val, oldVal) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple) {</span>
          <span class="s5">this</span><span class="s1">.resetInputHeight();</span>
          <span class="s5">if </span><span class="s1">((val &amp;&amp; val.length &gt; </span><span class="s4">0</span><span class="s1">) || (</span><span class="s5">this</span><span class="s1">.$refs.input &amp;&amp; </span><span class="s5">this</span><span class="s1">.query !== </span><span class="s3">''</span><span class="s1">)) {</span>
            <span class="s5">this</span><span class="s1">.currentPlaceholder = </span><span class="s3">''</span><span class="s1">;</span>
          <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
            <span class="s5">this</span><span class="s1">.currentPlaceholder = </span><span class="s5">this</span><span class="s1">.cachedPlaceHolder;</span>
          <span class="s1">}</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable &amp;&amp; !</span><span class="s5">this</span><span class="s1">.reserveKeyword) {</span>
            <span class="s5">this</span><span class="s1">.query = </span><span class="s3">''</span><span class="s1">;</span>
            <span class="s5">this</span><span class="s1">.handleQueryChange(</span><span class="s5">this</span><span class="s1">.query);</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">this</span><span class="s1">.setSelected();</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable &amp;&amp; !</span><span class="s5">this</span><span class="s1">.multiple) {</span>
          <span class="s5">this</span><span class="s1">.inputLength = </span><span class="s4">20</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(!valueEquals(val, oldVal)) {</span>
          <span class="s5">this</span><span class="s1">.dispatch(</span><span class="s3">'ElFormItem'</span><span class="s1">, </span><span class="s3">'el.form.change'</span><span class="s1">, val);</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">visible(val) {</span>
        <span class="s5">if </span><span class="s1">(!val) {</span>
          <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElSelectDropdown'</span><span class="s1">, </span><span class="s3">'destroyPopper'</span><span class="s1">);</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.$refs.input) {</span>
            <span class="s5">this</span><span class="s1">.$refs.input.blur();</span>
          <span class="s1">}</span>
          <span class="s5">this</span><span class="s1">.query = </span><span class="s3">''</span><span class="s1">;</span>
          <span class="s5">this</span><span class="s1">.previousQuery = </span><span class="s5">null</span><span class="s1">;</span>
          <span class="s5">this</span><span class="s1">.selectedLabel = </span><span class="s3">''</span><span class="s1">;</span>
          <span class="s5">this</span><span class="s1">.inputLength = </span><span class="s4">20</span><span class="s1">;</span>
          <span class="s5">this</span><span class="s1">.menuVisibleOnFocus = </span><span class="s5">false</span><span class="s1">;</span>
          <span class="s5">this</span><span class="s1">.resetHoverIndex();</span>
          <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.$refs.input &amp;&amp;</span>
              <span class="s5">this</span><span class="s1">.$refs.input.value === </span><span class="s3">'' </span><span class="s1">&amp;&amp;</span>
              <span class="s5">this</span><span class="s1">.selected.length === </span><span class="s4">0</span><span class="s1">) {</span>
              <span class="s5">this</span><span class="s1">.currentPlaceholder = </span><span class="s5">this</span><span class="s1">.cachedPlaceHolder;</span>
            <span class="s1">}</span>
          <span class="s1">});</span>
          <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.multiple) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.selected) {</span>
              <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable &amp;&amp; </span><span class="s5">this</span><span class="s1">.allowCreate &amp;&amp;</span>
                <span class="s5">this</span><span class="s1">.createdSelected &amp;&amp; </span><span class="s5">this</span><span class="s1">.createdLabel) {</span>
                <span class="s5">this</span><span class="s1">.selectedLabel = </span><span class="s5">this</span><span class="s1">.createdLabel;</span>
              <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
                <span class="s5">this</span><span class="s1">.selectedLabel = </span><span class="s5">this</span><span class="s1">.selected.currentLabel;</span>
              <span class="s1">}</span>
              <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable) </span><span class="s5">this</span><span class="s1">.query = </span><span class="s5">this</span><span class="s1">.selectedLabel;</span>
            <span class="s1">}</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable) {</span>
              <span class="s5">this</span><span class="s1">.currentPlaceholder = </span><span class="s5">this</span><span class="s1">.cachedPlaceHolder;</span>
            <span class="s1">}</span>
          <span class="s1">}</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElSelectDropdown'</span><span class="s1">, </span><span class="s3">'updatePopper'</span><span class="s1">);</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable) {</span>
            <span class="s5">this</span><span class="s1">.query = </span><span class="s5">this</span><span class="s1">.remote ? </span><span class="s3">'' </span><span class="s1">: </span><span class="s5">this</span><span class="s1">.selectedLabel;</span>
            <span class="s5">this</span><span class="s1">.handleQueryChange(</span><span class="s5">this</span><span class="s1">.query);</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple) {</span>
              <span class="s5">this</span><span class="s1">.$refs.input.focus();</span>
            <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
              <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.remote) {</span>
                <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElOption'</span><span class="s1">, </span><span class="s3">'queryChange'</span><span class="s1">, </span><span class="s3">''</span><span class="s1">);</span>
                <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElOptionGroup'</span><span class="s1">, </span><span class="s3">'queryChange'</span><span class="s1">);</span>
              <span class="s1">}</span>

              <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.selectedLabel) {</span>
                <span class="s5">this</span><span class="s1">.currentPlaceholder = </span><span class="s5">this</span><span class="s1">.selectedLabel;</span>
                <span class="s5">this</span><span class="s1">.selectedLabel = </span><span class="s3">''</span><span class="s1">;</span>
              <span class="s1">}</span>
            <span class="s1">}</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'visible-change'</span><span class="s1">, val);</span>
      <span class="s1">},</span>

      <span class="s1">options() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.$isServer) </span><span class="s5">return</span><span class="s1">;</span>
        <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
          <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElSelectDropdown'</span><span class="s1">, </span><span class="s3">'updatePopper'</span><span class="s1">);</span>
        <span class="s1">});</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple) {</span>
          <span class="s5">this</span><span class="s1">.resetInputHeight();</span>
        <span class="s1">}</span>
        <span class="s5">let </span><span class="s1">inputs = </span><span class="s5">this</span><span class="s1">.$el.querySelectorAll(</span><span class="s3">'input'</span><span class="s1">);</span>
        <span class="s5">if </span><span class="s1">([].indexOf.call(inputs, document.activeElement) === -</span><span class="s4">1</span><span class="s1">) {</span>
          <span class="s5">this</span><span class="s1">.setSelected();</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.defaultFirstOption &amp;&amp; (</span><span class="s5">this</span><span class="s1">.filterable || </span><span class="s5">this</span><span class="s1">.remote) &amp;&amp; </span><span class="s5">this</span><span class="s1">.filteredOptionsCount) {</span>
          <span class="s5">this</span><span class="s1">.checkDefaultFirstOption();</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s1">methods: {</span>
      <span class="s1">handleNavigate(direction) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.isOnComposition) </span><span class="s5">return</span><span class="s1">;</span>

        <span class="s5">this</span><span class="s1">.navigateOptions(direction);</span>
      <span class="s1">},</span>
      <span class="s1">handleComposition(event) {</span>
        <span class="s5">const </span><span class="s1">text = event.target.value;</span>
        <span class="s5">if </span><span class="s1">(event.type === </span><span class="s3">'compositionend'</span><span class="s1">) {</span>
          <span class="s5">this</span><span class="s1">.isOnComposition = </span><span class="s5">false</span><span class="s1">;</span>
          <span class="s5">this</span><span class="s1">.$nextTick(_ =&gt; </span><span class="s5">this</span><span class="s1">.handleQueryChange(text));</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">const </span><span class="s1">lastCharacter = text[text.length - </span><span class="s4">1</span><span class="s1">] || </span><span class="s3">''</span><span class="s1">;</span>
          <span class="s5">this</span><span class="s1">.isOnComposition = !isKorean(lastCharacter);</span>
        <span class="s1">}</span>
      <span class="s1">},</span>
      <span class="s1">handleQueryChange(val) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.previousQuery === val || </span><span class="s5">this</span><span class="s1">.isOnComposition) </span><span class="s5">return</span><span class="s1">;</span>
        <span class="s5">if </span><span class="s1">(</span>
          <span class="s5">this</span><span class="s1">.previousQuery === </span><span class="s5">null </span><span class="s1">&amp;&amp;</span>
          <span class="s1">(</span><span class="s5">typeof this</span><span class="s1">.filterMethod === </span><span class="s3">'function' </span><span class="s1">|| </span><span class="s5">typeof this</span><span class="s1">.remoteMethod === </span><span class="s3">'function'</span><span class="s1">)</span>
        <span class="s1">) {</span>
          <span class="s5">this</span><span class="s1">.previousQuery = val;</span>
          <span class="s5">return</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s5">this</span><span class="s1">.previousQuery = val;</span>
        <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.visible) </span><span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElSelectDropdown'</span><span class="s1">, </span><span class="s3">'updatePopper'</span><span class="s1">);</span>
        <span class="s1">});</span>
        <span class="s5">this</span><span class="s1">.hoverIndex = -</span><span class="s4">1</span><span class="s1">;</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple &amp;&amp; </span><span class="s5">this</span><span class="s1">.filterable) {</span>
          <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
            <span class="s5">const </span><span class="s1">length = </span><span class="s5">this</span><span class="s1">.$refs.input.value.length * </span><span class="s4">15 </span><span class="s1">+ </span><span class="s4">20</span><span class="s1">;</span>
            <span class="s5">this</span><span class="s1">.inputLength = </span><span class="s5">this</span><span class="s1">.collapseTags ? Math.min(</span><span class="s4">50</span><span class="s1">, length) : length;</span>
            <span class="s5">this</span><span class="s1">.managePlaceholder();</span>
            <span class="s5">this</span><span class="s1">.resetInputHeight();</span>
          <span class="s1">});</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.remote &amp;&amp; </span><span class="s5">typeof this</span><span class="s1">.remoteMethod === </span><span class="s3">'function'</span><span class="s1">) {</span>
          <span class="s5">this</span><span class="s1">.hoverIndex = -</span><span class="s4">1</span><span class="s1">;</span>
          <span class="s5">this</span><span class="s1">.remoteMethod(val);</span>
        <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s5">typeof this</span><span class="s1">.filterMethod === </span><span class="s3">'function'</span><span class="s1">) {</span>
          <span class="s5">this</span><span class="s1">.filterMethod(val);</span>
          <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElOptionGroup'</span><span class="s1">, </span><span class="s3">'queryChange'</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">this</span><span class="s1">.filteredOptionsCount = </span><span class="s5">this</span><span class="s1">.optionsCount;</span>
          <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElOption'</span><span class="s1">, </span><span class="s3">'queryChange'</span><span class="s1">, val);</span>
          <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElOptionGroup'</span><span class="s1">, </span><span class="s3">'queryChange'</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.defaultFirstOption &amp;&amp; (</span><span class="s5">this</span><span class="s1">.filterable || </span><span class="s5">this</span><span class="s1">.remote) &amp;&amp; </span><span class="s5">this</span><span class="s1">.filteredOptionsCount) {</span>
          <span class="s5">this</span><span class="s1">.checkDefaultFirstOption();</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">scrollToOption(option) {</span>
        <span class="s5">const </span><span class="s1">target = Array.isArray(option) &amp;&amp; option[</span><span class="s4">0</span><span class="s1">] ? option[</span><span class="s4">0</span><span class="s1">].$el : option.$el;</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.$refs.popper &amp;&amp; target) {</span>
          <span class="s5">const </span><span class="s1">menu = </span><span class="s5">this</span><span class="s1">.$refs.popper.$el.querySelector(</span><span class="s3">'.el-select-dropdown__wrap'</span><span class="s1">);</span>
          <span class="s1">scrollIntoView(menu, target);</span>
        <span class="s1">}</span>
        <span class="s5">this</span><span class="s1">.$refs.scrollbar &amp;&amp; </span><span class="s5">this</span><span class="s1">.$refs.scrollbar.handleScroll();</span>
      <span class="s1">},</span>

      <span class="s1">handleMenuEnter() {</span>
        <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; </span><span class="s5">this</span><span class="s1">.scrollToOption(</span><span class="s5">this</span><span class="s1">.selected));</span>
      <span class="s1">},</span>

      <span class="s1">emitChange(val) {</span>
        <span class="s5">if </span><span class="s1">(!valueEquals(</span><span class="s5">this</span><span class="s1">.value, val)) {</span>
          <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'change'</span><span class="s1">, val);</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">getOption(value) {</span>
        <span class="s5">let </span><span class="s1">option;</span>
        <span class="s5">const </span><span class="s1">isObject = Object.prototype.toString.call(value).toLowerCase() === </span><span class="s3">'[object object]'</span><span class="s1">;</span>
        <span class="s5">const </span><span class="s1">isNull = Object.prototype.toString.call(value).toLowerCase() === </span><span class="s3">'[object null]'</span><span class="s1">;</span>
        <span class="s5">const </span><span class="s1">isUndefined = Object.prototype.toString.call(value).toLowerCase() === </span><span class="s3">'[object undefined]'</span><span class="s1">;</span>

        <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">i = </span><span class="s5">this</span><span class="s1">.cachedOptions.length - </span><span class="s4">1</span><span class="s1">; i &gt;= </span><span class="s4">0</span><span class="s1">; i--) {</span>
          <span class="s5">const </span><span class="s1">cachedOption = </span><span class="s5">this</span><span class="s1">.cachedOptions[i];</span>
          <span class="s5">const </span><span class="s1">isEqual = isObject</span>
            <span class="s1">? getValueByPath(cachedOption.value, </span><span class="s5">this</span><span class="s1">.valueKey) === getValueByPath(value, </span><span class="s5">this</span><span class="s1">.valueKey)</span>
            <span class="s1">: cachedOption.value === value;</span>
          <span class="s5">if </span><span class="s1">(isEqual) {</span>
            <span class="s1">option = cachedOption;</span>
            <span class="s5">break</span><span class="s1">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(option) </span><span class="s5">return </span><span class="s1">option;</span>
        <span class="s5">const </span><span class="s1">label = (!isObject &amp;&amp; !isNull &amp;&amp; !isUndefined)</span>
          <span class="s1">? String(value) : </span><span class="s3">''</span><span class="s1">;</span>
        <span class="s5">let </span><span class="s1">newOption = {</span>
          <span class="s1">value: value,</span>
          <span class="s1">currentLabel: label</span>
        <span class="s1">};</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple) {</span>
          <span class="s1">newOption.hitState = </span><span class="s5">false</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s5">return </span><span class="s1">newOption;</span>
      <span class="s1">},</span>

      <span class="s1">setSelected() {</span>
        <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.multiple) {</span>
          <span class="s5">let </span><span class="s1">option = </span><span class="s5">this</span><span class="s1">.getOption(</span><span class="s5">this</span><span class="s1">.value);</span>
          <span class="s5">if </span><span class="s1">(option.created) {</span>
            <span class="s5">this</span><span class="s1">.createdLabel = option.currentLabel;</span>
            <span class="s5">this</span><span class="s1">.createdSelected = </span><span class="s5">true</span><span class="s1">;</span>
          <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
            <span class="s5">this</span><span class="s1">.createdSelected = </span><span class="s5">false</span><span class="s1">;</span>
          <span class="s1">}</span>
          <span class="s5">this</span><span class="s1">.selectedLabel = option.currentLabel;</span>
          <span class="s5">this</span><span class="s1">.selected = option;</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable) </span><span class="s5">this</span><span class="s1">.query = </span><span class="s5">this</span><span class="s1">.selectedLabel;</span>
          <span class="s5">return</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s5">let </span><span class="s1">result = [];</span>
        <span class="s5">if </span><span class="s1">(Array.isArray(</span><span class="s5">this</span><span class="s1">.value)) {</span>
          <span class="s5">this</span><span class="s1">.value.forEach(value =&gt; {</span>
            <span class="s1">result.push(</span><span class="s5">this</span><span class="s1">.getOption(value));</span>
          <span class="s1">});</span>
        <span class="s1">}</span>
        <span class="s5">this</span><span class="s1">.selected = result;</span>
        <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
          <span class="s5">this</span><span class="s1">.resetInputHeight();</span>
        <span class="s1">});</span>
      <span class="s1">},</span>

      <span class="s1">handleFocus(event) {</span>
        <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.softFocus) {</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.automaticDropdown || </span><span class="s5">this</span><span class="s1">.filterable) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable &amp;&amp; !</span><span class="s5">this</span><span class="s1">.visible) {</span>
              <span class="s5">this</span><span class="s1">.menuVisibleOnFocus = </span><span class="s5">true</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s5">this</span><span class="s1">.visible = </span><span class="s5">true</span><span class="s1">;</span>
          <span class="s1">}</span>
          <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'focus'</span><span class="s1">, event);</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">this</span><span class="s1">.softFocus = </span><span class="s5">false</span><span class="s1">;</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">blur() {</span>
        <span class="s5">this</span><span class="s1">.visible = </span><span class="s5">false</span><span class="s1">;</span>
        <span class="s5">this</span><span class="s1">.$refs.reference.blur();</span>
      <span class="s1">},</span>

      <span class="s1">handleBlur(event) {</span>
        <span class="s1">setTimeout(() =&gt; {</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.isSilentBlur) {</span>
            <span class="s5">this</span><span class="s1">.isSilentBlur = </span><span class="s5">false</span><span class="s1">;</span>
          <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
            <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'blur'</span><span class="s1">, event);</span>
          <span class="s1">}</span>
        <span class="s1">}, </span><span class="s4">50</span><span class="s1">);</span>
        <span class="s5">this</span><span class="s1">.softFocus = </span><span class="s5">false</span><span class="s1">;</span>
      <span class="s1">},</span>

      <span class="s1">handleClearClick(event) {</span>
        <span class="s5">this</span><span class="s1">.deleteSelected(event);</span>
      <span class="s1">},</span>

      <span class="s1">doDestroy() {</span>
        <span class="s5">this</span><span class="s1">.$refs.popper &amp;&amp; </span><span class="s5">this</span><span class="s1">.$refs.popper.doDestroy();</span>
      <span class="s1">},</span>

      <span class="s1">handleClose() {</span>
        <span class="s5">this</span><span class="s1">.visible = </span><span class="s5">false</span><span class="s1">;</span>
      <span class="s1">},</span>

      <span class="s1">toggleLastOptionHitState(hit) {</span>
        <span class="s5">if </span><span class="s1">(!Array.isArray(</span><span class="s5">this</span><span class="s1">.selected)) </span><span class="s5">return</span><span class="s1">;</span>
        <span class="s5">const </span><span class="s1">option = </span><span class="s5">this</span><span class="s1">.selected[</span><span class="s5">this</span><span class="s1">.selected.length - </span><span class="s4">1</span><span class="s1">];</span>
        <span class="s5">if </span><span class="s1">(!option) </span><span class="s5">return</span><span class="s1">;</span>

        <span class="s5">if </span><span class="s1">(hit === </span><span class="s5">true </span><span class="s1">|| hit === </span><span class="s5">false</span><span class="s1">) {</span>
          <span class="s1">option.hitState = hit;</span>
          <span class="s5">return </span><span class="s1">hit;</span>
        <span class="s1">}</span>

        <span class="s1">option.hitState = !option.hitState;</span>
        <span class="s5">return </span><span class="s1">option.hitState;</span>
      <span class="s1">},</span>

      <span class="s1">deletePrevTag(e) {</span>
        <span class="s5">if </span><span class="s1">(e.target.value.length &lt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp; !</span><span class="s5">this</span><span class="s1">.toggleLastOptionHitState()) {</span>
          <span class="s5">const </span><span class="s1">value = </span><span class="s5">this</span><span class="s1">.value.slice();</span>
          <span class="s1">value.pop();</span>
          <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'input'</span><span class="s1">, value);</span>
          <span class="s5">this</span><span class="s1">.emitChange(value);</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">managePlaceholder() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.currentPlaceholder !== </span><span class="s3">''</span><span class="s1">) {</span>
          <span class="s5">this</span><span class="s1">.currentPlaceholder = </span><span class="s5">this</span><span class="s1">.$refs.input.value ? </span><span class="s3">'' </span><span class="s1">: </span><span class="s5">this</span><span class="s1">.cachedPlaceHolder;</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">resetInputState(e) {</span>
        <span class="s5">if </span><span class="s1">(e.keyCode !== </span><span class="s4">8</span><span class="s1">) </span><span class="s5">this</span><span class="s1">.toggleLastOptionHitState(</span><span class="s5">false</span><span class="s1">);</span>
        <span class="s5">this</span><span class="s1">.inputLength = </span><span class="s5">this</span><span class="s1">.$refs.input.value.length * </span><span class="s4">15 </span><span class="s1">+ </span><span class="s4">20</span><span class="s1">;</span>
        <span class="s5">this</span><span class="s1">.resetInputHeight();</span>
      <span class="s1">},</span>

      <span class="s1">resetInputHeight() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.collapseTags &amp;&amp; !</span><span class="s5">this</span><span class="s1">.filterable) </span><span class="s5">return</span><span class="s1">;</span>
        <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
          <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.$refs.reference) </span><span class="s5">return</span><span class="s1">;</span>
          <span class="s5">let </span><span class="s1">inputChildNodes = </span><span class="s5">this</span><span class="s1">.$refs.reference.$el.childNodes;</span>
          <span class="s5">let </span><span class="s1">input = [].filter.call(inputChildNodes, item =&gt; item.tagName === </span><span class="s3">'INPUT'</span><span class="s1">)[</span><span class="s4">0</span><span class="s1">];</span>
          <span class="s5">const </span><span class="s1">tags = </span><span class="s5">this</span><span class="s1">.$refs.tags;</span>
          <span class="s5">const </span><span class="s1">tagsHeight = tags ? Math.round(tags.getBoundingClientRect().height) : </span><span class="s4">0</span><span class="s1">;</span>
          <span class="s5">const </span><span class="s1">sizeInMap = </span><span class="s5">this</span><span class="s1">.initialInputHeight || </span><span class="s4">40</span><span class="s1">;</span>
          <span class="s1">input.style.height = </span><span class="s5">this</span><span class="s1">.selected.length === </span><span class="s4">0</span>
            <span class="s1">? sizeInMap + </span><span class="s3">'px'</span>
            <span class="s1">: Math.max(</span>
              <span class="s1">tags ? (tagsHeight + (tagsHeight &gt; sizeInMap ? </span><span class="s4">6 </span><span class="s1">: </span><span class="s4">0</span><span class="s1">)) : </span><span class="s4">0</span><span class="s1">,</span>
              <span class="s1">sizeInMap</span>
            <span class="s1">) + </span><span class="s3">'px'</span><span class="s1">;</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.visible &amp;&amp; </span><span class="s5">this</span><span class="s1">.emptyText !== </span><span class="s5">false</span><span class="s1">) {</span>
            <span class="s5">this</span><span class="s1">.broadcast(</span><span class="s3">'ElSelectDropdown'</span><span class="s1">, </span><span class="s3">'updatePopper'</span><span class="s1">);</span>
          <span class="s1">}</span>
        <span class="s1">});</span>
      <span class="s1">},</span>

      <span class="s1">resetHoverIndex() {</span>
        <span class="s1">setTimeout(() =&gt; {</span>
          <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.multiple) {</span>
            <span class="s5">this</span><span class="s1">.hoverIndex = </span><span class="s5">this</span><span class="s1">.options.indexOf(</span><span class="s5">this</span><span class="s1">.selected);</span>
          <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.selected.length &gt; </span><span class="s4">0</span><span class="s1">) {</span>
              <span class="s5">this</span><span class="s1">.hoverIndex = Math.min.apply(</span><span class="s5">null</span><span class="s1">, </span><span class="s5">this</span><span class="s1">.selected.map(item =&gt; </span><span class="s5">this</span><span class="s1">.options.indexOf(item)));</span>
            <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
              <span class="s5">this</span><span class="s1">.hoverIndex = -</span><span class="s4">1</span><span class="s1">;</span>
            <span class="s1">}</span>
          <span class="s1">}</span>
        <span class="s1">}, </span><span class="s4">300</span><span class="s1">);</span>
      <span class="s1">},</span>

      <span class="s1">handleOptionSelect(option, byClick) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple) {</span>
          <span class="s5">const </span><span class="s1">value = (</span><span class="s5">this</span><span class="s1">.value || []).slice();</span>
          <span class="s5">const </span><span class="s1">optionIndex = </span><span class="s5">this</span><span class="s1">.getValueIndex(value, option.value);</span>
          <span class="s5">if </span><span class="s1">(optionIndex &gt; -</span><span class="s4">1</span><span class="s1">) {</span>
            <span class="s1">value.splice(optionIndex, </span><span class="s4">1</span><span class="s1">);</span>
          <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multipleLimit &lt;= </span><span class="s4">0 </span><span class="s1">|| value.length &lt; </span><span class="s5">this</span><span class="s1">.multipleLimit) {</span>
            <span class="s1">value.push(option.value);</span>
          <span class="s1">}</span>
          <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'input'</span><span class="s1">, value);</span>
          <span class="s5">this</span><span class="s1">.emitChange(value);</span>
          <span class="s5">if </span><span class="s1">(option.created) {</span>
            <span class="s5">this</span><span class="s1">.query = </span><span class="s3">''</span><span class="s1">;</span>
            <span class="s5">this</span><span class="s1">.handleQueryChange(</span><span class="s3">''</span><span class="s1">);</span>
            <span class="s5">this</span><span class="s1">.inputLength = </span><span class="s4">20</span><span class="s1">;</span>
          <span class="s1">}</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable) </span><span class="s5">this</span><span class="s1">.$refs.input.focus();</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'input'</span><span class="s1">, option.value);</span>
          <span class="s5">this</span><span class="s1">.emitChange(option.value);</span>
          <span class="s5">this</span><span class="s1">.visible = </span><span class="s5">false</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s5">this</span><span class="s1">.isSilentBlur = byClick;</span>
        <span class="s5">this</span><span class="s1">.setSoftFocus();</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.visible) </span><span class="s5">return</span><span class="s1">;</span>
        <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
          <span class="s5">this</span><span class="s1">.scrollToOption(option);</span>
        <span class="s1">});</span>
      <span class="s1">},</span>

      <span class="s1">setSoftFocus() {</span>
        <span class="s5">this</span><span class="s1">.softFocus = </span><span class="s5">true</span><span class="s1">;</span>
        <span class="s5">const </span><span class="s1">input = </span><span class="s5">this</span><span class="s1">.$refs.input || </span><span class="s5">this</span><span class="s1">.$refs.reference;</span>
        <span class="s5">if </span><span class="s1">(input) {</span>
          <span class="s1">input.focus();</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">getValueIndex(arr = [], value) {</span>
        <span class="s5">const </span><span class="s1">isObject = Object.prototype.toString.call(value).toLowerCase() === </span><span class="s3">'[object object]'</span><span class="s1">;</span>
        <span class="s5">if </span><span class="s1">(!isObject) {</span>
          <span class="s5">return </span><span class="s1">arr.indexOf(value);</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">const </span><span class="s1">valueKey = </span><span class="s5">this</span><span class="s1">.valueKey;</span>
          <span class="s5">let </span><span class="s1">index = -</span><span class="s4">1</span><span class="s1">;</span>
          <span class="s1">arr.some((item, i) =&gt; {</span>
            <span class="s5">if </span><span class="s1">(getValueByPath(item, valueKey) === getValueByPath(value, valueKey)) {</span>
              <span class="s1">index = i;</span>
              <span class="s5">return true</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s5">return false</span><span class="s1">;</span>
          <span class="s1">});</span>
          <span class="s5">return </span><span class="s1">index;</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">toggleMenu() {</span>
        <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.selectDisabled) {</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.menuVisibleOnFocus) {</span>
            <span class="s5">this</span><span class="s1">.menuVisibleOnFocus = </span><span class="s5">false</span><span class="s1">;</span>
          <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
            <span class="s5">this</span><span class="s1">.visible = !</span><span class="s5">this</span><span class="s1">.visible;</span>
          <span class="s1">}</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.visible) {</span>
            <span class="s1">(</span><span class="s5">this</span><span class="s1">.$refs.input || </span><span class="s5">this</span><span class="s1">.$refs.reference).focus();</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">selectOption() {</span>
        <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.visible) {</span>
          <span class="s5">this</span><span class="s1">.toggleMenu();</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.options[</span><span class="s5">this</span><span class="s1">.hoverIndex]) {</span>
            <span class="s5">this</span><span class="s1">.handleOptionSelect(</span><span class="s5">this</span><span class="s1">.options[</span><span class="s5">this</span><span class="s1">.hoverIndex]);</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">deleteSelected(event) {</span>
        <span class="s1">event.stopPropagation();</span>
        <span class="s5">const </span><span class="s1">value = </span><span class="s5">this</span><span class="s1">.multiple ? [] : </span><span class="s3">''</span><span class="s1">;</span>
        <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'input'</span><span class="s1">, value);</span>
        <span class="s5">this</span><span class="s1">.emitChange(value);</span>
        <span class="s5">this</span><span class="s1">.visible = </span><span class="s5">false</span><span class="s1">;</span>
        <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'clear'</span><span class="s1">);</span>
      <span class="s1">},</span>

      <span class="s1">deleteTag(event, tag) {</span>
        <span class="s5">let </span><span class="s1">index = </span><span class="s5">this</span><span class="s1">.selected.indexOf(tag);</span>
        <span class="s5">if </span><span class="s1">(index &gt; -</span><span class="s4">1 </span><span class="s1">&amp;&amp; !</span><span class="s5">this</span><span class="s1">.selectDisabled) {</span>
          <span class="s5">const </span><span class="s1">value = </span><span class="s5">this</span><span class="s1">.value.slice();</span>
          <span class="s1">value.splice(index, </span><span class="s4">1</span><span class="s1">);</span>
          <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'input'</span><span class="s1">, value);</span>
          <span class="s5">this</span><span class="s1">.emitChange(value);</span>
          <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'remove-tag'</span><span class="s1">, tag.value);</span>
        <span class="s1">}</span>
        <span class="s1">event.stopPropagation();</span>
      <span class="s1">},</span>

      <span class="s1">onInputChange() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.filterable &amp;&amp; </span><span class="s5">this</span><span class="s1">.query !== </span><span class="s5">this</span><span class="s1">.selectedLabel) {</span>
          <span class="s5">this</span><span class="s1">.query = </span><span class="s5">this</span><span class="s1">.selectedLabel;</span>
          <span class="s5">this</span><span class="s1">.handleQueryChange(</span><span class="s5">this</span><span class="s1">.query);</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">onOptionDestroy(index) {</span>
        <span class="s5">if </span><span class="s1">(index &gt; -</span><span class="s4">1</span><span class="s1">) {</span>
          <span class="s5">this</span><span class="s1">.optionsCount--;</span>
          <span class="s5">this</span><span class="s1">.filteredOptionsCount--;</span>
          <span class="s5">this</span><span class="s1">.options.splice(index, </span><span class="s4">1</span><span class="s1">);</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">resetInputWidth() {</span>
        <span class="s5">this</span><span class="s1">.inputWidth = </span><span class="s5">this</span><span class="s1">.$refs.reference.$el.getBoundingClientRect().width;</span>
      <span class="s1">},</span>

      <span class="s1">handleResize() {</span>
        <span class="s5">this</span><span class="s1">.resetInputWidth();</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple) </span><span class="s5">this</span><span class="s1">.resetInputHeight();</span>
      <span class="s1">},</span>

      <span class="s1">checkDefaultFirstOption() {</span>
        <span class="s5">this</span><span class="s1">.hoverIndex = -</span><span class="s4">1</span><span class="s1">;</span>
        <span class="s8">// highlight the created option</span>
        <span class="s5">let </span><span class="s1">hasCreated = </span><span class="s5">false</span><span class="s1">;</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">i = </span><span class="s5">this</span><span class="s1">.options.length - </span><span class="s4">1</span><span class="s1">; i &gt;= </span><span class="s4">0</span><span class="s1">; i--) {</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.options[i].created) {</span>
            <span class="s1">hasCreated = </span><span class="s5">true</span><span class="s1">;</span>
            <span class="s5">this</span><span class="s1">.hoverIndex = i;</span>
            <span class="s5">break</span><span class="s1">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(hasCreated) </span><span class="s5">return</span><span class="s1">;</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">i = </span><span class="s4">0</span><span class="s1">; i !== </span><span class="s5">this</span><span class="s1">.options.length; ++i) {</span>
          <span class="s5">const </span><span class="s1">option = </span><span class="s5">this</span><span class="s1">.options[i];</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.query) {</span>
            <span class="s8">// highlight first options that passes the filter</span>
            <span class="s5">if </span><span class="s1">(!option.disabled &amp;&amp; !option.groupDisabled &amp;&amp; option.visible) {</span>
              <span class="s5">this</span><span class="s1">.hoverIndex = i;</span>
              <span class="s5">break</span><span class="s1">;</span>
            <span class="s1">}</span>
          <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
            <span class="s8">// highlight currently selected option</span>
            <span class="s5">if </span><span class="s1">(option.itemSelected) {</span>
              <span class="s5">this</span><span class="s1">.hoverIndex = i;</span>
              <span class="s5">break</span><span class="s1">;</span>
            <span class="s1">}</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
      <span class="s1">},</span>

      <span class="s1">getValueKey(item) {</span>
        <span class="s5">if </span><span class="s1">(Object.prototype.toString.call(item.value).toLowerCase() !== </span><span class="s3">'[object object]'</span><span class="s1">) {</span>
          <span class="s5">return </span><span class="s1">item.value;</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">return </span><span class="s1">getValueByPath(item.value, </span><span class="s5">this</span><span class="s1">.valueKey);</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s1">created() {</span>
      <span class="s5">this</span><span class="s1">.cachedPlaceHolder = </span><span class="s5">this</span><span class="s1">.currentPlaceholder = </span><span class="s5">this</span><span class="s1">.propPlaceholder;</span>
      <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple &amp;&amp; !Array.isArray(</span><span class="s5">this</span><span class="s1">.value)) {</span>
        <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'input'</span><span class="s1">, []);</span>
      <span class="s1">}</span>
      <span class="s5">if </span><span class="s1">(!</span><span class="s5">this</span><span class="s1">.multiple &amp;&amp; Array.isArray(</span><span class="s5">this</span><span class="s1">.value)) {</span>
        <span class="s5">this</span><span class="s1">.$emit(</span><span class="s3">'input'</span><span class="s1">, </span><span class="s3">''</span><span class="s1">);</span>
      <span class="s1">}</span>

      <span class="s5">this</span><span class="s1">.debouncedOnInputChange = debounce(</span><span class="s5">this</span><span class="s1">.debounce, () =&gt; {</span>
        <span class="s5">this</span><span class="s1">.onInputChange();</span>
      <span class="s1">});</span>

      <span class="s5">this</span><span class="s1">.debouncedQueryChange = debounce(</span><span class="s5">this</span><span class="s1">.debounce, (e) =&gt; {</span>
        <span class="s5">this</span><span class="s1">.handleQueryChange(e.target.value);</span>
      <span class="s1">});</span>

      <span class="s5">this</span><span class="s1">.$on(</span><span class="s3">'handleOptionClick'</span><span class="s1">, </span><span class="s5">this</span><span class="s1">.handleOptionSelect);</span>
      <span class="s5">this</span><span class="s1">.$on(</span><span class="s3">'setSelected'</span><span class="s1">, </span><span class="s5">this</span><span class="s1">.setSelected);</span>
    <span class="s1">},</span>

    <span class="s1">mounted() {</span>
      <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.multiple &amp;&amp; Array.isArray(</span><span class="s5">this</span><span class="s1">.value) &amp;&amp; </span><span class="s5">this</span><span class="s1">.value.length &gt; </span><span class="s4">0</span><span class="s1">) {</span>
        <span class="s5">this</span><span class="s1">.currentPlaceholder = </span><span class="s3">''</span><span class="s1">;</span>
      <span class="s1">}</span>
      <span class="s1">addResizeListener(</span><span class="s5">this</span><span class="s1">.$el, </span><span class="s5">this</span><span class="s1">.handleResize);</span>

      <span class="s5">const </span><span class="s1">reference = </span><span class="s5">this</span><span class="s1">.$refs.reference;</span>
      <span class="s5">if </span><span class="s1">(reference &amp;&amp; reference.$el) {</span>
        <span class="s5">const </span><span class="s1">sizeMap = {</span>
          <span class="s1">medium: </span><span class="s4">36</span><span class="s1">,</span>
          <span class="s1">small: </span><span class="s4">32</span><span class="s1">,</span>
          <span class="s1">mini: </span><span class="s4">28</span>
        <span class="s1">};</span>
        <span class="s5">const </span><span class="s1">input = reference.$el.querySelector(</span><span class="s3">'input'</span><span class="s1">);</span>
        <span class="s5">this</span><span class="s1">.initialInputHeight = input.getBoundingClientRect().height || sizeMap[</span><span class="s5">this</span><span class="s1">.selectSize];</span>
      <span class="s1">}</span>
      <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.remote &amp;&amp; </span><span class="s5">this</span><span class="s1">.multiple) {</span>
        <span class="s5">this</span><span class="s1">.resetInputHeight();</span>
      <span class="s1">}</span>
      <span class="s5">this</span><span class="s1">.$nextTick(() =&gt; {</span>
        <span class="s5">if </span><span class="s1">(reference &amp;&amp; reference.$el) {</span>
          <span class="s5">this</span><span class="s1">.inputWidth = reference.$el.getBoundingClientRect().width;</span>
        <span class="s1">}</span>
      <span class="s1">});</span>
      <span class="s5">this</span><span class="s1">.setSelected();</span>
    <span class="s1">},</span>

    <span class="s1">beforeDestroy() {</span>
      <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.$el &amp;&amp; </span><span class="s5">this</span><span class="s1">.handleResize) removeResizeListener(</span><span class="s5">this</span><span class="s1">.$el, </span><span class="s5">this</span><span class="s1">.handleResize);</span>
    <span class="s1">}</span>
  <span class="s1">};</span>
<span class="s0">&lt;/script&gt;</span>
</pre>
</body>
</html>