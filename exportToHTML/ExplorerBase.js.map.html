<html>
<head>
<title>ExplorerBase.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ExplorerBase.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../src/ExplorerBase.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;ExplorerBase&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;loadCache&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;searchCache&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;validateConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;clearLoadCache&quot;</span><span class="s0">,</span><span class="s1">&quot;clear&quot;</span><span class="s0">,</span><span class="s1">&quot;clearSearchCache&quot;</span><span class="s0">,</span><span class="s1">&quot;clearCaches&quot;</span><span class="s0">,</span><span class="s1">&quot;searchPlaces&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;place&quot;</span><span class="s0">,</span><span class="s1">&quot;loaderKey&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;extname&quot;</span><span class="s0">,</span><span class="s1">&quot;loader&quot;</span><span class="s0">,</span><span class="s1">&quot;loaders&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;getExtensionDescription&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldSearchStopWithResult&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;isEmpty&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoreEmptySearchPlaces&quot;</span><span class="s0">,</span><span class="s1">&quot;nextDirectoryToSearch&quot;</span><span class="s0">,</span><span class="s1">&quot;currentDir&quot;</span><span class="s0">,</span><span class="s1">&quot;currentResult&quot;</span><span class="s0">,</span><span class="s1">&quot;nextDir&quot;</span><span class="s0">,</span><span class="s1">&quot;nextDirUp&quot;</span><span class="s0">,</span><span class="s1">&quot;stopDir&quot;</span><span class="s0">,</span><span class="s1">&quot;loadPackageProp&quot;</span><span class="s0">,</span><span class="s1">&quot;filepath&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;parsedContent&quot;</span><span class="s0">,</span><span class="s1">&quot;loadJson&quot;</span><span class="s0">,</span><span class="s1">&quot;packagePropValue&quot;</span><span class="s0">,</span><span class="s1">&quot;packageProp&quot;</span><span class="s0">,</span><span class="s1">&quot;getLoaderEntryForFile&quot;</span><span class="s0">,</span><span class="s1">&quot;basename&quot;</span><span class="s0">,</span><span class="s1">&quot;bind&quot;</span><span class="s0">,</span><span class="s1">&quot;loadedContentToCosmiconfigResult&quot;</span><span class="s0">,</span><span class="s1">&quot;loadedContent&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;validateFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;ext&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import path from 'path';</span><span class="s3">\n</span><span class="s1">import { loaders } from './loaders';</span><span class="s3">\n</span><span class="s1">import { getPropertyByPath } from './getPropertyByPath';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">CosmiconfigResult,</span><span class="s3">\n  </span><span class="s1">ExplorerOptions,</span><span class="s3">\n  </span><span class="s1">ExplorerOptionsSync,</span><span class="s3">\n  </span><span class="s1">Cache,</span><span class="s3">\n  </span><span class="s1">LoadedFileContent,</span><span class="s3">\n</span><span class="s1">} from './types';</span><span class="s3">\n</span><span class="s1">import { Loader } from './index';</span><span class="s3">\n\n</span><span class="s1">class ExplorerBase&lt;T extends ExplorerOptions | ExplorerOptionsSync&gt; {</span><span class="s3">\n  </span><span class="s1">protected readonly loadCache?: Cache;</span><span class="s3">\n  </span><span class="s1">protected readonly searchCache?: Cache;</span><span class="s3">\n  </span><span class="s1">protected readonly config: T;</span><span class="s3">\n\n  </span><span class="s1">public constructor(options: T) {</span><span class="s3">\n    </span><span class="s1">if (options.cache === true) {</span><span class="s3">\n      </span><span class="s1">this.loadCache = new Map();</span><span class="s3">\n      </span><span class="s1">this.searchCache = new Map();</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.config = options;</span><span class="s3">\n    </span><span class="s1">this.validateConfig();</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public clearLoadCache(): void {</span><span class="s3">\n    </span><span class="s1">if (this.loadCache) {</span><span class="s3">\n      </span><span class="s1">this.loadCache.clear();</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public clearSearchCache(): void {</span><span class="s3">\n    </span><span class="s1">if (this.searchCache) {</span><span class="s3">\n      </span><span class="s1">this.searchCache.clear();</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public clearCaches(): void {</span><span class="s3">\n    </span><span class="s1">this.clearLoadCache();</span><span class="s3">\n    </span><span class="s1">this.clearSearchCache();</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private validateConfig(): void {</span><span class="s3">\n    </span><span class="s1">const config = this.config;</span><span class="s3">\n\n    </span><span class="s1">config.searchPlaces.forEach((place): void =&gt; {</span><span class="s3">\n      </span><span class="s1">const loaderKey = path.extname(place) || 'noExt';</span><span class="s3">\n      </span><span class="s1">const loader = config.loaders[loaderKey];</span><span class="s3">\n      </span><span class="s1">if (!loader) {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`No loader specified for ${getExtensionDescription(</span><span class="s3">\n            </span><span class="s1">place,</span><span class="s3">\n          </span><span class="s1">)}, so searchPlaces item </span><span class="s3">\&quot;</span><span class="s1">${place}</span><span class="s3">\&quot; </span><span class="s1">is invalid`,</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (typeof loader !== 'function') {</span><span class="s3">\n        </span><span class="s1">throw new Error(</span><span class="s3">\n          </span><span class="s1">`loader for ${getExtensionDescription(</span><span class="s3">\n            </span><span class="s1">place,</span><span class="s3">\n          </span><span class="s1">)} is not a function (type provided: </span><span class="s3">\&quot;</span><span class="s1">${typeof loader}</span><span class="s3">\&quot;</span><span class="s1">), so searchPlaces item </span><span class="s3">\&quot;</span><span class="s1">${place}</span><span class="s3">\&quot; </span><span class="s1">is invalid`,</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected shouldSearchStopWithResult(result: CosmiconfigResult): boolean {</span><span class="s3">\n    </span><span class="s1">if (result === null) return false;</span><span class="s3">\n    </span><span class="s1">if (result.isEmpty &amp;&amp; this.config.ignoreEmptySearchPlaces) return false;</span><span class="s3">\n    </span><span class="s1">return true;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected nextDirectoryToSearch(</span><span class="s3">\n    </span><span class="s1">currentDir: string,</span><span class="s3">\n    </span><span class="s1">currentResult: CosmiconfigResult,</span><span class="s3">\n  </span><span class="s1">): string | null {</span><span class="s3">\n    </span><span class="s1">if (this.shouldSearchStopWithResult(currentResult)) {</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const nextDir = nextDirUp(currentDir);</span><span class="s3">\n    </span><span class="s1">if (nextDir === currentDir || currentDir === this.config.stopDir) {</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return nextDir;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private loadPackageProp(filepath: string, content: string): unknown {</span><span class="s3">\n    </span><span class="s1">const parsedContent = loaders.loadJson(filepath, content);</span><span class="s3">\n    </span><span class="s1">const packagePropValue = getPropertyByPath(</span><span class="s3">\n      </span><span class="s1">parsedContent,</span><span class="s3">\n      </span><span class="s1">this.config.packageProp,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">return packagePropValue || null;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected getLoaderEntryForFile(filepath: string): Loader {</span><span class="s3">\n    </span><span class="s1">if (path.basename(filepath) === 'package.json') {</span><span class="s3">\n      </span><span class="s1">const loader = this.loadPackageProp.bind(this);</span><span class="s3">\n      </span><span class="s1">return loader;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">const loaderKey = path.extname(filepath) || 'noExt';</span><span class="s3">\n\n    </span><span class="s1">const loader = this.config.loaders[loaderKey];</span><span class="s3">\n\n    </span><span class="s1">if (!loader) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`No loader specified for ${getExtensionDescription(filepath)}`,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return loader;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected loadedContentToCosmiconfigResult(</span><span class="s3">\n    </span><span class="s1">filepath: string,</span><span class="s3">\n    </span><span class="s1">loadedContent: LoadedFileContent,</span><span class="s3">\n  </span><span class="s1">): CosmiconfigResult {</span><span class="s3">\n    </span><span class="s1">if (loadedContent === null) {</span><span class="s3">\n      </span><span class="s1">return null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">if (loadedContent === undefined) {</span><span class="s3">\n      </span><span class="s1">return { filepath, config: undefined, isEmpty: true };</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return { config: loadedContent, filepath };</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected validateFilePath(filepath: string): void {</span><span class="s3">\n    </span><span class="s1">if (!filepath) {</span><span class="s3">\n      </span><span class="s1">throw new Error('load must pass a non-empty string');</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function nextDirUp(dir: string): string {</span><span class="s3">\n  </span><span class="s1">return path.dirname(dir);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function getExtensionDescription(filepath: string): string {</span><span class="s3">\n  </span><span class="s1">const ext = path.extname(filepath);</span><span class="s3">\n  </span><span class="s1">return ext ? `extension </span><span class="s3">\&quot;</span><span class="s1">${ext}</span><span class="s3">\&quot;</span><span class="s1">` : 'files without extensions';</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export { ExplorerBase, getExtensionDescription };</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;ExplorerBase.js&quot;</span><span class="s0">}</span></pre>
</body>
</html>