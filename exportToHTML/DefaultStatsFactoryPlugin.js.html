<html>
<head>
<title>DefaultStatsFactoryPlugin.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #bcbec4;}
.s4 { color: #cf8e6d;}
.s5 { color: #5f826b; font-style: italic;}
.s6 { color: #67a37c; font-style: italic;}
.s7 { color: #2aacb8;}
.s8 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
DefaultStatsFactoryPlugin.js</font>
</center></td></tr></table>
<pre><span class="s0">/* 
    MIT License http://www.opensource.org/licenses/mit-license.php 
    Author Tobias Koppers @sokra 
*/</span>

<span class="s2">&quot;use strict&quot;</span><span class="s3">;</span>

<span class="s4">const </span><span class="s1">util </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;util&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s3">{ </span><span class="s1">WEBPACK_MODULE_TYPE_RUNTIME </span><span class="s3">} = </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../ModuleTypeConstants&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">ModuleDependency </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../dependencies/ModuleDependency&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">formatLocation </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../formatLocation&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s3">{ </span><span class="s1">LogType </span><span class="s3">} = </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../logging/Logger&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">AggressiveSplittingPlugin </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../optimize/AggressiveSplittingPlugin&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s1">SizeLimitsPlugin </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../performance/SizeLimitsPlugin&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s3">{ </span><span class="s1">countIterable </span><span class="s3">} = </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../util/IterableHelpers&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s3">{</span>
	<span class="s1">compareLocations</span><span class="s3">,</span>
	<span class="s1">compareChunksById</span><span class="s3">,</span>
	<span class="s1">compareNumbers</span><span class="s3">,</span>
	<span class="s1">compareIds</span><span class="s3">,</span>
	<span class="s1">concatComparators</span><span class="s3">,</span>
	<span class="s1">compareSelect</span><span class="s3">,</span>
	<span class="s1">compareModulesByIdentifier</span>
<span class="s3">} = </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../util/comparators&quot;</span><span class="s3">);</span>
<span class="s4">const </span><span class="s3">{ </span><span class="s1">makePathsRelative</span><span class="s3">, </span><span class="s1">parseResource </span><span class="s3">} = </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../util/identifier&quot;</span><span class="s3">);</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;webpack-sources&quot;).Source} Source */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Chunk&quot;)} Chunk */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../ChunkGroup&quot;)} ChunkGroup */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../ChunkGroup&quot;).OriginRecord} OriginRecord */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Compilation&quot;)} Compilation */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Compilation&quot;).Asset} Asset */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Compilation&quot;).AssetInfo} AssetInfo */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Compilation&quot;).NormalizedStatsOptions} NormalizedStatsOptions */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Compiler&quot;)} Compiler */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Dependency&quot;)} Dependency */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Dependency&quot;).DependencyLocation} DependencyLocation */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../Module&quot;)} Module */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../ModuleGraphConnection&quot;)} ModuleGraphConnection */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../ModuleProfile&quot;)} ModuleProfile */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../RequestShortener&quot;)} RequestShortener */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../WebpackError&quot;)} WebpackError */</span>
<span class="s5">/** </span><span class="s6">@template </span><span class="s5">T @typedef {import(&quot;../util/comparators&quot;).Comparator&lt;T&gt;} Comparator&lt;T&gt; */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../util/runtime&quot;).RuntimeSpec} RuntimeSpec */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;../util/smartGrouping&quot;).GroupConfig&lt;any, object&gt;} GroupConfig */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./StatsFactory&quot;)} StatsFactory */</span>
<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{import(&quot;./StatsFactory&quot;).StatsFactoryContext} StatsFactoryContext */</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsCompilation &amp; Record&lt;string, any&gt;} StatsCompilation */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsCompilation</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{any=} env</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} name</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} hash</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} version</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} time</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} builtAt</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} needAdditionalPass</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} publicPath</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} outputPath</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, string[]&gt;=} assetsByChunkName</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsAsset[]=} assets</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} filteredAssets</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsChunk[]=} chunks</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsModule[]=} modules</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} filteredModules</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, StatsChunkGroup&gt;=} entrypoints</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, StatsChunkGroup&gt;=} namedChunkGroups</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsError[]=} errors</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} errorsCount</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsError[]=} warnings</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} warningsCount</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsCompilation[]=} children</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, StatsLogging&gt;=} logging</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsLogging &amp; Record&lt;string, any&gt;} StatsLogging */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsLogging</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsLoggingEntry[]} entries</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} filteredEntries</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} debug</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsLoggingEntry &amp; Record&lt;string, any&gt;} StatsLoggingEntry */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsLoggingEntry</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} type</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} message</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]=} trace</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsLoggingEntry[]=} children</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{any[]=} args</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} time</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsAsset &amp; Record&lt;string, any&gt;} StatsAsset */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsAsset</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} type</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} name</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{AssetInfo} info</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} size</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} emitted</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} comparedForEmit</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} cached</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsAsset[]=} related</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} chunkNames</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} chunkIdHints</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} chunks</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} auxiliaryChunkNames</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} auxiliaryChunks</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} auxiliaryChunkIdHints</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} filteredRelated</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} isOverSizeLimit</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsChunkGroup &amp; Record&lt;string, any&gt;} StatsChunkGroup */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsChunkGroup</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} name</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} chunks</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{({ name: string, size?: number })[]=} assets</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} filteredAssets</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} assetsSize</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{({ name: string, size?: number })[]=} auxiliaryAssets</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} filteredAuxiliaryAssets</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} auxiliaryAssetsSize</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{{ [x: string]: StatsChunkGroup[] }=} children</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{{ [x: string]: string[] }=} childAssets</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} isOverSizeLimit</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsModule &amp; Record&lt;string, any&gt;} StatsModule */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsModule</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} type</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleType</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} layer</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} identifier</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} name</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} nameForCondition</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} index</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} preOrderIndex</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} index2</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} postOrderIndex</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} size</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{{[x: string]: number}=} sizes</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} cacheable</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} built</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} codeGenerated</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} buildTimeExecuted</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} cached</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} optional</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} orphan</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string|number=} id</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string|number=} issuerId</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} chunks</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} assets</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} dependent</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} issuer</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} issuerName</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsModuleIssuer[]=} issuerPath</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} failed</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} errors</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} warnings</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsProfile=} profile</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsModuleReason[]=} reasons</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(boolean | string[])=} usedExports</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]=} providedExports</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]=} optimizationBailout</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} depth</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsModule[]=} modules</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} filteredModules</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ReturnType&lt;Source[&quot;source&quot;]&gt;=} source</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsProfile &amp; Record&lt;string, any&gt;} StatsProfile */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsProfile</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} total</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} resolving</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} restoring</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} building</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} integration</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} storing</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} additionalResolving</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} additionalIntegration</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} factory</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} dependencies</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsModuleIssuer &amp; Record&lt;string, any&gt;} StatsModuleIssuer */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsModuleIssuer</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} identifier</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} name</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)=} id</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsProfile=} profile</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsModuleReason &amp; Record&lt;string, any&gt;} StatsModuleReason */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsModuleReason</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleIdentifier</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} module</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleName</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} resolvedModuleIdentifier</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} resolvedModule</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} type</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} active</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} explanation</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} userRequest</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} loc</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)=} moduleId</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)=} resolvedModuleId</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsChunk &amp; Record&lt;string, any&gt;} StatsChunk */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsChunk</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} rendered</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} initial</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} entry</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean} recorded</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} reason</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number} size</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, number&gt;=} sizes</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]=} names</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]=} idHints</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]=} runtime</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]=} files</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string[]=} auxiliaryFiles</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} hash</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{Record&lt;string, (string|number)[]&gt;=} childrenByOrder</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)=} id</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} siblings</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} parents</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)[]=} children</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsModule[]=} modules</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{number=} filteredModules</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsChunkOrigin[]=} origins</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsChunkOrigin &amp; Record&lt;string, any&gt;} StatsChunkOrigin */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsChunkOrigin</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} module</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleIdentifier</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleName</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} loc</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} request</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)=} moduleId</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsModuleTraceItem &amp; Record&lt;string, any&gt;} StatsModuleTraceItem */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsModuleTraceItem</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} originIdentifier</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} originName</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleIdentifier</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleName</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsModuleTraceDependency[]=} dependencies</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)=} originId</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{(string|number)=} moduleId</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsModuleTraceDependency &amp; Record&lt;string, any&gt;} StatsModuleTraceDependency */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsModuleTraceDependency</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} loc</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{KnownStatsError &amp; Record&lt;string, any&gt;} StatsError */</span>
<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} KnownStatsError</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string} message</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} chunkName</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} chunkEntry</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{boolean=} chunkInitial</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} file</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleIdentifier</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} moduleName</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} loc</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string|number=} chunkId</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string|number=} moduleId</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{StatsModuleTraceItem[]=} moduleTrace</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{any=} details</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{string=} stack</span>
 <span class="s5">*/</span>

<span class="s5">/** </span><span class="s6">@typedef </span><span class="s5">{Asset &amp; { type: string, related: PreprocessedAsset[] }} PreprocessedAsset */</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">O</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Record&lt;string, (object: O, data: T, context: StatsFactoryContext, options: NormalizedStatsOptions, factory: StatsFactory) =&gt; void&gt;} ExtractorsByOption</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s5">{Object} SimpleExtractors</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;Compilation, StatsCompilation&gt;} compilation</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;PreprocessedAsset, StatsAsset&gt;} asset</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;PreprocessedAsset, StatsAsset&gt;} asset$visible</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;{ name: string, chunkGroup: ChunkGroup }, StatsChunkGroup&gt;} chunkGroup</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;Module, StatsModule&gt;} module</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;Module, StatsModule&gt;} module$visible</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;Module, StatsModuleIssuer&gt;} moduleIssuer</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;ModuleProfile, StatsProfile&gt;} profile</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;ModuleGraphConnection, StatsModuleReason&gt;} moduleReason</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;Chunk, StatsChunk&gt;} chunk</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;OriginRecord, StatsChunkOrigin&gt;} chunkOrigin</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;WebpackError, StatsError&gt;} error</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;WebpackError, StatsError&gt;} warning</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;{ origin: Module, module: Module }, StatsModuleTraceItem&gt;} moduleTraceItem</span>
 <span class="s5">* </span><span class="s6">@property </span><span class="s5">{ExtractorsByOption&lt;Dependency, StatsModuleTraceDependency&gt;} moduleTraceDependency</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">I</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Iterable&lt;T&gt;} items items to select from</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(T): Iterable&lt;I&gt;} selector selector function to select values from item</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{I[]} array of values</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">uniqueArray </span><span class="s3">= (</span><span class="s1">items</span><span class="s3">, </span><span class="s1">selector</span><span class="s3">) =&gt; {</span>
	<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Set&lt;I&gt;} */</span>
	<span class="s4">const </span><span class="s1">set </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">item of items</span><span class="s3">) {</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">i of selector</span><span class="s3">(</span><span class="s1">item</span><span class="s3">)) {</span>
			<span class="s1">set</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">i</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">set</span><span class="s3">);</span>
<span class="s3">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">I</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Iterable&lt;T&gt;} items items to select from</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(T): Iterable&lt;I&gt;} selector selector function to select values from item</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Comparator&lt;I&gt;} comparator comparator function</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{I[]} array of values</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">uniqueOrderedArray </span><span class="s3">= (</span><span class="s1">items</span><span class="s3">, </span><span class="s1">selector</span><span class="s3">, </span><span class="s1">comparator</span><span class="s3">) =&gt; {</span>
	<span class="s4">return </span><span class="s1">uniqueArray</span><span class="s3">(</span><span class="s1">items</span><span class="s3">, </span><span class="s1">selector</span><span class="s3">).</span><span class="s1">sort</span><span class="s3">(</span><span class="s1">comparator</span><span class="s3">);</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@template </span><span class="s5">T @template R @typedef {{ [P in keyof T]: R }} MappedValues&lt;T, R&gt; */</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">T</span>
 <span class="s5">* </span><span class="s6">@template </span><span class="s5">R</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{T} obj object to be mapped</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(T[keyof T], keyof T): R} fn mapping function</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{MappedValues&lt;T, R&gt;} mapped object</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">mapObject </span><span class="s3">= (</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) =&gt; {</span>
	<span class="s4">const </span><span class="s1">newObj </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">);</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">key of Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">)) {</span>
		<span class="s1">newObj</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = </span><span class="s1">fn</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">[</span><span class="s1">key</span><span class="s3">], </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{keyof T} */ </span><span class="s3">(</span><span class="s1">key</span><span class="s3">));</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">newObj</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Compilation} compilation the compilation</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(Compilation, string): any[]} getItems get items</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{number} total number</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">countWithChildren </span><span class="s3">= (</span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">getItems</span><span class="s3">) =&gt; {</span>
	<span class="s4">let </span><span class="s1">count </span><span class="s3">= </span><span class="s1">getItems</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">, </span><span class="s2">&quot;&quot;</span><span class="s3">).</span><span class="s1">length</span><span class="s3">;</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">child of compilation</span><span class="s3">.</span><span class="s1">children</span><span class="s3">) {</span>
		<span class="s1">count </span><span class="s3">+= </span><span class="s1">countWithChildren</span><span class="s3">(</span><span class="s1">child</span><span class="s3">, (</span><span class="s1">c</span><span class="s3">, </span><span class="s1">type</span><span class="s3">) =&gt;</span>
			<span class="s1">getItems</span><span class="s3">(</span><span class="s1">c</span><span class="s3">, </span><span class="s2">`.children[].compilation</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">`</span><span class="s3">)</span>
		<span class="s3">);</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">count</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{ExtractorsByOption&lt;WebpackError | string, StatsError&gt;} */</span>
<span class="s4">const </span><span class="s1">EXTRACT_ERROR </span><span class="s3">= {</span>
	<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">error</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">requestShortener </span><span class="s3">}) =&gt; {</span>
		<span class="s0">// TODO webpack 6 disallow strings in the errors/warnings list</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">error </span><span class="s3">=== </span><span class="s2">&quot;string&quot;</span><span class="s3">) {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">message </span><span class="s3">= </span><span class="s1">error</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">error</span><span class="s3">.</span><span class="s1">chunk</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">chunkName </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">chunkEntry </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">hasRuntime</span><span class="s3">();</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">chunkInitial </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">canBeInitial</span><span class="s3">();</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">error</span><span class="s3">.</span><span class="s1">file</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">file </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">file</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">error</span><span class="s3">.</span><span class="s1">module</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleIdentifier </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">module</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">();</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleName </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">module</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">error</span><span class="s3">.</span><span class="s1">loc</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">loc </span><span class="s3">= </span><span class="s1">formatLocation</span><span class="s3">(</span><span class="s1">error</span><span class="s3">.</span><span class="s1">loc</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">message </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">message</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">ids</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">error</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">error </span><span class="s3">!== </span><span class="s2">&quot;string&quot;</span><span class="s3">) {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">error</span><span class="s3">.</span><span class="s1">chunk</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">chunkId </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">id</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">error</span><span class="s3">.</span><span class="s1">module</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleId </span><span class="s3">= </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">error</span><span class="s3">.</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">moduleTrace</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">error</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">error </span><span class="s3">!== </span><span class="s2">&quot;string&quot; </span><span class="s3">&amp;&amp; </span><span class="s1">error</span><span class="s3">.</span><span class="s1">module</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s3">{</span>
				<span class="s1">type</span><span class="s3">,</span>
				<span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph </span><span class="s3">}</span>
			<span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Set&lt;Module&gt;} */</span>
			<span class="s4">const </span><span class="s1">visitedModules </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
			<span class="s4">const </span><span class="s1">moduleTrace </span><span class="s3">= [];</span>
			<span class="s4">let </span><span class="s1">current </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">module</span><span class="s3">;</span>
			<span class="s4">while </span><span class="s3">(</span><span class="s1">current</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">visitedModules</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">current</span><span class="s3">)) </span><span class="s4">break</span><span class="s3">; </span><span class="s0">// circular (technically impossible, but how knows)</span>
				<span class="s1">visitedModules</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">current</span><span class="s3">);</span>
				<span class="s4">const </span><span class="s1">origin </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getIssuer</span><span class="s3">(</span><span class="s1">current</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">origin</span><span class="s3">) </span><span class="s4">break</span><span class="s3">;</span>
				<span class="s1">moduleTrace</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({ </span><span class="s1">origin</span><span class="s3">, </span><span class="s1">module</span><span class="s3">: </span><span class="s1">current </span><span class="s3">});</span>
				<span class="s1">current </span><span class="s3">= </span><span class="s1">origin</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleTrace </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.moduleTrace`</span><span class="s3">,</span>
				<span class="s1">moduleTrace</span><span class="s3">,</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">errorDetails</span><span class="s3">: (</span>
		<span class="s1">object</span><span class="s3">,</span>
		<span class="s1">error</span><span class="s3">,</span>
		<span class="s3">{ </span><span class="s1">type</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">cachedGetErrors</span><span class="s3">, </span><span class="s1">cachedGetWarnings </span><span class="s3">},</span>
		<span class="s3">{ </span><span class="s1">errorDetails </span><span class="s3">}</span>
	<span class="s3">) =&gt; {</span>
		<span class="s4">if </span><span class="s3">(</span>
			<span class="s4">typeof </span><span class="s1">error </span><span class="s3">!== </span><span class="s2">&quot;string&quot; </span><span class="s3">&amp;&amp;</span>
			<span class="s3">(</span><span class="s1">errorDetails </span><span class="s3">=== </span><span class="s4">true </span><span class="s3">||</span>
				<span class="s3">(</span><span class="s1">type</span><span class="s3">.</span><span class="s1">endsWith</span><span class="s3">(</span><span class="s2">&quot;.error&quot;</span><span class="s3">) &amp;&amp; </span><span class="s1">cachedGetErrors</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">).</span><span class="s1">length </span><span class="s3">&lt; </span><span class="s7">3</span><span class="s3">))</span>
		<span class="s3">) {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">details </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">details</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">errorStack</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">error</span><span class="s3">) =&gt; {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">error </span><span class="s3">!== </span><span class="s2">&quot;string&quot;</span><span class="s3">) {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">stack </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">stack</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{SimpleExtractors} */</span>
<span class="s4">const </span><span class="s1">SIMPLE_EXTRACTORS </span><span class="s3">= {</span>
	<span class="s1">compilation</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) =&gt; {</span>
			<span class="s4">if </span><span class="s3">(!</span><span class="s1">context</span><span class="s3">.</span><span class="s1">makePathsRelative</span><span class="s3">) {</span>
				<span class="s1">context</span><span class="s3">.</span><span class="s1">makePathsRelative </span><span class="s3">= </span><span class="s1">makePathsRelative</span><span class="s3">.</span><span class="s1">bindContextCache</span><span class="s3">(</span>
					<span class="s1">compilation</span><span class="s3">.</span><span class="s1">compiler</span><span class="s3">.</span><span class="s1">context</span><span class="s3">,</span>
					<span class="s1">compilation</span><span class="s3">.</span><span class="s1">compiler</span><span class="s3">.</span><span class="s1">root</span>
				<span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(!</span><span class="s1">context</span><span class="s3">.</span><span class="s1">cachedGetErrors</span><span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">map </span><span class="s3">= </span><span class="s4">new </span><span class="s1">WeakMap</span><span class="s3">();</span>
				<span class="s1">context</span><span class="s3">.</span><span class="s1">cachedGetErrors </span><span class="s3">= </span><span class="s1">compilation </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s3">(</span>
						<span class="s1">map</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">) ||</span>
						<span class="s3">(</span><span class="s1">errors </span><span class="s3">=&gt; (</span><span class="s1">map</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">errors</span><span class="s3">), </span><span class="s1">errors</span><span class="s3">))(</span>
							<span class="s1">compilation</span><span class="s3">.</span><span class="s1">getErrors</span><span class="s3">()</span>
						<span class="s3">)</span>
					<span class="s3">);</span>
				<span class="s3">};</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(!</span><span class="s1">context</span><span class="s3">.</span><span class="s1">cachedGetWarnings</span><span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">map </span><span class="s3">= </span><span class="s4">new </span><span class="s1">WeakMap</span><span class="s3">();</span>
				<span class="s1">context</span><span class="s3">.</span><span class="s1">cachedGetWarnings </span><span class="s3">= </span><span class="s1">compilation </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s3">(</span>
						<span class="s1">map</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">) ||</span>
						<span class="s3">(</span><span class="s1">warnings </span><span class="s3">=&gt; (</span><span class="s1">map</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">warnings</span><span class="s3">), </span><span class="s1">warnings</span><span class="s3">))(</span>
							<span class="s1">compilation</span><span class="s3">.</span><span class="s1">getWarnings</span><span class="s3">()</span>
						<span class="s3">)</span>
					<span class="s3">);</span>
				<span class="s3">};</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">name</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">name </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">needAdditionalPass</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">needAdditionalPass </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
			<span class="s3">}</span>

			<span class="s4">const </span><span class="s3">{ </span><span class="s1">logging</span><span class="s3">, </span><span class="s1">loggingDebug</span><span class="s3">, </span><span class="s1">loggingTrace </span><span class="s3">} = </span><span class="s1">options</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">logging </span><span class="s3">|| (</span><span class="s1">loggingDebug </span><span class="s3">&amp;&amp; </span><span class="s1">loggingDebug</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">)) {</span>
				<span class="s4">const </span><span class="s1">util </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;util&quot;</span><span class="s3">);</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">logging </span><span class="s3">= {};</span>
				<span class="s4">let </span><span class="s1">acceptedTypes</span><span class="s3">;</span>
				<span class="s4">let </span><span class="s1">collapsedGroups </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
				<span class="s4">switch </span><span class="s3">(</span><span class="s1">logging</span><span class="s3">) {</span>
					<span class="s4">default</span><span class="s3">:</span>
						<span class="s1">acceptedTypes </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
						<span class="s4">break</span><span class="s3">;</span>
					<span class="s4">case </span><span class="s2">&quot;error&quot;</span><span class="s3">:</span>
						<span class="s1">acceptedTypes </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">([</span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">error</span><span class="s3">]);</span>
						<span class="s4">break</span><span class="s3">;</span>
					<span class="s4">case </span><span class="s2">&quot;warn&quot;</span><span class="s3">:</span>
						<span class="s1">acceptedTypes </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">([</span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">error</span><span class="s3">, </span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">]);</span>
						<span class="s4">break</span><span class="s3">;</span>
					<span class="s4">case </span><span class="s2">&quot;info&quot;</span><span class="s3">:</span>
						<span class="s1">acceptedTypes </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">([</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">error</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">info</span>
						<span class="s3">]);</span>
						<span class="s4">break</span><span class="s3">;</span>
					<span class="s4">case </span><span class="s2">&quot;log&quot;</span><span class="s3">:</span>
						<span class="s1">acceptedTypes </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">([</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">error</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">info</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">log</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">group</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">groupEnd</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">groupCollapsed</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">clear</span>
						<span class="s3">]);</span>
						<span class="s4">break</span><span class="s3">;</span>
					<span class="s4">case </span><span class="s2">&quot;verbose&quot;</span><span class="s3">:</span>
						<span class="s1">acceptedTypes </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">([</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">error</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">info</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">log</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">group</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">groupEnd</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">groupCollapsed</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">profile</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">profileEnd</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">time</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">status</span><span class="s3">,</span>
							<span class="s1">LogType</span><span class="s3">.</span><span class="s1">clear</span>
						<span class="s3">]);</span>
						<span class="s1">collapsedGroups </span><span class="s3">= </span><span class="s4">true</span><span class="s3">;</span>
						<span class="s4">break</span><span class="s3">;</span>
				<span class="s3">}</span>
				<span class="s4">const </span><span class="s1">cachedMakePathsRelative </span><span class="s3">= </span><span class="s1">makePathsRelative</span><span class="s3">.</span><span class="s1">bindContextCache</span><span class="s3">(</span>
					<span class="s1">options</span><span class="s3">.</span><span class="s1">context</span><span class="s3">,</span>
					<span class="s1">compilation</span><span class="s3">.</span><span class="s1">compiler</span><span class="s3">.</span><span class="s1">root</span>
				<span class="s3">);</span>
				<span class="s4">let </span><span class="s1">depthInCollapsedGroup </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s3">[</span><span class="s1">origin</span><span class="s3">, </span><span class="s1">logEntries</span><span class="s3">] </span><span class="s1">of compilation</span><span class="s3">.</span><span class="s1">logging</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">debugMode </span><span class="s3">= </span><span class="s1">loggingDebug</span><span class="s3">.</span><span class="s1">some</span><span class="s3">(</span><span class="s1">fn </span><span class="s3">=&gt; </span><span class="s1">fn</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">));</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">logging </span><span class="s3">=== </span><span class="s4">false </span><span class="s3">&amp;&amp; !</span><span class="s1">debugMode</span><span class="s3">) </span><span class="s4">continue</span><span class="s3">;</span>
					<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsLoggingEntry[]} */</span>
					<span class="s4">const </span><span class="s1">groupStack </span><span class="s3">= [];</span>
					<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsLoggingEntry[]} */</span>
					<span class="s4">const </span><span class="s1">rootList </span><span class="s3">= [];</span>
					<span class="s4">let </span><span class="s1">currentList </span><span class="s3">= </span><span class="s1">rootList</span><span class="s3">;</span>
					<span class="s4">let </span><span class="s1">processedLogEntries </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
					<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">entry of logEntries</span><span class="s3">) {</span>
						<span class="s4">let </span><span class="s1">type </span><span class="s3">= </span><span class="s1">entry</span><span class="s3">.</span><span class="s1">type</span><span class="s3">;</span>
						<span class="s4">if </span><span class="s3">(!</span><span class="s1">debugMode </span><span class="s3">&amp;&amp; !</span><span class="s1">acceptedTypes</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">type</span><span class="s3">)) </span><span class="s4">continue</span><span class="s3">;</span>

						<span class="s0">// Expand groups in verbose and debug modes</span>
						<span class="s4">if </span><span class="s3">(</span>
							<span class="s1">type </span><span class="s3">=== </span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">groupCollapsed </span><span class="s3">&amp;&amp;</span>
							<span class="s3">(</span><span class="s1">debugMode </span><span class="s3">|| </span><span class="s1">collapsedGroups</span><span class="s3">)</span>
						<span class="s3">)</span>
							<span class="s1">type </span><span class="s3">= </span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">group</span><span class="s3">;</span>

						<span class="s4">if </span><span class="s3">(</span><span class="s1">depthInCollapsedGroup </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">) {</span>
							<span class="s1">processedLogEntries</span><span class="s3">++;</span>
						<span class="s3">}</span>

						<span class="s4">if </span><span class="s3">(</span><span class="s1">type </span><span class="s3">=== </span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">groupEnd</span><span class="s3">) {</span>
							<span class="s1">groupStack</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">groupStack</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
								<span class="s1">currentList </span><span class="s3">= </span><span class="s1">groupStack</span><span class="s3">[</span><span class="s1">groupStack</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s7">1</span><span class="s3">].</span><span class="s1">children</span><span class="s3">;</span>
							<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
								<span class="s1">currentList </span><span class="s3">= </span><span class="s1">rootList</span><span class="s3">;</span>
							<span class="s3">}</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">depthInCollapsedGroup </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) </span><span class="s1">depthInCollapsedGroup</span><span class="s3">--;</span>
							<span class="s4">continue</span><span class="s3">;</span>
						<span class="s3">}</span>
						<span class="s4">let </span><span class="s1">message </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">entry</span><span class="s3">.</span><span class="s1">type </span><span class="s3">=== </span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">time</span><span class="s3">) {</span>
							<span class="s1">message </span><span class="s3">= </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">entry</span><span class="s3">.</span><span class="s1">args</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]}</span><span class="s2">: </span><span class="s1">$</span><span class="s3">{</span>
								<span class="s1">entry</span><span class="s3">.</span><span class="s1">args</span><span class="s3">[</span><span class="s7">1</span><span class="s3">] * </span><span class="s7">1000 </span><span class="s3">+ </span><span class="s1">entry</span><span class="s3">.</span><span class="s1">args</span><span class="s3">[</span><span class="s7">2</span><span class="s3">] / </span><span class="s7">1000000</span>
							<span class="s3">} </span><span class="s2">ms`</span><span class="s3">;</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">entry</span><span class="s3">.</span><span class="s1">args </span><span class="s3">&amp;&amp; </span><span class="s1">entry</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
							<span class="s1">message </span><span class="s3">= </span><span class="s1">util</span><span class="s3">.</span><span class="s1">format</span><span class="s3">(</span><span class="s1">entry</span><span class="s3">.</span><span class="s1">args</span><span class="s3">[</span><span class="s7">0</span><span class="s3">], </span><span class="s1">...entry</span><span class="s3">.</span><span class="s1">args</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">1</span><span class="s3">));</span>
						<span class="s3">}</span>
						<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsLoggingEntry} */</span>
						<span class="s4">const </span><span class="s1">newEntry </span><span class="s3">= {</span>
							<span class="s1">...entry</span><span class="s3">,</span>
							<span class="s1">type</span><span class="s3">,</span>
							<span class="s1">message</span><span class="s3">,</span>
							<span class="s1">trace</span><span class="s3">: </span><span class="s1">loggingTrace </span><span class="s3">? </span><span class="s1">entry</span><span class="s3">.</span><span class="s1">trace </span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
							<span class="s1">children</span><span class="s3">:</span>
								<span class="s1">type </span><span class="s3">=== </span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">group </span><span class="s3">|| </span><span class="s1">type </span><span class="s3">=== </span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">groupCollapsed</span>
									<span class="s3">? []</span>
									<span class="s3">: </span><span class="s1">undefined</span>
						<span class="s3">};</span>
						<span class="s1">currentList</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">newEntry</span><span class="s3">);</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">newEntry</span><span class="s3">.</span><span class="s1">children</span><span class="s3">) {</span>
							<span class="s1">groupStack</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">newEntry</span><span class="s3">);</span>
							<span class="s1">currentList </span><span class="s3">= </span><span class="s1">newEntry</span><span class="s3">.</span><span class="s1">children</span><span class="s3">;</span>
							<span class="s4">if </span><span class="s3">(</span><span class="s1">depthInCollapsedGroup </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
								<span class="s1">depthInCollapsedGroup</span><span class="s3">++;</span>
							<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">type </span><span class="s3">=== </span><span class="s1">LogType</span><span class="s3">.</span><span class="s1">groupCollapsed</span><span class="s3">) {</span>
								<span class="s1">depthInCollapsedGroup </span><span class="s3">= </span><span class="s7">1</span><span class="s3">;</span>
							<span class="s3">}</span>
						<span class="s3">}</span>
					<span class="s3">}</span>
					<span class="s4">let </span><span class="s1">name </span><span class="s3">= </span><span class="s1">cachedMakePathsRelative</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">).</span><span class="s1">replace</span><span class="s3">(</span><span class="s8">/\|/g</span><span class="s3">, </span><span class="s2">&quot; &quot;</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">name </span><span class="s4">in </span><span class="s1">object</span><span class="s3">.</span><span class="s1">logging</span><span class="s3">) {</span>
						<span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">1</span><span class="s3">;</span>
						<span class="s4">while </span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">name</span><span class="s3">}</span><span class="s2">#</span><span class="s1">$</span><span class="s3">{</span><span class="s1">i</span><span class="s3">}</span><span class="s2">` </span><span class="s4">in </span><span class="s1">object</span><span class="s3">.</span><span class="s1">logging</span><span class="s3">) {</span>
							<span class="s1">i</span><span class="s3">++;</span>
						<span class="s3">}</span>
						<span class="s1">name </span><span class="s3">= </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">name</span><span class="s3">}</span><span class="s2">#</span><span class="s1">$</span><span class="s3">{</span><span class="s1">i</span><span class="s3">}</span><span class="s2">`</span><span class="s3">;</span>
					<span class="s3">}</span>
					<span class="s1">object</span><span class="s3">.</span><span class="s1">logging</span><span class="s3">[</span><span class="s1">name</span><span class="s3">] = {</span>
						<span class="s1">entries</span><span class="s3">: </span><span class="s1">rootList</span><span class="s3">,</span>
						<span class="s1">filteredEntries</span><span class="s3">: </span><span class="s1">logEntries</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s1">processedLogEntries</span><span class="s3">,</span>
						<span class="s1">debug</span><span class="s3">: </span><span class="s1">debugMode</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">},</span>
		<span class="s1">hash</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">hash </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">hash</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">version</span><span class="s3">: </span><span class="s1">object </span><span class="s3">=&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">version </span><span class="s3">= </span><span class="s1">require</span><span class="s3">(</span><span class="s2">&quot;../../package.json&quot;</span><span class="s3">).</span><span class="s1">version</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">env</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">_env </span><span class="s3">}) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">env </span><span class="s3">= </span><span class="s1">_env</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">timings</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">time </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">endTime </span><span class="s3">- </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">startTime</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">builtAt</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">builtAt </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">endTime</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">publicPath</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">publicPath </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">getPath</span><span class="s3">(</span>
				<span class="s1">compilation</span><span class="s3">.</span><span class="s1">outputOptions</span><span class="s3">.</span><span class="s1">publicPath</span>
			<span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">outputPath</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">outputPath </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">outputOptions</span><span class="s3">.</span><span class="s1">path</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">assets</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Map&lt;string, Chunk[]&gt;} */</span>
			<span class="s4">const </span><span class="s1">compilationFileToChunks </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Map</span><span class="s3">();</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Map&lt;string, Chunk[]&gt;} */</span>
			<span class="s4">const </span><span class="s1">compilationAuxiliaryFileToChunks </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Map</span><span class="s3">();</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">chunk of compilation</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">) {</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">file of chunk</span><span class="s3">.</span><span class="s1">files</span><span class="s3">) {</span>
					<span class="s4">let </span><span class="s1">array </span><span class="s3">= </span><span class="s1">compilationFileToChunks</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">file</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">array </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
						<span class="s1">array </span><span class="s3">= [];</span>
						<span class="s1">compilationFileToChunks</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">file</span><span class="s3">, </span><span class="s1">array</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s1">array</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">);</span>
				<span class="s3">}</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">file of chunk</span><span class="s3">.</span><span class="s1">auxiliaryFiles</span><span class="s3">) {</span>
					<span class="s4">let </span><span class="s1">array </span><span class="s3">= </span><span class="s1">compilationAuxiliaryFileToChunks</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">file</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">array </span><span class="s3">=== </span><span class="s1">undefined</span><span class="s3">) {</span>
						<span class="s1">array </span><span class="s3">= [];</span>
						<span class="s1">compilationAuxiliaryFileToChunks</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">file</span><span class="s3">, </span><span class="s1">array</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s1">array</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Map&lt;string, PreprocessedAsset&gt;} */</span>
			<span class="s4">const </span><span class="s1">assetMap </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Map</span><span class="s3">();</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Set&lt;PreprocessedAsset&gt;} */</span>
			<span class="s4">const </span><span class="s1">assets </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">asset of compilation</span><span class="s3">.</span><span class="s1">getAssets</span><span class="s3">()) {</span>
				<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{PreprocessedAsset} */</span>
				<span class="s4">const </span><span class="s1">item </span><span class="s3">= {</span>
					<span class="s1">...asset</span><span class="s3">,</span>
					<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;asset&quot;</span><span class="s3">,</span>
					<span class="s1">related</span><span class="s3">: </span><span class="s1">undefined</span>
				<span class="s3">};</span>
				<span class="s1">assets</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">item</span><span class="s3">);</span>
				<span class="s1">assetMap</span><span class="s3">.</span><span class="s1">set</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">, </span><span class="s1">item</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">item of assetMap</span><span class="s3">.</span><span class="s1">values</span><span class="s3">()) {</span>
				<span class="s4">const </span><span class="s1">related </span><span class="s3">= </span><span class="s1">item</span><span class="s3">.</span><span class="s1">info</span><span class="s3">.</span><span class="s1">related</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">related</span><span class="s3">) </span><span class="s4">continue</span><span class="s3">;</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">type of Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">related</span><span class="s3">)) {</span>
					<span class="s4">const </span><span class="s1">relatedEntry </span><span class="s3">= </span><span class="s1">related</span><span class="s3">[</span><span class="s1">type</span><span class="s3">];</span>
					<span class="s4">const </span><span class="s1">deps </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">relatedEntry</span><span class="s3">)</span>
						<span class="s3">? </span><span class="s1">relatedEntry</span>
						<span class="s3">: [</span><span class="s1">relatedEntry</span><span class="s3">];</span>
					<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">dep of deps</span><span class="s3">) {</span>
						<span class="s4">const </span><span class="s1">depItem </span><span class="s3">= </span><span class="s1">assetMap</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">dep</span><span class="s3">);</span>
						<span class="s4">if </span><span class="s3">(!</span><span class="s1">depItem</span><span class="s3">) </span><span class="s4">continue</span><span class="s3">;</span>
						<span class="s1">assets</span><span class="s3">.</span><span class="s1">delete</span><span class="s3">(</span><span class="s1">depItem</span><span class="s3">);</span>
						<span class="s1">depItem</span><span class="s3">.</span><span class="s1">type </span><span class="s3">= </span><span class="s1">type</span><span class="s3">;</span>
						<span class="s1">item</span><span class="s3">.</span><span class="s1">related </span><span class="s3">= </span><span class="s1">item</span><span class="s3">.</span><span class="s1">related </span><span class="s3">|| [];</span>
						<span class="s1">item</span><span class="s3">.</span><span class="s1">related</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">depItem</span><span class="s3">);</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
			<span class="s3">}</span>

			<span class="s1">object</span><span class="s3">.</span><span class="s1">assetsByChunkName </span><span class="s3">= {};</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s3">[</span><span class="s1">file</span><span class="s3">, </span><span class="s1">chunks</span><span class="s3">] </span><span class="s1">of compilationFileToChunks</span><span class="s3">) {</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">chunk of chunks</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">name </span><span class="s3">= </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s1">name</span><span class="s3">) </span><span class="s4">continue</span><span class="s3">;</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s3">!</span><span class="s1">Object</span><span class="s3">.</span><span class="s1">prototype</span><span class="s3">.</span><span class="s1">hasOwnProperty</span><span class="s3">.</span><span class="s1">call</span><span class="s3">(</span>
							<span class="s1">object</span><span class="s3">.</span><span class="s1">assetsByChunkName</span><span class="s3">,</span>
							<span class="s1">name</span>
						<span class="s3">)</span>
					<span class="s3">) {</span>
						<span class="s1">object</span><span class="s3">.</span><span class="s1">assetsByChunkName</span><span class="s3">[</span><span class="s1">name</span><span class="s3">] = [];</span>
					<span class="s3">}</span>
					<span class="s1">object</span><span class="s3">.</span><span class="s1">assetsByChunkName</span><span class="s3">[</span><span class="s1">name</span><span class="s3">].</span><span class="s1">push</span><span class="s3">(</span><span class="s1">file</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">}</span>

			<span class="s4">const </span><span class="s1">groupedAssets </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.assets`</span><span class="s3">,</span>
				<span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">assets</span><span class="s3">),</span>
				<span class="s3">{</span>
					<span class="s1">...context</span><span class="s3">,</span>
					<span class="s1">compilationFileToChunks</span><span class="s3">,</span>
					<span class="s1">compilationAuxiliaryFileToChunks</span>
				<span class="s3">}</span>
			<span class="s3">);</span>
			<span class="s4">const </span><span class="s1">limited </span><span class="s3">= </span><span class="s1">spaceLimited</span><span class="s3">(</span><span class="s1">groupedAssets</span><span class="s3">, </span><span class="s1">options</span><span class="s3">.</span><span class="s1">assetsSpace</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">assets </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">children</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredAssets </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">chunks</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">chunks </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.chunks`</span><span class="s3">,</span>
				<span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">),</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">modules</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">array </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">modules</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">groupedModules </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.modules`</span><span class="s3">, </span><span class="s1">array</span><span class="s3">, </span><span class="s1">context</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">limited </span><span class="s3">= </span><span class="s1">spaceLimited</span><span class="s3">(</span><span class="s1">groupedModules</span><span class="s3">, </span><span class="s1">options</span><span class="s3">.</span><span class="s1">modulesSpace</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">modules </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">children</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredModules </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">entrypoints</span><span class="s3">: (</span>
			<span class="s1">object</span><span class="s3">,</span>
			<span class="s1">compilation</span><span class="s3">,</span>
			<span class="s1">context</span><span class="s3">,</span>
			<span class="s3">{ </span><span class="s1">entrypoints</span><span class="s3">, </span><span class="s1">chunkGroups</span><span class="s3">, </span><span class="s1">chunkGroupAuxiliary</span><span class="s3">, </span><span class="s1">chunkGroupChildren </span><span class="s3">},</span>
			<span class="s1">factory</span>
		<span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">array </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">entrypoints</span><span class="s3">, ([</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">]) =&gt; ({</span>
				<span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
				<span class="s1">chunkGroup</span><span class="s3">: </span><span class="s1">value</span>
			<span class="s3">}));</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">entrypoints </span><span class="s3">=== </span><span class="s2">&quot;auto&quot; </span><span class="s3">&amp;&amp; !</span><span class="s1">chunkGroups</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">array</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">5</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span>
					<span class="s3">!</span><span class="s1">chunkGroupChildren </span><span class="s3">&amp;&amp;</span>
					<span class="s1">array</span><span class="s3">.</span><span class="s1">every</span><span class="s3">(({ </span><span class="s1">chunkGroup </span><span class="s3">}) =&gt; {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">chunkGroup</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">.</span><span class="s1">length </span><span class="s3">!== </span><span class="s7">1</span><span class="s3">) </span><span class="s4">return false</span><span class="s3">;</span>
						<span class="s4">const </span><span class="s1">chunk </span><span class="s3">= </span><span class="s1">chunkGroup</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">[</span><span class="s7">0</span><span class="s3">];</span>
						<span class="s4">return </span><span class="s3">(</span>
							<span class="s1">chunk</span><span class="s3">.</span><span class="s1">files</span><span class="s3">.</span><span class="s1">size </span><span class="s3">=== </span><span class="s7">1 </span><span class="s3">&amp;&amp;</span>
							<span class="s3">(!</span><span class="s1">chunkGroupAuxiliary </span><span class="s3">|| </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">auxiliaryFiles</span><span class="s3">.</span><span class="s1">size </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">)</span>
						<span class="s3">);</span>
					<span class="s3">})</span>
				<span class="s3">) {</span>
					<span class="s4">return</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">entrypoints </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.entrypoints`</span><span class="s3">,</span>
				<span class="s1">array</span><span class="s3">,</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">chunkGroups</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">array </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span>
				<span class="s1">compilation</span><span class="s3">.</span><span class="s1">namedChunkGroups</span><span class="s3">,</span>
				<span class="s3">([</span><span class="s1">key</span><span class="s3">, </span><span class="s1">value</span><span class="s3">]) =&gt; ({</span>
					<span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
					<span class="s1">chunkGroup</span><span class="s3">: </span><span class="s1">value</span>
				<span class="s3">})</span>
			<span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">namedChunkGroups </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.namedChunkGroups`</span><span class="s3">,</span>
				<span class="s1">array</span><span class="s3">,</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">errors</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type</span><span class="s3">, </span><span class="s1">cachedGetErrors </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">rawErrors </span><span class="s3">= </span><span class="s1">cachedGetErrors</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">factorizedErrors </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.errors`</span><span class="s3">,</span>
				<span class="s1">cachedGetErrors</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">),</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
			<span class="s4">let </span><span class="s1">filtered </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">errorDetails </span><span class="s3">=== </span><span class="s2">&quot;auto&quot; </span><span class="s3">&amp;&amp; </span><span class="s1">rawErrors</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt;= </span><span class="s7">3</span><span class="s3">) {</span>
				<span class="s1">filtered </span><span class="s3">= </span><span class="s1">rawErrors</span>
					<span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">e </span><span class="s3">=&gt; </span><span class="s4">typeof </span><span class="s1">e </span><span class="s3">!== </span><span class="s2">&quot;string&quot; </span><span class="s3">&amp;&amp; </span><span class="s1">e</span><span class="s3">.</span><span class="s1">details</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">length</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s1">options</span><span class="s3">.</span><span class="s1">errorDetails </span><span class="s3">=== </span><span class="s4">true </span><span class="s3">||</span>
				<span class="s3">!</span><span class="s1">Number</span><span class="s3">.</span><span class="s1">isFinite</span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">errorsSpace</span><span class="s3">)</span>
			<span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">errors </span><span class="s3">= </span><span class="s1">factorizedErrors</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">filtered</span><span class="s3">) </span><span class="s1">object</span><span class="s3">.</span><span class="s1">filteredErrorDetailsCount </span><span class="s3">= </span><span class="s1">filtered</span><span class="s3">;</span>
				<span class="s4">return</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">const </span><span class="s3">[</span><span class="s1">errors</span><span class="s3">, </span><span class="s1">filteredBySpace</span><span class="s3">] = </span><span class="s1">errorsSpaceLimit</span><span class="s3">(</span>
				<span class="s1">factorizedErrors</span><span class="s3">,</span>
				<span class="s1">options</span><span class="s3">.</span><span class="s1">errorsSpace</span>
			<span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredErrorDetailsCount </span><span class="s3">= </span><span class="s1">filtered </span><span class="s3">+ </span><span class="s1">filteredBySpace</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">errors </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">errorsCount</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, { </span><span class="s1">cachedGetErrors </span><span class="s3">}) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">errorsCount </span><span class="s3">= </span><span class="s1">countWithChildren</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">c </span><span class="s3">=&gt;</span>
				<span class="s1">cachedGetErrors</span><span class="s3">(</span><span class="s1">c</span><span class="s3">)</span>
			<span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">warnings</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type</span><span class="s3">, </span><span class="s1">cachedGetWarnings </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">rawWarnings </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.warnings`</span><span class="s3">,</span>
				<span class="s1">cachedGetWarnings</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">),</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
			<span class="s4">let </span><span class="s1">filtered </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">errorDetails </span><span class="s3">=== </span><span class="s2">&quot;auto&quot;</span><span class="s3">) {</span>
				<span class="s1">filtered </span><span class="s3">= </span><span class="s1">cachedGetWarnings</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">e </span><span class="s3">=&gt; </span><span class="s4">typeof </span><span class="s1">e </span><span class="s3">!== </span><span class="s2">&quot;string&quot; </span><span class="s3">&amp;&amp; </span><span class="s1">e</span><span class="s3">.</span><span class="s1">details</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">Boolean</span><span class="s3">).</span><span class="s1">length</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s1">options</span><span class="s3">.</span><span class="s1">errorDetails </span><span class="s3">=== </span><span class="s4">true </span><span class="s3">||</span>
				<span class="s3">!</span><span class="s1">Number</span><span class="s3">.</span><span class="s1">isFinite</span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">warningsSpace</span><span class="s3">)</span>
			<span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">warnings </span><span class="s3">= </span><span class="s1">rawWarnings</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">filtered</span><span class="s3">) </span><span class="s1">object</span><span class="s3">.</span><span class="s1">filteredWarningDetailsCount </span><span class="s3">= </span><span class="s1">filtered</span><span class="s3">;</span>
				<span class="s4">return</span><span class="s3">;</span>
			<span class="s3">}</span>
			<span class="s4">const </span><span class="s3">[</span><span class="s1">warnings</span><span class="s3">, </span><span class="s1">filteredBySpace</span><span class="s3">] = </span><span class="s1">errorsSpaceLimit</span><span class="s3">(</span>
				<span class="s1">rawWarnings</span><span class="s3">,</span>
				<span class="s1">options</span><span class="s3">.</span><span class="s1">warningsSpace</span>
			<span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredWarningDetailsCount </span><span class="s3">= </span><span class="s1">filtered </span><span class="s3">+ </span><span class="s1">filteredBySpace</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">warnings </span><span class="s3">= </span><span class="s1">warnings</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">warningsCount</span><span class="s3">: (</span>
			<span class="s1">object</span><span class="s3">,</span>
			<span class="s1">compilation</span><span class="s3">,</span>
			<span class="s1">context</span><span class="s3">,</span>
			<span class="s3">{ </span><span class="s1">warningsFilter </span><span class="s3">},</span>
			<span class="s1">factory</span>
		<span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type</span><span class="s3">, </span><span class="s1">cachedGetWarnings </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">warningsCount </span><span class="s3">= </span><span class="s1">countWithChildren</span><span class="s3">(</span><span class="s1">compilation</span><span class="s3">, (</span><span class="s1">c</span><span class="s3">, </span><span class="s1">childType</span><span class="s3">) =&gt; {</span>
				<span class="s4">if </span><span class="s3">(!</span><span class="s1">warningsFilter </span><span class="s3">&amp;&amp; </span><span class="s1">warningsFilter</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">)</span>
					<span class="s4">return </span><span class="s1">cachedGetWarnings</span><span class="s3">(</span><span class="s1">c</span><span class="s3">);</span>
				<span class="s4">return </span><span class="s1">factory</span>
					<span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s1">$</span><span class="s3">{</span><span class="s1">childType</span><span class="s3">}</span><span class="s2">.warnings`</span><span class="s3">, </span><span class="s1">cachedGetWarnings</span><span class="s3">(</span><span class="s1">c</span><span class="s3">), </span><span class="s1">context</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">warning </span><span class="s3">=&gt; {</span>
						<span class="s4">const </span><span class="s1">warningString </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">warning</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">key </span><span class="s3">=&gt; </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">warning</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]}</span><span class="s2">`</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">&quot;</span><span class="s4">\n</span><span class="s2">&quot;</span><span class="s3">);</span>
						<span class="s4">return </span><span class="s3">!</span><span class="s1">warningsFilter</span><span class="s3">.</span><span class="s1">some</span><span class="s3">(</span><span class="s1">filter </span><span class="s3">=&gt;</span>
							<span class="s1">filter</span><span class="s3">(</span><span class="s1">warning</span><span class="s3">, </span><span class="s1">warningString</span><span class="s3">)</span>
						<span class="s3">);</span>
					<span class="s3">});</span>
			<span class="s3">});</span>
		<span class="s3">},</span>
		<span class="s1">children</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">children </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.children`</span><span class="s3">,</span>
				<span class="s1">compilation</span><span class="s3">.</span><span class="s1">children</span><span class="s3">,</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">asset</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">asset</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">compilation </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">type </span><span class="s3">= </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">type</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">name </span><span class="s3">= </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">size </span><span class="s3">= </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">source</span><span class="s3">.</span><span class="s1">size</span><span class="s3">();</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">emitted </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">emittedAssets</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">comparedForEmit </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">comparedForEmitAssets</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span>
				<span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span>
			<span class="s3">);</span>
			<span class="s4">const </span><span class="s1">cached </span><span class="s3">= !</span><span class="s1">object</span><span class="s3">.</span><span class="s1">emitted </span><span class="s3">&amp;&amp; !</span><span class="s1">object</span><span class="s3">.</span><span class="s1">comparedForEmit</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">cached </span><span class="s3">= </span><span class="s1">cached</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">info </span><span class="s3">= </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">info</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(!</span><span class="s1">cached </span><span class="s3">|| </span><span class="s1">options</span><span class="s3">.</span><span class="s1">cachedAssets</span><span class="s3">) {</span>
				<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span>
					<span class="s1">object</span><span class="s3">,</span>
					<span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">context</span><span class="s3">.</span><span class="s1">type</span><span class="s3">}</span><span class="s2">$visible`</span><span class="s3">, </span><span class="s1">asset</span><span class="s3">, </span><span class="s1">context</span><span class="s3">)</span>
				<span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">asset$visible</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span>
			<span class="s1">object</span><span class="s3">,</span>
			<span class="s1">asset</span><span class="s3">,</span>
			<span class="s3">{ </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">compilationFileToChunks</span><span class="s3">, </span><span class="s1">compilationAuxiliaryFileToChunks </span><span class="s3">}</span>
		<span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s1">chunks </span><span class="s3">= </span><span class="s1">compilationFileToChunks</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">) || [];</span>
			<span class="s4">const </span><span class="s1">auxiliaryChunks </span><span class="s3">=</span>
				<span class="s1">compilationAuxiliaryFileToChunks</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">) || [];</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">chunkNames </span><span class="s3">= </span><span class="s1">uniqueOrderedArray</span><span class="s3">(</span>
				<span class="s1">chunks</span><span class="s3">,</span>
				<span class="s1">c </span><span class="s3">=&gt; (</span><span class="s1">c</span><span class="s3">.</span><span class="s1">name </span><span class="s3">? [</span><span class="s1">c</span><span class="s3">.</span><span class="s1">name</span><span class="s3">] : []),</span>
				<span class="s1">compareIds</span>
			<span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">chunkIdHints </span><span class="s3">= </span><span class="s1">uniqueOrderedArray</span><span class="s3">(</span>
				<span class="s1">chunks</span><span class="s3">,</span>
				<span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">c</span><span class="s3">.</span><span class="s1">idNameHints</span><span class="s3">),</span>
				<span class="s1">compareIds</span>
			<span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">auxiliaryChunkNames </span><span class="s3">= </span><span class="s1">uniqueOrderedArray</span><span class="s3">(</span>
				<span class="s1">auxiliaryChunks</span><span class="s3">,</span>
				<span class="s1">c </span><span class="s3">=&gt; (</span><span class="s1">c</span><span class="s3">.</span><span class="s1">name </span><span class="s3">? [</span><span class="s1">c</span><span class="s3">.</span><span class="s1">name</span><span class="s3">] : []),</span>
				<span class="s1">compareIds</span>
			<span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">auxiliaryChunkIdHints </span><span class="s3">= </span><span class="s1">uniqueOrderedArray</span><span class="s3">(</span>
				<span class="s1">auxiliaryChunks</span><span class="s3">,</span>
				<span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">c</span><span class="s3">.</span><span class="s1">idNameHints</span><span class="s3">),</span>
				<span class="s1">compareIds</span>
			<span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredRelated </span><span class="s3">= </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">related </span><span class="s3">? </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">related</span><span class="s3">.</span><span class="s1">length </span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">relatedAssets</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">asset</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">related </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s7">8</span><span class="s3">)}</span><span class="s2">.related`</span><span class="s3">,</span>
				<span class="s1">asset</span><span class="s3">.</span><span class="s1">related</span><span class="s3">,</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredRelated </span><span class="s3">= </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">related</span>
				<span class="s3">? </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">related</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s1">object</span><span class="s3">.</span><span class="s1">related</span><span class="s3">.</span><span class="s1">length</span>
				<span class="s3">: </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">ids</span><span class="s3">: (</span>
			<span class="s1">object</span><span class="s3">,</span>
			<span class="s1">asset</span><span class="s3">,</span>
			<span class="s3">{ </span><span class="s1">compilationFileToChunks</span><span class="s3">, </span><span class="s1">compilationAuxiliaryFileToChunks </span><span class="s3">}</span>
		<span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s1">chunks </span><span class="s3">= </span><span class="s1">compilationFileToChunks</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">) || [];</span>
			<span class="s4">const </span><span class="s1">auxiliaryChunks </span><span class="s3">=</span>
				<span class="s1">compilationAuxiliaryFileToChunks</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">) || [];</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">chunks </span><span class="s3">= </span><span class="s1">uniqueOrderedArray</span><span class="s3">(</span><span class="s1">chunks</span><span class="s3">, </span><span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">ids</span><span class="s3">, </span><span class="s1">compareIds</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">auxiliaryChunks </span><span class="s3">= </span><span class="s1">uniqueOrderedArray</span><span class="s3">(</span>
				<span class="s1">auxiliaryChunks</span><span class="s3">,</span>
				<span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">ids</span><span class="s3">,</span>
				<span class="s1">compareIds</span>
			<span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">performance</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">asset</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">isOverSizeLimit </span><span class="s3">= </span><span class="s1">SizeLimitsPlugin</span><span class="s3">.</span><span class="s1">isOverSizeLimit</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">source</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">chunkGroup</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span>
			<span class="s1">object</span><span class="s3">,</span>
			<span class="s3">{ </span><span class="s1">name</span><span class="s3">, </span><span class="s1">chunkGroup </span><span class="s3">},</span>
			<span class="s3">{ </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph</span><span class="s3">, </span><span class="s1">chunkGraph </span><span class="s3">} },</span>
			<span class="s3">{ </span><span class="s1">ids</span><span class="s3">, </span><span class="s1">chunkGroupAuxiliary</span><span class="s3">, </span><span class="s1">chunkGroupChildren</span><span class="s3">, </span><span class="s1">chunkGroupMaxAssets </span><span class="s3">}</span>
		<span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s1">children </span><span class="s3">=</span>
				<span class="s1">chunkGroupChildren </span><span class="s3">&amp;&amp;</span>
				<span class="s1">chunkGroup</span><span class="s3">.</span><span class="s1">getChildrenByOrders</span><span class="s3">(</span><span class="s1">moduleGraph</span><span class="s3">, </span><span class="s1">chunkGraph</span><span class="s3">);</span>
			<span class="s5">/**</span>
			 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} name Name</span>
			 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{{ name: string, size: number }} Asset object</span>
			 <span class="s5">*/</span>
			<span class="s4">const </span><span class="s1">toAsset </span><span class="s3">= </span><span class="s1">name </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">asset </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">getAsset</span><span class="s3">(</span><span class="s1">name</span><span class="s3">);</span>
				<span class="s4">return </span><span class="s3">{</span>
					<span class="s1">name</span><span class="s3">,</span>
					<span class="s1">size</span><span class="s3">: </span><span class="s1">asset </span><span class="s3">? </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">info</span><span class="s3">.</span><span class="s1">size </span><span class="s3">: -</span><span class="s7">1</span>
				<span class="s3">};</span>
			<span class="s3">};</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{(total: number, asset: { size: number }) =&gt; number} */</span>
			<span class="s4">const </span><span class="s1">sizeReducer </span><span class="s3">= (</span><span class="s1">total</span><span class="s3">, { </span><span class="s1">size </span><span class="s3">}) =&gt; </span><span class="s1">total </span><span class="s3">+ </span><span class="s1">size</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">assets </span><span class="s3">= </span><span class="s1">uniqueArray</span><span class="s3">(</span><span class="s1">chunkGroup</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">, </span><span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">files</span><span class="s3">).</span><span class="s1">map</span><span class="s3">(</span><span class="s1">toAsset</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">auxiliaryAssets </span><span class="s3">= </span><span class="s1">uniqueOrderedArray</span><span class="s3">(</span>
				<span class="s1">chunkGroup</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">,</span>
				<span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">auxiliaryFiles</span><span class="s3">,</span>
				<span class="s1">compareIds</span>
			<span class="s3">).</span><span class="s1">map</span><span class="s3">(</span><span class="s1">toAsset</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">assetsSize </span><span class="s3">= </span><span class="s1">assets</span><span class="s3">.</span><span class="s1">reduce</span><span class="s3">(</span><span class="s1">sizeReducer</span><span class="s3">, </span><span class="s7">0</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">auxiliaryAssetsSize </span><span class="s3">= </span><span class="s1">auxiliaryAssets</span><span class="s3">.</span><span class="s1">reduce</span><span class="s3">(</span><span class="s1">sizeReducer</span><span class="s3">, </span><span class="s7">0</span><span class="s3">);</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsChunkGroup} */</span>
			<span class="s4">const </span><span class="s1">statsChunkGroup </span><span class="s3">= {</span>
				<span class="s1">name</span><span class="s3">,</span>
				<span class="s1">chunks</span><span class="s3">: </span><span class="s1">ids </span><span class="s3">? </span><span class="s1">chunkGroup</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">id</span><span class="s3">) : </span><span class="s1">undefined</span><span class="s3">,</span>
				<span class="s1">assets</span><span class="s3">: </span><span class="s1">assets</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">chunkGroupMaxAssets </span><span class="s3">? </span><span class="s1">assets </span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
				<span class="s1">filteredAssets</span><span class="s3">:</span>
					<span class="s1">assets</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">chunkGroupMaxAssets </span><span class="s3">? </span><span class="s7">0 </span><span class="s3">: </span><span class="s1">assets</span><span class="s3">.</span><span class="s1">length</span><span class="s3">,</span>
				<span class="s1">assetsSize</span><span class="s3">,</span>
				<span class="s1">auxiliaryAssets</span><span class="s3">:</span>
					<span class="s1">chunkGroupAuxiliary </span><span class="s3">&amp;&amp; </span><span class="s1">auxiliaryAssets</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">chunkGroupMaxAssets</span>
						<span class="s3">? </span><span class="s1">auxiliaryAssets</span>
						<span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
				<span class="s1">filteredAuxiliaryAssets</span><span class="s3">:</span>
					<span class="s1">chunkGroupAuxiliary </span><span class="s3">&amp;&amp; </span><span class="s1">auxiliaryAssets</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">chunkGroupMaxAssets</span>
						<span class="s3">? </span><span class="s7">0</span>
						<span class="s3">: </span><span class="s1">auxiliaryAssets</span><span class="s3">.</span><span class="s1">length</span><span class="s3">,</span>
				<span class="s1">auxiliaryAssetsSize</span><span class="s3">,</span>
				<span class="s1">children</span><span class="s3">: </span><span class="s1">children</span>
					<span class="s3">? </span><span class="s1">mapObject</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">groups </span><span class="s3">=&gt;</span>
							<span class="s1">groups</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">group </span><span class="s3">=&gt; {</span>
								<span class="s4">const </span><span class="s1">assets </span><span class="s3">= </span><span class="s1">uniqueArray</span><span class="s3">(</span><span class="s1">group</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">, </span><span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">files</span><span class="s3">).</span><span class="s1">map</span><span class="s3">(</span>
									<span class="s1">toAsset</span>
								<span class="s3">);</span>
								<span class="s4">const </span><span class="s1">auxiliaryAssets </span><span class="s3">= </span><span class="s1">uniqueOrderedArray</span><span class="s3">(</span>
									<span class="s1">group</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">,</span>
									<span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">auxiliaryFiles</span><span class="s3">,</span>
									<span class="s1">compareIds</span>
								<span class="s3">).</span><span class="s1">map</span><span class="s3">(</span><span class="s1">toAsset</span><span class="s3">);</span>

								<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsChunkGroup} */</span>
								<span class="s4">const </span><span class="s1">childStatsChunkGroup </span><span class="s3">= {</span>
									<span class="s1">name</span><span class="s3">: </span><span class="s1">group</span><span class="s3">.</span><span class="s1">name</span><span class="s3">,</span>
									<span class="s1">chunks</span><span class="s3">: </span><span class="s1">ids </span><span class="s3">? </span><span class="s1">group</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">id</span><span class="s3">) : </span><span class="s1">undefined</span><span class="s3">,</span>
									<span class="s1">assets</span><span class="s3">:</span>
										<span class="s1">assets</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">chunkGroupMaxAssets </span><span class="s3">? </span><span class="s1">assets </span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
									<span class="s1">filteredAssets</span><span class="s3">:</span>
										<span class="s1">assets</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">chunkGroupMaxAssets </span><span class="s3">? </span><span class="s7">0 </span><span class="s3">: </span><span class="s1">assets</span><span class="s3">.</span><span class="s1">length</span><span class="s3">,</span>
									<span class="s1">auxiliaryAssets</span><span class="s3">:</span>
										<span class="s1">chunkGroupAuxiliary </span><span class="s3">&amp;&amp;</span>
										<span class="s1">auxiliaryAssets</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">chunkGroupMaxAssets</span>
											<span class="s3">? </span><span class="s1">auxiliaryAssets</span>
											<span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
									<span class="s1">filteredAuxiliaryAssets</span><span class="s3">:</span>
										<span class="s1">chunkGroupAuxiliary </span><span class="s3">&amp;&amp;</span>
										<span class="s1">auxiliaryAssets</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">chunkGroupMaxAssets</span>
											<span class="s3">? </span><span class="s7">0</span>
											<span class="s3">: </span><span class="s1">auxiliaryAssets</span><span class="s3">.</span><span class="s1">length</span>
								<span class="s3">};</span>

								<span class="s4">return </span><span class="s1">childStatsChunkGroup</span><span class="s3">;</span>
							<span class="s3">})</span>
					  <span class="s3">)</span>
					<span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
				<span class="s1">childAssets</span><span class="s3">: </span><span class="s1">children</span>
					<span class="s3">? </span><span class="s1">mapObject</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">groups </span><span class="s3">=&gt; {</span>
							<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Set&lt;string&gt;} */</span>
							<span class="s4">const </span><span class="s1">set </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
							<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">group of groups</span><span class="s3">) {</span>
								<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">chunk of group</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">) {</span>
									<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">asset of chunk</span><span class="s3">.</span><span class="s1">files</span><span class="s3">) {</span>
										<span class="s1">set</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">);</span>
									<span class="s3">}</span>
								<span class="s3">}</span>
							<span class="s3">}</span>
							<span class="s4">return </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">set</span><span class="s3">);</span>
					  <span class="s3">})</span>
					<span class="s3">: </span><span class="s1">undefined</span>
			<span class="s3">};</span>
			<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, </span><span class="s1">statsChunkGroup</span><span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">performance</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, { </span><span class="s1">chunkGroup </span><span class="s3">}) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">isOverSizeLimit </span><span class="s3">= </span><span class="s1">SizeLimitsPlugin</span><span class="s3">.</span><span class="s1">isOverSizeLimit</span><span class="s3">(</span><span class="s1">chunkGroup</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">module</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">built </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">builtModules</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">codeGenerated </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">codeGeneratedModules</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">buildTimeExecuted </span><span class="s3">=</span>
				<span class="s1">compilation</span><span class="s3">.</span><span class="s1">buildTimeExecutedModules</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{{[x: string]: number}} */</span>
			<span class="s4">const </span><span class="s1">sizes </span><span class="s3">= {};</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">sourceType of module</span><span class="s3">.</span><span class="s1">getSourceTypes</span><span class="s3">()) {</span>
				<span class="s1">sizes</span><span class="s3">[</span><span class="s1">sourceType</span><span class="s3">] = </span><span class="s1">module</span><span class="s3">.</span><span class="s1">size</span><span class="s3">(</span><span class="s1">sourceType</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsModule} */</span>
			<span class="s4">const </span><span class="s1">statsModule </span><span class="s3">= {</span>
				<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;module&quot;</span><span class="s3">,</span>
				<span class="s1">moduleType</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">type</span><span class="s3">,</span>
				<span class="s1">layer</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">layer</span><span class="s3">,</span>
				<span class="s1">size</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">size</span><span class="s3">(),</span>
				<span class="s1">sizes</span><span class="s3">,</span>
				<span class="s1">built</span><span class="s3">,</span>
				<span class="s1">codeGenerated</span><span class="s3">,</span>
				<span class="s1">buildTimeExecuted</span><span class="s3">,</span>
				<span class="s1">cached</span><span class="s3">: !</span><span class="s1">built </span><span class="s3">&amp;&amp; !</span><span class="s1">codeGenerated</span>
			<span class="s3">};</span>
			<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, </span><span class="s1">statsModule</span><span class="s3">);</span>

			<span class="s4">if </span><span class="s3">(</span><span class="s1">built </span><span class="s3">|| </span><span class="s1">codeGenerated </span><span class="s3">|| </span><span class="s1">options</span><span class="s3">.</span><span class="s1">cachedModules</span><span class="s3">) {</span>
				<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span>
					<span class="s1">object</span><span class="s3">,</span>
					<span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">$visible`</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, </span><span class="s1">context</span><span class="s3">)</span>
				<span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">module$visible</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">requestShortener </span><span class="s3">}, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">type</span><span class="s3">, </span><span class="s1">rootModules </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">moduleGraph </span><span class="s3">} = </span><span class="s1">compilation</span><span class="s3">;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Module[]} */</span>
			<span class="s4">const </span><span class="s1">path </span><span class="s3">= [];</span>
			<span class="s4">const </span><span class="s1">issuer </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getIssuer</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s4">let </span><span class="s1">current </span><span class="s3">= </span><span class="s1">issuer</span><span class="s3">;</span>
			<span class="s4">while </span><span class="s3">(</span><span class="s1">current</span><span class="s3">) {</span>
				<span class="s1">path</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">current</span><span class="s3">);</span>
				<span class="s1">current </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getIssuer</span><span class="s3">(</span><span class="s1">current</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s1">path</span><span class="s3">.</span><span class="s1">reverse</span><span class="s3">();</span>
			<span class="s4">const </span><span class="s1">profile </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getProfile</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">errors </span><span class="s3">= </span><span class="s1">module</span><span class="s3">.</span><span class="s1">getErrors</span><span class="s3">();</span>
			<span class="s4">const </span><span class="s1">errorsCount </span><span class="s3">= </span><span class="s1">errors </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">? </span><span class="s1">countIterable</span><span class="s3">(</span><span class="s1">errors</span><span class="s3">) : </span><span class="s7">0</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">warnings </span><span class="s3">= </span><span class="s1">module</span><span class="s3">.</span><span class="s1">getWarnings</span><span class="s3">();</span>
			<span class="s4">const </span><span class="s1">warningsCount </span><span class="s3">=</span>
				<span class="s1">warnings </span><span class="s3">!== </span><span class="s1">undefined </span><span class="s3">? </span><span class="s1">countIterable</span><span class="s3">(</span><span class="s1">warnings</span><span class="s3">) : </span><span class="s7">0</span><span class="s3">;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{{[x: string]: number}} */</span>
			<span class="s4">const </span><span class="s1">sizes </span><span class="s3">= {};</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">sourceType of module</span><span class="s3">.</span><span class="s1">getSourceTypes</span><span class="s3">()) {</span>
				<span class="s1">sizes</span><span class="s3">[</span><span class="s1">sourceType</span><span class="s3">] = </span><span class="s1">module</span><span class="s3">.</span><span class="s1">size</span><span class="s3">(</span><span class="s1">sourceType</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsModule} */</span>
			<span class="s4">const </span><span class="s1">statsModule </span><span class="s3">= {</span>
				<span class="s1">identifier</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">(),</span>
				<span class="s1">name</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">),</span>
				<span class="s1">nameForCondition</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">nameForCondition</span><span class="s3">(),</span>
				<span class="s1">index</span><span class="s3">: </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getPreOrderIndex</span><span class="s3">(</span><span class="s1">module</span><span class="s3">),</span>
				<span class="s1">preOrderIndex</span><span class="s3">: </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getPreOrderIndex</span><span class="s3">(</span><span class="s1">module</span><span class="s3">),</span>
				<span class="s1">index2</span><span class="s3">: </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getPostOrderIndex</span><span class="s3">(</span><span class="s1">module</span><span class="s3">),</span>
				<span class="s1">postOrderIndex</span><span class="s3">: </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getPostOrderIndex</span><span class="s3">(</span><span class="s1">module</span><span class="s3">),</span>
				<span class="s1">cacheable</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">buildInfo</span><span class="s3">.</span><span class="s1">cacheable</span><span class="s3">,</span>
				<span class="s1">optional</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">isOptional</span><span class="s3">(</span><span class="s1">moduleGraph</span><span class="s3">),</span>
				<span class="s1">orphan</span><span class="s3">:</span>
					<span class="s3">!</span><span class="s1">type</span><span class="s3">.</span><span class="s1">endsWith</span><span class="s3">(</span><span class="s2">&quot;module.modules[].module$visible&quot;</span><span class="s3">) &amp;&amp;</span>
					<span class="s1">compilation</span><span class="s3">.</span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getNumberOfModuleChunks</span><span class="s3">(</span><span class="s1">module</span><span class="s3">) === </span><span class="s7">0</span><span class="s3">,</span>
				<span class="s1">dependent</span><span class="s3">: </span><span class="s1">rootModules </span><span class="s3">? !</span><span class="s1">rootModules</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">module</span><span class="s3">) : </span><span class="s1">undefined</span><span class="s3">,</span>
				<span class="s1">issuer</span><span class="s3">: </span><span class="s1">issuer </span><span class="s3">&amp;&amp; </span><span class="s1">issuer</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">(),</span>
				<span class="s1">issuerName</span><span class="s3">: </span><span class="s1">issuer </span><span class="s3">&amp;&amp; </span><span class="s1">issuer</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">),</span>
				<span class="s1">issuerPath</span><span class="s3">:</span>
					<span class="s1">issuer </span><span class="s3">&amp;&amp;</span>
					<span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s7">8</span><span class="s3">)}</span><span class="s2">.issuerPath`</span><span class="s3">, </span><span class="s1">path</span><span class="s3">, </span><span class="s1">context</span><span class="s3">),</span>
				<span class="s1">failed</span><span class="s3">: </span><span class="s1">errorsCount </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">,</span>
				<span class="s1">errors</span><span class="s3">: </span><span class="s1">errorsCount</span><span class="s3">,</span>
				<span class="s1">warnings</span><span class="s3">: </span><span class="s1">warningsCount</span>
			<span class="s3">};</span>
			<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, </span><span class="s1">statsModule</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">profile</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">profile </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
					<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s7">8</span><span class="s3">)}</span><span class="s2">.profile`</span><span class="s3">,</span>
					<span class="s1">profile</span><span class="s3">,</span>
					<span class="s1">context</span>
				<span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">},</span>
		<span class="s1">ids</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph</span><span class="s3">, </span><span class="s1">moduleGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">id </span><span class="s3">= </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">issuer </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getIssuer</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">issuerId </span><span class="s3">= </span><span class="s1">issuer </span><span class="s3">&amp;&amp; </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">issuer</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">chunks </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span>
				<span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getOrderedModuleChunksIterable</span><span class="s3">(</span><span class="s1">module</span><span class="s3">, </span><span class="s1">compareChunksById</span><span class="s3">),</span>
				<span class="s1">chunk </span><span class="s3">=&gt; </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">id</span>
			<span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">moduleAssets</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">assets </span><span class="s3">= </span><span class="s1">module</span><span class="s3">.</span><span class="s1">buildInfo</span><span class="s3">.</span><span class="s1">assets</span>
				<span class="s3">? </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">module</span><span class="s3">.</span><span class="s1">buildInfo</span><span class="s3">.</span><span class="s1">assets</span><span class="s3">)</span>
				<span class="s3">: [];</span>
		<span class="s3">},</span>
		<span class="s1">reasons</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{</span>
				<span class="s1">type</span><span class="s3">,</span>
				<span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph </span><span class="s3">}</span>
			<span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">groupsReasons </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s7">8</span><span class="s3">)}</span><span class="s2">.reasons`</span><span class="s3">,</span>
				<span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getIncomingConnections</span><span class="s3">(</span><span class="s1">module</span><span class="s3">)),</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
			<span class="s4">const </span><span class="s1">limited </span><span class="s3">= </span><span class="s1">spaceLimited</span><span class="s3">(</span><span class="s1">groupsReasons</span><span class="s3">, </span><span class="s1">options</span><span class="s3">.</span><span class="s1">reasonsSpace</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">reasons </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">children</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredReasons </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">usedExports</span><span class="s3">: (</span>
			<span class="s1">object</span><span class="s3">,</span>
			<span class="s1">module</span><span class="s3">,</span>
			<span class="s3">{ </span><span class="s1">runtime</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph </span><span class="s3">} }</span>
		<span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s1">usedExports </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getUsedExports</span><span class="s3">(</span><span class="s1">module</span><span class="s3">, </span><span class="s1">runtime</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">usedExports </span><span class="s3">=== </span><span class="s4">null</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">usedExports </span><span class="s3">= </span><span class="s4">null</span><span class="s3">;</span>
			<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">usedExports </span><span class="s3">=== </span><span class="s2">&quot;boolean&quot;</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">usedExports </span><span class="s3">= </span><span class="s1">usedExports</span><span class="s3">;</span>
			<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">usedExports </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">usedExports</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">},</span>
		<span class="s1">providedExports</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s4">const </span><span class="s1">providedExports </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getProvidedExports</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">providedExports </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">providedExports</span><span class="s3">)</span>
				<span class="s3">? </span><span class="s1">providedExports</span>
				<span class="s3">: </span><span class="s4">null</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">optimizationBailout</span><span class="s3">: (</span>
			<span class="s1">object</span><span class="s3">,</span>
			<span class="s1">module</span><span class="s3">,</span>
			<span class="s3">{ </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph </span><span class="s3">} },</span>
			<span class="s3">{ </span><span class="s1">requestShortener </span><span class="s3">}</span>
		<span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">optimizationBailout </span><span class="s3">= </span><span class="s1">moduleGraph</span>
				<span class="s3">.</span><span class="s1">getOptimizationBailout</span><span class="s3">(</span><span class="s1">module</span><span class="s3">)</span>
				<span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">item </span><span class="s3">=&gt; {</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">item </span><span class="s3">=== </span><span class="s2">&quot;function&quot;</span><span class="s3">) </span><span class="s4">return </span><span class="s1">item</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">);</span>
					<span class="s4">return </span><span class="s1">item</span><span class="s3">;</span>
				<span class="s3">});</span>
		<span class="s3">},</span>
		<span class="s1">depth</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">depth </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getDepth</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">nestedModules</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">innerModules </span><span class="s3">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Module &amp; { modules?: Module[] }} */ </span><span class="s3">(</span>
				<span class="s1">module</span>
			<span class="s3">).</span><span class="s1">modules</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">innerModules</span><span class="s3">)) {</span>
				<span class="s4">const </span><span class="s1">groupedModules </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
					<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s7">8</span><span class="s3">)}</span><span class="s2">.modules`</span><span class="s3">,</span>
					<span class="s1">innerModules</span><span class="s3">,</span>
					<span class="s1">context</span>
				<span class="s3">);</span>
				<span class="s4">const </span><span class="s1">limited </span><span class="s3">= </span><span class="s1">spaceLimited</span><span class="s3">(</span>
					<span class="s1">groupedModules</span><span class="s3">,</span>
					<span class="s1">options</span><span class="s3">.</span><span class="s1">nestedModulesSpace</span>
				<span class="s3">);</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">modules </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">children</span><span class="s3">;</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredModules </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">;</span>
			<span class="s3">}</span>
		<span class="s3">},</span>
		<span class="s1">source</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s1">originalSource </span><span class="s3">= </span><span class="s1">module</span><span class="s3">.</span><span class="s1">originalSource</span><span class="s3">();</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">originalSource</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">source </span><span class="s3">= </span><span class="s1">originalSource</span><span class="s3">.</span><span class="s1">source</span><span class="s3">();</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">profile</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">profile</span><span class="s3">) =&gt; {</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsProfile} */</span>
			<span class="s4">const </span><span class="s1">statsProfile </span><span class="s3">= {</span>
				<span class="s1">total</span><span class="s3">:</span>
					<span class="s1">profile</span><span class="s3">.</span><span class="s1">factory </span><span class="s3">+</span>
					<span class="s1">profile</span><span class="s3">.</span><span class="s1">restoring </span><span class="s3">+</span>
					<span class="s1">profile</span><span class="s3">.</span><span class="s1">integration </span><span class="s3">+</span>
					<span class="s1">profile</span><span class="s3">.</span><span class="s1">building </span><span class="s3">+</span>
					<span class="s1">profile</span><span class="s3">.</span><span class="s1">storing</span><span class="s3">,</span>
				<span class="s1">resolving</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">,</span>
				<span class="s1">restoring</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">restoring</span><span class="s3">,</span>
				<span class="s1">building</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">building</span><span class="s3">,</span>
				<span class="s1">integration</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">integration</span><span class="s3">,</span>
				<span class="s1">storing</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">storing</span><span class="s3">,</span>
				<span class="s1">additionalResolving</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">additionalFactories</span><span class="s3">,</span>
				<span class="s1">additionalIntegration</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">additionalIntegration</span><span class="s3">,</span>
				<span class="s0">// TODO remove this in webpack 6</span>
				<span class="s1">factory</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">factory</span><span class="s3">,</span>
				<span class="s0">// TODO remove this in webpack 6</span>
				<span class="s1">dependencies</span><span class="s3">: </span><span class="s1">profile</span><span class="s3">.</span><span class="s1">additionalFactories</span>
			<span class="s3">};</span>
			<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, </span><span class="s1">statsProfile</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">moduleIssuer</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">requestShortener </span><span class="s3">}, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">compilation</span><span class="s3">, </span><span class="s1">type </span><span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s3">{ </span><span class="s1">moduleGraph </span><span class="s3">} = </span><span class="s1">compilation</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">profile </span><span class="s3">= </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getProfile</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsModuleIssuer} */</span>
			<span class="s4">const </span><span class="s1">statsModuleIssuer </span><span class="s3">= {</span>
				<span class="s1">identifier</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">(),</span>
				<span class="s1">name</span><span class="s3">: </span><span class="s1">module</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">)</span>
			<span class="s3">};</span>
			<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, </span><span class="s1">statsModuleIssuer</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">profile</span><span class="s3">) {</span>
				<span class="s1">object</span><span class="s3">.</span><span class="s1">profile </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.profile`</span><span class="s3">, </span><span class="s1">profile</span><span class="s3">, </span><span class="s1">context</span><span class="s3">);</span>
			<span class="s3">}</span>
		<span class="s3">},</span>
		<span class="s1">ids</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">id </span><span class="s3">= </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">moduleReason</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">reason</span><span class="s3">, { </span><span class="s1">runtime </span><span class="s3">}, { </span><span class="s1">requestShortener </span><span class="s3">}) =&gt; {</span>
			<span class="s4">const </span><span class="s1">dep </span><span class="s3">= </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">dependency</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">moduleDep </span><span class="s3">=</span>
				<span class="s1">dep </span><span class="s3">&amp;&amp; </span><span class="s1">dep </span><span class="s4">instanceof </span><span class="s1">ModuleDependency </span><span class="s3">? </span><span class="s1">dep </span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsModuleReason} */</span>
			<span class="s4">const </span><span class="s1">statsModuleReason </span><span class="s3">= {</span>
				<span class="s1">moduleIdentifier</span><span class="s3">: </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span>
					<span class="s3">? </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">()</span>
					<span class="s3">: </span><span class="s4">null</span><span class="s3">,</span>
				<span class="s1">module</span><span class="s3">: </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span>
					<span class="s3">? </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">)</span>
					<span class="s3">: </span><span class="s4">null</span><span class="s3">,</span>
				<span class="s1">moduleName</span><span class="s3">: </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span>
					<span class="s3">? </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">)</span>
					<span class="s3">: </span><span class="s4">null</span><span class="s3">,</span>
				<span class="s1">resolvedModuleIdentifier</span><span class="s3">: </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">resolvedOriginModule</span>
					<span class="s3">? </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">resolvedOriginModule</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">()</span>
					<span class="s3">: </span><span class="s4">null</span><span class="s3">,</span>
				<span class="s1">resolvedModule</span><span class="s3">: </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">resolvedOriginModule</span>
					<span class="s3">? </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">resolvedOriginModule</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">)</span>
					<span class="s3">: </span><span class="s4">null</span><span class="s3">,</span>
				<span class="s1">type</span><span class="s3">: </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">dependency </span><span class="s3">? </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">dependency</span><span class="s3">.</span><span class="s1">type </span><span class="s3">: </span><span class="s4">null</span><span class="s3">,</span>
				<span class="s1">active</span><span class="s3">: </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">isActive</span><span class="s3">(</span><span class="s1">runtime</span><span class="s3">),</span>
				<span class="s1">explanation</span><span class="s3">: </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">explanation</span><span class="s3">,</span>
				<span class="s1">userRequest</span><span class="s3">: (</span><span class="s1">moduleDep </span><span class="s3">&amp;&amp; </span><span class="s1">moduleDep</span><span class="s3">.</span><span class="s1">userRequest</span><span class="s3">) || </span><span class="s4">null</span>
			<span class="s3">};</span>
			<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, </span><span class="s1">statsModuleReason</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">reason</span><span class="s3">.</span><span class="s1">dependency</span><span class="s3">) {</span>
				<span class="s4">const </span><span class="s1">locInfo </span><span class="s3">= </span><span class="s1">formatLocation</span><span class="s3">(</span><span class="s1">reason</span><span class="s3">.</span><span class="s1">dependency</span><span class="s3">.</span><span class="s1">loc</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">locInfo</span><span class="s3">) {</span>
					<span class="s1">object</span><span class="s3">.</span><span class="s1">loc </span><span class="s3">= </span><span class="s1">locInfo</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
		<span class="s3">},</span>
		<span class="s1">ids</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">reason</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleId </span><span class="s3">= </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span>
				<span class="s3">? </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span><span class="s3">)</span>
				<span class="s3">: </span><span class="s4">null</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">resolvedModuleId </span><span class="s3">= </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">resolvedOriginModule</span>
				<span class="s3">? </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">reason</span><span class="s3">.</span><span class="s1">resolvedOriginModule</span><span class="s3">)</span>
				<span class="s3">: </span><span class="s4">null</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">chunk</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">chunk</span><span class="s3">, { </span><span class="s1">makePathsRelative</span><span class="s3">, </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s4">const </span><span class="s1">childIdByOrder </span><span class="s3">= </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">getChildIdsByOrders</span><span class="s3">(</span><span class="s1">chunkGraph</span><span class="s3">);</span>

			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsChunk} */</span>
			<span class="s4">const </span><span class="s1">statsChunk </span><span class="s3">= {</span>
				<span class="s1">rendered</span><span class="s3">: </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">rendered</span><span class="s3">,</span>
				<span class="s1">initial</span><span class="s3">: </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">canBeInitial</span><span class="s3">(),</span>
				<span class="s1">entry</span><span class="s3">: </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">hasRuntime</span><span class="s3">(),</span>
				<span class="s1">recorded</span><span class="s3">: </span><span class="s1">AggressiveSplittingPlugin</span><span class="s3">.</span><span class="s1">wasChunkRecorded</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">),</span>
				<span class="s1">reason</span><span class="s3">: </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">chunkReason</span><span class="s3">,</span>
				<span class="s1">size</span><span class="s3">: </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getChunkModulesSize</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">),</span>
				<span class="s1">sizes</span><span class="s3">: </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getChunkModulesSizes</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">),</span>
				<span class="s1">names</span><span class="s3">: </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">name </span><span class="s3">? [</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">name</span><span class="s3">] : [],</span>
				<span class="s1">idHints</span><span class="s3">: </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">idNameHints</span><span class="s3">),</span>
				<span class="s1">runtime</span><span class="s3">:</span>
					<span class="s1">chunk</span><span class="s3">.</span><span class="s1">runtime </span><span class="s3">=== </span><span class="s1">undefined</span>
						<span class="s3">? </span><span class="s1">undefined</span>
						<span class="s3">: </span><span class="s4">typeof </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">runtime </span><span class="s3">=== </span><span class="s2">&quot;string&quot;</span>
						<span class="s3">? [</span><span class="s1">makePathsRelative</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">runtime</span><span class="s3">)]</span>
						<span class="s3">: </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">runtime</span><span class="s3">.</span><span class="s1">sort</span><span class="s3">(), </span><span class="s1">makePathsRelative</span><span class="s3">),</span>
				<span class="s1">files</span><span class="s3">: </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">files</span><span class="s3">),</span>
				<span class="s1">auxiliaryFiles</span><span class="s3">: </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">auxiliaryFiles</span><span class="s3">).</span><span class="s1">sort</span><span class="s3">(</span><span class="s1">compareIds</span><span class="s3">),</span>
				<span class="s1">hash</span><span class="s3">: </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">renderedHash</span><span class="s3">,</span>
				<span class="s1">childrenByOrder</span><span class="s3">: </span><span class="s1">childIdByOrder</span>
			<span class="s3">};</span>
			<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, </span><span class="s1">statsChunk</span><span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">ids</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">chunk</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">id </span><span class="s3">= </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">id</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">chunkRelations</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">chunk</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Set&lt;string|number&gt;} */</span>
			<span class="s4">const </span><span class="s1">parents </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Set&lt;string|number&gt;} */</span>
			<span class="s4">const </span><span class="s1">children </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Set&lt;string|number&gt;} */</span>
			<span class="s4">const </span><span class="s1">siblings </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>

			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">chunkGroup of chunk</span><span class="s3">.</span><span class="s1">groupsIterable</span><span class="s3">) {</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">parentGroup of chunkGroup</span><span class="s3">.</span><span class="s1">parentsIterable</span><span class="s3">) {</span>
					<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">chunk of parentGroup</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">) {</span>
						<span class="s1">parents</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">id</span><span class="s3">);</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">childGroup of chunkGroup</span><span class="s3">.</span><span class="s1">childrenIterable</span><span class="s3">) {</span>
					<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">chunk of childGroup</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">) {</span>
						<span class="s1">children</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">id</span><span class="s3">);</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">sibling of chunkGroup</span><span class="s3">.</span><span class="s1">chunks</span><span class="s3">) {</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">sibling </span><span class="s3">!== </span><span class="s1">chunk</span><span class="s3">) </span><span class="s1">siblings</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">sibling</span><span class="s3">.</span><span class="s1">id</span><span class="s3">);</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">siblings </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">siblings</span><span class="s3">).</span><span class="s1">sort</span><span class="s3">(</span><span class="s1">compareIds</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">parents </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">parents</span><span class="s3">).</span><span class="s1">sort</span><span class="s3">(</span><span class="s1">compareIds</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">children </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s1">children</span><span class="s3">).</span><span class="s1">sort</span><span class="s3">(</span><span class="s1">compareIds</span><span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">chunkModules</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">chunk</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{</span>
				<span class="s1">type</span><span class="s3">,</span>
				<span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">}</span>
			<span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s4">const </span><span class="s1">array </span><span class="s3">= </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getChunkModules</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">groupedModules </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.modules`</span><span class="s3">, </span><span class="s1">array</span><span class="s3">, {</span>
				<span class="s1">...context</span><span class="s3">,</span>
				<span class="s1">runtime</span><span class="s3">: </span><span class="s1">chunk</span><span class="s3">.</span><span class="s1">runtime</span><span class="s3">,</span>
				<span class="s1">rootModules</span><span class="s3">: </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">(</span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getChunkRootModules</span><span class="s3">(</span><span class="s1">chunk</span><span class="s3">))</span>
			<span class="s3">});</span>
			<span class="s4">const </span><span class="s1">limited </span><span class="s3">= </span><span class="s1">spaceLimited</span><span class="s3">(</span><span class="s1">groupedModules</span><span class="s3">, </span><span class="s1">options</span><span class="s3">.</span><span class="s1">chunkModulesSpace</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">modules </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">children</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">filteredModules </span><span class="s3">= </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">;</span>
		<span class="s3">},</span>
		<span class="s1">chunkOrigins</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">chunk</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{</span>
				<span class="s1">type</span><span class="s3">,</span>
				<span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">}</span>
			<span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Set&lt;string&gt;} */</span>
			<span class="s4">const </span><span class="s1">originsKeySet </span><span class="s3">= </span><span class="s4">new </span><span class="s1">Set</span><span class="s3">();</span>
			<span class="s4">const </span><span class="s1">origins </span><span class="s3">= [];</span>
			<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">g of chunk</span><span class="s3">.</span><span class="s1">groupsIterable</span><span class="s3">) {</span>
				<span class="s1">origins</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">...g</span><span class="s3">.</span><span class="s1">origins</span><span class="s3">);</span>
			<span class="s3">}</span>
			<span class="s4">const </span><span class="s1">array </span><span class="s3">= </span><span class="s1">origins</span><span class="s3">.</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">origin </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">key </span><span class="s3">= [</span>
					<span class="s1">origin</span><span class="s3">.</span><span class="s1">module </span><span class="s3">? </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module</span><span class="s3">) : </span><span class="s1">undefined</span><span class="s3">,</span>
					<span class="s1">formatLocation</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">.</span><span class="s1">loc</span><span class="s3">),</span>
					<span class="s1">origin</span><span class="s3">.</span><span class="s1">request</span>
				<span class="s3">].</span><span class="s1">join</span><span class="s3">();</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">originsKeySet</span><span class="s3">.</span><span class="s1">has</span><span class="s3">(</span><span class="s1">key</span><span class="s3">)) </span><span class="s4">return false</span><span class="s3">;</span>
				<span class="s1">originsKeySet</span><span class="s3">.</span><span class="s1">add</span><span class="s3">(</span><span class="s1">key</span><span class="s3">);</span>
				<span class="s4">return true</span><span class="s3">;</span>
			<span class="s3">});</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">origins </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.origins`</span><span class="s3">, </span><span class="s1">array</span><span class="s3">, </span><span class="s1">context</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">chunkOrigin</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">origin</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">requestShortener </span><span class="s3">}) =&gt; {</span>
			<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{KnownStatsChunkOrigin} */</span>
			<span class="s4">const </span><span class="s1">statsChunkOrigin </span><span class="s3">= {</span>
				<span class="s1">module</span><span class="s3">: </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module </span><span class="s3">? </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">() : </span><span class="s2">&quot;&quot;</span><span class="s3">,</span>
				<span class="s1">moduleIdentifier</span><span class="s3">: </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module </span><span class="s3">? </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">() : </span><span class="s2">&quot;&quot;</span><span class="s3">,</span>
				<span class="s1">moduleName</span><span class="s3">: </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module</span>
					<span class="s3">? </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">)</span>
					<span class="s3">: </span><span class="s2">&quot;&quot;</span><span class="s3">,</span>
				<span class="s1">loc</span><span class="s3">: </span><span class="s1">formatLocation</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">.</span><span class="s1">loc</span><span class="s3">),</span>
				<span class="s1">request</span><span class="s3">: </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">request</span>
			<span class="s3">};</span>
			<span class="s1">Object</span><span class="s3">.</span><span class="s1">assign</span><span class="s3">(</span><span class="s1">object</span><span class="s3">, </span><span class="s1">statsChunkOrigin</span><span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">ids</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">origin</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleId </span><span class="s3">= </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module</span>
				<span class="s3">? </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module</span><span class="s3">)</span>
				<span class="s3">: </span><span class="s1">undefined</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">error</span><span class="s3">: </span><span class="s1">EXTRACT_ERROR</span><span class="s3">,</span>
	<span class="s1">warning</span><span class="s3">: </span><span class="s1">EXTRACT_ERROR</span><span class="s3">,</span>
	<span class="s1">moduleTraceItem</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, { </span><span class="s1">origin</span><span class="s3">, </span><span class="s1">module </span><span class="s3">}, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">requestShortener </span><span class="s3">}, </span><span class="s1">factory</span><span class="s3">) =&gt; {</span>
			<span class="s4">const </span><span class="s3">{</span>
				<span class="s1">type</span><span class="s3">,</span>
				<span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph </span><span class="s3">}</span>
			<span class="s3">} = </span><span class="s1">context</span><span class="s3">;</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">originIdentifier </span><span class="s3">= </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">();</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">originName </span><span class="s3">= </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleIdentifier </span><span class="s3">= </span><span class="s1">module</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">();</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleName </span><span class="s3">= </span><span class="s1">module</span><span class="s3">.</span><span class="s1">readableIdentifier</span><span class="s3">(</span><span class="s1">requestShortener</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">dependencies </span><span class="s3">= </span><span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span>
				<span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getIncomingConnections</span><span class="s3">(</span><span class="s1">module</span><span class="s3">)</span>
			<span class="s3">)</span>
				<span class="s3">.</span><span class="s1">filter</span><span class="s3">(</span><span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">resolvedOriginModule </span><span class="s3">=== </span><span class="s1">origin </span><span class="s3">&amp;&amp; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">dependency</span><span class="s3">)</span>
				<span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">dependency</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">dependencies </span><span class="s3">= </span><span class="s1">factory</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span>
				<span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">type</span><span class="s3">}</span><span class="s2">.dependencies`</span><span class="s3">,</span>
				<span class="s1">Array</span><span class="s3">.</span><span class="s1">from</span><span class="s3">(</span><span class="s4">new </span><span class="s1">Set</span><span class="s3">(</span><span class="s1">dependencies</span><span class="s3">)),</span>
				<span class="s1">context</span>
			<span class="s3">);</span>
		<span class="s3">},</span>
		<span class="s1">ids</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, { </span><span class="s1">origin</span><span class="s3">, </span><span class="s1">module </span><span class="s3">}, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">originId </span><span class="s3">= </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">);</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">moduleId </span><span class="s3">= </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">module</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">moduleTraceDependency</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">object</span><span class="s3">, </span><span class="s1">dependency</span><span class="s3">) =&gt; {</span>
			<span class="s1">object</span><span class="s3">.</span><span class="s1">loc </span><span class="s3">= </span><span class="s1">formatLocation</span><span class="s3">(</span><span class="s1">dependency</span><span class="s3">.</span><span class="s1">loc</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, Record&lt;string, (thing: any, context: StatsFactoryContext, options: NormalizedStatsOptions) =&gt; boolean | undefined&gt;&gt;} */</span>
<span class="s4">const </span><span class="s1">FILTER </span><span class="s3">= {</span>
	<span class="s2">&quot;module.reasons&quot;</span><span class="s3">: {</span>
		<span class="s2">&quot;!orphanModules&quot;</span><span class="s3">: (</span><span class="s1">reason</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s4">if </span><span class="s3">(</span>
				<span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule </span><span class="s3">&amp;&amp;</span>
				<span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getNumberOfModuleChunks</span><span class="s3">(</span><span class="s1">reason</span><span class="s3">.</span><span class="s1">originModule</span><span class="s3">) === </span><span class="s7">0</span>
			<span class="s3">) {</span>
				<span class="s4">return false</span><span class="s3">;</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, Record&lt;string, (thing: Object, context: StatsFactoryContext, options: NormalizedStatsOptions) =&gt; boolean | undefined&gt;&gt;} */</span>
<span class="s4">const </span><span class="s1">FILTER_RESULTS </span><span class="s3">= {</span>
	<span class="s2">&quot;compilation.warnings&quot;</span><span class="s3">: {</span>
		<span class="s1">warningsFilter</span><span class="s3">: </span><span class="s1">util</span><span class="s3">.</span><span class="s1">deprecate</span><span class="s3">(</span>
			<span class="s3">(</span><span class="s1">warning</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">warningsFilter </span><span class="s3">}) =&gt; {</span>
				<span class="s4">const </span><span class="s1">warningString </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">warning</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">key </span><span class="s3">=&gt; </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">warning</span><span class="s3">[</span><span class="s1">key</span><span class="s3">]}</span><span class="s2">`</span><span class="s3">)</span>
					<span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">&quot;</span><span class="s4">\n</span><span class="s2">&quot;</span><span class="s3">);</span>
				<span class="s4">return </span><span class="s3">!</span><span class="s1">warningsFilter</span><span class="s3">.</span><span class="s1">some</span><span class="s3">(</span><span class="s1">filter </span><span class="s3">=&gt; </span><span class="s1">filter</span><span class="s3">(</span><span class="s1">warning</span><span class="s3">, </span><span class="s1">warningString</span><span class="s3">));</span>
			<span class="s3">},</span>
			<span class="s2">&quot;config.stats.warningsFilter is deprecated in favor of config.ignoreWarnings&quot;</span><span class="s3">,</span>
			<span class="s2">&quot;DEP_WEBPACK_STATS_WARNINGS_FILTER&quot;</span>
		<span class="s3">)</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, (comparators: Function[], context: StatsFactoryContext) =&gt; void&gt;} */</span>
<span class="s4">const </span><span class="s1">MODULES_SORTER </span><span class="s3">= {</span>
	<span class="s1">_</span><span class="s3">: (</span><span class="s1">comparators</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">moduleGraph </span><span class="s3">} }) =&gt; {</span>
		<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
			<span class="s1">compareSelect</span><span class="s3">(</span>
				<span class="s5">/**</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Module} m module</span>
				 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{number} depth</span>
				 <span class="s5">*/</span>
				<span class="s1">m </span><span class="s3">=&gt; </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getDepth</span><span class="s3">(</span><span class="s1">m</span><span class="s3">),</span>
				<span class="s1">compareNumbers</span>
			<span class="s3">),</span>
			<span class="s1">compareSelect</span><span class="s3">(</span>
				<span class="s5">/**</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Module} m module</span>
				 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{number} index</span>
				 <span class="s5">*/</span>
				<span class="s1">m </span><span class="s3">=&gt; </span><span class="s1">moduleGraph</span><span class="s3">.</span><span class="s1">getPreOrderIndex</span><span class="s3">(</span><span class="s1">m</span><span class="s3">),</span>
				<span class="s1">compareNumbers</span>
			<span class="s3">),</span>
			<span class="s1">compareSelect</span><span class="s3">(</span>
				<span class="s5">/**</span>
				 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Module} m module</span>
				 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{string} identifier</span>
				 <span class="s5">*/</span>
				<span class="s1">m </span><span class="s3">=&gt; </span><span class="s1">m</span><span class="s3">.</span><span class="s1">identifier</span><span class="s3">(),</span>
				<span class="s1">compareIds</span>
			<span class="s3">)</span>
		<span class="s3">);</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, Record&lt;string, (comparators: Function[], context: StatsFactoryContext) =&gt; void&gt;&gt;} */</span>
<span class="s4">const </span><span class="s1">SORTERS </span><span class="s3">= {</span>
	<span class="s2">&quot;compilation.chunks&quot;</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: </span><span class="s1">comparators </span><span class="s3">=&gt; {</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">compareSelect</span><span class="s3">(</span><span class="s1">c </span><span class="s3">=&gt; </span><span class="s1">c</span><span class="s3">.</span><span class="s1">id</span><span class="s3">, </span><span class="s1">compareIds</span><span class="s3">));</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s2">&quot;compilation.modules&quot;</span><span class="s3">: </span><span class="s1">MODULES_SORTER</span><span class="s3">,</span>
	<span class="s2">&quot;chunk.rootModules&quot;</span><span class="s3">: </span><span class="s1">MODULES_SORTER</span><span class="s3">,</span>
	<span class="s2">&quot;chunk.modules&quot;</span><span class="s3">: </span><span class="s1">MODULES_SORTER</span><span class="s3">,</span>
	<span class="s2">&quot;module.modules&quot;</span><span class="s3">: </span><span class="s1">MODULES_SORTER</span><span class="s3">,</span>
	<span class="s2">&quot;module.reasons&quot;</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">comparators</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
				<span class="s1">compareSelect</span><span class="s3">(</span><span class="s1">x </span><span class="s3">=&gt; </span><span class="s1">x</span><span class="s3">.</span><span class="s1">originModule</span><span class="s3">, </span><span class="s1">compareModulesByIdentifier</span><span class="s3">)</span>
			<span class="s3">);</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
				<span class="s1">compareSelect</span><span class="s3">(</span><span class="s1">x </span><span class="s3">=&gt; </span><span class="s1">x</span><span class="s3">.</span><span class="s1">resolvedOriginModule</span><span class="s3">, </span><span class="s1">compareModulesByIdentifier</span><span class="s3">)</span>
			<span class="s3">);</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
				<span class="s1">compareSelect</span><span class="s3">(</span>
					<span class="s1">x </span><span class="s3">=&gt; </span><span class="s1">x</span><span class="s3">.</span><span class="s1">dependency</span><span class="s3">,</span>
					<span class="s1">concatComparators</span><span class="s3">(</span>
						<span class="s1">compareSelect</span><span class="s3">(</span>
							<span class="s5">/**</span>
							 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Dependency} x dependency</span>
							 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{DependencyLocation} location</span>
							 <span class="s5">*/</span>
							<span class="s1">x </span><span class="s3">=&gt; </span><span class="s1">x</span><span class="s3">.</span><span class="s1">loc</span><span class="s3">,</span>
							<span class="s1">compareLocations</span>
						<span class="s3">),</span>
						<span class="s1">compareSelect</span><span class="s3">(</span><span class="s1">x </span><span class="s3">=&gt; </span><span class="s1">x</span><span class="s3">.</span><span class="s1">type</span><span class="s3">, </span><span class="s1">compareIds</span><span class="s3">)</span>
					<span class="s3">)</span>
				<span class="s3">)</span>
			<span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s2">&quot;chunk.origins&quot;</span><span class="s3">: {</span>
		<span class="s1">_</span><span class="s3">: (</span><span class="s1">comparators</span><span class="s3">, { </span><span class="s1">compilation</span><span class="s3">: { </span><span class="s1">chunkGraph </span><span class="s3">} }) =&gt; {</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
				<span class="s1">compareSelect</span><span class="s3">(</span>
					<span class="s1">origin </span><span class="s3">=&gt;</span>
						<span class="s1">origin</span><span class="s3">.</span><span class="s1">module </span><span class="s3">? </span><span class="s1">chunkGraph</span><span class="s3">.</span><span class="s1">getModuleId</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">.</span><span class="s1">module</span><span class="s3">) : </span><span class="s1">undefined</span><span class="s3">,</span>
					<span class="s1">compareIds</span>
				<span class="s3">),</span>
				<span class="s1">compareSelect</span><span class="s3">(</span><span class="s1">origin </span><span class="s3">=&gt; </span><span class="s1">formatLocation</span><span class="s3">(</span><span class="s1">origin</span><span class="s3">.</span><span class="s1">loc</span><span class="s3">), </span><span class="s1">compareIds</span><span class="s3">),</span>
				<span class="s1">compareSelect</span><span class="s3">(</span><span class="s1">origin </span><span class="s3">=&gt; </span><span class="s1">origin</span><span class="s3">.</span><span class="s1">request</span><span class="s3">, </span><span class="s1">compareIds</span><span class="s3">)</span>
			<span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">getItemSize </span><span class="s3">= </span><span class="s1">item </span><span class="s3">=&gt; {</span>
	<span class="s0">// Each item takes 1 line</span>
	<span class="s0">// + the size of the children</span>
	<span class="s0">// + 1 extra line when it has children and filteredChildren</span>
	<span class="s4">return </span><span class="s3">!</span><span class="s1">item</span><span class="s3">.</span><span class="s1">children</span>
		<span class="s3">? </span><span class="s7">1</span>
		<span class="s3">: </span><span class="s1">item</span><span class="s3">.</span><span class="s1">filteredChildren</span>
		<span class="s3">? </span><span class="s7">2 </span><span class="s3">+ </span><span class="s1">getTotalSize</span><span class="s3">(</span><span class="s1">item</span><span class="s3">.</span><span class="s1">children</span><span class="s3">)</span>
		<span class="s3">: </span><span class="s7">1 </span><span class="s3">+ </span><span class="s1">getTotalSize</span><span class="s3">(</span><span class="s1">item</span><span class="s3">.</span><span class="s1">children</span><span class="s3">);</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">getTotalSize </span><span class="s3">= </span><span class="s1">children </span><span class="s3">=&gt; {</span>
	<span class="s4">let </span><span class="s1">size </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">child of children</span><span class="s3">) {</span>
		<span class="s1">size </span><span class="s3">+= </span><span class="s1">getItemSize</span><span class="s3">(</span><span class="s1">child</span><span class="s3">);</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">size</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">getTotalItems </span><span class="s3">= </span><span class="s1">children </span><span class="s3">=&gt; {</span>
	<span class="s4">let </span><span class="s1">count </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">child of children</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(!</span><span class="s1">child</span><span class="s3">.</span><span class="s1">children </span><span class="s3">&amp;&amp; !</span><span class="s1">child</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">) {</span>
			<span class="s1">count</span><span class="s3">++;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">child</span><span class="s3">.</span><span class="s1">children</span><span class="s3">) </span><span class="s1">count </span><span class="s3">+= </span><span class="s1">getTotalItems</span><span class="s3">(</span><span class="s1">child</span><span class="s3">.</span><span class="s1">children</span><span class="s3">);</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">child</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">) </span><span class="s1">count </span><span class="s3">+= </span><span class="s1">child</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">count</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">collapse </span><span class="s3">= </span><span class="s1">children </span><span class="s3">=&gt; {</span>
	<span class="s0">// After collapse each child must take exactly one line</span>
	<span class="s4">const </span><span class="s1">newChildren </span><span class="s3">= [];</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">child of children</span><span class="s3">) {</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">child</span><span class="s3">.</span><span class="s1">children</span><span class="s3">) {</span>
			<span class="s4">let </span><span class="s1">filteredChildren </span><span class="s3">= </span><span class="s1">child</span><span class="s3">.</span><span class="s1">filteredChildren </span><span class="s3">|| </span><span class="s7">0</span><span class="s3">;</span>
			<span class="s1">filteredChildren </span><span class="s3">+= </span><span class="s1">getTotalItems</span><span class="s3">(</span><span class="s1">child</span><span class="s3">.</span><span class="s1">children</span><span class="s3">);</span>
			<span class="s1">newChildren</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">...child</span><span class="s3">,</span>
				<span class="s1">children</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
				<span class="s1">filteredChildren</span>
			<span class="s3">});</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s1">newChildren</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">child</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">newChildren</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">spaceLimited </span><span class="s3">= (</span>
	<span class="s1">itemsAndGroups</span><span class="s3">,</span>
	<span class="s1">max</span><span class="s3">,</span>
	<span class="s1">filteredChildrenLineReserved </span><span class="s3">= </span><span class="s4">false</span>
<span class="s3">) =&gt; {</span>
	<span class="s4">if </span><span class="s3">(</span><span class="s1">max </span><span class="s3">&lt; </span><span class="s7">1</span><span class="s3">) {</span>
		<span class="s4">return </span><span class="s3">{</span>
			<span class="s1">children</span><span class="s3">: </span><span class="s1">undefined</span><span class="s3">,</span>
			<span class="s1">filteredChildren</span><span class="s3">: </span><span class="s1">getTotalItems</span><span class="s3">(</span><span class="s1">itemsAndGroups</span><span class="s3">)</span>
		<span class="s3">};</span>
	<span class="s3">}</span>
	<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{any[] | undefined} */</span>
	<span class="s4">let </span><span class="s1">children </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
	<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{number | undefined} */</span>
	<span class="s4">let </span><span class="s1">filteredChildren </span><span class="s3">= </span><span class="s1">undefined</span><span class="s3">;</span>
	<span class="s0">// This are the groups, which take 1+ lines each</span>
	<span class="s4">const </span><span class="s1">groups </span><span class="s3">= [];</span>
	<span class="s0">// The sizes of the groups are stored in groupSizes</span>
	<span class="s4">const </span><span class="s1">groupSizes </span><span class="s3">= [];</span>
	<span class="s0">// This are the items, which take 1 line each</span>
	<span class="s4">const </span><span class="s1">items </span><span class="s3">= [];</span>
	<span class="s0">// The total of group sizes</span>
	<span class="s4">let </span><span class="s1">groupsSize </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>

	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">itemOrGroup of itemsAndGroups</span><span class="s3">) {</span>
		<span class="s0">// is item</span>
		<span class="s4">if </span><span class="s3">(!</span><span class="s1">itemOrGroup</span><span class="s3">.</span><span class="s1">children </span><span class="s3">&amp;&amp; !</span><span class="s1">itemOrGroup</span><span class="s3">.</span><span class="s1">filteredChildren</span><span class="s3">) {</span>
			<span class="s1">items</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">itemOrGroup</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s1">groups</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">itemOrGroup</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">size </span><span class="s3">= </span><span class="s1">getItemSize</span><span class="s3">(</span><span class="s1">itemOrGroup</span><span class="s3">);</span>
			<span class="s1">groupSizes</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">size</span><span class="s3">);</span>
			<span class="s1">groupsSize </span><span class="s3">+= </span><span class="s1">size</span><span class="s3">;</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s4">if </span><span class="s3">(</span><span class="s1">groupsSize </span><span class="s3">+ </span><span class="s1">items</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&lt;= </span><span class="s1">max</span><span class="s3">) {</span>
		<span class="s0">// The total size in the current state fits into the max</span>
		<span class="s0">// keep all</span>
		<span class="s1">children </span><span class="s3">= </span><span class="s1">groups</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0 </span><span class="s3">? </span><span class="s1">groups</span><span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">items</span><span class="s3">) : </span><span class="s1">items</span><span class="s3">;</span>
	<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">groups</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">) {</span>
		<span class="s0">// slice items to max</span>
		<span class="s0">// inner space marks that lines for filteredChildren already reserved</span>
		<span class="s4">const </span><span class="s1">limit </span><span class="s3">= </span><span class="s1">max </span><span class="s3">- (</span><span class="s1">filteredChildrenLineReserved </span><span class="s3">? </span><span class="s7">0 </span><span class="s3">: </span><span class="s7">1</span><span class="s3">);</span>
		<span class="s1">filteredChildren </span><span class="s3">= </span><span class="s1">items</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s1">limit</span><span class="s3">;</span>
		<span class="s1">items</span><span class="s3">.</span><span class="s1">length </span><span class="s3">= </span><span class="s1">limit</span><span class="s3">;</span>
		<span class="s1">children </span><span class="s3">= </span><span class="s1">items</span><span class="s3">;</span>
	<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
		<span class="s0">// limit is the size when all groups are collapsed</span>
		<span class="s4">const </span><span class="s1">limit </span><span class="s3">=</span>
			<span class="s1">groups</span><span class="s3">.</span><span class="s1">length </span><span class="s3">+</span>
			<span class="s3">(</span><span class="s1">filteredChildrenLineReserved </span><span class="s3">|| </span><span class="s1">items</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0 </span><span class="s3">? </span><span class="s7">0 </span><span class="s3">: </span><span class="s7">1</span><span class="s3">);</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">limit </span><span class="s3">&lt; </span><span class="s1">max</span><span class="s3">) {</span>
			<span class="s0">// calculate how much we are over the size limit</span>
			<span class="s0">// this allows to approach the limit faster</span>
			<span class="s4">let </span><span class="s1">oversize</span><span class="s3">;</span>
			<span class="s0">// If each group would take 1 line the total would be below the maximum</span>
			<span class="s0">// collapse some groups, keep items</span>
			<span class="s4">while </span><span class="s3">(</span>
				<span class="s3">(</span><span class="s1">oversize </span><span class="s3">=</span>
					<span class="s1">groupsSize </span><span class="s3">+</span>
					<span class="s1">items</span><span class="s3">.</span><span class="s1">length </span><span class="s3">+</span>
					<span class="s3">(</span><span class="s1">filteredChildren </span><span class="s3">&amp;&amp; !</span><span class="s1">filteredChildrenLineReserved </span><span class="s3">? </span><span class="s7">1 </span><span class="s3">: </span><span class="s7">0</span><span class="s3">) -</span>
					<span class="s1">max</span><span class="s3">) &gt; </span><span class="s7">0</span>
			<span class="s3">) {</span>
				<span class="s0">// Find the maximum group and process only this one</span>
				<span class="s4">const </span><span class="s1">maxGroupSize </span><span class="s3">= </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">max</span><span class="s3">(</span><span class="s1">...groupSizes</span><span class="s3">);</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">maxGroupSize </span><span class="s3">&lt; </span><span class="s1">items</span><span class="s3">.</span><span class="s1">length</span><span class="s3">) {</span>
					<span class="s1">filteredChildren </span><span class="s3">= </span><span class="s1">items</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
					<span class="s1">items</span><span class="s3">.</span><span class="s1">length </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
					<span class="s4">continue</span><span class="s3">;</span>
				<span class="s3">}</span>
				<span class="s4">for </span><span class="s3">(</span><span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">groups</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">groupSizes</span><span class="s3">[</span><span class="s1">i</span><span class="s3">] === </span><span class="s1">maxGroupSize</span><span class="s3">) {</span>
						<span class="s4">const </span><span class="s1">group </span><span class="s3">= </span><span class="s1">groups</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
						<span class="s0">// run this algorithm recursively and limit the size of the children to</span>
						<span class="s0">// current size - oversize / number of groups</span>
						<span class="s0">// So it should always end up being smaller</span>
						<span class="s4">const </span><span class="s1">headerSize </span><span class="s3">= </span><span class="s1">group</span><span class="s3">.</span><span class="s1">filteredChildren </span><span class="s3">? </span><span class="s7">2 </span><span class="s3">: </span><span class="s7">1</span><span class="s3">;</span>
						<span class="s4">const </span><span class="s1">limited </span><span class="s3">= </span><span class="s1">spaceLimited</span><span class="s3">(</span>
							<span class="s1">group</span><span class="s3">.</span><span class="s1">children</span><span class="s3">,</span>
							<span class="s1">maxGroupSize </span><span class="s3">-</span>
								<span class="s0">// we should use ceil to always feet in max</span>
								<span class="s1">Math</span><span class="s3">.</span><span class="s1">ceil</span><span class="s3">(</span><span class="s1">oversize </span><span class="s3">/ </span><span class="s1">groups</span><span class="s3">.</span><span class="s1">length</span><span class="s3">) -</span>
								<span class="s0">// we substitute size of group head</span>
								<span class="s1">headerSize</span><span class="s3">,</span>
							<span class="s1">headerSize </span><span class="s3">=== </span><span class="s7">2</span>
						<span class="s3">);</span>
						<span class="s1">groups</span><span class="s3">[</span><span class="s1">i</span><span class="s3">] = {</span>
							<span class="s1">...group</span><span class="s3">,</span>
							<span class="s1">children</span><span class="s3">: </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">children</span><span class="s3">,</span>
							<span class="s1">filteredChildren</span><span class="s3">: </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">filteredChildren</span>
								<span class="s3">? (</span><span class="s1">group</span><span class="s3">.</span><span class="s1">filteredChildren </span><span class="s3">|| </span><span class="s7">0</span><span class="s3">) + </span><span class="s1">limited</span><span class="s3">.</span><span class="s1">filteredChildren</span>
								<span class="s3">: </span><span class="s1">group</span><span class="s3">.</span><span class="s1">filteredChildren</span>
						<span class="s3">};</span>
						<span class="s4">const </span><span class="s1">newSize </span><span class="s3">= </span><span class="s1">getItemSize</span><span class="s3">(</span><span class="s1">groups</span><span class="s3">[</span><span class="s1">i</span><span class="s3">]);</span>
						<span class="s1">groupsSize </span><span class="s3">-= </span><span class="s1">maxGroupSize </span><span class="s3">- </span><span class="s1">newSize</span><span class="s3">;</span>
						<span class="s1">groupSizes</span><span class="s3">[</span><span class="s1">i</span><span class="s3">] = </span><span class="s1">newSize</span><span class="s3">;</span>
						<span class="s4">break</span><span class="s3">;</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s1">children </span><span class="s3">= </span><span class="s1">groups</span><span class="s3">.</span><span class="s1">concat</span><span class="s3">(</span><span class="s1">items</span><span class="s3">);</span>
		<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">limit </span><span class="s3">=== </span><span class="s1">max</span><span class="s3">) {</span>
			<span class="s0">// If we have only enough space to show one line per group and one line for the filtered items</span>
			<span class="s0">// collapse all groups and items</span>
			<span class="s1">children </span><span class="s3">= </span><span class="s1">collapse</span><span class="s3">(</span><span class="s1">groups</span><span class="s3">);</span>
			<span class="s1">filteredChildren </span><span class="s3">= </span><span class="s1">items</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
		<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
			<span class="s0">// If we have no space</span>
			<span class="s0">// collapse complete group</span>
			<span class="s1">filteredChildren </span><span class="s3">= </span><span class="s1">getTotalItems</span><span class="s3">(</span><span class="s1">itemsAndGroups</span><span class="s3">);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s4">return </span><span class="s3">{</span>
		<span class="s1">children</span><span class="s3">,</span>
		<span class="s1">filteredChildren</span>
	<span class="s3">};</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">errorsSpaceLimit </span><span class="s3">= (</span><span class="s1">errors</span><span class="s3">, </span><span class="s1">max</span><span class="s3">) =&gt; {</span>
	<span class="s4">let </span><span class="s1">filtered </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
	<span class="s0">// Can not fit into limit</span>
	<span class="s0">// print only messages</span>
	<span class="s4">if </span><span class="s3">(</span><span class="s1">errors</span><span class="s3">.</span><span class="s1">length </span><span class="s3">+ </span><span class="s7">1 </span><span class="s3">&gt;= </span><span class="s1">max</span><span class="s3">)</span>
		<span class="s4">return </span><span class="s3">[</span>
			<span class="s1">errors</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">error </span><span class="s3">=&gt; {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">error </span><span class="s3">=== </span><span class="s2">&quot;string&quot; </span><span class="s3">|| !</span><span class="s1">error</span><span class="s3">.</span><span class="s1">details</span><span class="s3">) </span><span class="s4">return </span><span class="s1">error</span><span class="s3">;</span>
				<span class="s1">filtered</span><span class="s3">++;</span>
				<span class="s4">return </span><span class="s3">{ </span><span class="s1">...error</span><span class="s3">, </span><span class="s1">details</span><span class="s3">: </span><span class="s2">&quot;&quot; </span><span class="s3">};</span>
			<span class="s3">}),</span>
			<span class="s1">filtered</span>
		<span class="s3">];</span>
	<span class="s4">let </span><span class="s1">fullLength </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
	<span class="s4">let </span><span class="s1">result </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">;</span>

	<span class="s4">let </span><span class="s1">i </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
	<span class="s4">for </span><span class="s3">(; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">errors</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
		<span class="s4">const </span><span class="s1">error </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">error </span><span class="s3">!== </span><span class="s2">&quot;string&quot; </span><span class="s3">&amp;&amp; </span><span class="s1">error</span><span class="s3">.</span><span class="s1">details</span><span class="s3">) {</span>
			<span class="s4">const </span><span class="s1">splitted </span><span class="s3">= </span><span class="s1">error</span><span class="s3">.</span><span class="s1">details</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">&quot;</span><span class="s4">\n</span><span class="s2">&quot;</span><span class="s3">);</span>
			<span class="s4">const </span><span class="s1">len </span><span class="s3">= </span><span class="s1">splitted</span><span class="s3">.</span><span class="s1">length</span><span class="s3">;</span>
			<span class="s1">fullLength </span><span class="s3">+= </span><span class="s1">len</span><span class="s3">;</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">fullLength </span><span class="s3">&gt; </span><span class="s1">max</span><span class="s3">) {</span>
				<span class="s1">result </span><span class="s3">= </span><span class="s1">i </span><span class="s3">&gt; </span><span class="s7">0 </span><span class="s3">? </span><span class="s1">errors</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, </span><span class="s1">i</span><span class="s3">) : [];</span>
				<span class="s4">const </span><span class="s1">overLimit </span><span class="s3">= </span><span class="s1">fullLength </span><span class="s3">- </span><span class="s1">max </span><span class="s3">+ </span><span class="s7">1</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">error </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">[</span><span class="s1">i</span><span class="s3">++];</span>
				<span class="s1">result</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
					<span class="s1">...error</span><span class="s3">,</span>
					<span class="s1">details</span><span class="s3">: </span><span class="s1">error</span><span class="s3">.</span><span class="s1">details</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">&quot;</span><span class="s4">\n</span><span class="s2">&quot;</span><span class="s3">).</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, -</span><span class="s1">overLimit</span><span class="s3">).</span><span class="s1">join</span><span class="s3">(</span><span class="s2">&quot;</span><span class="s4">\n</span><span class="s2">&quot;</span><span class="s3">),</span>
					<span class="s1">filteredDetails</span><span class="s3">: </span><span class="s1">overLimit</span>
				<span class="s3">});</span>
				<span class="s1">filtered </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s1">i</span><span class="s3">;</span>
				<span class="s4">for </span><span class="s3">(; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">errors</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
					<span class="s4">const </span><span class="s1">error </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">error </span><span class="s3">=== </span><span class="s2">&quot;string&quot; </span><span class="s3">|| !</span><span class="s1">error</span><span class="s3">.</span><span class="s1">details</span><span class="s3">) </span><span class="s1">result</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">error</span><span class="s3">);</span>
					<span class="s1">result</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({ </span><span class="s1">...error</span><span class="s3">, </span><span class="s1">details</span><span class="s3">: </span><span class="s2">&quot;&quot; </span><span class="s3">});</span>
				<span class="s3">}</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">fullLength </span><span class="s3">=== </span><span class="s1">max</span><span class="s3">) {</span>
				<span class="s1">result </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">0</span><span class="s3">, ++</span><span class="s1">i</span><span class="s3">);</span>
				<span class="s1">filtered </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">.</span><span class="s1">length </span><span class="s3">- </span><span class="s1">i</span><span class="s3">;</span>
				<span class="s4">for </span><span class="s3">(; </span><span class="s1">i </span><span class="s3">&lt; </span><span class="s1">errors</span><span class="s3">.</span><span class="s1">length</span><span class="s3">; </span><span class="s1">i</span><span class="s3">++) {</span>
					<span class="s4">const </span><span class="s1">error </span><span class="s3">= </span><span class="s1">errors</span><span class="s3">[</span><span class="s1">i</span><span class="s3">];</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s4">typeof </span><span class="s1">error </span><span class="s3">=== </span><span class="s2">&quot;string&quot; </span><span class="s3">|| !</span><span class="s1">error</span><span class="s3">.</span><span class="s1">details</span><span class="s3">) </span><span class="s1">result</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">error</span><span class="s3">);</span>
					<span class="s1">result</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({ </span><span class="s1">...error</span><span class="s3">, </span><span class="s1">details</span><span class="s3">: </span><span class="s2">&quot;&quot; </span><span class="s3">});</span>
				<span class="s3">}</span>
				<span class="s4">break</span><span class="s3">;</span>
			<span class="s3">}</span>
		<span class="s3">}</span>
	<span class="s3">}</span>

	<span class="s4">return </span><span class="s3">[</span><span class="s1">result</span><span class="s3">, </span><span class="s1">filtered</span><span class="s3">];</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">assetGroup </span><span class="s3">= (</span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">) =&gt; {</span>
	<span class="s4">let </span><span class="s1">size </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">asset of children</span><span class="s3">) {</span>
		<span class="s1">size </span><span class="s3">+= </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">size</span><span class="s3">;</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s3">{</span>
		<span class="s1">size</span>
	<span class="s3">};</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">moduleGroup </span><span class="s3">= (</span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">) =&gt; {</span>
	<span class="s4">let </span><span class="s1">size </span><span class="s3">= </span><span class="s7">0</span><span class="s3">;</span>
	<span class="s4">const </span><span class="s1">sizes </span><span class="s3">= {};</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">module of children</span><span class="s3">) {</span>
		<span class="s1">size </span><span class="s3">+= </span><span class="s1">module</span><span class="s3">.</span><span class="s1">size</span><span class="s3">;</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">key of Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">module</span><span class="s3">.</span><span class="s1">sizes</span><span class="s3">)) {</span>
			<span class="s1">sizes</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] = (</span><span class="s1">sizes</span><span class="s3">[</span><span class="s1">key</span><span class="s3">] || </span><span class="s7">0</span><span class="s3">) + </span><span class="s1">module</span><span class="s3">.</span><span class="s1">sizes</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s3">{</span>
		<span class="s1">size</span><span class="s3">,</span>
		<span class="s1">sizes</span>
	<span class="s3">};</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">reasonGroup </span><span class="s3">= (</span><span class="s1">children</span><span class="s3">, </span><span class="s1">reasons</span><span class="s3">) =&gt; {</span>
	<span class="s4">let </span><span class="s1">active </span><span class="s3">= </span><span class="s4">false</span><span class="s3">;</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">reason of children</span><span class="s3">) {</span>
		<span class="s1">active </span><span class="s3">= </span><span class="s1">active </span><span class="s3">|| </span><span class="s1">reason</span><span class="s3">.</span><span class="s1">active</span><span class="s3">;</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s3">{</span>
		<span class="s1">active</span>
	<span class="s3">};</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">GROUP_EXTENSION_REGEXP </span><span class="s3">= </span><span class="s8">/(\.[^.]+?)(?:\?|(?: \+ \d+ modules?)?$)/</span><span class="s3">;</span>
<span class="s4">const </span><span class="s1">GROUP_PATH_REGEXP </span><span class="s3">= </span><span class="s8">/(.+)[/\\][^/\\]+?(?:\?|(?: \+ \d+ modules?)?$)/</span><span class="s3">;</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, (groupConfigs: GroupConfig[], context: StatsFactoryContext, options: NormalizedStatsOptions) =&gt; void&gt;} */</span>
<span class="s4">const </span><span class="s1">ASSETS_GROUPERS </span><span class="s3">= {</span>
	<span class="s1">_</span><span class="s3">: (</span><span class="s1">groupConfigs</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) =&gt; {</span>
		<span class="s4">const </span><span class="s1">groupByFlag </span><span class="s3">= (</span><span class="s1">name</span><span class="s3">, </span><span class="s1">exclude</span><span class="s3">) =&gt; {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">asset </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s1">asset</span><span class="s3">[</span><span class="s1">name</span><span class="s3">] ? [</span><span class="s2">&quot;1&quot;</span><span class="s3">] : </span><span class="s1">undefined</span><span class="s3">;</span>
				<span class="s3">},</span>
				<span class="s1">getOptions</span><span class="s3">: () =&gt; {</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">groupChildren</span><span class="s3">: !</span><span class="s1">exclude</span><span class="s3">,</span>
						<span class="s1">force</span><span class="s3">: </span><span class="s1">exclude</span>
					<span class="s3">};</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">) =&gt; {</span>
					<span class="s4">return </span><span class="s1">exclude</span>
						<span class="s3">? {</span>
								<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;assets by status&quot;</span><span class="s3">,</span>
								<span class="s3">[</span><span class="s1">name</span><span class="s3">]: !!</span><span class="s1">key</span><span class="s3">,</span>
								<span class="s1">filteredChildren</span><span class="s3">: </span><span class="s1">assets</span><span class="s3">.</span><span class="s1">length</span><span class="s3">,</span>
								<span class="s1">...assetGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">)</span>
						  <span class="s3">}</span>
						<span class="s3">: {</span>
								<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;assets by status&quot;</span><span class="s3">,</span>
								<span class="s3">[</span><span class="s1">name</span><span class="s3">]: !!</span><span class="s1">key</span><span class="s3">,</span>
								<span class="s1">children</span><span class="s3">,</span>
								<span class="s1">...assetGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">)</span>
						  <span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">};</span>
		<span class="s4">const </span><span class="s3">{</span>
			<span class="s1">groupAssetsByEmitStatus</span><span class="s3">,</span>
			<span class="s1">groupAssetsByPath</span><span class="s3">,</span>
			<span class="s1">groupAssetsByExtension</span>
		<span class="s3">} = </span><span class="s1">options</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupAssetsByEmitStatus</span><span class="s3">) {</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;emitted&quot;</span><span class="s3">);</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;comparedForEmit&quot;</span><span class="s3">);</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;isOverSizeLimit&quot;</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupAssetsByEmitStatus </span><span class="s3">|| !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">cachedAssets</span><span class="s3">) {</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;cached&quot;</span><span class="s3">, !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">cachedAssets</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupAssetsByPath </span><span class="s3">|| </span><span class="s1">groupAssetsByExtension</span><span class="s3">) {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">asset </span><span class="s3">=&gt; {</span>
					<span class="s4">const </span><span class="s1">extensionMatch </span><span class="s3">=</span>
						<span class="s1">groupAssetsByExtension </span><span class="s3">&amp;&amp; </span><span class="s1">GROUP_EXTENSION_REGEXP</span><span class="s3">.</span><span class="s1">exec</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">extension </span><span class="s3">= </span><span class="s1">extensionMatch </span><span class="s3">? </span><span class="s1">extensionMatch</span><span class="s3">[</span><span class="s7">1</span><span class="s3">] : </span><span class="s2">&quot;&quot;</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">pathMatch </span><span class="s3">=</span>
						<span class="s1">groupAssetsByPath </span><span class="s3">&amp;&amp; </span><span class="s1">GROUP_PATH_REGEXP</span><span class="s3">.</span><span class="s1">exec</span><span class="s3">(</span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">path </span><span class="s3">= </span><span class="s1">pathMatch </span><span class="s3">? </span><span class="s1">pathMatch</span><span class="s3">[</span><span class="s7">1</span><span class="s3">].</span><span class="s1">split</span><span class="s3">(</span><span class="s8">/[/\\]/</span><span class="s3">) : [];</span>
					<span class="s4">const </span><span class="s1">keys </span><span class="s3">= [];</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">groupAssetsByPath</span><span class="s3">) {</span>
						<span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s2">&quot;.&quot;</span><span class="s3">);</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">extension</span><span class="s3">)</span>
							<span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
								<span class="s1">path</span><span class="s3">.</span><span class="s1">length</span>
									<span class="s3">? </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">&quot;/&quot;</span><span class="s3">)}</span><span class="s2">/*</span><span class="s1">$</span><span class="s3">{</span><span class="s1">extension</span><span class="s3">}</span><span class="s2">`</span>
									<span class="s3">: </span><span class="s2">`*</span><span class="s1">$</span><span class="s3">{</span><span class="s1">extension</span><span class="s3">}</span><span class="s2">`</span>
							<span class="s3">);</span>
						<span class="s4">while </span><span class="s3">(</span><span class="s1">path</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
							<span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">&quot;/&quot;</span><span class="s3">) + </span><span class="s2">&quot;/&quot;</span><span class="s3">);</span>
							<span class="s1">path</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
						<span class="s3">}</span>
					<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">extension</span><span class="s3">) </span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s2">`*</span><span class="s1">$</span><span class="s3">{</span><span class="s1">extension</span><span class="s3">}</span><span class="s2">`</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">return </span><span class="s1">keys</span><span class="s3">;</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">) =&gt; {</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">type</span><span class="s3">: </span><span class="s1">groupAssetsByPath </span><span class="s3">? </span><span class="s2">&quot;assets by path&quot; </span><span class="s3">: </span><span class="s2">&quot;assets by extension&quot;</span><span class="s3">,</span>
						<span class="s1">name</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
						<span class="s1">children</span><span class="s3">,</span>
						<span class="s1">...assetGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">)</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">groupAssetsByInfo</span><span class="s3">: (</span><span class="s1">groupConfigs</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) =&gt; {</span>
		<span class="s4">const </span><span class="s1">groupByAssetInfoFlag </span><span class="s3">= </span><span class="s1">name </span><span class="s3">=&gt; {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">asset </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">info </span><span class="s3">&amp;&amp; </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">info</span><span class="s3">[</span><span class="s1">name</span><span class="s3">] ? [</span><span class="s2">&quot;1&quot;</span><span class="s3">] : </span><span class="s1">undefined</span><span class="s3">;</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">) =&gt; {</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;assets by info&quot;</span><span class="s3">,</span>
						<span class="s1">info</span><span class="s3">: {</span>
							<span class="s3">[</span><span class="s1">name</span><span class="s3">]: !!</span><span class="s1">key</span>
						<span class="s3">},</span>
						<span class="s1">children</span><span class="s3">,</span>
						<span class="s1">...assetGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">)</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">};</span>
		<span class="s1">groupByAssetInfoFlag</span><span class="s3">(</span><span class="s2">&quot;immutable&quot;</span><span class="s3">);</span>
		<span class="s1">groupByAssetInfoFlag</span><span class="s3">(</span><span class="s2">&quot;development&quot;</span><span class="s3">);</span>
		<span class="s1">groupByAssetInfoFlag</span><span class="s3">(</span><span class="s2">&quot;hotModuleReplacement&quot;</span><span class="s3">);</span>
	<span class="s3">},</span>
	<span class="s1">groupAssetsByChunk</span><span class="s3">: (</span><span class="s1">groupConfigs</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) =&gt; {</span>
		<span class="s4">const </span><span class="s1">groupByNames </span><span class="s3">= </span><span class="s1">name </span><span class="s3">=&gt; {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">asset </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s1">asset</span><span class="s3">[</span><span class="s1">name</span><span class="s3">];</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">) =&gt; {</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;assets by chunk&quot;</span><span class="s3">,</span>
						<span class="s3">[</span><span class="s1">name</span><span class="s3">]: [</span><span class="s1">key</span><span class="s3">],</span>
						<span class="s1">children</span><span class="s3">,</span>
						<span class="s1">...assetGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">)</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">};</span>
		<span class="s1">groupByNames</span><span class="s3">(</span><span class="s2">&quot;chunkNames&quot;</span><span class="s3">);</span>
		<span class="s1">groupByNames</span><span class="s3">(</span><span class="s2">&quot;auxiliaryChunkNames&quot;</span><span class="s3">);</span>
		<span class="s1">groupByNames</span><span class="s3">(</span><span class="s2">&quot;chunkIdHints&quot;</span><span class="s3">);</span>
		<span class="s1">groupByNames</span><span class="s3">(</span><span class="s2">&quot;auxiliaryChunkIdHints&quot;</span><span class="s3">);</span>
	<span class="s3">},</span>
	<span class="s1">excludeAssets</span><span class="s3">: (</span><span class="s1">groupConfigs</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">excludeAssets </span><span class="s3">}) =&gt; {</span>
		<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
			<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">asset </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">ident </span><span class="s3">= </span><span class="s1">asset</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
				<span class="s4">const </span><span class="s1">excluded </span><span class="s3">= </span><span class="s1">excludeAssets</span><span class="s3">.</span><span class="s1">some</span><span class="s3">(</span><span class="s1">fn </span><span class="s3">=&gt; </span><span class="s1">fn</span><span class="s3">(</span><span class="s1">ident</span><span class="s3">, </span><span class="s1">asset</span><span class="s3">));</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">excluded</span><span class="s3">) </span><span class="s4">return </span><span class="s3">[</span><span class="s2">&quot;excluded&quot;</span><span class="s3">];</span>
			<span class="s3">},</span>
			<span class="s1">getOptions</span><span class="s3">: () =&gt; ({</span>
				<span class="s1">groupChildren</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
				<span class="s1">force</span><span class="s3">: </span><span class="s4">true</span>
			<span class="s3">}),</span>
			<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">) =&gt; ({</span>
				<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;hidden assets&quot;</span><span class="s3">,</span>
				<span class="s1">filteredChildren</span><span class="s3">: </span><span class="s1">assets</span><span class="s3">.</span><span class="s1">length</span><span class="s3">,</span>
				<span class="s1">...assetGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">assets</span><span class="s3">)</span>
			<span class="s3">})</span>
		<span class="s3">});</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{function(&quot;module&quot; | &quot;chunk&quot; | &quot;root-of-chunk&quot; | &quot;nested&quot;): Record&lt;string, (groupConfigs: GroupConfig[], context: StatsFactoryContext, options: NormalizedStatsOptions) =&gt; void&gt;} */</span>
<span class="s4">const </span><span class="s1">MODULES_GROUPERS </span><span class="s3">= </span><span class="s1">type </span><span class="s3">=&gt; ({</span>
	<span class="s1">_</span><span class="s3">: (</span><span class="s1">groupConfigs</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, </span><span class="s1">options</span><span class="s3">) =&gt; {</span>
		<span class="s4">const </span><span class="s1">groupByFlag </span><span class="s3">= (</span><span class="s1">name</span><span class="s3">, </span><span class="s1">type</span><span class="s3">, </span><span class="s1">exclude</span><span class="s3">) =&gt; {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">module </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s1">module</span><span class="s3">[</span><span class="s1">name</span><span class="s3">] ? [</span><span class="s2">&quot;1&quot;</span><span class="s3">] : </span><span class="s1">undefined</span><span class="s3">;</span>
				<span class="s3">},</span>
				<span class="s1">getOptions</span><span class="s3">: () =&gt; {</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">groupChildren</span><span class="s3">: !</span><span class="s1">exclude</span><span class="s3">,</span>
						<span class="s1">force</span><span class="s3">: </span><span class="s1">exclude</span>
					<span class="s3">};</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">) =&gt; {</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">type</span><span class="s3">,</span>
						<span class="s3">[</span><span class="s1">name</span><span class="s3">]: !!</span><span class="s1">key</span><span class="s3">,</span>
						<span class="s1">...</span><span class="s3">(</span><span class="s1">exclude </span><span class="s3">? { </span><span class="s1">filteredChildren</span><span class="s3">: </span><span class="s1">modules</span><span class="s3">.</span><span class="s1">length </span><span class="s3">} : { </span><span class="s1">children </span><span class="s3">}),</span>
						<span class="s1">...moduleGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">)</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">};</span>
		<span class="s4">const </span><span class="s3">{</span>
			<span class="s1">groupModulesByCacheStatus</span><span class="s3">,</span>
			<span class="s1">groupModulesByLayer</span><span class="s3">,</span>
			<span class="s1">groupModulesByAttributes</span><span class="s3">,</span>
			<span class="s1">groupModulesByType</span><span class="s3">,</span>
			<span class="s1">groupModulesByPath</span><span class="s3">,</span>
			<span class="s1">groupModulesByExtension</span>
		<span class="s3">} = </span><span class="s1">options</span><span class="s3">;</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByAttributes</span><span class="s3">) {</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;errors&quot;</span><span class="s3">, </span><span class="s2">&quot;modules with errors&quot;</span><span class="s3">);</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;warnings&quot;</span><span class="s3">, </span><span class="s2">&quot;modules with warnings&quot;</span><span class="s3">);</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;assets&quot;</span><span class="s3">, </span><span class="s2">&quot;modules with assets&quot;</span><span class="s3">);</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;optional&quot;</span><span class="s3">, </span><span class="s2">&quot;optional modules&quot;</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByCacheStatus</span><span class="s3">) {</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;cacheable&quot;</span><span class="s3">, </span><span class="s2">&quot;cacheable modules&quot;</span><span class="s3">);</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;built&quot;</span><span class="s3">, </span><span class="s2">&quot;built modules&quot;</span><span class="s3">);</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;codeGenerated&quot;</span><span class="s3">, </span><span class="s2">&quot;code generated modules&quot;</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByCacheStatus </span><span class="s3">|| !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">cachedModules</span><span class="s3">) {</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;cached&quot;</span><span class="s3">, </span><span class="s2">&quot;cached modules&quot;</span><span class="s3">, !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">cachedModules</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByAttributes </span><span class="s3">|| !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">orphanModules</span><span class="s3">) {</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;orphan&quot;</span><span class="s3">, </span><span class="s2">&quot;orphan modules&quot;</span><span class="s3">, !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">orphanModules</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByAttributes </span><span class="s3">|| !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">dependentModules</span><span class="s3">) {</span>
			<span class="s1">groupByFlag</span><span class="s3">(</span><span class="s2">&quot;dependent&quot;</span><span class="s3">, </span><span class="s2">&quot;dependent modules&quot;</span><span class="s3">, !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">dependentModules</span><span class="s3">);</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByType </span><span class="s3">|| !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">runtimeModules</span><span class="s3">) {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">module </span><span class="s3">=&gt; {</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s1">module</span><span class="s3">.</span><span class="s1">moduleType</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByType</span><span class="s3">) {</span>
						<span class="s4">return </span><span class="s3">[</span><span class="s1">module</span><span class="s3">.</span><span class="s1">moduleType</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">&quot;/&quot;</span><span class="s3">, </span><span class="s7">1</span><span class="s3">)[</span><span class="s7">0</span><span class="s3">]];</span>
					<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">module</span><span class="s3">.</span><span class="s1">moduleType </span><span class="s3">=== </span><span class="s1">WEBPACK_MODULE_TYPE_RUNTIME</span><span class="s3">) {</span>
						<span class="s4">return </span><span class="s3">[</span><span class="s1">WEBPACK_MODULE_TYPE_RUNTIME</span><span class="s3">];</span>
					<span class="s3">}</span>
				<span class="s3">},</span>
				<span class="s1">getOptions</span><span class="s3">: </span><span class="s1">key </span><span class="s3">=&gt; {</span>
					<span class="s4">const </span><span class="s1">exclude </span><span class="s3">=</span>
						<span class="s1">key </span><span class="s3">=== </span><span class="s1">WEBPACK_MODULE_TYPE_RUNTIME </span><span class="s3">&amp;&amp; !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">runtimeModules</span><span class="s3">;</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">groupChildren</span><span class="s3">: !</span><span class="s1">exclude</span><span class="s3">,</span>
						<span class="s1">force</span><span class="s3">: </span><span class="s1">exclude</span>
					<span class="s3">};</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">) =&gt; {</span>
					<span class="s4">const </span><span class="s1">exclude </span><span class="s3">=</span>
						<span class="s1">key </span><span class="s3">=== </span><span class="s1">WEBPACK_MODULE_TYPE_RUNTIME </span><span class="s3">&amp;&amp; !</span><span class="s1">options</span><span class="s3">.</span><span class="s1">runtimeModules</span><span class="s3">;</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">type</span><span class="s3">: </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">key</span><span class="s3">} </span><span class="s2">modules`</span><span class="s3">,</span>
						<span class="s1">moduleType</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
						<span class="s1">...</span><span class="s3">(</span><span class="s1">exclude </span><span class="s3">? { </span><span class="s1">filteredChildren</span><span class="s3">: </span><span class="s1">modules</span><span class="s3">.</span><span class="s1">length </span><span class="s3">} : { </span><span class="s1">children </span><span class="s3">}),</span>
						<span class="s1">...moduleGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">)</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByLayer</span><span class="s3">) {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">module </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s3">[</span><span class="s1">module</span><span class="s3">.</span><span class="s1">layer</span><span class="s3">];</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">) =&gt; {</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;modules by layer&quot;</span><span class="s3">,</span>
						<span class="s1">layer</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
						<span class="s1">children</span><span class="s3">,</span>
						<span class="s1">...moduleGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">)</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">}</span>
		<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByPath </span><span class="s3">|| </span><span class="s1">groupModulesByExtension</span><span class="s3">) {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">module </span><span class="s3">=&gt; {</span>
					<span class="s4">if </span><span class="s3">(!</span><span class="s1">module</span><span class="s3">.</span><span class="s1">name</span><span class="s3">) </span><span class="s4">return</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">resource </span><span class="s3">= </span><span class="s1">parseResource</span><span class="s3">(</span><span class="s1">module</span><span class="s3">.</span><span class="s1">name</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">&quot;!&quot;</span><span class="s3">).</span><span class="s1">pop</span><span class="s3">()).</span><span class="s1">path</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">dataUrl </span><span class="s3">= </span><span class="s8">/^data:[^,;]+/</span><span class="s3">.</span><span class="s1">exec</span><span class="s3">(</span><span class="s1">resource</span><span class="s3">);</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">dataUrl</span><span class="s3">) </span><span class="s4">return </span><span class="s3">[</span><span class="s1">dataUrl</span><span class="s3">[</span><span class="s7">0</span><span class="s3">]];</span>
					<span class="s4">const </span><span class="s1">extensionMatch </span><span class="s3">=</span>
						<span class="s1">groupModulesByExtension </span><span class="s3">&amp;&amp; </span><span class="s1">GROUP_EXTENSION_REGEXP</span><span class="s3">.</span><span class="s1">exec</span><span class="s3">(</span><span class="s1">resource</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">extension </span><span class="s3">= </span><span class="s1">extensionMatch </span><span class="s3">? </span><span class="s1">extensionMatch</span><span class="s3">[</span><span class="s7">1</span><span class="s3">] : </span><span class="s2">&quot;&quot;</span><span class="s3">;</span>
					<span class="s4">const </span><span class="s1">pathMatch </span><span class="s3">=</span>
						<span class="s1">groupModulesByPath </span><span class="s3">&amp;&amp; </span><span class="s1">GROUP_PATH_REGEXP</span><span class="s3">.</span><span class="s1">exec</span><span class="s3">(</span><span class="s1">resource</span><span class="s3">);</span>
					<span class="s4">const </span><span class="s1">path </span><span class="s3">= </span><span class="s1">pathMatch </span><span class="s3">? </span><span class="s1">pathMatch</span><span class="s3">[</span><span class="s7">1</span><span class="s3">].</span><span class="s1">split</span><span class="s3">(</span><span class="s8">/[/\\]/</span><span class="s3">) : [];</span>
					<span class="s4">const </span><span class="s1">keys </span><span class="s3">= [];</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">groupModulesByPath</span><span class="s3">) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">extension</span><span class="s3">)</span>
							<span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span>
								<span class="s1">path</span><span class="s3">.</span><span class="s1">length</span>
									<span class="s3">? </span><span class="s2">`</span><span class="s1">$</span><span class="s3">{</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">&quot;/&quot;</span><span class="s3">)}</span><span class="s2">/*</span><span class="s1">$</span><span class="s3">{</span><span class="s1">extension</span><span class="s3">}</span><span class="s2">`</span>
									<span class="s3">: </span><span class="s2">`*</span><span class="s1">$</span><span class="s3">{</span><span class="s1">extension</span><span class="s3">}</span><span class="s2">`</span>
							<span class="s3">);</span>
						<span class="s4">while </span><span class="s3">(</span><span class="s1">path</span><span class="s3">.</span><span class="s1">length </span><span class="s3">&gt; </span><span class="s7">0</span><span class="s3">) {</span>
							<span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">path</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s2">&quot;/&quot;</span><span class="s3">) + </span><span class="s2">&quot;/&quot;</span><span class="s3">);</span>
							<span class="s1">path</span><span class="s3">.</span><span class="s1">pop</span><span class="s3">();</span>
						<span class="s3">}</span>
					<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">extension</span><span class="s3">) </span><span class="s1">keys</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s2">`*</span><span class="s1">$</span><span class="s3">{</span><span class="s1">extension</span><span class="s3">}</span><span class="s2">`</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">return </span><span class="s1">keys</span><span class="s3">;</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">) =&gt; {</span>
					<span class="s4">const </span><span class="s1">isDataUrl </span><span class="s3">= </span><span class="s1">key</span><span class="s3">.</span><span class="s1">startsWith</span><span class="s3">(</span><span class="s2">&quot;data:&quot;</span><span class="s3">);</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">type</span><span class="s3">: </span><span class="s1">isDataUrl</span>
							<span class="s3">? </span><span class="s2">&quot;modules by mime type&quot;</span>
							<span class="s3">: </span><span class="s1">groupModulesByPath</span>
							<span class="s3">? </span><span class="s2">&quot;modules by path&quot;</span>
							<span class="s3">: </span><span class="s2">&quot;modules by extension&quot;</span><span class="s3">,</span>
						<span class="s1">name</span><span class="s3">: </span><span class="s1">isDataUrl </span><span class="s3">? </span><span class="s1">key</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s0">/* 'data:'.length */ </span><span class="s7">5</span><span class="s3">) : </span><span class="s1">key</span><span class="s3">,</span>
						<span class="s1">children</span><span class="s3">,</span>
						<span class="s1">...moduleGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">)</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s1">excludeModules</span><span class="s3">: (</span><span class="s1">groupConfigs</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">excludeModules </span><span class="s3">}) =&gt; {</span>
		<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
			<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">module </span><span class="s3">=&gt; {</span>
				<span class="s4">const </span><span class="s1">name </span><span class="s3">= </span><span class="s1">module</span><span class="s3">.</span><span class="s1">name</span><span class="s3">;</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">name</span><span class="s3">) {</span>
					<span class="s4">const </span><span class="s1">excluded </span><span class="s3">= </span><span class="s1">excludeModules</span><span class="s3">.</span><span class="s1">some</span><span class="s3">(</span><span class="s1">fn </span><span class="s3">=&gt; </span><span class="s1">fn</span><span class="s3">(</span><span class="s1">name</span><span class="s3">, </span><span class="s1">module</span><span class="s3">, </span><span class="s1">type</span><span class="s3">));</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">excluded</span><span class="s3">) </span><span class="s4">return </span><span class="s3">[</span><span class="s2">&quot;1&quot;</span><span class="s3">];</span>
				<span class="s3">}</span>
			<span class="s3">},</span>
			<span class="s1">getOptions</span><span class="s3">: () =&gt; ({</span>
				<span class="s1">groupChildren</span><span class="s3">: </span><span class="s4">false</span><span class="s3">,</span>
				<span class="s1">force</span><span class="s3">: </span><span class="s4">true</span>
			<span class="s3">}),</span>
			<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">) =&gt; ({</span>
				<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;hidden modules&quot;</span><span class="s3">,</span>
				<span class="s1">filteredChildren</span><span class="s3">: </span><span class="s1">children</span><span class="s3">.</span><span class="s1">length</span><span class="s3">,</span>
				<span class="s1">...moduleGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">modules</span><span class="s3">)</span>
			<span class="s3">})</span>
		<span class="s3">});</span>
	<span class="s3">}</span>
<span class="s3">});</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, Record&lt;string, (groupConfigs: GroupConfig[], context: StatsFactoryContext, options: NormalizedStatsOptions) =&gt; void&gt;&gt;} */</span>
<span class="s4">const </span><span class="s1">RESULT_GROUPERS </span><span class="s3">= {</span>
	<span class="s2">&quot;compilation.assets&quot;</span><span class="s3">: </span><span class="s1">ASSETS_GROUPERS</span><span class="s3">,</span>
	<span class="s2">&quot;asset.related&quot;</span><span class="s3">: </span><span class="s1">ASSETS_GROUPERS</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.modules&quot;</span><span class="s3">: </span><span class="s1">MODULES_GROUPERS</span><span class="s3">(</span><span class="s2">&quot;module&quot;</span><span class="s3">),</span>
	<span class="s2">&quot;chunk.modules&quot;</span><span class="s3">: </span><span class="s1">MODULES_GROUPERS</span><span class="s3">(</span><span class="s2">&quot;chunk&quot;</span><span class="s3">),</span>
	<span class="s2">&quot;chunk.rootModules&quot;</span><span class="s3">: </span><span class="s1">MODULES_GROUPERS</span><span class="s3">(</span><span class="s2">&quot;root-of-chunk&quot;</span><span class="s3">),</span>
	<span class="s2">&quot;module.modules&quot;</span><span class="s3">: </span><span class="s1">MODULES_GROUPERS</span><span class="s3">(</span><span class="s2">&quot;nested&quot;</span><span class="s3">),</span>
	<span class="s2">&quot;module.reasons&quot;</span><span class="s3">: {</span>
		<span class="s1">groupReasonsByOrigin</span><span class="s3">: </span><span class="s1">groupConfigs </span><span class="s3">=&gt; {</span>
			<span class="s1">groupConfigs</span><span class="s3">.</span><span class="s1">push</span><span class="s3">({</span>
				<span class="s1">getKeys</span><span class="s3">: </span><span class="s1">reason </span><span class="s3">=&gt; {</span>
					<span class="s4">return </span><span class="s3">[</span><span class="s1">reason</span><span class="s3">.</span><span class="s1">module</span><span class="s3">];</span>
				<span class="s3">},</span>
				<span class="s1">createGroup</span><span class="s3">: (</span><span class="s1">key</span><span class="s3">, </span><span class="s1">children</span><span class="s3">, </span><span class="s1">reasons</span><span class="s3">) =&gt; {</span>
					<span class="s4">return </span><span class="s3">{</span>
						<span class="s1">type</span><span class="s3">: </span><span class="s2">&quot;from origin&quot;</span><span class="s3">,</span>
						<span class="s1">module</span><span class="s3">: </span><span class="s1">key</span><span class="s3">,</span>
						<span class="s1">children</span><span class="s3">,</span>
						<span class="s1">...reasonGroup</span><span class="s3">(</span><span class="s1">children</span><span class="s3">, </span><span class="s1">reasons</span><span class="s3">)</span>
					<span class="s3">};</span>
				<span class="s3">}</span>
			<span class="s3">});</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s0">// remove a prefixed &quot;!&quot; that can be specified to reverse sort order</span>
<span class="s4">const </span><span class="s1">normalizeFieldKey </span><span class="s3">= </span><span class="s1">field </span><span class="s3">=&gt; {</span>
	<span class="s4">if </span><span class="s3">(</span><span class="s1">field</span><span class="s3">[</span><span class="s7">0</span><span class="s3">] === </span><span class="s2">&quot;!&quot;</span><span class="s3">) {</span>
		<span class="s4">return </span><span class="s1">field</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">1</span><span class="s3">);</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">field</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s0">// if a field is prefixed by a &quot;!&quot; reverse sort order</span>
<span class="s4">const </span><span class="s1">sortOrderRegular </span><span class="s3">= </span><span class="s1">field </span><span class="s3">=&gt; {</span>
	<span class="s4">if </span><span class="s3">(</span><span class="s1">field</span><span class="s3">[</span><span class="s7">0</span><span class="s3">] === </span><span class="s2">&quot;!&quot;</span><span class="s3">) {</span>
		<span class="s4">return false</span><span class="s3">;</span>
	<span class="s3">}</span>
	<span class="s4">return true</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{string} field field name</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{function(Object, Object): number} comparators</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">sortByField </span><span class="s3">= </span><span class="s1">field </span><span class="s3">=&gt; {</span>
	<span class="s4">if </span><span class="s3">(!</span><span class="s1">field</span><span class="s3">) {</span>
		<span class="s5">/**</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{any} a first</span>
		 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{any} b second</span>
		 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{-1|0|1} zero</span>
		 <span class="s5">*/</span>
		<span class="s4">const </span><span class="s1">noSort </span><span class="s3">= (</span><span class="s1">a</span><span class="s3">, </span><span class="s1">b</span><span class="s3">) =&gt; </span><span class="s7">0</span><span class="s3">;</span>
		<span class="s4">return </span><span class="s1">noSort</span><span class="s3">;</span>
	<span class="s3">}</span>

	<span class="s4">const </span><span class="s1">fieldKey </span><span class="s3">= </span><span class="s1">normalizeFieldKey</span><span class="s3">(</span><span class="s1">field</span><span class="s3">);</span>

	<span class="s4">let </span><span class="s1">sortFn </span><span class="s3">= </span><span class="s1">compareSelect</span><span class="s3">(</span><span class="s1">m </span><span class="s3">=&gt; </span><span class="s1">m</span><span class="s3">[</span><span class="s1">fieldKey</span><span class="s3">], </span><span class="s1">compareIds</span><span class="s3">);</span>

	<span class="s0">// if a field is prefixed with a &quot;!&quot; the sort is reversed!</span>
	<span class="s4">const </span><span class="s1">sortIsRegular </span><span class="s3">= </span><span class="s1">sortOrderRegular</span><span class="s3">(</span><span class="s1">field</span><span class="s3">);</span>

	<span class="s4">if </span><span class="s3">(!</span><span class="s1">sortIsRegular</span><span class="s3">) {</span>
		<span class="s4">const </span><span class="s1">oldSortFn </span><span class="s3">= </span><span class="s1">sortFn</span><span class="s3">;</span>
		<span class="s1">sortFn </span><span class="s3">= (</span><span class="s1">a</span><span class="s3">, </span><span class="s1">b</span><span class="s3">) =&gt; </span><span class="s1">oldSortFn</span><span class="s3">(</span><span class="s1">b</span><span class="s3">, </span><span class="s1">a</span><span class="s3">);</span>
	<span class="s3">}</span>

	<span class="s4">return </span><span class="s1">sortFn</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s4">const </span><span class="s1">ASSET_SORTERS </span><span class="s3">= {</span>
	<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{(comparators: Function[], context: StatsFactoryContext, options: NormalizedStatsOptions) =&gt; void} */</span>
	<span class="s1">assetsSort</span><span class="s3">: (</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">assetsSort </span><span class="s3">}) =&gt; {</span>
		<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">sortByField</span><span class="s3">(</span><span class="s1">assetsSort</span><span class="s3">));</span>
	<span class="s3">},</span>
	<span class="s1">_</span><span class="s3">: </span><span class="s1">comparators </span><span class="s3">=&gt; {</span>
		<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">compareSelect</span><span class="s3">(</span><span class="s1">a </span><span class="s3">=&gt; </span><span class="s1">a</span><span class="s3">.</span><span class="s1">name</span><span class="s3">, </span><span class="s1">compareIds</span><span class="s3">));</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, Record&lt;string, (comparators: Function[], context: StatsFactoryContext, options: NormalizedStatsOptions) =&gt; void&gt;&gt;} */</span>
<span class="s4">const </span><span class="s1">RESULT_SORTERS </span><span class="s3">= {</span>
	<span class="s2">&quot;compilation.chunks&quot;</span><span class="s3">: {</span>
		<span class="s1">chunksSort</span><span class="s3">: (</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">chunksSort </span><span class="s3">}) =&gt; {</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">sortByField</span><span class="s3">(</span><span class="s1">chunksSort</span><span class="s3">));</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s2">&quot;compilation.modules&quot;</span><span class="s3">: {</span>
		<span class="s1">modulesSort</span><span class="s3">: (</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">modulesSort </span><span class="s3">}) =&gt; {</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">sortByField</span><span class="s3">(</span><span class="s1">modulesSort</span><span class="s3">));</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s2">&quot;chunk.modules&quot;</span><span class="s3">: {</span>
		<span class="s1">chunkModulesSort</span><span class="s3">: (</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">chunkModulesSort </span><span class="s3">}) =&gt; {</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">sortByField</span><span class="s3">(</span><span class="s1">chunkModulesSort</span><span class="s3">));</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s2">&quot;module.modules&quot;</span><span class="s3">: {</span>
		<span class="s1">nestedModulesSort</span><span class="s3">: (</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">context</span><span class="s3">, { </span><span class="s1">nestedModulesSort </span><span class="s3">}) =&gt; {</span>
			<span class="s1">comparators</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">sortByField</span><span class="s3">(</span><span class="s1">nestedModulesSort</span><span class="s3">));</span>
		<span class="s3">}</span>
	<span class="s3">},</span>
	<span class="s2">&quot;compilation.assets&quot;</span><span class="s3">: </span><span class="s1">ASSET_SORTERS</span><span class="s3">,</span>
	<span class="s2">&quot;asset.related&quot;</span><span class="s3">: </span><span class="s1">ASSET_SORTERS</span>
<span class="s3">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Record&lt;string, Record&lt;string, Function&gt;&gt;} config the config see above</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{NormalizedStatsOptions} options stats options</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{function(string, Function): void} fn handler function called for every active line in config</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">iterateConfig </span><span class="s3">= (</span><span class="s1">config</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) =&gt; {</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">hookFor of Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">config</span><span class="s3">)) {</span>
		<span class="s4">const </span><span class="s1">subConfig </span><span class="s3">= </span><span class="s1">config</span><span class="s3">[</span><span class="s1">hookFor</span><span class="s3">];</span>
		<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">option of Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">subConfig</span><span class="s3">)) {</span>
			<span class="s4">if </span><span class="s3">(</span><span class="s1">option </span><span class="s3">!== </span><span class="s2">&quot;_&quot;</span><span class="s3">) {</span>
				<span class="s4">if </span><span class="s3">(</span><span class="s1">option</span><span class="s3">.</span><span class="s1">startsWith</span><span class="s3">(</span><span class="s2">&quot;!&quot;</span><span class="s3">)) {</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">[</span><span class="s1">option</span><span class="s3">.</span><span class="s1">slice</span><span class="s3">(</span><span class="s7">1</span><span class="s3">)]) </span><span class="s4">continue</span><span class="s3">;</span>
				<span class="s3">} </span><span class="s4">else </span><span class="s3">{</span>
					<span class="s4">const </span><span class="s1">value </span><span class="s3">= </span><span class="s1">options</span><span class="s3">[</span><span class="s1">option</span><span class="s3">];</span>
					<span class="s4">if </span><span class="s3">(</span>
						<span class="s1">value </span><span class="s3">=== </span><span class="s4">false </span><span class="s3">||</span>
						<span class="s1">value </span><span class="s3">=== </span><span class="s1">undefined </span><span class="s3">||</span>
						<span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) &amp;&amp; </span><span class="s1">value</span><span class="s3">.</span><span class="s1">length </span><span class="s3">=== </span><span class="s7">0</span><span class="s3">)</span>
					<span class="s3">)</span>
						<span class="s4">continue</span><span class="s3">;</span>
				<span class="s3">}</span>
			<span class="s3">}</span>
			<span class="s1">fn</span><span class="s3">(</span><span class="s1">hookFor</span><span class="s3">, </span><span class="s1">subConfig</span><span class="s3">[</span><span class="s1">option</span><span class="s3">]);</span>
		<span class="s3">}</span>
	<span class="s3">}</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, string&gt;} */</span>
<span class="s4">const </span><span class="s1">ITEM_NAMES </span><span class="s3">= {</span>
	<span class="s2">&quot;compilation.children[]&quot;</span><span class="s3">: </span><span class="s2">&quot;compilation&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.modules[]&quot;</span><span class="s3">: </span><span class="s2">&quot;module&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.entrypoints[]&quot;</span><span class="s3">: </span><span class="s2">&quot;chunkGroup&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.namedChunkGroups[]&quot;</span><span class="s3">: </span><span class="s2">&quot;chunkGroup&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.errors[]&quot;</span><span class="s3">: </span><span class="s2">&quot;error&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.warnings[]&quot;</span><span class="s3">: </span><span class="s2">&quot;warning&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;chunk.modules[]&quot;</span><span class="s3">: </span><span class="s2">&quot;module&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;chunk.rootModules[]&quot;</span><span class="s3">: </span><span class="s2">&quot;module&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;chunk.origins[]&quot;</span><span class="s3">: </span><span class="s2">&quot;chunkOrigin&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.chunks[]&quot;</span><span class="s3">: </span><span class="s2">&quot;chunk&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.assets[]&quot;</span><span class="s3">: </span><span class="s2">&quot;asset&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;asset.related[]&quot;</span><span class="s3">: </span><span class="s2">&quot;asset&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;module.issuerPath[]&quot;</span><span class="s3">: </span><span class="s2">&quot;moduleIssuer&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;module.reasons[]&quot;</span><span class="s3">: </span><span class="s2">&quot;moduleReason&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;module.modules[]&quot;</span><span class="s3">: </span><span class="s2">&quot;module&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;module.children[]&quot;</span><span class="s3">: </span><span class="s2">&quot;module&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;moduleTrace[]&quot;</span><span class="s3">: </span><span class="s2">&quot;moduleTraceItem&quot;</span><span class="s3">,</span>
	<span class="s2">&quot;moduleTraceItem.dependencies[]&quot;</span><span class="s3">: </span><span class="s2">&quot;moduleTraceDependency&quot;</span>
<span class="s3">};</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Object[]} items items to be merged</span>
 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{Object} an object</span>
 <span class="s5">*/</span>
<span class="s4">const </span><span class="s1">mergeToObject </span><span class="s3">= </span><span class="s1">items </span><span class="s3">=&gt; {</span>
	<span class="s4">const </span><span class="s1">obj </span><span class="s3">= </span><span class="s1">Object</span><span class="s3">.</span><span class="s1">create</span><span class="s3">(</span><span class="s4">null</span><span class="s3">);</span>
	<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">item of items</span><span class="s3">) {</span>
		<span class="s1">obj</span><span class="s3">[</span><span class="s1">item</span><span class="s3">.</span><span class="s1">name</span><span class="s3">] = </span><span class="s1">item</span><span class="s3">;</span>
	<span class="s3">}</span>
	<span class="s4">return </span><span class="s1">obj</span><span class="s3">;</span>
<span class="s3">};</span>

<span class="s5">/** </span><span class="s6">@type </span><span class="s5">{Record&lt;string, (items: Object[]) =&gt; any&gt;} */</span>
<span class="s4">const </span><span class="s1">MERGER </span><span class="s3">= {</span>
	<span class="s2">&quot;compilation.entrypoints&quot;</span><span class="s3">: </span><span class="s1">mergeToObject</span><span class="s3">,</span>
	<span class="s2">&quot;compilation.namedChunkGroups&quot;</span><span class="s3">: </span><span class="s1">mergeToObject</span>
<span class="s3">};</span>

<span class="s4">class </span><span class="s1">DefaultStatsFactoryPlugin </span><span class="s3">{</span>
	<span class="s5">/**</span>
	 <span class="s5">* Apply the plugin</span>
	 <span class="s5">* </span><span class="s6">@param </span><span class="s5">{Compiler} compiler the compiler instance</span>
	 <span class="s5">* </span><span class="s6">@returns </span><span class="s5">{void}</span>
	 <span class="s5">*/</span>
	<span class="s1">apply</span><span class="s3">(</span><span class="s1">compiler</span><span class="s3">) {</span>
		<span class="s1">compiler</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, </span><span class="s1">compilation </span><span class="s3">=&gt; {</span>
			<span class="s1">compilation</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">statsFactory</span><span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span>
				<span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">,</span>
				<span class="s3">(</span><span class="s1">stats</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">context</span><span class="s3">) =&gt; {</span>
					<span class="s1">iterateConfig</span><span class="s3">(</span><span class="s1">SIMPLE_EXTRACTORS</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, (</span><span class="s1">hookFor</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) =&gt; {</span>
						<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">extract</span>
							<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">hookFor</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, (</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">data</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">) =&gt;</span>
								<span class="s1">fn</span><span class="s3">(</span><span class="s1">obj</span><span class="s3">, </span><span class="s1">data</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">stats</span><span class="s3">)</span>
							<span class="s3">);</span>
					<span class="s3">});</span>
					<span class="s1">iterateConfig</span><span class="s3">(</span><span class="s1">FILTER</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, (</span><span class="s1">hookFor</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) =&gt; {</span>
						<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">filter</span>
							<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">hookFor</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, (</span><span class="s1">item</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">, </span><span class="s1">idx</span><span class="s3">, </span><span class="s1">i</span><span class="s3">) =&gt;</span>
								<span class="s1">fn</span><span class="s3">(</span><span class="s1">item</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">idx</span><span class="s3">, </span><span class="s1">i</span><span class="s3">)</span>
							<span class="s3">);</span>
					<span class="s3">});</span>
					<span class="s1">iterateConfig</span><span class="s3">(</span><span class="s1">FILTER_RESULTS</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, (</span><span class="s1">hookFor</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) =&gt; {</span>
						<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">filterResults</span>
							<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">hookFor</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, (</span><span class="s1">item</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">, </span><span class="s1">idx</span><span class="s3">, </span><span class="s1">i</span><span class="s3">) =&gt;</span>
								<span class="s1">fn</span><span class="s3">(</span><span class="s1">item</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, </span><span class="s1">idx</span><span class="s3">, </span><span class="s1">i</span><span class="s3">)</span>
							<span class="s3">);</span>
					<span class="s3">});</span>
					<span class="s1">iterateConfig</span><span class="s3">(</span><span class="s1">SORTERS</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, (</span><span class="s1">hookFor</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) =&gt; {</span>
						<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">sort</span>
							<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">hookFor</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, (</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">) =&gt;</span>
								<span class="s1">fn</span><span class="s3">(</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">, </span><span class="s1">options</span><span class="s3">)</span>
							<span class="s3">);</span>
					<span class="s3">});</span>
					<span class="s1">iterateConfig</span><span class="s3">(</span><span class="s1">RESULT_SORTERS</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, (</span><span class="s1">hookFor</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) =&gt; {</span>
						<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">sortResults</span>
							<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">hookFor</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, (</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">) =&gt;</span>
								<span class="s1">fn</span><span class="s3">(</span><span class="s1">comparators</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">, </span><span class="s1">options</span><span class="s3">)</span>
							<span class="s3">);</span>
					<span class="s3">});</span>
					<span class="s1">iterateConfig</span><span class="s3">(</span><span class="s1">RESULT_GROUPERS</span><span class="s3">, </span><span class="s1">options</span><span class="s3">, (</span><span class="s1">hookFor</span><span class="s3">, </span><span class="s1">fn</span><span class="s3">) =&gt; {</span>
						<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">groupResults</span>
							<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">hookFor</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, (</span><span class="s1">groupConfigs</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">) =&gt;</span>
								<span class="s1">fn</span><span class="s3">(</span><span class="s1">groupConfigs</span><span class="s3">, </span><span class="s1">ctx</span><span class="s3">, </span><span class="s1">options</span><span class="s3">)</span>
							<span class="s3">);</span>
					<span class="s3">});</span>
					<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">key of Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">ITEM_NAMES</span><span class="s3">)) {</span>
						<span class="s4">const </span><span class="s1">itemName </span><span class="s3">= </span><span class="s1">ITEM_NAMES</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
						<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">getItemName</span>
							<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">key</span><span class="s3">)</span>
							<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, () =&gt; </span><span class="s1">itemName</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">for </span><span class="s3">(</span><span class="s4">const </span><span class="s1">key of Object</span><span class="s3">.</span><span class="s1">keys</span><span class="s3">(</span><span class="s1">MERGER</span><span class="s3">)) {</span>
						<span class="s4">const </span><span class="s1">merger </span><span class="s3">= </span><span class="s1">MERGER</span><span class="s3">[</span><span class="s1">key</span><span class="s3">];</span>
						<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">merge</span><span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s1">key</span><span class="s3">).</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, </span><span class="s1">merger</span><span class="s3">);</span>
					<span class="s3">}</span>
					<span class="s4">if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">children</span><span class="s3">) {</span>
						<span class="s4">if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">children</span><span class="s3">)) {</span>
							<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">getItemFactory</span>
								<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;compilation.children[].compilation&quot;</span><span class="s3">)</span>
								<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, (</span><span class="s1">comp</span><span class="s3">, { </span><span class="s1">_index</span><span class="s3">: </span><span class="s1">idx </span><span class="s3">}) =&gt; {</span>
									<span class="s4">if </span><span class="s3">(</span><span class="s1">idx </span><span class="s3">&lt; </span><span class="s1">options</span><span class="s3">.</span><span class="s1">children</span><span class="s3">.</span><span class="s1">length</span><span class="s3">) {</span>
										<span class="s4">return </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">createStatsFactory</span><span class="s3">(</span>
											<span class="s1">compilation</span><span class="s3">.</span><span class="s1">createStatsOptions</span><span class="s3">(</span>
												<span class="s1">options</span><span class="s3">.</span><span class="s1">children</span><span class="s3">[</span><span class="s1">idx</span><span class="s3">],</span>
												<span class="s1">context</span>
											<span class="s3">)</span>
										<span class="s3">);</span>
									<span class="s3">}</span>
								<span class="s3">});</span>
						<span class="s3">} </span><span class="s4">else if </span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">children </span><span class="s3">!== </span><span class="s4">true</span><span class="s3">) {</span>
							<span class="s4">const </span><span class="s1">childFactory </span><span class="s3">= </span><span class="s1">compilation</span><span class="s3">.</span><span class="s1">createStatsFactory</span><span class="s3">(</span>
								<span class="s1">compilation</span><span class="s3">.</span><span class="s1">createStatsOptions</span><span class="s3">(</span><span class="s1">options</span><span class="s3">.</span><span class="s1">children</span><span class="s3">, </span><span class="s1">context</span><span class="s3">)</span>
							<span class="s3">);</span>
							<span class="s1">stats</span><span class="s3">.</span><span class="s1">hooks</span><span class="s3">.</span><span class="s1">getItemFactory</span>
								<span class="s3">.</span><span class="s1">for</span><span class="s3">(</span><span class="s2">&quot;compilation.children[].compilation&quot;</span><span class="s3">)</span>
								<span class="s3">.</span><span class="s1">tap</span><span class="s3">(</span><span class="s2">&quot;DefaultStatsFactoryPlugin&quot;</span><span class="s3">, () =&gt; {</span>
									<span class="s4">return </span><span class="s1">childFactory</span><span class="s3">;</span>
								<span class="s3">});</span>
						<span class="s3">}</span>
					<span class="s3">}</span>
				<span class="s3">}</span>
			<span class="s3">);</span>
		<span class="s3">});</span>
	<span class="s3">}</span>
<span class="s3">}</span>
<span class="s1">module</span><span class="s3">.</span><span class="s1">exports </span><span class="s3">= </span><span class="s1">DefaultStatsFactoryPlugin</span><span class="s3">;</span>
</pre>
</body>
</html>