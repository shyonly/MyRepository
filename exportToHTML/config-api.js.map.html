<html>
<head>
<title>config-api.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
config-api.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;_semver&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;_index&quot;</span><span class="s0">,</span><span class="s1">&quot;_caching&quot;</span><span class="s0">,</span><span class="s1">&quot;makeConfigAPI&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;using&quot;</span><span class="s0">,</span><span class="s1">&quot;envName&quot;</span><span class="s0">,</span><span class="s1">&quot;assertSimpleType&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;caller&quot;</span><span class="s0">,</span><span class="s1">&quot;cb&quot;</span><span class="s0">,</span><span class="s1">&quot;version&quot;</span><span class="s0">,</span><span class="s1">&quot;coreVersion&quot;</span><span class="s0">,</span><span class="s1">&quot;simple&quot;</span><span class="s0">,</span><span class="s1">&quot;async&quot;</span><span class="s0">,</span><span class="s1">&quot;assertVersion&quot;</span><span class="s0">,</span><span class="s1">&quot;makePresetAPI&quot;</span><span class="s0">,</span><span class="s1">&quot;externalDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;targets&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;addExternalDependency&quot;</span><span class="s0">,</span><span class="s1">&quot;ref&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;makePluginAPI&quot;</span><span class="s0">,</span><span class="s1">&quot;assumption&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;assumptions&quot;</span><span class="s0">,</span><span class="s1">&quot;range&quot;</span><span class="s0">,</span><span class="s1">&quot;Number&quot;</span><span class="s0">,</span><span class="s1">&quot;isInteger&quot;</span><span class="s0">,</span><span class="s1">&quot;semver&quot;</span><span class="s0">,</span><span class="s1">&quot;satisfies&quot;</span><span class="s0">,</span><span class="s1">&quot;limit&quot;</span><span class="s0">,</span><span class="s1">&quot;stackTraceLimit&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/config/helpers/config-api.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import semver from </span><span class="s3">\&quot;</span><span class="s1">semver</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { Targets } from </span><span class="s3">\&quot;</span><span class="s1">@babel/helper-compilation-targets</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import { version as coreVersion } from </span><span class="s3">\&quot;</span><span class="s1">../../index.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { assertSimpleType } from </span><span class="s3">\&quot;</span><span class="s1">../caching.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">CacheConfigurator,</span><span class="s3">\n  </span><span class="s1">SimpleCacheConfigurator,</span><span class="s3">\n  </span><span class="s1">SimpleType,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">../caching.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import type { AssumptionName, CallerMetadata } from </span><span class="s3">\&quot;</span><span class="s1">../validation/options.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import type * as Context from </span><span class="s3">\&quot;</span><span class="s1">../cache-contexts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">type EnvFunction = {</span><span class="s3">\n  </span><span class="s1">(): string;</span><span class="s3">\n  </span><span class="s1">&lt;T&gt;(extractor: (babelEnv: string) =&gt; T): T;</span><span class="s3">\n  </span><span class="s1">(envVar: string): boolean;</span><span class="s3">\n  </span><span class="s1">(envVars: Array&lt;string&gt;): boolean;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">type CallerFactory = (</span><span class="s3">\n  </span><span class="s1">extractor: (callerMetadata: CallerMetadata | undefined) =&gt; unknown,</span><span class="s3">\n</span><span class="s1">) =&gt; SimpleType;</span><span class="s3">\n</span><span class="s1">type TargetsFunction = () =&gt; Targets;</span><span class="s3">\n</span><span class="s1">type AssumptionFunction = (name: AssumptionName) =&gt; boolean | undefined;</span><span class="s3">\n\n</span><span class="s1">export type ConfigAPI = {</span><span class="s3">\n  </span><span class="s1">version: string;</span><span class="s3">\n  </span><span class="s1">cache: SimpleCacheConfigurator;</span><span class="s3">\n  </span><span class="s1">env: EnvFunction;</span><span class="s3">\n  </span><span class="s1">async: () =&gt; boolean;</span><span class="s3">\n  </span><span class="s1">assertVersion: typeof assertVersion;</span><span class="s3">\n  </span><span class="s1">caller?: CallerFactory;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export type PresetAPI = {</span><span class="s3">\n  </span><span class="s1">targets: TargetsFunction;</span><span class="s3">\n  </span><span class="s1">addExternalDependency: (ref: string) =&gt; void;</span><span class="s3">\n</span><span class="s1">} &amp; ConfigAPI;</span><span class="s3">\n\n</span><span class="s1">export type PluginAPI = {</span><span class="s3">\n  </span><span class="s1">assumption: AssumptionFunction;</span><span class="s3">\n</span><span class="s1">} &amp; PresetAPI;</span><span class="s3">\n\n</span><span class="s1">export function makeConfigAPI&lt;SideChannel extends Context.SimpleConfig&gt;(</span><span class="s3">\n  </span><span class="s1">cache: CacheConfigurator&lt;SideChannel&gt;,</span><span class="s3">\n</span><span class="s1">): ConfigAPI {</span><span class="s3">\n  </span><span class="s1">// TODO(@nicolo-ribaudo): If we remove the explicit type from `value`</span><span class="s3">\n  </span><span class="s1">// and the `as any` type cast, TypeScript crashes in an infinite</span><span class="s3">\n  </span><span class="s1">// recursion. After upgrading to TS4.7 and finishing the noImplicitAny</span><span class="s3">\n  </span><span class="s1">// PR, we should check if it still crashes and report it to the TS team.</span><span class="s3">\n  </span><span class="s1">const env: EnvFunction = ((</span><span class="s3">\n    </span><span class="s1">value: string | string[] | (&lt;T&gt;(babelEnv: string) =&gt; T),</span><span class="s3">\n  </span><span class="s1">) =&gt;</span><span class="s3">\n    </span><span class="s1">cache.using(data =&gt; {</span><span class="s3">\n      </span><span class="s1">if (typeof value === </span><span class="s3">\&quot;</span><span class="s1">undefined</span><span class="s3">\&quot;</span><span class="s1">) return data.envName;</span><span class="s3">\n      </span><span class="s1">if (typeof value === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n        </span><span class="s1">return assertSimpleType(value(data.envName));</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">return (Array.isArray(value) ? value : [value]).some(entry =&gt; {</span><span class="s3">\n        </span><span class="s1">if (typeof entry !== </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Unexpected non-string value</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return entry === data.envName;</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">})) as any;</span><span class="s3">\n\n  </span><span class="s1">const caller = (cb: {</span><span class="s3">\n    </span><span class="s1">(CallerMetadata: CallerMetadata | undefined): SimpleType;</span><span class="s3">\n  </span><span class="s1">}) =&gt; cache.using(data =&gt; assertSimpleType(cb(data.caller)));</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">version: coreVersion,</span><span class="s3">\n    </span><span class="s1">cache: cache.simple(),</span><span class="s3">\n    </span><span class="s1">// Expose </span><span class="s3">\&quot;</span><span class="s1">.env()</span><span class="s3">\&quot; </span><span class="s1">so people can easily get the same env that we expose using the </span><span class="s3">\&quot;</span><span class="s1">env</span><span class="s3">\&quot; </span><span class="s1">key.</span><span class="s3">\n    </span><span class="s1">env,</span><span class="s3">\n    </span><span class="s1">async: () =&gt; false,</span><span class="s3">\n    </span><span class="s1">caller,</span><span class="s3">\n    </span><span class="s1">assertVersion,</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function makePresetAPI&lt;SideChannel extends Context.SimplePreset&gt;(</span><span class="s3">\n  </span><span class="s1">cache: CacheConfigurator&lt;SideChannel&gt;,</span><span class="s3">\n  </span><span class="s1">externalDependencies: Array&lt;string&gt;,</span><span class="s3">\n</span><span class="s1">): PresetAPI {</span><span class="s3">\n  </span><span class="s1">const targets = () =&gt;</span><span class="s3">\n    </span><span class="s1">// We are using JSON.parse/JSON.stringify because it's only possible to cache</span><span class="s3">\n    </span><span class="s1">// primitive values. We can safely stringify the targets object because it</span><span class="s3">\n    </span><span class="s1">// only contains strings as its properties.</span><span class="s3">\n    </span><span class="s1">// Please make the Record and Tuple proposal happen!</span><span class="s3">\n    </span><span class="s1">JSON.parse(cache.using(data =&gt; JSON.stringify(data.targets)));</span><span class="s3">\n\n  </span><span class="s1">const addExternalDependency = (ref: string) =&gt; {</span><span class="s3">\n    </span><span class="s1">externalDependencies.push(ref);</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n\n  </span><span class="s1">return { ...makeConfigAPI(cache), targets, addExternalDependency };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function makePluginAPI&lt;SideChannel extends Context.SimplePlugin&gt;(</span><span class="s3">\n  </span><span class="s1">cache: CacheConfigurator&lt;SideChannel&gt;,</span><span class="s3">\n  </span><span class="s1">externalDependencies: Array&lt;string&gt;,</span><span class="s3">\n</span><span class="s1">): PluginAPI {</span><span class="s3">\n  </span><span class="s1">const assumption = (name: string) =&gt;</span><span class="s3">\n    </span><span class="s1">cache.using(data =&gt; data.assumptions[name]);</span><span class="s3">\n\n  </span><span class="s1">return { ...makePresetAPI(cache, externalDependencies), assumption };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function assertVersion(range: string | number): void {</span><span class="s3">\n  </span><span class="s1">if (typeof range === </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (!Number.isInteger(range)) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Expected string or integer value.</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">range = `^${range}.0.0-0`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (typeof range !== </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Expected string or integer value.</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// TODO(Babel 8): Update all the version checks</span><span class="s3">\n  </span><span class="s1">if (process.env.BABEL_8_BREAKING) {</span><span class="s3">\n    </span><span class="s1">range += ` || ^8.0.0-0`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (semver.satisfies(coreVersion, range)) return;</span><span class="s3">\n\n  </span><span class="s1">const limit = Error.stackTraceLimit;</span><span class="s3">\n\n  </span><span class="s1">if (typeof limit === </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; limit &lt; 25) {</span><span class="s3">\n    </span><span class="s1">// Bump up the limit if needed so that users are more likely</span><span class="s3">\n    </span><span class="s1">// to be able to see what is calling Babel.</span><span class="s3">\n    </span><span class="s1">Error.stackTraceLimit = 25;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const err = new Error(</span><span class="s3">\n    </span><span class="s1">`Requires Babel </span><span class="s3">\&quot;</span><span class="s1">${range}</span><span class="s3">\&quot;</span><span class="s1">, but was loaded with </span><span class="s3">\&quot;</span><span class="s1">${coreVersion}</span><span class="s3">\&quot;</span><span class="s1">. ` +</span><span class="s3">\n      </span><span class="s1">`If you are sure you have a compatible version of @babel/core, ` +</span><span class="s3">\n      </span><span class="s1">`it is likely that something in your build process is loading the ` +</span><span class="s3">\n      </span><span class="s1">`wrong version. Inspect the stack trace of this error to look for ` +</span><span class="s3">\n      </span><span class="s1">`the first entry that doesn't mention </span><span class="s3">\&quot;</span><span class="s1">@babel/core</span><span class="s3">\&quot; </span><span class="s1">or </span><span class="s3">\&quot;</span><span class="s1">babel-core</span><span class="s3">\&quot; </span><span class="s1">` +</span><span class="s3">\n      </span><span class="s1">`to see what is calling Babel.`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">if (typeof limit === </span><span class="s3">\&quot;</span><span class="s1">number</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">Error.stackTraceLimit = limit;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">throw Object.assign(err, {</span><span class="s3">\n    </span><span class="s1">code: </span><span class="s3">\&quot;</span><span class="s1">BABEL_VERSION_UNSUPPORTED</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">version: coreVersion,</span><span class="s3">\n    </span><span class="s1">range,</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>