<html>
<head>
<title>config-descriptors.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
config-descriptors.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;_gensync&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;_functional&quot;</span><span class="s0">,</span><span class="s1">&quot;_index&quot;</span><span class="s0">,</span><span class="s1">&quot;_item&quot;</span><span class="s0">,</span><span class="s1">&quot;_caching&quot;</span><span class="s0">,</span><span class="s1">&quot;_resolveTargets&quot;</span><span class="s0">,</span><span class="s1">&quot;isEqualDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;a&quot;</span><span class="s0">,</span><span class="s1">&quot;b&quot;</span><span class="s0">,</span><span class="s1">&quot;_a$file&quot;</span><span class="s0">,</span><span class="s1">&quot;_b$file&quot;</span><span class="s0">,</span><span class="s1">&quot;_a$file2&quot;</span><span class="s0">,</span><span class="s1">&quot;_b$file2&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;alias&quot;</span><span class="s0">,</span><span class="s1">&quot;ownPass&quot;</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">,</span><span class="s1">&quot;request&quot;</span><span class="s0">,</span><span class="s1">&quot;resolved&quot;</span><span class="s0">,</span><span class="s1">&quot;handlerOf&quot;</span><span class="s0">,</span><span class="s1">&quot;optionsWithResolvedBrowserslistConfigFile&quot;</span><span class="s0">,</span><span class="s1">&quot;browserslistConfigFile&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveBrowserslistConfigFile&quot;</span><span class="s0">,</span><span class="s1">&quot;createCachedDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;plugins&quot;</span><span class="s0">,</span><span class="s1">&quot;presets&quot;</span><span class="s0">,</span><span class="s1">&quot;passPerPreset&quot;</span><span class="s0">,</span><span class="s1">&quot;createCachedPluginDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;createCachedPresetDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;createUncachedDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;once&quot;</span><span class="s0">,</span><span class="s1">&quot;createPluginDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;createPresetDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;PRESET_DESCRIPTOR_CACHE&quot;</span><span class="s0">,</span><span class="s1">&quot;WeakMap&quot;</span><span class="s0">,</span><span class="s1">&quot;makeWeakCacheSync&quot;</span><span class="s0">,</span><span class="s1">&quot;items&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;using&quot;</span><span class="s0">,</span><span class="s1">&quot;dir&quot;</span><span class="s0">,</span><span class="s1">&quot;makeStrongCacheSync&quot;</span><span class="s0">,</span><span class="s1">&quot;makeStrongCache&quot;</span><span class="s0">,</span><span class="s1">&quot;descriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;desc&quot;</span><span class="s0">,</span><span class="s1">&quot;loadCachedDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;PLUGIN_DESCRIPTOR_CACHE&quot;</span><span class="s0">,</span><span class="s1">&quot;DEFAULT_OPTIONS&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheByOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;possibilities&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;matches&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;possibility&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;createDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;gensync&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;createDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;assertNoDuplicates&quot;</span><span class="s0">,</span><span class="s1">&quot;pair&quot;</span><span class="s0">,</span><span class="s1">&quot;getItemDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;Array&quot;</span><span class="s0">,</span><span class="s1">&quot;isArray&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;filepath&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;resolver&quot;</span><span class="s0">,</span><span class="s1">&quot;loadPlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;loadPreset&quot;</span><span class="s0">,</span><span class="s1">&quot;String&quot;</span><span class="s0">,</span><span class="s1">&quot;__esModule&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;nameMap&quot;</span><span class="s0">,</span><span class="s1">&quot;Set&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;conflicts&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/config/config-descriptors.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import gensync, { type Handler } from </span><span class="s3">\&quot;</span><span class="s1">gensync</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { once } from </span><span class="s3">\&quot;</span><span class="s1">../gensync-utils/functional.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import { loadPlugin, loadPreset } from </span><span class="s3">\&quot;</span><span class="s1">./files/index.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import { getItemDescriptor } from </span><span class="s3">\&quot;</span><span class="s1">./item.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">makeWeakCacheSync,</span><span class="s3">\n  </span><span class="s1">makeStrongCacheSync,</span><span class="s3">\n  </span><span class="s1">makeStrongCache,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./caching.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { CacheConfigurator } from </span><span class="s3">\&quot;</span><span class="s1">./caching.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">ValidatedOptions,</span><span class="s3">\n  </span><span class="s1">PluginList,</span><span class="s3">\n  </span><span class="s1">PluginItem,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./validation/options.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import { resolveBrowserslistConfigFile } from </span><span class="s3">\&quot;</span><span class="s1">./resolve-targets.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { PluginAPI, PresetAPI } from </span><span class="s3">\&quot;</span><span class="s1">./helpers/config-api.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">// Represents a config object and functions to lazily load the descriptors</span><span class="s3">\n</span><span class="s1">// for the plugins and presets so we don't load the plugins/presets unless</span><span class="s3">\n</span><span class="s1">// the options object actually ends up being applicable.</span><span class="s3">\n</span><span class="s1">export type OptionsAndDescriptors = {</span><span class="s3">\n  </span><span class="s1">options: ValidatedOptions;</span><span class="s3">\n  </span><span class="s1">plugins: () =&gt; Handler&lt;Array&lt;UnloadedDescriptor&lt;PluginAPI&gt;&gt;&gt;;</span><span class="s3">\n  </span><span class="s1">presets: () =&gt; Handler&lt;Array&lt;UnloadedDescriptor&lt;PresetAPI&gt;&gt;&gt;;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// Represents a plugin or presets at a given location in a config object.</span><span class="s3">\n</span><span class="s1">// At this point these have been resolved to a specific object or function,</span><span class="s3">\n</span><span class="s1">// but have not yet been executed to call functions with options.</span><span class="s3">\n</span><span class="s1">export interface UnloadedDescriptor&lt;API, Options = {} | undefined | false&gt; {</span><span class="s3">\n  </span><span class="s1">name: string | undefined;</span><span class="s3">\n  </span><span class="s1">value: object | ((api: API, options: Options, dirname: string) =&gt; unknown);</span><span class="s3">\n  </span><span class="s1">options: Options;</span><span class="s3">\n  </span><span class="s1">dirname: string;</span><span class="s3">\n  </span><span class="s1">alias: string;</span><span class="s3">\n  </span><span class="s1">ownPass?: boolean;</span><span class="s3">\n  </span><span class="s1">file?: {</span><span class="s3">\n    </span><span class="s1">request: string;</span><span class="s3">\n    </span><span class="s1">resolved: string;</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function isEqualDescriptor&lt;API&gt;(</span><span class="s3">\n  </span><span class="s1">a: UnloadedDescriptor&lt;API&gt;,</span><span class="s3">\n  </span><span class="s1">b: UnloadedDescriptor&lt;API&gt;,</span><span class="s3">\n</span><span class="s1">): boolean {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">a.name === b.name &amp;&amp;</span><span class="s3">\n    </span><span class="s1">a.value === b.value &amp;&amp;</span><span class="s3">\n    </span><span class="s1">a.options === b.options &amp;&amp;</span><span class="s3">\n    </span><span class="s1">a.dirname === b.dirname &amp;&amp;</span><span class="s3">\n    </span><span class="s1">a.alias === b.alias &amp;&amp;</span><span class="s3">\n    </span><span class="s1">a.ownPass === b.ownPass &amp;&amp;</span><span class="s3">\n    </span><span class="s1">a.file?.request === b.file?.request &amp;&amp;</span><span class="s3">\n    </span><span class="s1">a.file?.resolved === b.file?.resolved</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export type ValidatedFile = {</span><span class="s3">\n  </span><span class="s1">filepath: string;</span><span class="s3">\n  </span><span class="s1">dirname: string;</span><span class="s3">\n  </span><span class="s1">options: ValidatedOptions;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">// eslint-disable-next-line require-yield</span><span class="s3">\n</span><span class="s1">function* handlerOf&lt;T&gt;(value: T): Handler&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">return value;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function optionsWithResolvedBrowserslistConfigFile(</span><span class="s3">\n  </span><span class="s1">options: ValidatedOptions,</span><span class="s3">\n  </span><span class="s1">dirname: string,</span><span class="s3">\n</span><span class="s1">): ValidatedOptions {</span><span class="s3">\n  </span><span class="s1">if (typeof options.browserslistConfigFile === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">options.browserslistConfigFile = resolveBrowserslistConfigFile(</span><span class="s3">\n      </span><span class="s1">options.browserslistConfigFile,</span><span class="s3">\n      </span><span class="s1">dirname,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return options;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Create a set of descriptors from a given options object, preserving</span><span class="s3">\n </span><span class="s1">* descriptor identity based on the identity of the plugin/preset arrays</span><span class="s3">\n </span><span class="s1">* themselves, and potentially on the identity of the plugins/presets + options.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createCachedDescriptors(</span><span class="s3">\n  </span><span class="s1">dirname: string,</span><span class="s3">\n  </span><span class="s1">options: ValidatedOptions,</span><span class="s3">\n  </span><span class="s1">alias: string,</span><span class="s3">\n</span><span class="s1">): OptionsAndDescriptors {</span><span class="s3">\n  </span><span class="s1">const { plugins, presets, passPerPreset } = options;</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">options: optionsWithResolvedBrowserslistConfigFile(options, dirname),</span><span class="s3">\n    </span><span class="s1">plugins: plugins</span><span class="s3">\n      </span><span class="s1">? () =&gt;</span><span class="s3">\n          </span><span class="s1">// @ts-expect-error todo(flow-&gt;ts) ts complains about incorrect arguments</span><span class="s3">\n          </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-use-before-define</span><span class="s3">\n          </span><span class="s1">createCachedPluginDescriptors(plugins, dirname)(alias)</span><span class="s3">\n      </span><span class="s1">: () =&gt; handlerOf([]),</span><span class="s3">\n    </span><span class="s1">presets: presets</span><span class="s3">\n      </span><span class="s1">? () =&gt;</span><span class="s3">\n          </span><span class="s1">// @ts-expect-error todo(flow-&gt;ts) ts complains about incorrect arguments</span><span class="s3">\n          </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-use-before-define</span><span class="s3">\n          </span><span class="s1">createCachedPresetDescriptors(presets, dirname)(alias)(</span><span class="s3">\n            </span><span class="s1">!!passPerPreset,</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">: () =&gt; handlerOf([]),</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Create a set of descriptors from a given options object, with consistent</span><span class="s3">\n </span><span class="s1">* identity for the descriptors, but not caching based on any specific identity.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createUncachedDescriptors(</span><span class="s3">\n  </span><span class="s1">dirname: string,</span><span class="s3">\n  </span><span class="s1">options: ValidatedOptions,</span><span class="s3">\n  </span><span class="s1">alias: string,</span><span class="s3">\n</span><span class="s1">): OptionsAndDescriptors {</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">options: optionsWithResolvedBrowserslistConfigFile(options, dirname),</span><span class="s3">\n    </span><span class="s1">// The returned result here is cached to represent a config object in</span><span class="s3">\n    </span><span class="s1">// memory, so we build and memoize the descriptors to ensure the same</span><span class="s3">\n    </span><span class="s1">// values are returned consistently.</span><span class="s3">\n    </span><span class="s1">plugins: once(() =&gt;</span><span class="s3">\n      </span><span class="s1">createPluginDescriptors(options.plugins || [], dirname, alias),</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">presets: once(() =&gt;</span><span class="s3">\n      </span><span class="s1">createPresetDescriptors(</span><span class="s3">\n        </span><span class="s1">options.presets || [],</span><span class="s3">\n        </span><span class="s1">dirname,</span><span class="s3">\n        </span><span class="s1">alias,</span><span class="s3">\n        </span><span class="s1">!!options.passPerPreset,</span><span class="s3">\n      </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const PRESET_DESCRIPTOR_CACHE = new WeakMap();</span><span class="s3">\n</span><span class="s1">const createCachedPresetDescriptors = makeWeakCacheSync(</span><span class="s3">\n  </span><span class="s1">(items: PluginList, cache: CacheConfigurator&lt;string&gt;) =&gt; {</span><span class="s3">\n    </span><span class="s1">const dirname = cache.using(dir =&gt; dir);</span><span class="s3">\n    </span><span class="s1">return makeStrongCacheSync((alias: string) =&gt;</span><span class="s3">\n      </span><span class="s1">makeStrongCache(function* (</span><span class="s3">\n        </span><span class="s1">passPerPreset: boolean,</span><span class="s3">\n      </span><span class="s1">): Handler&lt;Array&lt;UnloadedDescriptor&lt;PresetAPI&gt;&gt;&gt; {</span><span class="s3">\n        </span><span class="s1">const descriptors = yield* createPresetDescriptors(</span><span class="s3">\n          </span><span class="s1">items,</span><span class="s3">\n          </span><span class="s1">dirname,</span><span class="s3">\n          </span><span class="s1">alias,</span><span class="s3">\n          </span><span class="s1">passPerPreset,</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">return descriptors.map(</span><span class="s3">\n          </span><span class="s1">// Items are cached using the overall preset array identity when</span><span class="s3">\n          </span><span class="s1">// possibly, but individual descriptors are also cached if a match</span><span class="s3">\n          </span><span class="s1">// can be found in the previously-used descriptor lists.</span><span class="s3">\n          </span><span class="s1">desc =&gt; loadCachedDescriptor(PRESET_DESCRIPTOR_CACHE, desc),</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">const PLUGIN_DESCRIPTOR_CACHE = new WeakMap();</span><span class="s3">\n</span><span class="s1">const createCachedPluginDescriptors = makeWeakCacheSync(</span><span class="s3">\n  </span><span class="s1">(items: PluginList, cache: CacheConfigurator&lt;string&gt;) =&gt; {</span><span class="s3">\n    </span><span class="s1">const dirname = cache.using(dir =&gt; dir);</span><span class="s3">\n    </span><span class="s1">return makeStrongCache(function* (</span><span class="s3">\n      </span><span class="s1">alias: string,</span><span class="s3">\n    </span><span class="s1">): Handler&lt;Array&lt;UnloadedDescriptor&lt;PluginAPI&gt;&gt;&gt; {</span><span class="s3">\n      </span><span class="s1">const descriptors = yield* createPluginDescriptors(items, dirname, alias);</span><span class="s3">\n      </span><span class="s1">return descriptors.map(</span><span class="s3">\n        </span><span class="s1">// Items are cached using the overall plugin array identity when</span><span class="s3">\n        </span><span class="s1">// possibly, but individual descriptors are also cached if a match</span><span class="s3">\n        </span><span class="s1">// can be found in the previously-used descriptor lists.</span><span class="s3">\n        </span><span class="s1">desc =&gt; loadCachedDescriptor(PLUGIN_DESCRIPTOR_CACHE, desc),</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* When no options object is given in a descriptor, this object is used</span><span class="s3">\n </span><span class="s1">* as a WeakMap key in order to have consistent identity.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const DEFAULT_OPTIONS = {};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Given the cache and a descriptor, returns a matching descriptor from the</span><span class="s3">\n </span><span class="s1">* cache, or else returns the input descriptor and adds it to the cache for</span><span class="s3">\n </span><span class="s1">* next time.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function loadCachedDescriptor&lt;API&gt;(</span><span class="s3">\n  </span><span class="s1">cache: WeakMap&lt;{} | Function, WeakMap&lt;{}, Array&lt;UnloadedDescriptor&lt;API&gt;&gt;&gt;&gt;,</span><span class="s3">\n  </span><span class="s1">desc: UnloadedDescriptor&lt;API&gt;,</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const { value, options = DEFAULT_OPTIONS } = desc;</span><span class="s3">\n  </span><span class="s1">if (options === false) return desc;</span><span class="s3">\n\n  </span><span class="s1">let cacheByOptions = cache.get(value);</span><span class="s3">\n  </span><span class="s1">if (!cacheByOptions) {</span><span class="s3">\n    </span><span class="s1">cacheByOptions = new WeakMap();</span><span class="s3">\n    </span><span class="s1">cache.set(value, cacheByOptions);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let possibilities = cacheByOptions.get(options);</span><span class="s3">\n  </span><span class="s1">if (!possibilities) {</span><span class="s3">\n    </span><span class="s1">possibilities = [];</span><span class="s3">\n    </span><span class="s1">cacheByOptions.set(options, possibilities);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (possibilities.indexOf(desc) === -1) {</span><span class="s3">\n    </span><span class="s1">const matches = possibilities.filter(possibility =&gt;</span><span class="s3">\n      </span><span class="s1">isEqualDescriptor(possibility, desc),</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">if (matches.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">return matches[0];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">possibilities.push(desc);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return desc;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function* createPresetDescriptors(</span><span class="s3">\n  </span><span class="s1">items: PluginList,</span><span class="s3">\n  </span><span class="s1">dirname: string,</span><span class="s3">\n  </span><span class="s1">alias: string,</span><span class="s3">\n  </span><span class="s1">passPerPreset: boolean,</span><span class="s3">\n</span><span class="s1">): Handler&lt;Array&lt;UnloadedDescriptor&lt;PresetAPI&gt;&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">return yield* createDescriptors(</span><span class="s3">\n    \&quot;</span><span class="s1">preset</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">items,</span><span class="s3">\n    </span><span class="s1">dirname,</span><span class="s3">\n    </span><span class="s1">alias,</span><span class="s3">\n    </span><span class="s1">passPerPreset,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function* createPluginDescriptors(</span><span class="s3">\n  </span><span class="s1">items: PluginList,</span><span class="s3">\n  </span><span class="s1">dirname: string,</span><span class="s3">\n  </span><span class="s1">alias: string,</span><span class="s3">\n</span><span class="s1">): Handler&lt;Array&lt;UnloadedDescriptor&lt;PluginAPI&gt;&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">return yield* createDescriptors(</span><span class="s3">\&quot;</span><span class="s1">plugin</span><span class="s3">\&quot;</span><span class="s1">, items, dirname, alias);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function* createDescriptors&lt;API&gt;(</span><span class="s3">\n  </span><span class="s1">type: </span><span class="s3">\&quot;</span><span class="s1">plugin</span><span class="s3">\&quot; </span><span class="s1">| </span><span class="s3">\&quot;</span><span class="s1">preset</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">items: PluginList,</span><span class="s3">\n  </span><span class="s1">dirname: string,</span><span class="s3">\n  </span><span class="s1">alias: string,</span><span class="s3">\n  </span><span class="s1">ownPass?: boolean,</span><span class="s3">\n</span><span class="s1">): Handler&lt;Array&lt;UnloadedDescriptor&lt;API&gt;&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">const descriptors = yield* gensync.all(</span><span class="s3">\n    </span><span class="s1">items.map((item, index) =&gt;</span><span class="s3">\n      </span><span class="s1">createDescriptor(item, dirname, {</span><span class="s3">\n        </span><span class="s1">type,</span><span class="s3">\n        </span><span class="s1">alias: `${alias}$${index}`,</span><span class="s3">\n        </span><span class="s1">ownPass: !!ownPass,</span><span class="s3">\n      </span><span class="s1">}),</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">assertNoDuplicates(descriptors);</span><span class="s3">\n\n  </span><span class="s1">return descriptors;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Given a plugin/preset item, resolve it into a standard format.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function* createDescriptor&lt;API&gt;(</span><span class="s3">\n  </span><span class="s1">pair: PluginItem,</span><span class="s3">\n  </span><span class="s1">dirname: string,</span><span class="s3">\n  </span><span class="s1">{</span><span class="s3">\n    </span><span class="s1">type,</span><span class="s3">\n    </span><span class="s1">alias,</span><span class="s3">\n    </span><span class="s1">ownPass,</span><span class="s3">\n  </span><span class="s1">}: {</span><span class="s3">\n    </span><span class="s1">type?: </span><span class="s3">\&quot;</span><span class="s1">plugin</span><span class="s3">\&quot; </span><span class="s1">| </span><span class="s3">\&quot;</span><span class="s1">preset</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">alias: string;</span><span class="s3">\n    </span><span class="s1">ownPass?: boolean;</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">): Handler&lt;UnloadedDescriptor&lt;API&gt;&gt; {</span><span class="s3">\n  </span><span class="s1">const desc = getItemDescriptor(pair);</span><span class="s3">\n  </span><span class="s1">if (desc) {</span><span class="s3">\n    </span><span class="s1">return desc;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let name;</span><span class="s3">\n  </span><span class="s1">let options;</span><span class="s3">\n  </span><span class="s1">// todo(flow-&gt;ts) better type annotation</span><span class="s3">\n  </span><span class="s1">let value: any = pair;</span><span class="s3">\n  </span><span class="s1">if (Array.isArray(value)) {</span><span class="s3">\n    </span><span class="s1">if (value.length === 3) {</span><span class="s3">\n      </span><span class="s1">[value, options, name] = value;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">[value, options] = value;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">let file = undefined;</span><span class="s3">\n  </span><span class="s1">let filepath = null;</span><span class="s3">\n  </span><span class="s1">if (typeof value === </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">if (typeof type !== </span><span class="s3">\&quot;</span><span class="s1">string</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        \&quot;</span><span class="s1">To resolve a string-based item, the type of item must be given</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const resolver = type === </span><span class="s3">\&quot;</span><span class="s1">plugin</span><span class="s3">\&quot; </span><span class="s1">? loadPlugin : loadPreset;</span><span class="s3">\n    </span><span class="s1">const request = value;</span><span class="s3">\n\n    </span><span class="s1">({ filepath, value } = yield* resolver(value, dirname));</span><span class="s3">\n\n    </span><span class="s1">file = {</span><span class="s3">\n      </span><span class="s1">request,</span><span class="s3">\n      </span><span class="s1">resolved: filepath,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (!value) {</span><span class="s3">\n    </span><span class="s1">throw new Error(`Unexpected falsy value: ${String(value)}`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (typeof value === </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; value.__esModule) {</span><span class="s3">\n    </span><span class="s1">if (value.default) {</span><span class="s3">\n      </span><span class="s1">value = value.default;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Must export a default export when using ES6 modules.</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (typeof value !== </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; typeof value !== </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`Unsupported format: ${typeof value}. Expected an object or a function.`,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (filepath !== null &amp;&amp; typeof value === </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; value) {</span><span class="s3">\n    </span><span class="s1">// We allow object values for plugins/presets nested directly within a</span><span class="s3">\n    </span><span class="s1">// config object, because it can be useful to define them in nested</span><span class="s3">\n    </span><span class="s1">// configuration contexts.</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\n      </span><span class="s1">`Plugin/Preset files are not allowed to export objects, only functions. In ${filepath}`,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">name,</span><span class="s3">\n    </span><span class="s1">alias: filepath || alias,</span><span class="s3">\n    </span><span class="s1">value,</span><span class="s3">\n    </span><span class="s1">options,</span><span class="s3">\n    </span><span class="s1">dirname,</span><span class="s3">\n    </span><span class="s1">ownPass,</span><span class="s3">\n    </span><span class="s1">file,</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function assertNoDuplicates&lt;API&gt;(items: Array&lt;UnloadedDescriptor&lt;API&gt;&gt;): void {</span><span class="s3">\n  </span><span class="s1">const map = new Map();</span><span class="s3">\n\n  </span><span class="s1">for (const item of items) {</span><span class="s3">\n    </span><span class="s1">if (typeof item.value !== </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) continue;</span><span class="s3">\n\n    </span><span class="s1">let nameMap = map.get(item.value);</span><span class="s3">\n    </span><span class="s1">if (!nameMap) {</span><span class="s3">\n      </span><span class="s1">nameMap = new Set();</span><span class="s3">\n      </span><span class="s1">map.set(item.value, nameMap);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (nameMap.has(item.name)) {</span><span class="s3">\n      </span><span class="s1">const conflicts = items.filter(i =&gt; i.value === item.value);</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">[</span><span class="s3">\n          </span><span class="s1">`Duplicate plugin/preset detected.`,</span><span class="s3">\n          </span><span class="s1">`If you'd like to use two separate instances of a plugin,`,</span><span class="s3">\n          </span><span class="s1">`they need separate names, e.g.`,</span><span class="s3">\n          </span><span class="s1">``,</span><span class="s3">\n          </span><span class="s1">`  plugins: [`,</span><span class="s3">\n          </span><span class="s1">`    ['some-plugin', {}],`,</span><span class="s3">\n          </span><span class="s1">`    ['some-plugin', {}, 'some unique name'],`,</span><span class="s3">\n          </span><span class="s1">`  ]`,</span><span class="s3">\n          </span><span class="s1">``,</span><span class="s3">\n          </span><span class="s1">`Duplicates detected are:`,</span><span class="s3">\n          </span><span class="s1">`${JSON.stringify(conflicts, null, 2)}`,</span><span class="s3">\n        </span><span class="s1">].join(</span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">nameMap.add(item.name);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>