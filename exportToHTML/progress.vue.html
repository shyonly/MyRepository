<html>
<head>
<title>progress.vue</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #d5b778;}
.s1 { color: #bcbec4;}
.s2 { color: #bababa;}
.s3 { color: #6aab73;}
.s4 { color: #2aacb8;}
.s5 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
progress.vue</font>
</center></td></tr></table>
<pre><span class="s0">&lt;template&gt;</span>
  <span class="s0">&lt;div</span>
    <span class="s2">class</span><span class="s3">=&quot;el-progress&quot;</span>
    <span class="s2">:class</span><span class="s3">=&quot;</span><span class="s1">[</span>
      <span class="s3">'el-progress--' </span><span class="s1">+ type,</span>
      <span class="s1">status ? </span><span class="s3">'is-' </span><span class="s1">+ status : </span><span class="s3">''</span><span class="s1">,</span>
      <span class="s1">{</span>
        <span class="s3">'el-progress--without-text'</span><span class="s1">: !showText,</span>
        <span class="s3">'el-progress--text-inside'</span><span class="s1">: textInside,</span>
      <span class="s1">}</span>
    <span class="s1">]</span><span class="s3">&quot;</span>
    <span class="s2">role</span><span class="s3">=&quot;progressbar&quot;</span>
    <span class="s2">:aria-valuenow</span><span class="s3">=&quot;</span><span class="s1">percentage</span><span class="s3">&quot;</span>
    <span class="s2">aria-valuemin</span><span class="s3">=&quot;0&quot;</span>
    <span class="s2">aria-valuemax</span><span class="s3">=&quot;100&quot;</span>
  <span class="s0">&gt;</span>
    <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;el-progress-bar&quot; </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">type === </span><span class="s3">'line'&quot;</span><span class="s0">&gt;</span>
      <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;el-progress-bar__outer&quot; </span><span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">{height: strokeWidth + </span><span class="s3">'px'</span><span class="s1">, backgroundColor:defineBackColor}</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;el-progress-bar__inner&quot; </span><span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">barStyle</span><span class="s3">&quot;</span><span class="s0">&gt;</span>
          <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;el-progress-bar__innerText&quot; </span><span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">{color:textColor}</span><span class="s3">&quot; </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">showText &amp;&amp; textInside</span><span class="s3">&quot;</span><span class="s0">&gt;</span><span class="s1">{{content}}</span><span class="s0">&lt;/div&gt;</span>
        <span class="s0">&lt;/div&gt;</span>
      <span class="s0">&lt;/div&gt;</span>
    <span class="s0">&lt;/div&gt;</span>
    <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;el-progress-circle&quot; </span><span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">{height: width + </span><span class="s3">'px'</span><span class="s1">, width: width + </span><span class="s3">'px'</span><span class="s1">}</span><span class="s3">&quot; </span><span class="s2">v-else</span><span class="s0">&gt;</span>
      <span class="s0">&lt;svg </span><span class="s2">viewBox</span><span class="s3">=&quot;0 0 100 100&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;path</span>
          <span class="s2">class</span><span class="s3">=&quot;el-progress-circle__track&quot;</span>
          <span class="s2">:d</span><span class="s3">=&quot;</span><span class="s1">trackPath</span><span class="s3">&quot;</span>
          <span class="s2">:stroke</span><span class="s3">=&quot;</span><span class="s1">defineBackColor</span><span class="s3">&quot;</span>
          <span class="s2">:stroke-width</span><span class="s3">=&quot;</span><span class="s1">relativeStrokeWidth</span><span class="s3">&quot;</span>
          <span class="s2">fill</span><span class="s3">=&quot;none&quot;</span>
          <span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">trailPathStyle</span><span class="s3">&quot;</span><span class="s0">&gt;&lt;/path&gt;</span>
        <span class="s0">&lt;path</span>
          <span class="s2">class</span><span class="s3">=&quot;el-progress-circle__path&quot;</span>
          <span class="s2">:d</span><span class="s3">=&quot;</span><span class="s1">trackPath</span><span class="s3">&quot;</span>
          <span class="s2">:stroke</span><span class="s3">=&quot;</span><span class="s1">stroke</span><span class="s3">&quot;</span>
          <span class="s2">fill</span><span class="s3">=&quot;none&quot;</span>
          <span class="s2">:stroke-linecap</span><span class="s3">=&quot;</span><span class="s1">strokeLinecap</span><span class="s3">&quot;</span>
          <span class="s2">:stroke-width</span><span class="s3">=&quot;</span><span class="s1">percentage ? relativeStrokeWidth : </span><span class="s4">0</span><span class="s3">&quot;</span>
          <span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">circlePathStyle</span><span class="s3">&quot;</span><span class="s0">&gt;&lt;/path&gt;</span>
      <span class="s0">&lt;/svg&gt;</span>
    <span class="s0">&lt;/div&gt;</span>
    <span class="s0">&lt;div</span>
      <span class="s2">class</span><span class="s3">=&quot;el-progress__text&quot;</span>
      <span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">showText &amp;&amp; !textInside</span><span class="s3">&quot;</span>
      <span class="s2">:style</span><span class="s3">=&quot;</span><span class="s1">{fontSize: progressTextSize + </span><span class="s3">'px'</span><span class="s1">, color:textColor}</span><span class="s3">&quot;</span>
    <span class="s0">&gt;</span>
      <span class="s0">&lt;template </span><span class="s2">v-if</span><span class="s3">=&quot;</span><span class="s1">!status</span><span class="s3">&quot;</span><span class="s0">&gt;</span><span class="s1">{{content}}</span><span class="s0">&lt;/template&gt;</span>
      <span class="s0">&lt;i </span><span class="s2">v-else :class</span><span class="s3">=&quot;</span><span class="s1">iconClass</span><span class="s3">&quot;</span><span class="s0">&gt;&lt;/i&gt;</span>
    <span class="s0">&lt;/div&gt;</span>
  <span class="s0">&lt;/div&gt;</span>
<span class="s0">&lt;/template&gt;</span>
<span class="s0">&lt;script&gt;</span>
  <span class="s5">export default </span><span class="s1">{</span>
    <span class="s1">name: </span><span class="s3">'ElProgress'</span><span class="s1">,</span>
    <span class="s1">props: {</span>
      <span class="s1">type: {</span>
        <span class="s1">type: String,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">'line'</span><span class="s1">,</span>
        <span class="s1">validator: val =&gt; [</span><span class="s3">'line'</span><span class="s1">, </span><span class="s3">'circle'</span><span class="s1">, </span><span class="s3">'dashboard'</span><span class="s1">].indexOf(val) &gt; -</span><span class="s4">1</span>
      <span class="s1">},</span>
      <span class="s1">percentage: {</span>
        <span class="s1">type: Number,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s4">0</span><span class="s1">,</span>
        <span class="s1">required: </span><span class="s5">true</span><span class="s1">,</span>
        <span class="s1">validator: val =&gt; val &gt;= </span><span class="s4">0 </span><span class="s1">&amp;&amp; val &lt;= </span><span class="s4">100</span>
      <span class="s1">},</span>
      <span class="s1">status: {</span>
        <span class="s1">type: String,</span>
        <span class="s1">validator: val =&gt; [</span><span class="s3">'success'</span><span class="s1">, </span><span class="s3">'exception'</span><span class="s1">, </span><span class="s3">'warning'</span><span class="s1">].indexOf(val) &gt; -</span><span class="s4">1</span>
      <span class="s1">},</span>
      <span class="s1">strokeWidth: {</span>
        <span class="s1">type: Number,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s4">6</span>
      <span class="s1">},</span>
      <span class="s1">strokeLinecap: {</span>
        <span class="s1">type: String,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">'round'</span>
      <span class="s1">},</span>
      <span class="s1">textInside: {</span>
        <span class="s1">type: Boolean,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s5">false</span>
      <span class="s1">},</span>
      <span class="s1">width: {</span>
        <span class="s1">type: Number,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s4">126</span>
      <span class="s1">},</span>
      <span class="s1">showText: {</span>
        <span class="s1">type: Boolean,</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s5">true</span>
      <span class="s1">},</span>
      <span class="s1">color: {</span>
        <span class="s1">type: [String, Array, Function],</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">''</span>
      <span class="s1">},</span>
      <span class="s1">defineBackColor: {</span>
        <span class="s1">type: [String, Array, Function],</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">'#ebeef5'</span>
      <span class="s1">},</span>
      <span class="s1">textColor: {</span>
        <span class="s1">type: [String, Array, Function],</span>
        <span class="s5">default</span><span class="s1">: </span><span class="s3">'#606266'</span>
      <span class="s1">},</span>
      <span class="s1">format: Function</span>
    <span class="s1">},</span>
    <span class="s1">computed: {</span>
      <span class="s1">barStyle() {</span>
        <span class="s5">const </span><span class="s1">style = {};</span>
        <span class="s1">style.width = </span><span class="s5">this</span><span class="s1">.percentage + </span><span class="s3">'%'</span><span class="s1">;</span>
        <span class="s1">style.backgroundColor = </span><span class="s5">this</span><span class="s1">.getCurrentColor(</span><span class="s5">this</span><span class="s1">.percentage);</span>
        <span class="s5">return </span><span class="s1">style;</span>
      <span class="s1">},</span>
      <span class="s1">relativeStrokeWidth() {</span>
        <span class="s5">return </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.strokeWidth / </span><span class="s5">this</span><span class="s1">.width * </span><span class="s4">100</span><span class="s1">).toFixed(</span><span class="s4">1</span><span class="s1">);</span>
      <span class="s1">},</span>
      <span class="s1">radius() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.type === </span><span class="s3">'circle' </span><span class="s1">|| </span><span class="s5">this</span><span class="s1">.type === </span><span class="s3">'dashboard'</span><span class="s1">) {</span>
          <span class="s5">return </span><span class="s1">parseInt(</span><span class="s4">50 </span><span class="s1">- parseFloat(</span><span class="s5">this</span><span class="s1">.relativeStrokeWidth) / </span><span class="s4">2</span><span class="s1">, </span><span class="s4">10</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">return </span><span class="s4">0</span><span class="s1">;</span>
        <span class="s1">}</span>
      <span class="s1">},</span>
      <span class="s1">trackPath() {</span>
        <span class="s5">const </span><span class="s1">radius = </span><span class="s5">this</span><span class="s1">.radius;</span>
        <span class="s5">const </span><span class="s1">isDashboard = </span><span class="s5">this</span><span class="s1">.type === </span><span class="s3">'dashboard'</span><span class="s1">;</span>
        <span class="s5">return </span><span class="s3">`</span>
          <span class="s3">M 50 50 
          m 0 </span><span class="s1">${isDashboard ? </span><span class="s3">'' </span><span class="s1">: </span><span class="s3">'-'</span><span class="s1">}${radius}</span>
          <span class="s3">a </span><span class="s1">${radius} ${radius} </span><span class="s3">0 1 1 0 </span><span class="s1">${isDashboard ? </span><span class="s3">'-' </span><span class="s1">: </span><span class="s3">''</span><span class="s1">}${radius * </span><span class="s4">2</span><span class="s1">}</span>
          <span class="s3">a </span><span class="s1">${radius} ${radius} </span><span class="s3">0 1 1 0 </span><span class="s1">${isDashboard ? </span><span class="s3">'' </span><span class="s1">: </span><span class="s3">'-'</span><span class="s1">}${radius * </span><span class="s4">2</span><span class="s1">}</span>
          <span class="s3">`</span><span class="s1">;</span>
      <span class="s1">},</span>
      <span class="s1">perimeter() {</span>
        <span class="s5">return </span><span class="s4">2 </span><span class="s1">* Math.PI * </span><span class="s5">this</span><span class="s1">.radius;</span>
      <span class="s1">},</span>
      <span class="s1">rate() {</span>
        <span class="s5">return this</span><span class="s1">.type === </span><span class="s3">'dashboard' </span><span class="s1">? </span><span class="s4">0.75 </span><span class="s1">: </span><span class="s4">1</span><span class="s1">;</span>
      <span class="s1">},</span>
      <span class="s1">strokeDashoffset() {</span>
        <span class="s5">const </span><span class="s1">offset = -</span><span class="s4">1 </span><span class="s1">* </span><span class="s5">this</span><span class="s1">.perimeter * (</span><span class="s4">1 </span><span class="s1">- </span><span class="s5">this</span><span class="s1">.rate) / </span><span class="s4">2</span><span class="s1">;</span>
        <span class="s5">return </span><span class="s3">`</span><span class="s1">${offset}</span><span class="s3">px`</span><span class="s1">;</span>
      <span class="s1">},</span>
      <span class="s1">trailPathStyle() {</span>
        <span class="s5">return </span><span class="s1">{</span>
          <span class="s1">strokeDasharray: </span><span class="s3">`</span><span class="s1">${(</span><span class="s5">this</span><span class="s1">.perimeter * </span><span class="s5">this</span><span class="s1">.rate)}</span><span class="s3">px, </span><span class="s1">${</span><span class="s5">this</span><span class="s1">.perimeter}</span><span class="s3">px`</span><span class="s1">,</span>
          <span class="s1">strokeDashoffset: </span><span class="s5">this</span><span class="s1">.strokeDashoffset</span>
        <span class="s1">};</span>
      <span class="s1">},</span>
      <span class="s1">circlePathStyle() {</span>
        <span class="s5">return </span><span class="s1">{</span>
          <span class="s1">strokeDasharray: </span><span class="s3">`</span><span class="s1">${</span><span class="s5">this</span><span class="s1">.perimeter * </span><span class="s5">this</span><span class="s1">.rate * (</span><span class="s5">this</span><span class="s1">.percentage / </span><span class="s4">100</span><span class="s1">) }</span><span class="s3">px, </span><span class="s1">${</span><span class="s5">this</span><span class="s1">.perimeter}</span><span class="s3">px`</span><span class="s1">,</span>
          <span class="s1">strokeDashoffset: </span><span class="s5">this</span><span class="s1">.strokeDashoffset,</span>
          <span class="s1">transition: </span><span class="s3">'stroke-dasharray 0.6s ease 0s, stroke 0.6s ease'</span>
        <span class="s1">};</span>
      <span class="s1">},</span>
      <span class="s1">stroke() {</span>
        <span class="s5">let </span><span class="s1">ret;</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.color) {</span>
          <span class="s1">ret = </span><span class="s5">this</span><span class="s1">.getCurrentColor(</span><span class="s5">this</span><span class="s1">.percentage);</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">switch </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.status) {</span>
            <span class="s5">case </span><span class="s3">'success'</span><span class="s1">:</span>
              <span class="s1">ret = </span><span class="s3">'#13ce66'</span><span class="s1">;</span>
              <span class="s5">break</span><span class="s1">;</span>
            <span class="s5">case </span><span class="s3">'exception'</span><span class="s1">:</span>
              <span class="s1">ret = </span><span class="s3">'#ff4949'</span><span class="s1">;</span>
              <span class="s5">break</span><span class="s1">;</span>
            <span class="s5">case </span><span class="s3">'warning'</span><span class="s1">:</span>
              <span class="s1">ret = </span><span class="s3">'#e6a23c'</span><span class="s1">;</span>
              <span class="s5">break</span><span class="s1">;</span>
            <span class="s5">default</span><span class="s1">:</span>
              <span class="s1">ret = </span><span class="s3">'#20a0ff'</span><span class="s1">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">return </span><span class="s1">ret;</span>
      <span class="s1">},</span>
      <span class="s1">iconClass() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.status === </span><span class="s3">'warning'</span><span class="s1">) {</span>
          <span class="s5">return </span><span class="s3">'el-icon-warning'</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">this</span><span class="s1">.type === </span><span class="s3">'line'</span><span class="s1">) {</span>
          <span class="s5">return this</span><span class="s1">.status === </span><span class="s3">'success' </span><span class="s1">? </span><span class="s3">'el-icon-circle-check' </span><span class="s1">: </span><span class="s3">'el-icon-circle-close'</span><span class="s1">;</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">return this</span><span class="s1">.status === </span><span class="s3">'success' </span><span class="s1">? </span><span class="s3">'el-icon-check' </span><span class="s1">: </span><span class="s3">'el-icon-close'</span><span class="s1">;</span>
        <span class="s1">}</span>
      <span class="s1">},</span>
      <span class="s1">progressTextSize() {</span>
        <span class="s5">return this</span><span class="s1">.type === </span><span class="s3">'line'</span>
          <span class="s1">? </span><span class="s4">12 </span><span class="s1">+ </span><span class="s5">this</span><span class="s1">.strokeWidth * </span><span class="s4">0.4</span>
          <span class="s1">: </span><span class="s5">this</span><span class="s1">.width * </span><span class="s4">0.111111 </span><span class="s1">+ </span><span class="s4">2 </span><span class="s1">;</span>
      <span class="s1">},</span>
      <span class="s1">content() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof this</span><span class="s1">.format === </span><span class="s3">'function'</span><span class="s1">) {</span>
          <span class="s5">return this</span><span class="s1">.format(</span><span class="s5">this</span><span class="s1">.percentage) || </span><span class="s3">''</span><span class="s1">;</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">return </span><span class="s3">`</span><span class="s1">${</span><span class="s5">this</span><span class="s1">.percentage}</span><span class="s3">%`</span><span class="s1">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">methods: {</span>
      <span class="s1">getCurrentColor(percentage) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof this</span><span class="s1">.color === </span><span class="s3">'function'</span><span class="s1">) {</span>
          <span class="s5">return this</span><span class="s1">.color(percentage);</span>
        <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s5">typeof this</span><span class="s1">.color === </span><span class="s3">'string'</span><span class="s1">) {</span>
          <span class="s5">return this</span><span class="s1">.color;</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
          <span class="s5">return this</span><span class="s1">.getLevelColor(percentage);</span>
        <span class="s1">}</span>
      <span class="s1">},</span>
      <span class="s1">getLevelColor(percentage) {</span>
        <span class="s5">const </span><span class="s1">colorArray = </span><span class="s5">this</span><span class="s1">.getColorArray().sort((a, b) =&gt; a.percentage - b.percentage);</span>

        <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">i = </span><span class="s4">0</span><span class="s1">; i &lt; colorArray.length; i++) {</span>
          <span class="s5">if </span><span class="s1">(colorArray[i].percentage &gt; percentage) {</span>
            <span class="s5">return </span><span class="s1">colorArray[i].color;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">return </span><span class="s1">colorArray[colorArray.length - </span><span class="s4">1</span><span class="s1">].color;</span>
      <span class="s1">},</span>
      <span class="s1">getColorArray() {</span>
        <span class="s5">const </span><span class="s1">color = </span><span class="s5">this</span><span class="s1">.color;</span>
        <span class="s5">const </span><span class="s1">span = </span><span class="s4">100 </span><span class="s1">/ color.length;</span>
        <span class="s5">return </span><span class="s1">color.map((seriesColor, index) =&gt; {</span>
          <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s1">seriesColor === </span><span class="s3">'string'</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s1">{</span>
              <span class="s1">color: seriesColor,</span>
              <span class="s1">percentage: (index + </span><span class="s4">1</span><span class="s1">) * span</span>
            <span class="s1">};</span>
          <span class="s1">}</span>
          <span class="s5">return </span><span class="s1">seriesColor;</span>
        <span class="s1">});</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">};</span>
<span class="s0">&lt;/script&gt;</span>
</pre>
</body>
</html>