<html>
<head>
<title>ajv.min.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #cf8e6d;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
.s6 { color: #42c3d4;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
ajv.min.js</font>
</center></td></tr></table>
<pre><span class="s0">/* ajv 6.12.6: Another JSON Schema Validator */</span>
<span class="s2">!</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">exports</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;undefined&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">module</span><span class="s2">?</span><span class="s1">module</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s1">e</span><span class="s2">():</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">define</span><span class="s2">&amp;&amp;</span><span class="s1">define</span><span class="s2">.</span><span class="s1">amd</span><span class="s2">?</span><span class="s1">define</span><span class="s2">([],</span><span class="s1">e</span><span class="s2">):(</span><span class="s4">&quot;undefined&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">window</span><span class="s2">?</span><span class="s1">window</span><span class="s2">:</span><span class="s4">&quot;undefined&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">global</span><span class="s2">?</span><span class="s1">global</span><span class="s2">:</span><span class="s4">&quot;undefined&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">self</span><span class="s2">?</span><span class="s1">self</span><span class="s2">:</span><span class="s3">this</span><span class="s2">).</span><span class="s1">Ajv</span><span class="s2">=</span><span class="s1">e</span><span class="s2">()}(</span><span class="s3">function</span><span class="s2">(){</span><span class="s3">return function </span><span class="s1">o</span><span class="s2">(</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">){</span><span class="s3">function </span><span class="s1">c</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">n</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]){</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">i</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">require</span><span class="s2">&amp;&amp;</span><span class="s1">require</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s1">t</span><span class="s2">)</span><span class="s3">return </span><span class="s1">t</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">u</span><span class="s2">)</span><span class="s3">return </span><span class="s1">u</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s3">new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Cannot find module '&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot;'&quot;</span><span class="s2">);</span><span class="s3">throw </span><span class="s1">a</span><span class="s2">.</span><span class="s1">code</span><span class="s2">=</span><span class="s4">&quot;MODULE_NOT_FOUND&quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">}</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">n</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]={</span><span class="s1">exports</span><span class="s2">:{}};</span><span class="s1">i</span><span class="s2">[</span><span class="s1">r</span><span class="s2">][</span><span class="s5">0</span><span class="s2">].</span><span class="s1">call</span><span class="s2">(</span><span class="s1">s</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">,</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">c</span><span class="s2">(</span><span class="s1">i</span><span class="s2">[</span><span class="s1">r</span><span class="s2">][</span><span class="s5">1</span><span class="s2">][</span><span class="s1">e</span><span class="s2">]||</span><span class="s1">e</span><span class="s2">)},</span><span class="s1">s</span><span class="s2">,</span><span class="s1">s</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">n</span><span class="s2">[</span><span class="s1">r</span><span class="s2">].</span><span class="s1">exports</span><span class="s2">}</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">require</span><span class="s2">&amp;&amp;</span><span class="s1">require</span><span class="s2">,</span><span class="s1">e</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">e</span><span class="s2">&lt;</span><span class="s1">l</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">e</span><span class="s2">++)</span><span class="s1">c</span><span class="s2">(</span><span class="s1">l</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]);</span><span class="s3">return </span><span class="s1">c</span><span class="s2">}({</span><span class="s5">1</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(){</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">={}};</span><span class="s1">a</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">put</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]=</span><span class="s1">r</span><span class="s2">},</span><span class="s1">a</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">get</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]},</span><span class="s1">a</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">del</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">delete this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]},</span><span class="s1">a</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">clear</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(){</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">={}}},{}],</span><span class="s5">2</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./error_classes&quot;</span><span class="s2">).</span><span class="s1">MissingRef</span><span class="s2">;</span><span class="s3">function </span><span class="s1">s</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">l</span><span class="s2">=</span><span class="s3">this</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;function&quot;</span><span class="s2">!=</span><span class="s3">typeof this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">loadSchema</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;options.loadSchema should be a function&quot;</span><span class="s2">);</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">n</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">);</span><span class="s3">var </span><span class="s1">e</span><span class="s2">=</span><span class="s1">c</span><span class="s2">(</span><span class="s1">r</span><span class="s2">).</span><span class="s1">then</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(){</span><span class="s3">var </span><span class="s1">e</span><span class="s2">=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">_addSchema</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">n</span><span class="s2">);</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">||</span><span class="s3">function </span><span class="s1">o</span><span class="s2">(</span><span class="s1">i</span><span class="s2">){</span><span class="s3">try</span><span class="s2">{</span><span class="s3">return </span><span class="s1">l</span><span class="s2">.</span><span class="s1">_compile</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">e </span><span class="s3">instanceof </span><span class="s1">a</span><span class="s2">)</span><span class="s3">return </span><span class="s1">r</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s3">throw </span><span class="s1">e</span><span class="s2">}</span><span class="s3">function </span><span class="s1">r</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">missingSchema</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">(</span><span class="s1">r</span><span class="s2">))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Schema &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; is loaded but &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">missingRef</span><span class="s2">+</span><span class="s4">&quot; cannot be resolved&quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">_loadingSchemas</span><span class="s2">[</span><span class="s1">r</span><span class="s2">];</span><span class="s3">return </span><span class="s1">t</span><span class="s2">||(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">_loadingSchemas</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">loadSchema</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)).</span><span class="s1">then</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s1">a</span><span class="s2">),</span><span class="s1">t</span><span class="s2">.</span><span class="s1">then</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">s</span><span class="s2">(</span><span class="s1">r</span><span class="s2">))</span><span class="s3">return </span><span class="s1">c</span><span class="s2">(</span><span class="s1">e</span><span class="s2">).</span><span class="s1">then</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(){</span><span class="s1">s</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)||</span><span class="s1">l</span><span class="s2">.</span><span class="s1">addSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">n</span><span class="s2">)})}).</span><span class="s1">then</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(){</span><span class="s3">return </span><span class="s1">o</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)});</span><span class="s3">function </span><span class="s1">a</span><span class="s2">(){</span><span class="s3">delete </span><span class="s1">l</span><span class="s2">.</span><span class="s1">_loadingSchemas</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]}</span><span class="s3">function </span><span class="s1">s</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">l</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]||</span><span class="s1">l</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]}}}(</span><span class="s1">e</span><span class="s2">)});</span><span class="s3">return </span><span class="s1">t</span><span class="s2">&amp;&amp;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">then</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">t</span><span class="s2">(</span><span class="s3">null</span><span class="s2">,</span><span class="s1">e</span><span class="s2">)},</span><span class="s1">t</span><span class="s2">),</span><span class="s1">e</span><span class="s2">;</span><span class="s3">function </span><span class="s1">c</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$schema</span><span class="s2">;</span><span class="s3">return </span><span class="s1">r</span><span class="s2">&amp;&amp;!</span><span class="s1">l</span><span class="s2">.</span><span class="s1">getSchema</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)?</span><span class="s1">s</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s1">r</span><span class="s2">},!</span><span class="s5">0</span><span class="s2">):</span><span class="s1">Promise</span><span class="s2">.</span><span class="s1">resolve</span><span class="s2">()}}</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s1">s</span><span class="s2">},{</span><span class="s4">&quot;./error_classes&quot;</span><span class="s2">:</span><span class="s5">3</span><span class="s2">}],</span><span class="s5">3</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./resolve&quot;</span><span class="s2">);</span><span class="s3">function </span><span class="s1">s</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">this</span><span class="s2">.</span><span class="s1">message</span><span class="s2">=</span><span class="s1">t</span><span class="s2">||</span><span class="s1">s</span><span class="s2">.</span><span class="s1">message</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">),</span><span class="s3">this</span><span class="s2">.</span><span class="s1">missingRef</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">url</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">),</span><span class="s3">this</span><span class="s2">.</span><span class="s1">missingSchema</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">normalizeId</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">fullPath</span><span class="s2">(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">missingRef</span><span class="s2">))}</span><span class="s3">function </span><span class="s1">o</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">=</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">create</span><span class="s2">(</span><span class="s1">Error</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">constructor</span><span class="s2">=</span><span class="s1">e</span><span class="s2">}</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">={</span><span class="s1">Validation</span><span class="s2">:</span><span class="s1">o</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">this</span><span class="s2">.</span><span class="s1">message</span><span class="s2">=</span><span class="s4">&quot;validation failed&quot;</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s1">e</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">ajv</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">validation</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">}),</span><span class="s1">MissingRef</span><span class="s2">:</span><span class="s1">o</span><span class="s2">(</span><span class="s1">s</span><span class="s2">)},</span><span class="s1">s</span><span class="s2">.</span><span class="s1">message</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;can't resolve reference &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; from id &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">}},{</span><span class="s4">&quot;./resolve&quot;</span><span class="s2">:</span><span class="s5">6</span><span class="s2">}],</span><span class="s5">4</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./util&quot;</span><span class="s2">),</span><span class="s1">o</span><span class="s2">=</span><span class="s6">/^(\d\d\d\d)-(\d\d)-(\d\d)$/</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=[</span><span class="s5">0</span><span class="s2">,</span><span class="s5">31</span><span class="s2">,</span><span class="s5">28</span><span class="s2">,</span><span class="s5">31</span><span class="s2">,</span><span class="s5">30</span><span class="s2">,</span><span class="s5">31</span><span class="s2">,</span><span class="s5">30</span><span class="s2">,</span><span class="s5">31</span><span class="s2">,</span><span class="s5">31</span><span class="s2">,</span><span class="s5">30</span><span class="s2">,</span><span class="s5">31</span><span class="s2">,</span><span class="s5">30</span><span class="s2">,</span><span class="s5">31</span><span class="s2">],</span><span class="s1">n</span><span class="s2">=</span><span class="s6">/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s6">/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s6">/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&amp;'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&amp;'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&amp;'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&amp;'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&amp;'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s6">/^(?:(?:[^\x00-\x20&quot;'&lt;&gt;%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&amp;=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i</span><span class="s2">,</span><span class="s1">u</span><span class="s2">=</span><span class="s6">/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s6">/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s6">/^(?:\/(?:[^~/]|~0|~1)*)*$/</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s6">/^#(?:\/(?:[a-z0-9_\-.!$&amp;'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s6">/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/</span><span class="s2">;</span><span class="s3">function </span><span class="s1">m</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">a</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">m</span><span class="s2">[</span><span class="s1">e</span><span class="s2">=</span><span class="s4">&quot;full&quot;</span><span class="s2">==</span><span class="s1">e</span><span class="s2">?</span><span class="s4">&quot;full&quot;</span><span class="s2">:</span><span class="s4">&quot;fast&quot;</span><span class="s2">])}</span><span class="s3">function </span><span class="s1">v</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">o</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">r</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">var </span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=+</span><span class="s1">r</span><span class="s2">[</span><span class="s5">2</span><span class="s2">],</span><span class="s1">s</span><span class="s2">=+</span><span class="s1">r</span><span class="s2">[</span><span class="s5">3</span><span class="s2">];</span><span class="s3">return </span><span class="s5">1</span><span class="s2">&lt;=</span><span class="s1">a</span><span class="s2">&amp;&amp;</span><span class="s1">a</span><span class="s2">&lt;=</span><span class="s5">12</span><span class="s2">&amp;&amp;</span><span class="s5">1</span><span class="s2">&lt;=</span><span class="s1">s</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">&lt;=(</span><span class="s5">2</span><span class="s2">!=</span><span class="s1">a</span><span class="s2">||((</span><span class="s1">t</span><span class="s2">=+</span><span class="s1">r</span><span class="s2">[</span><span class="s5">1</span><span class="s2">])%</span><span class="s5">4</span><span class="s2">!=</span><span class="s5">0</span><span class="s2">||</span><span class="s1">t</span><span class="s2">%</span><span class="s5">100</span><span class="s2">==</span><span class="s5">0</span><span class="s2">&amp;&amp;</span><span class="s1">t</span><span class="s2">%</span><span class="s5">400</span><span class="s2">!=</span><span class="s5">0</span><span class="s2">)?</span><span class="s1">i</span><span class="s2">[</span><span class="s1">a</span><span class="s2">]:</span><span class="s5">29</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">y</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">n</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">t</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">s</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s5">2</span><span class="s2">],</span><span class="s1">o</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s5">3</span><span class="s2">];</span><span class="s3">return</span><span class="s2">(</span><span class="s1">a</span><span class="s2">&lt;=</span><span class="s5">23</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">&lt;=</span><span class="s5">59</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&lt;=</span><span class="s5">59</span><span class="s2">||</span><span class="s5">23</span><span class="s2">==</span><span class="s1">a</span><span class="s2">&amp;&amp;</span><span class="s5">59</span><span class="s2">==</span><span class="s1">s</span><span class="s2">&amp;&amp;</span><span class="s5">60</span><span class="s2">==</span><span class="s1">o</span><span class="s2">)&amp;&amp;(!</span><span class="s1">r</span><span class="s2">||</span><span class="s1">t</span><span class="s2">[</span><span class="s5">5</span><span class="s2">])}(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s1">m</span><span class="s2">).</span><span class="s1">fast</span><span class="s2">={</span><span class="s1">date</span><span class="s2">:</span><span class="s6">/^\d\d\d\d-[0-1]\d-[0-3]\d$/</span><span class="s2">,</span><span class="s1">time</span><span class="s2">:</span><span class="s6">/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i</span><span class="s2">,</span><span class="s4">&quot;date-time&quot;</span><span class="s2">:</span><span class="s6">/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i</span><span class="s2">,</span><span class="s1">uri</span><span class="s2">:</span><span class="s6">/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i</span><span class="s2">,</span><span class="s4">&quot;uri-reference&quot;</span><span class="s2">:</span><span class="s6">/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i</span><span class="s2">,</span><span class="s4">&quot;uri-template&quot;</span><span class="s2">:</span><span class="s1">c</span><span class="s2">,</span><span class="s1">url</span><span class="s2">:</span><span class="s1">u</span><span class="s2">,</span><span class="s1">email</span><span class="s2">:</span><span class="s6">/^[a-z0-9.!#$%&amp;'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i</span><span class="s2">,</span><span class="s1">hostname</span><span class="s2">:</span><span class="s1">s</span><span class="s2">,</span><span class="s1">ipv4</span><span class="s2">:</span><span class="s6">/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/</span><span class="s2">,</span><span class="s1">ipv6</span><span class="s2">:</span><span class="s6">/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i</span><span class="s2">,</span><span class="s1">regex</span><span class="s2">:</span><span class="s1">w</span><span class="s2">,</span><span class="s1">uuid</span><span class="s2">:</span><span class="s1">h</span><span class="s2">,</span><span class="s4">&quot;json-pointer&quot;</span><span class="s2">:</span><span class="s1">d</span><span class="s2">,</span><span class="s4">&quot;json-pointer-uri-fragment&quot;</span><span class="s2">:</span><span class="s1">p</span><span class="s2">,</span><span class="s4">&quot;relative-json-pointer&quot;</span><span class="s2">:</span><span class="s1">f</span><span class="s2">},</span><span class="s1">m</span><span class="s2">.</span><span class="s1">full</span><span class="s2">={</span><span class="s1">date</span><span class="s2">:</span><span class="s1">v</span><span class="s2">,</span><span class="s1">time</span><span class="s2">:</span><span class="s1">y</span><span class="s2">,</span><span class="s4">&quot;date-time&quot;</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s1">g</span><span class="s2">);</span><span class="s3">return </span><span class="s5">2</span><span class="s2">==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&amp;&amp;</span><span class="s1">v</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s5">0</span><span class="s2">])&amp;&amp;</span><span class="s1">y</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],!</span><span class="s5">0</span><span class="s2">)},</span><span class="s1">uri</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">P</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)&amp;&amp;</span><span class="s1">l</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)},</span><span class="s4">&quot;uri-reference&quot;</span><span class="s2">:</span><span class="s6">/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&amp;'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&amp;'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&amp;'&quot;()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i</span><span class="s2">,</span><span class="s4">&quot;uri-template&quot;</span><span class="s2">:</span><span class="s1">c</span><span class="s2">,</span><span class="s1">url</span><span class="s2">:</span><span class="s1">u</span><span class="s2">,</span><span class="s1">email</span><span class="s2">:</span><span class="s6">/^[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i</span><span class="s2">,</span><span class="s1">hostname</span><span class="s2">:</span><span class="s1">s</span><span class="s2">,</span><span class="s1">ipv4</span><span class="s2">:</span><span class="s6">/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/</span><span class="s2">,</span><span class="s1">ipv6</span><span class="s2">:</span><span class="s6">/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i</span><span class="s2">,</span><span class="s1">regex</span><span class="s2">:</span><span class="s1">w</span><span class="s2">,</span><span class="s1">uuid</span><span class="s2">:</span><span class="s1">h</span><span class="s2">,</span><span class="s4">&quot;json-pointer&quot;</span><span class="s2">:</span><span class="s1">d</span><span class="s2">,</span><span class="s4">&quot;json-pointer-uri-fragment&quot;</span><span class="s2">:</span><span class="s1">p</span><span class="s2">,</span><span class="s4">&quot;relative-json-pointer&quot;</span><span class="s2">:</span><span class="s1">f</span><span class="s2">};</span><span class="s3">var </span><span class="s1">g</span><span class="s2">=</span><span class="s6">/t|\s/i</span><span class="s2">;</span><span class="s3">var </span><span class="s1">P</span><span class="s2">=</span><span class="s6">/\/|:/</span><span class="s2">;</span><span class="s3">var </span><span class="s1">E</span><span class="s2">=</span><span class="s6">/[^\\]\\Z/</span><span class="s2">;</span><span class="s3">function </span><span class="s1">w</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">E</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">try</span><span class="s2">{</span><span class="s3">return new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),!</span><span class="s5">0</span><span class="s2">}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">}}},{</span><span class="s4">&quot;./util&quot;</span><span class="s2">:</span><span class="s5">10</span><span class="s2">}],</span><span class="s5">5</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">R</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./resolve&quot;</span><span class="s2">),</span><span class="s1">$</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./util&quot;</span><span class="s2">),</span><span class="s1">j</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./error_classes&quot;</span><span class="s2">),</span><span class="s1">D</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;fast-json-stable-stringify&quot;</span><span class="s2">),</span><span class="s1">O</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;../dotjs/validate&quot;</span><span class="s2">),</span><span class="s1">I</span><span class="s2">=</span><span class="s1">$</span><span class="s2">.</span><span class="s1">ucs2length</span><span class="s2">,</span><span class="s1">A</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;fast-deep-equal&quot;</span><span class="s2">),</span><span class="s1">k</span><span class="s2">=</span><span class="s1">j</span><span class="s2">.</span><span class="s1">Validation</span><span class="s2">;</span><span class="s3">function </span><span class="s1">C</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">u</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s3">this</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=[</span><span class="s3">void </span><span class="s5">0</span><span class="s2">],</span><span class="s1">f</span><span class="s2">={},</span><span class="s1">l</span><span class="s2">=[],</span><span class="s1">t</span><span class="s2">={},</span><span class="s1">m</span><span class="s2">=[],</span><span class="s1">a</span><span class="s2">={},</span><span class="s1">v</span><span class="s2">=[],</span><span class="s1">s</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">L</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">);</span><span class="s3">return </span><span class="s5">0</span><span class="s2">&lt;=</span><span class="s1">a</span><span class="s2">?{</span><span class="s1">index</span><span class="s2">:</span><span class="s1">a</span><span class="s2">,</span><span class="s1">compiling</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">}:{</span><span class="s1">index</span><span class="s2">:</span><span class="s1">a</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compilations</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">compiling</span><span class="s2">:!(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compilations</span><span class="s2">[</span><span class="s1">a</span><span class="s2">]={</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">root</span><span class="s2">:</span><span class="s1">r</span><span class="s2">,</span><span class="s1">baseId</span><span class="s2">:</span><span class="s1">t</span><span class="s2">})}}.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">c</span><span class="s2">||{</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">refVal</span><span class="s2">:</span><span class="s1">h</span><span class="s2">,</span><span class="s1">refs</span><span class="s2">:</span><span class="s1">f</span><span class="s2">},</span><span class="s1">r</span><span class="s2">),</span><span class="s1">o</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compilations</span><span class="s2">[</span><span class="s1">s</span><span class="s2">.</span><span class="s1">index</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">.</span><span class="s1">compiling</span><span class="s2">)</span><span class="s3">return </span><span class="s1">o</span><span class="s2">.</span><span class="s1">callValidate</span><span class="s2">=</span><span class="s1">P</span><span class="s2">;</span><span class="s3">var </span><span class="s1">y</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_formats</span><span class="s2">,</span><span class="s1">g</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">;</span><span class="s3">try</span><span class="s2">{</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">E</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">u</span><span class="s2">,</span><span class="s1">r</span><span class="s2">);</span><span class="s1">o</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">=</span><span class="s1">i</span><span class="s2">;</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s1">o</span><span class="s2">.</span><span class="s1">callValidate</span><span class="s2">;</span><span class="s3">return </span><span class="s1">n</span><span class="s2">&amp;&amp;(</span><span class="s1">n</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s3">null</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">refs</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">refs</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">refVal</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">refVal</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">root</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">root</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">,</span><span class="s1">p</span><span class="s2">.</span><span class="s1">sourceCode</span><span class="s2">&amp;&amp;(</span><span class="s1">n</span><span class="s2">.</span><span class="s1">source</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">source</span><span class="s2">)),</span><span class="s1">i</span><span class="s2">}</span><span class="s3">finally</span><span class="s2">{(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">L</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">);</span><span class="s5">0</span><span class="s2">&lt;=</span><span class="s1">a</span><span class="s2">&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compilations</span><span class="s2">.</span><span class="s1">splice</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s5">1</span><span class="s2">)}).</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">r</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">P</span><span class="s2">(){</span><span class="s3">var </span><span class="s1">e</span><span class="s2">=</span><span class="s1">o</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">,</span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">apply</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">arguments</span><span class="s2">);</span><span class="s3">return </span><span class="s1">P</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">,</span><span class="s1">r</span><span class="s2">}</span><span class="s3">function </span><span class="s1">E</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=!</span><span class="s1">r</span><span class="s2">||</span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">==</span><span class="s1">e</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">!=</span><span class="s1">c</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">)</span><span class="s3">return </span><span class="s1">C</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">d</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">);</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">O</span><span class="s2">({</span><span class="s1">isTop</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">isRoot</span><span class="s2">:</span><span class="s1">s</span><span class="s2">,</span><span class="s1">baseId</span><span class="s2">:</span><span class="s1">a</span><span class="s2">,</span><span class="s1">root</span><span class="s2">:</span><span class="s1">r</span><span class="s2">,</span><span class="s1">schemaPath</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">errSchemaPath</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">,</span><span class="s1">errorPath</span><span class="s2">:</span><span class="s4">'&quot;&quot;'</span><span class="s2">,</span><span class="s1">MissingRefError</span><span class="s2">:</span><span class="s1">j</span><span class="s2">.</span><span class="s1">MissingRef</span><span class="s2">,</span><span class="s1">RULES</span><span class="s2">:</span><span class="s1">g</span><span class="s2">,</span><span class="s1">validate</span><span class="s2">:</span><span class="s1">O</span><span class="s2">,</span><span class="s1">util</span><span class="s2">:</span><span class="s1">$</span><span class="s2">,</span><span class="s1">resolve</span><span class="s2">:</span><span class="s1">R</span><span class="s2">,</span><span class="s1">resolveRef</span><span class="s2">:</span><span class="s1">w</span><span class="s2">,</span><span class="s1">usePattern</span><span class="s2">:</span><span class="s1">_</span><span class="s2">,</span><span class="s1">useDefault</span><span class="s2">:</span><span class="s1">F</span><span class="s2">,</span><span class="s1">useCustomRule</span><span class="s2">:</span><span class="s1">x</span><span class="s2">,</span><span class="s1">opts</span><span class="s2">:</span><span class="s1">p</span><span class="s2">,</span><span class="s1">formats</span><span class="s2">:</span><span class="s1">y</span><span class="s2">,</span><span class="s1">logger</span><span class="s2">:</span><span class="s1">d</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">,</span><span class="s1">self</span><span class="s2">:</span><span class="s1">d</span><span class="s2">}),</span><span class="s1">i</span><span class="s2">=</span><span class="s1">Q</span><span class="s2">(</span><span class="s1">h</span><span class="s2">,</span><span class="s1">z</span><span class="s2">)+</span><span class="s1">Q</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,</span><span class="s1">N</span><span class="s2">)+</span><span class="s1">Q</span><span class="s2">(</span><span class="s1">m</span><span class="s2">,</span><span class="s1">q</span><span class="s2">)+</span><span class="s1">Q</span><span class="s2">(</span><span class="s1">v</span><span class="s2">,</span><span class="s1">T</span><span class="s2">)+</span><span class="s1">i</span><span class="s2">;</span><span class="s1">p</span><span class="s2">.</span><span class="s1">processCode</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">processCode</span><span class="s2">(</span><span class="s1">i</span><span class="s2">,</span><span class="s1">e</span><span class="s2">));</span><span class="s3">try</span><span class="s2">{</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s3">new </span><span class="s1">Function</span><span class="s2">(</span><span class="s4">&quot;self&quot;</span><span class="s2">,</span><span class="s4">&quot;RULES&quot;</span><span class="s2">,</span><span class="s4">&quot;formats&quot;</span><span class="s2">,</span><span class="s4">&quot;root&quot;</span><span class="s2">,</span><span class="s4">&quot;refVal&quot;</span><span class="s2">,</span><span class="s4">&quot;defaults&quot;</span><span class="s2">,</span><span class="s4">&quot;customRules&quot;</span><span class="s2">,</span><span class="s4">&quot;equal&quot;</span><span class="s2">,</span><span class="s4">&quot;ucs2length&quot;</span><span class="s2">,</span><span class="s4">&quot;ValidationError&quot;</span><span class="s2">,</span><span class="s1">i</span><span class="s2">)(</span><span class="s1">d</span><span class="s2">,</span><span class="s1">g</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">h</span><span class="s2">,</span><span class="s1">m</span><span class="s2">,</span><span class="s1">v</span><span class="s2">,</span><span class="s1">A</span><span class="s2">,</span><span class="s1">I</span><span class="s2">,</span><span class="s1">k</span><span class="s2">);</span><span class="s1">h</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]=</span><span class="s1">n</span><span class="s2">}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">throw </span><span class="s1">d</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s4">&quot;Error compiling schema, function code:&quot;</span><span class="s2">,</span><span class="s1">i</span><span class="s2">),</span><span class="s1">e</span><span class="s2">}</span><span class="s3">return </span><span class="s1">n</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">e</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s3">null</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">refs</span><span class="s2">=</span><span class="s1">f</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">refVal</span><span class="s2">=</span><span class="s1">h</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">root</span><span class="s2">=</span><span class="s1">s</span><span class="s2">?</span><span class="s1">n</span><span class="s2">:</span><span class="s1">r</span><span class="s2">,</span><span class="s1">o</span><span class="s2">&amp;&amp;(</span><span class="s1">n</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">),!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">p</span><span class="s2">.</span><span class="s1">sourceCode</span><span class="s2">&amp;&amp;(</span><span class="s1">n</span><span class="s2">.</span><span class="s1">source</span><span class="s2">={</span><span class="s1">code</span><span class="s2">:</span><span class="s1">i</span><span class="s2">,</span><span class="s1">patterns</span><span class="s2">:</span><span class="s1">l</span><span class="s2">,</span><span class="s1">defaults</span><span class="s2">:</span><span class="s1">m</span><span class="s2">}),</span><span class="s1">n</span><span class="s2">}</span><span class="s3">function </span><span class="s1">w</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s1">r</span><span class="s2">=</span><span class="s1">R</span><span class="s2">.</span><span class="s1">url</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">);</span><span class="s3">var </span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">f</span><span class="s2">[</span><span class="s1">r</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">o</span><span class="s2">)</span><span class="s3">return </span><span class="s1">S</span><span class="s2">(</span><span class="s1">a</span><span class="s2">=</span><span class="s1">h</span><span class="s2">[</span><span class="s1">o</span><span class="s2">],</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;refVal[&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">t</span><span class="s2">&amp;&amp;</span><span class="s1">c</span><span class="s2">.</span><span class="s1">refs</span><span class="s2">){</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">c</span><span class="s2">.</span><span class="s1">refs</span><span class="s2">[</span><span class="s1">r</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">i</span><span class="s2">)</span><span class="s3">return </span><span class="s1">S</span><span class="s2">(</span><span class="s1">a</span><span class="s2">=</span><span class="s1">c</span><span class="s2">.</span><span class="s1">refVal</span><span class="s2">[</span><span class="s1">i</span><span class="s2">],</span><span class="s1">s</span><span class="s2">=</span><span class="s1">b</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">a</span><span class="s2">))}</span><span class="s1">s</span><span class="s2">=</span><span class="s1">b</span><span class="s2">(</span><span class="s1">r</span><span class="s2">);</span><span class="s3">var </span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">R</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">d</span><span class="s2">,</span><span class="s1">E</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">r</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">l</span><span class="s2">||(</span><span class="s1">n</span><span class="s2">=</span><span class="s1">u</span><span class="s2">&amp;&amp;</span><span class="s1">u</span><span class="s2">[</span><span class="s1">r</span><span class="s2">])&amp;&amp;(</span><span class="s1">l</span><span class="s2">=</span><span class="s1">R</span><span class="s2">.</span><span class="s1">inlineRef</span><span class="s2">(</span><span class="s1">n</span><span class="s2">,</span><span class="s1">p</span><span class="s2">.</span><span class="s1">inlineRefs</span><span class="s2">)?</span><span class="s1">n</span><span class="s2">:</span><span class="s1">C</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">d</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">u</span><span class="s2">,</span><span class="s1">e</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">l</span><span class="s2">)</span><span class="s3">return </span><span class="s1">S</span><span class="s2">(</span><span class="s1">h</span><span class="s2">[</span><span class="s1">f</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]]=</span><span class="s1">l</span><span class="s2">,</span><span class="s1">s</span><span class="s2">);</span><span class="s3">delete </span><span class="s1">f</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]}</span><span class="s3">function </span><span class="s1">b</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s3">return </span><span class="s1">h</span><span class="s2">[</span><span class="s1">t</span><span class="s2">]=</span><span class="s1">r</span><span class="s2">,</span><span class="s4">&quot;refVal&quot;</span><span class="s2">+(</span><span class="s1">f</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]=</span><span class="s1">t</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">S</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">||</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">?{</span><span class="s1">code</span><span class="s2">:</span><span class="s1">r</span><span class="s2">,</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">inline</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">}:{</span><span class="s1">code</span><span class="s2">:</span><span class="s1">r</span><span class="s2">,</span><span class="s1">$async</span><span class="s2">:</span><span class="s1">e</span><span class="s2">&amp;&amp;!!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">}}</span><span class="s3">function </span><span class="s1">_</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s1">e</span><span class="s2">];</span><span class="s3">return void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">r</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">l</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]=</span><span class="s1">e</span><span class="s2">),</span><span class="s4">&quot;pattern&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">}</span><span class="s3">function </span><span class="s1">F</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">switch</span><span class="s2">(</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">){</span><span class="s3">case</span><span class="s4">&quot;boolean&quot;</span><span class="s2">:</span><span class="s3">case</span><span class="s4">&quot;number&quot;</span><span class="s2">:</span><span class="s3">return</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;string&quot;</span><span class="s2">:</span><span class="s3">return </span><span class="s1">$</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s3">case</span><span class="s4">&quot;object&quot;</span><span class="s2">:</span><span class="s3">if</span><span class="s2">(</span><span class="s3">null</span><span class="s2">===</span><span class="s1">e</span><span class="s2">)</span><span class="s3">return</span><span class="s4">&quot;null&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">D</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s1">a</span><span class="s2">[</span><span class="s1">r</span><span class="s2">];</span><span class="s3">return void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">t</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">a</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]=</span><span class="s1">m</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">m</span><span class="s2">[</span><span class="s1">t</span><span class="s2">]=</span><span class="s1">e</span><span class="s2">),</span><span class="s4">&quot;default&quot;</span><span class="s2">+</span><span class="s1">t</span><span class="s2">}}</span><span class="s3">function </span><span class="s1">x</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">d</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">definition</span><span class="s2">.</span><span class="s1">dependencies</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">&amp;&amp;!</span><span class="s1">s</span><span class="s2">.</span><span class="s1">every</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">Object</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">hasOwnProperty</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">e</span><span class="s2">)}))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;parent schema must have all required keywords: &quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">));</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">definition</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">o</span><span class="s2">)</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">o</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)){</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s4">&quot;keyword schema is invalid: &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errorsText</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;log&quot;</span><span class="s2">!=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">i</span><span class="s2">);</span><span class="s1">d</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)}}</span><span class="s3">var </span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">definition</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">definition</span><span class="s2">.</span><span class="s1">inline</span><span class="s2">,</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">definition</span><span class="s2">.</span><span class="s1">macro</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">l</span><span class="s2">)</span><span class="s1">n</span><span class="s2">=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">d</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">);</span><span class="s3">else if</span><span class="s2">(</span><span class="s1">u</span><span class="s2">)</span><span class="s1">n</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">d</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">),!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">p</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">&amp;&amp;</span><span class="s1">d</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">(</span><span class="s1">n</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">else if</span><span class="s2">(</span><span class="s1">c</span><span class="s2">)</span><span class="s1">n</span><span class="s2">=</span><span class="s1">c</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">d</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">);</span><span class="s3">else if</span><span class="s2">(!(</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">definition</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">))</span><span class="s3">return</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">n</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">'custom keyword &quot;'</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">+</span><span class="s4">'&quot;failed to compile'</span><span class="s2">);</span><span class="s3">var </span><span class="s1">h</span><span class="s2">=</span><span class="s1">v</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s3">return</span><span class="s2">{</span><span class="s1">code</span><span class="s2">:</span><span class="s4">&quot;customRule&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">,</span><span class="s1">validate</span><span class="s2">:</span><span class="s1">v</span><span class="s2">[</span><span class="s1">h</span><span class="s2">]=</span><span class="s1">n</span><span class="s2">}}}</span><span class="s3">function </span><span class="s1">L</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">a</span><span class="s2">&lt;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compilations</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">a</span><span class="s2">++){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compilations</span><span class="s2">[</span><span class="s1">a</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">==</span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">.</span><span class="s1">root</span><span class="s2">==</span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">==</span><span class="s1">t</span><span class="s2">)</span><span class="s3">return </span><span class="s1">a</span><span class="s2">}</span><span class="s3">return</span><span class="s2">-</span><span class="s5">1</span><span class="s2">}</span><span class="s3">function </span><span class="s1">N</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;var pattern&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot; = new RegExp(&quot;</span><span class="s2">+</span><span class="s1">$</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s1">e</span><span class="s2">])+</span><span class="s4">&quot;);&quot;</span><span class="s2">}</span><span class="s3">function </span><span class="s1">q</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;var default&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot; = defaults[&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot;];&quot;</span><span class="s2">}</span><span class="s3">function </span><span class="s1">z</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">r</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]?</span><span class="s4">&quot;&quot;</span><span class="s2">:</span><span class="s4">&quot;var refVal&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot; = refVal[&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot;];&quot;</span><span class="s2">}</span><span class="s3">function </span><span class="s1">T</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;var customRule&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot; = customRules[&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot;];&quot;</span><span class="s2">}</span><span class="s3">function </span><span class="s1">Q</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">)</span><span class="s3">return</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">a</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">a</span><span class="s2">++)</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">r</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s1">e</span><span class="s2">);</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s1">C</span><span class="s2">},{</span><span class="s4">&quot;../dotjs/validate&quot;</span><span class="s2">:</span><span class="s5">38</span><span class="s2">,</span><span class="s4">&quot;./error_classes&quot;</span><span class="s2">:</span><span class="s5">3</span><span class="s2">,</span><span class="s4">&quot;./resolve&quot;</span><span class="s2">:</span><span class="s5">6</span><span class="s2">,</span><span class="s4">&quot;./util&quot;</span><span class="s2">:</span><span class="s5">10</span><span class="s2">,</span><span class="s4">&quot;fast-deep-equal&quot;</span><span class="s2">:</span><span class="s5">42</span><span class="s2">,</span><span class="s4">&quot;fast-json-stable-stringify&quot;</span><span class="s2">:</span><span class="s5">43</span><span class="s2">}],</span><span class="s5">6</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">m</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;uri-js&quot;</span><span class="s2">),</span><span class="s1">v</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;fast-deep-equal&quot;</span><span class="s2">),</span><span class="s1">y</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./util&quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./schema_obj&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;json-schema-traverse&quot;</span><span class="s2">);</span><span class="s3">function </span><span class="s1">c</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">t</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">a</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">a</span><span class="s2">])</span><span class="s3">return </span><span class="s1">c</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">a</span><span class="s2">);</span><span class="s1">a</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">a</span><span class="s2">]}</span><span class="s3">if</span><span class="s2">((</span><span class="s1">a</span><span class="s2">=</span><span class="s1">a</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">[</span><span class="s1">t</span><span class="s2">])</span><span class="s3">instanceof </span><span class="s1">l</span><span class="s2">)</span><span class="s3">return </span><span class="s1">d</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">inlineRefs</span><span class="s2">)?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">a</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compile</span><span class="s2">(</span><span class="s1">a</span><span class="s2">);</span><span class="s3">var </span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">);</span><span class="s3">return </span><span class="s1">n</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">r</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">root</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">),</span><span class="s1">s </span><span class="s3">instanceof </span><span class="s1">l</span><span class="s2">?</span><span class="s1">o</span><span class="s2">=</span><span class="s1">s</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">s</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">i</span><span class="s2">):</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">s</span><span class="s2">&amp;&amp;(</span><span class="s1">o</span><span class="s2">=</span><span class="s1">d</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">inlineRefs</span><span class="s2">)?</span><span class="s1">s</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">i</span><span class="s2">)),</span><span class="s1">o</span><span class="s2">}</span><span class="s3">function </span><span class="s1">u</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">m</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">a</span><span class="s2">=</span><span class="s1">p</span><span class="s2">(</span><span class="s1">t</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=</span><span class="s1">g</span><span class="s2">(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">));</span><span class="s3">if</span><span class="s2">(</span><span class="s5">0</span><span class="s2">===</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||</span><span class="s1">a</span><span class="s2">!==</span><span class="s1">s</span><span class="s2">){</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=</span><span class="s1">P</span><span class="s2">(</span><span class="s1">a</span><span class="s2">),</span><span class="s1">i</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">o</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">i</span><span class="s2">)</span><span class="s3">return function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">;</span><span class="s1">e</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">root</span><span class="s2">;</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">s</span><span class="s2">);</span><span class="s3">return </span><span class="s1">i</span><span class="s2">&amp;&amp;(</span><span class="s1">o</span><span class="s2">=</span><span class="s1">f</span><span class="s2">(</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">)),</span><span class="s1">n</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">)}}.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">t</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">i </span><span class="s3">instanceof </span><span class="s1">l</span><span class="s2">)</span><span class="s1">i</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compile</span><span class="s2">(</span><span class="s1">i</span><span class="s2">),</span><span class="s1">e</span><span class="s2">=</span><span class="s1">i</span><span class="s2">;</span><span class="s3">else</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(!((</span><span class="s1">i</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">[</span><span class="s1">o</span><span class="s2">])</span><span class="s3">instanceof </span><span class="s1">l</span><span class="s2">))</span><span class="s3">return</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">i</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compile</span><span class="s2">(</span><span class="s1">i</span><span class="s2">),</span><span class="s1">o</span><span class="s2">==</span><span class="s1">P</span><span class="s2">(</span><span class="s1">r</span><span class="s2">))</span><span class="s3">return</span><span class="s2">{</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">i</span><span class="s2">,</span><span class="s1">root</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">baseId</span><span class="s2">:</span><span class="s1">s</span><span class="s2">};</span><span class="s1">e</span><span class="s2">=</span><span class="s1">i</span><span class="s2">}</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">)</span><span class="s3">return</span><span class="s2">;</span><span class="s1">s</span><span class="s2">=</span><span class="s1">g</span><span class="s2">(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">))}</span><span class="s3">return </span><span class="s1">n</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">e</span><span class="s2">)}(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s1">c</span><span class="s2">).</span><span class="s1">normalizeId</span><span class="s2">=</span><span class="s1">P</span><span class="s2">,</span><span class="s1">c</span><span class="s2">.</span><span class="s1">fullPath</span><span class="s2">=</span><span class="s1">g</span><span class="s2">,</span><span class="s1">c</span><span class="s2">.</span><span class="s1">url</span><span class="s2">=</span><span class="s1">f</span><span class="s2">,</span><span class="s1">c</span><span class="s2">.</span><span class="s1">ids</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">P</span><span class="s2">(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)),</span><span class="s1">h</span><span class="s2">={</span><span class="s4">&quot;&quot;</span><span class="s2">:</span><span class="s1">r</span><span class="s2">},</span><span class="s1">d</span><span class="s2">={</span><span class="s4">&quot;&quot;</span><span class="s2">:</span><span class="s1">g</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">)},</span><span class="s1">p</span><span class="s2">={},</span><span class="s1">f</span><span class="s2">=</span><span class="s3">this</span><span class="s2">;</span><span class="s3">return </span><span class="s1">a</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,{</span><span class="s1">allKeys</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">},</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;&quot;</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">l</span><span class="s2">=</span><span class="s1">h</span><span class="s2">[</span><span class="s1">a</span><span class="s2">],</span><span class="s1">c</span><span class="s2">=</span><span class="s1">d</span><span class="s2">[</span><span class="s1">a</span><span class="s2">]+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">i</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot;/&quot;</span><span class="s2">+(</span><span class="s4">&quot;number&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">i</span><span class="s2">?</span><span class="s1">i</span><span class="s2">:</span><span class="s1">y</span><span class="s2">.</span><span class="s1">escapeFragment</span><span class="s2">(</span><span class="s1">i</span><span class="s2">))),</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">n</span><span class="s2">){</span><span class="s1">n</span><span class="s2">=</span><span class="s1">l</span><span class="s2">=</span><span class="s1">P</span><span class="s2">(</span><span class="s1">l</span><span class="s2">?</span><span class="s1">m</span><span class="s2">.</span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,</span><span class="s1">n</span><span class="s2">):</span><span class="s1">n</span><span class="s2">);</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">n</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">u</span><span class="s2">&amp;&amp;(</span><span class="s1">u</span><span class="s2">=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">u</span><span class="s2">]),</span><span class="s1">u</span><span class="s2">&amp;&amp;</span><span class="s1">u</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">v</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">u</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">'id &quot;'</span><span class="s2">+</span><span class="s1">n</span><span class="s2">+</span><span class="s4">'&quot; resolves to more than one schema'</span><span class="s2">)}</span><span class="s3">else if</span><span class="s2">(</span><span class="s1">n</span><span class="s2">!=</span><span class="s1">P</span><span class="s2">(</span><span class="s1">c</span><span class="s2">))</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;#&quot;</span><span class="s2">==</span><span class="s1">n</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">p</span><span class="s2">[</span><span class="s1">n</span><span class="s2">]&amp;&amp;!</span><span class="s1">v</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">p</span><span class="s2">[</span><span class="s1">n</span><span class="s2">]))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">'id &quot;'</span><span class="s2">+</span><span class="s1">n</span><span class="s2">+</span><span class="s4">'&quot; resolves to more than one schema'</span><span class="s2">);</span><span class="s1">p</span><span class="s2">[</span><span class="s1">n</span><span class="s2">]=</span><span class="s1">e</span><span class="s2">}</span><span class="s3">else </span><span class="s1">f</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">n</span><span class="s2">]=</span><span class="s1">c</span><span class="s2">}</span><span class="s1">h</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]=</span><span class="s1">l</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]=</span><span class="s1">c</span><span class="s2">}}),</span><span class="s1">p</span><span class="s2">},</span><span class="s1">c</span><span class="s2">.</span><span class="s1">inlineRef</span><span class="s2">=</span><span class="s1">d</span><span class="s2">,</span><span class="s1">c</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">u</span><span class="s2">;</span><span class="s3">var </span><span class="s1">h</span><span class="s2">=</span><span class="s1">y</span><span class="s2">.</span><span class="s1">toHash</span><span class="s2">([</span><span class="s4">&quot;properties&quot;</span><span class="s2">,</span><span class="s4">&quot;patternProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;enum&quot;</span><span class="s2">,</span><span class="s4">&quot;dependencies&quot;</span><span class="s2">,</span><span class="s4">&quot;definitions&quot;</span><span class="s2">]);</span><span class="s3">function </span><span class="s1">n</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s4">&quot;/&quot;</span><span class="s2">==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">0</span><span class="s2">,</span><span class="s5">1</span><span class="s2">)){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;/&quot;</span><span class="s2">),</span><span class="s1">o</span><span class="s2">=</span><span class="s5">1</span><span class="s2">;</span><span class="s1">o</span><span class="s2">&lt;</span><span class="s1">s</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">o</span><span class="s2">++){</span><span class="s3">var </span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s1">o</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">c</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s1">c</span><span class="s2">=</span><span class="s1">y</span><span class="s2">.</span><span class="s1">unescapeFragment</span><span class="s2">(</span><span class="s1">c</span><span class="s2">)]))</span><span class="s3">break</span><span class="s2">;</span><span class="s1">h</span><span class="s2">[</span><span class="s1">c</span><span class="s2">]||((</span><span class="s1">l</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">t</span><span class="s2">))&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">f</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">.</span><span class="s1">$ref</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">=</span><span class="s1">f</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">$ref</span><span class="s2">),(</span><span class="s1">n</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">i</span><span class="s2">))&amp;&amp;(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">root</span><span class="s2">,</span><span class="s1">r</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">)))}}</span><span class="s3">return void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">&amp;&amp;</span><span class="s1">t</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">?{</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">t</span><span class="s2">,</span><span class="s1">root</span><span class="s2">:</span><span class="s1">a</span><span class="s2">,</span><span class="s1">baseId</span><span class="s2">:</span><span class="s1">r</span><span class="s2">}:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">}}</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">y</span><span class="s2">.</span><span class="s1">toHash</span><span class="s2">([</span><span class="s4">&quot;type&quot;</span><span class="s2">,</span><span class="s4">&quot;format&quot;</span><span class="s2">,</span><span class="s4">&quot;pattern&quot;</span><span class="s2">,</span><span class="s4">&quot;maxLength&quot;</span><span class="s2">,</span><span class="s4">&quot;minLength&quot;</span><span class="s2">,</span><span class="s4">&quot;maxProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;minProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;maxItems&quot;</span><span class="s2">,</span><span class="s4">&quot;minItems&quot;</span><span class="s2">,</span><span class="s4">&quot;maximum&quot;</span><span class="s2">,</span><span class="s4">&quot;minimum&quot;</span><span class="s2">,</span><span class="s4">&quot;uniqueItems&quot;</span><span class="s2">,</span><span class="s4">&quot;multipleOf&quot;</span><span class="s2">,</span><span class="s4">&quot;required&quot;</span><span class="s2">,</span><span class="s4">&quot;enum&quot;</span><span class="s2">]);</span><span class="s3">function </span><span class="s1">d</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">&amp;&amp;(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">r</span><span class="s2">||!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">r</span><span class="s2">?</span><span class="s3">function </span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">a</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">a</span><span class="s2">++)</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof</span><span class="s2">(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">a</span><span class="s2">])&amp;&amp;!</span><span class="s1">e</span><span class="s2">(</span><span class="s1">t</span><span class="s2">))</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">}</span><span class="s3">else for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">s </span><span class="s3">in </span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;$ref&quot;</span><span class="s2">==</span><span class="s1">s</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof</span><span class="s2">(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">s</span><span class="s2">])&amp;&amp;!</span><span class="s1">e</span><span class="s2">(</span><span class="s1">t</span><span class="s2">))</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">}</span><span class="s3">return</span><span class="s2">!</span><span class="s5">0</span><span class="s2">}(</span><span class="s1">e</span><span class="s2">):</span><span class="s1">r</span><span class="s2">?</span><span class="s3">function </span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">s</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">s</span><span class="s2">++)</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof</span><span class="s2">(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">s</span><span class="s2">])&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">(</span><span class="s1">t</span><span class="s2">)),</span><span class="s1">a</span><span class="s2">==</span><span class="s5">1</span><span class="s2">/</span><span class="s5">0</span><span class="s2">)</span><span class="s3">return </span><span class="s5">1</span><span class="s2">/</span><span class="s5">0</span><span class="s2">}</span><span class="s3">else for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">o </span><span class="s3">in </span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;$ref&quot;</span><span class="s2">==</span><span class="s1">o</span><span class="s2">)</span><span class="s3">return </span><span class="s5">1</span><span class="s2">/</span><span class="s5">0</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">i</span><span class="s2">[</span><span class="s1">o</span><span class="s2">])</span><span class="s1">a</span><span class="s2">++;</span><span class="s3">else if</span><span class="s2">(</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof</span><span class="s2">(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">o</span><span class="s2">])&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">(</span><span class="s1">t</span><span class="s2">)+</span><span class="s5">1</span><span class="s2">),</span><span class="s1">a</span><span class="s2">==</span><span class="s5">1</span><span class="s2">/</span><span class="s5">0</span><span class="s2">)</span><span class="s3">return </span><span class="s5">1</span><span class="s2">/</span><span class="s5">0</span><span class="s2">}</span><span class="s3">return </span><span class="s1">a</span><span class="s2">}(</span><span class="s1">e</span><span class="s2">)&lt;=</span><span class="s1">r</span><span class="s2">:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">g</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">=</span><span class="s1">P</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)),</span><span class="s1">p</span><span class="s2">(</span><span class="s1">m</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))}</span><span class="s3">function </span><span class="s1">p</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">m</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">(</span><span class="s1">e</span><span class="s2">).</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;#&quot;</span><span class="s2">)[</span><span class="s5">0</span><span class="s2">]+</span><span class="s4">&quot;#&quot;</span><span class="s2">}</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s6">/#\/?$/</span><span class="s2">;</span><span class="s3">function </span><span class="s1">P</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,</span><span class="s4">&quot;&quot;</span><span class="s2">):</span><span class="s4">&quot;&quot;</span><span class="s2">}</span><span class="s3">function </span><span class="s1">f</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return </span><span class="s1">r</span><span class="s2">=</span><span class="s1">P</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">m</span><span class="s2">.</span><span class="s1">resolve</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">)}},{</span><span class="s4">&quot;./schema_obj&quot;</span><span class="s2">:</span><span class="s5">8</span><span class="s2">,</span><span class="s4">&quot;./util&quot;</span><span class="s2">:</span><span class="s5">10</span><span class="s2">,</span><span class="s4">&quot;fast-deep-equal&quot;</span><span class="s2">:</span><span class="s5">42</span><span class="s2">,</span><span class="s4">&quot;json-schema-traverse&quot;</span><span class="s2">:</span><span class="s5">44</span><span class="s2">,</span><span class="s4">&quot;uri-js&quot;</span><span class="s2">:</span><span class="s5">45</span><span class="s2">}],</span><span class="s5">7</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;../dotjs&quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./util&quot;</span><span class="s2">).</span><span class="s1">toHash</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=[{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;number&quot;</span><span class="s2">,</span><span class="s1">rules</span><span class="s2">:[{</span><span class="s1">maximum</span><span class="s2">:[</span><span class="s4">&quot;exclusiveMaximum&quot;</span><span class="s2">]},{</span><span class="s1">minimum</span><span class="s2">:[</span><span class="s4">&quot;exclusiveMinimum&quot;</span><span class="s2">]},</span><span class="s4">&quot;multipleOf&quot;</span><span class="s2">,</span><span class="s4">&quot;format&quot;</span><span class="s2">]},{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">,</span><span class="s1">rules</span><span class="s2">:[</span><span class="s4">&quot;maxLength&quot;</span><span class="s2">,</span><span class="s4">&quot;minLength&quot;</span><span class="s2">,</span><span class="s4">&quot;pattern&quot;</span><span class="s2">,</span><span class="s4">&quot;format&quot;</span><span class="s2">]},{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s1">rules</span><span class="s2">:[</span><span class="s4">&quot;maxItems&quot;</span><span class="s2">,</span><span class="s4">&quot;minItems&quot;</span><span class="s2">,</span><span class="s4">&quot;items&quot;</span><span class="s2">,</span><span class="s4">&quot;contains&quot;</span><span class="s2">,</span><span class="s4">&quot;uniqueItems&quot;</span><span class="s2">]},{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s1">rules</span><span class="s2">:[</span><span class="s4">&quot;maxProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;minProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;required&quot;</span><span class="s2">,</span><span class="s4">&quot;dependencies&quot;</span><span class="s2">,</span><span class="s4">&quot;propertyNames&quot;</span><span class="s2">,{</span><span class="s1">properties</span><span class="s2">:[</span><span class="s4">&quot;additionalProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;patternProperties&quot;</span><span class="s2">]}]},{</span><span class="s1">rules</span><span class="s2">:[</span><span class="s4">&quot;$ref&quot;</span><span class="s2">,</span><span class="s4">&quot;const&quot;</span><span class="s2">,</span><span class="s4">&quot;enum&quot;</span><span class="s2">,</span><span class="s4">&quot;not&quot;</span><span class="s2">,</span><span class="s4">&quot;anyOf&quot;</span><span class="s2">,</span><span class="s4">&quot;oneOf&quot;</span><span class="s2">,</span><span class="s4">&quot;allOf&quot;</span><span class="s2">,</span><span class="s4">&quot;if&quot;</span><span class="s2">]}],</span><span class="s1">s</span><span class="s2">=[</span><span class="s4">&quot;type&quot;</span><span class="s2">,</span><span class="s4">&quot;$comment&quot;</span><span class="s2">];</span><span class="s3">return </span><span class="s1">a</span><span class="s2">.</span><span class="s1">all</span><span class="s2">=</span><span class="s1">i</span><span class="s2">(</span><span class="s1">s</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">types</span><span class="s2">=</span><span class="s1">i</span><span class="s2">([</span><span class="s4">&quot;number&quot;</span><span class="s2">,</span><span class="s4">&quot;integer&quot;</span><span class="s2">,</span><span class="s4">&quot;string&quot;</span><span class="s2">,</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s4">&quot;boolean&quot;</span><span class="s2">,</span><span class="s4">&quot;null&quot;</span><span class="s2">]),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">forEach</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">e</span><span class="s2">.</span><span class="s1">rules</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">rules</span><span class="s2">.</span><span class="s1">map</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">;</span><span class="s3">return</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">r</span><span class="s2">=</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)[</span><span class="s5">0</span><span class="s2">]],</span><span class="s1">e</span><span class="s2">=</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">forEach</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">s</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">all</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]=!</span><span class="s5">0</span><span class="s2">})),</span><span class="s1">s</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">all</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]={</span><span class="s1">keyword</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">code</span><span class="s2">:</span><span class="s1">o</span><span class="s2">[</span><span class="s1">e</span><span class="s2">],</span><span class="s3">implements</span><span class="s2">:</span><span class="s1">t</span><span class="s2">}}),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">all</span><span class="s2">.</span><span class="s1">$comment</span><span class="s2">={</span><span class="s1">keyword</span><span class="s2">:</span><span class="s4">&quot;$comment&quot;</span><span class="s2">,</span><span class="s1">code</span><span class="s2">:</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$comment</span><span class="s2">},</span><span class="s1">e</span><span class="s2">.</span><span class="s1">type</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">types</span><span class="s2">[</span><span class="s1">e</span><span class="s2">.</span><span class="s1">type</span><span class="s2">]=</span><span class="s1">e</span><span class="s2">)}),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">=</span><span class="s1">i</span><span class="s2">(</span><span class="s1">s</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">([</span><span class="s4">&quot;$schema&quot;</span><span class="s2">,</span><span class="s4">&quot;$id&quot;</span><span class="s2">,</span><span class="s4">&quot;id&quot;</span><span class="s2">,</span><span class="s4">&quot;$data&quot;</span><span class="s2">,</span><span class="s4">&quot;$async&quot;</span><span class="s2">,</span><span class="s4">&quot;title&quot;</span><span class="s2">,</span><span class="s4">&quot;description&quot;</span><span class="s2">,</span><span class="s4">&quot;default&quot;</span><span class="s2">,</span><span class="s4">&quot;definitions&quot;</span><span class="s2">,</span><span class="s4">&quot;examples&quot;</span><span class="s2">,</span><span class="s4">&quot;readOnly&quot;</span><span class="s2">,</span><span class="s4">&quot;writeOnly&quot;</span><span class="s2">,</span><span class="s4">&quot;contentMediaType&quot;</span><span class="s2">,</span><span class="s4">&quot;contentEncoding&quot;</span><span class="s2">,</span><span class="s4">&quot;additionalItems&quot;</span><span class="s2">,</span><span class="s4">&quot;then&quot;</span><span class="s2">,</span><span class="s4">&quot;else&quot;</span><span class="s2">])),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">custom</span><span class="s2">={},</span><span class="s1">a</span><span class="s2">}},{</span><span class="s4">&quot;../dotjs&quot;</span><span class="s2">:</span><span class="s5">27</span><span class="s2">,</span><span class="s4">&quot;./util&quot;</span><span class="s2">:</span><span class="s5">10</span><span class="s2">}],</span><span class="s5">8</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./util&quot;</span><span class="s2">);</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">a</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s3">this</span><span class="s2">)}},{</span><span class="s4">&quot;./util&quot;</span><span class="s2">:</span><span class="s5">10</span><span class="s2">}],</span><span class="s5">9</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">s</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">;)</span><span class="s1">t</span><span class="s2">++,</span><span class="s5">55296</span><span class="s2">&lt;=(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">charCodeAt</span><span class="s2">(</span><span class="s1">s</span><span class="s2">++))&amp;&amp;</span><span class="s1">r</span><span class="s2">&lt;=</span><span class="s5">56319</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">&amp;&amp;</span><span class="s5">56320</span><span class="s2">==(</span><span class="s5">64512</span><span class="s2">&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">charCodeAt</span><span class="s2">(</span><span class="s1">s</span><span class="s2">)))&amp;&amp;</span><span class="s1">s</span><span class="s2">++;</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">10</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">function </span><span class="s1">i</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">a</span><span class="s2">?</span><span class="s4">&quot; !== &quot;</span><span class="s2">:</span><span class="s4">&quot; === &quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">a</span><span class="s2">?</span><span class="s4">&quot; || &quot;</span><span class="s2">:</span><span class="s4">&quot; &amp;&amp; &quot;</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">a</span><span class="s2">?</span><span class="s4">&quot;!&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">a</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">:</span><span class="s4">&quot;!&quot;</span><span class="s2">;</span><span class="s3">switch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">case</span><span class="s4">&quot;null&quot;</span><span class="s2">:</span><span class="s3">return </span><span class="s1">r</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;null&quot;</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;array&quot;</span><span class="s2">:</span><span class="s3">return </span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;Array.isArray(&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;object&quot;</span><span class="s2">:</span><span class="s3">return</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;typeof &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">'&quot;object&quot;'</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;Array.isArray(&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot;))&quot;</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;integer&quot;</span><span class="s2">:</span><span class="s3">return</span><span class="s4">&quot;(typeof &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">'&quot;number&quot;'</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; % 1)&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+(</span><span class="s1">t</span><span class="s2">?</span><span class="s1">o</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;isFinite(&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">)+</span><span class="s4">&quot;)&quot;</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;number&quot;</span><span class="s2">:</span><span class="s3">return</span><span class="s4">&quot;(typeof &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">'&quot;'</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">'&quot;'</span><span class="s2">+(</span><span class="s1">t</span><span class="s2">?</span><span class="s1">o</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;isFinite(&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">)+</span><span class="s4">&quot;)&quot;</span><span class="s2">;</span><span class="s3">default</span><span class="s2">:</span><span class="s3">return</span><span class="s4">&quot;typeof &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">'&quot;'</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">'&quot;'</span><span class="s2">}}</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">={</span><span class="s1">copy</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t </span><span class="s3">in </span><span class="s1">r</span><span class="s2">=</span><span class="s1">r</span><span class="s2">||{},</span><span class="s1">e</span><span class="s2">)</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">]=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">t</span><span class="s2">];</span><span class="s3">return </span><span class="s1">r</span><span class="s2">},</span><span class="s1">checkDataType</span><span class="s2">:</span><span class="s1">i</span><span class="s2">,</span><span class="s1">checkDataTypes</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){{</span><span class="s3">if</span><span class="s2">(</span><span class="s5">1</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">)</span><span class="s3">return </span><span class="s1">i</span><span class="s2">(</span><span class="s1">e</span><span class="s2">[</span><span class="s5">0</span><span class="s2">],</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">var </span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">n</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s3">for</span><span class="s2">(</span><span class="s1">a </span><span class="s3">in </span><span class="s1">o</span><span class="s2">.</span><span class="s1">array</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">object</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">o</span><span class="s2">.</span><span class="s1">null</span><span class="s2">?</span><span class="s4">&quot;(&quot;</span><span class="s2">:</span><span class="s4">&quot;(!&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; || &quot;</span><span class="s2">,</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot;typeof &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">' !== &quot;object&quot;)'</span><span class="s2">,</span><span class="s3">delete </span><span class="s1">o</span><span class="s2">.</span><span class="s1">null</span><span class="s2">,</span><span class="s3">delete </span><span class="s1">o</span><span class="s2">.</span><span class="s1">array</span><span class="s2">,</span><span class="s3">delete </span><span class="s1">o</span><span class="s2">.</span><span class="s1">object</span><span class="s2">),</span><span class="s1">o</span><span class="s2">.</span><span class="s1">number</span><span class="s2">&amp;&amp;</span><span class="s3">delete </span><span class="s1">o</span><span class="s2">.</span><span class="s1">integer</span><span class="s2">,</span><span class="s1">o</span><span class="s2">)</span><span class="s1">s</span><span class="s2">+=(</span><span class="s1">s</span><span class="s2">?</span><span class="s4">&quot; &amp;&amp; &quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">)+</span><span class="s1">i</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">return </span><span class="s1">s</span><span class="s2">}},</span><span class="s1">coerceToTypes</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=[],</span><span class="s1">a</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">a</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">a</span><span class="s2">++){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">a</span><span class="s2">];(</span><span class="s1">o</span><span class="s2">[</span><span class="s1">s</span><span class="s2">]||</span><span class="s4">&quot;array&quot;</span><span class="s2">===</span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;array&quot;</span><span class="s2">===</span><span class="s1">s</span><span class="s2">)&amp;&amp;(</span><span class="s1">t</span><span class="s2">[</span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">]=</span><span class="s1">s</span><span class="s2">)}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">)</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(</span><span class="s1">o</span><span class="s2">[</span><span class="s1">r</span><span class="s2">])</span><span class="s3">return</span><span class="s2">[</span><span class="s1">r</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;array&quot;</span><span class="s2">===</span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;array&quot;</span><span class="s2">===</span><span class="s1">r</span><span class="s2">)</span><span class="s3">return</span><span class="s2">[</span><span class="s4">&quot;array&quot;</span><span class="s2">]}},</span><span class="s1">toHash</span><span class="s2">:</span><span class="s1">n</span><span class="s2">,</span><span class="s1">getProperty</span><span class="s2">:</span><span class="s1">h</span><span class="s2">,</span><span class="s1">escapeQuotes</span><span class="s2">:</span><span class="s1">l</span><span class="s2">,</span><span class="s1">equal</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;fast-deep-equal&quot;</span><span class="s2">),</span><span class="s1">ucs2length</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./ucs2length&quot;</span><span class="s2">),</span><span class="s1">varOccurences</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;[^0-9]&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s4">&quot;g&quot;</span><span class="s2">));</span><span class="s3">return </span><span class="s1">t</span><span class="s2">?</span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">:</span><span class="s5">0</span><span class="s2">},</span><span class="s1">varReplace</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">return </span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;([^0-9])&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/\$/g</span><span class="s2">,</span><span class="s4">&quot;$$$$&quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+</span><span class="s4">&quot;$1&quot;</span><span class="s2">)},</span><span class="s1">schemaHasRules</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s1">e</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t </span><span class="s3">in </span><span class="s1">e</span><span class="s2">)</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">])</span><span class="s3">return</span><span class="s2">!</span><span class="s5">0</span><span class="s2">},</span><span class="s1">schemaHasRulesExcept</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;not&quot;</span><span class="s2">!=</span><span class="s1">t</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a </span><span class="s3">in </span><span class="s1">e</span><span class="s2">)</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">!=</span><span class="s1">t</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">[</span><span class="s1">a</span><span class="s2">])</span><span class="s3">return</span><span class="s2">!</span><span class="s5">0</span><span class="s2">},</span><span class="s1">schemaUnknownRules</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">)</span><span class="s3">return</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t </span><span class="s3">in </span><span class="s1">e</span><span class="s2">)</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">])</span><span class="s3">return </span><span class="s1">t</span><span class="s2">},</span><span class="s1">toQuotedString</span><span class="s2">:</span><span class="s1">c</span><span class="s2">,</span><span class="s1">getPathExpr</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">){</span><span class="s3">return </span><span class="s1">u</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">?</span><span class="s4">&quot;'/' + &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+(</span><span class="s1">a</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">:</span><span class="s4">&quot;.replace(/~/g, '~0').replace(/</span><span class="s3">\\</span><span class="s4">//g, '~1')&quot;</span><span class="s2">):</span><span class="s1">a</span><span class="s2">?</span><span class="s4">&quot;'[' + &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; + ']'&quot;</span><span class="s2">:</span><span class="s4">&quot;'[</span><span class="s3">\\</span><span class="s4">'' + &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; + '</span><span class="s3">\\</span><span class="s4">']'&quot;</span><span class="s2">)},</span><span class="s1">getPath</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">c</span><span class="s2">(</span><span class="s1">t</span><span class="s2">?</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">(</span><span class="s1">r</span><span class="s2">):</span><span class="s1">h</span><span class="s2">(</span><span class="s1">r</span><span class="s2">));</span><span class="s3">return </span><span class="s1">u</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">a</span><span class="s2">)},</span><span class="s1">getData</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;&quot;</span><span class="s2">===</span><span class="s1">e</span><span class="s2">)</span><span class="s3">return</span><span class="s4">&quot;rootData&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;/&quot;</span><span class="s2">==</span><span class="s1">e</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]){</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">d</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Invalid JSON-pointer: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">);</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s4">&quot;rootData&quot;</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(!(</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">p</span><span class="s2">)))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Invalid JSON-pointer: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">=+</span><span class="s1">i</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s4">&quot;#&quot;</span><span class="s2">==(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">i</span><span class="s2">[</span><span class="s5">2</span><span class="s2">])){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">&lt;=</span><span class="s1">a</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Cannot access property/index &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; levels up, current level is &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">);</span><span class="s3">return </span><span class="s1">t</span><span class="s2">[</span><span class="s1">r</span><span class="s2">-</span><span class="s1">a</span><span class="s2">]}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Cannot access data &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; levels up, current level is &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">o</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">r</span><span class="s2">-</span><span class="s1">a</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),!</span><span class="s1">s</span><span class="s2">)</span><span class="s3">return </span><span class="s1">o</span><span class="s2">}</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s1">o</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">s</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;/&quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">c</span><span class="s2">&lt;</span><span class="s1">l</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">c</span><span class="s2">++){</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s1">l</span><span class="s2">[</span><span class="s1">c</span><span class="s2">];</span><span class="s1">u</span><span class="s2">&amp;&amp;(</span><span class="s1">o</span><span class="s2">+=</span><span class="s1">h</span><span class="s2">(</span><span class="s1">m</span><span class="s2">(</span><span class="s1">u</span><span class="s2">)),</span><span class="s1">n</span><span class="s2">+=</span><span class="s4">&quot; &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">n</span><span class="s2">},</span><span class="s1">unescapeFragment</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">m</span><span class="s2">(</span><span class="s1">decodeURIComponent</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))},</span><span class="s1">unescapeJsonPointer</span><span class="s2">:</span><span class="s1">m</span><span class="s2">,</span><span class="s1">escapeFragment</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">encodeURIComponent</span><span class="s2">(</span><span class="s1">f</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))},</span><span class="s1">escapeJsonPointer</span><span class="s2">:</span><span class="s1">f</span><span class="s2">};</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=</span><span class="s1">n</span><span class="s2">([</span><span class="s4">&quot;string&quot;</span><span class="s2">,</span><span class="s4">&quot;number&quot;</span><span class="s2">,</span><span class="s4">&quot;integer&quot;</span><span class="s2">,</span><span class="s4">&quot;boolean&quot;</span><span class="s2">,</span><span class="s4">&quot;null&quot;</span><span class="s2">]);</span><span class="s3">function </span><span class="s1">n</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">={},</span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">t</span><span class="s2">++)</span><span class="s1">r</span><span class="s2">[</span><span class="s1">e</span><span class="s2">[</span><span class="s1">t</span><span class="s2">]]=!</span><span class="s5">0</span><span class="s2">;</span><span class="s3">return </span><span class="s1">r</span><span class="s2">}</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s6">/^[a-z$_][a-z$_0-9]*$/i</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s6">/'|\\/g</span><span class="s2">;</span><span class="s3">function </span><span class="s1">h</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;number&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">?</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">:</span><span class="s1">a</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)?</span><span class="s4">&quot;.&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">:</span><span class="s4">&quot;['&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)+</span><span class="s4">&quot;']&quot;</span><span class="s2">}</span><span class="s3">function </span><span class="s1">l</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">$&amp;&quot;</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/\n/g</span><span class="s2">,</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">n&quot;</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/\r/g</span><span class="s2">,</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">r&quot;</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/\f/g</span><span class="s2">,</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">f&quot;</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/\t/g</span><span class="s2">,</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">t&quot;</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">c</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;'&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)+</span><span class="s4">&quot;'&quot;</span><span class="s2">}</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s6">/^\/(?:[^~]|~0|~1)*$/</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s6">/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/</span><span class="s2">;</span><span class="s3">function </span><span class="s1">u</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return</span><span class="s4">'&quot;&quot;'</span><span class="s2">==</span><span class="s1">e</span><span class="s2">?</span><span class="s1">r</span><span class="s2">:(</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot; + &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/([^\\])' \+ '/g</span><span class="s2">,</span><span class="s4">&quot;$1&quot;</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">f</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/~/g</span><span class="s2">,</span><span class="s4">&quot;~0&quot;</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/\//g</span><span class="s2">,</span><span class="s4">&quot;~1&quot;</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">m</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/~1/g</span><span class="s2">,</span><span class="s4">&quot;/&quot;</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/~0/g</span><span class="s2">,</span><span class="s4">&quot;~&quot;</span><span class="s2">)}},{</span><span class="s4">&quot;./ucs2length&quot;</span><span class="s2">:</span><span class="s5">9</span><span class="s2">,</span><span class="s4">&quot;fast-deep-equal&quot;</span><span class="s2">:</span><span class="s5">42</span><span class="s2">}],</span><span class="s5">11</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">l</span><span class="s2">=[</span><span class="s4">&quot;multipleOf&quot;</span><span class="s2">,</span><span class="s4">&quot;maximum&quot;</span><span class="s2">,</span><span class="s4">&quot;exclusiveMaximum&quot;</span><span class="s2">,</span><span class="s4">&quot;minimum&quot;</span><span class="s2">,</span><span class="s4">&quot;exclusiveMinimum&quot;</span><span class="s2">,</span><span class="s4">&quot;maxLength&quot;</span><span class="s2">,</span><span class="s4">&quot;minLength&quot;</span><span class="s2">,</span><span class="s4">&quot;pattern&quot;</span><span class="s2">,</span><span class="s4">&quot;additionalItems&quot;</span><span class="s2">,</span><span class="s4">&quot;maxItems&quot;</span><span class="s2">,</span><span class="s4">&quot;minItems&quot;</span><span class="s2">,</span><span class="s4">&quot;uniqueItems&quot;</span><span class="s2">,</span><span class="s4">&quot;maxProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;minProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;required&quot;</span><span class="s2">,</span><span class="s4">&quot;additionalProperties&quot;</span><span class="s2">,</span><span class="s4">&quot;enum&quot;</span><span class="s2">,</span><span class="s4">&quot;format&quot;</span><span class="s2">,</span><span class="s4">&quot;const&quot;</span><span class="s2">];</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">t</span><span class="s2">++){</span><span class="s1">e</span><span class="s2">=</span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">e</span><span class="s2">));</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">].</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;/&quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s5">1</span><span class="s2">;</span><span class="s1">o</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">o</span><span class="s2">++)</span><span class="s1">s</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s1">a</span><span class="s2">[</span><span class="s1">o</span><span class="s2">]];</span><span class="s3">for</span><span class="s2">(</span><span class="s1">o</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">o</span><span class="s2">&lt;</span><span class="s1">l</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">o</span><span class="s2">++){</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">l</span><span class="s2">[</span><span class="s1">o</span><span class="s2">],</span><span class="s1">n</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s1">i</span><span class="s2">];</span><span class="s1">n</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">[</span><span class="s1">i</span><span class="s2">]={</span><span class="s1">anyOf</span><span class="s2">:[</span><span class="s1">n</span><span class="s2">,{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#&quot;</span><span class="s2">}]})}}</span><span class="s3">return </span><span class="s1">e</span><span class="s2">}},{}],</span><span class="s5">12</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./refs/json-schema-draft-07.json&quot;</span><span class="s2">);</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">={</span><span class="s1">$id</span><span class="s2">:</span><span class="s4">&quot;https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js&quot;</span><span class="s2">,</span><span class="s1">definitions</span><span class="s2">:{</span><span class="s1">simpleTypes</span><span class="s2">:</span><span class="s1">a</span><span class="s2">.</span><span class="s1">definitions</span><span class="s2">.</span><span class="s1">simpleTypes</span><span class="s2">},</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s1">dependencies</span><span class="s2">:{</span><span class="s1">schema</span><span class="s2">:[</span><span class="s4">&quot;validate&quot;</span><span class="s2">],</span><span class="s1">$data</span><span class="s2">:[</span><span class="s4">&quot;validate&quot;</span><span class="s2">],</span><span class="s1">statements</span><span class="s2">:[</span><span class="s4">&quot;inline&quot;</span><span class="s2">],</span><span class="s1">valid</span><span class="s2">:{</span><span class="s1">not</span><span class="s2">:{</span><span class="s1">required</span><span class="s2">:[</span><span class="s4">&quot;macro&quot;</span><span class="s2">]}}},</span><span class="s1">properties</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s1">a</span><span class="s2">.</span><span class="s1">properties</span><span class="s2">.</span><span class="s1">type</span><span class="s2">,</span><span class="s1">schema</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">},</span><span class="s1">statements</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">},</span><span class="s1">dependencies</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s1">items</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">}},</span><span class="s1">metaSchema</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;object&quot;</span><span class="s2">},</span><span class="s1">modifying</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">},</span><span class="s1">valid</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">},</span><span class="s1">$data</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">},</span><span class="s1">async</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">},</span><span class="s1">errors</span><span class="s2">:{</span><span class="s1">anyOf</span><span class="s2">:[{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">},{</span><span class="s3">const</span><span class="s2">:</span><span class="s4">&quot;full&quot;</span><span class="s2">}]}}}},{</span><span class="s4">&quot;./refs/json-schema-draft-07.json&quot;</span><span class="s2">:</span><span class="s5">41</span><span class="s2">}],</span><span class="s5">13</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">p</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">f</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">h</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">y</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">d</span><span class="s2">&amp;&amp;</span><span class="s1">d</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">g</span><span class="s2">=</span><span class="s1">y</span><span class="s2">?(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">d</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">h</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">):</span><span class="s1">d</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s4">&quot;maximum&quot;</span><span class="s2">==</span><span class="s1">r</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s1">P</span><span class="s2">?</span><span class="s4">&quot;exclusiveMaximum&quot;</span><span class="s2">:</span><span class="s4">&quot;exclusiveMinimum&quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">E</span><span class="s2">],</span><span class="s1">b</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">w</span><span class="s2">&amp;&amp;</span><span class="s1">w</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">S</span><span class="s2">=</span><span class="s1">P</span><span class="s2">?</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">:</span><span class="s4">&quot;&gt;&quot;</span><span class="s2">,</span><span class="s1">_</span><span class="s2">=</span><span class="s1">P</span><span class="s2">?</span><span class="s4">&quot;&gt;&quot;</span><span class="s2">:</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">,</span><span class="s1">F</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">y</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;number&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">d</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">d</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; must be number&quot;</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">b</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">w</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;number&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">w</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;boolean&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">w</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">E</span><span class="s2">+</span><span class="s4">&quot; must be number or boolean&quot;</span><span class="s2">);</span><span class="s1">b</span><span class="s2">?(</span><span class="s1">o</span><span class="s2">=</span><span class="s4">&quot;exclIsNumber&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s4">&quot;' + &quot;</span><span class="s2">+(</span><span class="s1">n</span><span class="s2">=</span><span class="s4">&quot;op&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">)+</span><span class="s4">&quot; + '&quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; var schemaExcl&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">w</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">h</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">))+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s1">F</span><span class="s2">=</span><span class="s1">E</span><span class="s2">,(</span><span class="s1">l</span><span class="s2">=</span><span class="s1">l</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+(</span><span class="s1">a</span><span class="s2">=</span><span class="s4">&quot;exclusive&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">)+</span><span class="s4">&quot;; var &quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;exclType&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">)+</span><span class="s4">&quot; = typeof &quot;</span><span class="s2">+(</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;schemaExcl&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">)+</span><span class="s4">&quot;; if (&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot; != 'boolean' &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot; != 'undefined' &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot; != 'number') { &quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; { keyword: '&quot;</span><span class="s2">+(</span><span class="s1">F</span><span class="s2">||</span><span class="s4">&quot;_exclusiveLimit&quot;</span><span class="s2">)+</span><span class="s4">&quot;' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)+</span><span class="s4">&quot; , params: {} &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; , message: '&quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">+</span><span class="s4">&quot; should be boolean' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">x</span><span class="s2">=</span><span class="s1">c</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">c</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">m</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; } else if ( &quot;</span><span class="s2">,</span><span class="s1">y</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; typeof &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; != 'number') || &quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot; == 'number' ? ( (&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; === undefined || &quot;</span><span class="s2">+</span><span class="s1">t</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;= &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;) ? &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;= &quot;</span><span class="s2">+</span><span class="s1">t</span><span class="s2">+</span><span class="s4">&quot; : &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; ) : ( (&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">t</span><span class="s2">+</span><span class="s4">&quot; === true) ? &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;= &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; : &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; ) || &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; !== &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { var op&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; ? '&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;' : '&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;='; &quot;</span><span class="s2">,</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">d</span><span class="s2">&amp;&amp;(</span><span class="s1">f</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+(</span><span class="s1">F</span><span class="s2">=</span><span class="s1">E</span><span class="s2">),</span><span class="s1">g</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s1">b</span><span class="s2">)):(</span><span class="s1">i</span><span class="s2">=</span><span class="s1">S</span><span class="s2">,(</span><span class="s1">o</span><span class="s2">=</span><span class="s4">&quot;number&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">w</span><span class="s2">)&amp;&amp;</span><span class="s1">y</span><span class="s2">?(</span><span class="s1">n</span><span class="s2">=</span><span class="s4">&quot;'&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;'&quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">,</span><span class="s1">y</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; typeof &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; != 'number') || &quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; ( &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; === undefined || &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;= &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; ? &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;= &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot; : &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; ) || &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; !== &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">):(</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">d</span><span class="s2">?(</span><span class="s1">a</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+(</span><span class="s1">F</span><span class="s2">=</span><span class="s1">E</span><span class="s2">),</span><span class="s1">g</span><span class="s2">=</span><span class="s1">w</span><span class="s2">,</span><span class="s1">_</span><span class="s2">+=</span><span class="s4">&quot;=&quot;</span><span class="s2">):(</span><span class="s1">o</span><span class="s2">&amp;&amp;(</span><span class="s1">g</span><span class="s2">=</span><span class="s1">Math</span><span class="s2">[</span><span class="s1">P</span><span class="s2">?</span><span class="s4">&quot;min&quot;</span><span class="s2">:</span><span class="s4">&quot;max&quot;</span><span class="s2">](</span><span class="s1">w</span><span class="s2">,</span><span class="s1">d</span><span class="s2">)),</span><span class="s1">w</span><span class="s2">===(!</span><span class="s1">o</span><span class="s2">||</span><span class="s1">g</span><span class="s2">)?(</span><span class="s1">a</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+(</span><span class="s1">F</span><span class="s2">=</span><span class="s1">E</span><span class="s2">),</span><span class="s1">_</span><span class="s2">+=</span><span class="s4">&quot;=&quot;</span><span class="s2">):(</span><span class="s1">a</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot;=&quot;</span><span class="s2">)),</span><span class="s1">n</span><span class="s2">=</span><span class="s4">&quot;'&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;'&quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">,</span><span class="s1">y</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; typeof &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; != 'number') || &quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; || &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; !== &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">)),</span><span class="s1">F</span><span class="s2">=</span><span class="s1">F</span><span class="s2">||</span><span class="s1">r</span><span class="s2">,(</span><span class="s1">l</span><span class="s2">=</span><span class="s1">l</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">c</span><span class="s2">),</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; { keyword: '&quot;</span><span class="s2">+(</span><span class="s1">F</span><span class="s2">||</span><span class="s4">&quot;_limit&quot;</span><span class="s2">)+</span><span class="s4">&quot;' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)+</span><span class="s4">&quot; , params: { comparison: &quot;</span><span class="s2">+</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;, limit: &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;, exclusive: &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should be &quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">+=</span><span class="s1">y</span><span class="s2">?</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">:</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;'&quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; , schema:  &quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">+=</span><span class="s1">y</span><span class="s2">?</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">,</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot;         , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">x</span><span class="s2">=</span><span class="s1">c</span><span class="s2">;</span><span class="s3">return </span><span class="s1">c</span><span class="s2">=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">c</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">m</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">m</span><span class="s2">&amp;&amp;(</span><span class="s1">c</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">}},{}],</span><span class="s5">14</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">u</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">):</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">u</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;number&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; must be number&quot;</span><span class="s2">);</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;if ( &quot;</span><span class="s2">,</span><span class="s1">u</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; typeof &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; != 'number') || &quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s1">r</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s1">p</span><span class="s2">||[];</span><span class="s1">p</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length &quot;</span><span class="s2">+(</span><span class="s4">&quot;maxItems&quot;</span><span class="s2">==</span><span class="s1">r</span><span class="s2">?</span><span class="s4">&quot;&gt;&quot;</span><span class="s2">:</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: '&quot;</span><span class="s2">+(</span><span class="s1">d</span><span class="s2">||</span><span class="s4">&quot;_limitItems&quot;</span><span class="s2">)+</span><span class="s4">&quot;' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { limit: &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should NOT have &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;maxItems&quot;</span><span class="s2">==</span><span class="s1">r</span><span class="s2">?</span><span class="s4">&quot;more&quot;</span><span class="s2">:</span><span class="s4">&quot;fewer&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; than &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; + '&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; items' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema:  &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;         , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;} &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">15</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">u</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">):</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">u</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;number&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; must be number&quot;</span><span class="s2">);</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;if ( &quot;</span><span class="s2">,</span><span class="s1">u</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; typeof &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; != 'number') || &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">unicode</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length &quot;</span><span class="s2">:</span><span class="s4">&quot; ucs2length(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;) &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s1">r</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s1">p</span><span class="s2">||[];</span><span class="s1">p</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+(</span><span class="s4">&quot;maxLength&quot;</span><span class="s2">==</span><span class="s1">r</span><span class="s2">?</span><span class="s4">&quot;&gt;&quot;</span><span class="s2">:</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: '&quot;</span><span class="s2">+(</span><span class="s1">d</span><span class="s2">||</span><span class="s4">&quot;_limitLength&quot;</span><span class="s2">)+</span><span class="s4">&quot;' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { limit: &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should NOT be &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;maxLength&quot;</span><span class="s2">==</span><span class="s1">r</span><span class="s2">?</span><span class="s4">&quot;longer&quot;</span><span class="s2">:</span><span class="s4">&quot;shorter&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; than &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; + '&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; characters' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema:  &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;         , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;} &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">16</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">u</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">):</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">u</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;number&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; must be number&quot;</span><span class="s2">);</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;if ( &quot;</span><span class="s2">,</span><span class="s1">u</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; typeof &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; != 'number') || &quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s1">r</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s1">p</span><span class="s2">||[];</span><span class="s1">p</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; Object.keys(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;).length &quot;</span><span class="s2">+(</span><span class="s4">&quot;maxProperties&quot;</span><span class="s2">==</span><span class="s1">r</span><span class="s2">?</span><span class="s4">&quot;&gt;&quot;</span><span class="s2">:</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: '&quot;</span><span class="s2">+(</span><span class="s1">d</span><span class="s2">||</span><span class="s4">&quot;_limitProperties&quot;</span><span class="s2">)+</span><span class="s4">&quot;' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { limit: &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should NOT have &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;maxProperties&quot;</span><span class="s2">==</span><span class="s1">r</span><span class="s2">?</span><span class="s4">&quot;more&quot;</span><span class="s2">:</span><span class="s4">&quot;fewer&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; than &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; + '&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; properties' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema:  &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;         , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;} &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">17</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">l</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s1">n</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">n</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">u</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">a</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">p</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">f</span><span class="s2">&lt;</span><span class="s1">m</span><span class="s2">;)</span><span class="s1">p</span><span class="s2">=</span><span class="s1">d</span><span class="s2">[</span><span class="s1">f</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">],(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">p</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">p</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">p</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">p</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))&amp;&amp;(</span><span class="s1">h</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">p</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">u</span><span class="s2">,</span><span class="s1">i</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">));</span><span class="s3">return </span><span class="s1">i</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">h</span><span class="s2">?</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">:</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">0</span><span class="s2">,-</span><span class="s5">1</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">18</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">e</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">r</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">every</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">e</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">e</span><span class="s2">:</span><span class="s1">r</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">)})){</span><span class="s3">var </span><span class="s1">m</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">;</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; = errors; var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = false;  &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">v</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">;</span><span class="s3">var </span><span class="s1">y</span><span class="s2">=</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">y</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">g</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s1">y</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">P</span><span class="s2">&lt;</span><span class="s1">E</span><span class="s2">;)</span><span class="s1">g</span><span class="s2">=</span><span class="s1">y</span><span class="s2">[</span><span class="s1">P</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">],</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">g</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">m</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; || &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;; if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">p</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">v</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) {   var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'anyOf' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: {} &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should match some schema in anyOf' &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,!</span><span class="s1">r</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError(vErrors); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = vErrors; return false; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } else {  errors = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;; if (vErrors !== null) { if (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;) vErrors.length = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;; else vErrors = null; } &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">)}</span><span class="s3">else </span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">);</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">19</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]);</span><span class="s3">return</span><span class="s2">!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$comment</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; console.log(&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;);&quot;</span><span class="s2">:</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$comment</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; self._opts.$comment(&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;, &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot;, validate.root.schema);&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">20</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">;</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">);</span><span class="s1">h</span><span class="s2">||(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;;&quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s1">d</span><span class="s2">||[];</span><span class="s1">d</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = equal(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;); if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) {   &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'const' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { allowedValue: schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should be equal to constant' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">p</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">21</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">p</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,</span><span class="s1">m</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;i&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">g</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">+</span><span class="s5">1</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">o</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">o</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">o</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">);</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; = errors;var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;;&quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">?(</span><span class="s1">p</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">o</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = false; for (var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = 0; &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; &lt; &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;++) { &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">),</span><span class="s1">f</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">g</span><span class="s2">]=</span><span class="s1">y</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">),</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">E</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">m</span><span class="s2">,</span><span class="s1">P</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">m</span><span class="s2">,</span><span class="s1">P</span><span class="s2">,</span><span class="s1">f</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) break; }  &quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">p</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  if (!&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) {&quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length == 0) {&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">b</span><span class="s2">=</span><span class="s1">b</span><span class="s2">||[];</span><span class="s1">b</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'contains' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: {} &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should contain a valid item' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">S</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } else { &quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  errors = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;; if (vErrors !== null) { if (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;) vErrors.length = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;; else vErrors = null; } &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">22</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">d</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">p</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">u</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">,</span><span class="s1">g</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">h</span><span class="s2">&amp;&amp;</span><span class="s1">h</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s1">g</span><span class="s2">?(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">u</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">):</span><span class="s1">h</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s3">this</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s4">&quot;definition&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">,</span><span class="s1">b</span><span class="s2">=</span><span class="s1">E</span><span class="s2">.</span><span class="s1">definition</span><span class="s2">,</span><span class="s1">S</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">g</span><span class="s2">&amp;&amp;</span><span class="s1">b</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">){</span><span class="s3">var </span><span class="s1">_</span><span class="s2">=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">;</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot; = RULES.custom['&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot;'].definition; var &quot;</span><span class="s2">+(</span><span class="s1">n</span><span class="s2">=</span><span class="s4">&quot;keywordValidate&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">)+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;.validate;&quot;</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(!(</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">useCustomRule</span><span class="s2">(</span><span class="s1">E</span><span class="s2">,</span><span class="s1">h</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">e</span><span class="s2">)))</span><span class="s3">return</span><span class="s2">;</span><span class="s1">P</span><span class="s2">=</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">code</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">inline</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">macro</span><span class="s2">}</span><span class="s3">var </span><span class="s1">F</span><span class="s2">,</span><span class="s1">x</span><span class="s2">,</span><span class="s1">R</span><span class="s2">,</span><span class="s1">$</span><span class="s2">,</span><span class="s1">j</span><span class="s2">,</span><span class="s1">D</span><span class="s2">,</span><span class="s1">O</span><span class="s2">,</span><span class="s1">I</span><span class="s2">,</span><span class="s1">A</span><span class="s2">,</span><span class="s1">k</span><span class="s2">,</span><span class="s1">C</span><span class="s2">=</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;.errors&quot;</span><span class="s2">,</span><span class="s1">L</span><span class="s2">=</span><span class="s4">&quot;i&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">,</span><span class="s1">N</span><span class="s2">=</span><span class="s4">&quot;ruleErr&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">,</span><span class="s1">q</span><span class="s2">=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">async</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">q</span><span class="s2">&amp;&amp;!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;async keyword in sync schema&quot;</span><span class="s2">);</span><span class="s3">return </span><span class="s1">s</span><span class="s2">||</span><span class="s1">o</span><span class="s2">||(</span><span class="s1">l</span><span class="s2">+=</span><span class="s1">C</span><span class="s2">+</span><span class="s4">&quot; = null;&quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = errors;var &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;;&quot;</span><span class="s2">,</span><span class="s1">g</span><span class="s2">&amp;&amp;</span><span class="s1">b</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;(</span><span class="s1">S</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot; === undefined) { &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = true; } else { &quot;</span><span class="s2">,</span><span class="s1">_</span><span class="s2">&amp;&amp;(</span><span class="s1">S</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;.validateSchema(&quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot;); if (&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">)),</span><span class="s1">s</span><span class="s2">?</span><span class="s1">l</span><span class="s2">+=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">statements</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">:</span><span class="s1">o</span><span class="s2">?(</span><span class="s1">S</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,(</span><span class="s1">F</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)).</span><span class="s1">level</span><span class="s2">++,</span><span class="s1">x</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">F</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">,</span><span class="s1">F</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">R</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">F</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">$</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">F</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/validate\.schema/g</span><span class="s2">,</span><span class="s1">n</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">F</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">R</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">$</span><span class="s2">):((</span><span class="s1">I</span><span class="s2">=</span><span class="s1">I</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">l</span><span class="s2">),</span><span class="s1">l</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;  &quot;</span><span class="s2">+</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;.call( &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">passContext</span><span class="s2">?</span><span class="s4">&quot;this&quot;</span><span class="s2">:</span><span class="s4">&quot;self&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s1">a</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">b</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">?</span><span class="s4">&quot; , &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s4">&quot; , &quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot; , &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; , validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; , (dataPath || '')&quot;</span><span class="s2">,</span><span class="s4">'&quot;&quot;'</span><span class="s2">!=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">),</span><span class="s1">O</span><span class="s2">=</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; , &quot;</span><span class="s2">+(</span><span class="s1">j</span><span class="s2">=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">u</span><span class="s2">-</span><span class="s5">1</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">):</span><span class="s4">&quot;parentData&quot;</span><span class="s2">)+</span><span class="s4">&quot; , &quot;</span><span class="s2">+(</span><span class="s1">D</span><span class="s2">=</span><span class="s1">u</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">u</span><span class="s2">]:</span><span class="s4">&quot;parentDataProperty&quot;</span><span class="s2">)+</span><span class="s4">&quot; , rootData )  &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">I</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">b</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">?(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">,</span><span class="s1">q</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;await &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">):</span><span class="s1">l</span><span class="s2">+=</span><span class="s1">q</span><span class="s2">?</span><span class="s4">&quot; var &quot;</span><span class="s2">+(</span><span class="s1">C</span><span class="s2">=</span><span class="s4">&quot;customErrors&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">)+</span><span class="s4">&quot; = null; try { &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = await &quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot;; } catch (e) { &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = false; if (e instanceof ValidationError) &quot;</span><span class="s2">+</span><span class="s1">C</span><span class="s2">+</span><span class="s4">&quot; = e.errors; else throw e; } &quot;</span><span class="s2">:</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">C</span><span class="s2">+</span><span class="s4">&quot; = null; &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">),</span><span class="s1">b</span><span class="s2">.</span><span class="s1">modifying</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">j</span><span class="s2">+</span><span class="s4">&quot;) &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">j</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;];&quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">,</span><span class="s1">b</span><span class="s2">.</span><span class="s1">valid</span><span class="s2">?</span><span class="s1">f</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">):(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">,</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">b</span><span class="s2">.</span><span class="s1">valid</span><span class="s2">?(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; !&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s1">o</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">:</span><span class="s1">v</span><span class="s2">):</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+!</span><span class="s1">b</span><span class="s2">.</span><span class="s1">valid</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">E</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">,(</span><span class="s1">I</span><span class="s2">=</span><span class="s1">I</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;) { &quot;</span><span class="s2">),(</span><span class="s1">I</span><span class="s2">=</span><span class="s1">I</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">l</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; { keyword: '&quot;</span><span class="s2">+(</span><span class="s1">t</span><span class="s2">||</span><span class="s4">&quot;custom&quot;</span><span class="s2">)+</span><span class="s4">&quot;' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot; , params: { keyword: '&quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should pass </span><span class="s3">\&quot;</span><span class="s4">&quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\&quot; </span><span class="s4">keyword validation' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">A</span><span class="s2">=</span><span class="s1">l</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">I</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">k</span><span class="s2">=</span><span class="s1">l</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">f</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">A</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">A</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">A</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">I</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">s</span><span class="s2">?</span><span class="s1">b</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">?</span><span class="s4">&quot;full&quot;</span><span class="s2">!=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;  for (var &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;=&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;&lt;errors; &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;++) { var &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot; = vErrors[&quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;]; if (&quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.dataPath === undefined) &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.dataPath = (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot;; if (&quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.schemaPath === undefined) { &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">'.schemaPath = &quot;'</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">'&quot;; } '</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.schema = &quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.data = &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">b</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">?</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">k</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">:(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; == errors) { &quot;</span><span class="s2">+</span><span class="s1">k</span><span class="s2">+</span><span class="s4">&quot; } else {  for (var &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;=&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;&lt;errors; &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;++) { var &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot; = vErrors[&quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;]; if (&quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.dataPath === undefined) &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.dataPath = (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot;; if (&quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.schemaPath === undefined) { &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">'.schemaPath = &quot;'</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">'&quot;; } '</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.schema = &quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.data = &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; } } &quot;</span><span class="s2">):</span><span class="s1">o</span><span class="s2">?(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;   var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; { keyword: '&quot;</span><span class="s2">+(</span><span class="s1">t</span><span class="s2">||</span><span class="s4">&quot;custom&quot;</span><span class="s2">)+</span><span class="s4">&quot;' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot; , params: { keyword: '&quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should pass </span><span class="s3">\&quot;</span><span class="s4">&quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\&quot; </span><span class="s4">keyword validation' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">f</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError(vErrors); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = vErrors; return false; &quot;</span><span class="s2">)):!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">b</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">?</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">k</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">:(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; if (Array.isArray(&quot;</span><span class="s2">+</span><span class="s1">C</span><span class="s2">+</span><span class="s4">&quot;)) { if (vErrors === null) vErrors = &quot;</span><span class="s2">+</span><span class="s1">C</span><span class="s2">+</span><span class="s4">&quot;; else vErrors = vErrors.concat(&quot;</span><span class="s2">+</span><span class="s1">C</span><span class="s2">+</span><span class="s4">&quot;); errors = vErrors.length;  for (var &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;=&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;&lt;errors; &quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;++) { var &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot; = vErrors[&quot;</span><span class="s2">+</span><span class="s1">L</span><span class="s2">+</span><span class="s4">&quot;]; if (&quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.dataPath === undefined) &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.dataPath = (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot;;  &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">'.schemaPath = &quot;'</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">'&quot;;  '</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.schema = &quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;.data = &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; } } else { &quot;</span><span class="s2">+</span><span class="s1">k</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">f</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">)),</span><span class="s1">l</span><span class="s2">}},{}],</span><span class="s5">23</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">d</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">p</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">m</span><span class="s2">={},</span><span class="s1">v</span><span class="s2">={},</span><span class="s1">y</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">ownProperties</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s1">I </span><span class="s3">in </span><span class="s1">o</span><span class="s2">){</span><span class="s4">&quot;__proto__&quot;</span><span class="s2">!=</span><span class="s1">I</span><span class="s2">&amp;&amp;(</span><span class="s1">k</span><span class="s2">=</span><span class="s1">o</span><span class="s2">[</span><span class="s1">I</span><span class="s2">],(</span><span class="s1">p</span><span class="s2">=</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">k</span><span class="s2">)?</span><span class="s1">v</span><span class="s2">:</span><span class="s1">m</span><span class="s2">)[</span><span class="s1">I</span><span class="s2">]=</span><span class="s1">k</span><span class="s2">)}</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = errors;&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">g</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s1">I </span><span class="s3">in </span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var missing&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;;&quot;</span><span class="s2">,</span><span class="s1">v</span><span class="s2">)</span><span class="s3">if</span><span class="s2">((</span><span class="s1">p</span><span class="s2">=</span><span class="s1">v</span><span class="s2">[</span><span class="s1">I</span><span class="s2">]).</span><span class="s1">length</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)+</span><span class="s4">&quot; !== undefined &quot;</span><span class="s2">,</span><span class="s1">y</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &amp;&amp; Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">){</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &amp;&amp; ( &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">P</span><span class="s2">=</span><span class="s1">p</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">P</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">E</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s1">P</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">E</span><span class="s2">&lt;</span><span class="s1">w</span><span class="s2">;){</span><span class="s1">R</span><span class="s2">=</span><span class="s1">P</span><span class="s2">[</span><span class="s1">E</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">],</span><span class="s1">E</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; ( ( &quot;</span><span class="s2">+(</span><span class="s1">O</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+(</span><span class="s1">D</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">R</span><span class="s2">)))+</span><span class="s4">&quot; === undefined &quot;</span><span class="s2">,</span><span class="s1">y</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || ! Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">R</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) &amp;&amp; (missing&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">?</span><span class="s1">R</span><span class="s2">:</span><span class="s1">D</span><span class="s2">)+</span><span class="s4">&quot;) ) &quot;</span><span class="s2">}</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;)) {  &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">b</span><span class="s2">=</span><span class="s4">&quot;missing&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">S</span><span class="s2">=</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot; + '&quot;</span><span class="s2">;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">g</span><span class="s2">,</span><span class="s1">b</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">):</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; + &quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">);</span><span class="s3">var </span><span class="s1">_</span><span class="s2">=</span><span class="s1">_</span><span class="s2">||[];</span><span class="s1">_</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'dependencies' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { property: '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)+</span><span class="s4">&quot;', missingProperty: '&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;', depsCount: &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">+</span><span class="s4">&quot;, deps: '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s5">1</span><span class="s2">==</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">?</span><span class="s1">p</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]:</span><span class="s1">p</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;, &quot;</span><span class="s2">))+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should have &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">==</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">?</span><span class="s4">&quot;property &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">p</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]):</span><span class="s4">&quot;properties &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">p</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;, &quot;</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; when property &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)+</span><span class="s4">&quot; is present' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">F</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">_</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; ) { &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">x</span><span class="s2">=</span><span class="s1">p</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">x</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">R</span><span class="s2">,</span><span class="s1">$</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">j</span><span class="s2">=</span><span class="s1">x</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">$</span><span class="s2">&lt;</span><span class="s1">j</span><span class="s2">;){</span><span class="s1">R</span><span class="s2">=</span><span class="s1">x</span><span class="s2">[</span><span class="s1">$</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">];</span><span class="s3">var </span><span class="s1">D</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">R</span><span class="s2">),</span><span class="s1">S</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">R</span><span class="s2">),</span><span class="s1">O</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s1">D</span><span class="s2">;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPath</span><span class="s2">(</span><span class="s1">g</span><span class="s2">,</span><span class="s1">R</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot; === undefined &quot;</span><span class="s2">,</span><span class="s1">y</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || ! Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">R</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) {  var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'dependencies' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { property: '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)+</span><span class="s4">&quot;', missingProperty: '&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;', depsCount: &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">+</span><span class="s4">&quot;, deps: '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s5">1</span><span class="s2">==</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">?</span><span class="s1">p</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]:</span><span class="s1">p</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;, &quot;</span><span class="s2">))+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should have &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">==</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">?</span><span class="s4">&quot;property &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">p</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]):</span><span class="s4">&quot;properties &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">p</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;, &quot;</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; when property &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)+</span><span class="s4">&quot; is present' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } &quot;</span><span class="s2">}}</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }   &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">d</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">)}</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">g</span><span class="s2">;</span><span class="s3">var </span><span class="s1">I</span><span class="s2">,</span><span class="s1">A</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s1">I </span><span class="s3">in </span><span class="s1">m</span><span class="s2">){</span><span class="s3">var </span><span class="s1">k</span><span class="s2">=</span><span class="s1">m</span><span class="s2">[</span><span class="s1">I</span><span class="s2">];(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">k</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">k</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">k</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">k</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = true; if ( &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)+</span><span class="s4">&quot; !== undefined &quot;</span><span class="s2">,</span><span class="s1">y</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &amp;&amp; Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">k</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">I</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeFragment</span><span class="s2">(</span><span class="s1">I</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">h</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">A</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }  &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">))}</span><span class="s3">return </span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;   &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; == errors) {&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">24</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=(</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">),</span><span class="s4">&quot;i&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">),</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">;</span><span class="s1">h</span><span class="s2">||(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; = validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;;&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;;&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; === undefined) &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = true; else if (!Array.isArray(schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;)) &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = false; else {&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = false;for (var &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;=0; &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;++) if (equal(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;])) { &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = true; break; }&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  }  &quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s1">f</span><span class="s2">||[];</span><span class="s1">f</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) {   &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'enum' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { allowedValues: schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should be equal to one of the allowed values' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">m</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">25</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">l</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">o</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">format</span><span class="s2">)</span><span class="s3">return </span><span class="s1">c</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">;</span><span class="s3">var </span><span class="s1">h</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">i</span><span class="s2">&amp;&amp;</span><span class="s1">i</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s1">d</span><span class="s2">?(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">i</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">):</span><span class="s1">i</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">unknownFormats</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">f</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">d</span><span class="s2">){</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+(</span><span class="s1">h</span><span class="s2">=</span><span class="s4">&quot;format&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">)+</span><span class="s4">&quot; = formats[&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;]; var &quot;</span><span class="s2">+(</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;isObject&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">)+</span><span class="s4">&quot; = typeof &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; == 'object' &amp;&amp; !(&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; instanceof RegExp) &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;.validate; var &quot;</span><span class="s2">+(</span><span class="s1">g</span><span class="s2">=</span><span class="s4">&quot;formatType&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">)+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;.type || 'string'; if (&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; var async&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;.async; &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;.validate; } if (  &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; typeof &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; != 'string') || &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">,</span><span class="s4">&quot;ignore&quot;</span><span class="s2">!=</span><span class="s1">f</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; &amp;&amp; !&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">m</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; &amp;&amp; self._opts.unknownFormats.indexOf(&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;) == -1 &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot;) || &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot; == '&quot;</span><span class="s2">+</span><span class="s1">t</span><span class="s2">+</span><span class="s4">&quot;' &amp;&amp; !(typeof &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; == 'function' ? &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; (async&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot; ? await &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) : &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;)) &quot;</span><span class="s2">:</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; : &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;.test(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;))))) {&quot;</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(!(</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">formats</span><span class="s2">[</span><span class="s1">i</span><span class="s2">])){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;ignore&quot;</span><span class="s2">==</span><span class="s1">f</span><span class="s2">)</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s4">'unknown format &quot;'</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">'&quot; ignored in schema at path &quot;'</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">'&quot;'</span><span class="s2">),</span><span class="s1">c</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">m</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s1">i</span><span class="s2">))</span><span class="s3">return </span><span class="s1">c</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">;</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">'unknown format &quot;'</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">'&quot; is used in schema at path &quot;'</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">'&quot;'</span><span class="s2">)}</span><span class="s3">var </span><span class="s1">v</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">g</span><span class="s2">=(</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">h</span><span class="s2">&amp;&amp;!(</span><span class="s1">h </span><span class="s3">instanceof </span><span class="s1">RegExp</span><span class="s2">)&amp;&amp;</span><span class="s1">h</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">)&amp;&amp;</span><span class="s1">h</span><span class="s2">.</span><span class="s1">type</span><span class="s2">||</span><span class="s4">&quot;string&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">v</span><span class="s2">&amp;&amp;(</span><span class="s1">y</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">h</span><span class="s2">.</span><span class="s1">async</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">),</span><span class="s1">g</span><span class="s2">!=</span><span class="s1">t</span><span class="s2">)</span><span class="s3">return </span><span class="s1">c</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">y</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;async format in sync schema&quot;</span><span class="s2">);</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; if (!(await &quot;</span><span class="s2">+(</span><span class="s1">P</span><span class="s2">=</span><span class="s4">&quot;formats&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)+</span><span class="s4">&quot;.validate&quot;</span><span class="s2">)+</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;))) { &quot;</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; if (! &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">P</span><span class="s2">=</span><span class="s4">&quot;formats&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">i</span><span class="s2">);</span><span class="s1">v</span><span class="s2">&amp;&amp;(</span><span class="s1">P</span><span class="s2">+=</span><span class="s4">&quot;.validate&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">h</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) &quot;</span><span class="s2">:</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot;.test(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot;) { &quot;</span><span class="s2">}}</span><span class="s3">var </span><span class="s1">E</span><span class="s2">=</span><span class="s1">E</span><span class="s2">||[];</span><span class="s1">E</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">a</span><span class="s2">),</span><span class="s1">a</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'format' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">l</span><span class="s2">)+</span><span class="s4">&quot; , params: { format:  &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">+=</span><span class="s1">d</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">i</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot;  } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should match format </span><span class="s3">\&quot;</span><span class="s4">&quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">+=</span><span class="s1">d</span><span class="s2">?</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; + '&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">i</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot;</span><span class="s3">\&quot;</span><span class="s4">' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; , schema:  &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">+=</span><span class="s1">d</span><span class="s2">?</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">n</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">i</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot;         , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">w</span><span class="s2">=</span><span class="s1">a</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">E</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">a</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">c</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">}},{}],</span><span class="s5">26</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">p</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">then</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">else</span><span class="s2">,</span><span class="s1">g</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">v</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">v</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">v</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">v</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">v</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">)),</span><span class="s1">P</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">y</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">y</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">y</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">y</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">y</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">)),</span><span class="s1">E</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">;</span><span class="s3">return </span><span class="s1">g</span><span class="s2">||</span><span class="s1">P</span><span class="s2">?(</span><span class="s1">d</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">o</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; = errors; var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = true;  &quot;</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">E</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  errors = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;; if (vErrors !== null) { if (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;) vErrors.length = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;; else vErrors = null; }  &quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">f</span><span class="s2">,</span><span class="s1">g</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;) {  &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">then</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.then&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/then&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">E</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s1">g</span><span class="s2">&amp;&amp;</span><span class="s1">P</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+(</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;ifClause&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot; = 'then'; &quot;</span><span class="s2">:</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;'then'&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">P</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">)):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">P</span><span class="s2">&amp;&amp;(</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">else</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.else&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/else&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">E</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s1">g</span><span class="s2">&amp;&amp;</span><span class="s1">P</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+(</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;ifClause&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot; = 'else'; &quot;</span><span class="s2">:</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;'else'&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) {   var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'if' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { failingKeyword: &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should match </span><span class="s3">\&quot;</span><span class="s4">' + &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; + '</span><span class="s3">\&quot; </span><span class="s4">schema' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError(vErrors); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = vErrors; return false; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }   &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">)):</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">27</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">={</span><span class="s1">$ref</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./ref&quot;</span><span class="s2">),</span><span class="s1">allOf</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./allOf&quot;</span><span class="s2">),</span><span class="s1">anyOf</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./anyOf&quot;</span><span class="s2">),</span><span class="s1">$comment</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./comment&quot;</span><span class="s2">),</span><span class="s3">const</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./const&quot;</span><span class="s2">),</span><span class="s1">contains</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./contains&quot;</span><span class="s2">),</span><span class="s1">dependencies</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./dependencies&quot;</span><span class="s2">),</span><span class="s3">enum</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./enum&quot;</span><span class="s2">),</span><span class="s1">format</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./format&quot;</span><span class="s2">),</span><span class="s3">if</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./if&quot;</span><span class="s2">),</span><span class="s1">items</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./items&quot;</span><span class="s2">),</span><span class="s1">maximum</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./_limit&quot;</span><span class="s2">),</span><span class="s1">minimum</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./_limit&quot;</span><span class="s2">),</span><span class="s1">maxItems</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./_limitItems&quot;</span><span class="s2">),</span><span class="s1">minItems</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./_limitItems&quot;</span><span class="s2">),</span><span class="s1">maxLength</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./_limitLength&quot;</span><span class="s2">),</span><span class="s1">minLength</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./_limitLength&quot;</span><span class="s2">),</span><span class="s1">maxProperties</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./_limitProperties&quot;</span><span class="s2">),</span><span class="s1">minProperties</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./_limitProperties&quot;</span><span class="s2">),</span><span class="s1">multipleOf</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./multipleOf&quot;</span><span class="s2">),</span><span class="s1">not</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./not&quot;</span><span class="s2">),</span><span class="s1">oneOf</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./oneOf&quot;</span><span class="s2">),</span><span class="s1">pattern</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./pattern&quot;</span><span class="s2">),</span><span class="s1">properties</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./properties&quot;</span><span class="s2">),</span><span class="s1">propertyNames</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./propertyNames&quot;</span><span class="s2">),</span><span class="s1">required</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./required&quot;</span><span class="s2">),</span><span class="s1">uniqueItems</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./uniqueItems&quot;</span><span class="s2">),</span><span class="s1">validate</span><span class="s2">:</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./validate&quot;</span><span class="s2">)}},{</span><span class="s4">&quot;./_limit&quot;</span><span class="s2">:</span><span class="s5">13</span><span class="s2">,</span><span class="s4">&quot;./_limitItems&quot;</span><span class="s2">:</span><span class="s5">14</span><span class="s2">,</span><span class="s4">&quot;./_limitLength&quot;</span><span class="s2">:</span><span class="s5">15</span><span class="s2">,</span><span class="s4">&quot;./_limitProperties&quot;</span><span class="s2">:</span><span class="s5">16</span><span class="s2">,</span><span class="s4">&quot;./allOf&quot;</span><span class="s2">:</span><span class="s5">17</span><span class="s2">,</span><span class="s4">&quot;./anyOf&quot;</span><span class="s2">:</span><span class="s5">18</span><span class="s2">,</span><span class="s4">&quot;./comment&quot;</span><span class="s2">:</span><span class="s5">19</span><span class="s2">,</span><span class="s4">&quot;./const&quot;</span><span class="s2">:</span><span class="s5">20</span><span class="s2">,</span><span class="s4">&quot;./contains&quot;</span><span class="s2">:</span><span class="s5">21</span><span class="s2">,</span><span class="s4">&quot;./dependencies&quot;</span><span class="s2">:</span><span class="s5">23</span><span class="s2">,</span><span class="s4">&quot;./enum&quot;</span><span class="s2">:</span><span class="s5">24</span><span class="s2">,</span><span class="s4">&quot;./format&quot;</span><span class="s2">:</span><span class="s5">25</span><span class="s2">,</span><span class="s4">&quot;./if&quot;</span><span class="s2">:</span><span class="s5">26</span><span class="s2">,</span><span class="s4">&quot;./items&quot;</span><span class="s2">:</span><span class="s5">28</span><span class="s2">,</span><span class="s4">&quot;./multipleOf&quot;</span><span class="s2">:</span><span class="s5">29</span><span class="s2">,</span><span class="s4">&quot;./not&quot;</span><span class="s2">:</span><span class="s5">30</span><span class="s2">,</span><span class="s4">&quot;./oneOf&quot;</span><span class="s2">:</span><span class="s5">31</span><span class="s2">,</span><span class="s4">&quot;./pattern&quot;</span><span class="s2">:</span><span class="s5">32</span><span class="s2">,</span><span class="s4">&quot;./properties&quot;</span><span class="s2">:</span><span class="s5">33</span><span class="s2">,</span><span class="s4">&quot;./propertyNames&quot;</span><span class="s2">:</span><span class="s5">34</span><span class="s2">,</span><span class="s4">&quot;./ref&quot;</span><span class="s2">:</span><span class="s5">35</span><span class="s2">,</span><span class="s4">&quot;./required&quot;</span><span class="s2">:</span><span class="s5">36</span><span class="s2">,</span><span class="s4">&quot;./uniqueItems&quot;</span><span class="s2">:</span><span class="s5">37</span><span class="s2">,</span><span class="s4">&quot;./validate&quot;</span><span class="s2">:</span><span class="s5">38</span><span class="s2">}],</span><span class="s5">28</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s4">&quot;i&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">+</span><span class="s5">1</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">,</span><span class="s1">g</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; = errors;var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;;&quot;</span><span class="s2">,</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">o</span><span class="s2">)){</span><span class="s3">var </span><span class="s1">P</span><span class="s2">,</span><span class="s1">E</span><span class="s2">,</span><span class="s1">w</span><span class="s2">,</span><span class="s1">b</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">additionalItems</span><span class="s2">;!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">b</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length &lt;= &quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">.</span><span class="s1">length</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/additionalItems&quot;</span><span class="s2">,(</span><span class="s1">E</span><span class="s2">=</span><span class="s1">E</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) {   &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'additionalItems' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { limit: &quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">.</span><span class="s1">length</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should NOT have more than &quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">.</span><span class="s1">length</span><span class="s2">+</span><span class="s4">&quot; items' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: false , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">E</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">P</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">p</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">));</span><span class="s3">var </span><span class="s1">S</span><span class="s2">=</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">S</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">_</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">F</span><span class="s2">=</span><span class="s1">S</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">_</span><span class="s2">&lt;</span><span class="s1">F</span><span class="s2">;){</span><span class="s3">var </span><span class="s1">x</span><span class="s2">,</span><span class="s1">R</span><span class="s2">,</span><span class="s1">$</span><span class="s2">=</span><span class="s1">S</span><span class="s2">[</span><span class="s1">_</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">];(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">$</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">$</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">$</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">$</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = true; if (&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length &gt; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">x</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">$</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">_</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">),</span><span class="s1">d</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">v</span><span class="s2">]=</span><span class="s1">_</span><span class="s2">,</span><span class="s1">R</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">),</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">g</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">R</span><span class="s2">,</span><span class="s1">y</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">R</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">x</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">R</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }  &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">p</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">))}</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">b</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">b</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">b</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">b</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">b</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))&amp;&amp;(</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">b</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.additionalItems&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/additionalItems&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = true; if (&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length &gt; &quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">.</span><span class="s1">length</span><span class="s2">+</span><span class="s4">&quot;) {  for (var &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">.</span><span class="s1">length</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; &lt; &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;++) { &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">m</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">),</span><span class="s1">x</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">v</span><span class="s2">]=</span><span class="s1">m</span><span class="s2">,</span><span class="s1">R</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">),</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">g</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">R</span><span class="s2">,</span><span class="s1">y</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">R</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">x</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">R</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;) break; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } }  &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">p</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">))}</span><span class="s3">else</span><span class="s2">{(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">o</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">o</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">o</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))&amp;&amp;(</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">o</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  for (var &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; = 0; &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; &lt; &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;++) { &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">m</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">),</span><span class="s1">x</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">v</span><span class="s2">]=</span><span class="s1">m</span><span class="s2">,</span><span class="s1">R</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">),</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">g</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">R</span><span class="s2">,</span><span class="s1">y</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">R</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">x</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">R</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;) break; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }&quot;</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; == errors) {&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">29</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">u</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">):</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">u</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;number&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+</span><span class="s4">&quot; must be number&quot;</span><span class="s2">);</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var division&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;;if (&quot;</span><span class="s2">,</span><span class="s1">u</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; ( typeof &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; != 'number' || &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; (division&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; / &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;, &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">multipleOfPrecision</span><span class="s2">?</span><span class="s4">&quot; Math.abs(Math.round(division&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;) - division&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;) &gt; 1e-&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">multipleOfPrecision</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s4">&quot; division&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; !== parseInt(division&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;) &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; ) &quot;</span><span class="s2">,</span><span class="s1">u</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  )  &quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s1">d</span><span class="s2">||[];</span><span class="s1">d</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; ) {   &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'multipleOf' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { multipleOf: &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should be multiple of &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">:</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;'&quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema:  &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;         , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">p</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;} &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">30</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">d</span><span class="s2">,</span><span class="s1">p</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,</span><span class="s1">m</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">;</span><span class="s3">return</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">o</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">o</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">o</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))?(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">o</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = errors;  &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">&amp;&amp;(</span><span class="s1">p</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">h</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">p</span><span class="s2">&amp;&amp;(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">=</span><span class="s1">p</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">,(</span><span class="s1">f</span><span class="s2">=</span><span class="s1">f</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) {   &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'not' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: {} &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should NOT be valid' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } else {  errors = &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;; if (vErrors !== null) { if (&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) vErrors.length = &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;; else vErrors = null; } &quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">)):(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'not' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: {} &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should NOT be valid' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (false) { &quot;</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">31</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;prevValid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;passingSchemas&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">;</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; = errors , &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = false , &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = false , &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = null; &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">g</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">;</span><span class="s3">var </span><span class="s1">P</span><span class="s2">=</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">P</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">E</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">b</span><span class="s2">=</span><span class="s1">P</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">w</span><span class="s2">&lt;</span><span class="s1">b</span><span class="s2">;)</span><span class="s1">E</span><span class="s2">=</span><span class="s1">P</span><span class="s2">[</span><span class="s1">w</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">],(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">E</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">E</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">E</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">E</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))?(</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">E</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">m</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = true; &quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = false; &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = [&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;, &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;]; } else { &quot;</span><span class="s2">,</span><span class="s1">p</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = true; &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;; }&quot;</span><span class="s2">;</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">g</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) {   var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'oneOf' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { passingSchemas: &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should match exactly one schema in oneOf' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError(vErrors); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = vErrors; return false; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;} else {  errors = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;; if (vErrors !== null) { if (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;) vErrors.length = &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;; else vErrors = null; }&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">32</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">u</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">):</span><span class="s1">o</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;(new RegExp(&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;))&quot;</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">usePattern</span><span class="s2">(</span><span class="s1">o</span><span class="s2">);</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;if ( &quot;</span><span class="s2">,</span><span class="s1">u</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; (&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; !== undefined &amp;&amp; typeof &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; != 'string') || &quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">p</span><span class="s2">=</span><span class="s1">p</span><span class="s2">||[];</span><span class="s1">p</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; !&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;.test(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;) ) {   &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'pattern' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { pattern:  &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">o</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should match pattern </span><span class="s3">\&quot;</span><span class="s4">&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; + '&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">o</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;</span><span class="s3">\&quot;</span><span class="s4">' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema:  &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">u</span><span class="s2">?</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">o</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;         , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;} &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">33</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">d</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">p</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,</span><span class="s1">m</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;key&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">g</span><span class="s2">=</span><span class="s4">&quot;idx&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">+</span><span class="s5">1</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s4">&quot;dataProperties&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">b</span><span class="s2">=</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">o</span><span class="s2">||{}).</span><span class="s1">filter</span><span class="s2">(</span><span class="s1">k</span><span class="s2">),</span><span class="s1">S</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">patternProperties</span><span class="s2">||{},</span><span class="s1">_</span><span class="s2">=</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">S</span><span class="s2">).</span><span class="s1">filter</span><span class="s2">(</span><span class="s1">k</span><span class="s2">),</span><span class="s1">F</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">additionalProperties</span><span class="s2">,</span><span class="s1">x</span><span class="s2">=</span><span class="s1">b</span><span class="s2">.</span><span class="s1">length</span><span class="s2">||</span><span class="s1">_</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">R</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">F</span><span class="s2">,</span><span class="s1">$</span><span class="s2">=</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">F</span><span class="s2">&amp;&amp;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">F</span><span class="s2">).</span><span class="s1">length</span><span class="s2">,</span><span class="s1">j</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">removeAdditional</span><span class="s2">,</span><span class="s1">D</span><span class="s2">=</span><span class="s1">R</span><span class="s2">||</span><span class="s1">$</span><span class="s2">||</span><span class="s1">j</span><span class="s2">,</span><span class="s1">O</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">ownProperties</span><span class="s2">,</span><span class="s1">I</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">A</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">required</span><span class="s2">;</span><span class="s3">function </span><span class="s1">k</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;__proto__&quot;</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">A</span><span class="s2">&amp;&amp;(!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">||!</span><span class="s1">A</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">)&amp;&amp;</span><span class="s1">A</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">loopRequired</span><span class="s2">&amp;&amp;(</span><span class="s1">p</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toHash</span><span class="s2">(</span><span class="s1">A</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = errors;var &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = true;&quot;</span><span class="s2">,</span><span class="s1">O</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot; = undefined;&quot;</span><span class="s2">),</span><span class="s1">D</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">O</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot; || Object.keys(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;); for (var &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;=0; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;++) { var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;]; &quot;</span><span class="s2">:</span><span class="s4">&quot; for (var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; in &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">x</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var isAdditional&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = !(false &quot;</span><span class="s2">,</span><span class="s1">b</span><span class="s2">.</span><span class="s1">length</span><span class="s2">)</span><span class="s3">if</span><span class="s2">(</span><span class="s5">8</span><span class="s2">&lt;</span><span class="s1">b</span><span class="s2">.</span><span class="s1">length</span><span class="s2">)</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;.hasOwnProperty(&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;) &quot;</span><span class="s2">;</span><span class="s3">else</span><span class="s2">{</span><span class="s3">var </span><span class="s1">C</span><span class="s2">=</span><span class="s1">b</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">C</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">L</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">N</span><span class="s2">=</span><span class="s1">C</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">L</span><span class="s2">&lt;</span><span class="s1">N</span><span class="s2">;)</span><span class="s1">U</span><span class="s2">=</span><span class="s1">C</span><span class="s2">[</span><span class="s1">L</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">],</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; == &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">U</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">_</span><span class="s2">.</span><span class="s1">length</span><span class="s2">){</span><span class="s3">var </span><span class="s1">q</span><span class="s2">=</span><span class="s1">_</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">q</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">z</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">T</span><span class="s2">=</span><span class="s1">q</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">z</span><span class="s2">&lt;</span><span class="s1">T</span><span class="s2">;)</span><span class="s1">te</span><span class="s2">=</span><span class="s1">q</span><span class="s2">[</span><span class="s1">z</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">],</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">usePattern</span><span class="s2">(</span><span class="s1">te</span><span class="s2">)+</span><span class="s4">&quot;.test(&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;) &quot;</span><span class="s2">}</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; ); if (isAdditional&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">}</span><span class="s4">&quot;all&quot;</span><span class="s2">==</span><span class="s1">j</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; delete &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;]; &quot;</span><span class="s2">:(</span><span class="s1">Z</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;' + &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; + '&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">)),</span><span class="s1">R</span><span class="s2">?</span><span class="s1">j</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; delete &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;]; &quot;</span><span class="s2">:(</span><span class="s1">G</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/additionalProperties&quot;</span><span class="s2">,(</span><span class="s1">W</span><span class="s2">=</span><span class="s1">W</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = false; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'additionalProperties' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { additionalProperty: '&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: '&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s4">&quot;is an invalid additional property&quot;</span><span class="s2">:</span><span class="s4">&quot;should NOT have additional properties&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: false , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">X</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">W</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">X</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">X</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">X</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">G</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; break; &quot;</span><span class="s2">)):</span><span class="s1">$</span><span class="s2">&amp;&amp;(</span><span class="s4">&quot;failing&quot;</span><span class="s2">==</span><span class="s1">j</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = errors;  &quot;</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">F</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.additionalProperties&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/additionalProperties&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">),</span><span class="s1">oe</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">P</span><span class="s2">]=</span><span class="s1">y</span><span class="s2">,</span><span class="s1">ie</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">h</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">I</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">E</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">E</span><span class="s2">,</span><span class="s1">oe</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">oe</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">ie</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { errors = &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;]; }  &quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">m</span><span class="s2">):(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">F</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.additionalProperties&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/additionalProperties&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">),</span><span class="s1">oe</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">P</span><span class="s2">]=</span><span class="s1">y</span><span class="s2">,</span><span class="s1">ie</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">h</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">I</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">E</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">E</span><span class="s2">,</span><span class="s1">oe</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">oe</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">ie</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) break; &quot;</span><span class="s2">))),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">),</span><span class="s1">x</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }  &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">)}</span><span class="s3">var </span><span class="s1">Q</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">useDefaults</span><span class="s2">&amp;&amp;!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">b</span><span class="s2">.</span><span class="s1">length</span><span class="s2">){</span><span class="s3">var </span><span class="s1">V</span><span class="s2">=</span><span class="s1">b</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">V</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">U</span><span class="s2">,</span><span class="s1">H</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">M</span><span class="s2">=</span><span class="s1">V</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">H</span><span class="s2">&lt;</span><span class="s1">M</span><span class="s2">;){</span><span class="s3">var </span><span class="s1">K</span><span class="s2">,</span><span class="s1">B</span><span class="s2">,</span><span class="s1">J</span><span class="s2">,</span><span class="s1">Z</span><span class="s2">,</span><span class="s1">G</span><span class="s2">,</span><span class="s1">Y</span><span class="s2">,</span><span class="s1">W</span><span class="s2">,</span><span class="s1">X</span><span class="s2">,</span><span class="s1">ee</span><span class="s2">=</span><span class="s1">o</span><span class="s2">[</span><span class="s1">U</span><span class="s2">=</span><span class="s1">V</span><span class="s2">[</span><span class="s1">H</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">]];(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">ee</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">ee</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">ee</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">ee</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))&amp;&amp;(</span><span class="s1">oe</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+(</span><span class="s1">K</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">U</span><span class="s2">)),</span><span class="s1">B</span><span class="s2">=</span><span class="s1">Q</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">ee</span><span class="s2">.</span><span class="s1">default</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">ee</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">+</span><span class="s1">K</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeFragment</span><span class="s2">(</span><span class="s1">U</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPath</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">U</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">P</span><span class="s2">]=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">U</span><span class="s2">),</span><span class="s1">ie</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">h</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">I</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">E</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?(</span><span class="s1">ie</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">E</span><span class="s2">,</span><span class="s1">oe</span><span class="s2">),</span><span class="s1">J</span><span class="s2">=</span><span class="s1">oe</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+(</span><span class="s1">J</span><span class="s2">=</span><span class="s1">E</span><span class="s2">)+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">oe</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s1">B</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">ie</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">:(</span><span class="s1">p</span><span class="s2">&amp;&amp;</span><span class="s1">p</span><span class="s2">[</span><span class="s1">U</span><span class="s2">]?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">+</span><span class="s4">&quot; === undefined &quot;</span><span class="s2">,</span><span class="s1">O</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || ! Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">U</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) { &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = false; &quot;</span><span class="s2">,</span><span class="s1">Z</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">G</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">Y</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">U</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPath</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">,</span><span class="s1">U</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">)),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/required&quot;</span><span class="s2">,(</span><span class="s1">W</span><span class="s2">=</span><span class="s1">W</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'required' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { missingProperty: '&quot;</span><span class="s2">+</span><span class="s1">Y</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: '&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s4">&quot;is a required property&quot;</span><span class="s2">:</span><span class="s4">&quot;should have required property </span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">+</span><span class="s1">Y</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">X</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">W</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">X</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">X</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">X</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">G</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } else { &quot;</span><span class="s2">):</span><span class="s1">l</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">+</span><span class="s4">&quot; === undefined &quot;</span><span class="s2">,</span><span class="s1">O</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || ! Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">U</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) { &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = true; } else { &quot;</span><span class="s2">):(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">+</span><span class="s4">&quot; !== undefined &quot;</span><span class="s2">,</span><span class="s1">O</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &amp;&amp;   Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">U</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; ) { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">ie</span><span class="s2">+</span><span class="s4">&quot; } &quot;</span><span class="s2">)),</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">)}}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">_</span><span class="s2">.</span><span class="s1">length</span><span class="s2">){</span><span class="s3">var </span><span class="s1">re</span><span class="s2">=</span><span class="s1">_</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">re</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">te</span><span class="s2">,</span><span class="s1">ae</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">se</span><span class="s2">=</span><span class="s1">re</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">ae</span><span class="s2">&lt;</span><span class="s1">se</span><span class="s2">;){</span><span class="s3">var </span><span class="s1">oe</span><span class="s2">,</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">ee</span><span class="s2">=</span><span class="s1">S</span><span class="s2">[</span><span class="s1">te</span><span class="s2">=</span><span class="s1">re</span><span class="s2">[</span><span class="s1">ae</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">]];(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">ee</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">ee</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">ee</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">ee</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))&amp;&amp;(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">ee</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.patternProperties&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">te</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/patternProperties/&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeFragment</span><span class="s2">(</span><span class="s1">te</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">O</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot; || Object.keys(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;); for (var &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;=0; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;++) { var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">+</span><span class="s4">&quot;]; &quot;</span><span class="s2">:</span><span class="s4">&quot; for (var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; in &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">usePattern</span><span class="s2">(</span><span class="s1">te</span><span class="s2">)+</span><span class="s4">&quot;.test(&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;)) { &quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">),</span><span class="s1">oe</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">P</span><span class="s2">]=</span><span class="s1">y</span><span class="s2">,</span><span class="s1">ie</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">h</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">I</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">E</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">,</span><span class="s1">E</span><span class="s2">,</span><span class="s1">oe</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">oe</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">ie</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) break; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; else &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = true; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; }  &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">))}}</span><span class="s3">return </span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; == errors) {&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">34</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;errs__&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">++;</span><span class="s3">var </span><span class="s1">d</span><span class="s2">,</span><span class="s1">p</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,</span><span class="s1">m</span><span class="s2">,</span><span class="s1">v</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">g</span><span class="s2">,</span><span class="s1">P</span><span class="s2">,</span><span class="s1">E</span><span class="s2">,</span><span class="s1">w</span><span class="s2">,</span><span class="s1">b</span><span class="s2">,</span><span class="s1">S</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">;</span><span class="s3">return </span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = errors;&quot;</span><span class="s2">,(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">o</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">o</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">o</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))&amp;&amp;(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">o</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">n</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;idx&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;i&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s4">&quot;' + &quot;</span><span class="s2">+(</span><span class="s1">d</span><span class="s2">=</span><span class="s4">&quot;key&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot; + '&quot;</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">+</span><span class="s5">1</span><span class="s2">),</span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;dataProperties&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,(</span><span class="s1">g</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">ownProperties</span><span class="s2">)&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = undefined; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">g</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot; || Object.keys(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;); for (var &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;=0; &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;&lt;&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;++) { var &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;]; &quot;</span><span class="s2">:</span><span class="s4">&quot; for (var &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; in &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var startErrs&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = errors; &quot;</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s1">d</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">b</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">h</span><span class="s2">),</span><span class="s1">h</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">P</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varOccurences</span><span class="s2">(</span><span class="s1">b</span><span class="s2">,</span><span class="s1">v</span><span class="s2">)&lt;</span><span class="s5">2</span><span class="s2">?</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">varReplace</span><span class="s2">(</span><span class="s1">b</span><span class="s2">,</span><span class="s1">v</span><span class="s2">,</span><span class="s1">E</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">=</span><span class="s1">w</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;) { for (var &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;=startErrs&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;&lt;errors; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;++) { vErrors[&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;].propertyName = &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;; }   var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'propertyNames' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { propertyName: '&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: 'property name </span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">' is invalid' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError(vErrors); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = vErrors; return false; &quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; break; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } }&quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  if (&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; == errors) {&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">35</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">o</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;#&quot;</span><span class="s2">==</span><span class="s1">i</span><span class="s2">||</span><span class="s4">&quot;#/&quot;</span><span class="s2">==</span><span class="s1">i</span><span class="s2">)</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">isRoot</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">,</span><span class="s4">&quot;validate&quot;</span><span class="s2">):(</span><span class="s1">t</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">root</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">,</span><span class="s4">&quot;root.refVal[0]&quot;</span><span class="s2">);</span><span class="s3">else</span><span class="s2">{</span><span class="s3">var </span><span class="s1">h</span><span class="s2">,</span><span class="s1">d</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">resolveRef</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">isRoot</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">p</span><span class="s2">){</span><span class="s3">var </span><span class="s1">f</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">MissingRefError</span><span class="s2">.</span><span class="s1">message</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">i</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;fail&quot;</span><span class="s2">==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">missingRefs</span><span class="s2">){</span><span class="s1">e</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s1">m</span><span class="s2">),(</span><span class="s1">f</span><span class="s2">=</span><span class="s1">f</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">s</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; { keyword: '$ref' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { ref: '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; , message: 'can</span><span class="s3">\\</span><span class="s4">'t resolve reference &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)+</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; , schema: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">v</span><span class="s2">=</span><span class="s1">s</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s1">s</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; if (false) { &quot;</span><span class="s2">)}</span><span class="s3">else</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;ignore&quot;</span><span class="s2">!=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">missingRefs</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">e</span><span class="s2">.</span><span class="s1">MissingRefError</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">m</span><span class="s2">);</span><span class="s1">e</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s1">m</span><span class="s2">),</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">)}}</span><span class="s3">else</span><span class="s2">{</span><span class="s1">p</span><span class="s2">.</span><span class="s1">inline</span><span class="s2">?((</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)).</span><span class="s1">level</span><span class="s2">++,</span><span class="s1">d</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">=</span><span class="s1">i</span><span class="s2">,</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">h</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/validate\.schema/g</span><span class="s2">,</span><span class="s1">p</span><span class="s2">.</span><span class="s1">code</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">)):(</span><span class="s1">t</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">p</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">&amp;&amp;!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">p</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">code</span><span class="s2">)}}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">){(</span><span class="s1">f</span><span class="s2">=</span><span class="s1">f</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">s</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">s</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">passContext</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;.call(this, &quot;</span><span class="s2">:</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;( &quot;</span><span class="s2">,</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, (dataPath || '')&quot;</span><span class="s2">,</span><span class="s4">'&quot;&quot;'</span><span class="s2">!=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">);</span><span class="s3">var </span><span class="s1">y</span><span class="s2">=</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; , &quot;</span><span class="s2">+(</span><span class="s1">o</span><span class="s2">?</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">o</span><span class="s2">-</span><span class="s5">1</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">):</span><span class="s4">&quot;parentData&quot;</span><span class="s2">)+</span><span class="s4">&quot; , &quot;</span><span class="s2">+(</span><span class="s1">o</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">o</span><span class="s2">]:</span><span class="s4">&quot;parentDataProperty&quot;</span><span class="s2">)+</span><span class="s4">&quot;, rootData)  &quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">t</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;async schema referenced by sync schema&quot;</span><span class="s2">);</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; try { await &quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = true; &quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = false; &quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) { &quot;</span><span class="s2">)}</span><span class="s3">else </span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">y</span><span class="s2">+</span><span class="s4">&quot;) { if (vErrors === null) vErrors = &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;.errors; else vErrors = vErrors.concat(&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;.errors); errors = vErrors.length; } &quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">s</span><span class="s2">}},{}],</span><span class="s5">36</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">s</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=(</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">),</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">h</span><span class="s2">)</span><span class="s3">if</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">loopRequired</span><span class="s2">&amp;&amp;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">properties</span><span class="s2">&amp;&amp;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">properties</span><span class="s2">).</span><span class="s1">length</span><span class="s2">){</span><span class="s3">var </span><span class="s1">p</span><span class="s2">=[],</span><span class="s1">f</span><span class="s2">=</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">m</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s1">f</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">v</span><span class="s2">&lt;</span><span class="s1">y</span><span class="s2">;){</span><span class="s1">m</span><span class="s2">=</span><span class="s1">f</span><span class="s2">[</span><span class="s1">v</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">];</span><span class="s3">var </span><span class="s1">g</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">properties</span><span class="s2">[</span><span class="s1">m</span><span class="s2">];</span><span class="s1">g</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">?</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">g</span><span class="s2">&amp;&amp;</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">g</span><span class="s2">).</span><span class="s1">length</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">g</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRules</span><span class="s2">(</span><span class="s1">g</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">))||(</span><span class="s1">p</span><span class="s2">[</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">]=</span><span class="s1">m</span><span class="s2">)}}</span><span class="s3">else </span><span class="s1">p</span><span class="s2">=</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">h</span><span class="s2">||</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">){</span><span class="s3">var </span><span class="s1">P</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s1">h</span><span class="s2">||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">loopRequired</span><span class="s2">&lt;=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">ownProperties</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">l</span><span class="s2">)</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var missing&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s1">E</span><span class="s2">){</span><span class="s1">h</span><span class="s2">||(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; = validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">b</span><span class="s2">=</span><span class="s4">&quot;' + &quot;</span><span class="s2">+(</span><span class="s1">$</span><span class="s2">=</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+(</span><span class="s1">F</span><span class="s2">=</span><span class="s4">&quot;i&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot;]&quot;</span><span class="s2">)+</span><span class="s4">&quot; + '&quot;</span><span class="s2">;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">P</span><span class="s2">,</span><span class="s1">$</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = true; &quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; === undefined) &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = true; else if (!Array.isArray(schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;)) &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = false; else {&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; for (var &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = 0; &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; &lt; &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;++) { &quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;]] !== undefined &quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; &amp;&amp;   Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;]) &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;; if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) break; } &quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  }  &quot;</span><span class="s2">),(</span><span class="s1">R</span><span class="s2">=</span><span class="s1">R</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  if (!&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;) {   &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'required' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { missingProperty: '&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: '&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s4">&quot;is a required property&quot;</span><span class="s2">:</span><span class="s4">&quot;should have required property </span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">S</span><span class="s2">=</span><span class="s1">t</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">R</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } else { &quot;</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">_</span><span class="s2">=</span><span class="s1">p</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">_</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">F</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">x</span><span class="s2">=</span><span class="s1">_</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">F</span><span class="s2">&lt;</span><span class="s1">x</span><span class="s2">;){</span><span class="s1">D</span><span class="s2">=</span><span class="s1">_</span><span class="s2">[</span><span class="s1">F</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">],</span><span class="s1">F</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; ( ( &quot;</span><span class="s2">+(</span><span class="s1">k</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+(</span><span class="s1">A</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">D</span><span class="s2">)))+</span><span class="s4">&quot; === undefined &quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || ! Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">D</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) &amp;&amp; (missing&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">?</span><span class="s1">D</span><span class="s2">:</span><span class="s1">A</span><span class="s2">)+</span><span class="s4">&quot;) ) &quot;</span><span class="s2">}</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) {  &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">R</span><span class="s2">,</span><span class="s1">b</span><span class="s2">=</span><span class="s4">&quot;' + &quot;</span><span class="s2">+(</span><span class="s1">$</span><span class="s2">=</span><span class="s4">&quot;missing&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot; + '&quot;</span><span class="s2">;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">P</span><span class="s2">,</span><span class="s1">$</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">):</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot; + &quot;</span><span class="s2">+</span><span class="s1">$</span><span class="s2">),(</span><span class="s1">R</span><span class="s2">=</span><span class="s1">R</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">t</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'required' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { missingProperty: '&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: '&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s4">&quot;is a required property&quot;</span><span class="s2">:</span><span class="s4">&quot;should have required property </span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s1">S</span><span class="s2">=</span><span class="s1">t</span><span class="s2">;</span><span class="s1">t</span><span class="s2">=</span><span class="s1">R</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">t</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">S</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } else { &quot;</span><span class="s2">}</span><span class="s3">else if</span><span class="s2">(</span><span class="s1">E</span><span class="s2">){</span><span class="s1">h</span><span class="s2">||(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; = validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">$</span><span class="s2">,</span><span class="s1">b</span><span class="s2">=</span><span class="s4">&quot;' + &quot;</span><span class="s2">+(</span><span class="s1">$</span><span class="s2">=</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+(</span><span class="s1">F</span><span class="s2">=</span><span class="s4">&quot;i&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot;]&quot;</span><span class="s2">)+</span><span class="s4">&quot; + '&quot;</span><span class="s2">;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPathExpr</span><span class="s2">(</span><span class="s1">P</span><span class="s2">,</span><span class="s1">$</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">)),</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; &amp;&amp; !Array.isArray(&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;)) {  var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'required' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { missingProperty: '&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: '&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s4">&quot;is a required property&quot;</span><span class="s2">:</span><span class="s4">&quot;should have required property </span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot; !== undefined) { &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; for (var &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = 0; &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; &lt; &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;.length; &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;++) { if (&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;]] === undefined &quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || ! Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, &quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;]) &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) {  var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'required' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { missingProperty: '&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: '&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s4">&quot;is a required property&quot;</span><span class="s2">:</span><span class="s4">&quot;should have required property </span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } &quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;  }  &quot;</span><span class="s2">)}</span><span class="s3">else</span><span class="s2">{</span><span class="s3">var </span><span class="s1">j</span><span class="s2">=</span><span class="s1">p</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">j</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">D</span><span class="s2">,</span><span class="s1">O</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">I</span><span class="s2">=</span><span class="s1">j</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">O</span><span class="s2">&lt;</span><span class="s1">I</span><span class="s2">;){</span><span class="s1">D</span><span class="s2">=</span><span class="s1">j</span><span class="s2">[</span><span class="s1">O</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">];</span><span class="s3">var </span><span class="s1">A</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">D</span><span class="s2">),</span><span class="s1">b</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">D</span><span class="s2">),</span><span class="s1">k</span><span class="s2">=</span><span class="s1">c</span><span class="s2">+</span><span class="s1">A</span><span class="s2">;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getPath</span><span class="s2">(</span><span class="s1">P</span><span class="s2">,</span><span class="s1">D</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">jsonPointers</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if ( &quot;</span><span class="s2">+</span><span class="s1">k</span><span class="s2">+</span><span class="s4">&quot; === undefined &quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; || ! Object.prototype.hasOwnProperty.call(&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;, '&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">escapeQuotes</span><span class="s2">(</span><span class="s1">D</span><span class="s2">)+</span><span class="s4">&quot;') &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;) {  var err =   &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'required' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)+</span><span class="s4">&quot; , params: { missingProperty: '&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , message: '&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">?</span><span class="s4">&quot;is a required property&quot;</span><span class="s2">:</span><span class="s4">&quot;should have required property </span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">+</span><span class="s1">b</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">'&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } &quot;</span><span class="s2">}}</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">=</span><span class="s1">P</span><span class="s2">}</span><span class="s3">else </span><span class="s1">l</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">+=</span><span class="s4">&quot; if (true) {&quot;</span><span class="s2">);</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">37</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">],</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">l</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">n</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s1">c</span><span class="s2">&amp;&amp;</span><span class="s1">c</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=</span><span class="s1">m</span><span class="s2">?(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; var schema&quot;</span><span class="s2">+</span><span class="s1">n</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getData</span><span class="s2">(</span><span class="s1">c</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">)+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s4">&quot;schema&quot;</span><span class="s2">+</span><span class="s1">n</span><span class="s2">):</span><span class="s1">c</span><span class="s2">;</span><span class="s3">return</span><span class="s2">(</span><span class="s1">c</span><span class="s2">||</span><span class="s1">m</span><span class="s2">)&amp;&amp;!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">uniqueItems</span><span class="s2">?(</span><span class="s1">m</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;; if (&quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; === false || &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; === undefined) &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = true; else if (typeof &quot;</span><span class="s2">+</span><span class="s1">v</span><span class="s2">+</span><span class="s4">&quot; != 'boolean') &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = false; else { &quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; var i = &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;.length , &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = true , j; if (i &gt; 1) { &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">items</span><span class="s2">&amp;&amp;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">items</span><span class="s2">.</span><span class="s1">type</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">t</span><span class="s2">),!</span><span class="s1">t</span><span class="s2">||</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s1">t</span><span class="s2">||</span><span class="s4">&quot;array&quot;</span><span class="s2">==</span><span class="s1">t</span><span class="s2">||</span><span class="s1">a</span><span class="s2">&amp;&amp;(</span><span class="s5">0</span><span class="s2">&lt;=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s4">&quot;object&quot;</span><span class="s2">)||</span><span class="s5">0</span><span class="s2">&lt;=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s4">&quot;array&quot;</span><span class="s2">))?</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; outer: for (;i--;) { for (j = i; j--;) { if (equal(&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;[i], &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;[j])) { &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = false; break outer; } } } &quot;</span><span class="s2">:(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; var itemIndices = {}, item; for (;i--;) { var item = &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;[i]; &quot;</span><span class="s2">,</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">[</span><span class="s4">&quot;checkDataType&quot;</span><span class="s2">+(</span><span class="s1">a</span><span class="s2">?</span><span class="s4">&quot;s&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">)](</span><span class="s1">t</span><span class="s2">,</span><span class="s4">&quot;item&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictNumbers</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">)+</span><span class="s4">&quot;) continue; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; if (typeof item == 'string') item = '</span><span class="s3">\&quot;</span><span class="s4">' + item; &quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; if (typeof itemIndices[item] == 'number') { &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = false; j = itemIndices[item]; break; } itemIndices[item] = i; } &quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">m</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot;  }  &quot;</span><span class="s2">),(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">s</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; if (!&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;) {   &quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'uniqueItems' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">h</span><span class="s2">)+</span><span class="s4">&quot; , params: { i: i, j: j } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' &quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; , schema:  &quot;</span><span class="s2">,</span><span class="s1">i</span><span class="s2">+=</span><span class="s1">m</span><span class="s2">?</span><span class="s4">&quot;validate.schema&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">,</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot;         , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">i</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">s</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">i</span><span class="s2">+=!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">d</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">)):</span><span class="s1">d</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">+=</span><span class="s4">&quot; if (true) { &quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">}},{}],</span><span class="s5">38</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaHasRulesExcept</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">,</span><span class="s4">&quot;$ref&quot;</span><span class="s2">),</span><span class="s1">o</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">){</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">schemaUnknownRules</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">i</span><span class="s2">){</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s4">&quot;unknown keyword: &quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;log&quot;</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictKeywords</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">n</span><span class="s2">);</span><span class="s1">a</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)}}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">isTop</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; var validate = &quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">async</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;async &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; &quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">sourceCode</span><span class="s2">||</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">processCode</span><span class="s2">)&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; /*# sourceURL=&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot; */ &quot;</span><span class="s2">)),</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">||!</span><span class="s1">s</span><span class="s2">&amp;&amp;!</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">$ref</span><span class="s2">){</span><span class="s3">var </span><span class="s1">l</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">,</span><span class="s1">u</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">e</span><span class="s2">=</span><span class="s4">&quot;false schema&quot;</span><span class="s2">],</span><span class="s1">h</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">d</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=!</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">c</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">m</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">;</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">?(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">isTop</span><span class="s2">?</span><span class="s1">p</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">:</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; = false; &quot;</span><span class="s2">,(</span><span class="s1">U</span><span class="s2">=</span><span class="s1">U</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">r</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'false schema' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; , params: {} &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; , message: 'boolean schema is false' &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; , schema: false , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">D</span><span class="s2">=</span><span class="s1">r</span><span class="s2">,</span><span class="s1">r</span><span class="s2">=</span><span class="s1">U</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">r</span><span class="s2">+=!</span><span class="s1">a</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">p</span><span class="s2">?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">):</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">isTop</span><span class="s2">?</span><span class="s1">t</span><span class="s2">?</span><span class="s4">&quot; return data; &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = null; return true; &quot;</span><span class="s2">:</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; = true; &quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">isTop</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; }; return validate; &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">isTop</span><span class="s2">){</span><span class="s3">var </span><span class="s1">v</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">isTop</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">level</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">rootId</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">resolve</span><span class="s2">.</span><span class="s1">fullPath</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">self</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">root</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">)),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">||</span><span class="s1">a</span><span class="s2">.</span><span class="s1">rootId</span><span class="s2">,</span><span class="s3">delete </span><span class="s1">a</span><span class="s2">.</span><span class="s1">isTop</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">=[</span><span class="s4">&quot;&quot;</span><span class="s2">],</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">default</span><span class="s2">&amp;&amp;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">useDefaults</span><span class="s2">&amp;&amp;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictDefaults</span><span class="s2">){</span><span class="s3">var </span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;default is ignored in the schema root&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;log&quot;</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictDefaults</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">y</span><span class="s2">);</span><span class="s1">a</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s1">y</span><span class="s2">)}</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; var vErrors = null; &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; var errors = 0;     &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (rootData === undefined) rootData = data; &quot;</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{</span><span class="s1">l</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">level</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;data&quot;</span><span class="s2">+((</span><span class="s1">c</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">dataLevel</span><span class="s2">)||</span><span class="s4">&quot;&quot;</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">o</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">resolve</span><span class="s2">.</span><span class="s1">url</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">o</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">&amp;&amp;!</span><span class="s1">a</span><span class="s2">.</span><span class="s1">async</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;async schema in sync schema&quot;</span><span class="s2">);</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; var errs_&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">+</span><span class="s4">&quot; = errors;&quot;</span><span class="s2">}</span><span class="s3">var </span><span class="s1">g</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s4">&quot;valid&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=!</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">allErrors</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">type</span><span class="s2">,</span><span class="s1">b</span><span class="s2">=</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">w</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">w</span><span class="s2">&amp;&amp;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">nullable</span><span class="s2">&amp;&amp;!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">nullable</span><span class="s2">&amp;&amp;(</span><span class="s1">b</span><span class="s2">?-</span><span class="s5">1</span><span class="s2">==</span><span class="s1">w</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s4">&quot;null&quot;</span><span class="s2">)&amp;&amp;(</span><span class="s1">w</span><span class="s2">=</span><span class="s1">w</span><span class="s2">.</span><span class="s1">concat</span><span class="s2">(</span><span class="s4">&quot;null&quot;</span><span class="s2">)):</span><span class="s4">&quot;null&quot;</span><span class="s2">!=</span><span class="s1">w</span><span class="s2">&amp;&amp;(</span><span class="s1">w</span><span class="s2">=[</span><span class="s1">w</span><span class="s2">,</span><span class="s4">&quot;null&quot;</span><span class="s2">],</span><span class="s1">b</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">)),</span><span class="s1">b</span><span class="s2">&amp;&amp;</span><span class="s5">1</span><span class="s2">==</span><span class="s1">w</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&amp;&amp;(</span><span class="s1">w</span><span class="s2">=</span><span class="s1">w</span><span class="s2">[</span><span class="s5">0</span><span class="s2">],</span><span class="s1">b</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">$ref</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;fail&quot;</span><span class="s2">==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">extendRefs</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">'$ref: validation keywords used in schema at path &quot;'</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">'&quot; (see option extendRefs)'</span><span class="s2">);!</span><span class="s5">0</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">extendRefs</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s4">'$ref: keywords ignored in schema at path &quot;'</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">'&quot;'</span><span class="s2">))}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">$comment</span><span class="s2">&amp;&amp;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">$comment</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">.</span><span class="s1">$comment</span><span class="s2">.</span><span class="s1">code</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s4">&quot;$comment&quot;</span><span class="s2">)),</span><span class="s1">w</span><span class="s2">){</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">coerceTypes</span><span class="s2">&amp;&amp;(</span><span class="s1">g</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">coerceToTypes</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">coerceTypes</span><span class="s2">,</span><span class="s1">w</span><span class="s2">));</span><span class="s3">var </span><span class="s1">S</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">types</span><span class="s2">[</span><span class="s1">w</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">g</span><span class="s2">||</span><span class="s1">b</span><span class="s2">||!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">S</span><span class="s2">||</span><span class="s1">S</span><span class="s2">&amp;&amp;!</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">S</span><span class="s2">)){</span><span class="s1">h</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.type&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/type&quot;</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.type&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/type&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">[</span><span class="s1">b</span><span class="s2">?</span><span class="s4">&quot;checkDataTypes&quot;</span><span class="s2">:</span><span class="s4">&quot;checkDataType&quot;</span><span class="s2">](</span><span class="s1">w</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictNumbers</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">)+</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">g</span><span class="s2">){</span><span class="s3">var </span><span class="s1">_</span><span class="s2">=</span><span class="s4">&quot;dataType&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">,</span><span class="s1">F</span><span class="s2">=</span><span class="s4">&quot;coerced&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">;</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; = typeof &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;; var &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = undefined; &quot;</span><span class="s2">,</span><span class="s4">&quot;array&quot;</span><span class="s2">==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">coerceTypes</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; == 'object' &amp;&amp; Array.isArray(&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;) &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;.length == 1) { &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;[0]; &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; = typeof &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;; if (&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">checkDataType</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">type</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictNumbers</span><span class="s2">)+</span><span class="s4">&quot;) &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;; } &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; !== undefined) ; &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">x</span><span class="s2">=</span><span class="s1">g</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">x</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">R</span><span class="s2">,</span><span class="s1">$</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">j</span><span class="s2">=</span><span class="s1">x</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">$</span><span class="s2">&lt;</span><span class="s1">j</span><span class="s2">;)</span><span class="s4">&quot;string&quot;</span><span class="s2">==(</span><span class="s1">R</span><span class="s2">=</span><span class="s1">x</span><span class="s2">[</span><span class="s1">$</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">])?</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; else if (&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; == 'number' || &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; == 'boolean') &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = '' + &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;; else if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === null) &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = ''; &quot;</span><span class="s2">:</span><span class="s4">&quot;number&quot;</span><span class="s2">==</span><span class="s1">R</span><span class="s2">||</span><span class="s4">&quot;integer&quot;</span><span class="s2">==</span><span class="s1">R</span><span class="s2">?(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; else if (&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; == 'boolean' || &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === null || (&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; == 'string' &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; &amp;&amp; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; == +&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s4">&quot;integer&quot;</span><span class="s2">==</span><span class="s1">R</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; &amp;&amp; !(&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; % 1)&quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;)) &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = +&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">):</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s1">R</span><span class="s2">?</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; else if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === 'false' || &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === 0 || &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === null) &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = false; else if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === 'true' || &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === 1) &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = true; &quot;</span><span class="s2">:</span><span class="s4">&quot;null&quot;</span><span class="s2">==</span><span class="s1">R</span><span class="s2">?</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; else if (&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === '' || &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === 0 || &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; === false) &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = null; &quot;</span><span class="s2">:</span><span class="s4">&quot;array&quot;</span><span class="s2">==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">coerceTypes</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;array&quot;</span><span class="s2">==</span><span class="s1">R</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; else if (&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; == 'string' || &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; == 'number' || &quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot; == 'boolean' || &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; == null) &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; = [&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;]; &quot;</span><span class="s2">);(</span><span class="s1">U</span><span class="s2">=</span><span class="s1">U</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; else {   &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'type' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; , params: { type: '&quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">b</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">):</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should be &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">b</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">):</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">D</span><span class="s2">=</span><span class="s1">r</span><span class="s2">;</span><span class="s1">r</span><span class="s2">=</span><span class="s1">U</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">r</span><span class="s2">+=!</span><span class="s1">a</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">p</span><span class="s2">?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } if (&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot; !== undefined) {  &quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">O</span><span class="s2">=</span><span class="s1">c</span><span class="s2">?</span><span class="s4">&quot;data&quot;</span><span class="s2">+(</span><span class="s1">c</span><span class="s2">-</span><span class="s5">1</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">):</span><span class="s4">&quot;parentData&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;; &quot;</span><span class="s2">,</span><span class="s1">c</span><span class="s2">||(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;if (&quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot; !== undefined)&quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+(</span><span class="s1">c</span><span class="s2">?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">dataPathArr</span><span class="s2">[</span><span class="s1">c</span><span class="s2">]:</span><span class="s4">&quot;parentDataProperty&quot;</span><span class="s2">)+</span><span class="s4">&quot;] = &quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;; } &quot;</span><span class="s2">}</span><span class="s3">else</span><span class="s2">{(</span><span class="s1">U</span><span class="s2">=</span><span class="s1">U</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">r</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'type' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; , params: { type: '&quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">b</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">):</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should be &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">b</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">):</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">;</span><span class="s1">D</span><span class="s2">=</span><span class="s1">r</span><span class="s2">;</span><span class="s1">r</span><span class="s2">=</span><span class="s1">U</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">r</span><span class="s2">+=!</span><span class="s1">a</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">p</span><span class="s2">?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">}</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">}}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">$ref</span><span class="s2">&amp;&amp;!</span><span class="s1">s</span><span class="s2">)</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">all</span><span class="s2">.</span><span class="s1">$ref</span><span class="s2">.</span><span class="s1">code</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s4">&quot;$ref&quot;</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">p</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } if (errors === &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">v</span><span class="s2">?</span><span class="s4">&quot;0&quot;</span><span class="s2">:</span><span class="s4">&quot;errs_&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">E</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">);</span><span class="s3">else</span><span class="s2">{</span><span class="s3">var </span><span class="s1">I</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">I</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">A</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">k</span><span class="s2">=</span><span class="s1">I</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">A</span><span class="s2">&lt;</span><span class="s1">k</span><span class="s2">;)</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">S</span><span class="s2">=</span><span class="s1">I</span><span class="s2">[</span><span class="s1">A</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">])){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">S</span><span class="s2">.</span><span class="s1">type</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">checkDataType</span><span class="s2">(</span><span class="s1">S</span><span class="s2">.</span><span class="s1">type</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictNumbers</span><span class="s2">)+</span><span class="s4">&quot;) { &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">useDefaults</span><span class="s2">)</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s1">S</span><span class="s2">.</span><span class="s1">type</span><span class="s2">&amp;&amp;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">properties</span><span class="s2">){</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">properties</span><span class="s2">,</span><span class="s1">C</span><span class="s2">=</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">u</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">C</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">L</span><span class="s2">,</span><span class="s1">N</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">q</span><span class="s2">=</span><span class="s1">C</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">N</span><span class="s2">&lt;</span><span class="s1">q</span><span class="s2">;){</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==(</span><span class="s1">Q</span><span class="s2">=</span><span class="s1">u</span><span class="s2">[</span><span class="s1">L</span><span class="s2">=</span><span class="s1">C</span><span class="s2">[</span><span class="s1">N</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">]]).</span><span class="s1">default</span><span class="s2">){</span><span class="s3">var </span><span class="s1">z</span><span class="s2">=</span><span class="s1">f</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">getProperty</span><span class="s2">(</span><span class="s1">L</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictDefaults</span><span class="s2">){</span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;default is ignored for: &quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;log&quot;</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictDefaults</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">y</span><span class="s2">);</span><span class="s1">a</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s1">y</span><span class="s2">)}}</span><span class="s3">else </span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot; === undefined &quot;</span><span class="s2">,</span><span class="s4">&quot;empty&quot;</span><span class="s2">==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">useDefaults</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; || &quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot; === null || &quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot; === '' &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; ) &quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;shared&quot;</span><span class="s2">==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">useDefaults</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">useDefault</span><span class="s2">(</span><span class="s1">Q</span><span class="s2">.</span><span class="s1">default</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">Q</span><span class="s2">.</span><span class="s1">default</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;; &quot;</span><span class="s2">}}}</span><span class="s3">else if</span><span class="s2">(</span><span class="s4">&quot;array&quot;</span><span class="s2">==</span><span class="s1">S</span><span class="s2">.</span><span class="s1">type</span><span class="s2">&amp;&amp;</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">items</span><span class="s2">)){</span><span class="s3">var </span><span class="s1">T</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">items</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">T</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">Q</span><span class="s2">,</span><span class="s1">$</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">V</span><span class="s2">=</span><span class="s1">T</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">$</span><span class="s2">&lt;</span><span class="s1">V</span><span class="s2">;)</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==(</span><span class="s1">Q</span><span class="s2">=</span><span class="s1">T</span><span class="s2">[</span><span class="s1">$</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">]).</span><span class="s1">default</span><span class="s2">){</span><span class="s1">z</span><span class="s2">=</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">$</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictDefaults</span><span class="s2">){</span><span class="s1">y</span><span class="s2">=</span><span class="s4">&quot;default is ignored for: &quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;log&quot;</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">strictDefaults</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">y</span><span class="s2">);</span><span class="s1">a</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s1">y</span><span class="s2">)}}</span><span class="s3">else </span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (&quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot; === undefined &quot;</span><span class="s2">,</span><span class="s4">&quot;empty&quot;</span><span class="s2">==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">useDefaults</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; || &quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot; === null || &quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot; === '' &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; ) &quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot; = &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;shared&quot;</span><span class="s2">==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">useDefaults</span><span class="s2">?</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">useDefault</span><span class="s2">(</span><span class="s1">Q</span><span class="s2">.</span><span class="s1">default</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">:</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">Q</span><span class="s2">.</span><span class="s1">default</span><span class="s2">)+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;; &quot;</span><span class="s2">}}</span><span class="s3">var </span><span class="s1">U</span><span class="s2">,</span><span class="s1">H</span><span class="s2">=</span><span class="s1">S</span><span class="s2">.</span><span class="s1">rules</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">H</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">M</span><span class="s2">,</span><span class="s1">K</span><span class="s2">,</span><span class="s1">B</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">J</span><span class="s2">=</span><span class="s1">H</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">;</span><span class="s1">B</span><span class="s2">&lt;</span><span class="s1">J</span><span class="s2">;){!</span><span class="s1">G</span><span class="s2">(</span><span class="s1">K</span><span class="s2">=</span><span class="s1">H</span><span class="s2">[</span><span class="s1">B</span><span class="s2">+=</span><span class="s5">1</span><span class="s2">])||(</span><span class="s1">M</span><span class="s2">=</span><span class="s1">K</span><span class="s2">.</span><span class="s1">code</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s1">K</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">,</span><span class="s1">S</span><span class="s2">.</span><span class="s1">type</span><span class="s2">))&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">M</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">p</span><span class="s2">&amp;&amp;(</span><span class="s1">P</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">))}</span><span class="s1">p</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">P</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">S</span><span class="s2">.</span><span class="s1">type</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">,</span><span class="s1">w</span><span class="s2">&amp;&amp;</span><span class="s1">w</span><span class="s2">===</span><span class="s1">S</span><span class="s2">.</span><span class="s1">type</span><span class="s2">&amp;&amp;!</span><span class="s1">g</span><span class="s2">&amp;&amp;(</span><span class="s1">h</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot;.type&quot;</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errSchemaPath</span><span class="s2">+</span><span class="s4">&quot;/type&quot;</span><span class="s2">,(</span><span class="s1">U</span><span class="s2">=</span><span class="s1">U</span><span class="s2">||[]).</span><span class="s1">push</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; else { &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">createErrors</span><span class="s2">?(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; { keyword: 'type' , dataPath: (dataPath || '') + &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">errorPath</span><span class="s2">+</span><span class="s4">&quot; , schemaPath: &quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">toQuotedString</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)+</span><span class="s4">&quot; , params: { type: '&quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">b</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">):</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;' } &quot;</span><span class="s2">,!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">messages</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; , message: 'should be &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">b</span><span class="s2">?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">):</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">w</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;' &quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">opts</span><span class="s2">.</span><span class="s1">verbose</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; , schema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot; , parentSchema: validate.schema&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schemaPath</span><span class="s2">+</span><span class="s4">&quot; , data: &quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">):</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; {} &quot;</span><span class="s2">,</span><span class="s1">D</span><span class="s2">=</span><span class="s1">r</span><span class="s2">,</span><span class="s1">r</span><span class="s2">=</span><span class="s1">U</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">(),</span><span class="s1">r</span><span class="s2">+=!</span><span class="s1">a</span><span class="s2">.</span><span class="s1">compositeRule</span><span class="s2">&amp;&amp;</span><span class="s1">p</span><span class="s2">?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">async</span><span class="s2">?</span><span class="s4">&quot; throw new ValidationError([&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;]); &quot;</span><span class="s2">:</span><span class="s4">&quot; validate.errors = [&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;]; return false; &quot;</span><span class="s2">:</span><span class="s4">&quot; var err = &quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;;  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; } &quot;</span><span class="s2">)),</span><span class="s1">p</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (errors === &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">v</span><span class="s2">?</span><span class="s4">&quot;0&quot;</span><span class="s2">:</span><span class="s4">&quot;errs_&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot;) { &quot;</span><span class="s2">,</span><span class="s1">E</span><span class="s2">+=</span><span class="s4">&quot;}&quot;</span><span class="s2">)}}</span><span class="s3">function </span><span class="s1">Z</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">rules</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">t</span><span class="s2">++)</span><span class="s3">if</span><span class="s2">(</span><span class="s1">G</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">]))</span><span class="s3">return </span><span class="s5">1</span><span class="s2">}</span><span class="s3">function </span><span class="s1">G</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">e</span><span class="s2">.</span><span class="s1">keyword</span><span class="s2">]||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">implements</span><span class="s2">&amp;&amp;</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">implements</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">t</span><span class="s2">++)</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">[</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">]])</span><span class="s3">return </span><span class="s5">1</span><span class="s2">}(</span><span class="s1">e</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">p</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">E</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">),</span><span class="s1">v</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">?(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; if (errors === 0) return data;           &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; else throw new ValidationError(vErrors); &quot;</span><span class="s2">):(</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; validate.errors = vErrors; &quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; return errors === 0;       &quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; }; return validate;&quot;</span><span class="s2">):</span><span class="s1">r</span><span class="s2">+=</span><span class="s4">&quot; var &quot;</span><span class="s2">+</span><span class="s1">m</span><span class="s2">+</span><span class="s4">&quot; = errors === errs_&quot;</span><span class="s2">+</span><span class="s1">l</span><span class="s2">+</span><span class="s4">&quot;;&quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">}},{}],</span><span class="s5">39</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s6">/^[a-z_$][a-z0-9_$-]*$/i</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./dotjs/custom&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;./definition_schema&quot;</span><span class="s2">);</span><span class="s3">function </span><span class="s1">s</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s1">s</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s3">null</span><span class="s2">;</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_validateKeyword</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_validateKeyword</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))</span><span class="s3">return</span><span class="s2">!</span><span class="s5">0</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">,</span><span class="s1">r</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;custom keyword definition is invalid: &quot;</span><span class="s2">+</span><span class="s3">this</span><span class="s2">.</span><span class="s1">errorsText</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">));</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">}</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">={</span><span class="s1">add</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">n</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">[</span><span class="s1">e</span><span class="s2">])</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Keyword &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot; is already defined&quot;</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">i</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Keyword &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot; is not a valid identifier&quot;</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">){</span><span class="s3">this</span><span class="s2">.</span><span class="s1">validateKeyword</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">type</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">t</span><span class="s2">))</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">a</span><span class="s2">&lt;</span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">a</span><span class="s2">++)</span><span class="s1">o</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">[</span><span class="s1">a</span><span class="s2">],</span><span class="s1">r</span><span class="s2">);</span><span class="s3">else </span><span class="s1">o</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">r</span><span class="s2">);</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">metaSchema</span><span class="s2">;</span><span class="s1">s</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">={</span><span class="s1">anyOf</span><span class="s2">:[</span><span class="s1">s</span><span class="s2">,{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#&quot;</span><span class="s2">}]}),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">))}</span><span class="s3">function </span><span class="s1">o</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">s</span><span class="s2">&lt;</span><span class="s1">n</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">s</span><span class="s2">++){</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=</span><span class="s1">n</span><span class="s2">[</span><span class="s1">s</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">type</span><span class="s2">==</span><span class="s1">r</span><span class="s2">){</span><span class="s1">a</span><span class="s2">=</span><span class="s1">o</span><span class="s2">;</span><span class="s3">break</span><span class="s2">}}</span><span class="s1">a</span><span class="s2">||</span><span class="s1">n</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">a</span><span class="s2">={</span><span class="s1">type</span><span class="s2">:</span><span class="s1">r</span><span class="s2">,</span><span class="s1">rules</span><span class="s2">:[]});</span><span class="s3">var </span><span class="s1">i</span><span class="s2">={</span><span class="s1">keyword</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">definition</span><span class="s2">:</span><span class="s1">t</span><span class="s2">,</span><span class="s1">custom</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">code</span><span class="s2">:</span><span class="s1">l</span><span class="s2">,</span><span class="s3">implements</span><span class="s2">:</span><span class="s1">t</span><span class="s2">.</span><span class="s1">implements</span><span class="s2">};</span><span class="s1">a</span><span class="s2">.</span><span class="s1">rules</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">i</span><span class="s2">),</span><span class="s1">n</span><span class="s2">.</span><span class="s1">custom</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]=</span><span class="s1">i</span><span class="s2">}</span><span class="s3">return </span><span class="s1">n</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">all</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]=!</span><span class="s5">0</span><span class="s2">,</span><span class="s3">this</span><span class="s2">},</span><span class="s1">get</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">custom</span><span class="s2">[</span><span class="s1">e</span><span class="s2">];</span><span class="s3">return </span><span class="s1">r</span><span class="s2">?</span><span class="s1">r</span><span class="s2">.</span><span class="s1">definition</span><span class="s2">:</span><span class="s3">this</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]||!</span><span class="s5">1</span><span class="s2">},</span><span class="s1">remove</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">;</span><span class="s3">delete </span><span class="s1">r</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">[</span><span class="s1">e</span><span class="s2">],</span><span class="s3">delete </span><span class="s1">r</span><span class="s2">.</span><span class="s1">all</span><span class="s2">[</span><span class="s1">e</span><span class="s2">],</span><span class="s3">delete </span><span class="s1">r</span><span class="s2">.</span><span class="s1">custom</span><span class="s2">[</span><span class="s1">e</span><span class="s2">];</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">t</span><span class="s2">++)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">].</span><span class="s1">rules</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">s</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">s</span><span class="s2">++)</span><span class="s3">if</span><span class="s2">(</span><span class="s1">a</span><span class="s2">[</span><span class="s1">s</span><span class="s2">].</span><span class="s1">keyword</span><span class="s2">==</span><span class="s1">e</span><span class="s2">){</span><span class="s1">a</span><span class="s2">.</span><span class="s1">splice</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,</span><span class="s5">1</span><span class="s2">);</span><span class="s3">break</span><span class="s2">}</span><span class="s3">return this</span><span class="s2">},</span><span class="s1">validate</span><span class="s2">:</span><span class="s1">s</span><span class="s2">}},{</span><span class="s4">&quot;./definition_schema&quot;</span><span class="s2">:</span><span class="s5">12</span><span class="s2">,</span><span class="s4">&quot;./dotjs/custom&quot;</span><span class="s2">:</span><span class="s5">22</span><span class="s2">}],</span><span class="s5">40</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">={</span><span class="s1">$schema</span><span class="s2">:</span><span class="s4">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="s2">,</span><span class="s1">$id</span><span class="s2">:</span><span class="s4">&quot;https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#&quot;</span><span class="s2">,</span><span class="s1">description</span><span class="s2">:</span><span class="s4">&quot;Meta-schema for $data reference (JSON Schema extension proposal)&quot;</span><span class="s2">,</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s1">required</span><span class="s2">:[</span><span class="s4">&quot;$data&quot;</span><span class="s2">],</span><span class="s1">properties</span><span class="s2">:{</span><span class="s1">$data</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">,</span><span class="s1">anyOf</span><span class="s2">:[{</span><span class="s1">format</span><span class="s2">:</span><span class="s4">&quot;relative-json-pointer&quot;</span><span class="s2">},{</span><span class="s1">format</span><span class="s2">:</span><span class="s4">&quot;json-pointer&quot;</span><span class="s2">}]}},</span><span class="s1">additionalProperties</span><span class="s2">:!</span><span class="s5">1</span><span class="s2">}},{}],</span><span class="s5">41</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">={</span><span class="s1">$schema</span><span class="s2">:</span><span class="s4">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="s2">,</span><span class="s1">$id</span><span class="s2">:</span><span class="s4">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="s2">,</span><span class="s1">title</span><span class="s2">:</span><span class="s4">&quot;Core schema meta-schema&quot;</span><span class="s2">,</span><span class="s1">definitions</span><span class="s2">:{</span><span class="s1">schemaArray</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s1">minItems</span><span class="s2">:</span><span class="s5">1</span><span class="s2">,</span><span class="s1">items</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">}},</span><span class="s1">nonNegativeInteger</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;integer&quot;</span><span class="s2">,</span><span class="s1">minimum</span><span class="s2">:</span><span class="s5">0</span><span class="s2">},</span><span class="s1">nonNegativeIntegerDefault0</span><span class="s2">:{</span><span class="s1">allOf</span><span class="s2">:[{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/nonNegativeInteger&quot;</span><span class="s2">},{</span><span class="s3">default</span><span class="s2">:</span><span class="s5">0</span><span class="s2">}]},</span><span class="s1">simpleTypes</span><span class="s2">:{</span><span class="s3">enum</span><span class="s2">:[</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s4">&quot;boolean&quot;</span><span class="s2">,</span><span class="s4">&quot;integer&quot;</span><span class="s2">,</span><span class="s4">&quot;null&quot;</span><span class="s2">,</span><span class="s4">&quot;number&quot;</span><span class="s2">,</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s4">&quot;string&quot;</span><span class="s2">]},</span><span class="s1">stringArray</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s1">items</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">},</span><span class="s1">uniqueItems</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s3">default</span><span class="s2">:[]}},</span><span class="s1">type</span><span class="s2">:[</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s4">&quot;boolean&quot;</span><span class="s2">],</span><span class="s1">properties</span><span class="s2">:{</span><span class="s1">$id</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">,</span><span class="s1">format</span><span class="s2">:</span><span class="s4">&quot;uri-reference&quot;</span><span class="s2">},</span><span class="s1">$schema</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">,</span><span class="s1">format</span><span class="s2">:</span><span class="s4">&quot;uri&quot;</span><span class="s2">},</span><span class="s1">$ref</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">,</span><span class="s1">format</span><span class="s2">:</span><span class="s4">&quot;uri-reference&quot;</span><span class="s2">},</span><span class="s1">$comment</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">},</span><span class="s1">title</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">},</span><span class="s1">description</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">},</span><span class="s3">default</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">readOnly</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">,</span><span class="s3">default</span><span class="s2">:!</span><span class="s5">1</span><span class="s2">},</span><span class="s1">examples</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s1">items</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">},</span><span class="s1">multipleOf</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;number&quot;</span><span class="s2">,</span><span class="s1">exclusiveMinimum</span><span class="s2">:</span><span class="s5">0</span><span class="s2">},</span><span class="s1">maximum</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;number&quot;</span><span class="s2">},</span><span class="s1">exclusiveMaximum</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;number&quot;</span><span class="s2">},</span><span class="s1">minimum</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;number&quot;</span><span class="s2">},</span><span class="s1">exclusiveMinimum</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;number&quot;</span><span class="s2">},</span><span class="s1">maxLength</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/nonNegativeInteger&quot;</span><span class="s2">},</span><span class="s1">minLength</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/nonNegativeIntegerDefault0&quot;</span><span class="s2">},</span><span class="s1">pattern</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">,</span><span class="s1">format</span><span class="s2">:</span><span class="s4">&quot;regex&quot;</span><span class="s2">},</span><span class="s1">additionalItems</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s1">items</span><span class="s2">:{</span><span class="s1">anyOf</span><span class="s2">:[{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/schemaArray&quot;</span><span class="s2">}],</span><span class="s3">default</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">},</span><span class="s1">maxItems</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/nonNegativeInteger&quot;</span><span class="s2">},</span><span class="s1">minItems</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/nonNegativeIntegerDefault0&quot;</span><span class="s2">},</span><span class="s1">uniqueItems</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">,</span><span class="s3">default</span><span class="s2">:!</span><span class="s5">1</span><span class="s2">},</span><span class="s1">contains</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s1">maxProperties</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/nonNegativeInteger&quot;</span><span class="s2">},</span><span class="s1">minProperties</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/nonNegativeIntegerDefault0&quot;</span><span class="s2">},</span><span class="s1">required</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/stringArray&quot;</span><span class="s2">},</span><span class="s1">additionalProperties</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s1">definitions</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s1">additionalProperties</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s3">default</span><span class="s2">:{}},</span><span class="s1">properties</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s1">additionalProperties</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s3">default</span><span class="s2">:{}},</span><span class="s1">patternProperties</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s1">additionalProperties</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s1">propertyNames</span><span class="s2">:{</span><span class="s1">format</span><span class="s2">:</span><span class="s4">&quot;regex&quot;</span><span class="s2">},</span><span class="s3">default</span><span class="s2">:{}},</span><span class="s1">dependencies</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;object&quot;</span><span class="s2">,</span><span class="s1">additionalProperties</span><span class="s2">:{</span><span class="s1">anyOf</span><span class="s2">:[{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/stringArray&quot;</span><span class="s2">}]}},</span><span class="s1">propertyNames</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s3">const</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s3">enum</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s1">items</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">minItems</span><span class="s2">:</span><span class="s5">1</span><span class="s2">,</span><span class="s1">uniqueItems</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">},</span><span class="s1">type</span><span class="s2">:{</span><span class="s1">anyOf</span><span class="s2">:[{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/simpleTypes&quot;</span><span class="s2">},{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;array&quot;</span><span class="s2">,</span><span class="s1">items</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/simpleTypes&quot;</span><span class="s2">},</span><span class="s1">minItems</span><span class="s2">:</span><span class="s5">1</span><span class="s2">,</span><span class="s1">uniqueItems</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">}]},</span><span class="s1">format</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">},</span><span class="s1">contentMediaType</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">},</span><span class="s1">contentEncoding</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;string&quot;</span><span class="s2">},</span><span class="s3">if</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s1">then</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s3">else</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">},</span><span class="s1">allOf</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/schemaArray&quot;</span><span class="s2">},</span><span class="s1">anyOf</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/schemaArray&quot;</span><span class="s2">},</span><span class="s1">oneOf</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#/definitions/schemaArray&quot;</span><span class="s2">},</span><span class="s1">not</span><span class="s2">:{</span><span class="s1">$ref</span><span class="s2">:</span><span class="s4">&quot;#&quot;</span><span class="s2">}},</span><span class="s3">default</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">}},{}],</span><span class="s5">42</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function </span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">===</span><span class="s1">t</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s5">0</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s1">t</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">t</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">constructor</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">constructor</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">var </span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)){</span><span class="s3">if</span><span class="s2">((</span><span class="s1">a</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">)!=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">a</span><span class="s2">;</span><span class="s5">0</span><span class="s2">!=</span><span class="s1">s</span><span class="s2">--;)</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s1">s</span><span class="s2">],</span><span class="s1">t</span><span class="s2">[</span><span class="s1">s</span><span class="s2">]))</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">return</span><span class="s2">!</span><span class="s5">0</span><span class="s2">}</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">constructor</span><span class="s2">===</span><span class="s1">RegExp</span><span class="s2">)</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">source</span><span class="s2">===</span><span class="s1">t</span><span class="s2">.</span><span class="s1">source</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">flags</span><span class="s2">===</span><span class="s1">t</span><span class="s2">.</span><span class="s1">flags</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">!==</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">)</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">()===</span><span class="s1">t</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">();</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">!==</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">)</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">()===</span><span class="s1">t</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">();</span><span class="s3">if</span><span class="s2">((</span><span class="s1">a</span><span class="s2">=(</span><span class="s1">o</span><span class="s2">=</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)).</span><span class="s1">length</span><span class="s2">)!==</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">t</span><span class="s2">).</span><span class="s1">length</span><span class="s2">)</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">a</span><span class="s2">;</span><span class="s5">0</span><span class="s2">!=</span><span class="s1">s</span><span class="s2">--;)</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">hasOwnProperty</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">o</span><span class="s2">[</span><span class="s1">s</span><span class="s2">]))</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">a</span><span class="s2">;</span><span class="s5">0</span><span class="s2">!=</span><span class="s1">s</span><span class="s2">--;){</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">o</span><span class="s2">[</span><span class="s1">s</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s1">i</span><span class="s2">],</span><span class="s1">t</span><span class="s2">[</span><span class="s1">i</span><span class="s2">]))</span><span class="s3">return</span><span class="s2">!</span><span class="s5">1</span><span class="s2">}</span><span class="s3">return</span><span class="s2">!</span><span class="s5">0</span><span class="s2">}</span><span class="s3">return </span><span class="s1">r</span><span class="s2">!=</span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s1">t</span><span class="s2">!=</span><span class="s1">t</span><span class="s2">}},{}],</span><span class="s5">43</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof</span><span class="s2">(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">r</span><span class="s2">||{})&amp;&amp;(</span><span class="s1">r</span><span class="s2">={</span><span class="s1">cmp</span><span class="s2">:</span><span class="s1">r</span><span class="s2">});</span><span class="s3">var </span><span class="s1">a</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">.</span><span class="s1">cycles</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">cycles</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">cmp</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">cmp</span><span class="s2">,</span><span class="s3">function</span><span class="s2">(</span><span class="s1">t</span><span class="s2">){</span><span class="s3">return function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return </span><span class="s1">a</span><span class="s2">({</span><span class="s1">key</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">value</span><span class="s2">:</span><span class="s1">t</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]},{</span><span class="s1">key</span><span class="s2">:</span><span class="s1">r</span><span class="s2">,</span><span class="s1">value</span><span class="s2">:</span><span class="s1">t</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]})}}),</span><span class="s1">u</span><span class="s2">=[];</span><span class="s3">return function </span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">toJSON</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">.</span><span class="s1">toJSON</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">toJSON</span><span class="s2">()),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;number&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">)</span><span class="s3">return </span><span class="s1">isFinite</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)?</span><span class="s4">&quot;&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">:</span><span class="s4">&quot;null&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;object&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">)</span><span class="s3">return </span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">r</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)){</span><span class="s3">for</span><span class="s2">(</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;[&quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">o</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">o</span><span class="s2">++)</span><span class="s1">o</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot;,&quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s1">o</span><span class="s2">])||</span><span class="s4">&quot;null&quot;</span><span class="s2">;</span><span class="s3">return </span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;]&quot;</span><span class="s2">}</span><span class="s3">if</span><span class="s2">(</span><span class="s3">null</span><span class="s2">===</span><span class="s1">r</span><span class="s2">)</span><span class="s3">return</span><span class="s4">&quot;null&quot;</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(-</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">u</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">l</span><span class="s2">)</span><span class="s3">return </span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s4">&quot;__cycle__&quot;</span><span class="s2">);</span><span class="s3">throw new </span><span class="s1">TypeError</span><span class="s2">(</span><span class="s4">&quot;Converting circular structure to JSON&quot;</span><span class="s2">)}</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">keys</span><span class="s2">(</span><span class="s1">r</span><span class="s2">).</span><span class="s1">sort</span><span class="s2">(</span><span class="s1">c</span><span class="s2">&amp;&amp;</span><span class="s1">c</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)),</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">o</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">o</span><span class="s2">++){</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">a</span><span class="s2">[</span><span class="s1">o</span><span class="s2">],</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s1">i</span><span class="s2">]);</span><span class="s1">n</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s4">&quot;,&quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">+=</span><span class="s1">JSON</span><span class="s2">.</span><span class="s1">stringify</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)+</span><span class="s4">&quot;:&quot;</span><span class="s2">+</span><span class="s1">n</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">u</span><span class="s2">.</span><span class="s1">splice</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s5">1</span><span class="s2">),</span><span class="s4">&quot;{&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;}&quot;</span><span class="s2">}}(</span><span class="s1">e</span><span class="s2">)}},{}],</span><span class="s5">44</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">m</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">r</span><span class="s2">,</span><span class="s1">r</span><span class="s2">={}),</span><span class="s3">function </span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">u</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">s</span><span class="s2">&amp;&amp;!</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">s</span><span class="s2">)){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">h </span><span class="s3">in </span><span class="s1">t</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">u</span><span class="s2">),</span><span class="s1">s</span><span class="s2">){</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s1">h</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">d</span><span class="s2">)){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">h </span><span class="s3">in </span><span class="s1">m</span><span class="s2">.</span><span class="s1">arrayKeywords</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">p</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">p</span><span class="s2">&lt;</span><span class="s1">d</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">p</span><span class="s2">++)</span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">p</span><span class="s2">],</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">h</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">p</span><span class="s2">)}</span><span class="s3">else if</span><span class="s2">(</span><span class="s1">h </span><span class="s3">in </span><span class="s1">m</span><span class="s2">.</span><span class="s1">propsKeywords</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">d</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">d</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">f </span><span class="s3">in </span><span class="s1">d</span><span class="s2">)</span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">f</span><span class="s2">],</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/~/g</span><span class="s2">,</span><span class="s4">&quot;~0&quot;</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/\//g</span><span class="s2">,</span><span class="s4">&quot;~1&quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">h</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">f</span><span class="s2">)}</span><span class="s3">else</span><span class="s2">(</span><span class="s1">h </span><span class="s3">in </span><span class="s1">m</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">||</span><span class="s1">r</span><span class="s2">.</span><span class="s1">allKeys</span><span class="s2">&amp;&amp;!(</span><span class="s1">h </span><span class="s3">in </span><span class="s1">m</span><span class="s2">.</span><span class="s1">skipKeywords</span><span class="s2">))&amp;&amp;</span><span class="s1">e</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">d</span><span class="s2">,</span><span class="s1">o</span><span class="s2">+</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">h</span><span class="s2">,</span><span class="s1">s</span><span class="s2">)}</span><span class="s1">a</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">c</span><span class="s2">,</span><span class="s1">u</span><span class="s2">)}}(</span><span class="s1">r</span><span class="s2">,</span><span class="s4">&quot;function&quot;</span><span class="s2">==</span><span class="s3">typeof</span><span class="s2">(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">cb</span><span class="s2">||</span><span class="s1">t</span><span class="s2">)?</span><span class="s1">t</span><span class="s2">:</span><span class="s1">t</span><span class="s2">.</span><span class="s1">pre</span><span class="s2">||</span><span class="s3">function</span><span class="s2">(){},</span><span class="s1">t</span><span class="s2">.</span><span class="s1">post</span><span class="s2">||</span><span class="s3">function</span><span class="s2">(){},</span><span class="s1">e</span><span class="s2">,</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">)};</span><span class="s1">m</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">={</span><span class="s1">additionalItems</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">items</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">contains</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">additionalProperties</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">propertyNames</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">not</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">},</span><span class="s1">m</span><span class="s2">.</span><span class="s1">arrayKeywords</span><span class="s2">={</span><span class="s1">items</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">allOf</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">anyOf</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">oneOf</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">},</span><span class="s1">m</span><span class="s2">.</span><span class="s1">propsKeywords</span><span class="s2">={</span><span class="s1">definitions</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">properties</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">patternProperties</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">dependencies</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">},</span><span class="s1">m</span><span class="s2">.</span><span class="s1">skipKeywords</span><span class="s2">={</span><span class="s3">default</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s3">enum</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s3">const</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">required</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">maximum</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">minimum</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">exclusiveMaximum</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">exclusiveMinimum</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">multipleOf</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">maxLength</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">minLength</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">pattern</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">format</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">maxItems</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">minItems</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">uniqueItems</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">maxProperties</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">minProperties</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">}},{}],</span><span class="s5">45</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">;</span><span class="s1">a</span><span class="s2">=</span><span class="s3">this</span><span class="s2">,</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">function </span><span class="s1">J</span><span class="s2">(){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">e</span><span class="s2">=</span><span class="s1">arguments</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">r</span><span class="s2">=</span><span class="s1">Array</span><span class="s2">(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">;</span><span class="s1">t</span><span class="s2">++)</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">]=</span><span class="s1">arguments</span><span class="s2">[</span><span class="s1">t</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s5">1</span><span class="s2">&lt;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">){</span><span class="s1">r</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]=</span><span class="s1">r</span><span class="s2">[</span><span class="s5">0</span><span class="s2">].</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">0</span><span class="s2">,-</span><span class="s5">1</span><span class="s2">);</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s5">1</span><span class="s2">;</span><span class="s1">s</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">;++</span><span class="s1">s</span><span class="s2">)</span><span class="s1">r</span><span class="s2">[</span><span class="s1">s</span><span class="s2">]=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">s</span><span class="s2">].</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">1</span><span class="s2">,-</span><span class="s5">1</span><span class="s2">);</span><span class="s3">return </span><span class="s1">r</span><span class="s2">[</span><span class="s1">a</span><span class="s2">]=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">a</span><span class="s2">].</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">1</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;&quot;</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">r</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]}</span><span class="s3">function </span><span class="s1">Z</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;(?:&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">}</span><span class="s3">function </span><span class="s1">a</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">e</span><span class="s2">?</span><span class="s4">&quot;undefined&quot;</span><span class="s2">:</span><span class="s3">null</span><span class="s2">===</span><span class="s1">e</span><span class="s2">?</span><span class="s4">&quot;null&quot;</span><span class="s2">:</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">e</span><span class="s2">).</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot; &quot;</span><span class="s2">).</span><span class="s1">pop</span><span class="s2">().</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;]&quot;</span><span class="s2">).</span><span class="s1">shift</span><span class="s2">().</span><span class="s1">toLowerCase</span><span class="s2">()}</span><span class="s3">function </span><span class="s1">f</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">toUpperCase</span><span class="s2">()}</span><span class="s3">function </span><span class="s1">r</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s4">&quot;[A-Za-z]&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s4">&quot;[0-9]&quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">J</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s4">&quot;[A-Fa-f]&quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;%[EFef]&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;%[89A-Fa-f]&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s1">a</span><span class="s2">)),</span><span class="s1">o</span><span class="s2">=</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">!</span><span class="s3">\\</span><span class="s4">$</span><span class="s3">\\</span><span class="s4">&amp;</span><span class="s3">\\</span><span class="s4">'</span><span class="s3">\\</span><span class="s4">(</span><span class="s3">\\</span><span class="s4">)</span><span class="s3">\\</span><span class="s4">*</span><span class="s3">\\</span><span class="s4">+</span><span class="s3">\\</span><span class="s4">,</span><span class="s3">\\</span><span class="s4">;</span><span class="s3">\\</span><span class="s4">=]&quot;</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">?</span><span class="s3">\\</span><span class="s4">#</span><span class="s3">\\</span><span class="s4">[</span><span class="s3">\\</span><span class="s4">]</span><span class="s3">\\</span><span class="s4">@]&quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">?</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">uE000-</span><span class="s3">\\</span><span class="s4">uF8FF]&quot;</span><span class="s2">:</span><span class="s4">&quot;[]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">J</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">-</span><span class="s3">\\</span><span class="s4">.</span><span class="s3">\\</span><span class="s4">_</span><span class="s3">\\</span><span class="s4">~]&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">?</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">xA0-</span><span class="s3">\\</span><span class="s4">u200D</span><span class="s3">\\</span><span class="s4">u2010-</span><span class="s3">\\</span><span class="s4">u2029</span><span class="s3">\\</span><span class="s4">u202F-</span><span class="s3">\\</span><span class="s4">uD7FF</span><span class="s3">\\</span><span class="s4">uF900-</span><span class="s3">\\</span><span class="s4">uFDCF</span><span class="s3">\\</span><span class="s4">uFDF0-</span><span class="s3">\\</span><span class="s4">uFFEF]&quot;</span><span class="s2">:</span><span class="s4">&quot;[]&quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">r</span><span class="s2">+</span><span class="s1">J</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">+</span><span class="s3">\\</span><span class="s4">-</span><span class="s3">\\</span><span class="s4">.]&quot;</span><span class="s2">)+</span><span class="s4">&quot;*&quot;</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">:]&quot;</span><span class="s2">))+</span><span class="s4">&quot;*&quot;</span><span class="s2">),</span><span class="s1">h</span><span class="s2">=(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9][0-9])|(?:[1-9][0-9])|&quot;</span><span class="s2">+</span><span class="s1">t</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9][0-9])|(?:0?[1-9][0-9])|0?0?&quot;</span><span class="s2">+</span><span class="s1">t</span><span class="s2">)),</span><span class="s1">d</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">.&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">.&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">.&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">),</span><span class="s1">p</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;{1,4}&quot;</span><span class="s2">),</span><span class="s1">f</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">),</span><span class="s1">m</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{6}&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">),</span><span class="s1">v</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{5}&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">),</span><span class="s1">y</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot;?</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{4}&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">),</span><span class="s1">g</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{0,1}&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot;?</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{3}&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">),</span><span class="s1">P</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{0,2}&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot;?</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{2}&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">),</span><span class="s1">E</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{0,3}&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot;?</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">),</span><span class="s1">w</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{0,4}&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot;?</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">f</span><span class="s2">),</span><span class="s1">b</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{0,5}&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot;?</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">),</span><span class="s1">S</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">p</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">)+</span><span class="s4">&quot;{0,6}&quot;</span><span class="s2">+</span><span class="s1">p</span><span class="s2">)+</span><span class="s4">&quot;?</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">),</span><span class="s1">_</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">([</span><span class="s1">m</span><span class="s2">,</span><span class="s1">v</span><span class="s2">,</span><span class="s1">y</span><span class="s2">,</span><span class="s1">g</span><span class="s2">,</span><span class="s1">P</span><span class="s2">,</span><span class="s1">E</span><span class="s2">,</span><span class="s1">w</span><span class="s2">,</span><span class="s1">b</span><span class="s2">,</span><span class="s1">S</span><span class="s2">].</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;|&quot;</span><span class="s2">)),</span><span class="s1">F</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">l</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">s</span><span class="s2">)+</span><span class="s4">&quot;+&quot;</span><span class="s2">),</span><span class="s1">x</span><span class="s2">=(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">%25&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">_</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">%25|</span><span class="s3">\\</span><span class="s4">%(?!&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;{2})&quot;</span><span class="s2">)+</span><span class="s1">F</span><span class="s2">)),</span><span class="s1">R</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;[vV]&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;+</span><span class="s3">\\</span><span class="s4">.&quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">:]&quot;</span><span class="s2">)+</span><span class="s4">&quot;+&quot;</span><span class="s2">),</span><span class="s1">$</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">[&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">x</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">R</span><span class="s2">)+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">]&quot;</span><span class="s2">),</span><span class="s1">j</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">))+</span><span class="s4">&quot;*&quot;</span><span class="s2">),</span><span class="s1">D</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">$</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;(?!&quot;</span><span class="s2">+</span><span class="s1">j</span><span class="s2">+</span><span class="s4">&quot;)|&quot;</span><span class="s2">+</span><span class="s1">j</span><span class="s2">),</span><span class="s1">O</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+</span><span class="s4">&quot;*&quot;</span><span class="s2">),</span><span class="s1">I</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;@&quot;</span><span class="s2">)+</span><span class="s4">&quot;?&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">)+</span><span class="s4">&quot;?&quot;</span><span class="s2">),</span><span class="s1">A</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">@]&quot;</span><span class="s2">)),</span><span class="s1">k</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">A</span><span class="s2">+</span><span class="s4">&quot;*&quot;</span><span class="s2">),</span><span class="s1">C</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">A</span><span class="s2">+</span><span class="s4">&quot;+&quot;</span><span class="s2">),</span><span class="s1">L</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">s</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">@]&quot;</span><span class="s2">))+</span><span class="s4">&quot;+&quot;</span><span class="s2">),</span><span class="s1">N</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">/&quot;</span><span class="s2">+</span><span class="s1">k</span><span class="s2">)+</span><span class="s4">&quot;*&quot;</span><span class="s2">),</span><span class="s1">q</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">/&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">C</span><span class="s2">+</span><span class="s1">N</span><span class="s2">)+</span><span class="s4">&quot;?&quot;</span><span class="s2">),</span><span class="s1">z</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">L</span><span class="s2">+</span><span class="s1">N</span><span class="s2">),</span><span class="s1">T</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">C</span><span class="s2">+</span><span class="s1">N</span><span class="s2">),</span><span class="s1">Q</span><span class="s2">=</span><span class="s4">&quot;(?!&quot;</span><span class="s2">+</span><span class="s1">A</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">,</span><span class="s1">V</span><span class="s2">=(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">q</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">T</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Q</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">A</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">?]&quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">))+</span><span class="s4">&quot;*&quot;</span><span class="s2">)),</span><span class="s1">U</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">A</span><span class="s2">+</span><span class="s4">&quot;|[</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">?]&quot;</span><span class="s2">)+</span><span class="s4">&quot;*&quot;</span><span class="s2">),</span><span class="s1">H</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">/&quot;</span><span class="s2">+</span><span class="s1">I</span><span class="s2">+</span><span class="s1">N</span><span class="s2">)+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">q</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">T</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Q</span><span class="s2">),</span><span class="s1">M</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">H</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">?&quot;</span><span class="s2">+</span><span class="s1">V</span><span class="s2">)+</span><span class="s4">&quot;?&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">#&quot;</span><span class="s2">+</span><span class="s1">U</span><span class="s2">)+</span><span class="s4">&quot;?&quot;</span><span class="s2">),</span><span class="s1">K</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">/&quot;</span><span class="s2">+</span><span class="s1">I</span><span class="s2">+</span><span class="s1">N</span><span class="s2">)+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">q</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Q</span><span class="s2">),</span><span class="s1">B</span><span class="s2">=</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">K</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">?&quot;</span><span class="s2">+</span><span class="s1">V</span><span class="s2">)+</span><span class="s4">&quot;?&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">#&quot;</span><span class="s2">+</span><span class="s1">U</span><span class="s2">)+</span><span class="s4">&quot;?&quot;</span><span class="s2">);</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">M</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">B</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:&quot;</span><span class="s2">+</span><span class="s1">H</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">?&quot;</span><span class="s2">+</span><span class="s1">V</span><span class="s2">)+</span><span class="s4">&quot;?&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">/(&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;)@&quot;</span><span class="s2">)+</span><span class="s4">&quot;?(&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:(&quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">)+</span><span class="s4">&quot;?)&quot;</span><span class="s2">)+</span><span class="s4">&quot;?(&quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">q</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">T</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Q</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">?(&quot;</span><span class="s2">+</span><span class="s1">V</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">#(&quot;</span><span class="s2">+</span><span class="s1">U</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">/(&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;)@&quot;</span><span class="s2">)+</span><span class="s4">&quot;?(&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:(&quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">)+</span><span class="s4">&quot;?)&quot;</span><span class="s2">)+</span><span class="s4">&quot;?(&quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">q</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">z</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Q</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">?(&quot;</span><span class="s2">+</span><span class="s1">V</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">#(&quot;</span><span class="s2">+</span><span class="s1">U</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">/(&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;)@&quot;</span><span class="s2">)+</span><span class="s4">&quot;?(&quot;</span><span class="s2">+</span><span class="s1">D</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:(&quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">)+</span><span class="s4">&quot;?)&quot;</span><span class="s2">)+</span><span class="s4">&quot;?(&quot;</span><span class="s2">+</span><span class="s1">N</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">q</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">T</span><span class="s2">+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Q</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">?(&quot;</span><span class="s2">+</span><span class="s1">V</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">#(&quot;</span><span class="s2">+</span><span class="s1">U</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">+</span><span class="s4">&quot;)@&quot;</span><span class="s2">),</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">:(&quot;</span><span class="s2">+</span><span class="s1">O</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">);</span><span class="s3">return</span><span class="s2">{</span><span class="s1">NOT_SCHEME</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^]&quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">+</span><span class="s3">\\</span><span class="s4">-</span><span class="s3">\\</span><span class="s4">.]&quot;</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">NOT_USERINFO</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^</span><span class="s3">\\</span><span class="s4">%</span><span class="s3">\\</span><span class="s4">:]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">NOT_HOST</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^</span><span class="s3">\\</span><span class="s4">%</span><span class="s3">\\</span><span class="s4">[</span><span class="s3">\\</span><span class="s4">]</span><span class="s3">\\</span><span class="s4">:]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">NOT_PATH</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^</span><span class="s3">\\</span><span class="s4">%</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">@]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">NOT_PATH_NOSCHEME</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^</span><span class="s3">\\</span><span class="s4">%</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">@]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">NOT_QUERY</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^</span><span class="s3">\\</span><span class="s4">%]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">@</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">?]&quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">NOT_FRAGMENT</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^</span><span class="s3">\\</span><span class="s4">%]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">@</span><span class="s3">\\</span><span class="s4">/</span><span class="s3">\\</span><span class="s4">?]&quot;</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">ESCAPE</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">o</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">UNRESERVED</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">l</span><span class="s2">,</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">OTHER_CHARS</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^</span><span class="s3">\\</span><span class="s4">%]&quot;</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">i</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">PCT_ENCODED</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">IPV4ADDRESS</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s4">&quot;^(&quot;</span><span class="s2">+</span><span class="s1">d</span><span class="s2">+</span><span class="s4">&quot;)$&quot;</span><span class="s2">),</span><span class="s1">IPV6ADDRESS</span><span class="s2">:</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s4">&quot;^</span><span class="s3">\\</span><span class="s4">[?(&quot;</span><span class="s2">+</span><span class="s1">_</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;</span><span class="s3">\\</span><span class="s4">%25|</span><span class="s3">\\</span><span class="s4">%(?!&quot;</span><span class="s2">+</span><span class="s1">a</span><span class="s2">+</span><span class="s4">&quot;{2})&quot;</span><span class="s2">)+</span><span class="s4">&quot;(&quot;</span><span class="s2">+</span><span class="s1">F</span><span class="s2">+</span><span class="s4">&quot;)&quot;</span><span class="s2">)+</span><span class="s4">&quot;?</span><span class="s3">\\</span><span class="s4">]?$&quot;</span><span class="s2">)}}</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s1">r</span><span class="s2">(!</span><span class="s5">1</span><span class="s2">),</span><span class="s1">h</span><span class="s2">=</span><span class="s1">r</span><span class="s2">(!</span><span class="s5">0</span><span class="s2">),</span><span class="s1">w</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))</span><span class="s3">return </span><span class="s1">e</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Symbol</span><span class="s2">.</span><span class="s1">iterator </span><span class="s3">in </span><span class="s1">Object</span><span class="s2">(</span><span class="s1">e</span><span class="s2">))</span><span class="s3">return function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=[],</span><span class="s1">a</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">;</span><span class="s3">try</span><span class="s2">{</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">Symbol</span><span class="s2">.</span><span class="s1">iterator</span><span class="s2">]();!(</span><span class="s1">a</span><span class="s2">=(</span><span class="s1">i</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">next</span><span class="s2">()).</span><span class="s1">done</span><span class="s2">)&amp;&amp;(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">i</span><span class="s2">.</span><span class="s1">value</span><span class="s2">),!</span><span class="s1">r</span><span class="s2">||</span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">);</span><span class="s1">a</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">);}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">s</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">}</span><span class="s3">finally</span><span class="s2">{</span><span class="s3">try</span><span class="s2">{!</span><span class="s1">a</span><span class="s2">&amp;&amp;</span><span class="s1">n</span><span class="s2">.</span><span class="s1">return</span><span class="s2">&amp;&amp;</span><span class="s1">n</span><span class="s2">.</span><span class="s1">return</span><span class="s2">()}</span><span class="s3">finally</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">)</span><span class="s3">throw </span><span class="s1">o</span><span class="s2">}}</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">);</span><span class="s3">throw new </span><span class="s1">TypeError</span><span class="s2">(</span><span class="s4">&quot;Invalid attempt to destructure non-iterable instance&quot;</span><span class="s2">)},</span><span class="s1">A</span><span class="s2">=</span><span class="s5">2147483647</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s6">/^xn--/</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s6">/[^\0-\x7E]/</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s6">/[\x2E\u3002\uFF0E\uFF61]/g</span><span class="s2">,</span><span class="s1">i</span><span class="s2">={</span><span class="s1">overflow</span><span class="s2">:</span><span class="s4">&quot;Overflow: input needs wider integers to process&quot;</span><span class="s2">,</span><span class="s4">&quot;not-basic&quot;</span><span class="s2">:</span><span class="s4">&quot;Illegal input &gt;= 0x80 (not a basic code point)&quot;</span><span class="s2">,</span><span class="s4">&quot;invalid-input&quot;</span><span class="s2">:</span><span class="s4">&quot;Invalid input&quot;</span><span class="s2">},</span><span class="s1">k</span><span class="s2">=</span><span class="s1">Math</span><span class="s2">.</span><span class="s1">floor</span><span class="s2">,</span><span class="s1">C</span><span class="s2">=</span><span class="s1">String</span><span class="s2">.</span><span class="s1">fromCharCode</span><span class="s2">;</span><span class="s3">function </span><span class="s1">L</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">throw new </span><span class="s1">RangeError</span><span class="s2">(</span><span class="s1">i</span><span class="s2">[</span><span class="s1">e</span><span class="s2">])}</span><span class="s3">function </span><span class="s1">n</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;@&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s3">return </span><span class="s5">1</span><span class="s2">&lt;</span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]+</span><span class="s4">&quot;@&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s5">1</span><span class="s2">]),</span><span class="s1">a</span><span class="s2">+</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=[],</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">a</span><span class="s2">--;)</span><span class="s1">t</span><span class="s2">[</span><span class="s1">a</span><span class="s2">]=</span><span class="s1">r</span><span class="s2">(</span><span class="s1">e</span><span class="s2">[</span><span class="s1">a</span><span class="s2">]);</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}((</span><span class="s1">e</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">o</span><span class="s2">,</span><span class="s4">&quot;.&quot;</span><span class="s2">)).</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;.&quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">).</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;.&quot;</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">N</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=[],</span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">;){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">charCodeAt</span><span class="s2">(</span><span class="s1">t</span><span class="s2">++);</span><span class="s5">55296</span><span class="s2">&lt;=</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">&lt;=</span><span class="s5">56319</span><span class="s2">&amp;&amp;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">?</span><span class="s5">56320</span><span class="s2">==(</span><span class="s5">64512</span><span class="s2">&amp;(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">charCodeAt</span><span class="s2">(</span><span class="s1">t</span><span class="s2">++)))?</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(((</span><span class="s5">1023</span><span class="s2">&amp;</span><span class="s1">o</span><span class="s2">)&lt;&lt;</span><span class="s5">10</span><span class="s2">)+(</span><span class="s5">1023</span><span class="s2">&amp;</span><span class="s1">s</span><span class="s2">)+</span><span class="s5">65536</span><span class="s2">):(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">o</span><span class="s2">),</span><span class="s1">t</span><span class="s2">--):</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">o</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">r</span><span class="s2">}</span><span class="s3">function </span><span class="s1">q</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">+</span><span class="s5">22</span><span class="s2">+</span><span class="s5">75</span><span class="s2">*(</span><span class="s1">e</span><span class="s2">&lt;</span><span class="s5">26</span><span class="s2">)-((</span><span class="s5">0</span><span class="s2">!=</span><span class="s1">r</span><span class="s2">)&lt;&lt;</span><span class="s5">5</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">z</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s1">e</span><span class="s2">=</span><span class="s1">t</span><span class="s2">?</span><span class="s1">k</span><span class="s2">(</span><span class="s1">e</span><span class="s2">/</span><span class="s5">700</span><span class="s2">):</span><span class="s1">e</span><span class="s2">&gt;&gt;</span><span class="s5">1</span><span class="s2">,</span><span class="s1">e</span><span class="s2">+=</span><span class="s1">k</span><span class="s2">(</span><span class="s1">e</span><span class="s2">/</span><span class="s1">r</span><span class="s2">);</span><span class="s5">455</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">;</span><span class="s1">a</span><span class="s2">+=</span><span class="s5">36</span><span class="s2">)</span><span class="s1">e</span><span class="s2">=</span><span class="s1">k</span><span class="s2">(</span><span class="s1">e</span><span class="s2">/</span><span class="s5">35</span><span class="s2">);</span><span class="s3">return </span><span class="s1">k</span><span class="s2">(</span><span class="s1">a</span><span class="s2">+</span><span class="s5">36</span><span class="s2">*</span><span class="s1">e</span><span class="s2">/(</span><span class="s1">e</span><span class="s2">+</span><span class="s5">38</span><span class="s2">))}</span><span class="s3">function </span><span class="s1">l</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=[],</span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s5">128</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s5">72</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">lastIndexOf</span><span class="s2">(</span><span class="s4">&quot;-&quot;</span><span class="s2">);</span><span class="s1">i</span><span class="s2">&lt;</span><span class="s5">0</span><span class="s2">&amp;&amp;(</span><span class="s1">i</span><span class="s2">=</span><span class="s5">0</span><span class="s2">);</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">n</span><span class="s2">&lt;</span><span class="s1">i</span><span class="s2">;++</span><span class="s1">n</span><span class="s2">)</span><span class="s5">128</span><span class="s2">&lt;=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">charCodeAt</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)&amp;&amp;</span><span class="s1">L</span><span class="s2">(</span><span class="s4">&quot;not-basic&quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">charCodeAt</span><span class="s2">(</span><span class="s1">n</span><span class="s2">));</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">l</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=</span><span class="s5">0</span><span class="s2">&lt;</span><span class="s1">i</span><span class="s2">?</span><span class="s1">i</span><span class="s2">+</span><span class="s5">1</span><span class="s2">:</span><span class="s5">0</span><span class="s2">;</span><span class="s1">c</span><span class="s2">&lt;</span><span class="s1">t</span><span class="s2">;){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s1">a</span><span class="s2">,</span><span class="s1">h</span><span class="s2">=</span><span class="s5">1</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s5">36</span><span class="s2">;;</span><span class="s1">d</span><span class="s2">+=</span><span class="s5">36</span><span class="s2">){</span><span class="s1">t</span><span class="s2">&lt;=</span><span class="s1">c</span><span class="s2">&amp;&amp;</span><span class="s1">L</span><span class="s2">(</span><span class="s4">&quot;invalid-input&quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">p</span><span class="s2">=(</span><span class="s1">l</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">charCodeAt</span><span class="s2">(</span><span class="s1">c</span><span class="s2">++))-</span><span class="s5">48</span><span class="s2">&lt;</span><span class="s5">10</span><span class="s2">?</span><span class="s1">l</span><span class="s2">-</span><span class="s5">22</span><span class="s2">:</span><span class="s1">l</span><span class="s2">-</span><span class="s5">65</span><span class="s2">&lt;</span><span class="s5">26</span><span class="s2">?</span><span class="s1">l</span><span class="s2">-</span><span class="s5">65</span><span class="s2">:</span><span class="s1">l</span><span class="s2">-</span><span class="s5">97</span><span class="s2">&lt;</span><span class="s5">26</span><span class="s2">?</span><span class="s1">l</span><span class="s2">-</span><span class="s5">97</span><span class="s2">:</span><span class="s5">36</span><span class="s2">;(</span><span class="s5">36</span><span class="s2">&lt;=</span><span class="s1">p</span><span class="s2">||</span><span class="s1">p</span><span class="s2">&gt;</span><span class="s1">k</span><span class="s2">((</span><span class="s1">A</span><span class="s2">-</span><span class="s1">a</span><span class="s2">)/</span><span class="s1">h</span><span class="s2">))&amp;&amp;</span><span class="s1">L</span><span class="s2">(</span><span class="s4">&quot;overflow&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">+=</span><span class="s1">p</span><span class="s2">*</span><span class="s1">h</span><span class="s2">;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s1">d</span><span class="s2">&lt;=</span><span class="s1">o</span><span class="s2">?</span><span class="s5">1</span><span class="s2">:</span><span class="s1">o</span><span class="s2">+</span><span class="s5">26</span><span class="s2">&lt;=</span><span class="s1">d</span><span class="s2">?</span><span class="s5">26</span><span class="s2">:</span><span class="s1">d</span><span class="s2">-</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">p</span><span class="s2">&lt;</span><span class="s1">f</span><span class="s2">)</span><span class="s3">break</span><span class="s2">;</span><span class="s3">var </span><span class="s1">m</span><span class="s2">=</span><span class="s5">36</span><span class="s2">-</span><span class="s1">f</span><span class="s2">;</span><span class="s1">h</span><span class="s2">&gt;</span><span class="s1">k</span><span class="s2">(</span><span class="s1">A</span><span class="s2">/</span><span class="s1">m</span><span class="s2">)&amp;&amp;</span><span class="s1">L</span><span class="s2">(</span><span class="s4">&quot;overflow&quot;</span><span class="s2">),</span><span class="s1">h</span><span class="s2">*=</span><span class="s1">m</span><span class="s2">}</span><span class="s3">var </span><span class="s1">v</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">+</span><span class="s5">1</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">z</span><span class="s2">(</span><span class="s1">a</span><span class="s2">-</span><span class="s1">u</span><span class="s2">,</span><span class="s1">v</span><span class="s2">,</span><span class="s5">0</span><span class="s2">==</span><span class="s1">u</span><span class="s2">);</span><span class="s1">k</span><span class="s2">(</span><span class="s1">a</span><span class="s2">/</span><span class="s1">v</span><span class="s2">)&gt;</span><span class="s1">A</span><span class="s2">-</span><span class="s1">s</span><span class="s2">&amp;&amp;</span><span class="s1">L</span><span class="s2">(</span><span class="s4">&quot;overflow&quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">+=</span><span class="s1">k</span><span class="s2">(</span><span class="s1">a</span><span class="s2">/</span><span class="s1">v</span><span class="s2">),</span><span class="s1">a</span><span class="s2">%=</span><span class="s1">v</span><span class="s2">,</span><span class="s1">r</span><span class="s2">.</span><span class="s1">splice</span><span class="s2">(</span><span class="s1">a</span><span class="s2">++,</span><span class="s5">0</span><span class="s2">,</span><span class="s1">s</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">String</span><span class="s2">.</span><span class="s1">fromCodePoint</span><span class="s2">.</span><span class="s1">apply</span><span class="s2">(</span><span class="s1">String</span><span class="s2">,</span><span class="s1">r</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">c</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=[],</span><span class="s1">t</span><span class="s2">=(</span><span class="s1">e</span><span class="s2">=</span><span class="s1">N</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)).</span><span class="s1">length</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s5">128</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s5">72</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">;</span><span class="s3">try</span><span class="s2">{</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">c</span><span class="s2">,</span><span class="s1">u</span><span class="s2">=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">Symbol</span><span class="s2">.</span><span class="s1">iterator</span><span class="s2">]();!(</span><span class="s1">i</span><span class="s2">=(</span><span class="s1">c</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">next</span><span class="s2">()).</span><span class="s1">done</span><span class="s2">);</span><span class="s1">i</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">){</span><span class="s3">var </span><span class="s1">h</span><span class="s2">=</span><span class="s1">c</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span><span class="s1">h</span><span class="s2">&lt;</span><span class="s5">128</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">C</span><span class="s2">(</span><span class="s1">h</span><span class="s2">))}}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">n</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">e</span><span class="s2">}</span><span class="s3">finally</span><span class="s2">{</span><span class="s3">try</span><span class="s2">{!</span><span class="s1">i</span><span class="s2">&amp;&amp;</span><span class="s1">u</span><span class="s2">.</span><span class="s1">return</span><span class="s2">&amp;&amp;</span><span class="s1">u</span><span class="s2">.</span><span class="s1">return</span><span class="s2">()}</span><span class="s3">finally</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(</span><span class="s1">n</span><span class="s2">)</span><span class="s3">throw </span><span class="s1">l</span><span class="s2">}}</span><span class="s3">var </span><span class="s1">d</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=</span><span class="s1">d</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s1">d</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s4">&quot;-&quot;</span><span class="s2">);</span><span class="s1">p</span><span class="s2">&lt;</span><span class="s1">t</span><span class="s2">;){</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s1">A</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">v</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">;</span><span class="s3">try</span><span class="s2">{</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">g</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">Symbol</span><span class="s2">.</span><span class="s1">iterator</span><span class="s2">]();!(</span><span class="s1">m</span><span class="s2">=(</span><span class="s1">g</span><span class="s2">=</span><span class="s1">P</span><span class="s2">.</span><span class="s1">next</span><span class="s2">()).</span><span class="s1">done</span><span class="s2">);</span><span class="s1">m</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">){</span><span class="s3">var </span><span class="s1">E</span><span class="s2">=</span><span class="s1">g</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span><span class="s1">a</span><span class="s2">&lt;=</span><span class="s1">E</span><span class="s2">&amp;&amp;</span><span class="s1">E</span><span class="s2">&lt;</span><span class="s1">f</span><span class="s2">&amp;&amp;(</span><span class="s1">f</span><span class="s2">=</span><span class="s1">E</span><span class="s2">)}}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">v</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">y</span><span class="s2">=</span><span class="s1">e</span><span class="s2">}</span><span class="s3">finally</span><span class="s2">{</span><span class="s3">try</span><span class="s2">{!</span><span class="s1">m</span><span class="s2">&amp;&amp;</span><span class="s1">P</span><span class="s2">.</span><span class="s1">return</span><span class="s2">&amp;&amp;</span><span class="s1">P</span><span class="s2">.</span><span class="s1">return</span><span class="s2">()}</span><span class="s3">finally</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(</span><span class="s1">v</span><span class="s2">)</span><span class="s3">throw </span><span class="s1">y</span><span class="s2">}}</span><span class="s3">var </span><span class="s1">w</span><span class="s2">=</span><span class="s1">p</span><span class="s2">+</span><span class="s5">1</span><span class="s2">;</span><span class="s1">f</span><span class="s2">-</span><span class="s1">a</span><span class="s2">&gt;</span><span class="s1">k</span><span class="s2">((</span><span class="s1">A</span><span class="s2">-</span><span class="s1">s</span><span class="s2">)/</span><span class="s1">w</span><span class="s2">)&amp;&amp;</span><span class="s1">L</span><span class="s2">(</span><span class="s4">&quot;overflow&quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">+=(</span><span class="s1">f</span><span class="s2">-</span><span class="s1">a</span><span class="s2">)*</span><span class="s1">w</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">f</span><span class="s2">;</span><span class="s3">var </span><span class="s1">b</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">S</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">_</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">;</span><span class="s3">try</span><span class="s2">{</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">F</span><span class="s2">,</span><span class="s1">x</span><span class="s2">=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">Symbol</span><span class="s2">.</span><span class="s1">iterator</span><span class="s2">]();!(</span><span class="s1">b</span><span class="s2">=(</span><span class="s1">F</span><span class="s2">=</span><span class="s1">x</span><span class="s2">.</span><span class="s1">next</span><span class="s2">()).</span><span class="s1">done</span><span class="s2">);</span><span class="s1">b</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">){</span><span class="s3">var </span><span class="s1">R</span><span class="s2">=</span><span class="s1">F</span><span class="s2">.</span><span class="s1">value</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">R</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">&amp;&amp;++</span><span class="s1">s</span><span class="s2">&gt;</span><span class="s1">A</span><span class="s2">&amp;&amp;</span><span class="s1">L</span><span class="s2">(</span><span class="s4">&quot;overflow&quot;</span><span class="s2">),</span><span class="s1">R</span><span class="s2">==</span><span class="s1">a</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">$</span><span class="s2">=</span><span class="s1">s</span><span class="s2">,</span><span class="s1">j</span><span class="s2">=</span><span class="s5">36</span><span class="s2">;;</span><span class="s1">j</span><span class="s2">+=</span><span class="s5">36</span><span class="s2">){</span><span class="s3">var </span><span class="s1">D</span><span class="s2">=</span><span class="s1">j</span><span class="s2">&lt;=</span><span class="s1">o</span><span class="s2">?</span><span class="s5">1</span><span class="s2">:</span><span class="s1">o</span><span class="s2">+</span><span class="s5">26</span><span class="s2">&lt;=</span><span class="s1">j</span><span class="s2">?</span><span class="s5">26</span><span class="s2">:</span><span class="s1">j</span><span class="s2">-</span><span class="s1">o</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">$</span><span class="s2">&lt;</span><span class="s1">D</span><span class="s2">)</span><span class="s3">break</span><span class="s2">;</span><span class="s3">var </span><span class="s1">O</span><span class="s2">=</span><span class="s1">$</span><span class="s2">-</span><span class="s1">D</span><span class="s2">,</span><span class="s1">I</span><span class="s2">=</span><span class="s5">36</span><span class="s2">-</span><span class="s1">D</span><span class="s2">;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">C</span><span class="s2">(</span><span class="s1">q</span><span class="s2">(</span><span class="s1">D</span><span class="s2">+</span><span class="s1">O</span><span class="s2">%</span><span class="s1">I</span><span class="s2">,</span><span class="s5">0</span><span class="s2">))),</span><span class="s1">$</span><span class="s2">=</span><span class="s1">k</span><span class="s2">(</span><span class="s1">O</span><span class="s2">/</span><span class="s1">I</span><span class="s2">)}</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">C</span><span class="s2">(</span><span class="s1">q</span><span class="s2">(</span><span class="s1">$</span><span class="s2">,</span><span class="s5">0</span><span class="s2">))),</span><span class="s1">o</span><span class="s2">=</span><span class="s1">z</span><span class="s2">(</span><span class="s1">s</span><span class="s2">,</span><span class="s1">w</span><span class="s2">,</span><span class="s1">p</span><span class="s2">==</span><span class="s1">d</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,++</span><span class="s1">p</span><span class="s2">}}}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">S</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">_</span><span class="s2">=</span><span class="s1">e</span><span class="s2">}</span><span class="s3">finally</span><span class="s2">{</span><span class="s3">try</span><span class="s2">{!</span><span class="s1">b</span><span class="s2">&amp;&amp;</span><span class="s1">x</span><span class="s2">.</span><span class="s1">return</span><span class="s2">&amp;&amp;</span><span class="s1">x</span><span class="s2">.</span><span class="s1">return</span><span class="s2">()}</span><span class="s3">finally</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(</span><span class="s1">S</span><span class="s2">)</span><span class="s3">throw </span><span class="s1">_</span><span class="s2">}}++</span><span class="s1">s</span><span class="s2">,++</span><span class="s1">a</span><span class="s2">}</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;&quot;</span><span class="s2">)}</span><span class="s3">var </span><span class="s1">v</span><span class="s2">={</span><span class="s1">version</span><span class="s2">:</span><span class="s4">&quot;2.1.0&quot;</span><span class="s2">,</span><span class="s1">ucs2</span><span class="s2">:{</span><span class="s1">decode</span><span class="s2">:</span><span class="s1">N</span><span class="s2">,</span><span class="s1">encode</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">String</span><span class="s2">.</span><span class="s1">fromCodePoint</span><span class="s2">.</span><span class="s1">apply</span><span class="s2">(</span><span class="s1">String</span><span class="s2">,</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s1">Array</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">);</span><span class="s1">r</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">r</span><span class="s2">++)</span><span class="s1">t</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">r</span><span class="s2">];</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}</span><span class="s3">return </span><span class="s1">Array</span><span class="s2">.</span><span class="s1">from</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)}(</span><span class="s1">e</span><span class="s2">))}},</span><span class="s1">decode</span><span class="s2">:</span><span class="s1">l</span><span class="s2">,</span><span class="s1">encode</span><span class="s2">:</span><span class="s1">c</span><span class="s2">,</span><span class="s1">toASCII</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">n</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">s</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)?</span><span class="s4">&quot;xn--&quot;</span><span class="s2">+</span><span class="s1">c</span><span class="s2">(</span><span class="s1">e</span><span class="s2">):</span><span class="s1">e</span><span class="s2">})},</span><span class="s1">toUnicode</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">n</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">t</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)?</span><span class="s1">l</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">4</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">()):</span><span class="s1">e</span><span class="s2">})}},</span><span class="s1">d</span><span class="s2">={};</span><span class="s3">function </span><span class="s1">m</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">charCodeAt</span><span class="s2">(</span><span class="s5">0</span><span class="s2">);</span><span class="s3">return </span><span class="s1">r</span><span class="s2">&lt;</span><span class="s5">16</span><span class="s2">?</span><span class="s4">&quot;%0&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">(</span><span class="s5">16</span><span class="s2">).</span><span class="s1">toUpperCase</span><span class="s2">():</span><span class="s1">r</span><span class="s2">&lt;</span><span class="s5">128</span><span class="s2">?</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">(</span><span class="s5">16</span><span class="s2">).</span><span class="s1">toUpperCase</span><span class="s2">():</span><span class="s1">r</span><span class="s2">&lt;</span><span class="s5">2048</span><span class="s2">?</span><span class="s4">&quot;%&quot;</span><span class="s2">+(</span><span class="s1">r</span><span class="s2">&gt;&gt;</span><span class="s5">6</span><span class="s2">|</span><span class="s5">192</span><span class="s2">).</span><span class="s1">toString</span><span class="s2">(</span><span class="s5">16</span><span class="s2">).</span><span class="s1">toUpperCase</span><span class="s2">()+</span><span class="s4">&quot;%&quot;</span><span class="s2">+(</span><span class="s5">63</span><span class="s2">&amp;</span><span class="s1">r</span><span class="s2">|</span><span class="s5">128</span><span class="s2">).</span><span class="s1">toString</span><span class="s2">(</span><span class="s5">16</span><span class="s2">).</span><span class="s1">toUpperCase</span><span class="s2">():</span><span class="s4">&quot;%&quot;</span><span class="s2">+(</span><span class="s1">r</span><span class="s2">&gt;&gt;</span><span class="s5">12</span><span class="s2">|</span><span class="s5">224</span><span class="s2">).</span><span class="s1">toString</span><span class="s2">(</span><span class="s5">16</span><span class="s2">).</span><span class="s1">toUpperCase</span><span class="s2">()+</span><span class="s4">&quot;%&quot;</span><span class="s2">+(</span><span class="s1">r</span><span class="s2">&gt;&gt;</span><span class="s5">6</span><span class="s2">&amp;</span><span class="s5">63</span><span class="s2">|</span><span class="s5">128</span><span class="s2">).</span><span class="s1">toString</span><span class="s2">(</span><span class="s5">16</span><span class="s2">).</span><span class="s1">toUpperCase</span><span class="s2">()+</span><span class="s4">&quot;%&quot;</span><span class="s2">+(</span><span class="s5">63</span><span class="s2">&amp;</span><span class="s1">r</span><span class="s2">|</span><span class="s5">128</span><span class="s2">).</span><span class="s1">toString</span><span class="s2">(</span><span class="s5">16</span><span class="s2">).</span><span class="s1">toUpperCase</span><span class="s2">()}</span><span class="s3">function </span><span class="s1">p</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">a</span><span class="s2">;){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">substr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+</span><span class="s5">1</span><span class="s2">,</span><span class="s5">2</span><span class="s2">),</span><span class="s5">16</span><span class="s2">);</span><span class="s1">n</span><span class="s2">&lt;</span><span class="s5">128</span><span class="s2">?(</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">String</span><span class="s2">.</span><span class="s1">fromCharCode</span><span class="s2">(</span><span class="s1">n</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s5">3</span><span class="s2">):</span><span class="s5">194</span><span class="s2">&lt;=</span><span class="s1">n</span><span class="s2">&amp;&amp;</span><span class="s1">n</span><span class="s2">&lt;</span><span class="s5">224</span><span class="s2">?(</span><span class="s5">6</span><span class="s2">&lt;=</span><span class="s1">a</span><span class="s2">-</span><span class="s1">t</span><span class="s2">?(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">substr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+</span><span class="s5">4</span><span class="s2">,</span><span class="s5">2</span><span class="s2">),</span><span class="s5">16</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">String</span><span class="s2">.</span><span class="s1">fromCharCode</span><span class="s2">((</span><span class="s5">31</span><span class="s2">&amp;</span><span class="s1">n</span><span class="s2">)&lt;&lt;</span><span class="s5">6</span><span class="s2">|</span><span class="s5">63</span><span class="s2">&amp;</span><span class="s1">s</span><span class="s2">)):</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">substr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s5">6</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s5">6</span><span class="s2">):</span><span class="s5">224</span><span class="s2">&lt;=</span><span class="s1">n</span><span class="s2">?(</span><span class="s5">9</span><span class="s2">&lt;=</span><span class="s1">a</span><span class="s2">-</span><span class="s1">t</span><span class="s2">?(</span><span class="s1">o</span><span class="s2">=</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">substr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+</span><span class="s5">4</span><span class="s2">,</span><span class="s5">2</span><span class="s2">),</span><span class="s5">16</span><span class="s2">),</span><span class="s1">i</span><span class="s2">=</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">substr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">+</span><span class="s5">7</span><span class="s2">,</span><span class="s5">2</span><span class="s2">),</span><span class="s5">16</span><span class="s2">),</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">String</span><span class="s2">.</span><span class="s1">fromCharCode</span><span class="s2">((</span><span class="s5">15</span><span class="s2">&amp;</span><span class="s1">n</span><span class="s2">)&lt;&lt;</span><span class="s5">12</span><span class="s2">|(</span><span class="s5">63</span><span class="s2">&amp;</span><span class="s1">o</span><span class="s2">)&lt;&lt;</span><span class="s5">6</span><span class="s2">|</span><span class="s5">63</span><span class="s2">&amp;</span><span class="s1">i</span><span class="s2">)):</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">substr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s5">9</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s5">9</span><span class="s2">):(</span><span class="s1">r</span><span class="s2">+=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">substr</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s5">3</span><span class="s2">),</span><span class="s1">t</span><span class="s2">+=</span><span class="s5">3</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">r</span><span class="s2">}</span><span class="s3">function </span><span class="s1">y</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">function </span><span class="s1">r</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">p</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">UNRESERVED</span><span class="s2">)?</span><span class="s1">r</span><span class="s2">:</span><span class="s1">e</span><span class="s2">}</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">=</span><span class="s1">String</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">r</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">().</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">NOT_SCHEME</span><span class="s2">,</span><span class="s4">&quot;&quot;</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">=</span><span class="s1">String</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">r</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">NOT_USERINFO</span><span class="s2">,</span><span class="s1">m</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">f</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">host</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=</span><span class="s1">String</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">host</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">r</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">().</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">NOT_HOST</span><span class="s2">,</span><span class="s1">m</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">f</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">String</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">r</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">?</span><span class="s1">t</span><span class="s2">.</span><span class="s1">NOT_PATH</span><span class="s2">:</span><span class="s1">t</span><span class="s2">.</span><span class="s1">NOT_PATH_NOSCHEME</span><span class="s2">,</span><span class="s1">m</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">f</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">query</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s1">String</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">query</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">r</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">NOT_QUERY</span><span class="s2">,</span><span class="s1">m</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">f</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">=</span><span class="s1">String</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">r</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">NOT_FRAGMENT</span><span class="s2">,</span><span class="s1">m</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">f</span><span class="s2">)),</span><span class="s1">e</span><span class="s2">}</span><span class="s3">function </span><span class="s1">b</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/^0*(.*)/</span><span class="s2">,</span><span class="s4">&quot;$1&quot;</span><span class="s2">)||</span><span class="s4">&quot;0&quot;</span><span class="s2">}</span><span class="s3">function </span><span class="s1">S</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">IPV4ADDRESS</span><span class="s2">)||[],</span><span class="s1">a</span><span class="s2">=</span><span class="s1">w</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s5">2</span><span class="s2">)[</span><span class="s5">1</span><span class="s2">];</span><span class="s3">return </span><span class="s1">a</span><span class="s2">?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;.&quot;</span><span class="s2">).</span><span class="s1">map</span><span class="s2">(</span><span class="s1">b</span><span class="s2">).</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;.&quot;</span><span class="s2">):</span><span class="s1">e</span><span class="s2">}</span><span class="s3">function </span><span class="s1">g</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">IPV6ADDRESS</span><span class="s2">)||[],</span><span class="s1">a</span><span class="s2">=</span><span class="s1">w</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s5">3</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=</span><span class="s1">a</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">o</span><span class="s2">=</span><span class="s1">a</span><span class="s2">[</span><span class="s5">2</span><span class="s2">];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">s</span><span class="s2">.</span><span class="s1">toLowerCase</span><span class="s2">().</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;::&quot;</span><span class="s2">).</span><span class="s1">reverse</span><span class="s2">(),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">w</span><span class="s2">(</span><span class="s1">i</span><span class="s2">,</span><span class="s5">2</span><span class="s2">),</span><span class="s1">l</span><span class="s2">=</span><span class="s1">n</span><span class="s2">[</span><span class="s5">0</span><span class="s2">],</span><span class="s1">c</span><span class="s2">=</span><span class="s1">n</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">u</span><span class="s2">=</span><span class="s1">c</span><span class="s2">?</span><span class="s1">c</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;:&quot;</span><span class="s2">).</span><span class="s1">map</span><span class="s2">(</span><span class="s1">b</span><span class="s2">):[],</span><span class="s1">h</span><span class="s2">=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;:&quot;</span><span class="s2">).</span><span class="s1">map</span><span class="s2">(</span><span class="s1">b</span><span class="s2">),</span><span class="s1">d</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">IPV4ADDRESS</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">h</span><span class="s2">[</span><span class="s1">h</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">]),</span><span class="s1">p</span><span class="s2">=</span><span class="s1">d</span><span class="s2">?</span><span class="s5">7</span><span class="s2">:</span><span class="s5">8</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s1">p</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=</span><span class="s1">Array</span><span class="s2">(</span><span class="s1">p</span><span class="s2">),</span><span class="s1">v</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">v</span><span class="s2">&lt;</span><span class="s1">p</span><span class="s2">;++</span><span class="s1">v</span><span class="s2">)</span><span class="s1">m</span><span class="s2">[</span><span class="s1">v</span><span class="s2">]=</span><span class="s1">u</span><span class="s2">[</span><span class="s1">v</span><span class="s2">]||</span><span class="s1">h</span><span class="s2">[</span><span class="s1">f</span><span class="s2">+</span><span class="s1">v</span><span class="s2">]||</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s1">d</span><span class="s2">&amp;&amp;(</span><span class="s1">m</span><span class="s2">[</span><span class="s1">p</span><span class="s2">-</span><span class="s5">1</span><span class="s2">]=</span><span class="s1">S</span><span class="s2">(</span><span class="s1">m</span><span class="s2">[</span><span class="s1">p</span><span class="s2">-</span><span class="s5">1</span><span class="s2">],</span><span class="s1">r</span><span class="s2">));</span><span class="s3">var </span><span class="s1">y</span><span class="s2">,</span><span class="s1">g</span><span class="s2">,</span><span class="s1">P</span><span class="s2">=</span><span class="s1">m</span><span class="s2">.</span><span class="s1">reduce</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">;</span><span class="s3">return </span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;0&quot;</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">||((</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s5">1</span><span class="s2">])&amp;&amp;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">index</span><span class="s2">+</span><span class="s1">a</span><span class="s2">.</span><span class="s1">length</span><span class="s2">===</span><span class="s1">t</span><span class="s2">?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">length</span><span class="s2">++:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">push</span><span class="s2">({</span><span class="s1">index</span><span class="s2">:</span><span class="s1">t</span><span class="s2">,</span><span class="s1">length</span><span class="s2">:</span><span class="s5">1</span><span class="s2">})),</span><span class="s1">e</span><span class="s2">},[]).</span><span class="s1">sort</span><span class="s2">(</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">length</span><span class="s2">-</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">})[</span><span class="s5">0</span><span class="s2">],</span><span class="s1">E</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">;</span><span class="s3">return </span><span class="s1">E</span><span class="s2">=</span><span class="s1">P</span><span class="s2">&amp;&amp;</span><span class="s5">1</span><span class="s2">&lt;</span><span class="s1">P</span><span class="s2">.</span><span class="s1">length</span><span class="s2">?(</span><span class="s1">y</span><span class="s2">=</span><span class="s1">m</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">0</span><span class="s2">,</span><span class="s1">P</span><span class="s2">.</span><span class="s1">index</span><span class="s2">),</span><span class="s1">g</span><span class="s2">=</span><span class="s1">m</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s1">P</span><span class="s2">.</span><span class="s1">index</span><span class="s2">+</span><span class="s1">P</span><span class="s2">.</span><span class="s1">length</span><span class="s2">),</span><span class="s1">y</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;:&quot;</span><span class="s2">)+</span><span class="s4">&quot;::&quot;</span><span class="s2">+</span><span class="s1">g</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;:&quot;</span><span class="s2">)):</span><span class="s1">m</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;:&quot;</span><span class="s2">),</span><span class="s1">o</span><span class="s2">&amp;&amp;(</span><span class="s1">E</span><span class="s2">+=</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">o</span><span class="s2">),</span><span class="s1">E</span><span class="s2">}</span><span class="s3">return </span><span class="s1">e</span><span class="s2">}</span><span class="s3">var </span><span class="s1">P</span><span class="s2">=</span><span class="s6">/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i</span><span class="s2">,</span><span class="s1">E</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s4">&quot;&quot;</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s6">/(){0}/</span><span class="s2">)[</span><span class="s5">1</span><span class="s2">];</span><span class="s3">function </span><span class="s1">_</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s5">1</span><span class="s2">&lt;</span><span class="s1">arguments</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">arguments</span><span class="s2">[</span><span class="s5">1</span><span class="s2">]?</span><span class="s1">arguments</span><span class="s2">[</span><span class="s5">1</span><span class="s2">]:{},</span><span class="s1">t</span><span class="s2">={},</span><span class="s1">a</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s1">h</span><span class="s2">:</span><span class="s1">u</span><span class="s2">;</span><span class="s4">&quot;suffix&quot;</span><span class="s2">===</span><span class="s1">r</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">=(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">?</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">+</span><span class="s4">&quot;:&quot;</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">)+</span><span class="s4">&quot;//&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">);</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">P</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">){</span><span class="s1">E</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">t</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">3</span><span class="s2">],</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">4</span><span class="s2">],</span><span class="s1">t</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">s</span><span class="s2">[</span><span class="s5">5</span><span class="s2">],</span><span class="s5">10</span><span class="s2">),</span><span class="s1">t</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">6</span><span class="s2">]||</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">7</span><span class="s2">],</span><span class="s1">t</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">8</span><span class="s2">],</span><span class="s1">isNaN</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">port</span><span class="s2">)&amp;&amp;(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">5</span><span class="s2">])):(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">1</span><span class="s2">]||</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s4">&quot;@&quot;</span><span class="s2">)?</span><span class="s1">s</span><span class="s2">[</span><span class="s5">3</span><span class="s2">]:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s4">&quot;//&quot;</span><span class="s2">)?</span><span class="s1">s</span><span class="s2">[</span><span class="s5">4</span><span class="s2">]:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">s</span><span class="s2">[</span><span class="s5">5</span><span class="s2">],</span><span class="s5">10</span><span class="s2">),</span><span class="s1">t</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">s</span><span class="s2">[</span><span class="s5">6</span><span class="s2">]||</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s4">&quot;?&quot;</span><span class="s2">)?</span><span class="s1">s</span><span class="s2">[</span><span class="s5">7</span><span class="s2">]:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">=-</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">indexOf</span><span class="s2">(</span><span class="s4">&quot;#&quot;</span><span class="s2">)?</span><span class="s1">s</span><span class="s2">[</span><span class="s5">8</span><span class="s2">]:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">isNaN</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">port</span><span class="s2">)&amp;&amp;(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s6">/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/</span><span class="s2">)?</span><span class="s1">s</span><span class="s2">[</span><span class="s5">4</span><span class="s2">]:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=</span><span class="s1">g</span><span class="s2">(</span><span class="s1">S</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">,</span><span class="s1">a</span><span class="s2">),</span><span class="s1">a</span><span class="s2">)),</span><span class="s1">t</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">||</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">||</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">port</span><span class="s2">||</span><span class="s1">t</span><span class="s2">.</span><span class="s1">path</span><span class="s2">||</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">query</span><span class="s2">?</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">t</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">?</span><span class="s4">&quot;relative&quot;</span><span class="s2">:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">t</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">?</span><span class="s4">&quot;absolute&quot;</span><span class="s2">:</span><span class="s4">&quot;uri&quot;</span><span class="s2">:</span><span class="s4">&quot;same-document&quot;</span><span class="s2">,</span><span class="s1">r</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;suffix&quot;</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;URI is not a &quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">+</span><span class="s4">&quot; reference.&quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=</span><span class="s1">d</span><span class="s2">[(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s1">t</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">()];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">unicodeSupport</span><span class="s2">||</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">unicodeSupport</span><span class="s2">)</span><span class="s1">y</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">);</span><span class="s3">else</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">domainHost</span><span class="s2">||</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">domainHost</span><span class="s2">))</span><span class="s3">try</span><span class="s2">{</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=</span><span class="s1">v</span><span class="s2">.</span><span class="s1">toASCII</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">host</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">p</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">())}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;Host's domain name can not be converted to ASCII via punycode: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">}</span><span class="s1">y</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">u</span><span class="s2">)}</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">&amp;&amp;</span><span class="s1">o</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">r</span><span class="s2">)}</span><span class="s3">else </span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;URI can not be parsed.&quot;</span><span class="s2">;</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}</span><span class="s3">var </span><span class="s1">F</span><span class="s2">=</span><span class="s6">/^\.\.?\//</span><span class="s2">,</span><span class="s1">x</span><span class="s2">=</span><span class="s6">/^\/\.(\/|$)/</span><span class="s2">,</span><span class="s1">R</span><span class="s2">=</span><span class="s6">/^\/\.\.(\/|$)/</span><span class="s2">,</span><span class="s1">$</span><span class="s2">=</span><span class="s6">/^\/?(?:.|\n)*?(?=\/|$)/</span><span class="s2">;</span><span class="s3">function </span><span class="s1">j</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=[];</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;)</span><span class="s3">if</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">F</span><span class="s2">))</span><span class="s1">e</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">F</span><span class="s2">,</span><span class="s4">&quot;&quot;</span><span class="s2">);</span><span class="s3">else if</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">x</span><span class="s2">))</span><span class="s1">e</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">x</span><span class="s2">,</span><span class="s4">&quot;/&quot;</span><span class="s2">);</span><span class="s3">else if</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">R</span><span class="s2">))</span><span class="s1">e</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">R</span><span class="s2">,</span><span class="s4">&quot;/&quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">pop</span><span class="s2">();</span><span class="s3">else if</span><span class="s2">(</span><span class="s4">&quot;.&quot;</span><span class="s2">===</span><span class="s1">e</span><span class="s2">||</span><span class="s4">&quot;..&quot;</span><span class="s2">===</span><span class="s1">e</span><span class="s2">)</span><span class="s1">e</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">;</span><span class="s3">else</span><span class="s2">{</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">$</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">t</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;Unexpected dot segment condition&quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s5">0</span><span class="s2">];</span><span class="s1">e</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">length</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">a</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;&quot;</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">D</span><span class="s2">(</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s5">1</span><span class="s2">&lt;</span><span class="s1">arguments</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">arguments</span><span class="s2">[</span><span class="s5">1</span><span class="s2">]?</span><span class="s1">arguments</span><span class="s2">[</span><span class="s5">1</span><span class="s2">]:{},</span><span class="s1">e</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s1">h</span><span class="s2">:</span><span class="s1">u</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=[],</span><span class="s1">s</span><span class="s2">=</span><span class="s1">d</span><span class="s2">[(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">()];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">host</span><span class="s2">&amp;&amp;!</span><span class="s1">e</span><span class="s2">.</span><span class="s1">IPV6ADDRESS</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">host</span><span class="s2">)&amp;&amp;(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">domainHost</span><span class="s2">||</span><span class="s1">s</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">.</span><span class="s1">domainHost</span><span class="s2">))</span><span class="s3">try</span><span class="s2">{</span><span class="s1">r</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s1">v</span><span class="s2">.</span><span class="s1">toUnicode</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">host</span><span class="s2">):</span><span class="s1">v</span><span class="s2">.</span><span class="s1">toASCII</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">host</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">p</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">())}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">r</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;Host's domain name can not be converted to &quot;</span><span class="s2">+(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s4">&quot;Unicode&quot;</span><span class="s2">:</span><span class="s4">&quot;ASCII&quot;</span><span class="s2">)+</span><span class="s4">&quot; via punycode: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">}</span><span class="s1">y</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">e</span><span class="s2">),</span><span class="s4">&quot;suffix&quot;</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s4">&quot;:&quot;</span><span class="s2">));</span><span class="s3">var </span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">,</span><span class="s1">n</span><span class="s2">,</span><span class="s1">l</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=(</span><span class="s1">i</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s1">h</span><span class="s2">:</span><span class="s1">u</span><span class="s2">,</span><span class="s1">n</span><span class="s2">=[],</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==(</span><span class="s1">o</span><span class="s2">=</span><span class="s1">r</span><span class="s2">).</span><span class="s1">userinfo</span><span class="s2">&amp;&amp;(</span><span class="s1">n</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">),</span><span class="s1">n</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s4">&quot;@&quot;</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">o</span><span class="s2">.</span><span class="s1">host</span><span class="s2">&amp;&amp;</span><span class="s1">n</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">g</span><span class="s2">(</span><span class="s1">S</span><span class="s2">(</span><span class="s1">String</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">host</span><span class="s2">),</span><span class="s1">i</span><span class="s2">),</span><span class="s1">i</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">i</span><span class="s2">.</span><span class="s1">IPV6ADDRESS</span><span class="s2">,</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;[&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+(</span><span class="s1">t</span><span class="s2">?</span><span class="s4">&quot;%25&quot;</span><span class="s2">+</span><span class="s1">t</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">)+</span><span class="s4">&quot;]&quot;</span><span class="s2">})),</span><span class="s4">&quot;number&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">.</span><span class="s1">port</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;string&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">.</span><span class="s1">port</span><span class="s2">||(</span><span class="s1">n</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s4">&quot;:&quot;</span><span class="s2">),</span><span class="s1">n</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">String</span><span class="s2">(</span><span class="s1">o</span><span class="s2">.</span><span class="s1">port</span><span class="s2">))),</span><span class="s1">n</span><span class="s2">.</span><span class="s1">length</span><span class="s2">?</span><span class="s1">n</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;&quot;</span><span class="s2">):</span><span class="s3">void </span><span class="s5">0</span><span class="s2">);</span><span class="s3">return void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">c</span><span class="s2">&amp;&amp;(</span><span class="s4">&quot;suffix&quot;</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">reference</span><span class="s2">&amp;&amp;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s4">&quot;//&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">c</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;/&quot;</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">charAt</span><span class="s2">(</span><span class="s5">0</span><span class="s2">)&amp;&amp;</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s4">&quot;/&quot;</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">absolutePath</span><span class="s2">||</span><span class="s1">s</span><span class="s2">&amp;&amp;</span><span class="s1">s</span><span class="s2">.</span><span class="s1">absolutePath</span><span class="s2">||(</span><span class="s1">l</span><span class="s2">=</span><span class="s1">j</span><span class="s2">(</span><span class="s1">l</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">c</span><span class="s2">&amp;&amp;(</span><span class="s1">l</span><span class="s2">=</span><span class="s1">l</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s6">/^\/\//</span><span class="s2">,</span><span class="s4">&quot;/%2F&quot;</span><span class="s2">)),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">l</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s4">&quot;?&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">)),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s4">&quot;#&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">)),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;&quot;</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">O</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s5">2</span><span class="s2">&lt;</span><span class="s1">arguments</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">arguments</span><span class="s2">[</span><span class="s5">2</span><span class="s2">]?</span><span class="s1">arguments</span><span class="s2">[</span><span class="s5">2</span><span class="s2">]:{},</span><span class="s1">a</span><span class="s2">={};</span><span class="s3">return </span><span class="s1">arguments</span><span class="s2">[</span><span class="s5">3</span><span class="s2">]||(</span><span class="s1">e</span><span class="s2">=</span><span class="s1">_</span><span class="s2">(</span><span class="s1">D</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">),</span><span class="s1">t</span><span class="s2">),</span><span class="s1">r</span><span class="s2">=</span><span class="s1">_</span><span class="s2">(</span><span class="s1">D</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">),</span><span class="s1">t</span><span class="s2">)),!(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">t</span><span class="s2">||{}).</span><span class="s1">tolerant</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">?(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">host</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">port</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">j</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">):(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">||</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">host</span><span class="s2">||</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">port</span><span class="s2">?(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">host</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">port</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">j</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">):(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">?(</span><span class="s4">&quot;/&quot;</span><span class="s2">===</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">charAt</span><span class="s2">(</span><span class="s5">0</span><span class="s2">)?</span><span class="s1">a</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">j</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">):(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">host</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">port</span><span class="s2">||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">0</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">lastIndexOf</span><span class="s2">(</span><span class="s4">&quot;/&quot;</span><span class="s2">)+</span><span class="s5">1</span><span class="s2">)+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">:</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">:</span><span class="s4">&quot;/&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">j</span><span class="s2">(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">path</span><span class="s2">)),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">):(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">?</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">query</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">userinfo</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">host</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">host</span><span class="s2">,</span><span class="s1">a</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">port</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">),</span><span class="s1">a</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">,</span><span class="s1">a</span><span class="s2">}</span><span class="s3">function </span><span class="s1">I</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">().</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s1">h</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">:</span><span class="s1">u</span><span class="s2">.</span><span class="s1">PCT_ENCODED</span><span class="s2">,</span><span class="s1">p</span><span class="s2">)}</span><span class="s3">var </span><span class="s1">T</span><span class="s2">={</span><span class="s1">scheme</span><span class="s2">:</span><span class="s4">&quot;http&quot;</span><span class="s2">,</span><span class="s1">domainHost</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">parse</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">host</span><span class="s2">||(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;HTTP URIs must have a host.&quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">},</span><span class="s1">serialize</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s4">&quot;https&quot;</span><span class="s2">===</span><span class="s1">String</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">();</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">port</span><span class="s2">!==(</span><span class="s1">r</span><span class="s2">?</span><span class="s5">443</span><span class="s2">:</span><span class="s5">80</span><span class="s2">)&amp;&amp;</span><span class="s4">&quot;&quot;</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">port</span><span class="s2">||(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">||(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s4">&quot;/&quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">}},</span><span class="s1">Q</span><span class="s2">={</span><span class="s1">scheme</span><span class="s2">:</span><span class="s4">&quot;https&quot;</span><span class="s2">,</span><span class="s1">domainHost</span><span class="s2">:</span><span class="s1">T</span><span class="s2">.</span><span class="s1">domainHost</span><span class="s2">,</span><span class="s1">parse</span><span class="s2">:</span><span class="s1">T</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">,</span><span class="s1">serialize</span><span class="s2">:</span><span class="s1">T</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">};</span><span class="s3">function </span><span class="s1">V</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">.</span><span class="s1">secure</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">secure</span><span class="s2">:</span><span class="s4">&quot;wss&quot;</span><span class="s2">===</span><span class="s1">String</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">()}</span><span class="s3">var </span><span class="s1">U</span><span class="s2">={</span><span class="s1">scheme</span><span class="s2">:</span><span class="s4">&quot;ws&quot;</span><span class="s2">,</span><span class="s1">domainHost</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">parse</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">;</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">secure</span><span class="s2">=</span><span class="s1">V</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">resourceName</span><span class="s2">=(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">||</span><span class="s4">&quot;/&quot;</span><span class="s2">)+(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">?</span><span class="s4">&quot;?&quot;</span><span class="s2">+</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">:</span><span class="s4">&quot;&quot;</span><span class="s2">),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">r</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">r</span><span class="s2">},</span><span class="s1">serialize</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">;</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">port</span><span class="s2">!==(</span><span class="s1">V</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)?</span><span class="s5">443</span><span class="s2">:</span><span class="s5">80</span><span class="s2">)&amp;&amp;</span><span class="s4">&quot;&quot;</span><span class="s2">!==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">port</span><span class="s2">||(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">port</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">),</span><span class="s4">&quot;boolean&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">.</span><span class="s1">secure</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">secure</span><span class="s2">?</span><span class="s4">&quot;wss&quot;</span><span class="s2">:</span><span class="s4">&quot;ws&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">secure</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">resourceName</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">resourceName</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;?&quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">w</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s5">2</span><span class="s2">))[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=(</span><span class="s1">a</span><span class="s2">=</span><span class="s1">t</span><span class="s2">[</span><span class="s5">0</span><span class="s2">])&amp;&amp;</span><span class="s4">&quot;/&quot;</span><span class="s2">!==</span><span class="s1">a</span><span class="s2">?</span><span class="s1">a</span><span class="s2">:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s1">s</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">resourceName</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">fragment</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">e</span><span class="s2">}},</span><span class="s1">H</span><span class="s2">={</span><span class="s1">scheme</span><span class="s2">:</span><span class="s4">&quot;wss&quot;</span><span class="s2">,</span><span class="s1">domainHost</span><span class="s2">:</span><span class="s1">U</span><span class="s2">.</span><span class="s1">domainHost</span><span class="s2">,</span><span class="s1">parse</span><span class="s2">:</span><span class="s1">U</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">,</span><span class="s1">serialize</span><span class="s2">:</span><span class="s1">U</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">},</span><span class="s1">M</span><span class="s2">={},</span><span class="s1">K</span><span class="s2">=</span><span class="s4">&quot;[A-Za-z0-9</span><span class="s3">\\</span><span class="s4">-</span><span class="s3">\\</span><span class="s4">.</span><span class="s3">\\</span><span class="s4">_</span><span class="s3">\\</span><span class="s4">~</span><span class="s3">\\</span><span class="s4">xA0-</span><span class="s3">\\</span><span class="s4">u200D</span><span class="s3">\\</span><span class="s4">u2010-</span><span class="s3">\\</span><span class="s4">u2029</span><span class="s3">\\</span><span class="s4">u202F-</span><span class="s3">\\</span><span class="s4">uD7FF</span><span class="s3">\\</span><span class="s4">uF900-</span><span class="s3">\\</span><span class="s4">uFDCF</span><span class="s3">\\</span><span class="s4">uFDF0-</span><span class="s3">\\</span><span class="s4">uFFEF]&quot;</span><span class="s2">,</span><span class="s1">B</span><span class="s2">=</span><span class="s4">&quot;[0-9A-Fa-f]&quot;</span><span class="s2">,</span><span class="s1">G</span><span class="s2">=(</span><span class="s1">Z</span><span class="s2">(</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;%[EFef]&quot;</span><span class="s2">+</span><span class="s1">B</span><span class="s2">+</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">B</span><span class="s2">+</span><span class="s1">B</span><span class="s2">+</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">B</span><span class="s2">+</span><span class="s1">B</span><span class="s2">)+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;%[89A-Fa-f]&quot;</span><span class="s2">+</span><span class="s1">B</span><span class="s2">+</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">B</span><span class="s2">+</span><span class="s1">B</span><span class="s2">)+</span><span class="s4">&quot;|&quot;</span><span class="s2">+</span><span class="s1">Z</span><span class="s2">(</span><span class="s4">&quot;%&quot;</span><span class="s2">+</span><span class="s1">B</span><span class="s2">+</span><span class="s1">B</span><span class="s2">)),</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">!</span><span class="s3">\\</span><span class="s4">$</span><span class="s3">\\</span><span class="s4">%</span><span class="s3">\\</span><span class="s4">'</span><span class="s3">\\</span><span class="s4">(</span><span class="s3">\\</span><span class="s4">)</span><span class="s3">\\</span><span class="s4">*</span><span class="s3">\\</span><span class="s4">+</span><span class="s3">\\</span><span class="s4">,</span><span class="s3">\\</span><span class="s4">-</span><span class="s3">\\</span><span class="s4">.0-9</span><span class="s3">\\</span><span class="s4">&lt;</span><span class="s3">\\</span><span class="s4">&gt;A-Z</span><span class="s3">\\</span><span class="s4">x5E-</span><span class="s3">\\</span><span class="s4">x7E]&quot;</span><span class="s2">,</span><span class="s4">'[</span><span class="s3">\\</span><span class="s4">&quot;</span><span class="s3">\\\\</span><span class="s4">]'</span><span class="s2">)),</span><span class="s1">Y</span><span class="s2">=</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">K</span><span class="s2">,</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">W</span><span class="s2">=</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s4">&quot;(?:(?:%[EFef][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f])|(?:%[89A-Fa-f][0-9A-Fa-f]%[0-9A-Fa-f][0-9A-Fa-f])|(?:%[0-9A-Fa-f][0-9A-Fa-f]))&quot;</span><span class="s2">,</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">X</span><span class="s2">=</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^]&quot;</span><span class="s2">,</span><span class="s4">&quot;[A-Za-z0-9</span><span class="s3">\\</span><span class="s4">!</span><span class="s3">\\</span><span class="s4">$</span><span class="s3">\\</span><span class="s4">%</span><span class="s3">\\</span><span class="s4">'</span><span class="s3">\\</span><span class="s4">*</span><span class="s3">\\</span><span class="s4">+</span><span class="s3">\\</span><span class="s4">-</span><span class="s3">\\</span><span class="s4">^</span><span class="s3">\\</span><span class="s4">_</span><span class="s3">\\</span><span class="s4">`</span><span class="s3">\\</span><span class="s4">{</span><span class="s3">\\</span><span class="s4">|</span><span class="s3">\\</span><span class="s4">}</span><span class="s3">\\</span><span class="s4">~]&quot;</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">.]&quot;</span><span class="s2">,</span><span class="s4">'[</span><span class="s3">\\</span><span class="s4">&quot;]'</span><span class="s2">,</span><span class="s1">G</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">ee</span><span class="s2">=</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">J</span><span class="s2">(</span><span class="s4">&quot;[^]&quot;</span><span class="s2">,</span><span class="s1">K</span><span class="s2">,</span><span class="s4">&quot;[</span><span class="s3">\\</span><span class="s4">!</span><span class="s3">\\</span><span class="s4">$</span><span class="s3">\\</span><span class="s4">'</span><span class="s3">\\</span><span class="s4">(</span><span class="s3">\\</span><span class="s4">)</span><span class="s3">\\</span><span class="s4">*</span><span class="s3">\\</span><span class="s4">+</span><span class="s3">\\</span><span class="s4">,</span><span class="s3">\\</span><span class="s4">;</span><span class="s3">\\</span><span class="s4">:</span><span class="s3">\\</span><span class="s4">@]&quot;</span><span class="s2">),</span><span class="s4">&quot;g&quot;</span><span class="s2">),</span><span class="s1">re</span><span class="s2">=</span><span class="s1">ee</span><span class="s2">;</span><span class="s3">function </span><span class="s1">te</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">p</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">Y</span><span class="s2">)?</span><span class="s1">r</span><span class="s2">:</span><span class="s1">e</span><span class="s2">}</span><span class="s3">var </span><span class="s1">ae</span><span class="s2">={</span><span class="s1">scheme</span><span class="s2">:</span><span class="s4">&quot;mailto&quot;</span><span class="s2">,</span><span class="s1">parse</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">to</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">path</span><span class="s2">?</span><span class="s1">t</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">):[];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">query</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">o</span><span class="s2">={},</span><span class="s1">i</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">query</span><span class="s2">.</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;&amp;&quot;</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">l</span><span class="s2">=</span><span class="s1">i</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">n</span><span class="s2">&lt;</span><span class="s1">l</span><span class="s2">;++</span><span class="s1">n</span><span class="s2">){</span><span class="s3">var </span><span class="s1">c</span><span class="s2">=</span><span class="s1">i</span><span class="s2">[</span><span class="s1">n</span><span class="s2">].</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;=&quot;</span><span class="s2">);</span><span class="s3">switch</span><span class="s2">(</span><span class="s1">c</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]){</span><span class="s3">case</span><span class="s4">&quot;to&quot;</span><span class="s2">:</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s1">c</span><span class="s2">[</span><span class="s5">1</span><span class="s2">].</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">),</span><span class="s1">h</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">d</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">h</span><span class="s2">&lt;</span><span class="s1">d</span><span class="s2">;++</span><span class="s1">h</span><span class="s2">)</span><span class="s1">a</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">u</span><span class="s2">[</span><span class="s1">h</span><span class="s2">]);</span><span class="s3">break</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;subject&quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">.</span><span class="s1">subject</span><span class="s2">=</span><span class="s1">I</span><span class="s2">(</span><span class="s1">c</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">r</span><span class="s2">);</span><span class="s3">break</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;body&quot;</span><span class="s2">:</span><span class="s1">t</span><span class="s2">.</span><span class="s1">body</span><span class="s2">=</span><span class="s1">I</span><span class="s2">(</span><span class="s1">c</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">r</span><span class="s2">);</span><span class="s3">break</span><span class="s2">;</span><span class="s3">default</span><span class="s2">:</span><span class="s1">s</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">o</span><span class="s2">[</span><span class="s1">I</span><span class="s2">(</span><span class="s1">c</span><span class="s2">[</span><span class="s5">0</span><span class="s2">],</span><span class="s1">r</span><span class="s2">)]=</span><span class="s1">I</span><span class="s2">(</span><span class="s1">c</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">r</span><span class="s2">)}}</span><span class="s1">s</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">headers</span><span class="s2">=</span><span class="s1">o</span><span class="s2">)}</span><span class="s1">t</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">p</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">f</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">p</span><span class="s2">&lt;</span><span class="s1">f</span><span class="s2">;++</span><span class="s1">p</span><span class="s2">){</span><span class="s3">var </span><span class="s1">m</span><span class="s2">=</span><span class="s1">a</span><span class="s2">[</span><span class="s1">p</span><span class="s2">].</span><span class="s1">split</span><span class="s2">(</span><span class="s4">&quot;@&quot;</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">m</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]=</span><span class="s1">I</span><span class="s2">(</span><span class="s1">m</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]),</span><span class="s1">r</span><span class="s2">.</span><span class="s1">unicodeSupport</span><span class="s2">)</span><span class="s1">m</span><span class="s2">[</span><span class="s5">1</span><span class="s2">]=</span><span class="s1">I</span><span class="s2">(</span><span class="s1">m</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">r</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">();</span><span class="s3">else try</span><span class="s2">{</span><span class="s1">m</span><span class="s2">[</span><span class="s5">1</span><span class="s2">]=</span><span class="s1">v</span><span class="s2">.</span><span class="s1">toASCII</span><span class="s2">(</span><span class="s1">I</span><span class="s2">(</span><span class="s1">m</span><span class="s2">[</span><span class="s5">1</span><span class="s2">],</span><span class="s1">r</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">())}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;Email address's domain name can not be converted to ASCII via punycode: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">}</span><span class="s1">a</span><span class="s2">[</span><span class="s1">p</span><span class="s2">]=</span><span class="s1">m</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;@&quot;</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">t</span><span class="s2">},</span><span class="s1">serialize</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">e</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s3">null</span><span class="s2">!=(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">to</span><span class="s2">)?</span><span class="s1">t </span><span class="s3">instanceof </span><span class="s1">Array</span><span class="s2">?</span><span class="s1">t</span><span class="s2">:</span><span class="s4">&quot;number&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">||</span><span class="s1">t</span><span class="s2">.</span><span class="s1">split</span><span class="s2">||</span><span class="s1">t</span><span class="s2">.</span><span class="s1">setInterval</span><span class="s2">||</span><span class="s1">t</span><span class="s2">.</span><span class="s1">call</span><span class="s2">?[</span><span class="s1">t</span><span class="s2">]:</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">t</span><span class="s2">):[];</span><span class="s3">if</span><span class="s2">(</span><span class="s1">s</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=</span><span class="s5">0</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">s</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">o</span><span class="s2">&lt;</span><span class="s1">i</span><span class="s2">;++</span><span class="s1">o</span><span class="s2">){</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s1">String</span><span class="s2">(</span><span class="s1">s</span><span class="s2">[</span><span class="s1">o</span><span class="s2">]),</span><span class="s1">l</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">lastIndexOf</span><span class="s2">(</span><span class="s4">&quot;@&quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">0</span><span class="s2">,</span><span class="s1">l</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">W</span><span class="s2">,</span><span class="s1">te</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">W</span><span class="s2">,</span><span class="s1">f</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">X</span><span class="s2">,</span><span class="s1">m</span><span class="s2">),</span><span class="s1">u</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s1">l</span><span class="s2">+</span><span class="s5">1</span><span class="s2">);</span><span class="s3">try</span><span class="s2">{</span><span class="s1">u</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s1">v</span><span class="s2">.</span><span class="s1">toUnicode</span><span class="s2">(</span><span class="s1">u</span><span class="s2">):</span><span class="s1">v</span><span class="s2">.</span><span class="s1">toASCII</span><span class="s2">(</span><span class="s1">I</span><span class="s2">(</span><span class="s1">u</span><span class="s2">,</span><span class="s1">r</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">())}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s1">a</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;Email address's domain name can not be converted to &quot;</span><span class="s2">+(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s4">&quot;Unicode&quot;</span><span class="s2">:</span><span class="s4">&quot;ASCII&quot;</span><span class="s2">)+</span><span class="s4">&quot; via punycode: &quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">}</span><span class="s1">s</span><span class="s2">[</span><span class="s1">o</span><span class="s2">]=</span><span class="s1">c</span><span class="s2">+</span><span class="s4">&quot;@&quot;</span><span class="s2">+</span><span class="s1">u</span><span class="s2">}</span><span class="s1">a</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s1">s</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;,&quot;</span><span class="s2">)}</span><span class="s3">var </span><span class="s1">h</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">headers</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">headers</span><span class="s2">||{};</span><span class="s1">e</span><span class="s2">.</span><span class="s1">subject</span><span class="s2">&amp;&amp;(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">subject</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">subject</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">body</span><span class="s2">&amp;&amp;(</span><span class="s1">h</span><span class="s2">.</span><span class="s1">body</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">body</span><span class="s2">);</span><span class="s3">var </span><span class="s1">d</span><span class="s2">,</span><span class="s1">p</span><span class="s2">=[];</span><span class="s3">for</span><span class="s2">(</span><span class="s1">d </span><span class="s3">in </span><span class="s1">h</span><span class="s2">)</span><span class="s1">h</span><span class="s2">[</span><span class="s1">d</span><span class="s2">]!==</span><span class="s1">M</span><span class="s2">[</span><span class="s1">d</span><span class="s2">]&amp;&amp;</span><span class="s1">p</span><span class="s2">.</span><span class="s1">push</span><span class="s2">(</span><span class="s1">d</span><span class="s2">.</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">W</span><span class="s2">,</span><span class="s1">te</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">W</span><span class="s2">,</span><span class="s1">f</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">ee</span><span class="s2">,</span><span class="s1">m</span><span class="s2">)+</span><span class="s4">&quot;=&quot;</span><span class="s2">+</span><span class="s1">h</span><span class="s2">[</span><span class="s1">d</span><span class="s2">].</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">W</span><span class="s2">,</span><span class="s1">te</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">W</span><span class="s2">,</span><span class="s1">f</span><span class="s2">).</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">re</span><span class="s2">,</span><span class="s1">m</span><span class="s2">));</span><span class="s3">return </span><span class="s1">p</span><span class="s2">.</span><span class="s1">length</span><span class="s2">&amp;&amp;(</span><span class="s1">a</span><span class="s2">.</span><span class="s1">query</span><span class="s2">=</span><span class="s1">p</span><span class="s2">.</span><span class="s1">join</span><span class="s2">(</span><span class="s4">&quot;&amp;&quot;</span><span class="s2">)),</span><span class="s1">a</span><span class="s2">}},</span><span class="s1">se</span><span class="s2">=</span><span class="s6">/^([^\:]+)\:(.*)/</span><span class="s2">,</span><span class="s1">oe</span><span class="s2">={</span><span class="s1">scheme</span><span class="s2">:</span><span class="s4">&quot;urn&quot;</span><span class="s2">,</span><span class="s1">parse</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s1">o</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">&amp;&amp;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">path</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">se</span><span class="s2">),</span><span class="s1">n</span><span class="s2">=</span><span class="s1">e</span><span class="s2">;</span><span class="s3">return </span><span class="s1">i</span><span class="s2">?(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s1">n</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s4">&quot;urn&quot;</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">i</span><span class="s2">[</span><span class="s5">1</span><span class="s2">].</span><span class="s1">toLowerCase</span><span class="s2">(),</span><span class="s1">s</span><span class="s2">=</span><span class="s1">i</span><span class="s2">[</span><span class="s5">2</span><span class="s2">],</span><span class="s1">o</span><span class="s2">=</span><span class="s1">d</span><span class="s2">[</span><span class="s1">t</span><span class="s2">+</span><span class="s4">&quot;:&quot;</span><span class="s2">+(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">nid</span><span class="s2">||</span><span class="s1">a</span><span class="s2">)],</span><span class="s1">n</span><span class="s2">.</span><span class="s1">nid</span><span class="s2">=</span><span class="s1">a</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">nss</span><span class="s2">=</span><span class="s1">s</span><span class="s2">,</span><span class="s1">n</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">o</span><span class="s2">&amp;&amp;(</span><span class="s1">n</span><span class="s2">=</span><span class="s1">o</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s1">n</span><span class="s2">,</span><span class="s1">r</span><span class="s2">))):</span><span class="s1">n</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;URN can not be parsed.&quot;</span><span class="s2">,</span><span class="s1">n</span><span class="s2">},</span><span class="s1">serialize</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">nid</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">d</span><span class="s2">[(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">||</span><span class="s4">&quot;urn&quot;</span><span class="s2">)+</span><span class="s4">&quot;:&quot;</span><span class="s2">+(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">nid</span><span class="s2">||</span><span class="s1">t</span><span class="s2">)];</span><span class="s1">a</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">));</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">e</span><span class="s2">;</span><span class="s3">return </span><span class="s1">s</span><span class="s2">.</span><span class="s1">path</span><span class="s2">=(</span><span class="s1">t</span><span class="s2">||</span><span class="s1">r</span><span class="s2">.</span><span class="s1">nid</span><span class="s2">)+</span><span class="s4">&quot;:&quot;</span><span class="s2">+</span><span class="s1">e</span><span class="s2">.</span><span class="s1">nss</span><span class="s2">,</span><span class="s1">s</span><span class="s2">}},</span><span class="s1">ie</span><span class="s2">=</span><span class="s6">/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/</span><span class="s2">,</span><span class="s1">ne</span><span class="s2">={</span><span class="s1">scheme</span><span class="s2">:</span><span class="s4">&quot;urn:uuid&quot;</span><span class="s2">,</span><span class="s1">parse</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">;</span><span class="s3">return </span><span class="s1">t</span><span class="s2">.</span><span class="s1">uuid</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">nss</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">nss</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">r</span><span class="s2">.</span><span class="s1">tolerant</span><span class="s2">||</span><span class="s1">t</span><span class="s2">.</span><span class="s1">uuid</span><span class="s2">&amp;&amp;</span><span class="s1">t</span><span class="s2">.</span><span class="s1">uuid</span><span class="s2">.</span><span class="s1">match</span><span class="s2">(</span><span class="s1">ie</span><span class="s2">)||(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">error</span><span class="s2">||</span><span class="s4">&quot;UUID is not valid.&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">},</span><span class="s1">serialize</span><span class="s2">:</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">;</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">nss</span><span class="s2">=(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">uuid</span><span class="s2">||</span><span class="s4">&quot;&quot;</span><span class="s2">).</span><span class="s1">toLowerCase</span><span class="s2">(),</span><span class="s1">r</span><span class="s2">}};</span><span class="s1">d</span><span class="s2">[</span><span class="s1">T</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">]=</span><span class="s1">T</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">Q</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">]=</span><span class="s1">Q</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">U</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">]=</span><span class="s1">U</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">H</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">]=</span><span class="s1">H</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">ae</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">]=</span><span class="s1">ae</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">oe</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">]=</span><span class="s1">oe</span><span class="s2">,</span><span class="s1">d</span><span class="s2">[</span><span class="s1">ne</span><span class="s2">.</span><span class="s1">scheme</span><span class="s2">]=</span><span class="s1">ne</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">SCHEMES</span><span class="s2">=</span><span class="s1">d</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">pctEncChar</span><span class="s2">=</span><span class="s1">m</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">pctDecChars</span><span class="s2">=</span><span class="s1">p</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">=</span><span class="s1">_</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">removeDotSegments</span><span class="s2">=</span><span class="s1">j</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">=</span><span class="s1">D</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">resolveComponents</span><span class="s2">=</span><span class="s1">O</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">resolve</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a </span><span class="s3">in </span><span class="s1">r</span><span class="s2">)</span><span class="s1">t</span><span class="s2">[</span><span class="s1">a</span><span class="s2">]=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">a</span><span class="s2">];</span><span class="s3">return </span><span class="s1">t</span><span class="s2">}({</span><span class="s1">scheme</span><span class="s2">:</span><span class="s4">&quot;null&quot;</span><span class="s2">},</span><span class="s1">t</span><span class="s2">);</span><span class="s3">return </span><span class="s1">D</span><span class="s2">(</span><span class="s1">O</span><span class="s2">(</span><span class="s1">_</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">a</span><span class="s2">),</span><span class="s1">_</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">a</span><span class="s2">),</span><span class="s1">a</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">),</span><span class="s1">a</span><span class="s2">)},</span><span class="s1">e</span><span class="s2">.</span><span class="s1">normalize</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">?</span><span class="s1">e</span><span class="s2">=</span><span class="s1">D</span><span class="s2">(</span><span class="s1">_</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">),</span><span class="s1">r</span><span class="s2">):</span><span class="s4">&quot;object&quot;</span><span class="s2">===</span><span class="s1">a</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)&amp;&amp;(</span><span class="s1">e</span><span class="s2">=</span><span class="s1">_</span><span class="s2">(</span><span class="s1">D</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">),</span><span class="s1">r</span><span class="s2">)),</span><span class="s1">e</span><span class="s2">},</span><span class="s1">e</span><span class="s2">.</span><span class="s1">equal</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">return</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">?</span><span class="s1">e</span><span class="s2">=</span><span class="s1">D</span><span class="s2">(</span><span class="s1">_</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">),</span><span class="s1">t</span><span class="s2">):</span><span class="s4">&quot;object&quot;</span><span class="s2">===</span><span class="s1">a</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)&amp;&amp;(</span><span class="s1">e</span><span class="s2">=</span><span class="s1">D</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">)),</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">?</span><span class="s1">r</span><span class="s2">=</span><span class="s1">D</span><span class="s2">(</span><span class="s1">_</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">),</span><span class="s1">t</span><span class="s2">):</span><span class="s4">&quot;object&quot;</span><span class="s2">===</span><span class="s1">a</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">D</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">)),</span><span class="s1">e</span><span class="s2">===</span><span class="s1">r</span><span class="s2">},</span><span class="s1">e</span><span class="s2">.</span><span class="s1">escapeComponent</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">().</span><span class="s1">replace</span><span class="s2">(</span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">iri</span><span class="s2">?</span><span class="s1">h</span><span class="s2">.</span><span class="s1">ESCAPE</span><span class="s2">:</span><span class="s1">u</span><span class="s2">.</span><span class="s1">ESCAPE</span><span class="s2">,</span><span class="s1">m</span><span class="s2">)},</span><span class="s1">e</span><span class="s2">.</span><span class="s1">unescapeComponent</span><span class="s2">=</span><span class="s1">I</span><span class="s2">,</span><span class="s1">Object</span><span class="s2">.</span><span class="s1">defineProperty</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s4">&quot;__esModule&quot;</span><span class="s2">,{</span><span class="s1">value</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">})}(</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">t</span><span class="s2">&amp;&amp;</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">r</span><span class="s2">?</span><span class="s1">t</span><span class="s2">:</span><span class="s1">a</span><span class="s2">.</span><span class="s1">URI</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">URI</span><span class="s2">||{})},{}],</span><span class="s1">ajv</span><span class="s2">:[</span><span class="s3">function</span><span class="s2">(</span><span class="s1">a</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s4">&quot;use strict&quot;</span><span class="s2">;</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./compile&quot;</span><span class="s2">),</span><span class="s1">d</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./compile/resolve&quot;</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./cache&quot;</span><span class="s2">),</span><span class="s1">p</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./compile/schema_obj&quot;</span><span class="s2">),</span><span class="s1">s</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;fast-json-stable-stringify&quot;</span><span class="s2">),</span><span class="s1">o</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./compile/formats&quot;</span><span class="s2">),</span><span class="s1">i</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./compile/rules&quot;</span><span class="s2">),</span><span class="s1">l</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./data&quot;</span><span class="s2">),</span><span class="s1">c</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./compile/util&quot;</span><span class="s2">);(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">exports</span><span class="s2">=</span><span class="s1">y</span><span class="s2">).</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!(</span><span class="s1">t</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">getSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">'no schema with key or ref &quot;'</span><span class="s2">+</span><span class="s1">e</span><span class="s2">+</span><span class="s4">'&quot;'</span><span class="s2">)}</span><span class="s3">else</span><span class="s2">{</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_addSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s1">t</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compile</span><span class="s2">(</span><span class="s1">a</span><span class="s2">)}</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">t</span><span class="s2">(</span><span class="s1">r</span><span class="s2">);!</span><span class="s5">0</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">&amp;&amp;(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">);</span><span class="s3">return </span><span class="s1">s</span><span class="s2">},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">compile</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_addSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">r</span><span class="s2">);</span><span class="s3">return </span><span class="s1">t</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compile</span><span class="s2">(</span><span class="s1">t</span><span class="s2">)},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">addSchema</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">s</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">s</span><span class="s2">++)</span><span class="s3">this</span><span class="s2">.</span><span class="s1">addSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">[</span><span class="s1">s</span><span class="s2">],</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">);</span><span class="s3">return this</span><span class="s2">}</span><span class="s3">var </span><span class="s1">o</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">o</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;string&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">o</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;schema id must be string&quot;</span><span class="s2">);</span><span class="s3">return </span><span class="s1">S</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">r</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">normalizeId</span><span class="s2">(</span><span class="s1">r</span><span class="s2">||</span><span class="s1">o</span><span class="s2">)),</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_addSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">),</span><span class="s3">this</span><span class="s2">},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">addMetaSchema</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">return this</span><span class="s2">.</span><span class="s1">addSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">),</span><span class="s3">this</span><span class="s2">},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$schema</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">!==</span><span class="s1">t</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;string&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">t</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;$schema must be a string&quot;</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">t</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">defaultMeta</span><span class="s2">||</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">meta</span><span class="s2">;</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">defaultMeta</span><span class="s2">=</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">?</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">r</span><span class="s2">)||</span><span class="s1">r</span><span class="s2">:</span><span class="s1">e</span><span class="s2">.</span><span class="s1">getSchema</span><span class="s2">(</span><span class="s1">f</span><span class="s2">)?</span><span class="s1">f</span><span class="s2">:</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">defaultMeta</span><span class="s2">}(</span><span class="s3">this</span><span class="s2">)))</span><span class="s3">return this</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s4">&quot;meta-schema not available&quot;</span><span class="s2">),!(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s3">null</span><span class="s2">);</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">e</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">a</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;schema is invalid: &quot;</span><span class="s2">+</span><span class="s3">this</span><span class="s2">.</span><span class="s1">errorsText</span><span class="s2">();</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;log&quot;</span><span class="s2">!=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s1">s</span><span class="s2">);</span><span class="s3">this</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">error</span><span class="s2">(</span><span class="s1">s</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">a</span><span class="s2">},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">getSchema</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">g</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">);</span><span class="s3">switch</span><span class="s2">(</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">){</span><span class="s3">case</span><span class="s4">&quot;object&quot;</span><span class="s2">:</span><span class="s3">return </span><span class="s1">r</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compile</span><span class="s2">(</span><span class="s1">r</span><span class="s2">);</span><span class="s3">case</span><span class="s4">&quot;string&quot;</span><span class="s2">:</span><span class="s3">return this</span><span class="s2">.</span><span class="s1">getSchema</span><span class="s2">(</span><span class="s1">r</span><span class="s2">);</span><span class="s3">case</span><span class="s4">&quot;undefined&quot;</span><span class="s2">:</span><span class="s3">return function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,{</span><span class="s1">schema</span><span class="s2">:{}},</span><span class="s1">r</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">){</span><span class="s3">var </span><span class="s1">a</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">root</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">baseId</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">a</span><span class="s2">,</span><span class="s1">s</span><span class="s2">,</span><span class="s3">void </span><span class="s5">0</span><span class="s2">,</span><span class="s1">o</span><span class="s2">);</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">_fragments</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]=</span><span class="s3">new </span><span class="s1">p</span><span class="s2">({</span><span class="s1">ref</span><span class="s2">:</span><span class="s1">r</span><span class="s2">,</span><span class="s1">fragment</span><span class="s2">:!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">a</span><span class="s2">,</span><span class="s1">root</span><span class="s2">:</span><span class="s1">s</span><span class="s2">,</span><span class="s1">baseId</span><span class="s2">:</span><span class="s1">o</span><span class="s2">,</span><span class="s1">validate</span><span class="s2">:</span><span class="s1">i</span><span class="s2">}),</span><span class="s1">i</span><span class="s2">}}(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">)}},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">removeSchema</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">e </span><span class="s3">instanceof </span><span class="s1">RegExp</span><span class="s2">)</span><span class="s3">return </span><span class="s1">P</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">,</span><span class="s1">e</span><span class="s2">),</span><span class="s1">P</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">,</span><span class="s1">e</span><span class="s2">),</span><span class="s3">this</span><span class="s2">;</span><span class="s3">switch</span><span class="s2">(</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">){</span><span class="s3">case</span><span class="s4">&quot;undefined&quot;</span><span class="s2">:</span><span class="s3">return </span><span class="s1">P</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">),</span><span class="s1">P</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">),</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">.</span><span class="s1">clear</span><span class="s2">(),</span><span class="s3">this</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;string&quot;</span><span class="s2">:</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">g</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">);</span><span class="s3">return </span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">.</span><span class="s1">del</span><span class="s2">(</span><span class="s1">r</span><span class="s2">.</span><span class="s1">cacheKey</span><span class="s2">),</span><span class="s3">delete this</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">[</span><span class="s1">e</span><span class="s2">],</span><span class="s3">delete this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">e</span><span class="s2">],</span><span class="s3">this</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;object&quot;</span><span class="s2">:</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s1">t</span><span class="s2">?</span><span class="s1">t</span><span class="s2">(</span><span class="s1">e</span><span class="s2">):</span><span class="s1">e</span><span class="s2">;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">.</span><span class="s1">del</span><span class="s2">(</span><span class="s1">a</span><span class="s2">);</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s1">s</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">normalizeId</span><span class="s2">(</span><span class="s1">s</span><span class="s2">),</span><span class="s3">delete this</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">[</span><span class="s1">s</span><span class="s2">],</span><span class="s3">delete this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">s</span><span class="s2">])}</span><span class="s3">return this</span><span class="s2">},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">addFormat</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s4">&quot;string&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s3">new </span><span class="s1">RegExp</span><span class="s2">(</span><span class="s1">r</span><span class="s2">));</span><span class="s3">return this</span><span class="s2">.</span><span class="s1">_formats</span><span class="s2">[</span><span class="s1">e</span><span class="s2">]=</span><span class="s1">r</span><span class="s2">,</span><span class="s3">this</span><span class="s2">},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">errorsText</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!(</span><span class="s1">e</span><span class="s2">=</span><span class="s1">e</span><span class="s2">||</span><span class="s3">this</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">))</span><span class="s3">return</span><span class="s4">&quot;No errors&quot;</span><span class="s2">;</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">r</span><span class="s2">||{}).</span><span class="s1">separator</span><span class="s2">?</span><span class="s4">&quot;, &quot;</span><span class="s2">:</span><span class="s1">r</span><span class="s2">.</span><span class="s1">separator</span><span class="s2">,</span><span class="s1">a</span><span class="s2">=</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">r</span><span class="s2">.</span><span class="s1">dataVar</span><span class="s2">?</span><span class="s4">&quot;data&quot;</span><span class="s2">:</span><span class="s1">r</span><span class="s2">.</span><span class="s1">dataVar</span><span class="s2">,</span><span class="s1">s</span><span class="s2">=</span><span class="s4">&quot;&quot;</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">o</span><span class="s2">&lt;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">o</span><span class="s2">++){</span><span class="s3">var </span><span class="s1">i</span><span class="s2">=</span><span class="s1">e</span><span class="s2">[</span><span class="s1">o</span><span class="s2">];</span><span class="s1">i</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">+=</span><span class="s1">a</span><span class="s2">+</span><span class="s1">i</span><span class="s2">.</span><span class="s1">dataPath</span><span class="s2">+</span><span class="s4">&quot; &quot;</span><span class="s2">+</span><span class="s1">i</span><span class="s2">.</span><span class="s1">message</span><span class="s2">+</span><span class="s1">t</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">s</span><span class="s2">.</span><span class="s1">slice</span><span class="s2">(</span><span class="s5">0</span><span class="s2">,-</span><span class="s1">t</span><span class="s2">.</span><span class="s1">length</span><span class="s2">)},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">_addSchema</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">,</span><span class="s1">a</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s4">&quot;object&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">&amp;&amp;</span><span class="s4">&quot;boolean&quot;</span><span class="s2">!=</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;schema should be object or boolean&quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">,</span><span class="s1">o</span><span class="s2">=</span><span class="s1">s</span><span class="s2">?</span><span class="s1">s</span><span class="s2">(</span><span class="s1">e</span><span class="s2">):</span><span class="s1">e</span><span class="s2">,</span><span class="s1">i</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">o</span><span class="s2">);</span><span class="s3">if</span><span class="s2">(</span><span class="s1">i</span><span class="s2">)</span><span class="s3">return </span><span class="s1">i</span><span class="s2">;</span><span class="s1">a</span><span class="s2">=</span><span class="s1">a</span><span class="s2">||!</span><span class="s5">1</span><span class="s2">!==</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">addUsedSchema</span><span class="s2">;</span><span class="s3">var </span><span class="s1">n</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">normalizeId</span><span class="s2">(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">(</span><span class="s1">e</span><span class="s2">));</span><span class="s1">n</span><span class="s2">&amp;&amp;</span><span class="s1">a</span><span class="s2">&amp;&amp;</span><span class="s1">S</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">n</span><span class="s2">);</span><span class="s3">var </span><span class="s1">l</span><span class="s2">,</span><span class="s1">c</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">!==</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">&amp;&amp;!</span><span class="s1">r</span><span class="s2">;</span><span class="s1">c</span><span class="s2">&amp;&amp;!(</span><span class="s1">l</span><span class="s2">=</span><span class="s1">n</span><span class="s2">&amp;&amp;</span><span class="s1">n</span><span class="s2">==</span><span class="s1">d</span><span class="s2">.</span><span class="s1">normalizeId</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$schema</span><span class="s2">))&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">ids</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">e</span><span class="s2">),</span><span class="s1">h</span><span class="s2">=</span><span class="s3">new </span><span class="s1">p</span><span class="s2">({</span><span class="s1">id</span><span class="s2">:</span><span class="s1">n</span><span class="s2">,</span><span class="s1">schema</span><span class="s2">:</span><span class="s1">e</span><span class="s2">,</span><span class="s1">localRefs</span><span class="s2">:</span><span class="s1">u</span><span class="s2">,</span><span class="s1">cacheKey</span><span class="s2">:</span><span class="s1">o</span><span class="s2">,</span><span class="s1">meta</span><span class="s2">:</span><span class="s1">t</span><span class="s2">});</span><span class="s4">&quot;#&quot;</span><span class="s2">!=</span><span class="s1">n</span><span class="s2">[</span><span class="s5">0</span><span class="s2">]&amp;&amp;</span><span class="s1">a</span><span class="s2">&amp;&amp;(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">n</span><span class="s2">]=</span><span class="s1">h</span><span class="s2">);</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">o</span><span class="s2">,</span><span class="s1">h</span><span class="s2">),</span><span class="s1">c</span><span class="s2">&amp;&amp;</span><span class="s1">l</span><span class="s2">&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">validateSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">);</span><span class="s3">return </span><span class="s1">h</span><span class="s2">},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">_compile</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">compiling</span><span class="s2">)</span><span class="s3">return</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">=</span><span class="s1">s</span><span class="s2">).</span><span class="s1">schema</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">s</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s3">null</span><span class="s2">,</span><span class="s1">s</span><span class="s2">.</span><span class="s1">root</span><span class="s2">=</span><span class="s1">e</span><span class="s2">||</span><span class="s1">s</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">===</span><span class="s1">t</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">&amp;&amp;(</span><span class="s1">s</span><span class="s2">.</span><span class="s1">$async</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">),</span><span class="s1">s</span><span class="s2">;</span><span class="s3">var </span><span class="s1">r</span><span class="s2">,</span><span class="s1">a</span><span class="s2">;</span><span class="s1">t</span><span class="s2">.</span><span class="s1">compiling</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">meta</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_metaOpts</span><span class="s2">);</span><span class="s3">try</span><span class="s2">{</span><span class="s1">a</span><span class="s2">=</span><span class="s1">n</span><span class="s2">.</span><span class="s1">call</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">schema</span><span class="s2">,</span><span class="s1">e</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">localRefs</span><span class="s2">)}</span><span class="s3">catch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">throw delete </span><span class="s1">t</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">,</span><span class="s1">e</span><span class="s2">}</span><span class="s3">finally</span><span class="s2">{</span><span class="s1">t</span><span class="s2">.</span><span class="s1">compiling</span><span class="s2">=!</span><span class="s5">1</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">meta</span><span class="s2">&amp;&amp;(</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">=</span><span class="s1">r</span><span class="s2">)}</span><span class="s3">return </span><span class="s1">t</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">=</span><span class="s1">a</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">refs</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">refs</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">refVal</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">refVal</span><span class="s2">,</span><span class="s1">t</span><span class="s2">.</span><span class="s1">root</span><span class="s2">=</span><span class="s1">a</span><span class="s2">.</span><span class="s1">root</span><span class="s2">,</span><span class="s1">a</span><span class="s2">;</span><span class="s3">function </span><span class="s1">s</span><span class="s2">(){</span><span class="s3">var </span><span class="s1">e</span><span class="s2">=</span><span class="s1">t</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">,</span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">apply</span><span class="s2">(</span><span class="s3">this</span><span class="s2">,</span><span class="s1">arguments</span><span class="s2">);</span><span class="s3">return </span><span class="s1">s</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errors</span><span class="s2">,</span><span class="s1">r</span><span class="s2">}},</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">compileAsync</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./compile/async&quot;</span><span class="s2">);</span><span class="s3">var </span><span class="s1">u</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./keyword&quot;</span><span class="s2">);</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">addKeyword</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">add</span><span class="s2">,</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">getKeyword</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">get</span><span class="s2">,</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">removeKeyword</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">,</span><span class="s1">y</span><span class="s2">.</span><span class="s1">prototype</span><span class="s2">.</span><span class="s1">validateKeyword</span><span class="s2">=</span><span class="s1">u</span><span class="s2">.</span><span class="s1">validate</span><span class="s2">;</span><span class="s3">var </span><span class="s1">h</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./compile/error_classes&quot;</span><span class="s2">);</span><span class="s1">y</span><span class="s2">.</span><span class="s1">ValidationError</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">Validation</span><span class="s2">,</span><span class="s1">y</span><span class="s2">.</span><span class="s1">MissingRefError</span><span class="s2">=</span><span class="s1">h</span><span class="s2">.</span><span class="s1">MissingRef</span><span class="s2">,</span><span class="s1">y</span><span class="s2">.</span><span class="s1">$dataMetaSchema</span><span class="s2">=</span><span class="s1">l</span><span class="s2">;</span><span class="s3">var </span><span class="s1">f</span><span class="s2">=</span><span class="s4">&quot;http://json-schema.org/draft-07/schema&quot;</span><span class="s2">,</span><span class="s1">m</span><span class="s2">=[</span><span class="s4">&quot;removeAdditional&quot;</span><span class="s2">,</span><span class="s4">&quot;useDefaults&quot;</span><span class="s2">,</span><span class="s4">&quot;coerceTypes&quot;</span><span class="s2">,</span><span class="s4">&quot;strictDefaults&quot;</span><span class="s2">],</span><span class="s1">v</span><span class="s2">=[</span><span class="s4">&quot;/properties&quot;</span><span class="s2">];</span><span class="s3">function </span><span class="s1">y</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(!(</span><span class="s3">this instanceof </span><span class="s1">y</span><span class="s2">))</span><span class="s3">return new </span><span class="s1">y</span><span class="s2">(</span><span class="s1">e</span><span class="s2">);</span><span class="s1">e</span><span class="s2">=</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">=</span><span class="s1">c</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">)||{},</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">r</span><span class="s2">)</span><span class="s1">e</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">={</span><span class="s1">log</span><span class="s2">:</span><span class="s1">_</span><span class="s2">,</span><span class="s1">warn</span><span class="s2">:</span><span class="s1">_</span><span class="s2">,</span><span class="s1">error</span><span class="s2">:</span><span class="s1">_</span><span class="s2">};</span><span class="s3">else</span><span class="s2">{</span><span class="s3">if</span><span class="s2">(</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">r</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">console</span><span class="s2">),!(</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">r</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">log</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">&amp;&amp;</span><span class="s1">r</span><span class="s2">.</span><span class="s1">error</span><span class="s2">))</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;logger must implement log, warn and error methods&quot;</span><span class="s2">);</span><span class="s1">e</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">=</span><span class="s1">r</span><span class="s2">}}(</span><span class="s3">this</span><span class="s2">),</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">={},</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">={},</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_fragments</span><span class="s2">={},</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_formats</span><span class="s2">=</span><span class="s1">o</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">format</span><span class="s2">),</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">cache</span><span class="s2">||</span><span class="s3">new </span><span class="s1">t</span><span class="s2">,</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_loadingSchemas</span><span class="s2">={},</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_compilations</span><span class="s2">=[],</span><span class="s3">this</span><span class="s2">.</span><span class="s1">RULES</span><span class="s2">=</span><span class="s1">i</span><span class="s2">(),</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_getId</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">switch</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">schemaId</span><span class="s2">){</span><span class="s3">case</span><span class="s4">&quot;auto&quot;</span><span class="s2">:</span><span class="s3">return </span><span class="s1">b</span><span class="s2">;</span><span class="s3">case</span><span class="s4">&quot;id&quot;</span><span class="s2">:</span><span class="s3">return </span><span class="s1">E</span><span class="s2">;</span><span class="s3">default</span><span class="s2">:</span><span class="s3">return </span><span class="s1">w</span><span class="s2">}}(</span><span class="s1">e</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">loopRequired</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">loopRequired</span><span class="s2">||</span><span class="s5">1</span><span class="s2">/</span><span class="s5">0</span><span class="s2">,</span><span class="s4">&quot;property&quot;</span><span class="s2">==</span><span class="s1">e</span><span class="s2">.</span><span class="s1">errorDataPath</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_errorDataPathProperty</span><span class="s2">=!</span><span class="s5">0</span><span class="s2">),</span><span class="s3">void </span><span class="s5">0</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">&amp;&amp;(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">serialize</span><span class="s2">=</span><span class="s1">s</span><span class="s2">),</span><span class="s3">this</span><span class="s2">.</span><span class="s1">_metaOpts</span><span class="s2">=</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">c</span><span class="s2">.</span><span class="s1">copy</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">),</span><span class="s1">t</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span><span class="s1">t</span><span class="s2">&lt;</span><span class="s1">m</span><span class="s2">.</span><span class="s1">length</span><span class="s2">;</span><span class="s1">t</span><span class="s2">++)</span><span class="s3">delete </span><span class="s1">r</span><span class="s2">[</span><span class="s1">m</span><span class="s2">[</span><span class="s1">t</span><span class="s2">]];</span><span class="s3">return </span><span class="s1">r</span><span class="s2">}(</span><span class="s3">this</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">formats</span><span class="s2">&amp;&amp;</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r </span><span class="s3">in </span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">formats</span><span class="s2">){</span><span class="s1">e</span><span class="s2">.</span><span class="s1">addFormat</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">formats</span><span class="s2">[</span><span class="s1">r</span><span class="s2">])}}(</span><span class="s3">this</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">&amp;&amp;</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">r </span><span class="s3">in </span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">){</span><span class="s1">e</span><span class="s2">.</span><span class="s1">addKeyword</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">keywords</span><span class="s2">[</span><span class="s1">r</span><span class="s2">])}}(</span><span class="s3">this</span><span class="s2">),</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;(</span><span class="s1">r</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./refs/data.json&quot;</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">addMetaSchema</span><span class="s2">(</span><span class="s1">r</span><span class="s2">,</span><span class="s1">r</span><span class="s2">.</span><span class="s1">$id</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">));</span><span class="s3">if</span><span class="s2">(!</span><span class="s5">1</span><span class="s2">===</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">meta</span><span class="s2">)</span><span class="s3">return</span><span class="s2">;</span><span class="s3">var </span><span class="s1">t</span><span class="s2">=</span><span class="s1">a</span><span class="s2">(</span><span class="s4">&quot;./refs/json-schema-draft-07.json&quot;</span><span class="s2">);</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">$data</span><span class="s2">&amp;&amp;(</span><span class="s1">t</span><span class="s2">=</span><span class="s1">l</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">v</span><span class="s2">));</span><span class="s1">e</span><span class="s2">.</span><span class="s1">addMetaSchema</span><span class="s2">(</span><span class="s1">t</span><span class="s2">,</span><span class="s1">f</span><span class="s2">,!</span><span class="s5">0</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s4">&quot;http://json-schema.org/schema&quot;</span><span class="s2">]=</span><span class="s1">f</span><span class="s2">}(</span><span class="s3">this</span><span class="s2">),</span><span class="s4">&quot;object&quot;</span><span class="s2">==</span><span class="s3">typeof </span><span class="s1">e</span><span class="s2">.</span><span class="s1">meta</span><span class="s2">&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">addMetaSchema</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">meta</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">nullable</span><span class="s2">&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">addKeyword</span><span class="s2">(</span><span class="s4">&quot;nullable&quot;</span><span class="s2">,{</span><span class="s1">metaSchema</span><span class="s2">:{</span><span class="s1">type</span><span class="s2">:</span><span class="s4">&quot;boolean&quot;</span><span class="s2">}}),</span><span class="s3">function</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">var </span><span class="s1">r</span><span class="s2">=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_opts</span><span class="s2">.</span><span class="s1">schemas</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(!</span><span class="s1">r</span><span class="s2">)</span><span class="s3">return</span><span class="s2">;</span><span class="s3">if</span><span class="s2">(</span><span class="s1">Array</span><span class="s2">.</span><span class="s1">isArray</span><span class="s2">(</span><span class="s1">r</span><span class="s2">))</span><span class="s1">e</span><span class="s2">.</span><span class="s1">addSchema</span><span class="s2">(</span><span class="s1">r</span><span class="s2">);</span><span class="s3">else for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">t </span><span class="s3">in </span><span class="s1">r</span><span class="s2">)</span><span class="s1">e</span><span class="s2">.</span><span class="s1">addSchema</span><span class="s2">(</span><span class="s1">r</span><span class="s2">[</span><span class="s1">t</span><span class="s2">],</span><span class="s1">t</span><span class="s2">)}(</span><span class="s3">this</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">g</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">return </span><span class="s1">r</span><span class="s2">=</span><span class="s1">d</span><span class="s2">.</span><span class="s1">normalizeId</span><span class="s2">(</span><span class="s1">r</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_fragments</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]}</span><span class="s3">function </span><span class="s1">P</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">,</span><span class="s1">t</span><span class="s2">){</span><span class="s3">for</span><span class="s2">(</span><span class="s3">var </span><span class="s1">a </span><span class="s3">in </span><span class="s1">r</span><span class="s2">){</span><span class="s3">var </span><span class="s1">s</span><span class="s2">=</span><span class="s1">r</span><span class="s2">[</span><span class="s1">a</span><span class="s2">];</span><span class="s1">s</span><span class="s2">.</span><span class="s1">meta</span><span class="s2">||</span><span class="s1">t</span><span class="s2">&amp;&amp;!</span><span class="s1">t</span><span class="s2">.</span><span class="s1">test</span><span class="s2">(</span><span class="s1">a</span><span class="s2">)||(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_cache</span><span class="s2">.</span><span class="s1">del</span><span class="s2">(</span><span class="s1">s</span><span class="s2">.</span><span class="s1">cacheKey</span><span class="s2">),</span><span class="s3">delete </span><span class="s1">r</span><span class="s2">[</span><span class="s1">a</span><span class="s2">])}}</span><span class="s3">function </span><span class="s1">E</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">$id</span><span class="s2">&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s4">&quot;schema $id ignored&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$id</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">id</span><span class="s2">}</span><span class="s3">function </span><span class="s1">w</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">id</span><span class="s2">&amp;&amp;</span><span class="s3">this</span><span class="s2">.</span><span class="s1">logger</span><span class="s2">.</span><span class="s1">warn</span><span class="s2">(</span><span class="s4">&quot;schema id ignored&quot;</span><span class="s2">,</span><span class="s1">e</span><span class="s2">.</span><span class="s1">id</span><span class="s2">),</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$id</span><span class="s2">}</span><span class="s3">function </span><span class="s1">b</span><span class="s2">(</span><span class="s1">e</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$id</span><span class="s2">&amp;&amp;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">id</span><span class="s2">&amp;&amp;</span><span class="s1">e</span><span class="s2">.</span><span class="s1">$id</span><span class="s2">!=</span><span class="s1">e</span><span class="s2">.</span><span class="s1">id</span><span class="s2">)</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">&quot;schema $id is different from id&quot;</span><span class="s2">);</span><span class="s3">return </span><span class="s1">e</span><span class="s2">.</span><span class="s1">$id</span><span class="s2">||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">id</span><span class="s2">}</span><span class="s3">function </span><span class="s1">S</span><span class="s2">(</span><span class="s1">e</span><span class="s2">,</span><span class="s1">r</span><span class="s2">){</span><span class="s3">if</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_schemas</span><span class="s2">[</span><span class="s1">r</span><span class="s2">]||</span><span class="s1">e</span><span class="s2">.</span><span class="s1">_refs</span><span class="s2">[</span><span class="s1">r</span><span class="s2">])</span><span class="s3">throw new </span><span class="s1">Error</span><span class="s2">(</span><span class="s4">'schema with key or id &quot;'</span><span class="s2">+</span><span class="s1">r</span><span class="s2">+</span><span class="s4">'&quot; already exists'</span><span class="s2">)}</span><span class="s3">function </span><span class="s1">_</span><span class="s2">(){}},{</span><span class="s4">&quot;./cache&quot;</span><span class="s2">:</span><span class="s5">1</span><span class="s2">,</span><span class="s4">&quot;./compile&quot;</span><span class="s2">:</span><span class="s5">5</span><span class="s2">,</span><span class="s4">&quot;./compile/async&quot;</span><span class="s2">:</span><span class="s5">2</span><span class="s2">,</span><span class="s4">&quot;./compile/error_classes&quot;</span><span class="s2">:</span><span class="s5">3</span><span class="s2">,</span><span class="s4">&quot;./compile/formats&quot;</span><span class="s2">:</span><span class="s5">4</span><span class="s2">,</span><span class="s4">&quot;./compile/resolve&quot;</span><span class="s2">:</span><span class="s5">6</span><span class="s2">,</span><span class="s4">&quot;./compile/rules&quot;</span><span class="s2">:</span><span class="s5">7</span><span class="s2">,</span><span class="s4">&quot;./compile/schema_obj&quot;</span><span class="s2">:</span><span class="s5">8</span><span class="s2">,</span><span class="s4">&quot;./compile/util&quot;</span><span class="s2">:</span><span class="s5">10</span><span class="s2">,</span><span class="s4">&quot;./data&quot;</span><span class="s2">:</span><span class="s5">11</span><span class="s2">,</span><span class="s4">&quot;./keyword&quot;</span><span class="s2">:</span><span class="s5">39</span><span class="s2">,</span><span class="s4">&quot;./refs/data.json&quot;</span><span class="s2">:</span><span class="s5">40</span><span class="s2">,</span><span class="s4">&quot;./refs/json-schema-draft-07.json&quot;</span><span class="s2">:</span><span class="s5">41</span><span class="s2">,</span><span class="s4">&quot;fast-json-stable-stringify&quot;</span><span class="s2">:</span><span class="s5">43</span><span class="s2">}]},{},[])(</span><span class="s4">&quot;ajv&quot;</span><span class="s2">)});</span>
<span class="s0">//# sourceMappingURL=ajv.min.js.map</span></pre>
</body>
</html>