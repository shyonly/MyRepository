<html>
<head>
<title>full.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
full.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;_gensync&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;_async&quot;</span><span class="s0">,</span><span class="s1">&quot;_util&quot;</span><span class="s0">,</span><span class="s1">&quot;context&quot;</span><span class="s0">,</span><span class="s1">&quot;_plugin&quot;</span><span class="s0">,</span><span class="s1">&quot;_item&quot;</span><span class="s0">,</span><span class="s1">&quot;_configChain&quot;</span><span class="s0">,</span><span class="s1">&quot;_deepArray&quot;</span><span class="s0">,</span><span class="s1">&quot;_traverse&quot;</span><span class="s0">,</span><span class="s1">&quot;_caching&quot;</span><span class="s0">,</span><span class="s1">&quot;_options&quot;</span><span class="s0">,</span><span class="s1">&quot;_plugins&quot;</span><span class="s0">,</span><span class="s1">&quot;_configApi&quot;</span><span class="s0">,</span><span class="s1">&quot;_partial&quot;</span><span class="s0">,</span><span class="s1">&quot;_configError&quot;</span><span class="s0">,</span><span class="s1">&quot;_default&quot;</span><span class="s0">,</span><span class="s1">&quot;gensync&quot;</span><span class="s0">,</span><span class="s1">&quot;loadFullConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;inputOpts&quot;</span><span class="s0">,</span><span class="s1">&quot;_opts$assumptions&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;loadPrivatePartialConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;fileHandling&quot;</span><span class="s0">,</span><span class="s1">&quot;optionDefaults&quot;</span><span class="s0">,</span><span class="s1">&quot;plugins&quot;</span><span class="s0">,</span><span class="s1">&quot;presets&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;presetContext&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;assign&quot;</span><span class="s0">,</span><span class="s1">&quot;targets&quot;</span><span class="s0">,</span><span class="s1">&quot;toDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;desc&quot;</span><span class="s0">,</span><span class="s1">&quot;getItemDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;presetsDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;initialPluginsDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginDescriptorsByPass&quot;</span><span class="s0">,</span><span class="s1">&quot;passes&quot;</span><span class="s0">,</span><span class="s1">&quot;externalDependencies&quot;</span><span class="s0">,</span><span class="s1">&quot;ignored&quot;</span><span class="s0">,</span><span class="s1">&quot;enhanceError&quot;</span><span class="s0">,</span><span class="s1">&quot;recursePresetDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;rawPresets&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginDescriptorsPass&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;descriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;preset&quot;</span><span class="s0">,</span><span class="s1">&quot;loadPresetDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;checkNoUnwrappedItemOptionPairs&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;ownPass&quot;</span><span class="s0">,</span><span class="s1">&quot;chain&quot;</span><span class="s0">,</span><span class="s1">&quot;pass&quot;</span><span class="s0">,</span><span class="s1">&quot;unshift&quot;</span><span class="s0">,</span><span class="s1">&quot;splice&quot;</span><span class="s0">,</span><span class="s1">&quot;o&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;p&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;opts&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginContext&quot;</span><span class="s0">,</span><span class="s1">&quot;assumptions&quot;</span><span class="s0">,</span><span class="s1">&quot;loadPluginDescriptors&quot;</span><span class="s0">,</span><span class="s1">&quot;descs&quot;</span><span class="s0">,</span><span class="s1">&quot;plugin&quot;</span><span class="s0">,</span><span class="s1">&quot;loadPluginDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;passPerPreset&quot;</span><span class="s0">,</span><span class="s1">&quot;freezeDeepArray&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;default&quot;</span><span class="s0">,</span><span class="s1">&quot;fn&quot;</span><span class="s0">,</span><span class="s1">&quot;arg1&quot;</span><span class="s0">,</span><span class="s1">&quot;arg2&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;_context$filename&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;makeDescriptorLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;apiFactory&quot;</span><span class="s0">,</span><span class="s1">&quot;makeWeakCache&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;alias&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;factory&quot;</span><span class="s0">,</span><span class="s1">&quot;maybeAsync&quot;</span><span class="s0">,</span><span class="s1">&quot;api&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;isThenable&quot;</span><span class="s0">,</span><span class="s1">&quot;configured&quot;</span><span class="s0">,</span><span class="s1">&quot;mode&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginDescriptorLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;makePluginAPI&quot;</span><span class="s0">,</span><span class="s1">&quot;presetDescriptorLoader&quot;</span><span class="s0">,</span><span class="s1">&quot;makePresetAPI&quot;</span><span class="s0">,</span><span class="s1">&quot;instantiatePlugin&quot;</span><span class="s0">,</span><span class="s1">&quot;pluginObj&quot;</span><span class="s0">,</span><span class="s1">&quot;validatePluginObject&quot;</span><span class="s0">,</span><span class="s1">&quot;visitor&quot;</span><span class="s0">,</span><span class="s1">&quot;traverse&quot;</span><span class="s0">,</span><span class="s1">&quot;explode&quot;</span><span class="s0">,</span><span class="s1">&quot;inherits&quot;</span><span class="s0">,</span><span class="s1">&quot;inheritsDescriptor&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;forwardAsync&quot;</span><span class="s0">,</span><span class="s1">&quot;run&quot;</span><span class="s0">,</span><span class="s1">&quot;invalidate&quot;</span><span class="s0">,</span><span class="s1">&quot;pre&quot;</span><span class="s0">,</span><span class="s1">&quot;post&quot;</span><span class="s0">,</span><span class="s1">&quot;manipulateOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;visitors&quot;</span><span class="s0">,</span><span class="s1">&quot;merge&quot;</span><span class="s0">,</span><span class="s1">&quot;Plugin&quot;</span><span class="s0">,</span><span class="s1">&quot;needsFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;val&quot;</span><span class="s0">,</span><span class="s1">&quot;validateIfOptionNeedsFilename&quot;</span><span class="s0">,</span><span class="s1">&quot;include&quot;</span><span class="s0">,</span><span class="s1">&quot;exclude&quot;</span><span class="s0">,</span><span class="s1">&quot;formattedPresetName&quot;</span><span class="s0">,</span><span class="s1">&quot;ConfigError&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;validatePreset&quot;</span><span class="s0">,</span><span class="s1">&quot;_options$overrides&quot;</span><span class="s0">,</span><span class="s1">&quot;overrides&quot;</span><span class="s0">,</span><span class="s1">&quot;overrideOptions&quot;</span><span class="s0">,</span><span class="s1">&quot;instantiatePreset&quot;</span><span class="s0">,</span><span class="s1">&quot;makeWeakCacheSync&quot;</span><span class="s0">,</span><span class="s1">&quot;validate&quot;</span><span class="s0">,</span><span class="s1">&quot;buildPresetChain&quot;</span><span class="s0">,</span><span class="s1">&quot;a&quot;</span><span class="s0">,</span><span class="s1">&quot;b&quot;</span><span class="s0">,</span><span class="s1">&quot;fns&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/config/full.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import gensync, { type Handler } from </span><span class="s3">\&quot;</span><span class="s1">gensync</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">forwardAsync,</span><span class="s3">\n  </span><span class="s1">maybeAsync,</span><span class="s3">\n  </span><span class="s1">isThenable,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">../gensync-utils/async.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import { mergeOptions } from </span><span class="s3">\&quot;</span><span class="s1">./util.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import * as context from </span><span class="s3">\&quot;</span><span class="s1">../index.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import Plugin from </span><span class="s3">\&quot;</span><span class="s1">./plugin.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { getItemDescriptor } from </span><span class="s3">\&quot;</span><span class="s1">./item.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { buildPresetChain } from </span><span class="s3">\&quot;</span><span class="s1">./config-chain.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { finalize as freezeDeepArray } from </span><span class="s3">\&quot;</span><span class="s1">./helpers/deep-array.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { DeepArray, ReadonlyDeepArray } from </span><span class="s3">\&quot;</span><span class="s1">./helpers/deep-array.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type {</span><span class="s3">\n  </span><span class="s1">ConfigContext,</span><span class="s3">\n  </span><span class="s1">ConfigChain,</span><span class="s3">\n  </span><span class="s1">PresetInstance,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./config-chain.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { UnloadedDescriptor } from </span><span class="s3">\&quot;</span><span class="s1">./config-descriptors.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import traverse from </span><span class="s3">\&quot;</span><span class="s1">@babel/traverse</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { makeWeakCache, makeWeakCacheSync } from </span><span class="s3">\&quot;</span><span class="s1">./caching.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { CacheConfigurator } from </span><span class="s3">\&quot;</span><span class="s1">./caching.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">validate,</span><span class="s3">\n  </span><span class="s1">checkNoUnwrappedItemOptionPairs,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">./validation/options.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { PluginItem } from </span><span class="s3">\&quot;</span><span class="s1">./validation/options.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { validatePluginObject } from </span><span class="s3">\&quot;</span><span class="s1">./validation/plugins.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { makePluginAPI, makePresetAPI } from </span><span class="s3">\&quot;</span><span class="s1">./helpers/config-api.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { PluginAPI, PresetAPI } from </span><span class="s3">\&quot;</span><span class="s1">./helpers/config-api.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import loadPrivatePartialConfig from </span><span class="s3">\&quot;</span><span class="s1">./partial.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import type { ValidatedOptions } from </span><span class="s3">\&quot;</span><span class="s1">./validation/options.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import type * as Context from </span><span class="s3">\&quot;</span><span class="s1">./cache-contexts.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import ConfigError from </span><span class="s3">\&quot;</span><span class="s1">../errors/config-error.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">type LoadedDescriptor = {</span><span class="s3">\n  </span><span class="s1">value: {};</span><span class="s3">\n  </span><span class="s1">options: {};</span><span class="s3">\n  </span><span class="s1">dirname: string;</span><span class="s3">\n  </span><span class="s1">alias: string;</span><span class="s3">\n  </span><span class="s1">externalDependencies: ReadonlyDeepArray&lt;string&gt;;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export type { InputOptions } from </span><span class="s3">\&quot;</span><span class="s1">./validation/options.ts</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">export type ResolvedConfig = {</span><span class="s3">\n  </span><span class="s1">options: any;</span><span class="s3">\n  </span><span class="s1">passes: PluginPasses;</span><span class="s3">\n  </span><span class="s1">externalDependencies: ReadonlyDeepArray&lt;string&gt;;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export type { Plugin };</span><span class="s3">\n</span><span class="s1">export type PluginPassList = Array&lt;Plugin&gt;;</span><span class="s3">\n</span><span class="s1">export type PluginPasses = Array&lt;PluginPassList&gt;;</span><span class="s3">\n\n</span><span class="s1">export default gensync(function* loadFullConfig(</span><span class="s3">\n  </span><span class="s1">inputOpts: unknown,</span><span class="s3">\n</span><span class="s1">): Handler&lt;ResolvedConfig | null&gt; {</span><span class="s3">\n  </span><span class="s1">const result = yield* loadPrivatePartialConfig(inputOpts);</span><span class="s3">\n  </span><span class="s1">if (!result) {</span><span class="s3">\n    </span><span class="s1">return null;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const { options, context, fileHandling } = result;</span><span class="s3">\n\n  </span><span class="s1">if (fileHandling === </span><span class="s3">\&quot;</span><span class="s1">ignored</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return null;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const optionDefaults = {};</span><span class="s3">\n\n  </span><span class="s1">const { plugins, presets } = options;</span><span class="s3">\n\n  </span><span class="s1">if (!plugins || !presets) {</span><span class="s3">\n    </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Assertion failure - plugins and presets exist</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const presetContext: Context.FullPreset = {</span><span class="s3">\n    </span><span class="s1">...context,</span><span class="s3">\n    </span><span class="s1">targets: options.targets,</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n\n  </span><span class="s1">const toDescriptor = (item: PluginItem) =&gt; {</span><span class="s3">\n    </span><span class="s1">const desc = getItemDescriptor(item);</span><span class="s3">\n    </span><span class="s1">if (!desc) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Assertion failure - must be config item</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return desc;</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n\n  </span><span class="s1">const presetsDescriptors = presets.map(toDescriptor);</span><span class="s3">\n  </span><span class="s1">const initialPluginsDescriptors = plugins.map(toDescriptor);</span><span class="s3">\n  </span><span class="s1">const pluginDescriptorsByPass: Array&lt;Array&lt;UnloadedDescriptor&lt;PluginAPI&gt;&gt;&gt; = [</span><span class="s3">\n    </span><span class="s1">[],</span><span class="s3">\n  </span><span class="s1">];</span><span class="s3">\n  </span><span class="s1">const passes: Array&lt;Array&lt;Plugin&gt;&gt; = [];</span><span class="s3">\n\n  </span><span class="s1">const externalDependencies: DeepArray&lt;string&gt; = [];</span><span class="s3">\n\n  </span><span class="s1">const ignored = yield* enhanceError(</span><span class="s3">\n    </span><span class="s1">context,</span><span class="s3">\n    </span><span class="s1">function* recursePresetDescriptors(</span><span class="s3">\n      </span><span class="s1">rawPresets: Array&lt;UnloadedDescriptor&lt;PresetAPI&gt;&gt;,</span><span class="s3">\n      </span><span class="s1">pluginDescriptorsPass: Array&lt;UnloadedDescriptor&lt;PluginAPI&gt;&gt;,</span><span class="s3">\n    </span><span class="s1">): Handler&lt;true | void&gt; {</span><span class="s3">\n      </span><span class="s1">const presets: Array&lt;{</span><span class="s3">\n        </span><span class="s1">preset: ConfigChain | null;</span><span class="s3">\n        </span><span class="s1">pass: Array&lt;UnloadedDescriptor&lt;PluginAPI&gt;&gt;;</span><span class="s3">\n      </span><span class="s1">}&gt; = [];</span><span class="s3">\n\n      </span><span class="s1">for (let i = 0; i &lt; rawPresets.length; i++) {</span><span class="s3">\n        </span><span class="s1">const descriptor = rawPresets[i];</span><span class="s3">\n        </span><span class="s1">if (descriptor.options !== false) {</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">// eslint-disable-next-line no-var</span><span class="s3">\n            </span><span class="s1">var preset = yield* loadPresetDescriptor(descriptor, presetContext);</span><span class="s3">\n          </span><span class="s1">} catch (e) {</span><span class="s3">\n            </span><span class="s1">if (e.code === </span><span class="s3">\&quot;</span><span class="s1">BABEL_UNKNOWN_OPTION</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">checkNoUnwrappedItemOptionPairs(rawPresets, i, </span><span class="s3">\&quot;</span><span class="s1">preset</span><span class="s3">\&quot;</span><span class="s1">, e);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">throw e;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">externalDependencies.push(preset.externalDependencies);</span><span class="s3">\n\n          </span><span class="s1">// Presets normally run in reverse order, but if they</span><span class="s3">\n          </span><span class="s1">// have their own pass they run after the presets</span><span class="s3">\n          </span><span class="s1">// in the previous pass.</span><span class="s3">\n          </span><span class="s1">if (descriptor.ownPass) {</span><span class="s3">\n            </span><span class="s1">presets.push({ preset: preset.chain, pass: [] });</span><span class="s3">\n          </span><span class="s1">} else {</span><span class="s3">\n            </span><span class="s1">presets.unshift({</span><span class="s3">\n              </span><span class="s1">preset: preset.chain,</span><span class="s3">\n              </span><span class="s1">pass: pluginDescriptorsPass,</span><span class="s3">\n            </span><span class="s1">});</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">// resolve presets</span><span class="s3">\n      </span><span class="s1">if (presets.length &gt; 0) {</span><span class="s3">\n        </span><span class="s1">// The passes are created in the same order as the preset list, but are inserted before any</span><span class="s3">\n        </span><span class="s1">// existing additional passes.</span><span class="s3">\n        </span><span class="s1">pluginDescriptorsByPass.splice(</span><span class="s3">\n          </span><span class="s1">1,</span><span class="s3">\n          </span><span class="s1">0,</span><span class="s3">\n          </span><span class="s1">...presets.map(o =&gt; o.pass).filter(p =&gt; p !== pluginDescriptorsPass),</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n\n        </span><span class="s1">for (const { preset, pass } of presets) {</span><span class="s3">\n          </span><span class="s1">if (!preset) return true;</span><span class="s3">\n\n          </span><span class="s1">pass.push(...preset.plugins);</span><span class="s3">\n\n          </span><span class="s1">const ignored = yield* recursePresetDescriptors(preset.presets, pass);</span><span class="s3">\n          </span><span class="s1">if (ignored) return true;</span><span class="s3">\n\n          </span><span class="s1">preset.options.forEach(opts =&gt; {</span><span class="s3">\n            </span><span class="s1">mergeOptions(optionDefaults, opts);</span><span class="s3">\n          </span><span class="s1">});</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">)(presetsDescriptors, pluginDescriptorsByPass[0]);</span><span class="s3">\n\n  </span><span class="s1">if (ignored) return null;</span><span class="s3">\n\n  </span><span class="s1">const opts: any = optionDefaults;</span><span class="s3">\n  </span><span class="s1">mergeOptions(opts, options);</span><span class="s3">\n\n  </span><span class="s1">const pluginContext: Context.FullPlugin = {</span><span class="s3">\n    </span><span class="s1">...presetContext,</span><span class="s3">\n    </span><span class="s1">assumptions: opts.assumptions ?? {},</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n\n  </span><span class="s1">yield* enhanceError(context, function* loadPluginDescriptors() {</span><span class="s3">\n    </span><span class="s1">pluginDescriptorsByPass[0].unshift(...initialPluginsDescriptors);</span><span class="s3">\n\n    </span><span class="s1">for (const descs of pluginDescriptorsByPass) {</span><span class="s3">\n      </span><span class="s1">const pass: Plugin[] = [];</span><span class="s3">\n      </span><span class="s1">passes.push(pass);</span><span class="s3">\n\n      </span><span class="s1">for (let i = 0; i &lt; descs.length; i++) {</span><span class="s3">\n        </span><span class="s1">const descriptor = descs[i];</span><span class="s3">\n        </span><span class="s1">if (descriptor.options !== false) {</span><span class="s3">\n          </span><span class="s1">try {</span><span class="s3">\n            </span><span class="s1">// eslint-disable-next-line no-var</span><span class="s3">\n            </span><span class="s1">var plugin = yield* loadPluginDescriptor(descriptor, pluginContext);</span><span class="s3">\n          </span><span class="s1">} catch (e) {</span><span class="s3">\n            </span><span class="s1">if (e.code === </span><span class="s3">\&quot;</span><span class="s1">BABEL_UNKNOWN_PLUGIN_PROPERTY</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n              </span><span class="s1">// print special message for `plugins: [</span><span class="s3">\&quot;</span><span class="s1">@babel/foo</span><span class="s3">\&quot;</span><span class="s1">, { foo: </span><span class="s3">\&quot;</span><span class="s1">option</span><span class="s3">\&quot; </span><span class="s1">}]`</span><span class="s3">\n              </span><span class="s1">checkNoUnwrappedItemOptionPairs(descs, i, </span><span class="s3">\&quot;</span><span class="s1">plugin</span><span class="s3">\&quot;</span><span class="s1">, e);</span><span class="s3">\n            </span><span class="s1">}</span><span class="s3">\n            </span><span class="s1">throw e;</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n          </span><span class="s1">pass.push(plugin);</span><span class="s3">\n\n          </span><span class="s1">externalDependencies.push(plugin.externalDependencies);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">})();</span><span class="s3">\n\n  </span><span class="s1">opts.plugins = passes[0];</span><span class="s3">\n  </span><span class="s1">opts.presets = passes</span><span class="s3">\n    </span><span class="s1">.slice(1)</span><span class="s3">\n    </span><span class="s1">.filter(plugins =&gt; plugins.length &gt; 0)</span><span class="s3">\n    </span><span class="s1">.map(plugins =&gt; ({ plugins }));</span><span class="s3">\n  </span><span class="s1">opts.passPerPreset = opts.presets.length &gt; 0;</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">options: opts,</span><span class="s3">\n    </span><span class="s1">passes: passes,</span><span class="s3">\n    </span><span class="s1">externalDependencies: freezeDeepArray(externalDependencies),</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">});</span><span class="s3">\n\n</span><span class="s1">function enhanceError&lt;T extends Function&gt;(context: ConfigContext, fn: T): T {</span><span class="s3">\n  </span><span class="s1">return function* (arg1: unknown, arg2: unknown) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">return yield* fn(arg1, arg2);</span><span class="s3">\n    </span><span class="s1">} catch (e) {</span><span class="s3">\n      </span><span class="s1">// There are a few case where thrown errors will try to annotate themselves multiple times, so</span><span class="s3">\n      </span><span class="s1">// to keep things simple we just bail out if re-wrapping the message.</span><span class="s3">\n      </span><span class="s1">if (!/^</span><span class="s3">\\</span><span class="s1">[BABEL</span><span class="s3">\\</span><span class="s1">]/.test(e.message)) {</span><span class="s3">\n        </span><span class="s1">e.message = `[BABEL] ${context.filename ?? </span><span class="s3">\&quot;</span><span class="s1">unknown file</span><span class="s3">\&quot;</span><span class="s1">}: ${</span><span class="s3">\n          </span><span class="s1">e.message</span><span class="s3">\n        </span><span class="s1">}`;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">throw e;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} as any;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Load a generic plugin/preset from the given descriptor loaded from the config object.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const makeDescriptorLoader = &lt;Context, API&gt;(</span><span class="s3">\n  </span><span class="s1">apiFactory: (</span><span class="s3">\n    </span><span class="s1">cache: CacheConfigurator&lt;Context&gt;,</span><span class="s3">\n    </span><span class="s1">externalDependencies: Array&lt;string&gt;,</span><span class="s3">\n  </span><span class="s1">) =&gt; API,</span><span class="s3">\n</span><span class="s1">) =&gt;</span><span class="s3">\n  </span><span class="s1">makeWeakCache(function* (</span><span class="s3">\n    </span><span class="s1">{ value, options, dirname, alias }: UnloadedDescriptor&lt;API&gt;,</span><span class="s3">\n    </span><span class="s1">cache: CacheConfigurator&lt;Context&gt;,</span><span class="s3">\n  </span><span class="s1">): Handler&lt;LoadedDescriptor&gt; {</span><span class="s3">\n    </span><span class="s1">// Disabled presets should already have been filtered out</span><span class="s3">\n    </span><span class="s1">if (options === false) throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Assertion failure</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n    </span><span class="s1">options = options || {};</span><span class="s3">\n\n    </span><span class="s1">const externalDependencies: Array&lt;string&gt; = [];</span><span class="s3">\n\n    </span><span class="s1">let item: unknown = value;</span><span class="s3">\n    </span><span class="s1">if (typeof value === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">const factory = maybeAsync(</span><span class="s3">\n        </span><span class="s1">value as (api: API, options: {}, dirname: string) =&gt; unknown,</span><span class="s3">\n        </span><span class="s1">`You appear to be using an async plugin/preset, but Babel has been called synchronously`,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n\n      </span><span class="s1">const api = {</span><span class="s3">\n        </span><span class="s1">...context,</span><span class="s3">\n        </span><span class="s1">...apiFactory(cache, externalDependencies),</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">item = yield* factory(api, options, dirname);</span><span class="s3">\n      </span><span class="s1">} catch (e) {</span><span class="s3">\n        </span><span class="s1">if (alias) {</span><span class="s3">\n          </span><span class="s1">e.message += ` (While processing: ${JSON.stringify(alias)})`;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">throw e;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (!item || typeof item !== </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\&quot;</span><span class="s1">Plugin/Preset did not return an object.</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (isThenable(item)) {</span><span class="s3">\n      </span><span class="s1">// @ts-expect-error - if we want to support async plugins</span><span class="s3">\n      </span><span class="s1">yield* [];</span><span class="s3">\n\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        </span><span class="s1">`You appear to be using a promise as a plugin, ` +</span><span class="s3">\n          </span><span class="s1">`which your current version of Babel does not support. ` +</span><span class="s3">\n          </span><span class="s1">`If you're using a published plugin, ` +</span><span class="s3">\n          </span><span class="s1">`you may need to upgrade your @babel/core version. ` +</span><span class="s3">\n          </span><span class="s1">`As an alternative, you can prefix the promise with </span><span class="s3">\&quot;</span><span class="s1">await</span><span class="s3">\&quot;</span><span class="s1">. ` +</span><span class="s3">\n          </span><span class="s1">`(While processing: ${JSON.stringify(alias)})`,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (</span><span class="s3">\n      </span><span class="s1">externalDependencies.length &gt; 0 &amp;&amp;</span><span class="s3">\n      </span><span class="s1">(!cache.configured() || cache.mode() === </span><span class="s3">\&quot;</span><span class="s1">forever</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">) {</span><span class="s3">\n      </span><span class="s1">let error =</span><span class="s3">\n        </span><span class="s1">`A plugin/preset has external untracked dependencies ` +</span><span class="s3">\n        </span><span class="s1">`(${externalDependencies[0]}), but the cache `;</span><span class="s3">\n      </span><span class="s1">if (!cache.configured()) {</span><span class="s3">\n        </span><span class="s1">error += `has not been configured to be invalidated when the external dependencies change. `;</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">error += ` has been configured to never be invalidated. `;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">error +=</span><span class="s3">\n        </span><span class="s1">`Plugins/presets should configure their cache to be invalidated when the external ` +</span><span class="s3">\n        </span><span class="s1">`dependencies change, for example using </span><span class="s3">\\</span><span class="s1">`api.cache.invalidate(() =&gt; ` +</span><span class="s3">\n        </span><span class="s1">`statSync(filepath).mtimeMs)</span><span class="s3">\\</span><span class="s1">` or </span><span class="s3">\\</span><span class="s1">`api.cache.never()</span><span class="s3">\\</span><span class="s1">`</span><span class="s3">\\</span><span class="s1">n` +</span><span class="s3">\n        </span><span class="s1">`(While processing: ${JSON.stringify(alias)})`;</span><span class="s3">\n\n      </span><span class="s1">throw new Error(error);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">value: item,</span><span class="s3">\n      </span><span class="s1">options,</span><span class="s3">\n      </span><span class="s1">dirname,</span><span class="s3">\n      </span><span class="s1">alias,</span><span class="s3">\n      </span><span class="s1">externalDependencies: freezeDeepArray(externalDependencies),</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n\n</span><span class="s1">const pluginDescriptorLoader = makeDescriptorLoader&lt;</span><span class="s3">\n  </span><span class="s1">Context.SimplePlugin,</span><span class="s3">\n  </span><span class="s1">PluginAPI</span><span class="s3">\n</span><span class="s1">&gt;(makePluginAPI);</span><span class="s3">\n</span><span class="s1">const presetDescriptorLoader = makeDescriptorLoader&lt;</span><span class="s3">\n  </span><span class="s1">Context.SimplePreset,</span><span class="s3">\n  </span><span class="s1">PresetAPI</span><span class="s3">\n</span><span class="s1">&gt;(makePresetAPI);</span><span class="s3">\n\n</span><span class="s1">const instantiatePlugin = makeWeakCache(function* (</span><span class="s3">\n  </span><span class="s1">{ value, options, dirname, alias, externalDependencies }: LoadedDescriptor,</span><span class="s3">\n  </span><span class="s1">cache: CacheConfigurator&lt;Context.SimplePlugin&gt;,</span><span class="s3">\n</span><span class="s1">): Handler&lt;Plugin&gt; {</span><span class="s3">\n  </span><span class="s1">const pluginObj = validatePluginObject(value);</span><span class="s3">\n\n  </span><span class="s1">const plugin = {</span><span class="s3">\n    </span><span class="s1">...pluginObj,</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">if (plugin.visitor) {</span><span class="s3">\n    </span><span class="s1">plugin.visitor = traverse.explode({</span><span class="s3">\n      </span><span class="s1">...plugin.visitor,</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (plugin.inherits) {</span><span class="s3">\n    </span><span class="s1">const inheritsDescriptor: UnloadedDescriptor&lt;PluginAPI&gt; = {</span><span class="s3">\n      </span><span class="s1">name: undefined,</span><span class="s3">\n      </span><span class="s1">alias: `${alias}$inherits`,</span><span class="s3">\n      </span><span class="s1">value: plugin.inherits,</span><span class="s3">\n      </span><span class="s1">options,</span><span class="s3">\n      </span><span class="s1">dirname,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n\n    </span><span class="s1">const inherits = yield* forwardAsync(loadPluginDescriptor, run =&gt; {</span><span class="s3">\n      </span><span class="s1">// If the inherited plugin changes, reinstantiate this plugin.</span><span class="s3">\n      </span><span class="s1">return cache.invalidate(data =&gt; run(inheritsDescriptor, data));</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">plugin.pre = chain(inherits.pre, plugin.pre);</span><span class="s3">\n    </span><span class="s1">plugin.post = chain(inherits.post, plugin.post);</span><span class="s3">\n    </span><span class="s1">plugin.manipulateOptions = chain(</span><span class="s3">\n      </span><span class="s1">inherits.manipulateOptions,</span><span class="s3">\n      </span><span class="s1">plugin.manipulateOptions,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">plugin.visitor = traverse.visitors.merge([</span><span class="s3">\n      </span><span class="s1">inherits.visitor || {},</span><span class="s3">\n      </span><span class="s1">plugin.visitor || {},</span><span class="s3">\n    </span><span class="s1">]);</span><span class="s3">\n\n    </span><span class="s1">if (inherits.externalDependencies.length &gt; 0) {</span><span class="s3">\n      </span><span class="s1">if (externalDependencies.length === 0) {</span><span class="s3">\n        </span><span class="s1">externalDependencies = inherits.externalDependencies;</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">externalDependencies = freezeDeepArray([</span><span class="s3">\n          </span><span class="s1">externalDependencies,</span><span class="s3">\n          </span><span class="s1">inherits.externalDependencies,</span><span class="s3">\n        </span><span class="s1">]);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return new Plugin(plugin, options, alias, externalDependencies);</span><span class="s3">\n</span><span class="s1">});</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Instantiate a plugin for the given descriptor, returning the plugin/options pair.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function* loadPluginDescriptor(</span><span class="s3">\n  </span><span class="s1">descriptor: UnloadedDescriptor&lt;PluginAPI&gt;,</span><span class="s3">\n  </span><span class="s1">context: Context.SimplePlugin,</span><span class="s3">\n</span><span class="s1">): Handler&lt;Plugin&gt; {</span><span class="s3">\n  </span><span class="s1">if (descriptor.value instanceof Plugin) {</span><span class="s3">\n    </span><span class="s1">if (descriptor.options) {</span><span class="s3">\n      </span><span class="s1">throw new Error(</span><span class="s3">\n        \&quot;</span><span class="s1">Passed options to an existing Plugin instance will not work.</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return descriptor.value;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return yield* instantiatePlugin(</span><span class="s3">\n    </span><span class="s1">yield* pluginDescriptorLoader(descriptor, context),</span><span class="s3">\n    </span><span class="s1">context,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const needsFilename = (val: unknown) =&gt; val &amp;&amp; typeof val !== </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">const validateIfOptionNeedsFilename = (</span><span class="s3">\n  </span><span class="s1">options: ValidatedOptions,</span><span class="s3">\n  </span><span class="s1">descriptor: UnloadedDescriptor&lt;PresetAPI&gt;,</span><span class="s3">\n</span><span class="s1">): void =&gt; {</span><span class="s3">\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">needsFilename(options.test) ||</span><span class="s3">\n    </span><span class="s1">needsFilename(options.include) ||</span><span class="s3">\n    </span><span class="s1">needsFilename(options.exclude)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">const formattedPresetName = descriptor.name</span><span class="s3">\n      </span><span class="s1">? `</span><span class="s3">\&quot;</span><span class="s1">${descriptor.name}</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n      </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">/* your preset */</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n    </span><span class="s1">throw new ConfigError(</span><span class="s3">\n      </span><span class="s1">[</span><span class="s3">\n        </span><span class="s1">`Preset ${formattedPresetName} requires a filename to be set when babel is called directly,`,</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`</span><span class="s3">\\</span><span class="s1">``,</span><span class="s3">\n        </span><span class="s1">`babel.transformSync(code, { filename: 'file.ts', presets: [${formattedPresetName}] });`,</span><span class="s3">\n        </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`</span><span class="s3">\\</span><span class="s1">`</span><span class="s3">\\</span><span class="s1">``,</span><span class="s3">\n        </span><span class="s1">`See https://babeljs.io/docs/en/options#filename for more information.`,</span><span class="s3">\n      </span><span class="s1">].join(</span><span class="s3">\&quot;\\</span><span class="s1">n</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">const validatePreset = (</span><span class="s3">\n  </span><span class="s1">preset: PresetInstance,</span><span class="s3">\n  </span><span class="s1">context: ConfigContext,</span><span class="s3">\n  </span><span class="s1">descriptor: UnloadedDescriptor&lt;PresetAPI&gt;,</span><span class="s3">\n</span><span class="s1">): void =&gt; {</span><span class="s3">\n  </span><span class="s1">if (!context.filename) {</span><span class="s3">\n    </span><span class="s1">const { options } = preset;</span><span class="s3">\n    </span><span class="s1">validateIfOptionNeedsFilename(options, descriptor);</span><span class="s3">\n    </span><span class="s1">options.overrides?.forEach(overrideOptions =&gt;</span><span class="s3">\n      </span><span class="s1">validateIfOptionNeedsFilename(overrideOptions, descriptor),</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">const instantiatePreset = makeWeakCacheSync(</span><span class="s3">\n  </span><span class="s1">({</span><span class="s3">\n    </span><span class="s1">value,</span><span class="s3">\n    </span><span class="s1">dirname,</span><span class="s3">\n    </span><span class="s1">alias,</span><span class="s3">\n    </span><span class="s1">externalDependencies,</span><span class="s3">\n  </span><span class="s1">}: LoadedDescriptor): PresetInstance =&gt; {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">options: validate(</span><span class="s3">\&quot;</span><span class="s1">preset</span><span class="s3">\&quot;</span><span class="s1">, value),</span><span class="s3">\n      </span><span class="s1">alias,</span><span class="s3">\n      </span><span class="s1">dirname,</span><span class="s3">\n      </span><span class="s1">externalDependencies,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Generate a config object that will act as the root of a new nested config.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function* loadPresetDescriptor(</span><span class="s3">\n  </span><span class="s1">descriptor: UnloadedDescriptor&lt;PresetAPI&gt;,</span><span class="s3">\n  </span><span class="s1">context: Context.FullPreset,</span><span class="s3">\n</span><span class="s1">): Handler&lt;{</span><span class="s3">\n  </span><span class="s1">chain: ConfigChain | null;</span><span class="s3">\n  </span><span class="s1">externalDependencies: ReadonlyDeepArray&lt;string&gt;;</span><span class="s3">\n</span><span class="s1">}&gt; {</span><span class="s3">\n  </span><span class="s1">const preset = instantiatePreset(</span><span class="s3">\n    </span><span class="s1">yield* presetDescriptorLoader(descriptor, context),</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">validatePreset(preset, context, descriptor);</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">chain: yield* buildPresetChain(preset, context),</span><span class="s3">\n    </span><span class="s1">externalDependencies: preset.externalDependencies,</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function chain&lt;Args extends any[]&gt;(</span><span class="s3">\n  </span><span class="s1">a: undefined | ((...args: Args) =&gt; void),</span><span class="s3">\n  </span><span class="s1">b: undefined | ((...args: Args) =&gt; void),</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const fns = [a, b].filter(Boolean);</span><span class="s3">\n  </span><span class="s1">if (fns.length &lt;= 1) return fns[0];</span><span class="s3">\n\n  </span><span class="s1">return function (this: unknown, ...args: unknown[]) {</span><span class="s3">\n    </span><span class="s1">for (const fn of fns) {</span><span class="s3">\n      </span><span class="s1">fn.apply(this, args);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>