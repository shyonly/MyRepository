<html>
<head>
<title>attribute.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6aab73;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #cf8e6d;}
.s4 { color: #2aacb8;}
.s5 { color: #42c3d4;}
.s6 { color: #7a7e85;}
.s7 { color: #5f826b; font-style: italic;}
.s8 { color: #67a37c; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
attribute.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>

<span class="s2">exports</span><span class="s1">.</span><span class="s2">__esModule </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
<span class="s2">exports</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">] = </span><span class="s3">void </span><span class="s4">0</span><span class="s1">;</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">unescapeValue </span><span class="s1">= </span><span class="s2">unescapeValue</span><span class="s1">;</span>
<span class="s3">var </span><span class="s2">_cssesc </span><span class="s1">= </span><span class="s2">_interopRequireDefault</span><span class="s1">(</span><span class="s2">require</span><span class="s1">(</span><span class="s0">&quot;cssesc&quot;</span><span class="s1">));</span>
<span class="s3">var </span><span class="s2">_unesc </span><span class="s1">= </span><span class="s2">_interopRequireDefault</span><span class="s1">(</span><span class="s2">require</span><span class="s1">(</span><span class="s0">&quot;../util/unesc&quot;</span><span class="s1">));</span>
<span class="s3">var </span><span class="s2">_namespace </span><span class="s1">= </span><span class="s2">_interopRequireDefault</span><span class="s1">(</span><span class="s2">require</span><span class="s1">(</span><span class="s0">&quot;./namespace&quot;</span><span class="s1">));</span>
<span class="s3">var </span><span class="s2">_types </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">&quot;./types&quot;</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">_CSSESC_QUOTE_OPTIONS</span><span class="s1">;</span>
<span class="s3">function </span><span class="s2">_interopRequireDefault</span><span class="s1">(</span><span class="s2">obj</span><span class="s1">) { </span><span class="s3">return </span><span class="s2">obj </span><span class="s1">&amp;&amp; </span><span class="s2">obj</span><span class="s1">.</span><span class="s2">__esModule </span><span class="s1">? </span><span class="s2">obj </span><span class="s1">: { </span><span class="s0">&quot;default&quot;</span><span class="s1">: </span><span class="s2">obj </span><span class="s1">}; }</span>
<span class="s3">function </span><span class="s2">_defineProperties</span><span class="s1">(</span><span class="s2">target</span><span class="s1">, </span><span class="s2">props</span><span class="s1">) { </span><span class="s3">for </span><span class="s1">(</span><span class="s3">var </span><span class="s2">i </span><span class="s1">= </span><span class="s4">0</span><span class="s1">; </span><span class="s2">i </span><span class="s1">&lt; </span><span class="s2">props</span><span class="s1">.</span><span class="s2">length</span><span class="s1">; </span><span class="s2">i</span><span class="s1">++) { </span><span class="s3">var </span><span class="s2">descriptor </span><span class="s1">= </span><span class="s2">props</span><span class="s1">[</span><span class="s2">i</span><span class="s1">]; </span><span class="s2">descriptor</span><span class="s1">.</span><span class="s2">enumerable </span><span class="s1">= </span><span class="s2">descriptor</span><span class="s1">.</span><span class="s2">enumerable </span><span class="s1">|| </span><span class="s3">false</span><span class="s1">; </span><span class="s2">descriptor</span><span class="s1">.</span><span class="s2">configurable </span><span class="s1">= </span><span class="s3">true</span><span class="s1">; </span><span class="s3">if </span><span class="s1">(</span><span class="s0">&quot;value&quot; </span><span class="s3">in </span><span class="s2">descriptor</span><span class="s1">) </span><span class="s2">descriptor</span><span class="s1">.</span><span class="s2">writable </span><span class="s1">= </span><span class="s3">true</span><span class="s1">; </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">defineProperty</span><span class="s1">(</span><span class="s2">target</span><span class="s1">, </span><span class="s2">descriptor</span><span class="s1">.</span><span class="s2">key</span><span class="s1">, </span><span class="s2">descriptor</span><span class="s1">); } }</span>
<span class="s3">function </span><span class="s2">_createClass</span><span class="s1">(</span><span class="s2">Constructor</span><span class="s1">, </span><span class="s2">protoProps</span><span class="s1">, </span><span class="s2">staticProps</span><span class="s1">) { </span><span class="s3">if </span><span class="s1">(</span><span class="s2">protoProps</span><span class="s1">) </span><span class="s2">_defineProperties</span><span class="s1">(</span><span class="s2">Constructor</span><span class="s1">.</span><span class="s2">prototype</span><span class="s1">, </span><span class="s2">protoProps</span><span class="s1">); </span><span class="s3">if </span><span class="s1">(</span><span class="s2">staticProps</span><span class="s1">) </span><span class="s2">_defineProperties</span><span class="s1">(</span><span class="s2">Constructor</span><span class="s1">, </span><span class="s2">staticProps</span><span class="s1">); </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">defineProperty</span><span class="s1">(</span><span class="s2">Constructor</span><span class="s1">, </span><span class="s0">&quot;prototype&quot;</span><span class="s1">, { </span><span class="s2">writable</span><span class="s1">: </span><span class="s3">false </span><span class="s1">}); </span><span class="s3">return </span><span class="s2">Constructor</span><span class="s1">; }</span>
<span class="s3">function </span><span class="s2">_inheritsLoose</span><span class="s1">(</span><span class="s2">subClass</span><span class="s1">, </span><span class="s2">superClass</span><span class="s1">) { </span><span class="s2">subClass</span><span class="s1">.</span><span class="s2">prototype </span><span class="s1">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">create</span><span class="s1">(</span><span class="s2">superClass</span><span class="s1">.</span><span class="s2">prototype</span><span class="s1">); </span><span class="s2">subClass</span><span class="s1">.</span><span class="s2">prototype</span><span class="s1">.</span><span class="s2">constructor </span><span class="s1">= </span><span class="s2">subClass</span><span class="s1">; </span><span class="s2">_setPrototypeOf</span><span class="s1">(</span><span class="s2">subClass</span><span class="s1">, </span><span class="s2">superClass</span><span class="s1">); }</span>
<span class="s3">function </span><span class="s2">_setPrototypeOf</span><span class="s1">(</span><span class="s2">o</span><span class="s1">, </span><span class="s2">p</span><span class="s1">) { </span><span class="s2">_setPrototypeOf </span><span class="s1">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">setPrototypeOf </span><span class="s1">? </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">setPrototypeOf</span><span class="s1">.</span><span class="s2">bind</span><span class="s1">() : </span><span class="s3">function </span><span class="s2">_setPrototypeOf</span><span class="s1">(</span><span class="s2">o</span><span class="s1">, </span><span class="s2">p</span><span class="s1">) { </span><span class="s2">o</span><span class="s1">.</span><span class="s2">__proto__ </span><span class="s1">= </span><span class="s2">p</span><span class="s1">; </span><span class="s3">return </span><span class="s2">o</span><span class="s1">; }; </span><span class="s3">return </span><span class="s2">_setPrototypeOf</span><span class="s1">(</span><span class="s2">o</span><span class="s1">, </span><span class="s2">p</span><span class="s1">); }</span>
<span class="s3">var </span><span class="s2">deprecate </span><span class="s1">= </span><span class="s2">require</span><span class="s1">(</span><span class="s0">&quot;util-deprecate&quot;</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">WRAPPED_IN_QUOTES </span><span class="s1">= </span><span class="s5">/^('|&quot;)([^]*)\1$/</span><span class="s1">;</span>
<span class="s3">var </span><span class="s2">warnOfDeprecatedValueAssignment </span><span class="s1">= </span><span class="s2">deprecate</span><span class="s1">(</span><span class="s3">function </span><span class="s1">() {}, </span><span class="s0">&quot;Assigning an attribute a value containing characters that might need to be escaped is deprecated. &quot; </span><span class="s1">+ </span><span class="s0">&quot;Call attribute.setValue() instead.&quot;</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">warnOfDeprecatedQuotedAssignment </span><span class="s1">= </span><span class="s2">deprecate</span><span class="s1">(</span><span class="s3">function </span><span class="s1">() {}, </span><span class="s0">&quot;Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead.&quot;</span><span class="s1">);</span>
<span class="s3">var </span><span class="s2">warnOfDeprecatedConstructor </span><span class="s1">= </span><span class="s2">deprecate</span><span class="s1">(</span><span class="s3">function </span><span class="s1">() {}, </span><span class="s0">&quot;Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.&quot;</span><span class="s1">);</span>
<span class="s3">function </span><span class="s2">unescapeValue</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) {</span>
  <span class="s3">var </span><span class="s2">deprecatedUsage </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>
  <span class="s3">var </span><span class="s2">quoteMark </span><span class="s1">= </span><span class="s3">null</span><span class="s1">;</span>
  <span class="s3">var </span><span class="s2">unescaped </span><span class="s1">= </span><span class="s2">value</span><span class="s1">;</span>
  <span class="s3">var </span><span class="s2">m </span><span class="s1">= </span><span class="s2">unescaped</span><span class="s1">.</span><span class="s2">match</span><span class="s1">(</span><span class="s2">WRAPPED_IN_QUOTES</span><span class="s1">);</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">m</span><span class="s1">) {</span>
    <span class="s2">quoteMark </span><span class="s1">= </span><span class="s2">m</span><span class="s1">[</span><span class="s4">1</span><span class="s1">];</span>
    <span class="s2">unescaped </span><span class="s1">= </span><span class="s2">m</span><span class="s1">[</span><span class="s4">2</span><span class="s1">];</span>
  <span class="s1">}</span>
  <span class="s2">unescaped </span><span class="s1">= (</span><span class="s4">0</span><span class="s1">, </span><span class="s2">_unesc</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">])(</span><span class="s2">unescaped</span><span class="s1">);</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">unescaped </span><span class="s1">!== </span><span class="s2">value</span><span class="s1">) {</span>
    <span class="s2">deprecatedUsage </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
  <span class="s1">}</span>
  <span class="s3">return </span><span class="s1">{</span>
    <span class="s2">deprecatedUsage</span><span class="s1">: </span><span class="s2">deprecatedUsage</span><span class="s1">,</span>
    <span class="s2">unescaped</span><span class="s1">: </span><span class="s2">unescaped</span><span class="s1">,</span>
    <span class="s2">quoteMark</span><span class="s1">: </span><span class="s2">quoteMark</span>
  <span class="s1">};</span>
<span class="s1">}</span>
<span class="s3">function </span><span class="s2">handleDeprecatedContructorOpts</span><span class="s1">(</span><span class="s2">opts</span><span class="s1">) {</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">quoteMark </span><span class="s1">!== </span><span class="s2">undefined</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">opts</span><span class="s1">;</span>
  <span class="s1">}</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">value </span><span class="s1">=== </span><span class="s2">undefined</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">opts</span><span class="s1">;</span>
  <span class="s1">}</span>
  <span class="s2">warnOfDeprecatedConstructor</span><span class="s1">();</span>
  <span class="s3">var </span><span class="s2">_unescapeValue </span><span class="s1">= </span><span class="s2">unescapeValue</span><span class="s1">(</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">value</span><span class="s1">),</span>
    <span class="s2">quoteMark </span><span class="s1">= </span><span class="s2">_unescapeValue</span><span class="s1">.</span><span class="s2">quoteMark</span><span class="s1">,</span>
    <span class="s2">unescaped </span><span class="s1">= </span><span class="s2">_unescapeValue</span><span class="s1">.</span><span class="s2">unescaped</span><span class="s1">;</span>
  <span class="s3">if </span><span class="s1">(!</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">) {</span>
    <span class="s2">opts</span><span class="s1">.</span><span class="s2">raws </span><span class="s1">= {};</span>
  <span class="s1">}</span>
  <span class="s3">if </span><span class="s1">(</span><span class="s2">opts</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">value </span><span class="s1">=== </span><span class="s2">undefined</span><span class="s1">) {</span>
    <span class="s2">opts</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">value </span><span class="s1">= </span><span class="s2">opts</span><span class="s1">.</span><span class="s2">value</span><span class="s1">;</span>
  <span class="s1">}</span>
  <span class="s2">opts</span><span class="s1">.</span><span class="s2">value </span><span class="s1">= </span><span class="s2">unescaped</span><span class="s1">;</span>
  <span class="s2">opts</span><span class="s1">.</span><span class="s2">quoteMark </span><span class="s1">= </span><span class="s2">quoteMark</span><span class="s1">;</span>
  <span class="s3">return </span><span class="s2">opts</span><span class="s1">;</span>
<span class="s1">}</span>
<span class="s3">var </span><span class="s2">Attribute </span><span class="s1">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">function </span><span class="s1">(</span><span class="s2">_Namespace</span><span class="s1">) {</span>
  <span class="s2">_inheritsLoose</span><span class="s1">(</span><span class="s2">Attribute</span><span class="s1">, </span><span class="s2">_Namespace</span><span class="s1">);</span>
  <span class="s3">function </span><span class="s2">Attribute</span><span class="s1">(</span><span class="s2">opts</span><span class="s1">) {</span>
    <span class="s3">var </span><span class="s2">_this</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">opts </span><span class="s1">=== </span><span class="s3">void </span><span class="s4">0</span><span class="s1">) {</span>
      <span class="s2">opts </span><span class="s1">= {};</span>
    <span class="s1">}</span>
    <span class="s2">_this </span><span class="s1">= </span><span class="s2">_Namespace</span><span class="s1">.</span><span class="s2">call</span><span class="s1">(</span><span class="s3">this</span><span class="s1">, </span><span class="s2">handleDeprecatedContructorOpts</span><span class="s1">(</span><span class="s2">opts</span><span class="s1">)) || </span><span class="s3">this</span><span class="s1">;</span>
    <span class="s2">_this</span><span class="s1">.</span><span class="s2">type </span><span class="s1">= </span><span class="s2">_types</span><span class="s1">.</span><span class="s2">ATTRIBUTE</span><span class="s1">;</span>
    <span class="s2">_this</span><span class="s1">.</span><span class="s2">raws </span><span class="s1">= </span><span class="s2">_this</span><span class="s1">.</span><span class="s2">raws </span><span class="s1">|| {};</span>
    <span class="s2">Object</span><span class="s1">.</span><span class="s2">defineProperty</span><span class="s1">(</span><span class="s2">_this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">, </span><span class="s0">'unquoted'</span><span class="s1">, {</span>
      <span class="s2">get</span><span class="s1">: </span><span class="s2">deprecate</span><span class="s1">(</span><span class="s3">function </span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s2">_this</span><span class="s1">.</span><span class="s2">value</span><span class="s1">;</span>
      <span class="s1">}, </span><span class="s0">&quot;attr.raws.unquoted is deprecated. Call attr.value instead.&quot;</span><span class="s1">),</span>
      <span class="s2">set</span><span class="s1">: </span><span class="s2">deprecate</span><span class="s1">(</span><span class="s3">function </span><span class="s1">() {</span>
        <span class="s3">return </span><span class="s2">_this</span><span class="s1">.</span><span class="s2">value</span><span class="s1">;</span>
      <span class="s1">}, </span><span class="s0">&quot;Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.&quot;</span><span class="s1">)</span>
    <span class="s1">});</span>
    <span class="s2">_this</span><span class="s1">.</span><span class="s2">_constructed </span><span class="s1">= </span><span class="s3">true</span><span class="s1">;</span>
    <span class="s3">return </span><span class="s2">_this</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s7">/**</span>
   <span class="s7">* Returns the Attribute's value quoted such that it would be legal to use</span>
   <span class="s7">* in the value of a css file. The original value's quotation setting</span>
   <span class="s7">* used for stringification is left unchanged. See `setValue(value, options)`</span>
   <span class="s7">* if you want to control the quote settings of a new value for the attribute.</span>
   <span class="s7">*</span>
   <span class="s7">* You can also change the quotation used for the current value by setting quoteMark.</span>
   <span class="s7">*</span>
   <span class="s7">* Options:</span>
   <span class="s7">*   * quoteMark {'&quot;' | &quot;'&quot; | null} - Use this value to quote the value. If this</span>
   <span class="s7">*     option is not set, the original value for quoteMark will be used. If</span>
   <span class="s7">*     indeterminate, a double quote is used. The legal values are:</span>
   <span class="s7">*     * `null` - the value will be unquoted and characters will be escaped as necessary.</span>
   <span class="s7">*     * `'` - the value will be quoted with a single quote and single quotes are escaped.</span>
   <span class="s7">*     * `&quot;` - the value will be quoted with a double quote and double quotes are escaped.</span>
   <span class="s7">*   * preferCurrentQuoteMark {boolean} - if true, prefer the source quote mark</span>
   <span class="s7">*     over the quoteMark option value.</span>
   <span class="s7">*   * smart {boolean} - if true, will select a quote mark based on the value</span>
   <span class="s7">*     and the other options specified here. See the `smartQuoteMark()`</span>
   <span class="s7">*     method.</span>
   <span class="s7">**/</span>
  <span class="s3">var </span><span class="s2">_proto </span><span class="s1">= </span><span class="s2">Attribute</span><span class="s1">.</span><span class="s2">prototype</span><span class="s1">;</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">getQuotedValue </span><span class="s1">= </span><span class="s3">function </span><span class="s2">getQuotedValue</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">options </span><span class="s1">=== </span><span class="s3">void </span><span class="s4">0</span><span class="s1">) {</span>
      <span class="s2">options </span><span class="s1">= {};</span>
    <span class="s1">}</span>
    <span class="s3">var </span><span class="s2">quoteMark </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_determineQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">);</span>
    <span class="s3">var </span><span class="s2">cssescopts </span><span class="s1">= </span><span class="s2">CSSESC_QUOTE_OPTIONS</span><span class="s1">[</span><span class="s2">quoteMark</span><span class="s1">];</span>
    <span class="s3">var </span><span class="s2">escaped </span><span class="s1">= (</span><span class="s4">0</span><span class="s1">, </span><span class="s2">_cssesc</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">])(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_value</span><span class="s1">, </span><span class="s2">cssescopts</span><span class="s1">);</span>
    <span class="s3">return </span><span class="s2">escaped</span><span class="s1">;</span>
  <span class="s1">};</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">_determineQuoteMark </span><span class="s1">= </span><span class="s3">function </span><span class="s2">_determineQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s2">options</span><span class="s1">.</span><span class="s2">smart </span><span class="s1">? </span><span class="s3">this</span><span class="s1">.</span><span class="s2">smartQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) : </span><span class="s3">this</span><span class="s1">.</span><span class="s2">preferredQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s7">/**</span>
   <span class="s7">* Set the unescaped value with the specified quotation options. The value</span>
   <span class="s7">* provided must not include any wrapping quote marks -- those quotes will</span>
   <span class="s7">* be interpreted as part of the value and escaped accordingly.</span>
   <span class="s7">*/</span><span class="s1">;</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">setValue </span><span class="s1">= </span><span class="s3">function </span><span class="s2">setValue</span><span class="s1">(</span><span class="s2">value</span><span class="s1">, </span><span class="s2">options</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">options </span><span class="s1">=== </span><span class="s3">void </span><span class="s4">0</span><span class="s1">) {</span>
      <span class="s2">options </span><span class="s1">= {};</span>
    <span class="s1">}</span>
    <span class="s3">this</span><span class="s1">.</span><span class="s2">_value </span><span class="s1">= </span><span class="s2">value</span><span class="s1">;</span>
    <span class="s3">this</span><span class="s1">.</span><span class="s2">_quoteMark </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_determineQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">);</span>
    <span class="s3">this</span><span class="s1">.</span><span class="s2">_syncRawValue</span><span class="s1">();</span>
  <span class="s1">}</span>

  <span class="s7">/**</span>
   <span class="s7">* Intelligently select a quoteMark value based on the value's contents. If</span>
   <span class="s7">* the value is a legal CSS ident, it will not be quoted. Otherwise a quote</span>
   <span class="s7">* mark will be picked that minimizes the number of escapes.</span>
   <span class="s7">*</span>
   <span class="s7">* If there's no clear winner, the quote mark from these options is used,</span>
   <span class="s7">* then the source quote mark (this is inverted if `preferCurrentQuoteMark` is</span>
   <span class="s7">* true). If the quoteMark is unspecified, a double quote is used.</span>
   <span class="s7">*</span>
   <span class="s7">* </span><span class="s8">@param </span><span class="s7">options This takes the quoteMark and preferCurrentQuoteMark options</span>
   <span class="s7">* from the quoteValue method.</span>
   <span class="s7">*/</span><span class="s1">;</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">smartQuoteMark </span><span class="s1">= </span><span class="s3">function </span><span class="s2">smartQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) {</span>
    <span class="s3">var </span><span class="s2">v </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">value</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">numSingleQuotes </span><span class="s1">= </span><span class="s2">v</span><span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s5">/[^']/g</span><span class="s1">, </span><span class="s0">''</span><span class="s1">).</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">numDoubleQuotes </span><span class="s1">= </span><span class="s2">v</span><span class="s1">.</span><span class="s2">replace</span><span class="s1">(</span><span class="s5">/[^&quot;]/g</span><span class="s1">, </span><span class="s0">''</span><span class="s1">).</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">numSingleQuotes </span><span class="s1">+ </span><span class="s2">numDoubleQuotes </span><span class="s1">=== </span><span class="s4">0</span><span class="s1">) {</span>
      <span class="s3">var </span><span class="s2">escaped </span><span class="s1">= (</span><span class="s4">0</span><span class="s1">, </span><span class="s2">_cssesc</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">])(</span><span class="s2">v</span><span class="s1">, {</span>
        <span class="s2">isIdentifier</span><span class="s1">: </span><span class="s3">true</span>
      <span class="s1">});</span>
      <span class="s3">if </span><span class="s1">(</span><span class="s2">escaped </span><span class="s1">=== </span><span class="s2">v</span><span class="s1">) {</span>
        <span class="s3">return </span><span class="s2">Attribute</span><span class="s1">.</span><span class="s2">NO_QUOTE</span><span class="s1">;</span>
      <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
        <span class="s3">var </span><span class="s2">pref </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">preferredQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">);</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">pref </span><span class="s1">=== </span><span class="s2">Attribute</span><span class="s1">.</span><span class="s2">NO_QUOTE</span><span class="s1">) {</span>
          <span class="s6">// pick a quote mark that isn't none and see if it's smaller</span>
          <span class="s3">var </span><span class="s2">quote </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">quoteMark </span><span class="s1">|| </span><span class="s2">options</span><span class="s1">.</span><span class="s2">quoteMark </span><span class="s1">|| </span><span class="s2">Attribute</span><span class="s1">.</span><span class="s2">DOUBLE_QUOTE</span><span class="s1">;</span>
          <span class="s3">var </span><span class="s2">opts </span><span class="s1">= </span><span class="s2">CSSESC_QUOTE_OPTIONS</span><span class="s1">[</span><span class="s2">quote</span><span class="s1">];</span>
          <span class="s3">var </span><span class="s2">quoteValue </span><span class="s1">= (</span><span class="s4">0</span><span class="s1">, </span><span class="s2">_cssesc</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">])(</span><span class="s2">v</span><span class="s1">, </span><span class="s2">opts</span><span class="s1">);</span>
          <span class="s3">if </span><span class="s1">(</span><span class="s2">quoteValue</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&lt; </span><span class="s2">escaped</span><span class="s1">.</span><span class="s2">length</span><span class="s1">) {</span>
            <span class="s3">return </span><span class="s2">quote</span><span class="s1">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s3">return </span><span class="s2">pref</span><span class="s1">;</span>
      <span class="s1">}</span>
    <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">numDoubleQuotes </span><span class="s1">=== </span><span class="s2">numSingleQuotes</span><span class="s1">) {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">preferredQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s3">else if </span><span class="s1">(</span><span class="s2">numDoubleQuotes </span><span class="s1">&lt; </span><span class="s2">numSingleQuotes</span><span class="s1">) {</span>
      <span class="s3">return </span><span class="s2">Attribute</span><span class="s1">.</span><span class="s2">DOUBLE_QUOTE</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
      <span class="s3">return </span><span class="s2">Attribute</span><span class="s1">.</span><span class="s2">SINGLE_QUOTE</span><span class="s1">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s7">/**</span>
   <span class="s7">* Selects the preferred quote mark based on the options and the current quote mark value.</span>
   <span class="s7">* If you want the quote mark to depend on the attribute value, call `smartQuoteMark(opts)`</span>
   <span class="s7">* instead.</span>
   <span class="s7">*/</span><span class="s1">;</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">preferredQuoteMark </span><span class="s1">= </span><span class="s3">function </span><span class="s2">preferredQuoteMark</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) {</span>
    <span class="s3">var </span><span class="s2">quoteMark </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">preferCurrentQuoteMark </span><span class="s1">? </span><span class="s3">this</span><span class="s1">.</span><span class="s2">quoteMark </span><span class="s1">: </span><span class="s2">options</span><span class="s1">.</span><span class="s2">quoteMark</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">quoteMark </span><span class="s1">=== </span><span class="s2">undefined</span><span class="s1">) {</span>
      <span class="s2">quoteMark </span><span class="s1">= </span><span class="s2">options</span><span class="s1">.</span><span class="s2">preferCurrentQuoteMark </span><span class="s1">? </span><span class="s2">options</span><span class="s1">.</span><span class="s2">quoteMark </span><span class="s1">: </span><span class="s3">this</span><span class="s1">.</span><span class="s2">quoteMark</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">quoteMark </span><span class="s1">=== </span><span class="s2">undefined</span><span class="s1">) {</span>
      <span class="s2">quoteMark </span><span class="s1">= </span><span class="s2">Attribute</span><span class="s1">.</span><span class="s2">DOUBLE_QUOTE</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s2">quoteMark</span><span class="s1">;</span>
  <span class="s1">};</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">_syncRawValue </span><span class="s1">= </span><span class="s3">function </span><span class="s2">_syncRawValue</span><span class="s1">() {</span>
    <span class="s3">var </span><span class="s2">rawValue </span><span class="s1">= (</span><span class="s4">0</span><span class="s1">, </span><span class="s2">_cssesc</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">])(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_value</span><span class="s1">, </span><span class="s2">CSSESC_QUOTE_OPTIONS</span><span class="s1">[</span><span class="s3">this</span><span class="s1">.</span><span class="s2">quoteMark</span><span class="s1">]);</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">rawValue </span><span class="s1">=== </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_value</span><span class="s1">) {</span>
      <span class="s3">if </span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">) {</span>
        <span class="s3">delete this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">value</span><span class="s1">;</span>
      <span class="s1">}</span>
    <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
      <span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">value </span><span class="s1">= </span><span class="s2">rawValue</span><span class="s1">;</span>
    <span class="s1">}</span>
  <span class="s1">};</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">_handleEscapes </span><span class="s1">= </span><span class="s3">function </span><span class="s2">_handleEscapes</span><span class="s1">(</span><span class="s2">prop</span><span class="s1">, </span><span class="s2">value</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_constructed</span><span class="s1">) {</span>
      <span class="s3">var </span><span class="s2">escaped </span><span class="s1">= (</span><span class="s4">0</span><span class="s1">, </span><span class="s2">_cssesc</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">])(</span><span class="s2">value</span><span class="s1">, {</span>
        <span class="s2">isIdentifier</span><span class="s1">: </span><span class="s3">true</span>
      <span class="s1">});</span>
      <span class="s3">if </span><span class="s1">(</span><span class="s2">escaped </span><span class="s1">!== </span><span class="s2">value</span><span class="s1">) {</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">[</span><span class="s2">prop</span><span class="s1">] = </span><span class="s2">escaped</span><span class="s1">;</span>
      <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
        <span class="s3">delete this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">[</span><span class="s2">prop</span><span class="s1">];</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">};</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">_spacesFor </span><span class="s1">= </span><span class="s3">function </span><span class="s2">_spacesFor</span><span class="s1">(</span><span class="s2">name</span><span class="s1">) {</span>
    <span class="s3">var </span><span class="s2">attrSpaces </span><span class="s1">= {</span>
      <span class="s2">before</span><span class="s1">: </span><span class="s0">''</span><span class="s1">,</span>
      <span class="s2">after</span><span class="s1">: </span><span class="s0">''</span>
    <span class="s1">};</span>
    <span class="s3">var </span><span class="s2">spaces </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">spaces</span><span class="s1">[</span><span class="s2">name</span><span class="s1">] || {};</span>
    <span class="s3">var </span><span class="s2">rawSpaces </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">spaces </span><span class="s1">&amp;&amp; </span><span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">spaces</span><span class="s1">[</span><span class="s2">name</span><span class="s1">] || {};</span>
    <span class="s3">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s2">assign</span><span class="s1">(</span><span class="s2">attrSpaces</span><span class="s1">, </span><span class="s2">spaces</span><span class="s1">, </span><span class="s2">rawSpaces</span><span class="s1">);</span>
  <span class="s1">};</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">_stringFor </span><span class="s1">= </span><span class="s3">function </span><span class="s2">_stringFor</span><span class="s1">(</span><span class="s2">name</span><span class="s1">, </span><span class="s2">spaceName</span><span class="s1">, </span><span class="s2">concat</span><span class="s1">) {</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">spaceName </span><span class="s1">=== </span><span class="s3">void </span><span class="s4">0</span><span class="s1">) {</span>
      <span class="s2">spaceName </span><span class="s1">= </span><span class="s2">name</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">concat </span><span class="s1">=== </span><span class="s3">void </span><span class="s4">0</span><span class="s1">) {</span>
      <span class="s2">concat </span><span class="s1">= </span><span class="s2">defaultAttrConcat</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">var </span><span class="s2">attrSpaces </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_spacesFor</span><span class="s1">(</span><span class="s2">spaceName</span><span class="s1">);</span>
    <span class="s3">return </span><span class="s2">concat</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">stringifyProperty</span><span class="s1">(</span><span class="s2">name</span><span class="s1">), </span><span class="s2">attrSpaces</span><span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s7">/**</span>
   <span class="s7">* returns the offset of the attribute part specified relative to the</span>
   <span class="s7">* start of the node of the output string.</span>
   <span class="s7">*</span>
   <span class="s7">* * &quot;ns&quot; - alias for &quot;namespace&quot;</span>
   <span class="s7">* * &quot;namespace&quot; - the namespace if it exists.</span>
   <span class="s7">* * &quot;attribute&quot; - the attribute name</span>
   <span class="s7">* * &quot;attributeNS&quot; - the start of the attribute or its namespace</span>
   <span class="s7">* * &quot;operator&quot; - the match operator of the attribute</span>
   <span class="s7">* * &quot;value&quot; - The value (string or identifier)</span>
   <span class="s7">* * &quot;insensitive&quot; - the case insensitivity flag;</span>
   <span class="s7">* </span><span class="s8">@param </span><span class="s7">part One of the possible values inside an attribute.</span>
   <span class="s7">* </span><span class="s8">@returns </span><span class="s7">-1 if the name is invalid or the value doesn't exist in this attribute.</span>
   <span class="s7">*/</span><span class="s1">;</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">offsetOf </span><span class="s1">= </span><span class="s3">function </span><span class="s2">offsetOf</span><span class="s1">(</span><span class="s2">name</span><span class="s1">) {</span>
    <span class="s3">var </span><span class="s2">count </span><span class="s1">= </span><span class="s4">1</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">attributeSpaces </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_spacesFor</span><span class="s1">(</span><span class="s0">&quot;attribute&quot;</span><span class="s1">);</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">attributeSpaces</span><span class="s1">.</span><span class="s2">before</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">name </span><span class="s1">=== </span><span class="s0">&quot;namespace&quot; </span><span class="s1">|| </span><span class="s2">name </span><span class="s1">=== </span><span class="s0">&quot;ns&quot;</span><span class="s1">) {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">namespace </span><span class="s1">? </span><span class="s2">count </span><span class="s1">: -</span><span class="s4">1</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">name </span><span class="s1">=== </span><span class="s0">&quot;attributeNS&quot;</span><span class="s1">) {</span>
      <span class="s3">return </span><span class="s2">count</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">namespaceString</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">namespace</span><span class="s1">) {</span>
      <span class="s2">count </span><span class="s1">+= </span><span class="s4">1</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">name </span><span class="s1">=== </span><span class="s0">&quot;attribute&quot;</span><span class="s1">) {</span>
      <span class="s3">return </span><span class="s2">count</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">stringifyProperty</span><span class="s1">(</span><span class="s0">&quot;attribute&quot;</span><span class="s1">).</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">attributeSpaces</span><span class="s1">.</span><span class="s2">after</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">operatorSpaces </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_spacesFor</span><span class="s1">(</span><span class="s0">&quot;operator&quot;</span><span class="s1">);</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">operatorSpaces</span><span class="s1">.</span><span class="s2">before</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">operator </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">stringifyProperty</span><span class="s1">(</span><span class="s0">&quot;operator&quot;</span><span class="s1">);</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">name </span><span class="s1">=== </span><span class="s0">&quot;operator&quot;</span><span class="s1">) {</span>
      <span class="s3">return </span><span class="s2">operator </span><span class="s1">? </span><span class="s2">count </span><span class="s1">: -</span><span class="s4">1</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">operator</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">operatorSpaces</span><span class="s1">.</span><span class="s2">after</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">valueSpaces </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_spacesFor</span><span class="s1">(</span><span class="s0">&quot;value&quot;</span><span class="s1">);</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">valueSpaces</span><span class="s1">.</span><span class="s2">before</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">value </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">stringifyProperty</span><span class="s1">(</span><span class="s0">&quot;value&quot;</span><span class="s1">);</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">name </span><span class="s1">=== </span><span class="s0">&quot;value&quot;</span><span class="s1">) {</span>
      <span class="s3">return </span><span class="s2">value </span><span class="s1">? </span><span class="s2">count </span><span class="s1">: -</span><span class="s4">1</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">value</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">valueSpaces</span><span class="s1">.</span><span class="s2">after</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">insensitiveSpaces </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_spacesFor</span><span class="s1">(</span><span class="s0">&quot;insensitive&quot;</span><span class="s1">);</span>
    <span class="s2">count </span><span class="s1">+= </span><span class="s2">insensitiveSpaces</span><span class="s1">.</span><span class="s2">before</span><span class="s1">.</span><span class="s2">length</span><span class="s1">;</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s2">name </span><span class="s1">=== </span><span class="s0">&quot;insensitive&quot;</span><span class="s1">) {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">insensitive </span><span class="s1">? </span><span class="s2">count </span><span class="s1">: -</span><span class="s4">1</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s3">return </span><span class="s1">-</span><span class="s4">1</span><span class="s1">;</span>
  <span class="s1">};</span>
  <span class="s2">_proto</span><span class="s1">.</span><span class="s2">toString </span><span class="s1">= </span><span class="s3">function </span><span class="s2">toString</span><span class="s1">() {</span>
    <span class="s3">var </span><span class="s2">_this2 </span><span class="s1">= </span><span class="s3">this</span><span class="s1">;</span>
    <span class="s3">var </span><span class="s2">selector </span><span class="s1">= [</span><span class="s3">this</span><span class="s1">.</span><span class="s2">rawSpaceBefore</span><span class="s1">, </span><span class="s0">'['</span><span class="s1">];</span>
    <span class="s2">selector</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_stringFor</span><span class="s1">(</span><span class="s0">'qualifiedAttribute'</span><span class="s1">, </span><span class="s0">'attribute'</span><span class="s1">));</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">operator </span><span class="s1">&amp;&amp; (</span><span class="s3">this</span><span class="s1">.</span><span class="s2">value </span><span class="s1">|| </span><span class="s3">this</span><span class="s1">.</span><span class="s2">value </span><span class="s1">=== </span><span class="s0">''</span><span class="s1">)) {</span>
      <span class="s2">selector</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_stringFor</span><span class="s1">(</span><span class="s0">'operator'</span><span class="s1">));</span>
      <span class="s2">selector</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_stringFor</span><span class="s1">(</span><span class="s0">'value'</span><span class="s1">));</span>
      <span class="s2">selector</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_stringFor</span><span class="s1">(</span><span class="s0">'insensitiveFlag'</span><span class="s1">, </span><span class="s0">'insensitive'</span><span class="s1">, </span><span class="s3">function </span><span class="s1">(</span><span class="s2">attrValue</span><span class="s1">, </span><span class="s2">attrSpaces</span><span class="s1">) {</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">attrValue</span><span class="s1">.</span><span class="s2">length </span><span class="s1">&gt; </span><span class="s4">0 </span><span class="s1">&amp;&amp; !</span><span class="s2">_this2</span><span class="s1">.</span><span class="s2">quoted </span><span class="s1">&amp;&amp; </span><span class="s2">attrSpaces</span><span class="s1">.</span><span class="s2">before</span><span class="s1">.</span><span class="s2">length </span><span class="s1">=== </span><span class="s4">0 </span><span class="s1">&amp;&amp; !(</span><span class="s2">_this2</span><span class="s1">.</span><span class="s2">spaces</span><span class="s1">.</span><span class="s2">value </span><span class="s1">&amp;&amp; </span><span class="s2">_this2</span><span class="s1">.</span><span class="s2">spaces</span><span class="s1">.</span><span class="s2">value</span><span class="s1">.</span><span class="s2">after</span><span class="s1">)) {</span>
          <span class="s2">attrSpaces</span><span class="s1">.</span><span class="s2">before </span><span class="s1">= </span><span class="s0">&quot; &quot;</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s3">return </span><span class="s2">defaultAttrConcat</span><span class="s1">(</span><span class="s2">attrValue</span><span class="s1">, </span><span class="s2">attrSpaces</span><span class="s1">);</span>
      <span class="s1">}));</span>
    <span class="s1">}</span>
    <span class="s2">selector</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s0">']'</span><span class="s1">);</span>
    <span class="s2">selector</span><span class="s1">.</span><span class="s2">push</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">rawSpaceAfter</span><span class="s1">);</span>
    <span class="s3">return </span><span class="s2">selector</span><span class="s1">.</span><span class="s2">join</span><span class="s1">(</span><span class="s0">''</span><span class="s1">);</span>
  <span class="s1">};</span>
  <span class="s2">_createClass</span><span class="s1">(</span><span class="s2">Attribute</span><span class="s1">, [{</span>
    <span class="s2">key</span><span class="s1">: </span><span class="s0">&quot;quoted&quot;</span><span class="s1">,</span>
    <span class="s2">get</span><span class="s1">: </span><span class="s3">function </span><span class="s2">get</span><span class="s1">() {</span>
      <span class="s3">var </span><span class="s2">qm </span><span class="s1">= </span><span class="s3">this</span><span class="s1">.</span><span class="s2">quoteMark</span><span class="s1">;</span>
      <span class="s3">return </span><span class="s2">qm </span><span class="s1">=== </span><span class="s0">&quot;'&quot; </span><span class="s1">|| </span><span class="s2">qm </span><span class="s1">=== </span><span class="s0">'&quot;'</span><span class="s1">;</span>
    <span class="s1">},</span>
    <span class="s2">set</span><span class="s1">: </span><span class="s3">function </span><span class="s2">set</span><span class="s1">(</span><span class="s2">value</span><span class="s1">) {</span>
      <span class="s2">warnOfDeprecatedQuotedAssignment</span><span class="s1">();</span>
    <span class="s1">}</span>

    <span class="s7">/**</span>
     <span class="s7">* returns a single (`'`) or double (`&quot;`) quote character if the value is quoted.</span>
     <span class="s7">* returns `null` if the value is not quoted.</span>
     <span class="s7">* returns `undefined` if the quotation state is unknown (this can happen when</span>
     <span class="s7">* the attribute is constructed without specifying a quote mark.)</span>
     <span class="s7">*/</span>
  <span class="s1">}, {</span>
    <span class="s2">key</span><span class="s1">: </span><span class="s0">&quot;quoteMark&quot;</span><span class="s1">,</span>
    <span class="s2">get</span><span class="s1">: </span><span class="s3">function </span><span class="s2">get</span><span class="s1">() {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">_quoteMark</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Set the quote mark to be used by this attribute's value.</span>
     <span class="s7">* If the quote mark changes, the raw (escaped) value at `attr.raws.value` of the attribute</span>
     <span class="s7">* value is updated accordingly.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">{&quot;'&quot; | '&quot;' | null} quoteMark The quote mark or `null` if the value should be unquoted.</span>
     <span class="s7">*/</span><span class="s1">,</span>
    <span class="s2">set</span><span class="s1">: </span><span class="s3">function </span><span class="s2">set</span><span class="s1">(</span><span class="s2">quoteMark</span><span class="s1">) {</span>
      <span class="s3">if </span><span class="s1">(!</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_constructed</span><span class="s1">) {</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">_quoteMark </span><span class="s1">= </span><span class="s2">quoteMark</span><span class="s1">;</span>
        <span class="s3">return</span><span class="s1">;</span>
      <span class="s1">}</span>
      <span class="s3">if </span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_quoteMark </span><span class="s1">!== </span><span class="s2">quoteMark</span><span class="s1">) {</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">_quoteMark </span><span class="s1">= </span><span class="s2">quoteMark</span><span class="s1">;</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">_syncRawValue</span><span class="s1">();</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}, {</span>
    <span class="s2">key</span><span class="s1">: </span><span class="s0">&quot;qualifiedAttribute&quot;</span><span class="s1">,</span>
    <span class="s2">get</span><span class="s1">: </span><span class="s3">function </span><span class="s2">get</span><span class="s1">() {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">qualifiedName</span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">attribute </span><span class="s1">|| </span><span class="s3">this</span><span class="s1">.</span><span class="s2">attribute</span><span class="s1">);</span>
    <span class="s1">}</span>
  <span class="s1">}, {</span>
    <span class="s2">key</span><span class="s1">: </span><span class="s0">&quot;insensitiveFlag&quot;</span><span class="s1">,</span>
    <span class="s2">get</span><span class="s1">: </span><span class="s3">function </span><span class="s2">get</span><span class="s1">() {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">insensitive </span><span class="s1">? </span><span class="s0">'i' </span><span class="s1">: </span><span class="s0">''</span><span class="s1">;</span>
    <span class="s1">}</span>
  <span class="s1">}, {</span>
    <span class="s2">key</span><span class="s1">: </span><span class="s0">&quot;value&quot;</span><span class="s1">,</span>
    <span class="s2">get</span><span class="s1">: </span><span class="s3">function </span><span class="s2">get</span><span class="s1">() {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">_value</span><span class="s1">;</span>
    <span class="s1">},</span>
    <span class="s2">set</span><span class="s1">:</span>
    <span class="s7">/**</span>
     <span class="s7">* Before 3.0, the value had to be set to an escaped value including any wrapped</span>
     <span class="s7">* quote marks. In 3.0, the semantics of `Attribute.value` changed so that the value</span>
     <span class="s7">* is unescaped during parsing and any quote marks are removed.</span>
     <span class="s7">*</span>
     <span class="s7">* Because the ambiguity of this semantic change, if you set `attr.value = newValue`,</span>
     <span class="s7">* a deprecation warning is raised when the new value contains any characters that would</span>
     <span class="s7">* require escaping (including if it contains wrapped quotes).</span>
     <span class="s7">*</span>
     <span class="s7">* Instead, you should call `attr.setValue(newValue, opts)` and pass options that describe</span>
     <span class="s7">* how the new value is quoted.</span>
     <span class="s7">*/</span>
    <span class="s3">function </span><span class="s2">set</span><span class="s1">(</span><span class="s2">v</span><span class="s1">) {</span>
      <span class="s3">if </span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">_constructed</span><span class="s1">) {</span>
        <span class="s3">var </span><span class="s2">_unescapeValue2 </span><span class="s1">= </span><span class="s2">unescapeValue</span><span class="s1">(</span><span class="s2">v</span><span class="s1">),</span>
          <span class="s2">deprecatedUsage </span><span class="s1">= </span><span class="s2">_unescapeValue2</span><span class="s1">.</span><span class="s2">deprecatedUsage</span><span class="s1">,</span>
          <span class="s2">unescaped </span><span class="s1">= </span><span class="s2">_unescapeValue2</span><span class="s1">.</span><span class="s2">unescaped</span><span class="s1">,</span>
          <span class="s2">quoteMark </span><span class="s1">= </span><span class="s2">_unescapeValue2</span><span class="s1">.</span><span class="s2">quoteMark</span><span class="s1">;</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">deprecatedUsage</span><span class="s1">) {</span>
          <span class="s2">warnOfDeprecatedValueAssignment</span><span class="s1">();</span>
        <span class="s1">}</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s2">unescaped </span><span class="s1">=== </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_value </span><span class="s1">&amp;&amp; </span><span class="s2">quoteMark </span><span class="s1">=== </span><span class="s3">this</span><span class="s1">.</span><span class="s2">_quoteMark</span><span class="s1">) {</span>
          <span class="s3">return</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">_value </span><span class="s1">= </span><span class="s2">unescaped</span><span class="s1">;</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">_quoteMark </span><span class="s1">= </span><span class="s2">quoteMark</span><span class="s1">;</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">_syncRawValue</span><span class="s1">();</span>
      <span class="s1">} </span><span class="s3">else </span><span class="s1">{</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">_value </span><span class="s1">= </span><span class="s2">v</span><span class="s1">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}, {</span>
    <span class="s2">key</span><span class="s1">: </span><span class="s0">&quot;insensitive&quot;</span><span class="s1">,</span>
    <span class="s2">get</span><span class="s1">: </span><span class="s3">function </span><span class="s2">get</span><span class="s1">() {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">_insensitive</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s7">/**</span>
     <span class="s7">* Set the case insensitive flag.</span>
     <span class="s7">* If the case insensitive flag changes, the raw (escaped) value at `attr.raws.insensitiveFlag`</span>
     <span class="s7">* of the attribute is updated accordingly.</span>
     <span class="s7">*</span>
     <span class="s7">* </span><span class="s8">@param </span><span class="s7">{true | false} insensitive true if the attribute should match case-insensitively.</span>
     <span class="s7">*/</span><span class="s1">,</span>
    <span class="s2">set</span><span class="s1">: </span><span class="s3">function </span><span class="s2">set</span><span class="s1">(</span><span class="s2">insensitive</span><span class="s1">) {</span>
      <span class="s3">if </span><span class="s1">(!</span><span class="s2">insensitive</span><span class="s1">) {</span>
        <span class="s3">this</span><span class="s1">.</span><span class="s2">_insensitive </span><span class="s1">= </span><span class="s3">false</span><span class="s1">;</span>

        <span class="s6">// &quot;i&quot; and &quot;I&quot; can be used in &quot;this.raws.insensitiveFlag&quot; to store the original notation.</span>
        <span class="s6">// When setting `attr.insensitive = false` both should be erased to ensure correct serialization.</span>
        <span class="s3">if </span><span class="s1">(</span><span class="s3">this</span><span class="s1">.</span><span class="s2">raws </span><span class="s1">&amp;&amp; (</span><span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">insensitiveFlag </span><span class="s1">=== </span><span class="s0">'I' </span><span class="s1">|| </span><span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">insensitiveFlag </span><span class="s1">=== </span><span class="s0">'i'</span><span class="s1">)) {</span>
          <span class="s3">this</span><span class="s1">.</span><span class="s2">raws</span><span class="s1">.</span><span class="s2">insensitiveFlag </span><span class="s1">= </span><span class="s2">undefined</span><span class="s1">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
      <span class="s3">this</span><span class="s1">.</span><span class="s2">_insensitive </span><span class="s1">= </span><span class="s2">insensitive</span><span class="s1">;</span>
    <span class="s1">}</span>
  <span class="s1">}, {</span>
    <span class="s2">key</span><span class="s1">: </span><span class="s0">&quot;attribute&quot;</span><span class="s1">,</span>
    <span class="s2">get</span><span class="s1">: </span><span class="s3">function </span><span class="s2">get</span><span class="s1">() {</span>
      <span class="s3">return this</span><span class="s1">.</span><span class="s2">_attribute</span><span class="s1">;</span>
    <span class="s1">},</span>
    <span class="s2">set</span><span class="s1">: </span><span class="s3">function </span><span class="s2">set</span><span class="s1">(</span><span class="s2">name</span><span class="s1">) {</span>
      <span class="s3">this</span><span class="s1">.</span><span class="s2">_handleEscapes</span><span class="s1">(</span><span class="s0">&quot;attribute&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">);</span>
      <span class="s3">this</span><span class="s1">.</span><span class="s2">_attribute </span><span class="s1">= </span><span class="s2">name</span><span class="s1">;</span>
    <span class="s1">}</span>
  <span class="s1">}]);</span>
  <span class="s3">return </span><span class="s2">Attribute</span><span class="s1">;</span>
<span class="s1">}(</span><span class="s2">_namespace</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">]);</span>
<span class="s2">exports</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">] = </span><span class="s2">Attribute</span><span class="s1">;</span>
<span class="s2">Attribute</span><span class="s1">.</span><span class="s2">NO_QUOTE </span><span class="s1">= </span><span class="s3">null</span><span class="s1">;</span>
<span class="s2">Attribute</span><span class="s1">.</span><span class="s2">SINGLE_QUOTE </span><span class="s1">= </span><span class="s0">&quot;'&quot;</span><span class="s1">;</span>
<span class="s2">Attribute</span><span class="s1">.</span><span class="s2">DOUBLE_QUOTE </span><span class="s1">= </span><span class="s0">'&quot;'</span><span class="s1">;</span>
<span class="s3">var </span><span class="s2">CSSESC_QUOTE_OPTIONS </span><span class="s1">= (</span><span class="s2">_CSSESC_QUOTE_OPTIONS </span><span class="s1">= {</span>
  <span class="s0">&quot;'&quot;</span><span class="s1">: {</span>
    <span class="s2">quotes</span><span class="s1">: </span><span class="s0">'single'</span><span class="s1">,</span>
    <span class="s2">wrap</span><span class="s1">: </span><span class="s3">true</span>
  <span class="s1">},</span>
  <span class="s0">'&quot;'</span><span class="s1">: {</span>
    <span class="s2">quotes</span><span class="s1">: </span><span class="s0">'double'</span><span class="s1">,</span>
    <span class="s2">wrap</span><span class="s1">: </span><span class="s3">true</span>
  <span class="s1">}</span>
<span class="s1">}, </span><span class="s2">_CSSESC_QUOTE_OPTIONS</span><span class="s1">[</span><span class="s3">null</span><span class="s1">] = {</span>
  <span class="s2">isIdentifier</span><span class="s1">: </span><span class="s3">true</span>
<span class="s1">}, </span><span class="s2">_CSSESC_QUOTE_OPTIONS</span><span class="s1">);</span>
<span class="s3">function </span><span class="s2">defaultAttrConcat</span><span class="s1">(</span><span class="s2">attrValue</span><span class="s1">, </span><span class="s2">attrSpaces</span><span class="s1">) {</span>
  <span class="s3">return </span><span class="s0">&quot;&quot; </span><span class="s1">+ </span><span class="s2">attrSpaces</span><span class="s1">.</span><span class="s2">before </span><span class="s1">+ </span><span class="s2">attrValue </span><span class="s1">+ </span><span class="s2">attrSpaces</span><span class="s1">.</span><span class="s2">after</span><span class="s1">;</span>
<span class="s1">}</span></pre>
</body>
</html>