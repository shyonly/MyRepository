<html>
<head>
<title>index.md</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #56a8f5;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
index.md</font>
</center></td></tr></table>
<pre><span class="s0">### </span><span class="s2">Javascript porting of Markus Kuhn's wcwidth</span><span class="s1">() </span><span class="s2">implementation</span>

<span class="s2">The following explanation comes from the original C implementation</span><span class="s1">:</span>

<span class="s2">This is an implementation of wcwidth</span><span class="s1">() </span><span class="s2">and wcswidth</span><span class="s1">() (</span><span class="s2">defined in</span>
<span class="s2">IEEE Std 1002.1-2001</span><span class="s1">) </span><span class="s2">for Unicode.</span>

<span class="s3">http://www.opengroup.org/onlinepubs/007904975/functions/wcwidth.html</span>
<span class="s3">http://www.opengroup.org/onlinepubs/007904975/functions/wcswidth.html</span>

<span class="s2">In fixed-width output devices, Latin characters all occupy a single</span>
<span class="s1">&quot;</span><span class="s2">cell</span><span class="s1">&quot; </span><span class="s2">position of equal width, whereas ideographic CJK characters</span>
<span class="s2">occupy two such cells. Interoperability between terminal-line</span>
<span class="s2">applications and </span><span class="s1">(</span><span class="s2">teletype-style</span><span class="s1">) </span><span class="s2">character terminals using the</span>
<span class="s2">UTF-8 encoding requires agreement on which character should advance</span>
<span class="s2">the cursor by how many cell positions. No established formal</span>
<span class="s2">standards exist at present on which Unicode character shall occupy</span>
<span class="s2">how many cell positions on character terminals. These routines are</span>
<span class="s2">a first attempt of defining such behavior based on simple rules</span>
<span class="s2">applied to data provided by the Unicode Consortium.</span>

<span class="s2">For some graphical characters, the Unicode standard explicitly</span>
<span class="s2">defines a character-cell width via the definition of the East Asian</span>
<span class="s2">FullWidth </span><span class="s1">(</span><span class="s2">F</span><span class="s1">)</span><span class="s2">, Wide </span><span class="s1">(</span><span class="s2">W</span><span class="s1">)</span><span class="s2">, Half-width </span><span class="s1">(</span><span class="s2">H</span><span class="s1">)</span><span class="s2">, and Narrow </span><span class="s1">(</span><span class="s2">Na</span><span class="s1">) </span><span class="s2">classes.</span>
<span class="s2">In all these cases, there is no ambiguity about which width a</span>
<span class="s2">terminal shall use. For characters in the East Asian Ambiguous </span><span class="s1">(</span><span class="s2">A</span><span class="s1">)</span>
<span class="s2">class, the width choice depends purely on a preference of backward</span>
<span class="s2">compatibility with either historic CJK or Western practice.</span>
<span class="s2">Choosing single-width for these characters is easy to justify as</span>
<span class="s2">the appropriate long-term solution, as the CJK practice of</span>
<span class="s2">displaying these characters as double-width comes from historic</span>
<span class="s2">implementation simplicity </span><span class="s1">(</span><span class="s2">8-bit encoded characters were displayed</span>
<span class="s2">single-width and 16-bit ones double-width, even for Greek,</span>
<span class="s2">Cyrillic, etc.</span><span class="s1">) </span><span class="s2">and not any typographic considerations.</span>

<span class="s2">Much less clear is the choice of width for the Not East Asian</span>
<span class="s1">(</span><span class="s2">Neutral</span><span class="s1">) </span><span class="s2">class. Existing practice does not dictate a width for any</span>
<span class="s2">of these characters. It would nevertheless make sense</span>
<span class="s2">typographically to allocate two character cells to characters such</span>
<span class="s2">as for instance EM SPACE or VOLUME INTEGRAL, which cannot be</span>
<span class="s2">represented adequately with a single-width glyph. The following</span>
<span class="s2">routines at present merely assign a single-cell width to all</span>
<span class="s2">neutral characters, in the interest of simplicity. This is not</span>
<span class="s2">entirely satisfactory and should be reconsidered before</span>
<span class="s2">establishing a formal standard in this area. At the moment, the</span>
<span class="s2">decision which Not East Asian </span><span class="s1">(</span><span class="s2">Neutral</span><span class="s1">) </span><span class="s2">characters should be</span>
<span class="s2">represented by double-width glyphs cannot yet be answered by</span>
<span class="s2">applying a simple rule from the Unicode database content. Setting</span>
<span class="s2">up a proper standard for the behavior of UTF-8 character terminals</span>
<span class="s2">will require a careful analysis not only of each Unicode character,</span>
<span class="s2">but also of each presentation form, something the author of these</span>
<span class="s2">routines has avoided to do so far.</span>

<span class="s3">http://www.unicode.org/unicode/reports/tr11/</span>

<span class="s2">Markus Kuhn -- 2007-05-26 </span><span class="s1">(</span><span class="s2">Unicode 5.0</span><span class="s1">)</span>

<span class="s2">Permission to use, copy, modify, and distribute this software</span>
<span class="s2">for any purpose and without fee is hereby granted. The author</span>
<span class="s2">disclaims all warranties with regard to this software.</span>

<span class="s2">Latest version</span><span class="s1">: </span><span class="s3">http://www.cl.cam.ac.uk/~mgk25/ucs/wcwidth.c</span>



</pre>
</body>
</html>