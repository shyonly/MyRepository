<html>
<head>
<title>async.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #6aab73;}
.s2 { color: #2aacb8;}
.s3 { color: #cf8e6d;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
async.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;_gensync&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;asyncGeneratorStep&quot;</span><span class="s0">,</span><span class="s1">&quot;gen&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;_next&quot;</span><span class="s0">,</span><span class="s1">&quot;_throw&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;arg&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;done&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;then&quot;</span><span class="s0">,</span><span class="s1">&quot;_asyncToGenerator&quot;</span><span class="s0">,</span><span class="s1">&quot;fn&quot;</span><span class="s0">,</span><span class="s1">&quot;self&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;arguments&quot;</span><span class="s0">,</span><span class="s1">&quot;apply&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;runGenerator&quot;</span><span class="s0">,</span><span class="s1">&quot;gensync&quot;</span><span class="s0">,</span><span class="s1">&quot;item&quot;</span><span class="s0">,</span><span class="s1">&quot;isAsync&quot;</span><span class="s0">,</span><span class="s1">&quot;sync&quot;</span><span class="s0">,</span><span class="s1">&quot;errback&quot;</span><span class="s0">,</span><span class="s1">&quot;cb&quot;</span><span class="s0">,</span><span class="s1">&quot;exports&quot;</span><span class="s0">,</span><span class="s1">&quot;maybeAsync&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;isThenable&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;async&quot;</span><span class="s0">,</span><span class="s1">&quot;withKind&quot;</span><span class="s0">,</span><span class="s1">&quot;_ref&quot;</span><span class="s0">,</span><span class="s1">&quot;_x&quot;</span><span class="s0">,</span><span class="s1">&quot;forwardAsync&quot;</span><span class="s0">,</span><span class="s1">&quot;action&quot;</span><span class="s0">,</span><span class="s1">&quot;g&quot;</span><span class="s0">,</span><span class="s1">&quot;kind&quot;</span><span class="s0">,</span><span class="s1">&quot;adapted&quot;</span><span class="s0">,</span><span class="s1">&quot;onFirstPause&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;arity&quot;</span><span class="s0">,</span><span class="s1">&quot;firstPause&quot;</span><span class="s0">,</span><span class="s1">&quot;completed&quot;</span><span class="s0">,</span><span class="s1">&quot;waitFor&quot;</span><span class="s0">,</span><span class="s1">&quot;x&quot;</span><span class="s0">,</span><span class="s1">&quot;_ref2&quot;</span><span class="s0">,</span><span class="s1">&quot;_x2&quot;</span><span class="s0">,</span><span class="s1">&quot;val&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/gensync-utils/async.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import gensync, { type Gensync, type Handler, type Callback } from </span><span class="s3">\&quot;</span><span class="s1">gensync</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">type MaybePromise&lt;T&gt; = T | Promise&lt;T&gt;;</span><span class="s3">\n\n</span><span class="s1">const runGenerator: {</span><span class="s3">\n  </span><span class="s1">sync&lt;Return&gt;(gen: Handler&lt;Return&gt;): Return;</span><span class="s3">\n  </span><span class="s1">async&lt;Return&gt;(gen: Handler&lt;Return&gt;): Promise&lt;Return&gt;;</span><span class="s3">\n  </span><span class="s1">errback&lt;Return&gt;(gen: Handler&lt;Return&gt;, cb: Callback&lt;Return&gt;): void;</span><span class="s3">\n</span><span class="s1">} = gensync(function* (item: Handler&lt;any&gt;): Handler&lt;any&gt; {</span><span class="s3">\n  </span><span class="s1">return yield* item;</span><span class="s3">\n</span><span class="s1">});</span><span class="s3">\n\n</span><span class="s1">// This Gensync returns true if the current execution context is</span><span class="s3">\n</span><span class="s1">// asynchronous, otherwise it returns false.</span><span class="s3">\n</span><span class="s1">export const isAsync = gensync({</span><span class="s3">\n  </span><span class="s1">sync: () =&gt; false,</span><span class="s3">\n  </span><span class="s1">errback: cb =&gt; cb(null, true),</span><span class="s3">\n</span><span class="s1">});</span><span class="s3">\n\n</span><span class="s1">// This function wraps any functions (which could be either synchronous or</span><span class="s3">\n</span><span class="s1">// asynchronous) with a Gensync. If the wrapped function returns a promise</span><span class="s3">\n</span><span class="s1">// but the current execution context is synchronous, it will throw the</span><span class="s3">\n</span><span class="s1">// provided error.</span><span class="s3">\n</span><span class="s1">// This is used to handle user-provided functions which could be asynchronous.</span><span class="s3">\n</span><span class="s1">export function maybeAsync&lt;Args extends unknown[], Return&gt;(</span><span class="s3">\n  </span><span class="s1">fn: (...args: Args) =&gt; Return,</span><span class="s3">\n  </span><span class="s1">message: string,</span><span class="s3">\n</span><span class="s1">): Gensync&lt;Args, Return&gt; {</span><span class="s3">\n  </span><span class="s1">return gensync({</span><span class="s3">\n    </span><span class="s1">sync(...args) {</span><span class="s3">\n      </span><span class="s1">const result = fn.apply(this, args);</span><span class="s3">\n      </span><span class="s1">if (isThenable(result)) throw new Error(message);</span><span class="s3">\n      </span><span class="s1">return result;</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n    </span><span class="s1">async(...args) {</span><span class="s3">\n      </span><span class="s1">return Promise.resolve(fn.apply(this, args));</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const withKind = gensync({</span><span class="s3">\n  </span><span class="s1">sync: cb =&gt; cb(</span><span class="s3">\&quot;</span><span class="s1">sync</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">async: async cb =&gt; cb(</span><span class="s3">\&quot;</span><span class="s1">async</span><span class="s3">\&quot;</span><span class="s1">),</span><span class="s3">\n</span><span class="s1">}) as &lt;T&gt;(cb: (kind: </span><span class="s3">\&quot;</span><span class="s1">sync</span><span class="s3">\&quot; </span><span class="s1">| </span><span class="s3">\&quot;</span><span class="s1">async</span><span class="s3">\&quot;</span><span class="s1">) =&gt; MaybePromise&lt;T&gt;) =&gt; Handler&lt;T&gt;;</span><span class="s3">\n\n</span><span class="s1">// This function wraps a generator (or a Gensync) into another function which,</span><span class="s3">\n</span><span class="s1">// when called, will run the provided generator in a sync or async way, depending</span><span class="s3">\n</span><span class="s1">// on the execution context where this forwardAsync function is called.</span><span class="s3">\n</span><span class="s1">// This is useful, for example, when passing a callback to a function which isn't</span><span class="s3">\n</span><span class="s1">// aware of gensync, but it only knows about synchronous and asynchronous functions.</span><span class="s3">\n</span><span class="s1">// An example is cache.using, which being exposed to the user must be as simple as</span><span class="s3">\n</span><span class="s1">// possible:</span><span class="s3">\n</span><span class="s1">//     yield* forwardAsync(gensyncFn, wrappedFn =&gt;</span><span class="s3">\n</span><span class="s1">//       cache.using(x =&gt; {</span><span class="s3">\n</span><span class="s1">//         // Here we don't know about gensync. wrappedFn is a</span><span class="s3">\n</span><span class="s1">//         // normal sync or async function</span><span class="s3">\n</span><span class="s1">//         return wrappedFn(x);</span><span class="s3">\n</span><span class="s1">//       })</span><span class="s3">\n</span><span class="s1">//     )</span><span class="s3">\n</span><span class="s1">export function forwardAsync&lt;Args extends unknown[], Return&gt;(</span><span class="s3">\n  </span><span class="s1">action: (...args: Args) =&gt; Handler&lt;Return&gt;,</span><span class="s3">\n  </span><span class="s1">cb: (</span><span class="s3">\n    </span><span class="s1">adapted: (...args: Args) =&gt; MaybePromise&lt;Return&gt;,</span><span class="s3">\n  </span><span class="s1">) =&gt; MaybePromise&lt;Return&gt;,</span><span class="s3">\n</span><span class="s1">): Handler&lt;Return&gt; {</span><span class="s3">\n  </span><span class="s1">const g = gensync(action);</span><span class="s3">\n  </span><span class="s1">return withKind(kind =&gt; {</span><span class="s3">\n    </span><span class="s1">const adapted = g[kind];</span><span class="s3">\n    </span><span class="s1">return cb(adapted);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// If the given generator is executed asynchronously, the first time that it</span><span class="s3">\n</span><span class="s1">// is paused (i.e. When it yields a gensync generator which can't be run</span><span class="s3">\n</span><span class="s1">// synchronously), call the </span><span class="s3">\&quot;</span><span class="s1">firstPause</span><span class="s3">\&quot; </span><span class="s1">callback.</span><span class="s3">\n</span><span class="s1">export const onFirstPause = gensync&lt;</span><span class="s3">\n  </span><span class="s1">[gen: Handler&lt;unknown&gt;, firstPause: () =&gt; void],</span><span class="s3">\n  </span><span class="s1">unknown</span><span class="s3">\n</span><span class="s1">&gt;({</span><span class="s3">\n  </span><span class="s1">name: </span><span class="s3">\&quot;</span><span class="s1">onFirstPause</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n  </span><span class="s1">arity: 2,</span><span class="s3">\n  </span><span class="s1">sync: function (item) {</span><span class="s3">\n    </span><span class="s1">return runGenerator.sync(item);</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">errback: function (item, firstPause, cb) {</span><span class="s3">\n    </span><span class="s1">let completed = false;</span><span class="s3">\n\n    </span><span class="s1">runGenerator.errback(item, (err, value) =&gt; {</span><span class="s3">\n      </span><span class="s1">completed = true;</span><span class="s3">\n      </span><span class="s1">cb(err, value);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">if (!completed) {</span><span class="s3">\n      </span><span class="s1">firstPause();</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">}) as &lt;T&gt;(gen: Handler&lt;T&gt;, firstPause: () =&gt; void) =&gt; Handler&lt;T&gt;;</span><span class="s3">\n\n</span><span class="s1">// Wait for the given promise to be resolved</span><span class="s3">\n</span><span class="s1">export const waitFor = gensync({</span><span class="s3">\n  </span><span class="s1">sync: x =&gt; x,</span><span class="s3">\n  </span><span class="s1">async: async x =&gt; x,</span><span class="s3">\n</span><span class="s1">}) as &lt;T&gt;(p: T | Promise&lt;T&gt;) =&gt; Handler&lt;T&gt;;</span><span class="s3">\n\n</span><span class="s1">export function isThenable&lt;T = any&gt;(val: any): val is PromiseLike&lt;T&gt; {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">!!val &amp;&amp;</span><span class="s3">\n    </span><span class="s1">(typeof val === </span><span class="s3">\&quot;</span><span class="s1">object</span><span class="s3">\&quot; </span><span class="s1">|| typeof val === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;</span><span class="s1">) &amp;&amp;</span><span class="s3">\n    </span><span class="s1">!!val.then &amp;&amp;</span><span class="s3">\n    </span><span class="s1">typeof val.then === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot;\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>