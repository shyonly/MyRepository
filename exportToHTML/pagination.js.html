<html>
<head>
<title>pagination.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #bcbec4;}
.s4 { color: #2aacb8;}
.s5 { color: #d5b778;}
.s6 { color: #7a7e85;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
pagination.js</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">Pager from </span><span class="s2">'./pager.vue'</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">ElSelect from </span><span class="s2">'element-ui/packages/select'</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">ElOption from </span><span class="s2">'element-ui/packages/option'</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">ElInput from </span><span class="s2">'element-ui/packages/input'</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">Locale from </span><span class="s2">'element-ui/src/mixins/locale'</span><span class="s3">;</span>
<span class="s0">import </span><span class="s3">{ </span><span class="s1">valueEquals </span><span class="s3">} </span><span class="s1">from </span><span class="s2">'element-ui/src/utils/util'</span><span class="s3">;</span>

<span class="s0">export default </span><span class="s3">{</span>
  <span class="s1">name</span><span class="s3">: </span><span class="s2">'ElPagination'</span><span class="s3">,</span>

  <span class="s1">props</span><span class="s3">: {</span>
    <span class="s1">pageSize</span><span class="s3">: {</span>
      <span class="s1">type</span><span class="s3">: </span><span class="s1">Number</span><span class="s3">,</span>
      <span class="s0">default</span><span class="s3">: </span><span class="s4">10</span>
    <span class="s3">},</span>

    <span class="s1">small</span><span class="s3">: </span><span class="s1">Boolean</span><span class="s3">,</span>

    <span class="s1">total</span><span class="s3">: </span><span class="s1">Number</span><span class="s3">,</span>

    <span class="s1">pageCount</span><span class="s3">: </span><span class="s1">Number</span><span class="s3">,</span>

    <span class="s1">pagerCount</span><span class="s3">: {</span>
      <span class="s1">type</span><span class="s3">: </span><span class="s1">Number</span><span class="s3">,</span>
      <span class="s1">validator</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) {</span>
        <span class="s0">return </span><span class="s3">(</span><span class="s1">value </span><span class="s3">| </span><span class="s4">0</span><span class="s3">) === </span><span class="s1">value </span><span class="s3">&amp;&amp; </span><span class="s1">value </span><span class="s3">&gt; </span><span class="s4">4 </span><span class="s3">&amp;&amp; </span><span class="s1">value </span><span class="s3">&lt; </span><span class="s4">22 </span><span class="s3">&amp;&amp; (</span><span class="s1">value </span><span class="s3">% </span><span class="s4">2</span><span class="s3">) === </span><span class="s4">1</span><span class="s3">;</span>
      <span class="s3">},</span>
      <span class="s0">default</span><span class="s3">: </span><span class="s4">7</span>
    <span class="s3">},</span>

    <span class="s1">currentPage</span><span class="s3">: {</span>
      <span class="s1">type</span><span class="s3">: </span><span class="s1">Number</span><span class="s3">,</span>
      <span class="s0">default</span><span class="s3">: </span><span class="s4">1</span>
    <span class="s3">},</span>

    <span class="s1">layout</span><span class="s3">: {</span>
      <span class="s0">default</span><span class="s3">: </span><span class="s2">'prev, pager, next, jumper, -&gt;, total'</span>
    <span class="s3">},</span>

    <span class="s1">pageSizes</span><span class="s3">: {</span>
      <span class="s1">type</span><span class="s3">: </span><span class="s1">Array</span><span class="s3">,</span>
      <span class="s0">default</span><span class="s3">() {</span>
        <span class="s0">return </span><span class="s3">[</span><span class="s4">10</span><span class="s3">, </span><span class="s4">20</span><span class="s3">, </span><span class="s4">30</span><span class="s3">, </span><span class="s4">40</span><span class="s3">, </span><span class="s4">50</span><span class="s3">, </span><span class="s4">100</span><span class="s3">];</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">popperClass</span><span class="s3">: </span><span class="s1">String</span><span class="s3">,</span>

    <span class="s1">prevText</span><span class="s3">: </span><span class="s1">String</span><span class="s3">,</span>

    <span class="s1">nextText</span><span class="s3">: </span><span class="s1">String</span><span class="s3">,</span>

    <span class="s1">background</span><span class="s3">: </span><span class="s1">Boolean</span><span class="s3">,</span>

    <span class="s1">disabled</span><span class="s3">: </span><span class="s1">Boolean</span><span class="s3">,</span>

    <span class="s1">hideOnSinglePage</span><span class="s3">: </span><span class="s1">Boolean</span>
  <span class="s3">},</span>

  <span class="s1">data</span><span class="s3">() {</span>
    <span class="s0">return </span><span class="s3">{</span>
      <span class="s1">internalCurrentPage</span><span class="s3">: </span><span class="s4">1</span><span class="s3">,</span>
      <span class="s1">internalPageSize</span><span class="s3">: </span><span class="s4">0</span><span class="s3">,</span>
      <span class="s1">lastEmittedPage</span><span class="s3">: -</span><span class="s4">1</span><span class="s3">,</span>
      <span class="s1">userChangePageSize</span><span class="s3">: </span><span class="s0">false</span>
    <span class="s3">};</span>
  <span class="s3">},</span>

  <span class="s1">render</span><span class="s3">(</span><span class="s1">h</span><span class="s3">) {</span>
    <span class="s0">const </span><span class="s1">layout </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">layout</span><span class="s3">;</span>
    <span class="s0">if </span><span class="s3">(!</span><span class="s1">layout</span><span class="s3">) </span><span class="s0">return null</span><span class="s3">;</span>
    <span class="s0">if </span><span class="s3">(</span><span class="s0">this</span><span class="s3">.</span><span class="s1">hideOnSinglePage </span><span class="s3">&amp;&amp; (!</span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalPageCount </span><span class="s3">|| </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalPageCount </span><span class="s3">=== </span><span class="s4">1</span><span class="s3">)) </span><span class="s0">return null</span><span class="s3">;</span>

    <span class="s0">let </span><span class="s1">template </span><span class="s3">= </span><span class="s5">&lt;div </span><span class="s3">class</span><span class="s2">=</span><span class="s3">{[</span><span class="s2">'el-pagination'</span><span class="s3">, {</span>
      <span class="s2">'is-background'</span><span class="s3">: </span><span class="s0">this</span><span class="s3">.</span><span class="s1">background</span><span class="s3">,</span>
      <span class="s2">'el-pagination--small'</span><span class="s3">: </span><span class="s0">this</span><span class="s3">.</span><span class="s1">small</span>
    <span class="s3">}] }</span><span class="s5">&gt;&lt;/div&gt;</span><span class="s3">;</span>
    <span class="s0">const </span><span class="s1">TEMPLATE_MAP </span><span class="s3">= {</span>
      <span class="s1">prev</span><span class="s3">: </span><span class="s5">&lt;prev&gt;&lt;/prev&gt;</span><span class="s3">,</span>
      <span class="s1">jumper</span><span class="s3">: </span><span class="s5">&lt;jumper&gt;&lt;/jumper&gt;</span><span class="s3">,</span>
      <span class="s1">pager</span><span class="s3">: </span><span class="s5">&lt;pager </span><span class="s3">currentPage</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">} pageCount</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalPageCount </span><span class="s3">} pagerCount</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">pagerCount </span><span class="s3">} on-change</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">handleCurrentChange </span><span class="s3">} disabled</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">disabled </span><span class="s3">}</span><span class="s5">&gt;&lt;/pager&gt;</span><span class="s3">,</span>
      <span class="s1">next</span><span class="s3">: </span><span class="s5">&lt;next&gt;&lt;/next&gt;</span><span class="s3">,</span>
      <span class="s1">sizes</span><span class="s3">: </span><span class="s5">&lt;sizes </span><span class="s3">pageSizes</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">pageSizes </span><span class="s3">}</span><span class="s5">&gt;&lt;/sizes&gt;</span><span class="s3">,</span>
      <span class="s1">slot</span><span class="s3">: </span><span class="s5">&lt;slot&gt;</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$slots</span><span class="s3">.</span><span class="s1">default </span><span class="s3">? </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$slots</span><span class="s3">.</span><span class="s1">default </span><span class="s3">: </span><span class="s2">'' </span><span class="s3">}</span><span class="s5">&lt;/slot&gt;</span><span class="s3">,</span>
      <span class="s1">total</span><span class="s3">: </span><span class="s5">&lt;total&gt;&lt;/total&gt;</span>
    <span class="s3">};</span>
    <span class="s0">const </span><span class="s1">components </span><span class="s3">= </span><span class="s1">layout</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s2">','</span><span class="s3">).</span><span class="s1">map</span><span class="s3">((</span><span class="s1">item</span><span class="s3">) =&gt; </span><span class="s1">item</span><span class="s3">.</span><span class="s1">trim</span><span class="s3">());</span>
    <span class="s0">const </span><span class="s1">rightWrapper </span><span class="s3">= </span><span class="s5">&lt;div </span><span class="s3">class</span><span class="s2">=&quot;el-pagination__rightwrapper&quot;</span><span class="s5">&gt;&lt;/div&gt;</span><span class="s3">;</span>
    <span class="s0">let </span><span class="s1">haveRightWrapper </span><span class="s3">= </span><span class="s0">false</span><span class="s3">;</span>

    <span class="s1">template</span><span class="s3">.</span><span class="s1">children </span><span class="s3">= </span><span class="s1">template</span><span class="s3">.</span><span class="s1">children </span><span class="s3">|| [];</span>
    <span class="s1">rightWrapper</span><span class="s3">.</span><span class="s1">children </span><span class="s3">= </span><span class="s1">rightWrapper</span><span class="s3">.</span><span class="s1">children </span><span class="s3">|| [];</span>
    <span class="s1">components</span><span class="s3">.</span><span class="s1">forEach</span><span class="s3">(</span><span class="s1">compo </span><span class="s3">=&gt; {</span>
      <span class="s0">if </span><span class="s3">(</span><span class="s1">compo </span><span class="s3">=== </span><span class="s2">'-&gt;'</span><span class="s3">) {</span>
        <span class="s1">haveRightWrapper </span><span class="s3">= </span><span class="s0">true</span><span class="s3">;</span>
        <span class="s0">return</span><span class="s3">;</span>
      <span class="s3">}</span>

      <span class="s0">if </span><span class="s3">(!</span><span class="s1">haveRightWrapper</span><span class="s3">) {</span>
        <span class="s1">template</span><span class="s3">.</span><span class="s1">children</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">TEMPLATE_MAP</span><span class="s3">[</span><span class="s1">compo</span><span class="s3">]);</span>
      <span class="s3">} </span><span class="s0">else </span><span class="s3">{</span>
        <span class="s1">rightWrapper</span><span class="s3">.</span><span class="s1">children</span><span class="s3">.</span><span class="s1">push</span><span class="s3">(</span><span class="s1">TEMPLATE_MAP</span><span class="s3">[</span><span class="s1">compo</span><span class="s3">]);</span>
      <span class="s3">}</span>
    <span class="s3">});</span>

    <span class="s0">if </span><span class="s3">(</span><span class="s1">haveRightWrapper</span><span class="s3">) {</span>
      <span class="s1">template</span><span class="s3">.</span><span class="s1">children</span><span class="s3">.</span><span class="s1">unshift</span><span class="s3">(</span><span class="s1">rightWrapper</span><span class="s3">);</span>
    <span class="s3">}</span>

    <span class="s0">return </span><span class="s1">template</span><span class="s3">;</span>
  <span class="s3">},</span>

  <span class="s1">components</span><span class="s3">: {</span>
    <span class="s1">Prev</span><span class="s3">: {</span>
      <span class="s1">render</span><span class="s3">(</span><span class="s1">h</span><span class="s3">) {</span>
        <span class="s0">return </span><span class="s3">(</span>
          <span class="s5">&lt;button</span>
            <span class="s3">type</span><span class="s2">=&quot;button&quot;</span>
            <span class="s3">class</span><span class="s2">=&quot;btn-prev&quot;</span>
            <span class="s3">disabled</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">disabled </span><span class="s3">|| </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">&lt;= </span><span class="s4">1 </span><span class="s3">}</span>
            <span class="s3">on-click</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">prev </span><span class="s3">}</span><span class="s5">&gt;</span>
            <span class="s3">{</span>
              <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">prevText</span>
                <span class="s3">? </span><span class="s5">&lt;span&gt;</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">prevText </span><span class="s3">}</span><span class="s5">&lt;/span&gt;</span>
                <span class="s3">: </span><span class="s5">&lt;i </span><span class="s3">class</span><span class="s2">=&quot;el-icon el-icon-arrow-left&quot;</span><span class="s5">&gt;&lt;/i&gt;</span>
            <span class="s3">}</span>
          <span class="s5">&lt;/button&gt;</span>
        <span class="s3">);</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">Next</span><span class="s3">: {</span>
      <span class="s1">render</span><span class="s3">(</span><span class="s1">h</span><span class="s3">) {</span>
        <span class="s0">return </span><span class="s3">(</span>
          <span class="s5">&lt;button</span>
            <span class="s3">type</span><span class="s2">=&quot;button&quot;</span>
            <span class="s3">class</span><span class="s2">=&quot;btn-next&quot;</span>
            <span class="s3">disabled</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">disabled </span><span class="s3">|| </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">=== </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalPageCount </span><span class="s3">|| </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalPageCount </span><span class="s3">=== </span><span class="s4">0 </span><span class="s3">}</span>
            <span class="s3">on-click</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">next </span><span class="s3">}</span><span class="s5">&gt;</span>
            <span class="s3">{</span>
              <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">nextText</span>
                <span class="s3">? </span><span class="s5">&lt;span&gt;</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">nextText </span><span class="s3">}</span><span class="s5">&lt;/span&gt;</span>
                <span class="s3">: </span><span class="s5">&lt;i </span><span class="s3">class</span><span class="s2">=&quot;el-icon el-icon-arrow-right&quot;</span><span class="s5">&gt;&lt;/i&gt;</span>
            <span class="s3">}</span>
          <span class="s5">&lt;/button&gt;</span>
        <span class="s3">);</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">Sizes</span><span class="s3">: {</span>
      <span class="s1">mixins</span><span class="s3">: [</span><span class="s1">Locale</span><span class="s3">],</span>

      <span class="s1">props</span><span class="s3">: {</span>
        <span class="s1">pageSizes</span><span class="s3">: </span><span class="s1">Array</span>
      <span class="s3">},</span>

      <span class="s1">watch</span><span class="s3">: {</span>
        <span class="s1">pageSizes</span><span class="s3">: {</span>
          <span class="s1">immediate</span><span class="s3">: </span><span class="s0">true</span><span class="s3">,</span>
          <span class="s1">handler</span><span class="s3">(</span><span class="s1">newVal</span><span class="s3">, </span><span class="s1">oldVal</span><span class="s3">) {</span>
            <span class="s0">if </span><span class="s3">(</span><span class="s1">valueEquals</span><span class="s3">(</span><span class="s1">newVal</span><span class="s3">, </span><span class="s1">oldVal</span><span class="s3">)) </span><span class="s0">return</span><span class="s3">;</span>
            <span class="s0">if </span><span class="s3">(</span><span class="s1">Array</span><span class="s3">.</span><span class="s1">isArray</span><span class="s3">(</span><span class="s1">newVal</span><span class="s3">)) {</span>
              <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalPageSize </span><span class="s3">= </span><span class="s1">newVal</span><span class="s3">.</span><span class="s1">indexOf</span><span class="s3">(</span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">pageSize</span><span class="s3">) &gt; -</span><span class="s4">1</span>
                <span class="s3">? </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">pageSize</span>
                <span class="s3">: </span><span class="s0">this</span><span class="s3">.</span><span class="s1">pageSizes</span><span class="s3">[</span><span class="s4">0</span><span class="s3">];</span>
            <span class="s3">}</span>
          <span class="s3">}</span>
        <span class="s3">}</span>
      <span class="s3">},</span>

      <span class="s1">render</span><span class="s3">(</span><span class="s1">h</span><span class="s3">) {</span>
        <span class="s0">return </span><span class="s3">(</span>
          <span class="s5">&lt;span </span><span class="s3">class</span><span class="s2">=&quot;el-pagination__sizes&quot;</span><span class="s5">&gt;</span>
            <span class="s5">&lt;el-select</span>
              <span class="s3">value</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalPageSize </span><span class="s3">}</span>
              <span class="s3">popperClass</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">popperClass </span><span class="s3">|| </span><span class="s2">'' </span><span class="s3">}</span>
              <span class="s3">size</span><span class="s2">=&quot;mini&quot;</span>
              <span class="s3">on-input</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">handleChange </span><span class="s3">}</span>
              <span class="s3">disabled</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">disabled </span><span class="s3">}</span><span class="s5">&gt;</span>
              <span class="s3">{</span>
                <span class="s0">this</span><span class="s3">.</span><span class="s1">pageSizes</span><span class="s3">.</span><span class="s1">map</span><span class="s3">(</span><span class="s1">item </span><span class="s3">=&gt;</span>
                  <span class="s5">&lt;el-option</span>
                    <span class="s3">value</span><span class="s2">=</span><span class="s3">{ </span><span class="s1">item </span><span class="s3">}</span>
                    <span class="s3">label</span><span class="s2">=</span><span class="s3">{ </span><span class="s1">item </span><span class="s3">+ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">t</span><span class="s3">(</span><span class="s2">'el.pagination.pagesize'</span><span class="s3">) }</span><span class="s5">&gt;</span>
                  <span class="s5">&lt;/el-option&gt;</span>
                <span class="s3">)</span>
              <span class="s3">}</span>
            <span class="s5">&lt;/el-select&gt;</span>
          <span class="s5">&lt;/span&gt;</span>
        <span class="s3">);</span>
      <span class="s3">},</span>

      <span class="s1">components</span><span class="s3">: {</span>
        <span class="s1">ElSelect</span><span class="s3">,</span>
        <span class="s1">ElOption</span>
      <span class="s3">},</span>

      <span class="s1">methods</span><span class="s3">: {</span>
        <span class="s1">handleChange</span><span class="s3">(</span><span class="s1">val</span><span class="s3">) {</span>
          <span class="s0">if </span><span class="s3">(</span><span class="s1">val </span><span class="s3">!== </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalPageSize</span><span class="s3">) {</span>
            <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalPageSize </span><span class="s3">= </span><span class="s1">val </span><span class="s3">= </span><span class="s1">parseInt</span><span class="s3">(</span><span class="s1">val</span><span class="s3">, </span><span class="s4">10</span><span class="s3">);</span>
            <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">userChangePageSize </span><span class="s3">= </span><span class="s0">true</span><span class="s3">;</span>
            <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">$emit</span><span class="s3">(</span><span class="s2">'update:pageSize'</span><span class="s3">, </span><span class="s1">val</span><span class="s3">);</span>
            <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">$emit</span><span class="s3">(</span><span class="s2">'size-change'</span><span class="s3">, </span><span class="s1">val</span><span class="s3">);</span>
          <span class="s3">}</span>
        <span class="s3">}</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">Jumper</span><span class="s3">: {</span>
      <span class="s1">mixins</span><span class="s3">: [</span><span class="s1">Locale</span><span class="s3">],</span>

      <span class="s1">components</span><span class="s3">: { </span><span class="s1">ElInput </span><span class="s3">},</span>

      <span class="s1">data</span><span class="s3">() {</span>
        <span class="s0">return </span><span class="s3">{</span>
          <span class="s1">userInput</span><span class="s3">: </span><span class="s0">null</span>
        <span class="s3">};</span>
      <span class="s3">},</span>

      <span class="s1">watch</span><span class="s3">: {</span>
        <span class="s2">'$parent.internalCurrentPage'</span><span class="s3">() {</span>
          <span class="s0">this</span><span class="s3">.</span><span class="s1">userInput </span><span class="s3">= </span><span class="s0">null</span><span class="s3">;</span>
        <span class="s3">}</span>
      <span class="s3">},</span>

      <span class="s1">methods</span><span class="s3">: {</span>
        <span class="s1">handleKeyup</span><span class="s3">({ </span><span class="s1">keyCode</span><span class="s3">, </span><span class="s1">target </span><span class="s3">}) {</span>
          <span class="s6">// Chrome, Safari, Firefox triggers change event on Enter</span>
          <span class="s6">// Hack for IE: https://github.com/ElemeFE/element/issues/11710</span>
          <span class="s6">// Drop this method when we no longer supports IE</span>
          <span class="s0">if </span><span class="s3">(</span><span class="s1">keyCode </span><span class="s3">=== </span><span class="s4">13</span><span class="s3">) {</span>
            <span class="s0">this</span><span class="s3">.</span><span class="s1">handleChange</span><span class="s3">(</span><span class="s1">target</span><span class="s3">.</span><span class="s1">value</span><span class="s3">);</span>
          <span class="s3">}</span>
        <span class="s3">},</span>
        <span class="s1">handleInput</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) {</span>
          <span class="s0">this</span><span class="s3">.</span><span class="s1">userInput </span><span class="s3">= </span><span class="s1">value</span><span class="s3">;</span>
        <span class="s3">},</span>
        <span class="s1">handleChange</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) {</span>
          <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">getValidCurrentPage</span><span class="s3">(</span><span class="s1">value</span><span class="s3">);</span>
          <span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">emitChange</span><span class="s3">();</span>
          <span class="s0">this</span><span class="s3">.</span><span class="s1">userInput </span><span class="s3">= </span><span class="s0">null</span><span class="s3">;</span>
        <span class="s3">}</span>
      <span class="s3">},</span>

      <span class="s1">render</span><span class="s3">(</span><span class="s1">h</span><span class="s3">) {</span>
        <span class="s0">return </span><span class="s3">(</span>
          <span class="s5">&lt;span </span><span class="s3">class</span><span class="s2">=&quot;el-pagination__jump&quot;</span><span class="s5">&gt;</span>
            <span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">t</span><span class="s3">(</span><span class="s2">'el.pagination.goto'</span><span class="s3">) }</span>
            <span class="s5">&lt;el-input</span>
              <span class="s3">class</span><span class="s2">=&quot;el-pagination__editor is-in-pagination&quot;</span>
              <span class="s3">min</span><span class="s2">=</span><span class="s3">{ </span><span class="s4">1 </span><span class="s3">}</span>
              <span class="s3">max</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalPageCount </span><span class="s3">}</span>
              <span class="s3">value</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">userInput </span><span class="s3">!== </span><span class="s0">null </span><span class="s3">? </span><span class="s0">this</span><span class="s3">.</span><span class="s1">userInput </span><span class="s3">: </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">}</span>
              <span class="s3">type</span><span class="s2">=&quot;number&quot;</span>
              <span class="s3">disabled</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">disabled </span><span class="s3">}</span>
              <span class="s3">nativeOnKeyup</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">handleKeyup </span><span class="s3">}</span>
              <span class="s3">onInput</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">handleInput </span><span class="s3">}</span>
              <span class="s3">onChange</span><span class="s2">=</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">handleChange </span><span class="s3">}</span><span class="s5">/&gt;</span>
            <span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">t</span><span class="s3">(</span><span class="s2">'el.pagination.pageClassifier'</span><span class="s3">) }</span>
          <span class="s5">&lt;/span&gt;</span>
        <span class="s3">);</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">Total</span><span class="s3">: {</span>
      <span class="s1">mixins</span><span class="s3">: [</span><span class="s1">Locale</span><span class="s3">],</span>

      <span class="s1">render</span><span class="s3">(</span><span class="s1">h</span><span class="s3">) {</span>
        <span class="s0">return </span><span class="s3">(</span>
          <span class="s0">typeof this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">total </span><span class="s3">=== </span><span class="s2">'number'</span>
            <span class="s3">? </span><span class="s5">&lt;span </span><span class="s3">class</span><span class="s2">=&quot;el-pagination__total&quot;</span><span class="s5">&gt;</span><span class="s3">{ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">t</span><span class="s3">(</span><span class="s2">'el.pagination.total'</span><span class="s3">, { </span><span class="s1">total</span><span class="s3">: </span><span class="s0">this</span><span class="s3">.</span><span class="s1">$parent</span><span class="s3">.</span><span class="s1">total </span><span class="s3">}) }</span><span class="s5">&lt;/span&gt;</span>
            <span class="s3">: </span><span class="s2">''</span>
        <span class="s3">);</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">Pager</span>
  <span class="s3">},</span>

  <span class="s1">methods</span><span class="s3">: {</span>
    <span class="s1">handleCurrentChange</span><span class="s3">(</span><span class="s1">val</span><span class="s3">) {</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">getValidCurrentPage</span><span class="s3">(</span><span class="s1">val</span><span class="s3">);</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">userChangePageSize </span><span class="s3">= </span><span class="s0">true</span><span class="s3">;</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">emitChange</span><span class="s3">();</span>
    <span class="s3">},</span>

    <span class="s1">prev</span><span class="s3">() {</span>
      <span class="s0">if </span><span class="s3">(</span><span class="s0">this</span><span class="s3">.</span><span class="s1">disabled</span><span class="s3">) </span><span class="s0">return</span><span class="s3">;</span>
      <span class="s0">const </span><span class="s1">newVal </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">- </span><span class="s4">1</span><span class="s3">;</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">getValidCurrentPage</span><span class="s3">(</span><span class="s1">newVal</span><span class="s3">);</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">$emit</span><span class="s3">(</span><span class="s2">'prev-click'</span><span class="s3">, </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage</span><span class="s3">);</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">emitChange</span><span class="s3">();</span>
    <span class="s3">},</span>

    <span class="s1">next</span><span class="s3">() {</span>
      <span class="s0">if </span><span class="s3">(</span><span class="s0">this</span><span class="s3">.</span><span class="s1">disabled</span><span class="s3">) </span><span class="s0">return</span><span class="s3">;</span>
      <span class="s0">const </span><span class="s1">newVal </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">+ </span><span class="s4">1</span><span class="s3">;</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">getValidCurrentPage</span><span class="s3">(</span><span class="s1">newVal</span><span class="s3">);</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">$emit</span><span class="s3">(</span><span class="s2">'next-click'</span><span class="s3">, </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage</span><span class="s3">);</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">emitChange</span><span class="s3">();</span>
    <span class="s3">},</span>

    <span class="s1">getValidCurrentPage</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) {</span>
      <span class="s1">value </span><span class="s3">= </span><span class="s1">parseInt</span><span class="s3">(</span><span class="s1">value</span><span class="s3">, </span><span class="s4">10</span><span class="s3">);</span>

      <span class="s0">const </span><span class="s1">havePageCount </span><span class="s3">= </span><span class="s0">typeof this</span><span class="s3">.</span><span class="s1">internalPageCount </span><span class="s3">=== </span><span class="s2">'number'</span><span class="s3">;</span>

      <span class="s0">let </span><span class="s1">resetValue</span><span class="s3">;</span>
      <span class="s0">if </span><span class="s3">(!</span><span class="s1">havePageCount</span><span class="s3">) {</span>
        <span class="s0">if </span><span class="s3">(</span><span class="s1">isNaN</span><span class="s3">(</span><span class="s1">value</span><span class="s3">) || </span><span class="s1">value </span><span class="s3">&lt; </span><span class="s4">1</span><span class="s3">) </span><span class="s1">resetValue </span><span class="s3">= </span><span class="s4">1</span><span class="s3">;</span>
      <span class="s3">} </span><span class="s0">else </span><span class="s3">{</span>
        <span class="s0">if </span><span class="s3">(</span><span class="s1">value </span><span class="s3">&lt; </span><span class="s4">1</span><span class="s3">) {</span>
          <span class="s1">resetValue </span><span class="s3">= </span><span class="s4">1</span><span class="s3">;</span>
        <span class="s3">} </span><span class="s0">else if </span><span class="s3">(</span><span class="s1">value </span><span class="s3">&gt; </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalPageCount</span><span class="s3">) {</span>
          <span class="s1">resetValue </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalPageCount</span><span class="s3">;</span>
        <span class="s3">}</span>
      <span class="s3">}</span>

      <span class="s0">if </span><span class="s3">(</span><span class="s1">resetValue </span><span class="s3">=== </span><span class="s1">undefined </span><span class="s3">&amp;&amp; </span><span class="s1">isNaN</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)) {</span>
        <span class="s1">resetValue </span><span class="s3">= </span><span class="s4">1</span><span class="s3">;</span>
      <span class="s3">} </span><span class="s0">else if </span><span class="s3">(</span><span class="s1">resetValue </span><span class="s3">=== </span><span class="s4">0</span><span class="s3">) {</span>
        <span class="s1">resetValue </span><span class="s3">= </span><span class="s4">1</span><span class="s3">;</span>
      <span class="s3">}</span>

      <span class="s0">return </span><span class="s1">resetValue </span><span class="s3">=== </span><span class="s1">undefined </span><span class="s3">? </span><span class="s1">value </span><span class="s3">: </span><span class="s1">resetValue</span><span class="s3">;</span>
    <span class="s3">},</span>

    <span class="s1">emitChange</span><span class="s3">() {</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">$nextTick</span><span class="s3">(() =&gt; {</span>
        <span class="s0">if </span><span class="s3">(</span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">!== </span><span class="s0">this</span><span class="s3">.</span><span class="s1">lastEmittedPage </span><span class="s3">|| </span><span class="s0">this</span><span class="s3">.</span><span class="s1">userChangePageSize</span><span class="s3">) {</span>
          <span class="s0">this</span><span class="s3">.</span><span class="s1">$emit</span><span class="s3">(</span><span class="s2">'current-change'</span><span class="s3">, </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage</span><span class="s3">);</span>
          <span class="s0">this</span><span class="s3">.</span><span class="s1">lastEmittedPage </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage</span><span class="s3">;</span>
          <span class="s0">this</span><span class="s3">.</span><span class="s1">userChangePageSize </span><span class="s3">= </span><span class="s0">false</span><span class="s3">;</span>
        <span class="s3">}</span>
      <span class="s3">});</span>
    <span class="s3">}</span>
  <span class="s3">},</span>

  <span class="s1">computed</span><span class="s3">: {</span>
    <span class="s1">internalPageCount</span><span class="s3">() {</span>
      <span class="s0">if </span><span class="s3">(</span><span class="s0">typeof this</span><span class="s3">.</span><span class="s1">total </span><span class="s3">=== </span><span class="s2">'number'</span><span class="s3">) {</span>
        <span class="s0">return </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">max</span><span class="s3">(</span><span class="s4">1</span><span class="s3">, </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">ceil</span><span class="s3">(</span><span class="s0">this</span><span class="s3">.</span><span class="s1">total </span><span class="s3">/ </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalPageSize</span><span class="s3">));</span>
      <span class="s3">} </span><span class="s0">else if </span><span class="s3">(</span><span class="s0">typeof this</span><span class="s3">.</span><span class="s1">pageCount </span><span class="s3">=== </span><span class="s2">'number'</span><span class="s3">) {</span>
        <span class="s0">return </span><span class="s1">Math</span><span class="s3">.</span><span class="s1">max</span><span class="s3">(</span><span class="s4">1</span><span class="s3">, </span><span class="s0">this</span><span class="s3">.</span><span class="s1">pageCount</span><span class="s3">);</span>
      <span class="s3">}</span>
      <span class="s0">return null</span><span class="s3">;</span>
    <span class="s3">}</span>
  <span class="s3">},</span>

  <span class="s1">watch</span><span class="s3">: {</span>
    <span class="s1">currentPage</span><span class="s3">: {</span>
      <span class="s1">immediate</span><span class="s3">: </span><span class="s0">true</span><span class="s3">,</span>
      <span class="s1">handler</span><span class="s3">(</span><span class="s1">val</span><span class="s3">) {</span>
        <span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">getValidCurrentPage</span><span class="s3">(</span><span class="s1">val</span><span class="s3">);</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">pageSize</span><span class="s3">: {</span>
      <span class="s1">immediate</span><span class="s3">: </span><span class="s0">true</span><span class="s3">,</span>
      <span class="s1">handler</span><span class="s3">(</span><span class="s1">val</span><span class="s3">) {</span>
        <span class="s0">this</span><span class="s3">.</span><span class="s1">internalPageSize </span><span class="s3">= </span><span class="s1">isNaN</span><span class="s3">(</span><span class="s1">val</span><span class="s3">) ? </span><span class="s4">10 </span><span class="s3">: </span><span class="s1">val</span><span class="s3">;</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">internalCurrentPage</span><span class="s3">: {</span>
      <span class="s1">immediate</span><span class="s3">: </span><span class="s0">true</span><span class="s3">,</span>
      <span class="s1">handler</span><span class="s3">(</span><span class="s1">newVal</span><span class="s3">) {</span>
        <span class="s0">this</span><span class="s3">.</span><span class="s1">$emit</span><span class="s3">(</span><span class="s2">'update:currentPage'</span><span class="s3">, </span><span class="s1">newVal</span><span class="s3">);</span>
        <span class="s0">this</span><span class="s3">.</span><span class="s1">lastEmittedPage </span><span class="s3">= -</span><span class="s4">1</span><span class="s3">;</span>
      <span class="s3">}</span>
    <span class="s3">},</span>

    <span class="s1">internalPageCount</span><span class="s3">(</span><span class="s1">newVal</span><span class="s3">) {</span>
      <span class="s6">/* istanbul ignore if */</span>
      <span class="s0">const </span><span class="s1">oldPage </span><span class="s3">= </span><span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage</span><span class="s3">;</span>
      <span class="s0">if </span><span class="s3">(</span><span class="s1">newVal </span><span class="s3">&gt; </span><span class="s4">0 </span><span class="s3">&amp;&amp; </span><span class="s1">oldPage </span><span class="s3">=== </span><span class="s4">0</span><span class="s3">) {</span>
        <span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">= </span><span class="s4">1</span><span class="s3">;</span>
      <span class="s3">} </span><span class="s0">else if </span><span class="s3">(</span><span class="s1">oldPage </span><span class="s3">&gt; </span><span class="s1">newVal</span><span class="s3">) {</span>
        <span class="s0">this</span><span class="s3">.</span><span class="s1">internalCurrentPage </span><span class="s3">= </span><span class="s1">newVal </span><span class="s3">=== </span><span class="s4">0 </span><span class="s3">? </span><span class="s4">1 </span><span class="s3">: </span><span class="s1">newVal</span><span class="s3">;</span>
        <span class="s0">this</span><span class="s3">.</span><span class="s1">userChangePageSize </span><span class="s3">&amp;&amp; </span><span class="s0">this</span><span class="s3">.</span><span class="s1">emitChange</span><span class="s3">();</span>
      <span class="s3">}</span>
      <span class="s0">this</span><span class="s3">.</span><span class="s1">userChangePageSize </span><span class="s3">= </span><span class="s0">false</span><span class="s3">;</span>
    <span class="s3">}</span>
  <span class="s3">}</span>
<span class="s3">};</span>
</pre>
</body>
</html>